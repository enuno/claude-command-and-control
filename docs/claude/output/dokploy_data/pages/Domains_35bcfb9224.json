{
  "title": "Domains",
  "content": "import { Callout } from 'fumadocs-ui/components/callout';\nimport { Link } from 'next/link';\n\nDokploy Provide 2 ways to add a domain to your service:\n\n1. **Free Domains** from Traefik.me\n2. **Buy a domain** from one of the providers above\n\n<Callout type=\"warn\">\n  `traefik.me` domains are free, but they are limited to HTTP only, if you want to configure HTTPS for free domains\n  you can [Create a certificate](/docs/core/certificates#traefikme-https-setup) and use it in the domain settings.\n</Callout>\n\nIf you don't have a domain, you can use our integrated free domains from Traefik.me in the Dokploy panel, without doing any configuration however is only for HTTP, if you want to have a HTTPS domain you need to buy a domain from one of the providers above.\n\nDomains are supported for:\n\n* **Applications**\n* **Docker Compose**\n\n## How Domains Are Managed\n\nDokploy handles domains differently depending on whether you're using Applications or Docker Compose:\n\nFor **Applications**, Dokploy creates a unique configuration file for each domain you create or update. These files are managed automatically and can be viewed in:\n\n* **Traefik File System**: Accessible through the Dokploy UI\n* **Advanced Settings**: Scroll to the bottom of the Advanced tab to view the Traefik configuration\n\nEach domain configuration follows this structure:\n\n**Key Points for Applications:**\n\n* **No Redeployment Required**: Changes to domains take effect immediately without needing to redeploy your application\n* **Hot Reload**: Dokploy uses Traefik's [File Provider](https://doc.traefik.io/traefik/reference/install-configuration/providers/others/file/) which supports hot reloading, so configuration changes are applied automatically\n* **Troubleshooting**: If you make changes and your domain doesn't work, check the Traefik logs for any errors. The logs should provide helpful information about what might be wrong\n\nFor **Docker Compose**, domains are managed using [Traefik Docker Labels](https://doc.traefik.io/traefik/expose/docker/). This means:\n\n* **No Configuration Files**: Domains are configured directly through Docker labels in your compose file\n* **Redeployment Required**: Unlike Applications, you **must redeploy** your Docker Compose application for domain changes to take effect\n* **No Hot Reload**: Docker Compose does not support hot reloading of domain configurations, so Traefik needs to read the labels from a fresh deployment\n\n**Key Points for Docker Compose:**\n\n* Each time you modify a domain, you need to redeploy the application\n* Domain changes are applied when Traefik reads the Docker labels during deployment\n* For more details on configuring domains manually with Docker Compose, see the [Docker Compose Domains guide](/docs/core/docker-compose/domains)\n\n## Requirements (Optional)\n\nWe recommend this if you want to have a HTTPS domain, you need to buy a domain from one of the providers above.\n\n* [Cloudflare](https://www.cloudflare.com/)\n* [Porkbun](https://porkbun.com/)\n* [Namecheap](https://www.namecheap.com/domains/)\n* [Name.com](https://www.name.com/)\n* [GoDaddy](https://www.godaddy.com/)\n* [Domain.com](https://www.domain.com/)\n\nAssociate custom domains with your application to make it accessible over the internet.\n\n* **Host**: The domain name that you want to link to your application (e.g., `api.dokploy.com`).\n* **Path**: The specific path within the domain where the application should be accessible.\n* **Internal Path**: The internal path where your application expects to receive requests.\n* **Strip Path**: Removes the **Path** from the request before forwarding to the application.\n* **Container Port**: The port on the container that the domain should route to.\n* **HTTPS**: Toggle this on to enable HTTPS for your domain, providing secure, encrypted connections.\n* **Certificate**: Select (letsencrypt) or (None)\n\nFor how **Internal Path** and **Strip Path** work using Traefik middlewares, see the note below.\n\nProper domain configuration is crucial for the accessibility and security of your application. Always verify domain settings and ensure that DNS configurations are properly set up to point to the correct IP addresses. Enable HTTPS to enhance security and trust, especially for production environments.\n\n### Understanding Internal Path and Strip Path\n\nDokploy uses Traefik middlewares to modify request paths before they reach your application. These powerful tools allow you to create flexible routing configurations that match your application's expected URL structure.\n\n<Callout type=\"warn\">\n  **Warning: Potential Redirect Issues**\n\nWhen using Internal Path and Strip Path middlewares, ensure your application is properly configured to handle the modified paths. If your application generates redirects or absolute URLs that don't match the expected path structure, it may cause redirect loops or broken functionality. Use these middlewares with caution and test thoroughly to ensure your application works correctly with the path transformations.\n</Callout>\n\n**Internal Path Middleware**\n\nThe Internal Path middleware adds a prefix to the request path before forwarding it to your container. This is useful when your application expects all requests to start with a specific base path.\n\n* Domain: `api.dokploy.com`\n* Path: `/v1`\n* Internal Path: `/backend/api`\n* Request: `api.dokploy.com/v1/users`\n* Forwarded to container as: `/backend/api/users`\n\nIn this example, the middleware adds `/backend/api` to the beginning of the request path, which is helpful when your application is structured to expect requests at a specific internal directory.\n\n**Strip Path Middleware**\n\nThe Strip Path middleware removes a specified path prefix from the request before forwarding it to your container. This is perfect when you want to organize your public URLs with prefixes but your application expects clean, unprefixed paths.\n\n* Domain: `app.dokploy.com`\n* Path: `/dashboard`\n* Strip Path: Enabled\n* Request: `app.dokploy.com/dashboard/settings`\n* Forwarded to container as: `/settings`\n\nHere, the middleware removes the `/dashboard` prefix, so your application receives the request as if it was made directly to `/settings`.\n\n**Using Both Internal Path and Strip Path Together**\n\nYou can combine both middlewares to create sophisticated routing scenarios. When both are enabled, Strip Path is applied first, then Internal Path is added.\n\n* Domain: `service.dokploy.com`\n* Path: `/public`\n* Strip Path: Enabled\n* Internal Path: `/app/v2`\n* Request: `service.dokploy.com/public/api/users`\n* Processing:\n  1. Strip Path removes `/public`: `/api/users`\n  2. Internal Path adds `/app/v2`: `/app/v2/api/users`\n* Final forwarded path: `/app/v2/api/users`\n\nThis powerful combination allows you to:\n\n* Remove public-facing path prefixes that users see\n* Add internal path prefixes that your application requires\n* Create clean separation between your public URL structure and internal application structure\n\n**When to Use Each Option**\n\n* **Internal Path only**: When your application requires a specific base path that differs from your public URL\n* **Strip Path only**: When you want organized public URLs but your application expects clean paths\n* **Both together**: When you need to transform public URLs to match complex internal application structures\n\nThese middlewares ensure your application receives requests in the exact format it expects, regardless of how you structure your public domain paths.\n\n### Important Clarification on Container Ports\n\nThe \"Container Port\" specified in the domain settings is exclusively for routing traffic to the correct application container through Traefik, and does not expose the port directly to the internet. This is fundamentally different from the port settings in the \"Advanced -> Ports\" section, which are used to directly expose application ports. The container port in the domain settings ensures that Traefik can internally direct traffic to the specified port within the container based on the domain configuration.\n\nWhen using the `Static` build type or `Nixpacks` and `Publish Directory` build type, you need to use the port `80` when creating a domain.\n\n## Adding WWW to your domain\n\nIf you want to add WWW to your domain, you can do it by adding a CNAME record to your DNS provider.\n\nFor example, if your domain is `example.com`, you can add a CNAME record to your DNS provider with the following configuration:\n\n* TYPE: CNAME\n* NAME: www\n* VALUE: example.com\n\nCreate the domain in dokploy, using the host `www.example.com`\n\nNow in dokploy, you can go to application -> advanced -> redirects (Select the preset www to non-www) and click on save.\n\nnow everytime you access `www.example.com` it will redirect to `example.com`",
  "code_samples": [
    {
      "code": "http:\n  routers:\n    dokploy-app-name-router-1:\n      rule: Host(`your-domain.com`)\n      service: dokploy-app-name-service-1\n      middlewares:\n        - redirect-to-https\n      entryPoints:\n        - web\n    dokploy-app-name-router-websecure-1:\n      rule: Host(`your-domain.com`)\n      service: dokploy-app-name-service-1\n      middlewares: []\n      entryPoints:\n        - websecure\n      tls:\n        certResolver: letsencrypt\n  services:\n    dokploy-app-name-service-1:\n      loadBalancer:\n        servers:\n          - url: http://dokploy-app-name:3000\n        passHostHeader: true",
      "language": "yaml"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "How Domains Are Managed",
      "id": "how-domains-are-managed"
    },
    {
      "level": "h3",
      "text": "Applications",
      "id": "applications"
    },
    {
      "level": "h3",
      "text": "Docker Compose",
      "id": "docker-compose"
    },
    {
      "level": "h2",
      "text": "Requirements (Optional)",
      "id": "requirements-(optional)"
    },
    {
      "level": "h3",
      "text": "Add Domain",
      "id": "add-domain"
    },
    {
      "level": "h3",
      "text": "Note",
      "id": "note"
    },
    {
      "level": "h3",
      "text": "Understanding Internal Path and Strip Path",
      "id": "understanding-internal-path-and-strip-path"
    },
    {
      "level": "h3",
      "text": "Important Clarification on Container Ports",
      "id": "important-clarification-on-container-ports"
    },
    {
      "level": "h2",
      "text": "Static Build Type",
      "id": "static-build-type"
    },
    {
      "level": "h2",
      "text": "Adding WWW to your domain",
      "id": "adding-www-to-your-domain"
    }
  ],
  "url": "llms-txt#domains",
  "links": []
}