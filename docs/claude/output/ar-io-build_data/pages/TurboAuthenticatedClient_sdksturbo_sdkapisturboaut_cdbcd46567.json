{
  "title": "TurboAuthenticatedClient (/sdks/turbo-sdk/(apis)/turboauthenticatedclient)",
  "content": "Issues a signed request to get the credit balance of a wallet measured in AR (measured in Winston Credits, or winc).\n\n#### signer.getNativeAddress()\n\nReturns the [native address][docs/native-address] of the connected signer.\n\n#### getWincForFiat()\n\nReturns the current amount of Winston Credits including all adjustments for the provided fiat currency, amount, and optional promo codes.\n\n#### createCheckoutSession()\n\nCreates a Stripe checkout session for a Turbo Top Up with the provided amount, currency, owner, and optional promo codes. The returned URL can be opened in the browser, all payments are processed by Stripe. Promo codes require an authenticated client.\n\nThe easiest way to upload data to Turbo. The `signal` is an optional [AbortSignal] that can be used to cancel the upload or timeout the request. `dataItemOpts` is an optional object that can be used to configure tags, target, and anchor for the data item upload.\n\nSigns and uploads a raw file. There are two ways to provide the file to the SDK:\n\n1. Using a `file` parameter\n2. Using a `fileStreamFactory` and `fileSizeFactory`\n\nIn Web with a file input:\n\nIn NodeJS with a file path:\n\n##### Using fileStreamFactory` and `fileSizeFactory`\n\nNote: The provided `fileStreamFactory` should produce a NEW file data stream each time it is invoked. The `fileSizeFactory` is a function that returns the size of the file. The `signal` is an optional [AbortSignal] that can be used to cancel the upload or timeout the request. `dataItemOpts` is an optional object that can be used to configure tags, target, and anchor for the data item upload.\n\n##### Customize Multi-Part Upload Behavior\n\nBy default, the Turbo upload methods will split files that are larger than 10 MiB into chunks and send them to the upload service multi-part endpoints. This behavior can be customized with the following inputs:\n\n- `chunkByteCount`: The maximum size in bytes for each chunk. Must be between 5 MiB and 500 MiB. Defaults to 5 MiB.\n- `maxChunkConcurrency`: The maximum number of chunks to upload concurrently. Defaults to 5. Reducing concurrency will slow down uploads, but reduce memory utilization and serialize network calls. Increasing it will upload faster, but can strain available resources.\n- `chunkingMode`: The chunking mode to use. Can be 'auto', 'force', or 'disabled'. Defaults to 'auto'. Auto behavior means chunking is enabled if the file would be split into at least three chunks.\n- `maxFinalizeMs`: The maximum time in milliseconds to wait for the finalization of all chunks after the last chunk is uploaded. Defaults to 1 minute per GiB of the total file size.\n\n#### On Demand Uploads\n\nWith the upload methods, you can choose to Top Up with selected crypto token on demand if the connected wallet does not have enough credits to complete the upload.\n\nThis is done by providing the `OnDemandFunding` class to the `fundingMode` parameter on upload methods. The `maxTokenAmount` (optional) is the maximum amount of tokens in the token type's smallest unit value (e.g: Winston for arweave token type) to fund the wallet with. The `topUpBufferMultiplier` (optional) is the multiplier to apply to the estimated top-up amount to avoid underpayment during on-demand top-ups due to price fluctuations on longer uploads. Defaults to 1.1, meaning a 10% buffer.\n\nNote: On demand API currently only available for $ARIO (`ario`), $SOL (`solana`), and $ETH on Base Network (`base-eth`) token types.\n\nSigns and uploads a folder of files. For NodeJS, the `folderPath` of the folder to upload is required. For the browser, an array of `files` is required. The `dataItemOpts` is an optional object that can be used to configure tags, target, and anchor for the data item upload. The `signal` is an optional [AbortSignal] that can be used to cancel the upload or timeout the request. The `maxConcurrentUploads` is an optional number that can be used to limit the number of concurrent uploads. The `throwOnFailure` is an optional boolean that can be used to throw an error if any upload fails. The `manifestOptions` is an optional object that can be used to configure the manifest file, including a custom index file, fallback file, or whether to disable manifests altogether. Manifests are enabled by default.\n\n##### NodeJS Upload Folder\n\n##### Browser Upload Folder\n\n#### topUpWithTokens()\n\nTops up the connected wallet with Credits by submitting a payment transaction for the token amount to the Turbo wallet and then submitting that transaction id to Turbo Payment Service for top up processing.\n\n- The `tokenAmount` is the amount of tokens in the token type's smallest unit value (e.g: Winston for arweave token type) to fund the wallet with.\n- The `feeMultiplier` (optional) is the multiplier to apply to the reward for the transaction to modify its chances of being mined. Credits will be added to the wallet balance after the transaction is confirmed on the given blockchain. Defaults to 1.0, meaning no multiplier.\n\n##### Arweave (AR) Crypto Top Up\n\n##### AR.IO Network (ARIO) Crypto Top Up\n\n##### Ethereum (ETH) Crypto Top Up\n\n##### Polygon (POL / MATIC) Crypto Top Up\n\n##### Eth on Base Network Crypto Top Up\n\n##### Solana (SOL) Crypto Top Up\n\n##### KYVE Crypto Top Up\n\nShares credits from the connected wallet to the provided native address and approved winc amount. This action will create a signed data item for the approval\n\nRevokes all credits shared from the connected wallet to the provided native address.\n\n#### getCreditShareApprovals()\n\nReturns all given or received credit share approvals for the connected wallet or the provided native address.",
  "code_samples": [
    {
      "code": "const { winc: balance } = await turbo.getBalance();",
      "language": "typescript"
    },
    {
      "code": "const address = await turbo.signer.getNativeAddress();",
      "language": "typescript"
    },
    {
      "code": "const { winc, paymentAmount, quotedPaymentAmount, adjustments } =\n  await turbo.getWincForFiat({\n    amount: USD(100),\n    promoCodes: ['MY_PROMO_CODE'], // promo codes require an authenticated client\n  });",
      "language": "typescript"
    },
    {
      "code": "const { url, winc, paymentAmount, quotedPaymentAmount, adjustments } =\n  await turbo.createCheckoutSession({\n    amount: USD(10.0), // $10.00 USD\n    owner: publicArweaveAddress,\n    promoCodes: ['MY_PROMO_CODE'], // promo codes require an authenticated client\n  });\n\n// open checkout session in a browser\nwindow.open(url, '_blank');",
      "language": "typescript"
    },
    {
      "code": "const uploadResult = await turbo.upload({\n  data: 'The contents of my file!',\n  signal: AbortSignal.timeout(10_000), // cancel the upload after 10 seconds\n  dataItemOpts: {\n    // optional\n  },\n  events: {\n    // optional\n  },\n});",
      "language": "typescript"
    },
    {
      "code": "const selectedFile = e.target.files[0];\nconst uploadResult = await turbo.uploadFile({\n  file: selectedFile,\n  dataItemOpts: {\n    tags: [{ name: 'Content-Type', value: 'text/plain' }],\n  },\n  events: {\n    onUploadProgress: ({ totalBytes, processedBytes }) => {\n      console.log('Upload progress:', { totalBytes, processedBytes });\n    },\n    onUploadError: (error) => {\n      console.log('Upload error:', { error });\n    },\n    onUploadSuccess: () => {\n      console.log('Upload success!');\n    },\n  },\n});",
      "language": "typescript"
    },
    {
      "code": "const filePath = path.join(__dirname, './my-unsigned-file.txt');\nconst fileSize = fs.stateSync(filePath).size;\nconst uploadResult = await turbo.uploadFile({\n  file: filePath,\n  dataItemOpts: {\n    tags: [{ name: 'Content-Type', value: 'text/plain' }],\n  },\n});",
      "language": "typescript"
    },
    {
      "code": "const filePath = path.join(__dirname, './my-unsigned-file.txt');\nconst fileSize = fs.stateSync(filePath).size;\nconst uploadResult = await turbo.uploadFile({\n  fileStreamFactory: () => fs.createReadStream(filePath),\n  fileSizeFactory: () => fileSize,\n});",
      "language": "typescript"
    },
    {
      "code": "// Customize chunking behavior\nawait turbo.upload({\n  ...params,\n  chunkByteCount: 1024 * 1024 * 500, // Max chunk size\n  maxChunkConcurrency: 1, // Minimize concurrency\n});",
      "language": "typescript"
    },
    {
      "code": "// Disable chunking behavior\nawait turbo.upload({\n  ...params,\n  chunkingMode: 'disabled',\n});",
      "language": "typescript"
    },
    {
      "code": "// Force chunking behavior\nawait turbo.upload({\n  ...params,\n  chunkingMode: 'force',\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({\n  signer: arweaveSignerWithARIO,\n  token: 'ario',\n});\nawait turbo.upload({\n  ...params,\n  fundingMode: new OnDemandFunding({\n    maxTokenAmount: ARIOToTokenAmount(500), // Max 500 $ARIO\n    topUpBufferMultiplier: 1.1, // 10% buffer to avoid underpayment\n  }),\n});",
      "language": "typescript"
    },
    {
      "code": "const folderPath = path.join(__dirname, './my-folder');\nconst { manifest, fileResponses, manifestResponse } = await turbo.uploadFolder({\n  folderPath,\n  dataItemOpts: {\n    // optional\n    tags: [\n      {\n        // User defined content type will overwrite file content type\n        name: 'Content-Type',\n        value: 'text/plain',\n      },\n      {\n        name: 'My-Custom-Tag',\n        value: 'my-custom-value',\n      },\n    ],\n    // no timeout or AbortSignal provided\n  },\n  manifestOptions: {\n    // optional\n    indexFile: 'custom-index.html',\n    fallbackFile: 'custom-fallback.html',\n    disableManifests: false,\n  },\n});",
      "language": "typescript"
    },
    {
      "code": "const folderInput = document.getElementById('folder');\n\n  folderInput.addEventListener('change', async (event) => {\n    const selectedFiles = folderInput.files;\n    console.log('Folder selected:', selectedFiles);\n\n    const { manifest, fileResponses, manifestResponse } =\n      await turbo.uploadFolder({\n        files: Array.from(selectedFiles).map((file) => file),\n      });\n\n    console.log(manifest, fileResponses, manifestResponse);\n  });",
      "language": "html"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'arweave' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: WinstonToTokenAmount(100_000_000), // 0.0001 AR\n  feeMultiplier: 1.1, // 10% increase in reward for improved mining chances\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'ario' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: ARIOToTokenAmount(100), // 100 $ARIO\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'ethereum' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: ETHToTokenAmount(0.00001), // 0.00001 ETH\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'pol' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: POLToTokenAmount(0.00001), // 0.00001 POL\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'base-eth' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: ETHToTokenAmount(0.00001), // 0.00001 ETH bridged on Base Network\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'solana' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: SOLToTokenAmount(0.00001), // 0.00001 SOL\n});",
      "language": "typescript"
    },
    {
      "code": "const turbo = TurboFactory.authenticated({ signer, token: 'kyve' });\n\nconst { winc, status, id, ...fundResult } = await turbo.topUpWithTokens({\n  tokenAmount: KYVEToTokenAmount(0.00001), // 0.00001 KYVE\n});",
      "language": "typescript"
    },
    {
      "code": "const { approvalDataItemId, approvedWincAmount } = await turbo.shareCredits({\n  approvedAddress: '2cor...VUa',\n  approvedWincAmount: 800_000_000_000, // 0.8 Credits\n  expiresBySeconds: 3600, // Credits will expire back to original wallet in 1 hour\n});",
      "language": "typescript"
    },
    {
      "code": "const revokedApprovals = await turbo.revokeCredits({\n  revokedAddress: '2cor...VUa',\n});",
      "language": "typescript"
    },
    {
      "code": "const { givenApprovals, receivedApprovals } =\n  await turbo.getCreditShareApprovals({\n    userAddress: '2cor...VUa',\n  });",
      "language": "typescript"
    }
  ],
  "headings": [],
  "url": "llms-txt#turboauthenticatedclient-(/sdks/turbo-sdk/(apis)/turboauthenticatedclient)",
  "links": []
}