{
  "title": "CompositeRoutingStrategy (/sdks/wayfinder/wayfinder-core/(routing-strategies)/compositeroutingstrategy)",
  "content": "Chains multiple routing strategies together, trying each sequentially until one succeeds. This strategy provides maximum resilience by allowing complex fallback scenarios where you can combine different routing approaches.\n\n**How it works:**\n1. The composite strategy tries each routing strategy in order\n2. If a strategy successfully returns a gateway, that gateway is used\n3. If a strategy throws an error, the next strategy is tried\n4. If all strategies fail, an error is thrown\n5. The first successful strategy short-circuits the process (remaining strategies are not tried)\n\n**Common Use Cases:**\n- **Performance + Resilience**: Try fastest ping first, fallback to random if ping fails\n- **Preferred + Network**: Use your own gateway first, fallback to AR.IO network selection\n- **Multi-tier Fallback**: Try premium gateways, then standard gateways, then any available gateway\n- **Development + Production**: Use local gateway in development, fallback to production gateways",
  "code_samples": [
    {
      "code": "import { \n  CompositeRoutingStrategy, \n  FastestPingRoutingStrategy, \n  RandomRoutingStrategy,\n  StaticRoutingStrategy,\n  NetworkGatewaysProvider \n} from '@ar.io/wayfinder-core';\n\n// Example 1: Try fastest ping first, fallback to random selection\nconst strategy = new CompositeRoutingStrategy({\n  strategies: [\n    new FastestPingRoutingStrategy({\n      timeoutMs: 500,\n      gatewaysProvider: new NetworkGatewaysProvider({\n        ario: ARIO.mainnet(),\n        sortBy: 'operatorStake',\n        limit: 10,\n      }),\n    }),\n    new RandomRoutingStrategy(), // fallback if ping strategy fails\n  ],\n});\n\n// Example 2: Try preferred gateway, then fastest ping, then any random gateway\nconst complexStrategy = new CompositeRoutingStrategy({\n  strategies: [\n    new StaticRoutingStrategy({ gateway: 'https://my-preferred-gateway.com' }),\n    new FastestPingRoutingStrategy({ timeoutMs: 1000 }),\n    new RandomRoutingStrategy(), // final fallback\n  ],\n});\n\nconst gateway = await strategy.selectGateway({\n  gateways: [new URL('https://gateway1.com'), new URL('https://gateway2.com')],\n});",
      "language": "javascript"
    }
  ],
  "headings": [],
  "url": "llms-txt#compositeroutingstrategy-(/sdks/wayfinder/wayfinder-core/(routing-strategies)/compositeroutingstrategy)",
  "links": []
}