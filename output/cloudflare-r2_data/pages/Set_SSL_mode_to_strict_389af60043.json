{
  "title": "Set SSL mode to strict",
  "content": "resource \"cloudflare_zone_setting\" \"ssl\" {\n  zone_id    = var.zone_id\n  setting_id = \"ssl\"\n  value      = \"strict\"\n}\nsh\nterraform plan\nsh\nPlan: 3 to add, 0 to change, 0 to destroy.\n\nTerraform will perform the following actions:\n\n# cloudflare_zone_setting.automatic_https_rewrites will be created\n  + resource \"cloudflare_zone_setting\" \"automatic_https_rewrites\" {\n      + setting_id = \"automatic_https_rewrites\"\n      + value      = \"on\"\n      + zone_id    = \"your-zone-id\"\n    }\n\n# cloudflare_zone_setting.ssl will be created\n  + resource \"cloudflare_zone_setting\" \"ssl\" {\n      + setting_id = \"ssl\"\n      + value      = \"strict\"\n      + zone_id    = \"your-zone-id\"\n    }\n\n# cloudflare_zone_setting.tls_1_3 will be created\n  + resource \"cloudflare_zone_setting\" \"tls_1_3\" {\n      + setting_id = \"tls_1_3\"\n      + value      = \"on\"\n      + zone_id    = \"your-zone-id\"\n    }\nbash\ngit add main.tf\ngit commit -m \"Step 3 - Enable TLS 1.3, automatic HTTPS rewrites, and strict SSL\"\ngit checkout main\ngit merge step3-zone-settings\ngit push\nsh\ncurl -v --tlsv1.3 https://www.example.com 2>&1 | grep \"SSL connection\\|error\"\nsh\nterraform apply\nsh\ncurl -v --tlsv1.3 https://www.example.com 2>&1 | grep \"SSL connection\\|error\"\nbash\nterraform {\n  required_providers {\n    cloudflare = {\n      source  = \"cloudflare/cloudflare\"\n      version = \"~> 5\"\n    }\n  }\n}\n\nprovider \"cloudflare\" {\n  api_token = \"<YOUR_API_TOKEN>\"\n}\n\nvariable \"zone_id\" {\n  default = \"<YOUR_ZONE_ID>\"\n}\n\nvariable \"account_id\" {\n  default = \"<YOUR_ACCOUNT_ID>\"\n}\n\nvariable \"domain\" {\n  default = \"<YOUR_DOMAIN>\"\n}\n\nresource \"cloudflare_dns_record\" \"www\" {\n  zone_id = \"<YOUR_ZONE_ID>\"\n  name    = \"www\"\n  content = \"203.0.113.10\"\n  type    = \"A\"\n  ttl     = 1\n  proxied = true\n  comment = \"Domain verification record\"\n}\nsh\nterraform init\nsh\nterraform plan\nsh\nTerraform used the selected providers to generate the following execution plan. Resource actions are\nindicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n# cloudflare_dns_record.www will be created\n  + resource \"cloudflare_dns_record\" \"www\" {\n      + comment             = \"Domain verification record\"\n      + comment_modified_on = (known after apply)\n      + content             = \"203.0.113.10\"\n      + created_on          = (known after apply)\n      + id                  = (known after apply)\n      + meta                = (known after apply)\n      + modified_on         = (known after apply)\n      + name                = \"www\"\n      + proxiable           = (known after apply)\n      + proxied             = true\n      + settings            = (known after apply)\n      + tags                = (known after apply)\n      + tags_modified_on    = (known after apply)\n      + ttl                 = 1\n      + type                = \"A\"\n      + zone_id             = \"<YOUR_ZONE_ID>\"\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\nsh\nterraform apply\nsh\nTerraform used the selected providers to generate the following execution plan. Resource actions are\nindicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n# cloudflare_dns_record.www will be created\n  + resource \"cloudflare_dns_record\" \"www\" {\n      + comment             = \"Domain verification record\"\n      + comment_modified_on = (known after apply)\n      + content             = \"203.0.113.10\"\n      + created_on          = (known after apply)\n      + id                  = (known after apply)\n      + meta                = (known after apply)\n      + modified_on         = (known after apply)\n      + name                = \"www\"\n      + proxiable           = (known after apply)\n      + proxied             = true\n      + settings            = (known after apply)\n      + tags                = (known after apply)\n      + tags_modified_on    = (known after apply)\n      + ttl                 = 1\n      + type                = \"A\"\n      + zone_id             = \"<YOUR_ZONE_ID>\"\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\ncloudflare_dns_record.www: Creating...\ncloudflare_dns_record.www: Creation complete after 0s\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\nsh\ndig www.example.com\nsh\ncurl https://www.example.com\nsh\nHello, this is 203.0.113.10!\nsh\nterraform show\nsh\ngit log --oneline\nsh\nf1a2b3c Step 5 - Add two Page Rules\nd4e5f6g Step 4 - Create load balancer (LB) monitor, LB pool, and LB\na7b8c9d Step 3 - Enable TLS 1.3, automatic HTTPS rewrites, and strict SSL\ne1f2g3h Step 2 - Initial Terraform v5 configuration\nsh\ngit log\nsh\ngit show\nsh\ngit revert HEAD\nsh\nRevert \"Add Page Rules for security and redirects\"\n\nThis reverts commit f1a2b3c4d5e6f7a8b9c0d1e2f3g4h5i6j7k8l9m0.\nsh\nterraform plan\nsh\nPlan: 0 to add, 0 to change, 2 to destroy.\n\nTerraform will perform the following actions:\n\n# cloudflare_page_rule.expensive_endpoint_security will be destroyed\n  # cloudflare_page_rule.legacy_redirect will be destroyed\nsh\nterraform apply --auto-approve\nsh\ncloudflare_page_rule.expensive_endpoint_security: Destroying...\ncloudflare_page_rule.legacy_redirect: Destroying...\ncloudflare_page_rule.expensive_endpoint_security: Destruction complete after 1s\ncloudflare_page_rule.legacy_redirect: Destruction complete after 1s\n\nApply complete! Resources: 0 added, 0 changed, 2 destroyed.\nbash",
  "code_samples": [
    {
      "code": "## 2. Preview and apply the changes\n\nReview the proposed changes:",
      "language": "unknown"
    },
    {
      "code": "Expected output",
      "language": "unknown"
    },
    {
      "code": "Commit and merge the changes:",
      "language": "unknown"
    },
    {
      "code": "Before applying the changes, try to connect with TLS 1.3. Technically, you should not be able to with default settings. To follow along with this test, you will need to [compile `curl` against BoringSSL](https://everything.curl.dev/source/build/tls/boringssl#build-boringssl).",
      "language": "unknown"
    },
    {
      "code": "As shown above, you should receive an error because TLS 1.3 is not yet enabled on your zone. Enable it by running `terraform apply` and try again.\n\nApply the configuration:",
      "language": "unknown"
    },
    {
      "code": "Type `yes` when prompted.\n\n## 3. Verify the settings\n\nTry the same command as before. The command will now succeed.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Introduction to Terraform init · Cloudflare Terraform docs\ndescription: This tutorial shows you how to get started with Terraform. You will\n  create a DNS record pointing www.example.com to a web server at 203.0.113.10.\nlastUpdated: 2025-10-09T15:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/terraform/tutorial/initialize-terraform/\n  md: https://developers.cloudflare.com/terraform/tutorial/initialize-terraform/index.md\n---\n\nThis tutorial shows you how to get started with Terraform. You just signed up your domain (`example.com`) on Cloudflare to manage everything in Terraform and now you will create a DNS record pointing `www.example.com` to a web server at `203.0.113.10`.\n\nBefore you begin, ensure you have:\n\n* [Installed Terraform](https://developers.cloudflare.com/terraform/installing/)\n* [Created an API Token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with permissions to edit resources for this tutorial\n\nNote\n\nTerraform code snippets below refer to the v5 SDK only.\n\n## 1. Create your configuration\n\nCreate a file named `main.tf`, filling in your own values for the [API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/), [zone ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/), [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/), and [domain](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/):",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nTo prevent accidentally exposing your Cloudflare credentials, do not save this file in your version control system. The [next tutorial](https://developers.cloudflare.com/terraform/tutorial/track-history/) will cover best practices for passing in your API token.\n\n## 2. Initialize and plan\n\nInitialize Terraform to download the Cloudflare provider:",
      "language": "unknown"
    },
    {
      "code": "Review what will be created:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## 3. Apply and verify\n\nApply your configuration:",
      "language": "unknown"
    },
    {
      "code": "Type `yes` when prompted.",
      "language": "unknown"
    },
    {
      "code": "After creation, verify the DNS record:",
      "language": "unknown"
    },
    {
      "code": "Test the web server response:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "To see the full results returned from the API call:",
      "language": "unknown"
    },
    {
      "code": "You can also check the Cloudflare dashboard and go to the **DNS** > **Records** page.\n\n[Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n</page>\n\n<page>\n---\ntitle: Revert configuration · Cloudflare Terraform docs\ndescription: Sometimes, you may have to roll back configuration changes. To\n  revert your configuration, check out the desired branch and ask Terraform to\n  move your Cloudflare settings back in time.\nlastUpdated: 2025-10-09T15:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/terraform/tutorial/revert-configuration/\n  md: https://developers.cloudflare.com/terraform/tutorial/revert-configuration/index.md\n---\n\nSometimes, you may have to roll back configuration changes. For example, you might want to run performance tests on a new configuration or maybe you mistyped an IP address and brought your entire site down.\n\nTo revert your configuration, check out the desired branch and ask Terraform to move your Cloudflare settings back in time. If you accidentally brought your site down, consider establishing a good strategy for peer reviewing pull requests rather than merging directly to `master` as done in the tutorials for brevity.\n\nNote\n\nTerraform code snippets below refer to the v5 SDK only.\n\n## 1. Review your configuration history\n\nBefore determining how far back to revert, review your Git history:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Another benefit of storing your Cloudflare configuration in Git is that you can see who made the change. You can also see who reviewed and approved the change if you peer-review pull requests.",
      "language": "unknown"
    },
    {
      "code": "Check when the last change was made:",
      "language": "unknown"
    },
    {
      "code": "This shows the most recent commit and what files changed.\n\n## 2. Scenario: Revert the Page Rules\n\nAssume that shortly after you deployed the Page Rules when following the [Add exceptions with Page Rules](https://developers.cloudflare.com/terraform/tutorial/add-page-rules/) tutorial, you are told the URL is no longer needed, and the security setting and redirect should be dropped.\n\nWhile you can always edit the config file directly and delete those entries, you can use Git to do that for you.\n\n### Revert using Git\n\nUse Git to create a revert commit that undoes the Page Rules changes:",
      "language": "unknown"
    },
    {
      "code": "Git will open your default editor with a commit message. Save and close to accept the default message, or customize it:",
      "language": "unknown"
    },
    {
      "code": "## 3. Preview the changes\n\nCheck what Terraform will do with the reverted configuration:",
      "language": "unknown"
    },
    {
      "code": "Expected output:",
      "language": "unknown"
    },
    {
      "code": "As expected, Terraform will remove the two Page Rules that were added in tutorial 5.\n\n## 4. Apply the changes\n\nApply the changes to remove the Page Rules from your Cloudflare zone:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Two resources were destroyed, as expected, and you have rolled back to the previous version.\n\n## 5. Verify the revert\n\nTest that the Page Rules are no longer active:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "2. Preview and apply the changes",
      "id": "2.-preview-and-apply-the-changes"
    },
    {
      "level": "h2",
      "text": "3. Verify the settings",
      "id": "3.-verify-the-settings"
    },
    {
      "level": "h2",
      "text": "1. Create your configuration",
      "id": "1.-create-your-configuration"
    },
    {
      "level": "h2",
      "text": "2. Initialize and plan",
      "id": "2.-initialize-and-plan"
    },
    {
      "level": "h2",
      "text": "3. Apply and verify",
      "id": "3.-apply-and-verify"
    },
    {
      "level": "h2",
      "text": "1. Review your configuration history",
      "id": "1.-review-your-configuration-history"
    },
    {
      "level": "h2",
      "text": "2. Scenario: Revert the Page Rules",
      "id": "2.-scenario:-revert-the-page-rules"
    },
    {
      "level": "h3",
      "text": "Revert using Git",
      "id": "revert-using-git"
    },
    {
      "level": "h2",
      "text": "3. Preview the changes",
      "id": "3.-preview-the-changes"
    },
    {
      "level": "h2",
      "text": "4. Apply the changes",
      "id": "4.-apply-the-changes"
    },
    {
      "level": "h2",
      "text": "5. Verify the revert",
      "id": "5.-verify-the-revert"
    }
  ],
  "url": "llms-txt#set-ssl-mode-to-strict",
  "links": []
}