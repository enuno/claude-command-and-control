{
  "title": "requires Wrangler 4.9.0 or greater",
  "content": "npx wrangler cert upload mtls-certificate --cert client-cert.pem --key client-key.pem --name <CUSTOM_NAME_FOR_CLIENT_CERTIFICATE>\n\nUploading client certificate <CUSTOM_NAME_FOR_CLIENT_CERTIFICATE>...\nSuccess! Uploaded client certificate <CUSTOM_NAME_FOR_CLIENT_CERTIFICATE>\nID: <YOUR_ID_FOR_THE_CLIENT_CERTIFICATE_PAIR>\n...\nbash\n  npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"postgres://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\" --mtls-certificate-id <YOUR_CLIENT_CERT_PAIR_ID>\n  sh\n  npx wrangler hyperdrive update <HYPERDRIVE_ID> --origin-connection-limit=<MAX_CONNECTIONS>\n  sh\n  curl --request PATCH \\\n    --url https://api.cloudflare.com/client/v4/accounts/<ACCOUNT_ID>/hyperdrive/configs/<HYPERDRIVE_ID> \\\n    --header 'Content-Type: application/json' \\\n    --header 'Authorization: Bearer <API_TOKEN>' \\\n    --data '{\n      \"origin_connection_limit\": <MAX_CONNECTIONS>\n    }'\n  sh",
  "code_samples": [
    {
      "code": "### Step 2: Create a Hyperdrive configuration\n\nYou can now create a Hyperdrive configuration using the newly created client certificate bundle using the dashboard or Wrangler.\n\n* Wrangler\n\n  Using Wrangler, enter the following command in your terminal to create a Hyperdrive configuration with using the client certificate pair:",
      "language": "unknown"
    },
    {
      "code": "* Dashboard\n\n  From the dashboard, follow these steps to create a Hyperdrive configuration with server certificates:\n\n  1. In the Cloudflare dashboard, go to the **Hyperdrive** page.\n\n     [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n  2. Select **Create configuration**.\n\n  3. Select **Client certificates**.\n\n  4. Select the SSL client certificate and private key pair for Hyperdrive to use during the connection setup with your database server.\n\nWhen Hyperdrive connects to your database, it will provide a client certificate signed with the private key to the database server. This allows the database server to confirm that the client, in this case Hyperdrive, has both the private key and the client certificate. By using client certificates, you can add an additional authentication layer for your database to ensures that only Hyperdrive can connect to it.\n\nNote\n\nHyperdrive will attempt to connect to your database with the provided credentials to verify they are correct before creating a configuration. If you encounter an error when attempting to connect, refer to Hyperdrive's [troubleshooting documentation](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug possible causes.\n\n</page>\n\n<page>\n---\ntitle: Tune connection pooling · Cloudflare Hyperdrive docs\ndescription: Hyperdrive maintains a pool of connections to your database that\n  are shared across Worker invocations. You can configure the maximum number of\n  these connections based on your database capacity and application\n  requirements.\nlastUpdated: 2025-11-14T21:53:29.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/hyperdrive/configuration/tune-connection-pool/\n  md: https://developers.cloudflare.com/hyperdrive/configuration/tune-connection-pool/index.md\n---\n\nHyperdrive maintains a pool of connections to your database that are shared across Worker invocations. You can configure the maximum number of these connections based on your database capacity and application requirements.\n\nNote\n\nHyperdrive does not have a limit on the number of concurrent *client* connections made from your Workers to Hyperdrive.\n\nHyperdrive does have a limit of *origin* connections that can be made from Hyperdrive to your database. These are shared across Workers, with each Worker using one of these connections over the course of a database transaction. Refer to [transaction pooling mode](https://developers.cloudflare.com/hyperdrive/concepts/connection-pooling/#pooling-mode) for more information.\n\n## Configure connection pool size\n\nYou can configure the connection pool size using the Cloudflare dashboard, the Wrangler CLI, or the Cloudflare API.\n\n* Dashboard\n\n  To configure connection pool size via the dashboard:\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com) and select your account.\n\n  2. Go to **Storage & databases** > **Hyperdrive**.\n\n     [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n  3. Select your Hyperdrive configuration.\n\n  4. Select **Settings**.\n\n  5. In the **Origin connection limit** section, adjust the **Maximum connections** value.\n\n  6. Select **Save**.\n\n* Wrangler\n\n  Use the [`wrangler hyperdrive update`](https://developers.cloudflare.com/hyperdrive/reference/wrangler-commands/#hyperdrive-update) command with the `--origin-connection-limit` flag:",
      "language": "unknown"
    },
    {
      "code": "* API\n\n  Use the [Hyperdrive REST API](https://developers.cloudflare.com/api/resources/hyperdrive/subresources/configs/methods/update/) to update your configuration:",
      "language": "unknown"
    },
    {
      "code": "All Hyperdrive configurations have a minimum of 5 connections. The maximum connection count depends on your [Workers plan](https://developers.cloudflare.com/hyperdrive/platform/limits/).\n\nNote\n\nThe Hyperdrive connection pool limit is a \"soft limit\". This means that it is possible for Hyperdrive to make more connections to your database than this limit in the event of network failure to ensure high availability. We recommend that you set the Hyperdrive connection limit to be lower than the limit of your origin database to account for occasions where Hyperdrive needs to create more connections for resiliency.\n\nNote\n\nYou can request adjustments to Hyperdrive's origin connection limits. To request an increase, submit a [Limit Increase Request](https://forms.gle/ukpeZVLWLnKeixDu7) and Cloudflare will contact you with next steps. Cloudflare also regularly monitors the Hyperdrive channel in [Cloudflare's Discord community](https://discord.cloudflare.com/) and can answer questions regarding limits and requests.\n\n## Best practices\n\n* **Start conservatively**: Begin with a lower connection count and gradually increase it based on your application's performance.\n* **Monitor database metrics**: Watch your database's connection usage and performance metrics to optimize the connection count.\n* **Consider database limits**: Ensure your configured connection count does not exceed your database's maximum connection limit.\n* **Account for multiple configurations**: If you have multiple Hyperdrive configurations connecting to the same database, consider the total connection count across all configurations.\n\n## Related resources\n\n* [Connection pooling concepts](https://developers.cloudflare.com/hyperdrive/concepts/connection-pooling/)\n* [Connection lifecycle](https://developers.cloudflare.com/hyperdrive/concepts/connection-lifecycle/)\n* [Metrics and analytics](https://developers.cloudflare.com/hyperdrive/observability/metrics/)\n* [Hyperdrive limits](https://developers.cloudflare.com/hyperdrive/platform/limits/)\n* [Query caching](https://developers.cloudflare.com/hyperdrive/concepts/query-caching/)\n\n</page>\n\n<page>\n---\ntitle: Connect to PostgreSQL · Cloudflare Hyperdrive docs\ndescription: Hyperdrive supports PostgreSQL and PostgreSQL-compatible databases,\n  popular drivers and Object Relational Mapper (ORM) libraries that use those\n  drivers.\nlastUpdated: 2025-11-11T16:21:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/\n  md: https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/index.md\n---\n\nHyperdrive supports PostgreSQL and PostgreSQL-compatible databases, [popular drivers](#supported-drivers) and Object Relational Mapper (ORM) libraries that use those drivers.\n\n## Create a Hyperdrive\n\nNote\n\nNew to Hyperdrive? Refer to the [Get started guide](https://developers.cloudflare.com/hyperdrive/get-started/) to learn how to set up your first Hyperdrive.\n\nTo create a Hyperdrive that connects to an existing PostgreSQL database, use the [wrangler](https://developers.cloudflare.com/workers/wrangler/install-and-update/) CLI or the [Cloudflare dashboard](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive).\n\nWhen using wrangler, replace the placeholder value provided to `--connection-string` with the connection string for your database:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "Step 2: Create a Hyperdrive configuration",
      "id": "step-2:-create-a-hyperdrive-configuration"
    },
    {
      "level": "h2",
      "text": "Configure connection pool size",
      "id": "configure-connection-pool-size"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Create a Hyperdrive",
      "id": "create-a-hyperdrive"
    }
  ],
  "url": "llms-txt#requires-wrangler-4.9.0-or-greater",
  "links": []
}