{
  "title": "Check if the http.request.uri.args map does not contain an \"order\" key",
  "content": "not len(http.request.uri.args[\"order\"]) >= 0  # ==> true\nsql\n(ip.src in $office_network)\nsql\nhttp.host in {\"example.com\" \"example.net\"}\n\nip.src in {198.51.100.1 198.51.100.3..198.51.100.7 192.0.2.0/24 2001:0db8::/32}\n\ntcp.dstport in {8000..8009 8080..8089}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"js_challenge\",\n    \"expression\": \"(ip.src.country in {\\\"GB\\\" \\\"FR\\\"} and cf.bot_management.score < 20 and not cf.bot_management.verified_bot)\",\n    \"description\": \"challenge GB and FR based on bot score\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone Ruleset 1\",\n    \"description\": \"My phase entry point ruleset at the zone level\",\n    \"kind\": \"zone\",\n    \"version\": \"11\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID_1>\",\n        \"version\": \"1\",\n        \"action\": \"challenge\",\n        \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"last_updated\": \"2023-11-23T11:36:24.192361Z\",\n        \"ref\": \"<RULE_REF_1>\",\n        \"enabled\": true\n      },\n      {\n        \"id\": \"<NEW_RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"js_challenge\",\n        \"expression\": \"(ip.src.country in {\\\"GB\\\" \\\"FR\\\"} and cf.bot_management.score < 20 and not cf.bot_management.verified_bot)\",\n        \"description\": \"challenge GB and FR based on bot score\",\n        \"last_updated\": \"2024-06-22T12:35:58.144683Z\",\n        \"ref\": \"<NEW_RULE_REF>\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2024-06-22T12:35:58.144683Z\",\n    \"phase\": \"http_request_firewall_custom\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"Example custom ruleset\",\n    \"kind\": \"custom\",\n    \"description\": \"Example ruleset description\",\n    \"rules\": [\n        {\n            \"action\": \"log\",\n            \"expression\": \"cf.zone.name eq \\\"example.com\\\"\"\n        }\n    ],\n    \"phase\": \"http_request_firewall_custom\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Example custom ruleset\",\n    \"description\": \"Example ruleset description\",\n    \"kind\": \"custom\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"log\",\n        \"expression\": \"cf.zone.name eq \\\"example.com\\\"\",\n        \"last_updated\": \"2025-03-17T15:42:37.917815Z\"\n      }\n    ],\n    \"last_updated\": \"2025-03-17T15:42:37.917815Z\",\n    \"phase\": \"http_request_firewall_custom\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"Zone-level phase entry point\",\n    \"kind\": \"zone\",\n    \"description\": \"This ruleset executes a managed ruleset.\",\n    \"rules\": [\n        {\n            \"action\": \"execute\",\n            \"expression\": \"true\",\n            \"action_parameters\": {\n                \"id\": \"<MANAGED_RULESET_ID>\"\n            }\n        }\n    ],\n    \"phase\": \"http_request_firewall_managed\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone-level phase entry point\",\n    \"description\": \"This ruleset executes a managed ruleset.\",\n    \"kind\": \"zone\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"expression\": \"true\",\n        \"action_parameters\": {\n          \"id\": \"<MANAGED_RULESET_ID>\"\n        },\n        \"last_updated\": \"2025-03-17T15:42:37.917815Z\"\n      }\n    ],\n    \"last_updated\": \"2025-03-17T15:42:37.917815Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"Account-level phase entry point\",\n    \"kind\": \"root\",\n    \"description\": \"This ruleset executes a rate limiting ruleset.\",\n    \"rules\": [\n        {\n            \"action\": \"execute\",\n            \"expression\": \"(cf.zone.plan eq \\\"ENT\\\")\",\n            \"action_parameters\": {\n                \"id\": \"<RATE_LIMITING_RULESET_ID>\"\n            }\n        }\n    ],\n    \"phase\": \"http_ratelimit\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Account-level phase entry point\",\n    \"description\": \"This ruleset executes a rate limiting ruleset.\",\n    \"kind\": \"root\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"expression\": \"(cf.zone.plan eq \\\"ENT\\\")\",\n        \"action_parameters\": {\n          \"id\": \"<RATE_LIMITING_RULESET_ID>\"\n        },\n        \"last_updated\": \"2024-09-17T15:42:37.917815Z\"\n      }\n    ],\n    \"last_updated\": \"2024-09-17T15:42:37.917815Z\",\n    \"phase\": \"http_ratelimit\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID\" \\\n  --request DELETE \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/versions/$RULESET_VERSION\" \\\n  --request DELETE \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/rules/$RULE_ID_1\" \\\n  --request DELETE \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Custom Ruleset 1\",\n    \"description\": \"My first custom ruleset\",\n    \"kind\": \"custom\",\n    \"version\": \"12\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID_2>\",\n        \"version\": \"2\",\n        \"action\": \"js_challenge\",\n        \"expression\": \"(ip.src.country in {\\\"GB\\\" \\\"FR\\\"} and cf.bot_management.score < 20 and not cf.bot_management.verified_bot)\",\n        \"description\": \"challenge GB and FR based on bot score\",\n        \"last_updated\": \"2021-07-22T12:54:58.144683Z\",\n        \"ref\": \"<RULE_REF_2>\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2021-07-22T12:54:58.144683Z\",\n    \"phase\": \"http_request_firewall_custom\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\ntxt\nPUT /zones/{zone_id}/rulesets/{ruleset_id}\ntxt\nPUT /zones/{zone_id}/rulesets/phases/{phase_name}/entrypoint\ntxt\nhttps://api.cloudflare.com/client/v4\njson\n{\n  \"id\": \"6a359df138c442b385d20140d4d96919\",\n  \"name\": \"Example Ruleset\",\n  \"description\": \"Description of Example Ruleset\",\n  \"kind\": \"custom\",\n  \"version\": \"2\",\n  \"phase\": \"http_request_firewall_custom\",\n  \"rules\": [\n    {\n      \"id\": \"fdb0dd271f3f40b19679cc5d91396024\",\n      \"version\": \"2\",\n      \"action\": \"block\",\n      \"expression\": \"cf.zone.name eq \\\"example.com\\\" \",\n      \"last_updated\": \"2022-07-20T10:44:29.124515Z\"\n    }\n  ],\n  \"last_updated\": \"2022-07-20T10:44:29.124515Z\"\n}\njson\n{\n  \"id\": \"fdb0dd271f3f40b19679cc5d91396024\",\n  \"version\": \"2\",\n  \"ref\": \"<REF>\",\n  \"description\": \"<DESCRIPTION>\",\n  \"action\": \"block\",\n  \"action_parameters\": [\n    // action parameters vary according to the action\n  ],\n  \"categories\": [\"<CATEGORY_1>\", \"<CATEGORY_2>\"],\n  \"expression\": \"cf.zone.name eq \\\"example.com\\\"\",\n  \"last_updated\": \"2025-07-20T10:44:29.124515Z\",\n  \"enabled\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID\" \\\n  --request PUT \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"rules\": [\n        {\n            \"action\": \"execute\",\n            \"action_parameters\": {\n                \"id\": \"<MANAGED_RULESET_ID>\"\n            },\n            \"expression\": \"true\"\n        }\n    ]\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone-level phase entry point ruleset\",\n    \"description\": \"This ruleset executes a managed ruleset.\",\n    \"kind\": \"zone\",\n    \"version\": \"4\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID>\",\n        \"version\": \"2\",\n        \"action\": \"execute\",\n        \"expression\": \"true\",\n        \"action_parameters\": {\n          \"id\": \"<MANAGED_RULESET_ID>\"\n        },\n        \"last_updated\": \"2025-03-17T15:42:37.917815Z\"\n      }\n    ],\n    \"last_updated\": \"2025-03-17T15:42:37.917815Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n  --request PUT \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"rules\": [\n        {\n            \"action\": \"execute\",\n            \"action_parameters\": {\n                \"id\": \"<MANAGED_RULESET_ID>\"\n            },\n            \"expression\": \"true\",\n            \"description\": \"Execute Cloudflare Managed Ruleset on my phase entry point ruleset\"\n        }\n    ]\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone-level phase entry point ruleset\",\n    \"description\": \"\",\n    \"kind\": \"zone\",\n    \"version\": \"4\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID_1>\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"action_parameters\": {\n          \"id\": \"<MANAGED_RULESET_ID>\",\n          \"version\": \"latest\"\n        },\n        \"expression\": \"true\",\n        \"description\": \"Execute Cloudflare Managed Ruleset on my phase entry point ruleset\",\n        \"last_updated\": \"2025-03-21T11:02:08.769537Z\",\n        \"ref\": \"<RULE_REF_1>\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2025-03-21T11:02:08.769537Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID\" \\\n  --request PUT \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"description\": \"My updated phase entry point ruleset\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone entry point\",\n    \"description\": \"My updated phase entry point ruleset\",\n    \"kind\": \"zone\",\n    \"version\": \"4\",\n    \"rules\": [\n      // (...)\n    ],\n    \"last_updated\": \"2025-03-30T10:49:11.006109Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/rules/$RULE_ID_1\" \\\n  --request PATCH \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"js_challenge\",\n    \"expression\": \"(ip.src.country in {\\\"GB\\\" \\\"FR\\\"} and cf.bot_management.score < 20 and not cf.bot_management.verified_bot)\",\n    \"description\": \"challenge GB and FR based on bot score\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Custom Ruleset 1\",\n    \"description\": \"My first custom ruleset\",\n    \"kind\": \"custom\",\n    \"version\": \"11\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID_1>\",\n        \"version\": \"2\",\n        \"action\": \"js_challenge\",\n        \"expression\": \"(ip.src.country in {\\\"GB\\\" \\\"FR\\\"} and cf.bot_management.score < 20 and not cf.bot_management.verified_bot)\",\n        \"description\": \"challenge GB and FR based on bot score\",\n        \"last_updated\": \"2023-03-22T12:54:58.144683Z\",\n        \"ref\": \"<RULE_REF_1>\",\n        \"enabled\": true\n      },\n      {\n        \"id\": \"<RULE_ID_2>\",\n        \"version\": \"1\",\n        \"action\": \"challenge\",\n        \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"last_updated\": \"2022-11-23T11:36:24.192361Z\",\n        \"ref\": \"<RULE_REF_2>\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2023-03-22T12:54:58.144683Z\",\n    \"phase\": \"http_request_firewall_custom\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\njson\n{\n  \"rules\": [\n    { \"id\": \"<RULE_ID_1>\" },\n    { \"id\": \"<RULE_ID_2>\" },\n    { \"id\": \"<RULE_ID_3>\" },\n    { \"id\": \"<RULE_ID_4>\" }\n  ]\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules/$RULE_ID_2\" \\\n  --request PATCH \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"position\": {\n        \"before\": \"\"\n    }\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules/$RULE_ID_2\" \\\n  --request PATCH \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"position\": {\n        \"after\": \"<RULE_ID_3>\"\n    }\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules/$RULE_ID_1\" \\\n  --request PATCH \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"position\": {\n        \"index\": 3\n    }\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<PHASE_RULESET_ID>\",\n      \"name\": \"Zone-level phase entry point\",\n      \"description\": \"\",\n      \"kind\": \"zone\",\n      \"version\": \"5\",\n      \"last_updated\": \"2025-03-18T18:30:08.122758Z\",\n      \"phase\": \"http_request_firewall_managed\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone-level phase entry point\",\n    \"description\": \"Executes a managed ruleset.\",\n    \"kind\": \"zone\",\n    \"version\": \"3\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"expression\": \"true\",\n        \"action_parameters\": {\n          \"id\": \"<MANAGED_RULESET_ID>\"\n        },\n        \"last_updated\": \"2025-03-17T15:42:37.917815Z\"\n      }\n    ],\n    \"last_updated\": \"2025-03-17T15:42:37.917815Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/versions\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<RULESET_ID>\",\n      \"name\": \"Zone Ruleset 1\",\n      \"description\": \"\",\n      \"kind\": \"zone\",\n      \"version\": \"1\",\n      \"last_updated\": \"2023-02-17T11:15:13.128705Z\",\n      \"phase\": \"http_request_firewall_managed\"\n    },\n    {\n      \"id\": \"<RULESET_ID>\",\n      \"name\": \"Zone Ruleset 1\",\n      \"description\": \"\",\n      \"kind\": \"zone\",\n      \"version\": \"2\",\n      \"last_updated\": \"2023-02-17T11:24:06.869326Z\",\n      \"phase\": \"http_request_firewall_managed\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/versions/$RULESET_VERSION\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": {\n    \"id\": \"<RULESET_ID>\",\n    \"name\": \"Zone-level phase entry point\",\n    \"description\": \"Executes a managed ruleset.\",\n    \"kind\": \"zone\",\n    \"version\": \"<RULESET_VERSION>\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"execute\",\n        \"expression\": \"true\",\n        \"action_parameters\": {\n          \"id\": \"<MANAGED_RULESET_ID>\"\n        },\n        \"last_updated\": \"2025-03-17T15:42:37.917815Z\"\n      }\n    ],\n    \"last_updated\": \"2025-03-17T15:42:37.917815Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/versions/2/by_tag/wordpress\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": {\n    \"id\": \"<MANAGED_RULESET_ID>\",\n    \"name\": \"Cloudflare Managed Ruleset\",\n    \"description\": \"Managed ruleset created by Cloudflare\",\n    \"kind\": \"managed\",\n    \"version\": \"2\",\n    \"rules\": [\n      {\n        \"id\": \"<RULE_ID_1>\",\n        \"version\": \"2\",\n        \"action\": \"log\",\n        \"categories\": [\n          \"cve-2014-5265\",\n          \"cve-2014-5266\",\n          \"cve-2014-5267\",\n          \"dos\",\n          \"drupal\",\n          \"wordpress\"\n        ],\n        \"description\": \"Drupal, WordPress - DoS - XMLRPC - CVE:CVE-2014-5265, CVE:CVE-2014-5266, CVE:CVE-2014-5267\",\n        \"last_updated\": \"2025-03-19T16:54:32.942986Z\",\n        \"ref\": \"<RULE_REF_1>\",\n        \"enabled\": true\n      },\n      {\n        \"id\": \"<RULE_ID_2>\",\n        \"version\": \"2\",\n        \"action\": \"block\",\n        \"categories\": [\"broken-access-control\", \"cve-2018-12895\", \"wordpress\"],\n        \"description\": \"WordPress - Broken Access Control - CVE:CVE-2018-12895\",\n        \"last_updated\": \"2025-03-19T16:54:32.942986Z\",\n        \"ref\": \"<RULE_REF_2>\",\n        \"enabled\": true\n      }\n      // (...)\n    ],\n    \"last_updated\": \"2025-03-19T16:54:32.942986Z\",\n    \"phase\": \"http_request_firewall_managed\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nts\nconst result = await sandbox.exec(command: string, options?: ExecOptions): Promise<ExecuteResponse>\njs\n  const result = await sandbox.exec(\"npm run build\");\n\nif (result.success) {\n    console.log(\"Build output:\", result.stdout);\n  } else {\n    console.error(\"Build failed:\", result.stderr);\n  }\n\n// With streaming\n  await sandbox.exec(\"npm install\", {\n    stream: true,\n    onOutput: (stream, data) => console.log(`[${stream}] ${data}`),\n  });\n  ts\n  const result = await sandbox.exec('npm run build');\n\nif (result.success) {\n    console.log('Build output:', result.stdout);\n  } else {\n    console.error('Build failed:', result.stderr);\n  }\n\n// With streaming\n  await sandbox.exec('npm install', {\n    stream: true,\n    onOutput: (stream, data) => console.log(`[${stream}] ${data}`)\n  });\n  ts\nconst stream = await sandbox.execStream(command: string, options?: ExecOptions): Promise<ReadableStream>\njs\n  import { parseSSEStream } from \"@cloudflare/sandbox\";\n\nconst stream = await sandbox.execStream(\"npm run build\");\n\nfor await (const event of parseSSEStream(stream)) {\n    switch (event.type) {\n      case \"stdout\":\n        console.log(\"Output:\", event.data);\n        break;\n      case \"complete\":\n        console.log(\"Exit code:\", event.exitCode);\n        break;\n      case \"error\":\n        console.error(\"Failed:\", event.error);\n        break;\n    }\n  }\n  ts\n  import { parseSSEStream, type ExecEvent } from '@cloudflare/sandbox';\n\nconst stream = await sandbox.execStream('npm run build');\n\nfor await (const event of parseSSEStream<ExecEvent>(stream)) {\n    switch (event.type) {\n      case 'stdout':\n        console.log('Output:', event.data);\n        break;\n      case 'complete':\n        console.log('Exit code:', event.exitCode);\n        break;\n      case 'error':\n        console.error('Failed:', event.error);\n        break;\n    }\n  }\n  ts\nconst process = await sandbox.startProcess(command: string, options?: ProcessOptions): Promise<Process>\njs\n  const server = await sandbox.startProcess(\"python -m http.server 8000\");\n  console.log(\"Started with PID:\", server.pid);\n\n// With custom environment\n  const app = await sandbox.startProcess(\"node app.js\", {\n    cwd: \"/workspace/my-app\",\n    env: { NODE_ENV: \"production\", PORT: \"3000\" },\n  });\n  ts\n  const server = await sandbox.startProcess('python -m http.server 8000');\n  console.log('Started with PID:', server.pid);\n\n// With custom environment\n  const app = await sandbox.startProcess('node app.js', {\n    cwd: '/workspace/my-app',\n    env: { NODE_ENV: 'production', PORT: '3000' }\n  });\n  ts\nconst processes = await sandbox.listProcesses(): Promise<ProcessInfo[]>\njs\n  const processes = await sandbox.listProcesses();\n\nfor (const proc of processes) {\n    console.log(`${proc.id}: ${proc.command} (PID ${proc.pid})`);\n  }\n  ts\n  const processes = await sandbox.listProcesses();\n\nfor (const proc of processes) {\n    console.log(`${proc.id}: ${proc.command} (PID ${proc.pid})`);\n  }\n  ts\nawait sandbox.killProcess(processId: string, signal?: string): Promise<void>\njs\n  const server = await sandbox.startProcess(\"python -m http.server 8000\");\n  await sandbox.killProcess(server.id);\n  ts\n  const server = await sandbox.startProcess('python -m http.server 8000');\n  await sandbox.killProcess(server.id);\n  ts\nawait sandbox.killAllProcesses(): Promise<void>\njs\n  await sandbox.killAllProcesses();\n  ts\n  await sandbox.killAllProcesses();\n  ts\nconst stream = await sandbox.streamProcessLogs(processId: string): Promise<ReadableStream>\njs\n  import { parseSSEStream } from \"@cloudflare/sandbox\";\n\nconst server = await sandbox.startProcess(\"node server.js\");\n  const logStream = await sandbox.streamProcessLogs(server.id);\n\nfor await (const log of parseSSEStream(logStream)) {\n    console.log(`[${log.timestamp}] ${log.data}`);\n\nif (log.data.includes(\"Server started\")) break;\n  }\n  ts\n  import { parseSSEStream, type LogEvent } from '@cloudflare/sandbox';\n\nconst server = await sandbox.startProcess('node server.js');\n  const logStream = await sandbox.streamProcessLogs(server.id);\n\nfor await (const log of parseSSEStream<LogEvent>(logStream)) {\n    console.log(`[${log.timestamp}] ${log.data}`);\n\nif (log.data.includes('Server started')) break;\n  }\n  ts\nconst logs = await sandbox.getProcessLogs(processId: string): Promise<string>\njs\n  const server = await sandbox.startProcess(\"node server.js\");\n  await new Promise((resolve) => setTimeout(resolve, 5000));\n\nconst logs = await sandbox.getProcessLogs(server.id);\n  console.log(\"Server logs:\", logs);\n  ts\n  const server = await sandbox.startProcess('node server.js');\n  await new Promise(resolve => setTimeout(resolve, 5000));\n\nconst logs = await sandbox.getProcessLogs(server.id);\n  console.log('Server logs:', logs);\n  ts\nawait process.waitForPort(port: number, options?: WaitForPortOptions): Promise<void>\njs\n  const server = await sandbox.startProcess(\"node server.js\");\n\n// Wait for server to be ready (HTTP mode)\n  await server.waitForPort(3000);\n\n// Check specific endpoint and status\n  await server.waitForPort(8080, {\n    path: \"/health\",\n    status: { min: 200, max: 299 },\n    timeout: 30000,\n  });\n  ts\n  const server = await sandbox.startProcess('node server.js');\n\n// Wait for server to be ready (HTTP mode)\n  await server.waitForPort(3000);\n\n// Check specific endpoint and status\n  await server.waitForPort(8080, {\n    path: '/health',\n    status: { min: 200, max: 299 },\n    timeout: 30000\n  });\n  js\n  const db = await sandbox.startProcess(\"redis-server\");\n\n// Wait for database to accept connections\n  await db.waitForPort(6379, {\n    mode: \"tcp\",\n    timeout: 10000,\n  });\n  ts\n  const db = await sandbox.startProcess('redis-server');\n\n// Wait for database to accept connections\n  await db.waitForPort(6379, {\n    mode: 'tcp',\n    timeout: 10000\n  });\n  ts\nconst result = await process.waitForLog(pattern: string | RegExp, timeout?: number): Promise<WaitForLogResult>\njs\n  const server = await sandbox.startProcess(\"node server.js\");\n\n// Wait for string pattern\n  const result = await server.waitForLog(\"Server listening\");\n  console.log(\"Ready:\", result.line);\n\n// Wait for RegExp with capture groups\n  const result = await server.waitForLog(/Server listening on port (\\d+)/);\n  console.log(\"Port:\", result.matches[1]); // Extracted port number\n\n// With timeout\n  await server.waitForLog(\"Ready\", 30000);\n  ts\n  const server = await sandbox.startProcess('node server.js');\n\n// Wait for string pattern\n  const result = await server.waitForLog('Server listening');\n  console.log('Ready:', result.line);\n\n// Wait for RegExp with capture groups\n  const result = await server.waitForLog(/Server listening on port (\\d+)/);\n  console.log('Port:', result.matches[1]); // Extracted port number\n\n// With timeout\n  await server.waitForLog('Ready', 30000);\n  ts\nawait sandbox.writeFile(path: string, content: string, options?: WriteFileOptions): Promise<void>\njs\n  await sandbox.writeFile(\"/workspace/app.js\", `console.log('Hello!');`);\n\n// Binary data\n  await sandbox.writeFile(\"/tmp/image.png\", base64Data, { encoding: \"base64\" });\n  ts\n  await sandbox.writeFile('/workspace/app.js', `console.log('Hello!');`);\n\n// Binary data\n  await sandbox.writeFile('/tmp/image.png', base64Data, { encoding: 'base64' });\n  ts\nconst file = await sandbox.readFile(path: string, options?: ReadFileOptions): Promise<FileInfo>\njs\n  const file = await sandbox.readFile(\"/workspace/package.json\");\n  const pkg = JSON.parse(file.content);\n\n// Binary data (auto-detected or forced)\n  const image = await sandbox.readFile(\"/tmp/image.png\", { encoding: \"base64\" });\n\n// Force encoding (override MIME detection)\n  const textAsBase64 = await sandbox.readFile(\"/workspace/data.txt\", {\n    encoding: \"base64\",\n  });\n  ts\n  const file = await sandbox.readFile('/workspace/package.json');\n  const pkg = JSON.parse(file.content);\n\n// Binary data (auto-detected or forced)\n  const image = await sandbox.readFile('/tmp/image.png', { encoding: 'base64' });\n\n// Force encoding (override MIME detection)\n  const textAsBase64 = await sandbox.readFile('/workspace/data.txt', { encoding: 'base64' });\n  ts\nconst result = await sandbox.exists(path: string): Promise<FileExistsResult>\njs\n  const result = await sandbox.exists(\"/workspace/package.json\");\n  if (result.exists) {\n    const file = await sandbox.readFile(\"/workspace/package.json\");\n    // process file\n  }\n\n// Check directory\n  const dirResult = await sandbox.exists(\"/workspace/src\");\n  if (!dirResult.exists) {\n    await sandbox.mkdir(\"/workspace/src\");\n  }\n  ts\n  const result = await sandbox.exists('/workspace/package.json');\n  if (result.exists) {\n    const file = await sandbox.readFile('/workspace/package.json');\n    // process file\n  }\n\n// Check directory\n  const dirResult = await sandbox.exists('/workspace/src');\n  if (!dirResult.exists) {\n    await sandbox.mkdir('/workspace/src');\n  }\n  ts\nawait sandbox.mkdir(path: string, options?: MkdirOptions): Promise<void>\njs\n  await sandbox.mkdir(\"/workspace/src\");\n\n// Nested directories\n  await sandbox.mkdir(\"/workspace/src/components/ui\", { recursive: true });\n  ts\n  await sandbox.mkdir('/workspace/src');\n\n// Nested directories\n  await sandbox.mkdir('/workspace/src/components/ui', { recursive: true });\n  ts\nawait sandbox.deleteFile(path: string): Promise<void>\njs\n  await sandbox.deleteFile(\"/workspace/temp.txt\");\n  ts\n  await sandbox.deleteFile('/workspace/temp.txt');\n  ts\nawait sandbox.renameFile(oldPath: string, newPath: string): Promise<void>\njs\n  await sandbox.renameFile(\"/workspace/draft.txt\", \"/workspace/final.txt\");\n  ts\n  await sandbox.renameFile('/workspace/draft.txt', '/workspace/final.txt');\n  ts\nawait sandbox.moveFile(sourcePath: string, destinationPath: string): Promise<void>\njs\n  await sandbox.moveFile(\"/tmp/download.txt\", \"/workspace/data.txt\");\n  ts\n  await sandbox.moveFile('/tmp/download.txt', '/workspace/data.txt');\n  ts\nawait sandbox.gitCheckout(repoUrl: string, options?: GitCheckoutOptions): Promise<void>\njs\n  await sandbox.gitCheckout(\"https://github.com/user/repo\");\n\n// Specific branch\n  await sandbox.gitCheckout(\"https://github.com/user/repo\", {\n    branch: \"develop\",\n    targetDir: \"my-project\",\n  });\n  ts\n  await sandbox.gitCheckout('https://github.com/user/repo');\n\n// Specific branch\n  await sandbox.gitCheckout('https://github.com/user/repo', {\n    branch: 'develop',\n    targetDir: 'my-project'\n  });\n  ts\nconst sandbox = getSandbox(\n  binding: DurableObjectNamespace<Sandbox>,\n  sandboxId: string,\n  options?: SandboxOptions\n): Sandbox\njs\n  import { getSandbox } from \"@cloudflare/sandbox\";\n\nexport default {\n    async fetch(request, env) {\n      const sandbox = getSandbox(env.Sandbox, \"user-123\");\n      const result = await sandbox.exec(\"python script.py\");\n      return Response.json(result);\n    },\n  };\n  ts\n  import { getSandbox } from '@cloudflare/sandbox';\n\nexport default {\n    async fetch(request: Request, env: Env): Promise<Response> {\n      const sandbox = getSandbox(env.Sandbox, 'user-123');\n      const result = await sandbox.exec('python script.py');\n      return Response.json(result);\n    }\n  };\n  ts\nawait sandbox.destroy(): Promise<void>\njs\n  async function executeCode(code) {\n    const sandbox = getSandbox(env.Sandbox, `temp-${Date.now()}`);\n\ntry {\n      await sandbox.writeFile(\"/tmp/code.py\", code);\n      const result = await sandbox.exec(\"python /tmp/code.py\");\n      return result.stdout;\n    } finally {\n      await sandbox.destroy();\n    }\n  }\n  ts\n  async function executeCode(code: string): Promise<string> {\n    const sandbox = getSandbox(env.Sandbox, `temp-${Date.now()}`);\n\ntry {\n      await sandbox.writeFile('/tmp/code.py', code);\n      const result = await sandbox.exec('python /tmp/code.py');\n      return result.stdout;\n    } finally {\n      await sandbox.destroy();\n    }\n  }\n  ts\nconst context = await sandbox.createCodeContext(options?: CreateContextOptions): Promise<CodeContext>\njs\n  const ctx = await sandbox.createCodeContext({\n    language: \"python\",\n    envVars: { API_KEY: env.API_KEY },\n  });\n  ts\n  const ctx = await sandbox.createCodeContext({\n    language: 'python',\n    envVars: { API_KEY: env.API_KEY }\n  });\n  ts\nconst result = await sandbox.runCode(code: string, options?: RunCodeOptions): Promise<ExecutionResult>\njs\n  const ctx = await sandbox.createCodeContext({ language: \"python\" });\n\nawait sandbox.runCode(\"import math; radius = 5\", { context: ctx });\n  const result = await sandbox.runCode(\"math.pi * radius ** 2\", { context: ctx });\n\nconsole.log(result.results[0].text); // \"78.53981633974483\"\n  ts\n  const ctx = await sandbox.createCodeContext({ language: 'python' });\n\nawait sandbox.runCode('import math; radius = 5', { context: ctx });\n  const result = await sandbox.runCode('math.pi * radius ** 2', { context: ctx });\n\nconsole.log(result.results[0].text); // \"78.53981633974483\"\n  js\n  const result = await sandbox.runCode(\n    `\n  data = [1, 2, 3, 4, 5]\n  print(f\"Sum: {sum(data)}\")\n  sum(data)\n  `,\n    { language: \"python\" },\n  );\n\nconsole.log(result.logs.stdout); // [\"Sum: 15\"]\n  console.log(result.results[0].text); // \"15\"\n  ts\n  const result = await sandbox.runCode(`\n  data = [1, 2, 3, 4, 5]\n  print(f\"Sum: {sum(data)}\")\n  sum(data)\n  `, { language: 'python' });\n\nconsole.log(result.logs.stdout); // [\"Sum: 15\"]\n  console.log(result.results[0].text); // \"15\"\n  js\n  const result = await sandbox.runCode(\"x = 1 / 0\", { language: \"python\" });\n\nif (result.error) {\n    console.error(result.error.name); // \"ZeroDivisionError\"\n    console.error(result.error.value); // \"division by zero\"\n    console.error(result.error.traceback); // Stack trace array\n  }\n  ts\n  const result = await sandbox.runCode('x = 1 / 0', { language: 'python' });\n\nif (result.error) {\n    console.error(result.error.name);      // \"ZeroDivisionError\"\n    console.error(result.error.value);     // \"division by zero\"\n    console.error(result.error.traceback); // Stack trace array\n  }\n  ts\nconst contexts = await sandbox.listCodeContexts(): Promise<CodeContext[]>\njs\n  const contexts = await sandbox.listCodeContexts();\n  console.log(`Found ${contexts.length} contexts`);\n  ts\n  const contexts = await sandbox.listCodeContexts();\n  console.log(`Found ${contexts.length} contexts`);\n  ts\nawait sandbox.deleteCodeContext(contextId: string): Promise<void>\njs\n  const ctx = await sandbox.createCodeContext({ language: \"python\" });\n  await sandbox.runCode('print(\"Hello\")', { context: ctx });\n  await sandbox.deleteCodeContext(ctx.id);\n  ts\n  const ctx = await sandbox.createCodeContext({ language: 'python' });\n  await sandbox.runCode('print(\"Hello\")', { context: ctx });\n  await sandbox.deleteCodeContext(ctx.id);\n  js\n  const result = await sandbox.runCode(\n    `\n  import matplotlib.pyplot as plt\n  import numpy as np\n\nx = np.linspace(0, 10, 100)\n  plt.plot(x, np.sin(x))\n  plt.show()\n  `,\n    { language: \"python\" },\n  );\n\nif (result.results[0]?.png) {\n    const imageBuffer = Buffer.from(result.results[0].png, \"base64\");\n    return new Response(imageBuffer, {\n      headers: { \"Content-Type\": \"image/png\" },\n    });\n  }\n  ts\n  const result = await sandbox.runCode(`\n  import matplotlib.pyplot as plt\n  import numpy as np\n\nx = np.linspace(0, 10, 100)\n  plt.plot(x, np.sin(x))\n  plt.show()\n  `, { language: 'python' });\n\nif (result.results[0]?.png) {\n    const imageBuffer = Buffer.from(result.results[0].png, 'base64');\n    return new Response(imageBuffer, {\n      headers: { 'Content-Type': 'image/png' }\n    });\n  }\n  js\n  const result = await sandbox.runCode(\n    `\n  import pandas as pd\n  df = pd.DataFrame({'Name': ['Alice', 'Bob'], 'Age': [25, 30]})\n  df\n  `,\n    { language: \"python\" },\n  );\n\nif (result.results[0]?.html) {\n    return new Response(result.results[0].html, {\n      headers: { \"Content-Type\": \"text/html\" },\n    });\n  }\n  ts\n  const result = await sandbox.runCode(`\n  import pandas as pd\n  df = pd.DataFrame({'Name': ['Alice', 'Bob'], 'Age': [25, 30]})\n  df\n  `, { language: 'python' });\n\nif (result.results[0]?.html) {\n    return new Response(result.results[0].html, {\n      headers: { 'Content-Type': 'text/html' }\n    });\n  }\n  ts\nconst response = await sandbox.exposePort(port: number, options: ExposePortOptions): Promise<ExposePortResponse>\njs\n  // Extract hostname from request\n  const { hostname } = new URL(request.url);\n\nawait sandbox.startProcess(\"python -m http.server 8000\");\n  const exposed = await sandbox.exposePort(8000, { hostname });\n\nconsole.log(\"Available at:\", exposed.exposedAt);\n  // https://8000-abc123.yourdomain.com\n\n// Multiple services with names\n  await sandbox.startProcess(\"node api.js\");\n  const api = await sandbox.exposePort(3000, { hostname, name: \"api\" });\n\nawait sandbox.startProcess(\"npm run dev\");\n  const frontend = await sandbox.exposePort(5173, { hostname, name: \"frontend\" });\n  ts\n  // Extract hostname from request\n  const { hostname } = new URL(request.url);\n\nawait sandbox.startProcess('python -m http.server 8000');\n  const exposed = await sandbox.exposePort(8000, { hostname });\n\nconsole.log('Available at:', exposed.exposedAt);\n  // https://8000-abc123.yourdomain.com\n\n// Multiple services with names\n  await sandbox.startProcess('node api.js');\n  const api = await sandbox.exposePort(3000, { hostname, name: 'api' });\n\nawait sandbox.startProcess('npm run dev');\n  const frontend = await sandbox.exposePort(5173, { hostname, name: 'frontend' });\n  ts\nawait sandbox.unexposePort(port: number): Promise<void>\njs\n  await sandbox.unexposePort(8000);\n  ts\n  await sandbox.unexposePort(8000);\n  ts\nconst response = await sandbox.getExposedPorts(): Promise<GetExposedPortsResponse>\njs\n  const { ports } = await sandbox.getExposedPorts();\n\nfor (const port of ports) {\n    console.log(`${port.name || port.port}: ${port.exposedAt}`);\n  }\n  ts\n  const { ports } = await sandbox.getExposedPorts();\n\nfor (const port of ports) {\n  console.log(`${port.name || port.port}: ${port.exposedAt}`);\n  }\n  ts\nconst response = await sandbox.wsConnect(request: Request, port: number): Promise<Response>\njs\n  import { getSandbox } from \"@cloudflare/sandbox\";\n\nexport { Sandbox } from \"@cloudflare/sandbox\";\n\nexport default {\n    async fetch(request, env) {\n      if (request.headers.get(\"Upgrade\")?.toLowerCase() === \"websocket\") {\n        const sandbox = getSandbox(env.Sandbox, \"my-sandbox\");\n        return await sandbox.wsConnect(request, 8080);\n      }\n\nreturn new Response(\"WebSocket endpoint\", { status: 200 });\n    },\n  };\n  ts\n  import { getSandbox } from \"@cloudflare/sandbox\";\n\nexport { Sandbox } from \"@cloudflare/sandbox\";\n\nexport default {\n    async fetch(request: Request, env: Env): Promise<Response> {\n      if (request.headers.get('Upgrade')?.toLowerCase() === 'websocket') {\n        const sandbox = getSandbox(env.Sandbox, 'my-sandbox');\n        return await sandbox.wsConnect(request, 8080);\n      }\n\nreturn new Response('WebSocket endpoint', { status: 200 });\n    }\n  };\n  ts\nconst session = await sandbox.createSession(options?: SessionOptions): Promise<ExecutionSession>\njs\n  // Multiple isolated environments\n  const prodSession = await sandbox.createSession({\n    id: \"prod\",\n    env: { NODE_ENV: \"production\", API_URL: \"https://api.example.com\" },\n    cwd: \"/workspace/prod\",\n  });\n\nconst testSession = await sandbox.createSession({\n    id: \"test\",\n    env: { NODE_ENV: \"test\", API_URL: \"http://localhost:3000\" },\n    cwd: \"/workspace/test\",\n  });\n\n// Run in parallel\n  const [prodResult, testResult] = await Promise.all([\n    prodSession.exec(\"npm run build\"),\n    testSession.exec(\"npm run build\"),\n  ]);\n  ts\n  // Multiple isolated environments\n  const prodSession = await sandbox.createSession({\n    id: 'prod',\n    env: { NODE_ENV: 'production', API_URL: 'https://api.example.com' },\n    cwd: '/workspace/prod'\n  });\n\nconst testSession = await sandbox.createSession({\n    id: 'test',\n    env: { NODE_ENV: 'test', API_URL: 'http://localhost:3000' },\n    cwd: '/workspace/test'\n  });\n\n// Run in parallel\n  const [prodResult, testResult] = await Promise.all([\n    prodSession.exec('npm run build'),\n    testSession.exec('npm run build')\n  ]);\n  ts\nconst session = await sandbox.getSession(sessionId: string): Promise<ExecutionSession>\njs\n  // First request - create session\n  const session = await sandbox.createSession({ id: \"user-123\" });\n  await session.exec(\"git clone https://github.com/user/repo.git\");\n  await session.exec(\"cd repo && npm install\");\n\n// Second request - resume session (environment and cwd preserved)\n  const session = await sandbox.getSession(\"user-123\");\n  const result = await session.exec(\"cd repo && npm run build\");\n  ts\n  // First request - create session\n  const session = await sandbox.createSession({ id: 'user-123' });\n  await session.exec('git clone https://github.com/user/repo.git');\n  await session.exec('cd repo && npm install');\n\n// Second request - resume session (environment and cwd preserved)\n  const session = await sandbox.getSession('user-123');\n  const result = await session.exec('cd repo && npm run build');\n  ts\nconst result = await sandbox.deleteSession(sessionId: string): Promise<SessionDeleteResult>\njs\n  // Create a temporary session for a specific task\n  const tempSession = await sandbox.createSession({ id: \"temp-task\" });\n\ntry {\n    await tempSession.exec(\"npm run heavy-task\");\n  } finally {\n    // Clean up the session when done\n    await sandbox.deleteSession(\"temp-task\");\n  }\n  ts\n  // Create a temporary session for a specific task\n  const tempSession = await sandbox.createSession({ id: 'temp-task' });\n\ntry {\n    await tempSession.exec('npm run heavy-task');\n  } finally {\n    // Clean up the session when done\n    await sandbox.deleteSession('temp-task');\n  }\n  ts\nawait sandbox.setEnvVars(envVars: Record<string, string>): Promise<void>\njs\n  const sandbox = getSandbox(env.Sandbox, \"user-123\");\n\n// Set environment variables first\n  await sandbox.setEnvVars({\n    API_KEY: env.OPENAI_API_KEY,\n    DATABASE_URL: env.DATABASE_URL,\n    NODE_ENV: \"production\",\n  });\n\n// Now commands can access these variables\n  await sandbox.exec(\"python script.py\");\n  ts\n  const sandbox = getSandbox(env.Sandbox, 'user-123');\n\n// Set environment variables first\n  await sandbox.setEnvVars({\n    API_KEY: env.OPENAI_API_KEY,\n    DATABASE_URL: env.DATABASE_URL,\n    NODE_ENV: 'production'\n  });\n\n// Now commands can access these variables\n  await sandbox.exec('python script.py');\n  ts\nawait sandbox.mountBucket(\n  bucket: string,\n  mountPath: string,\n  options: MountBucketOptions\n): Promise<void>\njs\n  // Mount R2 bucket\n  await sandbox.mountBucket(\"my-r2-bucket\", \"/data\", {\n    endpoint: \"https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com\",\n  });\n\n// Access mounted bucket\n  await sandbox.exec(\"ls\", { args: [\"/data\"] });\n  await sandbox.writeFile(\"/data/results.json\", JSON.stringify(data));\n\n// Mount with explicit credentials\n  await sandbox.mountBucket(\"my-bucket\", \"/storage\", {\n    endpoint: \"https://s3.amazonaws.com\",\n    credentials: {\n      accessKeyId: env.AWS_ACCESS_KEY_ID,\n      secretAccessKey: env.AWS_SECRET_ACCESS_KEY,\n    },\n  });\n\n// Read-only mount\n  await sandbox.mountBucket(\"datasets\", \"/datasets\", {\n    endpoint: \"https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com\",\n    readOnly: true,\n  });\n  ts\n  // Mount R2 bucket\n  await sandbox.mountBucket('my-r2-bucket', '/data', {\n    endpoint: 'https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com'\n  });\n\n// Access mounted bucket\n  await sandbox.exec('ls', { args: ['/data'] });\n  await sandbox.writeFile('/data/results.json', JSON.stringify(data));\n\n// Mount with explicit credentials\n  await sandbox.mountBucket('my-bucket', '/storage', {\n    endpoint: 'https://s3.amazonaws.com',\n    credentials: {\n      accessKeyId: env.AWS_ACCESS_KEY_ID,\n      secretAccessKey: env.AWS_SECRET_ACCESS_KEY\n    }\n  });\n\n// Read-only mount\n  await sandbox.mountBucket('datasets', '/datasets', {\n    endpoint: 'https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com',\n    readOnly: true\n  });\n  ts\nawait sandbox.unmountBucket(mountPath: string): Promise<void>\njs\n  await sandbox.mountBucket(\"my-bucket\", \"/data\", { endpoint: \"...\" });\n\n// Do work\n  await sandbox.exec(\"python process.py\");\n\n// Unmount\n  await sandbox.unmountBucket(\"/data\");\n  ts\n  await sandbox.mountBucket('my-bucket', '/data', { endpoint: '...' });\n\n// Do work\n  await sandbox.exec('python process.py');\n\n// Unmount\n  await sandbox.unmountBucket('/data');\n  ts\ninterface MountBucketOptions {\n  endpoint: string;\n  provider?: BucketProvider;\n  credentials?: BucketCredentials;\n  readOnly?: boolean;\n  s3fsOptions?: Record<string, string>;\n}\nts\ntype BucketProvider = 'r2' | 's3' | 'gcs';\nts\ninterface BucketCredentials {\n  accessKeyId: string;\n  secretAccessKey: string;\n}\njs\n  await sandbox.mountBucket(\"my-bucket\", \"/data\", {\n    endpoint: \"https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com\",\n    credentials: {\n      accessKeyId: env.AWS_ACCESS_KEY_ID,\n      secretAccessKey: env.AWS_SECRET_ACCESS_KEY,\n    },\n  });\n  ts\n  await sandbox.mountBucket('my-bucket', '/data', {\n    endpoint: 'https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com',\n    credentials: {\n      accessKeyId: env.AWS_ACCESS_KEY_ID,\n      secretAccessKey: env.AWS_SECRET_ACCESS_KEY\n    }\n  });\n  mermaid\nflowchart TB\n    accTitle: Sandbox SDK Architecture\n    accDescr: Three-layer architecture showing how Cloudflare Sandbox SDK combines Workers, Durable Objects, and Containers for secure code execution\n\nsubgraph UserSpace[\"<b>Your Worker</b>\"]\n        Worker[\"Application code using the methods exposed by the Sandbox SDK\"]\n    end\n\nsubgraph SDKSpace[\"<b>Sandbox SDK Implementation</b>\"]\n        DO[\"Sandbox Durable Object routes requests & maintains state\"]\n        Container[\"Isolated Ubuntu container executes untrusted code safely\"]\n\nDO -->|HTTP API| Container\n    end\n\nWorker -->|RPC call via the Durable Object stub returned by `getSandbox`| DO\n\nstyle UserSpace fill:#fff8f0,stroke:#f6821f,stroke-width:2px\n    style SDKSpace fill:#f5f5f5,stroke:#666,stroke-width:2px,stroke-dasharray: 5 5\n    style Worker fill:#ffe8d1,stroke:#f6821f,stroke-width:2px\n    style DO fill:#dce9f7,stroke:#1d8cf8,stroke-width:2px\n    style Container fill:#d4f4e2,stroke:#17b26a,stroke-width:2px\ntypescript\nimport { getSandbox } from \"@cloudflare/sandbox\";\n\nconst sandbox = getSandbox(env.Sandbox, \"my-sandbox\");\nconst result = await sandbox.exec(\"python script.py\");\ntypescript\nexport class Sandbox extends DurableObject<Env> {\n  // Extends Cloudflare Container for isolation\n  // Routes requests between client and container\n  // Manages preview URLs and state\n}\ntypescript\nawait sandbox.exec(\"python script.py\");\nbash",
  "code_samples": [
    {
      "code": "For more information on `any()`, `all()`, `len()`, and other available functions, refer to [Functions](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/).\n\n### Notes\n\nIt is not possible to define your own maps. You can only use maps returned by fields.\n\nAccessing a non-existing key in a map produces a \"missing value\". A missing value has the following behavior:\n\n* Any comparison `<expr> <op> <literal>` where `<expr>` evaluates to a missing value will evaluate to false.\n* Function calls like `function(<expr>)`, where `<expr>` evaluates to a missing value, will return a missing value in most cases, but the exact behavior can vary per function.\n\n## Lists\n\nLists allow you to create a group of items and refer to them collectively, by name, in your expressions. Each list type supports items of a specific data type. All items in a list must have the same data type. For details on the available list types, refer to [Lists](https://developers.cloudflare.com/waf/tools/lists/#supported-lists).\n\nTo refer to a list in a rule expression, use `$<list_name>` and specify the `in` [operator](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/). Only one value in the list has to match the left-hand side of the expression (before the `in` operator) for the simple expression to evaluate to `true`. If there is no match, the expression will evaluate to `false`.\n\nThe following example expression filters requests from IP addresses that are in an [IP list](https://developers.cloudflare.com/waf/tools/lists/custom-lists/#ip-lists) named `office_network`:",
      "language": "unknown"
    },
    {
      "code": "List names can only include lowercase letters, numbers, and the underscore (`_`) character. For guidance on creating and managing lists, refer to [Lists](https://developers.cloudflare.com/waf/tools/lists/).\n\n### Inline lists\n\nInline lists allow you to directly include a list of values in a simple expression that uses the `in` operator.\n\nElements in an inline list can be strings, integers, or IP addresses/ranges. All elements of an inline list must have the same data type and they must be literal values. To specify inline list elements, enter them individually, separating elements with a space. Inline lists can contain duplicate values.\n\nAdditionally, for some data types you can use ranges as elements:\n\n* For integer values, enter ranges in the form `<start_value>..<end_value>`. An inline list can contain both integer ranges and integer values.\n\n* For IP addresses, you can enter:\n\n  * Explicit IP ranges in the form `<start_address>..<end_address>` (for example, `198.51.100.3..198.51.100.7`).\n  * CIDR ranges (for example, `192.0.2.0/24` or `2001:0db8::/32`).\n\n  An inline list can contain explicit IP ranges, CIDR ranges, and individual IP addresses.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Add a rule to a ruleset Â· Cloudflare Ruleset Engine docs\ndescription: Adds a single rule to an existing ruleset. Use this endpoint to add\n  a rule without having to include all the existing ruleset rules in the\n  request.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/add-rule/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/add-rule/index.md\n---\n\nAdds a single rule to an existing ruleset. Use this endpoint to add a rule without having to include all the existing ruleset rules in the request.\n\nUse one of the following API endpoints:\n\n* [Create an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/)\\\n  `POST /accounts/{account_id}/rulesets/{ruleset_id}/rules`\n* [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/)\\\n  `POST /zones/{zone_id}/rulesets/{ruleset_id}/rules`\n\nInclude the rule definition in the request body.\n\nBy default, the rule will be added to the end of the existing list of rules in the ruleset. To define a specific position for the rule, include a `position` object in the request body according to the guidelines in [Change the order of a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/#change-the-order-of-a-rule-in-a-ruleset).\n\nInvoking this method creates a new version of the ruleset.\n\n## Example\n\nThe following `POST` request adds a rule to ruleset `$RULESET_ID` of zone `$ZONE_ID`. The ruleset ID was previously obtained using the [List zone rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation, and corresponds to the entry point ruleset for the `http_request_firewall_custom` phase.\n\nThe response will include the complete ruleset after adding the rule.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Define the rule position in the ruleset\n\nTo define the position of the new rule in the ruleset, include a `position` object in the request, containing one of the following:\n\n* `\"before\": \"<RULE_ID>\"` â Places the rule before rule `<RULE_ID>`. Use this argument with an empty rule ID value (`\"\"`) to set the rule as the first rule in the ruleset.\n\n* `\"after\": \"<RULE_ID>\"` â Places the rule after rule `<RULE_ID>`. Use this argument with an empty rule ID value (`\"\"`) to set the rule as the last rule in the ruleset.\n\n* `\"index\": <POSITION_NUMBER>` â Places the rule in the exact position specified by the integer number `<POSITION_NUMBER>`. Position numbers start with `1`. Existing rules in the ruleset from the specified position number onward are shifted one position (no rule is overwritten). For example, when you place a rule in position `n` using `index`, existing rules with index `n`, `n`+1, `n`+2, and so on, are shifted one position â their new position will be `n`+1, `n`+2, `n`+3, and so forth. If the index is out of range, the method returns a `400` HTTP status code.\n\nImportant\n\nYou can only use one of the `before`, `after`, and `index` fields at a time.\n\nFor examples of using a `position` object, refer to [Update a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/#examples).\n\n</page>\n\n<page>\n---\ntitle: Create a ruleset Â· Cloudflare Ruleset Engine docs\ndescription: Creates a ruleset of a given kind in the specified phase. Allows\n  you to create phase entry point rulesets.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/create/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/create/index.md\n---\n\nCreates a ruleset of a given kind in the specified phase. Allows you to create phase entry point rulesets.\n\nUse one of the following API endpoints:\n\n* [Create an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/)\\\n  `POST /accounts/{account_id}/rulesets`\n* [Create a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/)\\\n  `POST /zones/{zone_id}/rulesets`\n\n## Parameters\n\nA `POST` request to create a ruleset supports the following parameters in the request body:\n\n* `name` String\n\n  * A human-readable name for the ruleset.\n  * The name is immutable. You cannot change it over the lifetime of the ruleset.\n\n* `description` String Optional\n\n  * Optional description for the ruleset.\n  * You can change the description over the lifetime of the ruleset.\n\n* `kind` String\n\n  * The kind of ruleset the JSON object represents.\n\n  * Allowed values:\n\n    * `custom`: Creates a custom ruleset\n    * `root`: Creates a phase [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) at the account level\n    * `zone`: Creates a phase entry point ruleset at the zone level\n\n* `phase` String\n\n  * The name of the [phase](https://developers.cloudflare.com/ruleset-engine/about/phases/) where the ruleset will be created.\n  * Check the [phases list](https://developers.cloudflare.com/ruleset-engine/reference/phases-list/) or the specific Cloudflare product documentation for more information on the phases where you can create rulesets for that product.\n\n* `rules` Array\\<Rule> Optional\n  * A list of [rules](https://developers.cloudflare.com/ruleset-engine/rulesets-api/json-object/#rule-object-structure-and-properties) to include in the ruleset.\n\nFor additional details on these parameters, refer to [JSON objects](https://developers.cloudflare.com/ruleset-engine/rulesets-api/json-object/).\n\n## Example - Create a custom ruleset\n\nThe following `POST` request creates a custom ruleset in the `http_request_firewall_custom` phase at the account level containing a single rule.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Example - Create a zone-level phase entry point ruleset\n\nThe following `POST` request creates a zone-level phase entry point ruleset at the `http_request_firewall_managed` phase with a single rule that executes a managed ruleset.\n\nNote\n\nYou do not have to use this method to create a phase entry point ruleset. Cloudflare automatically creates the entry point ruleset when you add a rule to it, if it does not exist. Refer to [Add rules to phase entry point rulesets](https://developers.cloudflare.com/ruleset-engine/basic-operations/add-rule-phase-rulesets/) for more information.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Example - Create an account-level phase entry point ruleset\n\nThe following `POST` request creates an account-level phase entry point ruleset for the `http_ratelimit` phase with a single rule that executes a rate limiting ruleset for all Enterprise zones in the account.\n\nNote\n\nYou do not have to use this method to create a phase entry point ruleset. Cloudflare automatically creates the entry point ruleset when you add a rule to it, if it does not exist. Refer to [Add rules to phase entry point rulesets](https://developers.cloudflare.com/ruleset-engine/basic-operations/add-rule-phase-rulesets/) for more information.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nYou can only apply rate limiting rulesets to incoming traffic of zones on an Enterprise plan. To enforce this requirement, you must include `cf.zone.plan eq \"ENT\"` in the expression of the `execute` rule deploying the rate limiting ruleset.\n\n</page>\n\n<page>\n---\ntitle: Delete a ruleset Â· Cloudflare Ruleset Engine docs\ndescription: You can use the API to delete all the versions of a ruleset or\n  delete a specific version of a ruleset.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete/index.md\n---\n\nYou can use the API to delete all the versions of a ruleset or delete a specific version of a ruleset.\n\n* [Delete ruleset (all versions)](#delete-ruleset)\n* [Delete ruleset version](#delete-ruleset-version)\n\n## Delete ruleset\n\nDeletes all the versions of an existing ruleset at the account or zone level.\n\nUse one of the following API endpoints:\n\n* [Delete an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/delete/)\\\n  `DELETE /accounts/{account_id}/rulesets/{ruleset_id}`\n* [Delete a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/delete/)\\\n  `DELETE /zones/{zone_id}/rulesets/{ruleset_id}`\n\nIf the delete operation succeeds, the API method call returns a `204 No Content` HTTP status code.\n\nNote\n\nYou cannot delete a ruleset that is still referenced in other rules. For example, you cannot delete a custom ruleset that is being deployed in a rule with `execute` action.\n\nTo delete the ruleset, update or delete any rules that reference the ruleset and try again.\n\n### Example\n\nThe following example request deletes an existing ruleset with ID `$RULESET_ID`.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "## Delete ruleset version\n\nDeletes a specific version of a ruleset.\n\nUse one of the following API endpoints:\n\n* [Delete an account ruleset version](https://developers.cloudflare.com/api/resources/rulesets/subresources/versions/methods/delete/)\\\n  `DELETE /accounts/{account_id}/rulesets/{ruleset_id}/versions/{version_number}`\n* [Delete a zone ruleset version](https://developers.cloudflare.com/api/resources/rulesets/subresources/versions/methods/delete/)\\\n  `DELETE /zones/{zone_id}/rulesets/{ruleset_id}/versions/{version_number}`\n\nIf the delete operation succeeds, the method call returns a `204 No Content` HTTP status code.\n\nLater updates to the ruleset will not reuse the version number of a deleted ruleset version.\n\nNote\n\nYou cannot delete a ruleset version if it is the latest ruleset version and there is a rule with `execute` action deploying that ruleset.\n\nTo delete the ruleset version, update or delete any rules that reference the ruleset and try again.\n\n### Example\n\nThe following example request deletes a version of an existing ruleset.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Delete a rule in a ruleset Â· Cloudflare Ruleset Engine docs\ndescription: Deletes a single rule in a ruleset at the account or zone level.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete-rule/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete-rule/index.md\n---\n\nDeletes a single rule in a ruleset at the account or zone level.\n\nUse one of the following API endpoints:\n\n* [Delete an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/delete/)\\\n  `DELETE /accounts/{account_id}/rulesets/{ruleset_id}/rules/{rule_id}`\n* [Delete a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/delete/)\\\n  `DELETE /zones/{zone_id}/rulesets/{ruleset_id}/rules/{rule_id}`\n\nIf the delete operation succeeds, the API method call returns a `200 OK` HTTP status code with the complete ruleset in the response body.\n\n## Example\n\nThe following example deletes rule `$RULE_ID_1` belonging to ruleset `$RULESET_ID`.\n\nThe response will include the complete ruleset after deleting the rule.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Endpoints Â· Cloudflare Ruleset Engine docs\ndescription: For some operations, you can use specific endpoints provided by the\n  Rulesets API for managing phase entry point rulesets. These endpoints include\n  the phase name in the endpoint instead of the ruleset ID.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/endpoints/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/endpoints/index.md\n---\n\nFor some operations, you can use specific endpoints provided by the Rulesets API for managing phase entry point rulesets. These endpoints include the phase name in the endpoint instead of the ruleset ID.\n\nFor example, instead of using the following endpoint:",
      "language": "unknown"
    },
    {
      "code": "You can use the following endpoint:",
      "language": "unknown"
    },
    {
      "code": "To invoke a Rulesets API operation, append the endpoint to the Cloudflare API base URL:",
      "language": "unknown"
    },
    {
      "code": "For authentication instructions, refer to [Getting Started: Requests](https://developers.cloudflare.com/fundamentals/api/) in the Cloudflare API documentation.\n\nFor help with endpoints and pagination, refer to [Getting Started: Endpoints](https://developers.cloudflare.com/fundamentals/api/).\n\nNote\n\nThe Rulesets API endpoints require a value for `{account_id}` or `{zone_id}`.\n\nTo retrieve a list of accounts you have access to, use the [List Accounts](https://developers.cloudflare.com/api/resources/accounts/methods/list/) operation. Note the IDs of the accounts you want to manage.\n\nTo retrieve a list of zones you have access to, use the [List Zones](https://developers.cloudflare.com/api/resources/zones/methods/list/) operation. Note the IDs of the zones you want to manage.\n\nThe Cloudflare Rulesets API supports the operations outlined below. Visit the associated links for API endpoints and examples.\n\n## List and view rulesets\n\n| Operation | Method | Notes |\n| - | - | - |\n| [List existing rulesets](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#list-existing-rulesets) | `GET` | Returns the list of existing rulesets at the account level or at the zone level. |\n| [View a specific ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#view-a-specific-ruleset) | `GET` | Returns the properties of the most recent version of a specific ruleset. |\n| [List all versions of a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#list-all-versions-of-a-ruleset) | `GET` | Returns a list of all the versions of a ruleset. |\n| [View a specific version of a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#view-a-specific-version-of-a-ruleset) | `GET` | Returns the configuration of a specific version of a ruleset, including its rules. |\n| [List rules in a managed ruleset with a specific tag](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#list-rules-in-a-managed-ruleset-with-a-specific-tag) | `GET` | Returns a list of all the rules in a managed ruleset with a specific tag. |\n\n## Create rulesets\n\n| Operation | Verb | Notes |\n| - | - | - |\n| [Create a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/create/) | `POST` | Creates a new ruleset or a new phase entry point. |\n\n## Update and deploy rulesets\n\n| Operation | Verb | Notes |\n| - | - | - |\n| [Update or deploy a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/update/) | `PUT` | Updates the basic properties of a ruleset and the list of rules in the ruleset. Allows you to configure the execution of managed rulesets. |\n| [Add a rule to a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/add-rule/) | `POST` | Adds a single rule to an existing ruleset. Allows you to add a single rule without having to include all the existing ruleset rules in the request. |\n| [Update a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/) | `PATCH` | Updates the definition of a single rule within a ruleset. Allows you to change the order of a rule in a ruleset. |\n| [Delete a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete-rule/) | `DELETE` | Deletes a single rule in a ruleset. |\n\n## Delete rulesets\n\n| Operation | Verb | Notes |\n| - | - | - |\n| [Delete a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete/#delete-ruleset) | `DELETE` | Deletes all the versions of a ruleset. |\n| [Delete a ruleset version](https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete/#delete-ruleset-version) | `DELETE` | Deletes a specific version of a ruleset. |\n\n</page>\n\n<page>\n---\ntitle: JSON objects Â· Cloudflare Ruleset Engine docs\ndescription: This page describes the JSON objects used in API requests creating\n  or updating rulesets and their rules via Rulesets API, as well as the objects\n  returned by the API.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\ntags: JSON\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/json-object/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/json-object/index.md\n---\n\nThis page describes the JSON objects used in API requests creating or updating rulesets and their rules via Rulesets API, as well as the objects returned by the API.\n\n## Ruleset object\n\nA fully populated ruleset object has the following JSON structure.",
      "language": "unknown"
    },
    {
      "code": "For details on the properties of rules items in the `rules` array, refer to the [Rule object structure and properties](#rule-object-structure-and-properties) section.\n\n### Properties\n\nThe ruleset object has the following properties:\n\n* `id` String\n\n  * A 32-character UUIDv4 string that represents the unique Cloudflare-generated identifier for a given version of a ruleset.\n  * Unique, read-only.\n\n* `name` String\n\n  * A human-readable name for the ruleset.\n  * The name is immutable. You cannot change the name over the lifetime of the ruleset.\n\n* `description` String\n\n  * Optional description for the ruleset.\n  * You can change the description over the lifetime of the ruleset.\n\n* `kind` String\n\n  * The kind of ruleset the JSON object represents.\n  * One of `root`, `zone`, `managed`, `custom`.\n  * `kind` is immutable.\n\n* `version` Integer\n\n  * The version of the ruleset.\n  * Read-only value starting at `1` and incremented by `1` each time the ruleset is modified.\n\n* `rules` Array\\<Rule>\n\n  * A list of rules to include in the ruleset. Refer to [Rule object structure and properties](#rule-object-structure-and-properties) for details.\n\n* `last_updated` Timestamp\n\n  * The time (UTC) when the ruleset was last updated in ISO 8601 format: `YYYY-MM-DDThh:mm:ss.TZD`.\n  * Read-only.\n\n## Rule object structure and properties\n\nA fully populated rule JSON object has the following structure:",
      "language": "unknown"
    },
    {
      "code": "The JSON object properties for a rule are defined as follows:\n\n* `id` String\n\n  * A 32-character UUIDv4 string that represents the unique Cloudflare-generated identifier for a given version of a rule.\n  * Unique, read-only.\n\n* `version` Integer\n\n  * The version of the rule.\n  * Read-only value starting at `1` and incremented by `1` each time the rule is modified.\n  * Changing the order of a rule in a ruleset does not change its version.\n\n* `ref` String\n\n  * A user-defined external identifier that must be unique for each rule in a ruleset.\n  * Use this field in your Terraform configuration to prevent Terraform from recreating the rule on changes. Refer to [How to keep the same rule ID between modifications](https://developers.cloudflare.com/terraform/troubleshooting/rule-id-changes/#how-to-keep-the-same-rule-id-between-modifications) for more information.\n\n* `description` String\n\n  * A descriptive name of the rule.\n\n* `action` String\n\n  * Defines what happens when there is a match for the rule expression.\n  * The available [actions](https://developers.cloudflare.com/ruleset-engine/rules-language/actions/) depend on the [phase](https://developers.cloudflare.com/ruleset-engine/about/phases/) where the rule's ruleset is executed.\n\n* `action_parameters` Object\n\n  * One or more parameters configuring the rule action.\n  * The exact properties vary according to the action. Refer to each Cloudflare product's API instructions for more information.\n\n* `categories` Array\\<String>\n\n  * Tags associated with the current rule. You can define overrides that affect rules with a given tag.\n  * Read-only. Only available in [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/) and [DDoS managed rulesets](https://developers.cloudflare.com/ddos-protection/managed-rulesets/).\n\n* `expression` String\n\n  * Criteria defining when there is a match for the current rule.\n  * The fields and functions you can use in a rule expression depend on the phase where the rule's ruleset is executed.\n\n* `last_updated` Timestamp\n\n  * The time (UTC) when the rule was last updated in ISO 8601 format: `YYYY-MM-DDThh:mm:ss.TZD`.\n  * Read-only.\n\n* `enabled` Boolean\n\n  * When set to `true`, the current rule is enabled.\n\n</page>\n\n<page>\n---\ntitle: Update or deploy a ruleset Â· Cloudflare Ruleset Engine docs\ndescription: \"Use one of the following API endpoints to update a ruleset:\"\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/update/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/update/index.md\n---\n\nUse one of the following API endpoints to update a ruleset:\n\n* [Update an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/update/)\\\n  `PUT /accounts/{account_id}/rulesets/{ruleset_id}`\n* [Update an account entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/update/)\\\n  `PUT /accounts/{account_id}/rulesets/phases/{phase_name}/entrypoint`\n* [Update a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/update/)\\\n  `PUT /zones/{zone_id}/rulesets/{ruleset_id}`\n* [Update a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/update/)\\\n  `PUT /zones/{zone_id}/rulesets/phases/{phase_name}/entrypoint`\n\nWhen updating a ruleset, you can update:\n\n* The basic properties of a ruleset (currently only the description)\n* The list of rules in a ruleset\n\nTo deploy a ruleset, add a rule with `\"action\": \"execute\"` to the list of rules of an [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset). Refer to [Deploy a ruleset](#example---deploy-a-ruleset) for an example.\n\nNote\n\nYou cannot update the name of the ruleset or its type. Do not include these fields in the `data` field of your `PUT` request.\n\n## Example - Set the rules of a ruleset\n\nThe following `PUT` request defines the list of rules of a ruleset, setting it to a single rule. You must include all the rules you want to associate with the ruleset in every request.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Example - Deploy a ruleset\n\nTo deploy a ruleset, create a rule with `\"action\": \"execute\"` that executes the ruleset, and add the ruleset ID to the `action_parameters` field in the `id` parameter.\n\nThe following `PUT` request deploys a managed ruleset to the `http_request_firewall_managed` phase of a zone (`$ZONE_ID`).\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "For more information on deploying rulesets, refer to [Deploy rulesets](https://developers.cloudflare.com/ruleset-engine/basic-operations/deploy-rulesets/).\n\n## Example - Update ruleset description\n\nThe following `PUT` request updates the description of an existing ruleset or phase entry point.\n\nThe response will include the complete ruleset definition, including all the rules.\n\nNote\n\nYou cannot update the description or the rules in a managed ruleset. You can only [define overrides](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/) to customize the ruleset behavior.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Update a rule in a ruleset Â· Cloudflare Ruleset Engine docs\ndescription: Applies one or more changes to an existing rule in a ruleset at the\n  account or zone level.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/index.md\n---\n\nApplies one or more changes to an existing rule in a ruleset at the account or zone level.\n\nUse one of the following API endpoints:\n\n* [Update an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/edit/)\\\n  `PATCH /accounts/{account_id}/rulesets/{ruleset_id}/rules/{rule_id}`\n* [Update a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/edit/)\\\n  `PATCH /zones/{zone_id}/rulesets/{ruleset_id}/rules/{rule_id}`\n\nYou can update the definition of the rule, changing its fields, or change the order of the rule in the ruleset. Invoking this method creates a new version of the ruleset.\n\n## Update the definition of a rule\n\nTo update the definition of a rule, include the new rule definition in the request body. You must include all the rule fields that you want to be part of the new rule definition, even if you are not changing their values.\n\nThe response will include the complete ruleset after updating the rule.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Change the order of a rule in a ruleset\n\nTo reorder a rule in a list of ruleset rules, include a `position` object in the request, containing one of the following:\n\n* `\"before\": \"<RULE_ID>\"` â Places the rule before rule `<RULE_ID>`. Use this argument with an empty rule ID value (`\"\"`) to set the rule as the first rule in the ruleset.\n\n* `\"after\": \"<RULE_ID>\"` â Places the rule after rule `<RULE_ID>`. Use this argument with an empty rule ID value (`\"\"`) to set the rule as the last rule in the ruleset.\n\n* `\"index\": <POSITION_NUMBER>` â Places the rule in the exact position specified by the integer number `<POSITION_NUMBER>`. Position numbers start with `1`. Existing rules in the ruleset from the specified position number onward are shifted one position (no rule is overwritten). For example, when you place a rule in position `n` using `index`, existing rules with index `n`, `n`+1, `n`+2, and so on, are shifted one position â their new position will be `n`+1, `n`+2, `n`+3, and so forth. If the index is out of range, the method returns a `400` HTTP status code.\n\nImportant\n\nYou can only use one of the `before`, `after`, and `index` fields at a time.\n\nReorder a rule without changing its definition by including only the `position` object in the `PATCH` request body. You can also update a rule definition and reorder it in the same `PATCH` request by including both the `rule` object and the `position` object.\n\n### Examples\n\nThe following examples build upon the following (abbreviated) ruleset:",
      "language": "unknown"
    },
    {
      "code": "#### Example 1\n\nThe following request with the `position` object places rule `$RULE_ID_2` as the first rule:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "In this case, the new rule order would be:\n\n`<RULE_ID_2>`, `<RULE_ID_1>`, `<RULE_ID_3>`, `<RULE_ID_4>`\n\n#### Example 2\n\nThe following request with the `position` object places rule `$RULE_ID_2` after rule 3:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "In this case, the new rule order would be:\n\n`<RULE_ID_1>`, `<RULE_ID_3>`, `<RULE_ID_2>`, `<RULE_ID_4>`\n\n#### Example 3\n\nThe following request with the `position` object places rule `$RULE_ID_1` in position 3, becoming the third rule in the ruleset:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Config Settings Write`\n* `Dynamic URL Redirects Write`\n* `Cache Settings Write`\n* `Custom Errors Write`\n* `Origin Write`\n* `Managed headers Write`\n* `Zone Transform Rules Write`\n* `Mass URL Redirects Write`\n* `Magic Firewall Write`\n* `L4 DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Write`\n* `Sanitize Write`\n* `Transform Rules Write`\n* `Select Configuration Write`\n* `Bot Management Write`\n* `Zone WAF Write`\n* `Account WAF Write`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "In this case, the new rule order would be:\n\n`<RULE_ID_2>`, `<RULE_ID_3>`, `<RULE_ID_1>`, `<RULE_ID_4>`\n\n</page>\n\n<page>\n---\ntitle: List and view rulesets Â· Cloudflare Ruleset Engine docs\ndescription: Describes the API operations to list and view the details of\n  rulesets at the account or zone level.\nlastUpdated: 2025-12-23T12:15:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/\n  md: https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/index.md\n---\n\nUse the API operations described in the following sections to list and view the details of rulesets at the account or zone level.\n\n* [List existing rulesets](#list-existing-rulesets)\n* [View a specific ruleset](#view-a-specific-ruleset)\n* [List all versions of a ruleset](#list-all-versions-of-a-ruleset)\n* [View a specific version of a ruleset](#view-a-specific-version-of-a-ruleset)\n* [List rules in a managed ruleset with a specific tag](#list-rules-in-a-managed-ruleset-with-a-specific-tag)\n\n## List existing rulesets\n\nReturns the list of existing rulesets at the account level or at the zone level.\n\nUse one of the following API endpoints:\n\n* [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/)\\\n  `GET /accounts/{account_id}/rulesets`\n* [List zone rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/)\\\n  `GET /zones/{zone_id}/rulesets`\n\nThe result includes rulesets across all phases at a given level (account or zone). The `phase` field in each result element indicates the [phase](https://developers.cloudflare.com/ruleset-engine/about/phases/) where that ruleset is defined.\n\nAlso, the list of rulesets at the zone level includes the account-level rulesets you may want to deploy to the specified zone.\n\nNote\n\nNot all zone-level phases support all types of rulesets, even if they are presented in the list returned by this API method. Check the documentation for each Cloudflare product for more information on which ruleset types are allowed in that product's supported phases.\n\nThe result does not include the list of rules in the ruleset. Refer to [View a specific version of a ruleset](#view-a-specific-version-of-a-ruleset) to learn how to obtain the list of rules.\n\n### Example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Response Compression Read`\n* `Config Settings Write`\n* `Config Settings Read`\n* `Dynamic URL Redirects Write`\n* `Dynamic URL Redirects Read`\n* `Cache Settings Write`\n* `Cache Settings Read`\n* `Custom Errors Write`\n* `Custom Errors Read`\n* `Origin Write`\n* `Origin Read`\n* `Managed headers Write`\n* `Managed headers Read`\n* `Zone Transform Rules Write`\n* `Zone Transform Rules Read`\n* `Mass URL Redirects Write`\n* `Mass URL Redirects Read`\n* `Magic Firewall Write`\n* `Magic Firewall Read`\n* `L4 DDoS Managed Ruleset Write`\n* `L4 DDoS Managed Ruleset Read`\n* `HTTP DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Read`\n* `Sanitize Write`\n* `Sanitize Read`\n* `Transform Rules Write`\n* `Transform Rules Read`\n* `Select Configuration Write`\n* `Select Configuration Read`\n* `Bot Management Write`\n* `Bot Management Read`\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`\n* `Account Rulesets Read`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Read`\n* `Logs Write`\n* `Logs Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## View a specific ruleset\n\nReturns the properties of the most recent version of the ruleset with the specified ruleset ID.\n\nUse one of the following API endpoints:\n\n* [Get an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/)\\\n  `GET /accounts/{account_id}/rulesets/{ruleset_id}`\n* [Get an account entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/)\\\n  `GET /accounts/{account_id}/rulesets/phases/{phase_name}/entrypoint`\n* [Get a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/)\\\n  `GET /zones/{zone_id}/rulesets/{ruleset_id}`\n* [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/)\\\n  `GET /zones/{zone_id}/rulesets/phases/{phase_name}/entrypoint`\n\nNote\n\nYou can only use the [Get a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/) operation for zone-level phase entry point rulesets (entry points where `kind` is set to `zone`).\n\nThe API returns a `404 Not Found` HTTP status code under these conditions:\n\n* When a ruleset cannot be found.\n* When the specified ruleset is not a managed ruleset the calling account is entitled to execute.\n\n### Example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Response Compression Read`\n* `Config Settings Write`\n* `Config Settings Read`\n* `Dynamic URL Redirects Write`\n* `Dynamic URL Redirects Read`\n* `Cache Settings Write`\n* `Cache Settings Read`\n* `Custom Errors Write`\n* `Custom Errors Read`\n* `Origin Write`\n* `Origin Read`\n* `Managed headers Write`\n* `Managed headers Read`\n* `Zone Transform Rules Write`\n* `Zone Transform Rules Read`\n* `Mass URL Redirects Write`\n* `Mass URL Redirects Read`\n* `Magic Firewall Write`\n* `Magic Firewall Read`\n* `L4 DDoS Managed Ruleset Write`\n* `L4 DDoS Managed Ruleset Read`\n* `HTTP DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Read`\n* `Sanitize Write`\n* `Sanitize Read`\n* `Transform Rules Write`\n* `Transform Rules Read`\n* `Select Configuration Write`\n* `Select Configuration Read`\n* `Bot Management Write`\n* `Bot Management Read`\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`\n* `Account Rulesets Read`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Read`\n* `Logs Write`\n* `Logs Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## List all versions of a ruleset\n\nReturns a list of all the versions of a ruleset.\n\nUse one of the following API endpoints:\n\n* [List account ruleset versions](https://developers.cloudflare.com/api/resources/rulesets/subresources/versions/methods/list/)\\\n  `GET /accounts/{account_id}/rulesets/{ruleset_id}/versions`\n* [List account entry point ruleset versions](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/subresources/versions/methods/list/)\\\n  `GET /accounts/{account_id}/rulesets/phases/{phase_name}/entrypoint/versions`\n* [List zone ruleset versions](https://developers.cloudflare.com/api/resources/rulesets/subresources/versions/methods/list/)\\\n  `GET /zones/{zone_id}/rulesets/{ruleset_id}/versions`\n* [List zone entry point ruleset versions](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/subresources/versions/methods/list/)\\\n  `GET /zones/{zone_id}/rulesets/phases/{phase_name}/entrypoint/versions`\n\nThe result contains the ruleset properties of each version, but it does not include the list of rules. Refer to [View a specific version of a ruleset](#view-a-specific-version-of-a-ruleset) for instructions on obtaining this information.\n\nWhen the specified phase entry point ruleset does not exist, this API method returns an empty array in the `result` field.\n\n### Example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Response Compression Read`\n* `Config Settings Write`\n* `Config Settings Read`\n* `Dynamic URL Redirects Write`\n* `Dynamic URL Redirects Read`\n* `Cache Settings Write`\n* `Cache Settings Read`\n* `Custom Errors Write`\n* `Custom Errors Read`\n* `Origin Write`\n* `Origin Read`\n* `Managed headers Write`\n* `Managed headers Read`\n* `Zone Transform Rules Write`\n* `Zone Transform Rules Read`\n* `Mass URL Redirects Write`\n* `Mass URL Redirects Read`\n* `Magic Firewall Write`\n* `Magic Firewall Read`\n* `L4 DDoS Managed Ruleset Write`\n* `L4 DDoS Managed Ruleset Read`\n* `HTTP DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Read`\n* `Sanitize Write`\n* `Sanitize Read`\n* `Transform Rules Write`\n* `Transform Rules Read`\n* `Select Configuration Write`\n* `Select Configuration Read`\n* `Bot Management Write`\n* `Bot Management Read`\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`\n* `Account Rulesets Read`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Read`\n* `Logs Write`\n* `Logs Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## View a specific version of a ruleset\n\nReturns the configuration of a specific version of a ruleset, including its rules.\n\nUse one of the following API endpoints:\n\n* [Get an account ruleset version](https://developers.cloudflare.com/api/resources/rulesets/subresources/versions/methods/get/)\\\n  `GET /account/{account_id}/rulesets/{ruleset_id}/versions/{version_number}`\n* [Get an account entry point ruleset version](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/subresources/versions/methods/get/)\\\n  `GET /accounts/{account_id}/rulesets/phases/{phase_name}/entrypoint/versions/{version_number}`\n* [Get a zone ruleset version](https://developers.cloudflare.com/api/resources/rulesets/subresources/versions/methods/get/)\\\n  `GET /zones/{zone_id}/rulesets/{ruleset_id}/versions/{version_number}`\n* [Get a zone entry point ruleset version](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/subresources/versions/methods/get/)\\\n  `GET /zones/{zone_id}/rulesets/phases/{phase_name}/entrypoint/versions/{version_number}`\n\nWhen the specified phase entry point ruleset does not exist, this API method returns a `404 Not Found` HTTP status code.\n\n### Example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Response Compression Write`\n* `Response Compression Read`\n* `Config Settings Write`\n* `Config Settings Read`\n* `Dynamic URL Redirects Write`\n* `Dynamic URL Redirects Read`\n* `Cache Settings Write`\n* `Cache Settings Read`\n* `Custom Errors Write`\n* `Custom Errors Read`\n* `Origin Write`\n* `Origin Read`\n* `Managed headers Write`\n* `Managed headers Read`\n* `Zone Transform Rules Write`\n* `Zone Transform Rules Read`\n* `Mass URL Redirects Write`\n* `Mass URL Redirects Read`\n* `Magic Firewall Write`\n* `Magic Firewall Read`\n* `L4 DDoS Managed Ruleset Write`\n* `L4 DDoS Managed Ruleset Read`\n* `HTTP DDoS Managed Ruleset Write`\n* `HTTP DDoS Managed Ruleset Read`\n* `Sanitize Write`\n* `Sanitize Read`\n* `Transform Rules Write`\n* `Transform Rules Read`\n* `Select Configuration Write`\n* `Select Configuration Read`\n* `Bot Management Write`\n* `Bot Management Read`\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`\n* `Account Rulesets Read`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Read`\n* `Logs Write`\n* `Logs Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Note\n\nWhen you view a specific version of a managed ruleset, each rule listed in the result can have one or more associated categories/tags, and it will not contain an expression.\n\n## List rules in a managed ruleset with a specific tag\n\nReturns a list of all the rules in a managed ruleset with a specific tag.\n\n* List an account ruleset version's rules by tag\\\n  `GET /accounts/{account_id}/rulesets/{ruleset_id}/versions/{version_number}/by_tag/{tag_name}`\n\n### Example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Mass URL Redirects Write`\n* `Mass URL Redirects Read`\n* `Magic Firewall Write`\n* `Magic Firewall Read`\n* `L4 DDoS Managed Ruleset Write`\n* `L4 DDoS Managed Ruleset Read`\n* `Transform Rules Write`\n* `Transform Rules Read`\n* `Select Configuration Write`\n* `Select Configuration Read`\n* `Account WAF Write`\n* `Account WAF Read`\n* `Account Rulesets Read`\n* `Account Rulesets Write`\n* `Logs Write`\n* `Logs Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Commands Â· Cloudflare Sandbox SDK docs\ndescription: Execute commands and manage background processes in the sandbox's\n  isolated container environment.\nlastUpdated: 2025-12-05T12:43:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/commands/\n  md: https://developers.cloudflare.com/sandbox/api/commands/index.md\n---\n\nExecute commands and manage background processes in the sandbox's isolated container environment.\n\n## Methods\n\n### `exec()`\n\nExecute a command and return the complete result.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `command` - The command to execute (can include arguments)\n\n* `options` (optional):\n\n  * `stream` - Enable streaming callbacks (default: `false`)\n  * `onOutput` - Callback for real-time output: `(stream: 'stdout' | 'stderr', data: string) => void`\n  * `timeout` - Maximum execution time in milliseconds\n\n**Returns**: `Promise<ExecuteResponse>` with `success`, `stdout`, `stderr`, `exitCode`\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `execStream()`\n\nExecute a command and return a Server-Sent Events stream for real-time processing.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `command` - The command to execute\n* `options` - Same as `exec()`\n\n**Returns**: `Promise<ReadableStream>` emitting `ExecEvent` objects (`start`, `stdout`, `stderr`, `complete`, `error`)\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `startProcess()`\n\nStart a long-running background process.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `command` - The command to start as a background process\n\n* `options` (optional):\n\n  * `cwd` - Working directory\n  * `env` - Environment variables\n\n**Returns**: `Promise<Process>` object with:\n\n* `id` - Unique process identifier\n* `pid` - System process ID\n* `command` - The command being executed\n* `status` - Current status (`'running'`, `'exited'`, etc.)\n* `kill()` - Stop the process\n* `getStatus()` - Get current status\n* `getLogs()` - Get accumulated logs\n* `waitForPort()` - Wait for process to listen on a port\n* `waitForLog()` - Wait for pattern in process output\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `listProcesses()`\n\nList all running processes.",
      "language": "unknown"
    },
    {
      "code": "* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `killProcess()`\n\nTerminate a specific process.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `processId` - The process ID (from `startProcess()` or `listProcesses()`)\n* `signal` - Signal to send (default: `\"SIGTERM\"`)\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `killAllProcesses()`\n\nTerminate all running processes.",
      "language": "unknown"
    },
    {
      "code": "* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `streamProcessLogs()`\n\nStream logs from a running process in real-time.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `processId` - The process ID\n\n**Returns**: `Promise<ReadableStream>` emitting `LogEvent` objects\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `getProcessLogs()`\n\nGet accumulated logs from a process.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `processId` - The process ID\n\n**Returns**: `Promise<string>` with all accumulated output\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "## Process readiness methods\n\nThe `Process` object returned by `startProcess()` includes methods to wait for the process to be ready before proceeding.\n\n### `process.waitForPort()`\n\nWait for a process to listen on a port.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `port` - The port number to check\n\n* `options` (optional):\n\n  * `mode` - Check mode: `'http'` (default) or `'tcp'`\n  * `timeout` - Maximum wait time in milliseconds\n  * `interval` - Check interval in milliseconds (default: `100`)\n  * `path` - HTTP path to check (default: `'/'`, HTTP mode only)\n  * `status` - Expected HTTP status range (default: `{ min: 200, max: 399 }`, HTTP mode only)\n\n**HTTP mode** (default) makes an HTTP GET request and checks the response status:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "**TCP mode** checks if the port accepts connections:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "**Throws**:\n\n* `ProcessReadyTimeoutError` - If port does not become ready within timeout\n* `ProcessExitedBeforeReadyError` - If process exits before becoming ready\n\n### `process.waitForLog()`\n\nWait for a pattern to appear in process output.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `pattern` - String or RegExp to match in stdout/stderr\n* `timeout` - Maximum wait time in milliseconds (optional)\n\n**Returns**: `Promise<WaitForLogResult>` with:\n\n* `line` - The matching line of output\n* `matches` - Array of capture groups (for RegExp patterns)\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "**Throws**:\n\n* `ProcessReadyTimeoutError` - If pattern is not found within timeout\n* `ProcessExitedBeforeReadyError` - If process exits before pattern appears\n\n## Related resources\n\n* [Background processes guide](https://developers.cloudflare.com/sandbox/guides/background-processes/) - Managing long-running processes\n* [Files API](https://developers.cloudflare.com/sandbox/api/files/) - File operations\n\n</page>\n\n<page>\n---\ntitle: Files Â· Cloudflare Sandbox SDK docs\ndescription: Read, write, and manage files in the sandbox filesystem. All paths\n  are absolute (e.g., /workspace/app.js).\nlastUpdated: 2025-11-18T19:18:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/files/\n  md: https://developers.cloudflare.com/sandbox/api/files/index.md\n---\n\nRead, write, and manage files in the sandbox filesystem. All paths are absolute (e.g., `/workspace/app.js`).\n\n## Methods\n\n### `writeFile()`\n\nWrite content to a file.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `path` - Absolute path to the file\n* `content` - Content to write\n* `options` (optional):\n  * `encoding` - File encoding (`\"utf-8\"` or `\"base64\"`, default: `\"utf-8\"`)\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "Base64 validation\n\nWhen using `encoding: 'base64'`, content must contain only valid base64 characters (A-Z, a-z, 0-9, +, /, =). Invalid base64 content returns a validation error.\n\n### `readFile()`\n\nRead a file from the sandbox.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `path` - Absolute path to the file\n* `options` (optional):\n  * `encoding` - File encoding (`\"utf-8\"` or `\"base64\"`, default: auto-detected from MIME type)\n\n**Returns**: `Promise<FileInfo>` with `content` and `encoding`\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "Encoding behavior\n\nWhen `encoding` is specified, it overrides MIME-based auto-detection. Without `encoding`, the SDK detects the appropriate encoding from the file's MIME type.\n\n### `exists()`\n\nCheck if a file or directory exists.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `path` - Absolute path to check\n\n**Returns**: `Promise<FileExistsResult>` with `exists` boolean\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "Available on sessions\n\nBoth `sandbox.exists()` and `session.exists()` are supported.\n\n### `mkdir()`\n\nCreate a directory.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `path` - Absolute path to the directory\n* `options` (optional):\n  * `recursive` - Create parent directories if needed (default: `false`)\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `deleteFile()`\n\nDelete a file.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `path` - Absolute path to the file\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `renameFile()`\n\nRename a file.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `oldPath` - Current file path\n* `newPath` - New file path\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `moveFile()`\n\nMove a file to a different directory.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `sourcePath` - Current file path\n* `destinationPath` - Destination path\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `gitCheckout()`\n\nClone a git repository.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `repoUrl` - Git repository URL\n\n* `options` (optional):\n\n  * `branch` - Branch to checkout (default: main branch)\n  * `targetDir` - Directory to clone into (default: repo name)\n  * `depth` - Clone depth for shallow clone\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "## Related resources\n\n* [Manage files guide](https://developers.cloudflare.com/sandbox/guides/manage-files/) - Detailed guide with best practices\n* [Commands API](https://developers.cloudflare.com/sandbox/api/commands/) - Execute commands\n\n</page>\n\n<page>\n---\ntitle: Lifecycle Â· Cloudflare Sandbox SDK docs\ndescription: Create and manage sandbox containers. Get sandbox instances,\n  configure options, and clean up resources.\nlastUpdated: 2025-11-18T19:18:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/lifecycle/\n  md: https://developers.cloudflare.com/sandbox/api/lifecycle/index.md\n---\n\nCreate and manage sandbox containers. Get sandbox instances, configure options, and clean up resources.\n\n## Methods\n\n### `getSandbox()`\n\nGet or create a sandbox instance by ID.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `binding` - The Durable Object namespace binding from your Worker environment\n\n* `sandboxId` - Unique identifier for this sandbox. The same ID always returns the same sandbox instance\n\n* `options` (optional) - See [SandboxOptions](https://developers.cloudflare.com/sandbox/configuration/sandbox-options/) for all available options:\n\n  * `sleepAfter` - Duration of inactivity before automatic sleep (default: `\"10m\"`)\n  * `keepAlive` - Prevent automatic sleep entirely (default: `false`)\n  * `containerTimeouts` - Configure container startup timeouts\n  * `normalizeId` - Lowercase sandbox IDs for preview URL compatibility (default: `false`)\n\n**Returns**: `Sandbox` instance\n\nNote\n\nThe container starts lazily on first operation. Calling `getSandbox()` returns immediatelyâthe container only spins up when you execute a command, write a file, or perform other operations. See [Sandbox lifecycle](https://developers.cloudflare.com/sandbox/concepts/sandboxes/) for details.\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nWhen using `keepAlive: true`, you **must** call `destroy()` when finished to prevent containers running indefinitely.\n\n***\n\n### `destroy()`\n\nDestroy the sandbox container and free up resources.",
      "language": "unknown"
    },
    {
      "code": "Immediately terminates the container and permanently deletes all state:\n\n* All files in `/workspace`, `/tmp`, and `/home`\n* All running processes\n* All sessions (including the default session)\n* Network connections and exposed ports\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "Note\n\nContainers automatically sleep after 10 minutes of inactivity but still count toward account limits. Use `destroy()` to immediately free up resources.\n\n***\n\n## Related resources\n\n* [Sandbox lifecycle concept](https://developers.cloudflare.com/sandbox/concepts/sandboxes/) - Understanding container lifecycle and state\n* [Sandbox options configuration](https://developers.cloudflare.com/sandbox/configuration/sandbox-options/) - Configure `keepAlive` and other options\n* [Sessions API](https://developers.cloudflare.com/sandbox/api/sessions/) - Create isolated execution contexts within a sandbox\n\n</page>\n\n<page>\n---\ntitle: Code Interpreter Â· Cloudflare Sandbox SDK docs\ndescription: Execute Python, JavaScript, and TypeScript code with support for\n  data visualizations, tables, and rich output formats. Contexts maintain state\n  (variables, imports, functions) across executions.\nlastUpdated: 2025-11-06T16:25:37.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/interpreter/\n  md: https://developers.cloudflare.com/sandbox/api/interpreter/index.md\n---\n\nExecute Python, JavaScript, and TypeScript code with support for data visualizations, tables, and rich output formats. Contexts maintain state (variables, imports, functions) across executions.\n\n## Methods\n\n### `createCodeContext()`\n\nCreate a persistent execution context for running code.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `options` (optional):\n\n  * `language` - `\"python\" | \"javascript\" | \"typescript\"` (default: `\"python\"`)\n  * `cwd` - Working directory (default: `\"/workspace\"`)\n  * `envVars` - Environment variables\n  * `timeout` - Request timeout in milliseconds (default: 30000)\n\n**Returns**: `Promise<CodeContext>` with `id`, `language`, `cwd`, `createdAt`, `lastUsed`\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `runCode()`\n\nExecute code in a context and return the complete result.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `code` - The code to execute (required)\n\n* `options` (optional):\n\n  * `context` - Context to run in (recommended - see below)\n  * `language` - `\"python\" | \"javascript\" | \"typescript\"` (default: `\"python\"`)\n  * `timeout` - Execution timeout in milliseconds (default: 60000)\n  * `onStdout`, `onStderr`, `onResult`, `onError` - Streaming callbacks\n\n**Returns**: `Promise<ExecutionResult>` with:\n\n* `code` - The executed code\n* `logs` - `stdout` and `stderr` arrays\n* `results` - Array of rich outputs (see [Rich Output Formats](#rich-output-formats))\n* `error` - Execution error if any\n* `executionCount` - Execution counter\n\n**Recommended usage - create explicit context**:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "Default context behavior\n\nIf no `context` is provided, a default context is automatically created/reused for the specified `language`. While convenient for quick tests, **explicitly creating contexts is recommended** for production use to maintain predictable state.\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "**Error handling**:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `listCodeContexts()`\n\nList all active code execution contexts.",
      "language": "unknown"
    },
    {
      "code": "* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `deleteCodeContext()`\n\nDelete a code execution context and free its resources.",
      "language": "unknown"
    },
    {
      "code": "* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "## Rich Output Formats\n\nResults include: `text`, `html`, `png`, `jpeg`, `svg`, `latex`, `markdown`, `json`, `chart`, `data`\n\n**Charts (matplotlib)**:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "**Tables (pandas)**:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "## Related resources\n\n* [Build an AI Code Executor](https://developers.cloudflare.com/sandbox/tutorials/ai-code-executor/) - Complete tutorial\n* [Commands API](https://developers.cloudflare.com/sandbox/api/commands/) - Lower-level command execution\n* [Files API](https://developers.cloudflare.com/sandbox/api/files/) - File operations\n\n</page>\n\n<page>\n---\ntitle: Ports Â· Cloudflare Sandbox SDK docs\ndescription: Expose services running in your sandbox via public preview URLs.\n  See Preview URLs concept for details.\nlastUpdated: 2025-12-15T09:50:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/ports/\n  md: https://developers.cloudflare.com/sandbox/api/ports/index.md\n---\n\nProduction requires custom domain\n\nPreview URLs require a custom domain with wildcard DNS routing in production. See [Production Deployment](https://developers.cloudflare.com/sandbox/guides/production-deployment/).\n\nExpose services running in your sandbox via public preview URLs. See [Preview URLs concept](https://developers.cloudflare.com/sandbox/concepts/preview-urls/) for details.\n\n## Methods\n\n### `exposePort()`\n\nExpose a port and get a preview URL.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `port` - Port number to expose (1024-65535)\n\n* `options`:\n\n  * `hostname` - Your Worker's domain name (e.g., `'example.com'`). Required to construct preview URLs with wildcard subdomains like `https://8080-sandbox-abc123.example.com`. Cannot be a `.workers.dev` domain as it doesn't support wildcard DNS patterns.\n  * `name` - Friendly name for the port (optional)\n\n**Returns**: `Promise<ExposePortResponse>` with `port`, `url` (preview URL), `name`\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "Local development\n\nWhen using `wrangler dev`, you must add `EXPOSE` directives to your Dockerfile for each port. See [Expose Services guide](https://developers.cloudflare.com/sandbox/guides/expose-services/#local-development) for details.\n\n### `unexposePort()`\n\nRemove an exposed port and close its preview URL.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `port` - Port number to unexpose\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `getExposedPorts()`\n\nGet information about all currently exposed ports.",
      "language": "unknown"
    },
    {
      "code": "**Returns**: `Promise<GetExposedPortsResponse>` with `ports` array (containing `port`, `exposedAt`, `name`)\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `wsConnect()`\n\nConnect to WebSocket servers running in the sandbox. Use this when your Worker needs to establish WebSocket connections with services in the sandbox.\n\n**Common use cases:**\n\n* Route incoming WebSocket upgrade requests with custom authentication or authorization\n* Connect from your Worker to get real-time data from sandbox services\n\nFor exposing WebSocket services via public preview URLs, use `exposePort()` with `proxyToSandbox()` instead. See [WebSocket Connections guide](https://developers.cloudflare.com/sandbox/guides/websocket-connections/) for examples.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `request` - Incoming WebSocket upgrade request\n* `port` - Port number (1024-65535, excluding 3000)\n\n**Returns**: `Promise<Response>` - WebSocket response establishing the connection\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "## Related resources\n\n* [Preview URLs concept](https://developers.cloudflare.com/sandbox/concepts/preview-urls/) - How preview URLs work\n* [Commands API](https://developers.cloudflare.com/sandbox/api/commands/) - Start background processes\n\n</page>\n\n<page>\n---\ntitle: Sessions Â· Cloudflare Sandbox SDK docs\ndescription: Create isolated execution contexts within a sandbox. Each session\n  maintains its own shell state, environment variables, and working directory.\n  See Session management concept for details.\nlastUpdated: 2025-11-06T16:25:37.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/sessions/\n  md: https://developers.cloudflare.com/sandbox/api/sessions/index.md\n---\n\nCreate isolated execution contexts within a sandbox. Each session maintains its own shell state, environment variables, and working directory. See [Session management concept](https://developers.cloudflare.com/sandbox/concepts/sessions/) for details.\n\nNote\n\nEvery sandbox has a default session that automatically maintains shell state. Create additional sessions when you need isolated shell contexts for different environments or parallel workflows. For sandbox-level operations like creating containers or destroying the entire sandbox, see the [Lifecycle API](https://developers.cloudflare.com/sandbox/api/lifecycle/).\n\n## Methods\n\n### `createSession()`\n\nCreate a new isolated execution session.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `options` (optional):\n\n  * `id` - Custom session ID (auto-generated if not provided)\n  * `env` - Environment variables for this session\n  * `cwd` - Working directory (default: `\"/workspace\"`)\n\n**Returns**: `Promise<ExecutionSession>` with all sandbox methods bound to this session\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "### `getSession()`\n\nRetrieve an existing session by ID.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `sessionId` - ID of an existing session\n\n**Returns**: `Promise<ExecutionSession>` bound to the specified session\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "***\n\n### `deleteSession()`\n\nDelete a session and clean up its resources.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `sessionId` - ID of the session to delete (cannot be `\"default\"`)\n\n**Returns**: `Promise<SessionDeleteResult>` containing:\n\n* `success` - Whether deletion succeeded\n* `sessionId` - ID of the deleted session\n* `timestamp` - Deletion timestamp\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nDeleting a session immediately terminates all running commands. The default session cannot be deleted.\n\n***\n\n### `setEnvVars()`\n\nSet environment variables in the sandbox.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `envVars` - Key-value pairs of environment variables to set\n\nWarning\n\nCall `setEnvVars()` **before** any other sandbox operations to ensure environment variables are available from the start.\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "***\n\n## ExecutionSession methods\n\nThe `ExecutionSession` object has all sandbox methods bound to the specific session:\n\n| Category | Methods |\n| - | - |\n| **Commands** | [`exec()`](https://developers.cloudflare.com/sandbox/api/commands/#exec), [`execStream()`](https://developers.cloudflare.com/sandbox/api/commands/#execstream) |\n| **Processes** | [`startProcess()`](https://developers.cloudflare.com/sandbox/api/commands/#startprocess), [`listProcesses()`](https://developers.cloudflare.com/sandbox/api/commands/#listprocesses), [`killProcess()`](https://developers.cloudflare.com/sandbox/api/commands/#killprocess), [`killAllProcesses()`](https://developers.cloudflare.com/sandbox/api/commands/#killallprocesses), [`getProcessLogs()`](https://developers.cloudflare.com/sandbox/api/commands/#getprocesslogs), [`streamProcessLogs()`](https://developers.cloudflare.com/sandbox/api/commands/#streamprocesslogs) |\n| **Files** | [`writeFile()`](https://developers.cloudflare.com/sandbox/api/files/#writefile), [`readFile()`](https://developers.cloudflare.com/sandbox/api/files/#readfile), [`mkdir()`](https://developers.cloudflare.com/sandbox/api/files/#mkdir), [`deleteFile()`](https://developers.cloudflare.com/sandbox/api/files/#deletefile), [`renameFile()`](https://developers.cloudflare.com/sandbox/api/files/#renamefile), [`moveFile()`](https://developers.cloudflare.com/sandbox/api/files/#movefile), [`gitCheckout()`](https://developers.cloudflare.com/sandbox/api/files/#gitcheckout) |\n| **Environment** | [`setEnvVars()`](https://developers.cloudflare.com/sandbox/api/sessions/#setenvvars) |\n| **Code Interpreter** | [`createCodeContext()`](https://developers.cloudflare.com/sandbox/api/interpreter/#createcodecontext), [`runCode()`](https://developers.cloudflare.com/sandbox/api/interpreter/#runcode), [`listCodeContexts()`](https://developers.cloudflare.com/sandbox/api/interpreter/#listcodecontexts), [`deleteCodeContext()`](https://developers.cloudflare.com/sandbox/api/interpreter/#deletecodecontext) |\n\n## Related resources\n\n* [Session management concept](https://developers.cloudflare.com/sandbox/concepts/sessions/) - How sessions work\n* [Commands API](https://developers.cloudflare.com/sandbox/api/commands/) - Execute commands\n\n</page>\n\n<page>\n---\ntitle: Storage Â· Cloudflare Sandbox SDK docs\ndescription: Mount S3-compatible object storage as local filesystem paths for\n  persistent storage across sandbox lifecycles.\nlastUpdated: 2025-11-18T19:18:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/api/storage/\n  md: https://developers.cloudflare.com/sandbox/api/storage/index.md\n---\n\nMount S3-compatible object storage as local filesystem paths for persistent storage across sandbox lifecycles.\n\nProduction only\n\nBucket mounting does not work with `wrangler dev` because it requires FUSE support that wrangler does not currently provide. Deploy your Worker to use this feature. See [Mount buckets guide](https://developers.cloudflare.com/sandbox/guides/mount-buckets/) for details.\n\n## Methods\n\n### `mountBucket()`\n\nMount an S3-compatible bucket as a local directory.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `bucket` - Bucket name (e.g., `\"my-r2-bucket\"`)\n* `mountPath` - Local filesystem path to mount at (e.g., `\"/data\"`)\n* `options` - Mount configuration (see [`MountBucketOptions`](#mountbucketoptions))\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "**Throws**:\n\n* `MissingCredentialsError` - No credentials found in environment or options\n* `InvalidMountConfigError` - Invalid endpoint, bucket name, or mount path\n* `S3FSMountError` - Mount operation failed (network, permissions, bucket not found)\n\nAutomatic credential detection\n\nThe SDK automatically detects `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` from environment variables if credentials are not explicitly provided.\n\nAvailable on sessions\n\nBoth `sandbox.mountBucket()` and `session.mountBucket()` are supported. Mounts affect the entire sandbox filesystem and are visible across all sessions.\n\n### `unmountBucket()`\n\nUnmount a previously mounted bucket.",
      "language": "unknown"
    },
    {
      "code": "**Parameters**:\n\n* `mountPath` - Path where the bucket is mounted (e.g., `\"/data\"`)\n\n- JavaScript",
      "language": "unknown"
    },
    {
      "code": "- TypeScript",
      "language": "unknown"
    },
    {
      "code": "Automatic cleanup\n\nMounted buckets are automatically unmounted when the sandbox is destroyed. Manual unmounting is optional.\n\n## Types\n\n### `MountBucketOptions`\n\nConfiguration for mounting a bucket.",
      "language": "unknown"
    },
    {
      "code": "**Fields**:\n\n* `endpoint` (required) - S3-compatible endpoint URL\n\n  * R2: `https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com`\n  * S3: `https://s3.amazonaws.com` or regional endpoint\n  * GCS: `https://storage.googleapis.com`\n\n* `provider` (optional) - Storage provider hint (`'r2'` | `'s3'` | `'gcs'`)\n\n  * Default: Auto-detected from endpoint URL\n\n* `credentials` (optional) - S3 access credentials\n\n  * Default: Uses `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` environment variables\n\n* `readOnly` (optional) - Mount in read-only mode\n\n  * Default: `false`\n\n* `s3fsOptions` (optional) - Advanced s3fs mount flags\n\n  * Example: `{ 'use_cache': '/tmp/cache' }`\n\n### `BucketProvider`\n\nStorage provider hint for automatic s3fs flag optimization.",
      "language": "unknown"
    },
    {
      "code": "* `'r2'` - Cloudflare R2 (recommended, applies `nomixupload` flag)\n* `'s3'` - Amazon S3\n* `'gcs'` - Google Cloud Storage\n\nThe SDK auto-detects the provider from the endpoint URL and applies optimized flags. For other S3-compatible providers (Backblaze, MinIO, etc.), omit this field or use the `s3fsOptions` parameter for custom configuration.\n\n### `BucketCredentials`\n\nS3-compatible access credentials.",
      "language": "unknown"
    },
    {
      "code": "* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "Security\n\nNever hardcode credentials. Use Worker secrets or environment variables.\n\n## Related resources\n\n* [Mount buckets guide](https://developers.cloudflare.com/sandbox/guides/mount-buckets/) - Complete mounting reference\n* [Persistent storage tutorial](https://developers.cloudflare.com/sandbox/tutorials/persistent-storage/) - Example with R2\n* [Environment variables](https://developers.cloudflare.com/sandbox/configuration/environment-variables/) - Credential configuration\n* [R2 documentation](https://developers.cloudflare.com/r2/) - Learn about Cloudflare R2\n\n</page>\n\n<page>\n---\ntitle: Architecture Â· Cloudflare Sandbox SDK docs\ndescription: \"Sandbox SDK lets you execute untrusted code safely from your\n  Workers. It combines three Cloudflare technologies to provide secure,\n  stateful, and isolated execution:\"\nlastUpdated: 2025-10-21T14:02:11.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/concepts/architecture/\n  md: https://developers.cloudflare.com/sandbox/concepts/architecture/index.md\n---\n\nSandbox SDK lets you execute untrusted code safely from your Workers. It combines three Cloudflare technologies to provide secure, stateful, and isolated execution:\n\n* **Workers** - Your application logic that calls the Sandbox SDK\n* **Durable Objects** - Persistent sandbox instances with unique identities\n* **Containers** - Isolated Linux environments where code actually runs\n\n## Architecture overview",
      "language": "unknown"
    },
    {
      "code": "### Layer 1: Client SDK\n\nThe developer-facing API you use in your Workers:",
      "language": "unknown"
    },
    {
      "code": "**Purpose**: Provide a clean, type-safe TypeScript interface for all sandbox operations.\n\n### Layer 2: Durable Object\n\nManages sandbox lifecycle and routing:",
      "language": "unknown"
    },
    {
      "code": "**Purpose**: Provide persistent, stateful sandbox instances with unique identities.\n\n**Why Durable Objects**:\n\n* **Persistent identity** - Same sandbox ID always routes to same instance\n* **Container management** - Durable Object owns and manages the container lifecycle\n* **Geographic distribution** - Sandboxes run close to users\n* **Automatic scaling** - Cloudflare manages provisioning\n\n### Layer 3: Container Runtime\n\nExecutes code in isolation with full Linux capabilities.\n\n**Purpose**: Safely execute untrusted code.\n\n**Why containers**:\n\n* **VM-based isolation** - Each sandbox runs in its own VM\n* **Full environment** - Ubuntu Linux with Python, Node.js, Git, etc.\n\n## Request flow\n\nWhen you execute a command:",
      "language": "unknown"
    },
    {
      "code": "1. **Client SDK** validates parameters and sends HTTP request to Durable Object\n2. **Durable Object** authenticates and routes to container runtime\n3. **Container Runtime** validates inputs, executes command, captures output\n4. **Response flows back** through all layers with proper error transformation\n\n## Related resources\n\n* [Sandbox lifecycle](https://developers.cloudflare.com/sandbox/concepts/sandboxes/) - How sandboxes are created and managed\n* [Container runtime](https://developers.cloudflare.com/sandbox/concepts/containers/) - Inside the execution environment\n* [Security model](https://developers.cloudflare.com/sandbox/concepts/security/) - How isolation and validation work\n* [Session management](https://developers.cloudflare.com/sandbox/concepts/sessions/) - Advanced state management\n\n</page>\n\n<page>\n---\ntitle: Container runtime Â· Cloudflare Sandbox SDK docs\ndescription: Each sandbox runs in an isolated Linux container with Python,\n  Node.js, and common development tools pre-installed. For a complete list of\n  pre-installed software and how to customize the container image, see\n  Dockerfile reference.\nlastUpdated: 2025-11-08T10:22:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/sandbox/concepts/containers/\n  md: https://developers.cloudflare.com/sandbox/concepts/containers/index.md\n---\n\nEach sandbox runs in an isolated Linux container with Python, Node.js, and common development tools pre-installed. For a complete list of pre-installed software and how to customize the container image, see [Dockerfile reference](https://developers.cloudflare.com/sandbox/configuration/dockerfile/).\n\n## Runtime software installation\n\nInstall additional software at runtime using standard package managers:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "Notes",
      "id": "notes"
    },
    {
      "level": "h2",
      "text": "Lists",
      "id": "lists"
    },
    {
      "level": "h3",
      "text": "Inline lists",
      "id": "inline-lists"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Define the rule position in the ruleset",
      "id": "define-the-rule-position-in-the-ruleset"
    },
    {
      "level": "h2",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h2",
      "text": "Example - Create a custom ruleset",
      "id": "example---create-a-custom-ruleset"
    },
    {
      "level": "h2",
      "text": "Example - Create a zone-level phase entry point ruleset",
      "id": "example---create-a-zone-level-phase-entry-point-ruleset"
    },
    {
      "level": "h2",
      "text": "Example - Create an account-level phase entry point ruleset",
      "id": "example---create-an-account-level-phase-entry-point-ruleset"
    },
    {
      "level": "h2",
      "text": "Delete ruleset",
      "id": "delete-ruleset"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Delete ruleset version",
      "id": "delete-ruleset-version"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "List and view rulesets",
      "id": "list-and-view-rulesets"
    },
    {
      "level": "h2",
      "text": "Create rulesets",
      "id": "create-rulesets"
    },
    {
      "level": "h2",
      "text": "Update and deploy rulesets",
      "id": "update-and-deploy-rulesets"
    },
    {
      "level": "h2",
      "text": "Delete rulesets",
      "id": "delete-rulesets"
    },
    {
      "level": "h2",
      "text": "Ruleset object",
      "id": "ruleset-object"
    },
    {
      "level": "h3",
      "text": "Properties",
      "id": "properties"
    },
    {
      "level": "h2",
      "text": "Rule object structure and properties",
      "id": "rule-object-structure-and-properties"
    },
    {
      "level": "h2",
      "text": "Example - Set the rules of a ruleset",
      "id": "example---set-the-rules-of-a-ruleset"
    },
    {
      "level": "h2",
      "text": "Example - Deploy a ruleset",
      "id": "example---deploy-a-ruleset"
    },
    {
      "level": "h2",
      "text": "Example - Update ruleset description",
      "id": "example---update-ruleset-description"
    },
    {
      "level": "h2",
      "text": "Update the definition of a rule",
      "id": "update-the-definition-of-a-rule"
    },
    {
      "level": "h2",
      "text": "Change the order of a rule in a ruleset",
      "id": "change-the-order-of-a-rule-in-a-ruleset"
    },
    {
      "level": "h3",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h2",
      "text": "List existing rulesets",
      "id": "list-existing-rulesets"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "View a specific ruleset",
      "id": "view-a-specific-ruleset"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "List all versions of a ruleset",
      "id": "list-all-versions-of-a-ruleset"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "View a specific version of a ruleset",
      "id": "view-a-specific-version-of-a-ruleset"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "List rules in a managed ruleset with a specific tag",
      "id": "list-rules-in-a-managed-ruleset-with-a-specific-tag"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`exec()`",
      "id": "`exec()`"
    },
    {
      "level": "h3",
      "text": "`execStream()`",
      "id": "`execstream()`"
    },
    {
      "level": "h3",
      "text": "`startProcess()`",
      "id": "`startprocess()`"
    },
    {
      "level": "h3",
      "text": "`listProcesses()`",
      "id": "`listprocesses()`"
    },
    {
      "level": "h3",
      "text": "`killProcess()`",
      "id": "`killprocess()`"
    },
    {
      "level": "h3",
      "text": "`killAllProcesses()`",
      "id": "`killallprocesses()`"
    },
    {
      "level": "h3",
      "text": "`streamProcessLogs()`",
      "id": "`streamprocesslogs()`"
    },
    {
      "level": "h3",
      "text": "`getProcessLogs()`",
      "id": "`getprocesslogs()`"
    },
    {
      "level": "h2",
      "text": "Process readiness methods",
      "id": "process-readiness-methods"
    },
    {
      "level": "h3",
      "text": "`process.waitForPort()`",
      "id": "`process.waitforport()`"
    },
    {
      "level": "h3",
      "text": "`process.waitForLog()`",
      "id": "`process.waitforlog()`"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`writeFile()`",
      "id": "`writefile()`"
    },
    {
      "level": "h3",
      "text": "`readFile()`",
      "id": "`readfile()`"
    },
    {
      "level": "h3",
      "text": "`exists()`",
      "id": "`exists()`"
    },
    {
      "level": "h3",
      "text": "`mkdir()`",
      "id": "`mkdir()`"
    },
    {
      "level": "h3",
      "text": "`deleteFile()`",
      "id": "`deletefile()`"
    },
    {
      "level": "h3",
      "text": "`renameFile()`",
      "id": "`renamefile()`"
    },
    {
      "level": "h3",
      "text": "`moveFile()`",
      "id": "`movefile()`"
    },
    {
      "level": "h3",
      "text": "`gitCheckout()`",
      "id": "`gitcheckout()`"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`getSandbox()`",
      "id": "`getsandbox()`"
    },
    {
      "level": "h3",
      "text": "`destroy()`",
      "id": "`destroy()`"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`createCodeContext()`",
      "id": "`createcodecontext()`"
    },
    {
      "level": "h3",
      "text": "`runCode()`",
      "id": "`runcode()`"
    },
    {
      "level": "h3",
      "text": "`listCodeContexts()`",
      "id": "`listcodecontexts()`"
    },
    {
      "level": "h3",
      "text": "`deleteCodeContext()`",
      "id": "`deletecodecontext()`"
    },
    {
      "level": "h2",
      "text": "Rich Output Formats",
      "id": "rich-output-formats"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`exposePort()`",
      "id": "`exposeport()`"
    },
    {
      "level": "h3",
      "text": "`unexposePort()`",
      "id": "`unexposeport()`"
    },
    {
      "level": "h3",
      "text": "`getExposedPorts()`",
      "id": "`getexposedports()`"
    },
    {
      "level": "h3",
      "text": "`wsConnect()`",
      "id": "`wsconnect()`"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`createSession()`",
      "id": "`createsession()`"
    },
    {
      "level": "h3",
      "text": "`getSession()`",
      "id": "`getsession()`"
    },
    {
      "level": "h3",
      "text": "`deleteSession()`",
      "id": "`deletesession()`"
    },
    {
      "level": "h3",
      "text": "`setEnvVars()`",
      "id": "`setenvvars()`"
    },
    {
      "level": "h2",
      "text": "ExecutionSession methods",
      "id": "executionsession-methods"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`mountBucket()`",
      "id": "`mountbucket()`"
    },
    {
      "level": "h3",
      "text": "`unmountBucket()`",
      "id": "`unmountbucket()`"
    },
    {
      "level": "h2",
      "text": "Types",
      "id": "types"
    },
    {
      "level": "h3",
      "text": "`MountBucketOptions`",
      "id": "`mountbucketoptions`"
    },
    {
      "level": "h3",
      "text": "`BucketProvider`",
      "id": "`bucketprovider`"
    },
    {
      "level": "h3",
      "text": "`BucketCredentials`",
      "id": "`bucketcredentials`"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Architecture overview",
      "id": "architecture-overview"
    },
    {
      "level": "h3",
      "text": "Layer 1: Client SDK",
      "id": "layer-1:-client-sdk"
    },
    {
      "level": "h3",
      "text": "Layer 2: Durable Object",
      "id": "layer-2:-durable-object"
    },
    {
      "level": "h3",
      "text": "Layer 3: Container Runtime",
      "id": "layer-3:-container-runtime"
    },
    {
      "level": "h2",
      "text": "Request flow",
      "id": "request-flow"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Runtime software installation",
      "id": "runtime-software-installation"
    }
  ],
  "url": "llms-txt#check-if-the-http.request.uri.args-map-does-not-contain-an-\"order\"-key",
  "links": []
}