{
  "title": "Your CF Access team domain",
  "content": "TEAM_DOMAIN = os.getenv(\"TEAM_DOMAIN\")\nCERTS_URL = \"{}/cdn-cgi/access/certs\".format(TEAM_DOMAIN)\n\ndef _get_public_keys():\n    \"\"\"\n    Returns:\n        List of RSA public keys usable by PyJWT.\n    \"\"\"\n    r = requests.get(CERTS_URL)\n    public_keys = []\n    jwk_set = r.json()\n    for key_dict in jwk_set['keys']:\n        public_key = jwt.algorithms.RSAAlgorithm.from_jwk(json.dumps(key_dict))\n        public_keys.append(public_key)\n    return public_keys\n\ndef verify_token(f):\n    \"\"\"\n    Decorator that wraps a Flask API call to verify the CF Access JWT\n    \"\"\"\n    def wrapper():\n        # Check for the POLICY_AUD environment variable\n        if not POLICY_AUD:\n          return \"missing required audience\", 403\n\ntoken = ''\n        if 'CF_Authorization' in request.cookies:\n            token = request.cookies['CF_Authorization']\n        else:\n            return \"missing required cf authorization token\", 403\n        keys = _get_public_keys()\n\n# Loop through the keys since we can't pass the key set to the decoder\n        valid_token = False\n        for key in keys:\n            try:\n                # decode returns the claims that has the email when needed\n                jwt.decode(token, key=key, audience=POLICY_AUD, algorithms=['RS256'])\n                valid_token = True\n                break\n            except:\n                pass\n        if not valid_token:\n            return \"invalid token\", 403\n\nreturn f()\n    return wrapper\n\n@app.route('/')\n@verify_token\ndef hello_world():\n    return 'Hello, World!'\n\nif __name__ == '__main__':\n    app.run()\njavascript\nconst express = require(\"express\");\nconst jose = require(\"jose\");\n\n// The Application Audience (AUD) tag for your application\nconst AUD = process.env.POLICY_AUD;\n\n// Your CF Access team domain\nconst TEAM_DOMAIN = process.env.TEAM_DOMAIN;\nconst CERTS_URL = `${TEAM_DOMAIN}/cdn-cgi/access/certs`;\n\nconst JWKS = jose.createRemoteJWKSet(new URL(CERTS_URL));\n\n// verifyToken is a middleware to verify a CF authorization token\nconst verifyToken = async (req, res, next) => {\n  // Check for the AUD environment variable\n  if (!AUD) {\n    return res.status(403).send({\n      status: false,\n      message: \"missing required audience\",\n    });\n  }\n\nconst token = req.headers[\"cf-access-jwt-assertion\"];\n\n// Make sure that the incoming request has our token header\n  if (!token) {\n    return res.status(403).send({\n      status: false,\n      message: \"missing required cf authorization token\",\n    });\n  }\n\ntry {\n    const result = await jose.jwtVerify(token, JWKS, {\n      issuer: TEAM_DOMAIN,\n      audience: AUD,\n    });\n\nreq.user = result.payload;\n    next();\n  } catch (err) {\n    return res.status(403).send({\n      status: false,\n      message: \"invalid token\",\n    });\n  }\n};\n\nconst app = express();\n\napp.use(verifyToken);\n\napp.get(\"/\", (req, res) => {\n  res.send(\"Hello World!\");\n});\n\napp.listen(3333);\ntxt\n$merge([$, {\"groups\": groups.name, 'eduPersonPrincipalName': email}])\njson\n{\n  \"account_id\": \"699d98642c564d2e855e9661899b7252\",\n  \"amr\": [\n    \"pwd\"\n  ],\n  \"auth_status\": \"NONE\",\n  \"common_name\": \"\",\n  \"device_id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n  \"device_sessions\": {\n    \"49e653db-991e-11ee-af26-2243bf8c3428\": {\n      \"last_authenticated\": 1703004275\n    }\n  },\n  \"devicePosture\": {\n    \"8534a230-e85e-4183-8964-a4b7dcf72986\": {\n      \"rule_name\": \"Warp\",\n      \"success\": true,\n      \"type\": \"warp\"\n    }\n  },\n  \"email\": \"jdoe@company.com\",\n  \"gateway_account_id\": \"bTSquyUGwLQjYJn8cI8S1h6M6wU\",\n  \"geo\": {\n    \"country\": \"US\"\n  },\n  \"groups\": [\n    {\n      \"id\": \"12fdf91a-fb23-41b3-995a-de2f72c61d0e\",\n      \"name\": \"IdentityProtection-RiskyUser-RiskLevel-low\"\n    },\n    {\n      \"id\": \"12348f47-8234-4860-a03f-c2a1513f267b\",\n      \"name\": \"Global Administrator\"\n    },\n    {\n      \"id\": \"11235980-87d7-4917-b0aa-74c01914c40e\",\n      \"name\": \"Application Administrator\"\n    }\n  ],\n  \"iat\": 1659474397,\n  \"id\": \"OidHvkPt-I-13IBSnd77UJ8cHgsrUpjs3W6_4t6ES7M\",\n  \"idp\": {\n    \"id\": \"b08e8c0c-a75d-4b3f-8e7b-cd427b7c7b47\",\n    \"type\": \"azureAD\"\n  }\n}\njson\n{\n  \"account_id\": \"699d98642c564d2e855e9661899b7252\",\n  \"amr\": [\n    \"pwd\"\n  ],\n  \"auth_status\": \"NONE\",\n  \"common_name\": \"\",\n  \"device_id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n  \"device_sessions\": {\n    \"49e653db-991e-11ee-af26-2243bf8c3428\": {\n      \"last_authenticated\": 1703004275\n    }\n  },\n  \"devicePosture\": {\n    \"8534a230-e85e-4183-8964-a4b7dcf72986\": {\n      \"rule_name\": \"Warp\",\n      \"success\": true,\n      \"type\": \"warp\"\n    }\n  },\n  \"email\": \"jdoe@company.com\",\n  \"gateway_account_id\": \"bTSquyUGwLQjYJn8cI8S1h6M6wU\",\n  \"geo\": {\n    \"country\": \"US\"\n  },\n  \"groups\": [\n    \"IdentityProtection-RiskyUser-RiskLevel-low\",\n    \"Global Administrator\",\n    \"Application Administrator\"\n  ],\n  \"iat\": 1659474397,\n  \"id\": \"OidHvkPt-I-13IBSnd77UJ8cHgsrUpjs3W6_4t6ES7M\",\n  \"idp\": {\n    \"id\": \"b08e8c0c-a75d-4b3f-8e7b-cd427b7c7b47\",\n    \"type\": \"azureAD\"\n  },\n  \"eduPersonPrincipalName\": \"jdoe@company.com\"\n}\ntxt\n$ ~> |$|{}, ['groups']|\njson\n{\n  \"account_id\": \"699d98642c564d2e855e9661899b7252\",\n  \"amr\": [\n    \"pwd\"\n  ],\n  \"auth_status\": \"NONE\",\n  \"common_name\": \"\",\n  \"device_id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n  \"device_sessions\": {\n    \"49e653db-991e-11ee-af26-2243bf8c3428\": {\n      \"last_authenticated\": 1703004275\n    }\n  },\n  \"devicePosture\": {\n    \"8534a230-e85e-4183-8964-a4b7dcf72986\": {\n      \"rule_name\": \"Warp\",\n      \"success\": true,\n      \"type\": \"warp\"\n    }\n  },\n  \"email\": \"jdoe@company.com\",\n  \"gateway_account_id\": \"bTSquyUGwLQjYJn8cI8S1h6M6wU\",\n  \"geo\": {\n    \"country\": \"US\"\n  },\n  \"iat\": 1659474397,\n  \"id\": \"OidHvkPt-I-13IBSnd77UJ8cHgsrUpjs3W6_4t6ES7M\",\n  \"idp\": {\n    \"id\": \"b08e8c0c-a75d-4b3f-8e7b-cd427b7c7b47\",\n    \"type\": \"azureAD\"\n  }\n}\ntxt\n{\n  \"account_id\": account_id,\n  \"amr\": amr,\n  \"auth_status\": auth_status,\n  \"common_name\": common_name,\n  \"devicePosture\": devicePosture,\n  \"device_id\": device_id,\n  \"device_sessions\": device_sessions,\n  \"email\": email,\n  \"gateway_account_id\": gateway_account_id,\n  \"geo\": geo,\n  \"groups\": $map($.groups, function($group) {\n    {\"group_name\": $group.name}}),\n  \"iat\": iat,\n  \"id\": id,\n  \"idp\": idp\n}\njson\n{\n  \"account_id\": \"699d98642c564d2e855e9661899b7252\",\n  \"amr\": [\n    \"pwd\"\n  ],\n  \"auth_status\": \"NONE\",\n  \"common_name\": \"\",\n  \"devicePosture\": {\n    \"8534a230-e85e-4183-8964-a4b7dcf72986\": {\n      \"rule_name\": \"Warp\",\n      \"success\": true,\n      \"type\": \"warp\"\n    }\n  },\n  \"device_id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n  \"device_sessions\": {\n    \"49e653db-991e-11ee-af26-2210bf8c3428\": {\n      \"last_authenticated\": 1703004275\n    }\n  },\n  \"email\": \"jdoe@company.com\",\n  \"gateway_account_id\": \"bTSquyUGwLQjYJn8cI8S1h6M6wU\",\n  \"geo\": {\n    \"country\": \"US\"\n  },\n  \"groups\": [\n    {\n      \"group_name\": \"IdentityProtection-RiskyUser-RiskLevel-low\"\n    },\n    {\n      \"group_name\": \"Global Administrator\"\n    },\n    {\n      \"group_name\": \"Application Administrator\"\n    }\n  ],\n  \"iat\": 1659474397,\n  \"id\": \"OidHvkPt-I-13IBSnd77UJ8cHgsrUpjs3W6_4t6ES7M\",\n  \"idp\": {\n    \"id\": \"b08e8c0c-a75d-4b3f-8e7b-cd427b7c7b47\",\n    \"type\": \"azureAD\"\n  }\n}\ntxt\n$merge([$, { \"groups\": $filter(groups, function($v) { $contains($v.name, /Administrator/) }) }])\njson\n{\n  \"account_id\": \"699d98642c564d2e855e9661899b7252\",\n  \"amr\": [\n    \"pwd\"\n  ],\n  \"auth_status\": \"NONE\",\n  \"common_name\": \"\",\n  \"device_id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n  \"device_sessions\": {\n    \"49e653db-991e-11ee-af26-2243bf8c3428\": {\n      \"last_authenticated\": 1703004275\n    }\n  },\n  \"devicePosture\": {\n    \"8534a230-e85e-4183-8964-a4b7dcf72986\": {\n      \"rule_name\": \"Warp\",\n      \"success\": true,\n      \"type\": \"warp\"\n    }\n  },\n  \"email\": \"jdoe@company.com\",\n  \"gateway_account_id\": \"bTSquyUGwLQjYJn8cI8S1h6M6wU\",\n  \"geo\": {\n    \"country\": \"US\"\n  },\n  \"groups\": [\n    {\n      \"id\": \"12348f47-8234-4860-a03f-c2a1513f267b\",\n      \"name\": \"Global Administrator\"\n    },\n    {\n      \"id\": \"11235980-87d7-4917-b0aa-74c01914c40e\",\n      \"name\": \"Application Administrator\"\n    }\n  ],\n  \"iat\": 1659474397,\n  \"id\": \"OidHvkPt-I-13IBSnd77UJ8cHgsrUpjs3W6_4t6ES7M\",\n  \"idp\": {\n    \"id\": \"b08e8c0c-a75d-4b3f-8e7b-cd427b7c7b47\",\n    \"type\": \"azureAD\"\n  }\n}\ntxt\n   -----BEGIN CERTIFICATE-----\n   <PUBLIC_KEY>\n   -----END CERTIFICATE-----\n   txt\n    https://<your-domain>.my.salesforce.com/services/authcallback/<URL Suffix>\n    sh\ncloudflared tunnel login\nsh\ncloudflared tunnel --hostname tcp.site.com --url tcp://localhost:7870\nsh\ncloudflared access tcp --hostname tcp.site.com --url localhost:9210\nsh\ndig mx <YOUR_DOMAIN>\ntxt\n; <<>> DiG 9.10.6 <<>> mx <YOUR_DOMAIN>\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 39938\n;; flags: qr rd ra; QUERY: 1, ANSWER: 5, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;<YOUR_DOMAIN>.    IN  MX\n\n;; ANSWER SECTION:\n<YOUR_DOMAIN>.    300    IN    MX    10 mxa.global.inbound.cf-emailsecurity.net.\n<YOUR_DOMAIN>.    300    IN    MX    10 mxb.global.inbound.cf-emailsecurity.net.\nsh\ndig mx <YOUR_DOMAIN>\ntxt\n; <<>> DiG 9.10.6 <<>> mx <YOUR_DOMAIN>\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 39938\n;; flags: qr rd ra; QUERY: 1, ANSWER: 5, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;<YOUR_DOMAIN>.    IN  MX\n\n;; ANSWER SECTION:\n<YOUR_DOMAIN>.    300    IN    MX    10 mxa.global.inbound.cf-emailsecurity.net.\n<YOUR_DOMAIN>.    300    IN    MX    10 mxb.global.inbound.cf-emailsecurity.net.\nsh\ndig mx <YOUR_DOMAIN>\ntxt\n; <<>> DiG 9.10.6 <<>> mx <YOUR_DOMAIN>\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 39938\n;; flags: qr rd ra; QUERY: 1, ANSWER: 5, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n;; QUESTION SECTION:\n;<YOUR_DOMAIN>.    IN  MX\n\n;; ANSWER SECTION:\n<YOUR_DOMAIN>.    300    IN    MX    10 mxa.global.inbound.cf-emailsecurity.net.\n<YOUR_DOMAIN>.    300    IN    MX    10 mxb.global.inbound.cf-emailsecurity.net.\nsh\n     sudo systemctl edit --full cloudflared.service\n     txt\n     [Unit]\n     Description=Cloudflare Tunnel\n     After=network.target\n\n[Service]\n     TimeoutStartSec=0\n     Type=notify\n     ExecStart=/usr/local/bin/cloudflared tunnel --loglevel info --logfile /var/log/cloudflared/cloudflared.log run --token <TOKEN VALUE>\n     Restart=on-failure\n     RestartSec=5s\n\n[Install]\n     WantedBy=multi-user.target\n     sh\n     sudo systemctl restart cloudflared\n     sh\n     sudo systemctl status cloudflared\n     sh\n     ● cloudflared.service - cloudflared\n      Loaded: loaded (/etc/systemd/system/cloudflared.service; enabled; preset: enabled)\n      Active: active (running) since Wed 2024-10-09 20:02:59 UTC; 2s ago\n     Main PID: 2157 (cloudflared)\n       Tasks: 8 (limit: 1136)\n      Memory: 16.3M\n         CPU: 136ms\n      CGroup: /system.slice/cloudflared.service\n              └─2157 /usr/bin/cloudflared tunnel --loglevel info --logfile /var/log/cloudflared/cloudflared.log run --token eyJhIjoi...\n     sh\n     sudo launchctl stop com.cloudflare.cloudflared\n     sh\n     sudo launchctl unload /Library/LaunchDaemons/com.cloudflare.cloudflared.plist\n     txt\n     <plist version=\"1.0\">\n         <dict>\n             <key>Label</key>\n             <string>com.cloudflare.cloudflared</string>\n             <key>ProgramArguments</key>\n             <array>\n                 <string>/opt/homebrew/bin/cloudflared</string>\n                 <string>tunnel</string>\n                 <string>--logfile</string>\n                 <string><PATH></string>\n                 <string>--loglevel</string>\n                 <string>debug</string>\n                 <string>run</string>\n                 <string>--token</string>\n                 <string><TOKEN VALUE> </string>\n             </array>\n     sh\n     sudo launchctl load /Library/LaunchDaemons/com.cloudflare.cloudflared.plist\n     sh\n     sudo launchctl start com.cloudflare.cloudflared\n     txt\n     C:\\Program Files (x86)\\cloudflared\\.\\cloudflared.exe tunnel --loglevel info --logfile <PATH> run --token <TOKEN VALUE>\n     bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/cfd_tunnel/$TUNNEL_ID/token\" \\\n    --request GET \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n  sh\n  {\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": \"eyJhIjoiNWFiNGU5Z...\"\n  }\n  tf\n  data \"cloudflare_zero_trust_tunnel_cloudflared_token\" \"tunnel_token\" {\n    account_id = var.cloudflare_account_id\n    tunnel_id = cloudflare_zero_trust_tunnel_cloudflared.example_tunnel.id\n  }\n  tf\n     output \"tunnel_token\" {\n       value       = data.cloudflare_zero_trust_tunnel_cloudflared_token.tunnel_token.token\n       sensitive   = true\n     }\n     sh\n     terraform apply\n     sh\n     terraform output -raw tunnel_token\n     sh\n     eyJhIj...\n     tf\n  resource \"vault_generic_secret\" \"tunnel_token\" {\n    path         = \"kv/cloudflare/tunnel_token\"\n\ndata_json = jsonencode({\n      \"TUNNEL_TOKEN\" = data.cloudflare_zero_trust_tunnel_cloudflared_token.tunnel_token.token\n    })\n  }\n  sh\n     openssl rand -base64 32\n     sh\n     AQIDBAUGBwgBAgMEBQYHCAECAwQFBgcIAQIDBAUGBwg=\n     bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/cfd_tunnel/$TUNNEL_ID\" \\\n       --request PATCH \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n       --json '{\n         \"name\": \"Example tunnel\",\n         \"tunnel_secret\": \"AQIDBAUGBwgBAgMEBQYHCAECAwQFBgcIAQIDBAUGBwg=\"\n       }'\n     sh\n     {\n       \"success\": true,\n       \"errors\": [],\n       \"messages\": [],\n       \"result\": {\n         \"id\": \"f70ff985-a4ef-4643-bbbc-4a0ed4fc8415\",\n         \"account_tag\": \"699d98642c564d2e855e9661899b7252\",\n         \"created_at\": \"2024-12-04T22:03:26.291225Z\",\n         \"deleted_at\": null,\n         \"name\": \"Example tunnel\",\n         \"connections\": [],\n         \"conns_active_at\": null,\n         \"conns_inactive_at\": \"2024-12-04T22:03:26.291225Z\",\n         \"tun_type\": \"cfd_tunnel\",\n         \"metadata\": {},\n         \"status\": \"inactive\",\n         \"remote_config\": true,\n         \"token\": \"eyJhIjoiNWFiNGU5Z...\"\n       }\n     }\n     sh\n   sudo cloudflared service install <TOKEN>\n   sh\n   sudo systemctl restart cloudflared.service\n   sh\n   sudo systemctl status cloudflared\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/cfd_tunnel/$TUNNEL_ID/connections\" \\\n     --request DELETE \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   sh\n   sudo cloudflared service install <TOKEN>\n   sh\n   sudo systemctl restart cloudflared.service\n   sh\n   sudo systemctl status cloudflared\n   mermaid\ngraph LR\n\tC((Cloudflare))\n\tsubgraph E[Private network]\n\t\t\tcf1[\"cloudflared <br> (Tunnel-1 replica)\"]\n\t\t\tcf2[\"cloudflared <br> (Tunnel-1 replica)\"]\n\t\t\tS1[Application]\n\t\t\tcf1-->S1\n\t\t\tcf2-->S1\n\tend\n\tC -- \"Connections x 4 <br>\"--> cf1\n\tC --> cf1\n\tC --> cf1\n\tC --> cf1\n\tC -- Connections x 4--> cf2\n\tC --> cf2\n\tC --> cf2\n\tC --> cf2\nmermaid\ngraph LR\n\t\taccTitle: Load balancing traffic to applications behind Cloudflare Tunnel\n\nA[Internet] --> C{Cloudflare <br> Load Balancer}\n    B[WARP clients] --> C\n\t\tM[Magic WAN] --> C\n    C -- Tunnel 1 --> cf1\n    C -- Tunnel 2 --> cf2\n\t\tsubgraph F[Data center 2]\n\t\t\t\tcf2[cloudflared <br> server]\n       \tS3[App server]\n        S4[App server]\n\t\t\t\tcf2-->S3\n\t\t\t\tcf2-->S4\n    end\n\t\tsubgraph E[Data center 1]\n\t\t\t\tcf1[cloudflared <br> server]\n        S1[App server]\n        S2[App server]\n\t\t\t\tcf1-->S1\n\t\t\t\tcf1-->S2\n    end\nsh\n   sudo iptables -L\n   sh\n   sudo iptables -A INPUT -i lo -j ACCEPT\n   sh\n   sudo iptables -A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT\n   sh\n   sudo iptables -A INPUT -p tcp --dport ssh -j ACCEPT\n   sh\n   sudo iptables -A INPUT -j DROP\n   sh\n   sudo iptables -L\n   sh\ndig A region1.v2.argotunnel.com\nsh\n;; ANSWER SECTION:\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.167\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.67\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.57\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.107\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.27\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.7\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.227\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.47\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.37\nregion1.v2.argotunnel.com. 86400 IN  A  198.41.192.77\n...\nsh\ndig AAAA region1.v2.argotunnel.com\nsh\n...\n;; ANSWER SECTION:\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::1\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::2\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::3\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::4\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::5\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::6\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::7\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::8\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::9\nregion1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::10\n...\nsh\ndig A region2.v2.argotunnel.com\nsh\n;; ANSWER SECTION:\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.13\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.193\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.33\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.233\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.53\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.63\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.113\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.73\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.43\nregion2.v2.argotunnel.com. 86400 IN  A  198.41.200.23\n...\nsh\ndig AAAA region2.v2.argotunnel.com\nsh\n...\n;; ANSWER SECTION:\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::1\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::2\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::3\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::4\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::5\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::6\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::7\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::8\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::9\nregion2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::10\n...\npowershell\nResolve-DnsName -Name _v2-origintunneld._tcp.argotunnel.com SRV\ntxt\nName                                     Type   TTL   Section    NameTarget                     Priority Weight Port\n----                                     ----   ---   -------    ----------                     -------- ------ ----\n_v2-origintunneld._tcp.argotunnel.com       SRV    112   Answer     region2.v2.argotunnel.com         2        1      7844\n_v2-origintunneld._tcp.argotunnel.com       SRV    112   Answer     region1.v2.argotunnel.com         1        1      7844\npowershell\ntnc region1.v2.argotunnel.com -port 443\ntxt\nComputerName     : region1.v2.argotunnel.com\nRemoteAddress    : 198.41.192.227\nRemotePort       : 443\nInterfaceAlias   : Ethernet\nSourceAddress    : 10.0.2.15\nTcpTestSucceeded : True\npowershell\ntnc region1.v2.argotunnel.com -port 7844\ntxt\nComputerName     : region1.v2.argotunnel.com\nRemoteAddress    : 198.41.192.227\nRemotePort       : 7844\nInterfaceAlias   : Ethernet\nSourceAddress    : 10.0.2.15\nTcpTestSucceeded : True\nsh\n   ssh-keygen -t rsa -f ~/.ssh/gcp_ssh -C <username in GCP>\n   sh\n   mkdir ansible-tunnel\n   sh\n   cd ansible-tunnel\n   sh\n   touch variables.tf\n   tf\n   # GCP variables\n   variable \"gcp_project_id\" {\n     description = \"Google Cloud Platform (GCP) project ID\"\n     type        = string\n   }\n\nvariable \"zone\" {\n     description = \"Geographical zone for the GCP VM instance\"\n     type        = string\n   }\n\nvariable \"machine_type\" {\n     description = \"Machine type for the GCP VM instance\"\n     type        = string\n   }\n\n# Cloudflare variables\n   variable \"cloudflare_zone\" {\n     description = \"Domain used to expose the GCP VM instance to the Internet\"\n     type        = string\n   }\n\nvariable \"cloudflare_zone_id\" {\n     description = \"Zone ID for your domain\"\n     type        = string\n   }\n\nvariable \"cloudflare_account_id\" {\n     description = \"Account ID for your Cloudflare account\"\n     type        = string\n     sensitive   = true\n   }\n\nvariable \"cloudflare_email\" {\n     description = \"Email address for your Cloudflare account\"\n     type        = string\n     sensitive   = true\n   }\n\nvariable \"cloudflare_token\" {\n     description = \"Cloudflare API token\"\n     type        = string\n     sensitive   = true\n   }\n   sh\n   touch terraform.tfvars\n   tfvars\n   cloudflare_zone           = \"example.com\"\n   cloudflare_zone_id        = \"023e105f4ecef8ad9ca31a8372d0c353\"\n   cloudflare_account_id     = \"372e67954025e0ba6aaa6d586b9e0b59\"\n   cloudflare_email          = \"user@example.com\"\n   cloudflare_token          = \"y3AalHS_E7Vabk3c3lX950F90_Xl7YtjSlzyFn_X\"\n   gcp_project_id            = \"testvm-123\"\n   zone                      = \"us-central1-a\"\n   machine_type              = \"e2-medium\"\n   sh\n   touch providers.tf\n   tf\n   terraform {\n     required_providers {\n       cloudflare = {\n         source = \"cloudflare/cloudflare\"\n         version = \">= 5.8.2\"\n       }\n       google = {\n         source = \"hashicorp/google\"\n       }\n     }\n     required_version = \">= 1.2\"\n   }\n\n# Providers\n   provider \"cloudflare\" {\n     api_token    = var.cloudflare_token\n   }\n   provider \"google\" {\n     project    = var.gcp_project_id\n   }\n   provider \"random\" {\n   }\n   sh\n   touch Cloudflare-config.tf\n   tf\n   # Creates a new remotely-managed tunnel for the GCP VM.\n   resource \"cloudflare_zero_trust_tunnel_cloudflared\" \"gcp_tunnel\" {\n     account_id    = var.cloudflare_account_id\n     name          = \"Ansible GCP tunnel\"\n     config_src    = \"cloudflare\"\n   }\n\n# Reads the token used to run the tunnel on the server.\n   data \"cloudflare_zero_trust_tunnel_cloudflared_token\" \"gcp_tunnel_token\" {\n     account_id   = var.cloudflare_account_id\n     tunnel_id   = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n   }\n\n# Creates the CNAME record that routes http_app.${var.cloudflare_zone} to the tunnel.\n   resource \"cloudflare_dns_record\" \"http_app\" {\n     zone_id = var.cloudflare_zone_id\n     name    = \"http_app\"\n     content = \"${cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id}.cfargotunnel.com\"\n     type    = \"CNAME\"\n     ttl     = 1\n     proxied = true\n   }\n\n# Configures tunnel with a published application for clientless access.\n   resource \"cloudflare_zero_trust_tunnel_cloudflared_config\" \"gcp_tunnel_config\" {\n     tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n     account_id = var.cloudflare_account_id\n     config     = {\n       ingress   = [\n         {\n           hostname = \"http_app.${var.cloudflare_zone}\"\n           service  = \"http://localhost:80\"\n         },\n         {\n           service  = \"http_status:404\"\n         }\n       ]\n     }\n   }\n   sh\n   touch GCP-config.tf\n   txt\n   # Selects the OS for the GCP VM.\n   data \"google_compute_image\" \"image\" {\n   family  = \"ubuntu-2204-lts\"\n   project = \"ubuntu-os-cloud\"\n   }\n\n# Sets up a GCP VM instance.\n   resource \"google_compute_instance\" \"http_server\" {\n   name         = \"ansible-inst\"\n   machine_type = var.machine_type\n   zone         = var.zone\n   tags         = []\n   boot_disk {\n       initialize_params {\n       image = data.google_compute_image.image.self_link\n       }\n   }\n   network_interface {\n       network = \"default\"\n       access_config {\n       // Ephemeral IP\n       }\n   }\n   scheduling {\n       preemptible = true\n       automatic_restart = false\n   }\n\n// Installs Python3 on the VM.\n   provisioner \"remote-exec\" {\n       inline = [\n       \"sudo apt update\", \"sudo apt install python3 -y\",  \"echo Done!\"\n       ]\n       connection {\n       host = self.network_interface.0.access_config.0.nat_ip\n       user = \"<username in GCP>\"\n       type = \"ssh\"\n       private_key= file(\"<path to private key>\")\n       }\n   }\n   provisioner \"local-exec\" {\n       // If specifying an SSH key and user, add `--private-key <path to private key> -u var.name`\n       command = \"ANSIBLE_HOST_KEY_CHECKING=False ansible-playbook -u <username in GCP> --private-key <path to private key> -i ${self.network_interface.0.access_config.0.nat_ip}, playbook.yml\"\n   }\n\nmetadata = {\n       cf-email     = var.cloudflare_email\n       cf-zone      = var.cloudflare_zone\n       ssh-keys     = \"<username in GCP>:${file(\"<path to public key>\")}\"\n   }\n   depends_on = [\n       local_file.tf_ansible_vars_file\n   ]\n   }\n   sh\n   touch export.tf\n   tf\n   resource \"local_file\" \"tf_ansible_vars_file\" {\n     content = <<-DOC\n       # Ansible vars_file containing variable values from Terraform.\n       tunnel_id: ${cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id}\n       tunnel_name: ${cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.name}\n       tunnel_token: ${data.cloudflare_zero_trust_tunnel_cloudflared_token.gcp_tunnel_token.token}\n       DOC\n\nfilename = \"./tf_ansible_vars_file.yml\"\n   }\n   sh\n   touch playbook.yml\n   yml\n---\n- hosts: all\n  become: yes\n  # Import tunnel variables into the VM.\n  vars_files:\n    - ./tf_ansible_vars_file.yml\n  # Execute the following commands on the VM.\n  tasks:\n    - name: Download the cloudflared Linux package.\n      shell: wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb\n    - name: Depackage cloudflared.\n      shell: sudo dpkg -i cloudflared-linux-amd64.deb\n    - name: Install the tunnel as a systemd service.\n      shell: \"cloudflared service install {{ tunnel_token }}\"\n    - name: Start the tunnel.\n      systemd:\n        name: cloudflared\n        state: started\n        enabled: true\n        masked: no\n    - name: Deploy an example Apache web server on port 80.\n      shell: apt update && apt -y install apache2\n    - name: Edit the default Apache index file.\n      copy:\n        dest: /var/www/html/index.html\n        content: |\n          <!DOCTYPE html>\n          <html>\n          <body>\n            <h1>Hello Cloudflare!</h1>\n            <p>This page was created for a Cloudflare demo.</p>\n          </body>\n          </html>\nsh\n   terraform init\n   sh\n   terraform plan\n   sh\n   terraform apply\n   sh\ncd Downloads\nplaintext\nchmod 400 \"YourKeyPair.pem\"\nsh\nssh -i \"YourKeyPair.pem\" ubuntu@ec2-44-202-59-16.compute-1.amazonaws.com\nbash\n$ apt update\n\n$ apt -y install apache2\n\n$ cat <<EOF > /var/www/html/index.html\n<html><body><h1>Hello Cloudflare!</h1>\n<p>This page was created for a Cloudflare demo.</p>\n</body></html>\nEOF\nsh\n   $ curl 172.31.19.0\n   <html><body><h1>Hello Cloudflare!</h1>\n   <p>This page was created for a Cloudflare demo.</p>\n   </body></html>\n   sh\n   cd Downloads\n   sh\n   ssh -i <private key path> azureuser@20.115.124.241\n   sh\n   sudo mkdir -p --mode=0755 /usr/share/keyrings\n   curl -fsSL https://pkg.cloudflare.com/cloudflare-public-v2.gpg | sudo tee /usr/share/keyrings/cloudflare-public-v2.gpg >/dev/null\n   sh\n   echo \"deb [signed-by=/usr/share/keyrings/cloudflare-public-v2.gpg] https://pkg.cloudflare.com/cloudflared any main\" | sudo tee /etc/apt/sources.list.d/cloudflared.list\n   sh\n   sudo apt-get update && sudo apt-get install cloudflared\n   sh\n   cloudflared tunnel login\n   sh\n   cloudflared tunnel create Azure-01\n   sh\n   mkdir /etc/cloudflared\n   sh\n   cd /etc/cloudflared\n   sh\n   vim config.yml\n   txt\n   tunnel: <Tunnel ID/name>\n   credentials-file: /root/.cloudflared/<Tunnel ID>.json\n   protocol: quic\n   warp-routing:\n      enabled: true\n   logfile: /var/log/cloudflared.log\n   #cloudflared to the origin debug\n   loglevel: debug\n   #cloudflared to cloudflare debug\n   transport-loglevel: info\n   sh\ncloudflared service install\nsh\nsystemctl start cloudflared\nsh\nsystemctl status cloudflared\nbash\n   #!/bin/bash\n   apt update\n   apt -y install apache2\n   cat <<EOF > /var/www/html/index.html\n   <html><body><h1>Hello Cloudflare!</h1>\n   <p>This page was created for a Cloudflare demo.</p>\n   </body></html>\n   EOF\n   sh\n   curl 10.0.0.2\n   sh\n   <html><body><h1>Hello Cloudflare!</h1>\n   <p>This page was created for a Cloudflare demo.</p>\n   </body></html>\n   sh\n   gcloud auth application-default login\n   sh\n   mkdir cloudflare-tf\n   sh\n   cd cloudflare-tf\n   sh\n   touch variables.tf\n   tf\n   # GCP variables\n   variable \"gcp_project_id\" {\n     description = \"Google Cloud Platform (GCP) project ID\"\n     type        = string\n   }\n\nvariable \"zone\" {\n     description = \"Geographical zone for the GCP VM instance\"\n     type        = string\n   }\n\nvariable \"machine_type\" {\n     description = \"Machine type for the GCP VM instance\"\n     type        = string\n   }\n\n# Cloudflare variables\n   variable \"cloudflare_zone\" {\n     description = \"Domain used to expose the GCP VM instance to the Internet\"\n     type        = string\n   }\n\nvariable \"cloudflare_zone_id\" {\n     description = \"Zone ID for your domain\"\n     type        = string\n   }\n\nvariable \"cloudflare_account_id\" {\n     description = \"Account ID for your Cloudflare account\"\n     type        = string\n     sensitive   = true\n   }\n\nvariable \"cloudflare_email\" {\n     description = \"Email address for your Cloudflare account\"\n     type        = string\n     sensitive   = true\n   }\n\nvariable \"cloudflare_token\" {\n     description = \"Cloudflare API token\"\n     type        = string\n     sensitive   = true\n   }\n   sh\n   touch terraform.tfvars\n   tfvars\n   cloudflare_zone           = \"example.com\"\n   cloudflare_zone_id        = \"023e105f4ecef8ad9ca31a8372d0c353\"\n   cloudflare_account_id     = \"372e67954025e0ba6aaa6d586b9e0b59\"\n   cloudflare_email          = \"user@example.com\"\n   cloudflare_token          = \"y3AalHS_E7Vabk3c3lX950F90_Xl7YtjSlzyFn_X\"\n   gcp_project_id            = \"testvm-123\"\n   zone                      = \"us-central1-a\"\n   machine_type              = \"e2-medium\"\n   sh\n   touch providers.tf\n   tf\n     terraform {\n       required_providers {\n         cloudflare = {\n           source = \"cloudflare/cloudflare\"\n           version = \">= 5.8.2\"\n         }\n         google = {\n           source = \"hashicorp/google\"\n         }\n       }\n       required_version = \">= 1.2\"\n     }\n\n# Providers\n     provider \"cloudflare\" {\n       api_token    = var.cloudflare_token\n     }\n     provider \"google\" {\n       project    = var.gcp_project_id\n     }\n     provider \"random\" {\n     }\n     tf\n     terraform {\n       required_providers {\n         cloudflare = {\n           source = \"cloudflare/cloudflare\"\n           version = \">= 4.40.0, < 5.0.0\"\n         }\n         google = {\n           source = \"hashicorp/google\"\n         }\n         random = {\n           source = \"hashicorp/random\"\n         }\n       }\n       required_version = \">= 1.2\"\n     }\n\n# Providers\n     provider \"cloudflare\" {\n       api_token    = var.cloudflare_token\n     }\n     provider \"google\" {\n       project    = var.gcp_project_id\n     }\n     provider \"random\" {\n     }\n     sh\n   touch Cloudflare-config.tf\n   tf\n     # Creates a new remotely-managed tunnel for the GCP VM.\n     resource \"cloudflare_zero_trust_tunnel_cloudflared\" \"gcp_tunnel\" {\n       account_id    = var.cloudflare_account_id\n       name          = \"Terraform GCP tunnel\"\n       config_src    = \"cloudflare\"\n     }\n\n# Reads the token used to run the tunnel on the server.\n     data \"cloudflare_zero_trust_tunnel_cloudflared_token\" \"gcp_tunnel_token\" {\n       account_id   = var.cloudflare_account_id\n       tunnel_id   = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n     }\n\n# Creates the CNAME record that routes http_app.${var.cloudflare_zone} to the tunnel.\n     resource \"cloudflare_dns_record\" \"http_app\" {\n       zone_id = var.cloudflare_zone_id\n       name    = \"http_app\"\n       content = \"${cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id}.cfargotunnel.com\"\n       type    = \"CNAME\"\n       ttl     = 1\n       proxied = true\n     }\n\n# Configures tunnel with a published application for clientless access.\n     resource \"cloudflare_zero_trust_tunnel_cloudflared_config\" \"gcp_tunnel_config\" {\n       tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n       account_id = var.cloudflare_account_id\n       config     = {\n         ingress   = [\n           {\n             hostname = \"http_app.${var.cloudflare_zone}\"\n             service  = \"http://httpbin:80\"\n           },\n           {\n             service  = \"http_status:404\"\n           }\n         ]\n       }\n     }\n\n# (Optional) Routes internal IP of GCP instance through the tunnel for private network access using WARP.\n     resource \"cloudflare_zero_trust_tunnel_cloudflared_route\" \"example_tunnel_route\" {\n     account_id         = var.cloudflare_account_id\n     tunnel_id          = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n     network            = google_compute_instance.http_server.network_interface.0.network_ip\n     comment            = \"Example tunnel route\"\n     }\n\n# Creates a reusable Access policy.\n     resource \"cloudflare_zero_trust_access_policy\" \"allow_emails\" {\n       account_id   = var.cloudflare_account_id\n       name         = \"Allow email addresses\"\n       decision     = \"allow\"\n       include      = [\n         {\n           email = {\n             email = var.cloudflare_email\n           }\n         },\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n     }\n\n# Creates an Access application to control who can connect to the public hostname.\n     resource \"cloudflare_zero_trust_access_application\" \"http_app\" {\n       account_id       = var.cloudflare_account_id\n       type             = \"self_hosted\"\n       name             = \"Access application for http_app.${var.cloudflare_zone}\"\n       domain           = \"http_app.${var.cloudflare_zone}\"\n       policies = [\n         {\n           id = cloudflare_zero_trust_access_policy.allow_emails.id\n           precedence = 1\n         }\n       ]\n     }\n     tf\n     # Generates a 32-byte secret for the tunnel.\n     resource \"random_bytes\" \"tunnel_secret\" {\n       byte_length = 32\n     }\n\n# Creates a new remotely-managed tunnel for the GCP VM.\n     resource \"cloudflare_zero_trust_tunnel_cloudflared\" \"gcp_tunnel\" {\n       account_id = var.cloudflare_account_id\n       name       = \"Terraform GCP tunnel\"\n       secret     = random_bytes.tunnel_secret.base64\n     }\n\n# Creates the CNAME record that routes http_app.${var.cloudflare_zone} to the tunnel.\n     resource \"cloudflare_record\" \"http_app\" {\n       zone_id = var.cloudflare_zone_id\n       name    = \"http_app\"\n       content   = \"${cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.cname}\"\n       type    = \"CNAME\"\n       proxied = true\n     }\n\n# Configures tunnel with a published application for clientless access.\n       resource \"cloudflare_zero_trust_tunnel_cloudflared_config\" \"gcp_tunnel_config\" {\n         tunnel_id = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n         account_id = var.cloudflare_account_id\n         config {\n           ingress_rule {\n             hostname = \"${cloudflare_record.http_app.hostname}\"\n             service  = \"http://httpbin:80\"\n           }\n           ingress_rule {\n             service  = \"http_status:404\"\n           }\n         }\n       }\n\n# (Optional) Route internal IP of GCP instance through the tunnel for private network access using WARP.\n     resource \"cloudflare_zero_trust_tunnel_route\" \"example_tunnel_route\" {\n     account_id         = var.cloudflare_account_id\n     tunnel_id          = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.id\n     network            = google_compute_instance.http_server.network_interface.0.network_ip\n     comment            = \"Example tunnel route\"\n     }\n\n# Creates an Access application to control who can connect to the public hostname.\n     resource \"cloudflare_zero_trust_access_application\" \"http_app\" {\n       account_id          = var.cloudflare_account_id\n       name             = \"Access application for http_app.${var.cloudflare_zone}\"\n       domain           = \"http_app.${var.cloudflare_zone}\"\n     }\n\n# Creates a (legacy) Access policy for the Access application.\n     resource \"cloudflare_zero_trust_access_policy\" \"allow_emails\" {\n       application_id = cloudflare_zero_trust_access_application.http_app.id\n       account_id        = var.cloudflare_account_id\n       name           = \"Example policy for http_app.${var.cloudflare_zone}\"\n       precedence     = \"1\"\n       decision       = \"allow\"\n       include {\n         email = [var.cloudflare_email]\n       }\n     }\n     sh\n   touch GCP-config.tf\n   tf\n     # OS the server will use\n     data \"google_compute_image\" \"image\" {\n       family  = \"ubuntu-2204-lts\"\n       project = \"ubuntu-os-cloud\"\n     }\n\n# GCP Instance resource\n     resource \"google_compute_instance\" \"http_server\" {\n       name         = \"test\"\n       machine_type = var.machine_type\n       zone         = var.zone\n       tags         = []\n       boot_disk {\n         initialize_params {\n           image = data.google_compute_image.image.self_link\n         }\n       }\n\nnetwork_interface {\n         network = \"default\"\n         access_config {\n           //Ephemeral IP\n         }\n       }\n       // Optional config to make instance ephemeral\n     /*  scheduling {\n         preemptible       = true\n         automatic_restart = false\n       } */\n\n// Pass the tunnel token to the GCP server so that the server can install and run the tunnel upon startup.\n       metadata_startup_script = templatefile(\"./install-tunnel.tftpl\",\n         {\n           tunnel_token = data.cloudflare_zero_trust_tunnel_cloudflared_token.gcp_tunnel_token.token\n         })\n     }\n     tf\n     # OS the server will use\n     data \"google_compute_image\" \"image\" {\n       family  = \"ubuntu-2204-lts\"\n       project = \"ubuntu-os-cloud\"\n     }\n\n# GCP Instance resource\n     resource \"google_compute_instance\" \"http_server\" {\n       name         = \"test\"\n       machine_type = var.machine_type\n       zone         = var.zone\n       tags         = []\n       boot_disk {\n         initialize_params {\n           image = data.google_compute_image.image.self_link\n         }\n       }\n\nnetwork_interface {\n         network = \"default\"\n         access_config {\n           //Ephemeral IP\n         }\n       }\n       // Optional config to make instance ephemeral\n     /*  scheduling {\n         preemptible       = true\n         automatic_restart = false\n       } */\n\n// Pass the tunnel token to the GCP server so that the server can install and run the tunnel upon startup.\n       metadata_startup_script = templatefile(\"./install-tunnel.tftpl\",\n         {\n           tunnel_token = cloudflare_zero_trust_tunnel_cloudflared.gcp_tunnel.tunnel_token\n         })\n     }\n     sh\n   touch install-tunnel.tftpl\n   bash\n   # Script to install Cloudflare Tunnel and Docker resources\n\n# Docker configuration\n   cd /tmp\n   sudo apt-get install software-properties-common\n   # Retrieving the docker repository for this OS\n   curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n   sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable\"\n   # The OS is updated and docker is installed\n   sudo apt update -y && sudo apt upgrade -y\n   sudo apt install docker docker-compose -y\n   # Add the HTTPBin application and run it on localhost:8080.\n   cat > /tmp/docker-compose.yml << \"EOF\"\n   version: '3'\n   services:\n     httpbin:\n       image: kennethreitz/httpbin\n       restart: always\n       container_name: httpbin\n       ports:\n         - 8080:80\n\ncloudflared:\n       image: cloudflare/cloudflared:latest\n       restart: always\n       container_name: cloudflared\n       command: tunnel run --token ${tunnel_token}\n   EOF\n   cd /tmp\n   sudo docker-compose up -d\n   sh\n   terraform init\n   sh\n   terraform plan\n   sh\n   terraform apply\n   sh\n   kubectl get all\n   sh\n   NAME                 TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE\n   service/kubernetes   ClusterIP   34.118.224.1   <none>        443/TCP   15m\n   sh\n   mkdir tunnel-example\n   sh\n   cd tunnel-example\n   yaml\n   apiVersion: apps/v1\n   kind: Deployment\n   metadata:\n     name: httpbin-deployment\n     namespace: default\n   spec:\n     replicas: 2\n     selector:\n       matchLabels:\n         app: httpbin\n     template:\n       metadata:\n         labels:\n           app: httpbin\n       spec:\n         containers:\n         - name: httpbin\n           image: kennethreitz/httpbin:latest\n           imagePullPolicy: IfNotPresent\n           ports:\n           - containerPort: 80\n   yaml\n   apiVersion: v1\n   kind: Service\n   metadata:\n     name: httpbin-service\n     namespace: default\n   spec:\n     type: LoadBalancer\n     selector:\n       app: httpbin\n     ports:\n     - port: 80\n       targetPort: 80\n   sh\n   kubectl create -f httpbin.yaml -f httpbinsvc.yaml\n   sh\n   kubectl get all\n   sh\n   NAME                                     READY   STATUS    RESTARTS   AGE\n   pod/httpbin-deployment-bc6689c5d-b5ftk   1/1     Running   0          79s\n   pod/httpbin-deployment-bc6689c5d-cbd9m   1/1     Running   0          79s\n\nNAME                      TYPE           CLUSTER-IP       EXTERNAL-IP    PORT(S)        AGE\n   service/httpbin-service   LoadBalancer   34.118.225.147   34.75.201.60   80:31967/TCP   79s\n   service/kubernetes        ClusterIP      34.118.224.1     <none>         443/TCP        24h\n\nNAME                                 READY   UP-TO-DATE   AVAILABLE   AGE\n   deployment.apps/httpbin-deployment   2/2     2            2           79s\n\nNAME                                           DESIRED   CURRENT   READY   AGE\n   replicaset.apps/httpbin-deployment-bc6689c5d   2         2         2       79s\n   yaml\n   apiVersion: v1\n   kind: Secret\n   metadata:\n     name: tunnel-token\n   stringData:\n     token: <YOUR_TUNNEL_TOKEN>\n   sh\n   kubectl create -f tunnel-token.yaml\n   sh\n   kubectl get secrets\n   sh\n   NAME        TYPE     DATA   AGE\n   tunnel-token   Opaque   1      100s\n   yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cloudflared-deployment\n  namespace: default\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      pod: cloudflared\n  template:\n    metadata:\n      labels:\n        pod: cloudflared\n    spec:\n      securityContext:\n        sysctls:\n        # Allows ICMP traffic (ping, traceroute) to resources behind cloudflared.\n          - name: net.ipv4.ping_group_range\n            value: \"65532 65532\"\n      containers:\n        - image: cloudflare/cloudflared:latest\n          name: cloudflared\n          env:\n            # Defines an environment variable for the tunnel token.\n            - name: TUNNEL_TOKEN\n              valueFrom:\n                secretKeyRef:\n                  name: tunnel-token\n                  key: token\n          command:\n            # Configures tunnel run parameters\n            - cloudflared\n            - tunnel\n            - --no-autoupdate\n            - --loglevel\n            - info\n            - --metrics\n            - 0.0.0.0:2000\n            - run\n          livenessProbe:\n            httpGet:\n              # Cloudflared has a /ready endpoint which returns 200 if and only if\n              # it has an active connection to Cloudflare's network.\n              path: /ready\n              port: 2000\n            failureThreshold: 1\n            initialDelaySeconds: 10\n            periodSeconds: 10\nsh\n   kubectl create -f tunnel.yaml\n   sh\n   kubectl get all\n   sh\n   NAME                                          READY   STATUS    RESTARTS   AGE\n   pod/cloudflared-deployment-6d5f9f9666-85l5w   1/1     Running   0          21s\n   pod/cloudflared-deployment-6d5f9f9666-wb96x   1/1     Running   0          21s\n   pod/httpbin-deployment-bc6689c5d-b5ftk        1/1     Running   0          3m36s\n   pod/httpbin-deployment-bc6689c5d-cbd9m        1/1     Running   0          3m36s\n\nNAME                      TYPE           CLUSTER-IP       EXTERNAL-IP    PORT(S)        AGE\n   service/httpbin-service   LoadBalancer   34.118.225.147   34.75.201.60   80:31967/TCP   3m36s\n   service/kubernetes        ClusterIP      34.118.224.1     <none>         443/TCP        24h\n\nNAME                                     READY   UP-TO-DATE   AVAILABLE   AGE\n   deployment.apps/cloudflared-deployment   2/2     2            2           22s\n   deployment.apps/httpbin-deployment       2/2     2            2           3m37s\n\nNAME                                                DESIRED   CURRENT   READY   AGE\n   replicaset.apps/cloudflared-deployment-6d5f9f9666   2         2         2       22s\n   replicaset.apps/httpbin-deployment-bc6689c5d        2         2         2       3m37s\n   sh\nkubectl logs pod/cloudflared-deployment-6d5f9f9666-85l5w\nsh\n2025-06-11T22:00:47Z INF Starting tunnel tunnelID=64c359b6-e111-40ec-a3a9-199c2a656613\n2025-06-11T22:00:47Z INF Version 2025.6.0 (Checksum 72f233bb55199093961bf099ad62d491db58819df34b071ab231f622deff33ce)\n2025-06-11T22:00:47Z INF GOOS: linux, GOVersion: go1.24.2, GoArch: amd64\n2025-06-11T22:00:47Z INF Settings: map[loglevel:debug metrics:0.0.0.0:2000 no-autoupdate:true token:*****]\n2025-06-11T22:00:47Z INF Generated Connector ID: aff7c4a0-85a3-4ac9-8475-1e0aa1af8d94\n2025-06-11T22:00:47Z DBG Fetched protocol: quic\n2025-06-11T22:00:47Z INF Initial protocol quic\n...\nsh\ncloudflared tunnel --url http://localhost:8080\nplaintext\n  To apply the Apache License to your work, attach the following\n  boilerplate notice, with the fields enclosed by brackets \"{}\"\n  replaced with your own identifying information. (Don't include\n  the brackets!)  The text should be enclosed in the appropriate\n  comment syntax for the file format. We also recommend that a\n  file or class name and description of purpose be included on the\n  same \"printed page\" as the copyright notice for easier\n  identification within third-party archives.\nplaintext\n   http://www.apache.org/licenses/LICENSE-2.0\nplaintext\n* Redistributions of source code must retain the above copyright\nplaintext\n                             Apache License\n                       Version 2.0, January 2004\n                    http://www.apache.org/licenses/\nplaintext\n  To apply the Apache License to your work, attach the following\n  boilerplate notice, with the fields enclosed by brackets \"{}\"\n  replaced with your own identifying information. (Don't include\n  the brackets!)  The text should be enclosed in the appropriate\n  comment syntax for the file format. We also recommend that a\n  file or class name and description of purpose be included on the\n  same \"printed page\" as the copyright notice for easier\n  identification within third-party archives.\nplaintext\n   http://www.apache.org/licenses/LICENSE-2.0\nplaintext\n                             Apache License\n                       Version 2.0, January 2004\n                    http://www.apache.org/licenses/\nplaintext\n  To apply the Apache License to your work, attach the following\n  boilerplate notice, with the fields enclosed by brackets \"[]\"\n  replaced with your own identifying information. (Don't include\n  the brackets!)  The text should be enclosed in the appropriate\n  comment syntax for the file format. We also recommend that a\n  file or class name and description of purpose be included on the\n  same \"printed page\" as the copyright notice for easier\n  identification within third-party archives.\nplaintext\n   http://www.apache.org/licenses/LICENSE-2.0\nplaintext\n                             Apache License\n                       Version 2.0, January 2004\n                    http://www.apache.org/licenses/\nplaintext\n  To apply the Apache License to your work, attach the following\n  boilerplate notice, with the fields enclosed by brackets \"{}\"\n  replaced with your own identifying information. (Don't include\n  the brackets!)  The text should be enclosed in the appropriate\n  comment syntax for the file format. We also recommend that a\n  file or class name and description of purpose be included on the\n  same \"printed page\" as the copyright notice for easier\n  identification within third-party archives.\nplaintext\n   http://www.apache.org/licenses/LICENSE-2.0\nplaintext\nTERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n\"License\" shall mean the terms and conditions for use, reproduction,\n  and distribution as defined by Sections 1 through 9 of this document.\n\n\"Licensor\" shall mean the copyright owner or entity authorized by\n  the copyright owner that is granting the License.\n\n\"Legal Entity\" shall mean the union of the acting entity and all\n  other entities that control, are controlled by, or are under common\n  control with that entity. For the purposes of this definition,\n  \"control\" means (i) the power, direct or indirect, to cause the\n  direction or management of such entity, whether by contract or\n  otherwise, or (ii) ownership of fifty percent (50%) or more of the\n  outstanding shares, or (iii) beneficial ownership of such entity.\n\n\"You\" (or \"Your\") shall mean an individual or Legal Entity\n  exercising permissions granted by this License.\n\n\"Source\" form shall mean the preferred form for making modifications,\n  including but not limited to software source code, documentation\n  source, and configuration files.\n\n\"Object\" form shall mean any form resulting from mechanical\n  transformation or translation of a Source form, including but\n  not limited to compiled object code, generated documentation,\n  and conversions to other media types.\n\n\"Work\" shall mean the work of authorship, whether in Source or\n  Object form, made available under the License, as indicated by a\n  copyright notice that is included in or attached to the work\n  (an example is provided in the Appendix below).\n\n\"Derivative Works\" shall mean any work, whether in Source or Object\n  form, that is based on (or derived from) the Work and for which the\n  editorial revisions, annotations, elaborations, or other modifications\n  represent, as a whole, an original work of authorship. For the purposes\n  of this License, Derivative Works shall not include works that remain\n  separable from, or merely link (or bind by name) to the interfaces of,\n  the Work and Derivative Works thereof.\n\n\"Contribution\" shall mean any work of authorship, including\n  the original version of the Work and any modifications or additions\n  to that Work or Derivative Works thereof, that is intentionally\n  submitted to Licensor for inclusion in the Work by the copyright owner\n  or by an individual or Legal Entity authorized to submit on behalf of\n  the copyright owner. For the purposes of this definition, \"submitted\"\n  means any form of electronic, verbal, or written communication sent\n  to the Licensor or its representatives, including but not limited to\n  communication on electronic mailing lists, source code control systems,\n  and issue tracking systems that are managed by, or on behalf of, the\n  Licensor for the purpose of discussing and improving the Work, but\n  excluding communication that is conspicuously marked or otherwise\n  designated in writing by the copyright owner as \"Not a Contribution.\"\n\n\"Contributor\" shall mean Licensor and any individual or Legal Entity\n  on behalf of whom a Contribution has been received by Licensor and\n  subsequently incorporated within the Work.\n\n2. Grant of Copyright License. Subject to the terms and conditions of\n  this License, each Contributor hereby grants to You a perpetual,\n  worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n  copyright license to reproduce, prepare Derivative Works of,\n  publicly display, publicly perform, sublicense, and distribute the\n  Work and such Derivative Works in Source or Object form.\n\n3. Grant of Patent License. Subject to the terms and conditions of\n  this License, each Contributor hereby grants to You a perpetual,\n  worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n  (except as stated in this section) patent license to make, have made,\n  use, offer to sell, sell, import, and otherwise transfer the Work,\n  where such license applies only to those patent claims licensable\n  by such Contributor that are necessarily infringed by their\n  Contribution(s) alone or by combination of their Contribution(s)\n  with the Work to which such Contribution(s) was submitted. If You\n  institute patent litigation against any entity (including a\n  cross-claim or counterclaim in a lawsuit) alleging that the Work\n  or a Contribution incorporated within the Work constitutes direct\n  or contributory patent infringement, then any patent licenses\n  granted to You under this License for that Work shall terminate\n  as of the date such litigation is filed.\n\n4. Redistribution. You may reproduce and distribute copies of the\n  Work or Derivative Works thereof in any medium, with or without\n  modifications, and in Source or Object form, provided that You\n  meet the following conditions:\n\n(a) You must give any other recipients of the Work or\n      Derivative Works a copy of this License; and\n\n(b) You must cause any modified files to carry prominent notices\n      stating that You changed the files; and\n\n(c) You must retain, in the Source form of any Derivative Works\n      that You distribute, all copyright, patent, trademark, and\n      attribution notices from the Source form of the Work,\n      excluding those notices that do not pertain to any part of\n      the Derivative Works; and\n\n(d) If the Work includes a \"NOTICE\" text file as part of its\n      distribution, then any Derivative Works that You distribute must\n      include a readable copy of the attribution notices contained\n      within such NOTICE file, excluding those notices that do not\n      pertain to any part of the Derivative Works, in at least one\n      of the following places: within a NOTICE text file distributed\n      as part of the Derivative Works; within the Source form or\n      documentation, if provided along with the Derivative Works; or,\n      within a display generated by the Derivative Works, if and\n      wherever such third-party notices normally appear. The contents\n      of the NOTICE file are for informational purposes only and\n      do not modify the License. You may add Your own attribution\n      notices within Derivative Works that You distribute, alongside\n      or as an addendum to the NOTICE text from the Work, provided\n      that such additional attribution notices cannot be construed\n      as modifying the License.\n\nYou may add Your own copyright statement to Your modifications and\n  may provide additional or different license terms and conditions\n  for use, reproduction, or distribution of Your modifications, or\n  for any such Derivative Works as a whole, provided Your use,\n  reproduction, and distribution of the Work otherwise complies with\n  the conditions stated in this License.\n\n5. Submission of Contributions. Unless You explicitly state otherwise,\n  any Contribution intentionally submitted for inclusion in the Work\n  by You to the Licensor shall be under the terms and conditions of\n  this License, without any additional terms or conditions.\n  Notwithstanding the above, nothing herein shall supersede or modify\n  the terms of any separate license agreement you may have executed\n  with Licensor regarding such Contributions.\n\n6. Trademarks. This License does not grant permission to use the trade\n  names, trademarks, service marks, or product names of the Licensor,\n  except as required for reasonable and customary use in describing the\n  origin of the Work and reproducing the content of the NOTICE file.\n\n7. Disclaimer of Warranty. Unless required by applicable law or\n  agreed to in writing, Licensor provides the Work (and each\n  Contributor provides its Contributions) on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n  implied, including, without limitation, any warranties or conditions\n  of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n  PARTICULAR PURPOSE. You are solely responsible for determining the\n  appropriateness of using or redistributing the Work and assume any\n  risks associated with Your exercise of permissions under this License.\n\n8. Limitation of Liability. In no event and under no legal theory,\n  whether in tort (including negligence), contract, or otherwise,\n  unless required by applicable law (such as deliberate and grossly\n  negligent acts) or agreed to in writing, shall any Contributor be\n  liable to You for damages, including any direct, indirect, special,\n  incidental, or consequential damages of any character arising as a\n  result of this License or out of the use or inability to use the\n  Work (including but not limited to damages for loss of goodwill,\n  work stoppage, computer failure or malfunction, or any and all\n  other commercial damages or losses), even if such Contributor\n  has been advised of the possibility of such damages.\n\n9. Accepting Warranty or Additional Liability. While redistributing\n  the Work or Derivative Works thereof, You may choose to offer,\n  and charge a fee for, acceptance of support, warranty, indemnity,\n  or other liability obligations and/or rights consistent with this\n  License. However, in accepting such obligations, You may act only\n  on Your own behalf and on Your sole responsibility, not on behalf\n  of any other Contributor, and only if You agree to indemnify,\n  defend, and hold each Contributor harmless for any liability\n  incurred by, or claims asserted against, such Contributor by reason\n  of your accepting any such warranty or additional liability.\n\nEND OF TERMS AND CONDITIONS\n\nAPPENDIX: How to apply the Apache License to your work.\n\nTo apply the Apache License to your work, attach the following\n  boilerplate notice, with the fields enclosed by brackets \"[]\"\n  replaced with your own identifying information. (Don't include\n  the brackets!)  The text should be enclosed in the appropriate\n  comment syntax for the file format. We also recommend that a\n  file or class name and description of purpose be included on the\n  same \"printed page\" as the copyright notice for easier\n  identification within third-party archives.\n\nCopyright [yyyy] [name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\nplaintext\nAs an exception, if you use this Software to compile your source code and\nportions of this Software are embedded into the binary product as a result,\nyou may redistribute such product without providing attribution as would\notherwise be required by Sections 4(a), 4(b) and 4(d) of the License.\npowershell\n  cloudflared update\n  powershell\n  net start cloudflared\n  sh\n  brew upgrade cloudflared\n  sh\n  sudo launchctl stop com.cloudflare.cloudflared\n  sudo launchctl unload /Library/LaunchDaemons/com.cloudflare.cloudflared.plist\n  sudo launchctl load /Library/LaunchDaemons/com.cloudflare.cloudflared.plist\n  sudo launchctl start com.cloudflare.cloudflared\n  sh\n  sudo apt-get update && sudo apt-get install --only-upgrade cloudflared\n  sh\n  sudo systemctl restart cloudflared.service\n  sh\n  curl --location --output cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb && sudo dpkg -i cloudflared.deb\n  sh\n  sudo systemctl restart cloudflared.service\n  sh\n  sudo yum update cloudflared\n  sh\n  sudo systemctl restart cloudflared.service\n  sh\n  docker run --pull always cloudflare/cloudflared:latest tunnel --no-autoupdate run --token <TOKEN>\n  sh\n     docker run --pull always -v <PATH-TO-YOUR-LOCAL-CLOUDFLARED>:/home/nonroot/.cloudflared cloudflare/cloudflared:latest tunnel --no-autoupdate run <TUNNEL-ID>\n     sh\n  cloudflared update\n  powershell\nsc.exe create <unique-name> binPath='<path-to-exe>' --config '<path-to-config>' displayname=\"Unique Name\"\npowershell\nsc.exe start <unique-name>\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/cfd_tunnel\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"api-tunnel\",\n    \"config_src\": \"cloudflare\"\n  }'\nsh\n{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n    \"account_tag\": \"699d98642c564d2e855e9661899b7252\",\n    \"created_at\": \"2025-02-18T22:41:43.534395Z\",\n    \"deleted_at\": null,\n    \"name\": \"example-tunnel\",\n    \"connections\": [],\n    \"conns_active_at\": null,\n    \"conns_inactive_at\": \"2025-02-18T22:41:43.534395Z\",\n    \"tun_type\": \"cfd_tunnel\",\n    \"metadata\": {},\n    \"status\": \"inactive\",\n    \"remote_config\": true,\n    \"credentials_file\": {\n      \"AccountTag\": \"699d98642c564d2e855e9661899b7252\",\n      \"TunnelID\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n      \"TunnelName\": \"api-tunnel\",\n      \"TunnelSecret\": \"bTSquyUGwLQjYJn8cI8S1h6M6wUc2ajIeT7JotlxI7TqNqdKFhuQwX3O8irSnb==\"\n    },\n    \"token\": \"eyJhIjoiNWFiNGU5Z...\"\n  }\n}\nbash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/cfd_tunnel/$TUNNEL_ID/configurations\" \\\n     --request PUT \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"config\": {\n           \"ingress\": [\n               {\n                   \"hostname\": \"app.example.com\",\n                   \"service\": \"http://localhost:8001\",\n                   \"originRequest\": {}\n               },\n               {\n                   \"service\": \"http_status:404\"\n               }\n           ]\n       }\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"type\": \"CNAME\",\n       \"proxied\": true,\n       \"name\": \"app.example.com\",\n       \"content\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa.cfargotunnel.com\"\n     }'\n   bash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/teamnet/routes\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"network\": \"172.16.0.0/16\",\n    \"tunnel_id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n    \"comment\": \"Example private network route\"\n  }'\nsh\n     sudo cloudflared service install <TUNNEL_TOKEN>\n     txt\n     cloudflared.exe service install <TUNNEL_TOKEN>\n     sh\n     sudo cloudflared service install <TUNNEL_TOKEN>\n     sh\n     docker run cloudflare/cloudflared:latest tunnel --no-autoupdate run --token <TUNNEL_TOKEN>\n     bash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/cfd_tunnel/c1744f8b-faa1-48a4-9e5c-02ac921467fa\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nsh\n{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": \"c1744f8b-faa1-48a4-9e5c-02ac921467fa\",\n    \"account_tag\": \"699d98642c564d2e855e9661899b7252\",\n    \"created_at\": \"2025-02-18T22:41:43.534395Z\",\n    \"deleted_at\": null,\n    \"name\": \"example-tunnel\",\n    \"connections\": [\n      {\n        \"colo_name\": \"bos01\",\n        \"uuid\": \"2xz99mfm-a59e-4924-gyh9-z9vafaw6k0i2\",\n        \"id\": \"2xz99mfm-a59e-4924-gyh9-z9vafaw6k0i2\",\n        \"is_pending_reconnect\": false,\n        \"origin_ip\": \"10.1.0.137\",\n        \"opened_at\": \"2025-02-19T19:11:12.101642Z\",\n        \"client_id\": \"4xh4eb3f-cz0j-2aso-hu6i-36207018771a\",\n        \"client_version\": \"2025.2.0\"\n      },\n      {\n        \"colo_name\": \"phl01\",\n        \"uuid\": \"axe2socu-2fb5-3akx-b860-898zyes3cs9q\",\n        \"id\": \"axe2socu-2fb5-3akx-b860-898zyes3cs9q\",\n        \"is_pending_reconnect\": false,\n        \"origin_ip\": \"10.1.0.137\",\n        \"opened_at\": \"2025-02-19T19:11:12.006297Z\",\n        \"client_id\": \"4xh4eb3f-cz0j-2aso-hu6i-36207018771a\",\n        \"client_version\": \"2025.2.0\"\n      },\n      {\n        \"colo_name\": \"phl01\",\n        \"uuid\": \"9b5y0wm9-ca7f-ibq6-8ff4-sm53xekfyym1\",\n        \"id\": \"9b5y0wm9-ca7f-ibq6-8ff4-sm53xekfyym1\",\n        \"is_pending_reconnect\": false,\n        \"origin_ip\": \"10.1.0.137\",\n        \"opened_at\": \"2025-02-19T19:11:12.004721Z\",\n        \"client_id\": \"4xh4eb3f-cz0j-2aso-hu6i-36207018771a\",\n        \"client_version\": \"2025.2.0\"\n      },\n      {\n        \"colo_name\": \"bos01\",\n        \"uuid\": \"g6cdeiz1-80f5-3akx-b18b-3y0ggktoxwkd\",\n        \"id\": \"g6cdeiz1-80f5-3akx-b18b-3y0ggktoxwkd\",\n        \"is_pending_reconnect\": false,\n        \"origin_ip\": \"10.1.0.137\",\n        \"opened_at\": \"2025-02-19T19:11:12.110765Z\",\n        \"client_id\": \"4xh4eb3f-cz0j-2aso-hu6i-36207018771a\",\n        \"client_version\": \"2025.2.0\"\n      }\n    ],\n    \"conns_active_at\": \"2025-02-19T19:11:12.004721Z\",\n    \"conns_inactive_at\": null,\n    \"tun_type\": \"cfd_tunnel\",\n    \"metadata\": {},\n    \"status\": \"healthy\",\n    \"remote_config\": true\n  }\n}\nsh\ncloudflared tunnel --loglevel info --logfile cloudflared.log run <UUID>\nsh\n   cloudflared tunnel login\n   sh\n   cloudflared tail <UUID>\n   sh\n   cloudflared tail --output=json <UUID> | jq .\n   sh\ncloudflared tail --level debug <UUID>\nsh\n   cloudflared tail --connector-id <CONNECTOR ID> <UUID>\n   text\n2024-12-19T21:17:58Z INF Starting metrics server on 127.0.0.1:20241/metrics\nsh\n   cloudflared tunnel --metrics 127.0.0.1:60123 run my-tunnel\n   mermaid\ngraph LR\n\t\tsubgraph LB[\"Public load balancer <br> app.example.com \"]\n\t\t\tsubgraph P1[Pool 2]\n\t\t\t\tE1([\"**Endpoint:** &lt;UUID_1&gt;.cfargotunnel.com<br> **Host header**: server2.example.com\"])\n\t\t\tend\n\t\t\tsubgraph P2[Pool 1]\n\t\t\t\tE2([\"**Endpoint:** &lt;UUID_2&gt;.cfargotunnel.com<br> **Host header**: server1.example.com\"])\n\t\t\tend\n\t\tend\n\t\tR@{ shape: text, label: \"app.example.com\" }\n\t\tR--> LB\n    P1 -- Tunnel 1 --> cf1\n    P2 -- Tunnel 2 --> cf2\n\t\tsubgraph D2[Private network]\n\t\t\tsubgraph r1[Region eu-west-1]\n\t\t\tcf1@{ shape: processes, label: \"cloudflared <br> **Route:** server2.example.com\" }\n\t\t\tS1([\"Server 2<br> 10.0.0.1:80\"])\n\t\t\tcf1-->S1\n\t\t\tend\n\t\t\tsubgraph r2[Region us-east-1]\n\t\t\tcf2@{ shape: processes, label: \"cloudflared <br> **Route:** server1.example.com\" }\n\t\t\tS3([\"Server 1 <br> 10.0.0.2:80\"])\n\t\t\tcf2-->S3\n\t\t\tend\n\t\tend\n\nstyle r1 stroke-dasharray: 5 5\n\t\tstyle r2 stroke-dasharray: 5 5\nmermaid\ngraph LR\n\t\tsubgraph LB[\"Public load balancer <br> lb.example.com\"]\n\t\t\tsubgraph P1[Pool for App 1]\n\t\t\t\tE1([\"**Endpoint:** &lt;UUID_1&gt;.cfargotunnel.com<br> **Host header**: app1.example.com\"])\n\t\t\t\tE2([\"**Endpoint:** &lt;UUID_2&gt;.cfargotunnel.com<br> **Host header**: app1.example.com\"])\n\t\t\tend\n\t\t\tsubgraph P2[Pool for App 2]\n\t\t\t\tE3([\"**Endpoint:** &lt;UUID_1&gt;.cfargotunnel.com<br> **Host header**: app2.example.com\"])\n\t\t\t\tE4([\"**Endpoint:** &lt;UUID_2&gt;.cfargotunnel.com<br> **Host header**: app2.example.com\"])\n\t\t\tend\n\t\tend\n\t\tR@{ shape: text, label: \"app1.example.com <br> app2.example.com\" }\n\t\tR--> LB\n    E1 -- Tunnel 1 -->cf1\n\t\tE3 -- Tunnel 1 --> cf1\n\t\tE2 -- Tunnel 2 --> cf2\n\t\tE4 -- Tunnel 2 --> cf2\n\nsubgraph N[Private network]\n\t\t\tcf2[cloudflared <br> **Route:** app1.example.com <br> **Route:** app2.example.com]\n\t\t\tS3([\"App 1 <br> 10.0.0.1:80\"])\n\t\t\tcf2-->S3\n\t\t\tcf2-->S1\n\t\t\tcf1[cloudflared <br> **Route:** app1.example.com <br> **Route:** app2.example.com]\n\t\t\tS1([\"App 2 <br> 10.0.0.2:80\"])\n\t\t\tcf1-->S1\n\t\t\tcf1-->S3\n\t\tend\nsh\n~/grpc/examples/python/helloworld $ python3 greeter_server.py\nWARNING: All log messages before absl::InitializeLog() is called are written to STDERR\nI0000 00:00:1721770418.373806    3677 config.cc:230] gRPC experiments enabled: call_status_override_on_cancellation, event_engine_dns, event_engine_listener, http2_stats_fix, monitoring_experiment, pick_first_new, trace_record_callops, work_serializer_clears_time_cache\nServer started, listening on 50051\npython\ndef run():\n    # NOTE(gRPC Python Team): .close() is possible on a channel and should be\n    # used in circumstances in which the with statement does not fit the needs\n    # of the code.\n    print(\"Will try to greet world ...\")\n    with grpc.insecure_channel(\"172.31.0.133:50051\") as channel:\n        stub = helloworld_pb2_grpc.GreeterStub(channel)\n        response = stub.SayHello(helloworld_pb2.HelloRequest(name=\"you\"))\n    print(\"Greeter client received: \" + response.message)\nsh\n~/grpc/examples/python/helloworld $ python3 greeter_client.py\nWill try to greet world ...\nWARNING: All log messages before absl::InitializeLog() is called are written to STDERR\nI0000 00:00:1721771484.489711 4414247 config.cc:230] gRPC experiments enabled: call_status_override_on_cancellation, event_engine_dns, event_engine_listener, http2_stats_fix, monitoring_experiment, pick_first_new, trace_record_callops, work_serializer_clears_time_cache\nGreeter client received: Hello, you!\nsh\n   cloudflared access tcp --hostname smb.example.com --url localhost:8445\n   sh\n  cloudflared tunnel route dns <UUID or NAME> www.app.com\n  sh\ncloudflared tunnel run\nsh\n2021-06-04T06:21:16Z INF Starting tunnel tunnelID=928655cc-7f95-43f2-8539-2aba6cf3592d\nTunnel credentials file '/root/.cloudflared/928655cc-7f95-43f2-8539-2aba6cf3592d.json' doesn't exist or is not a file\ntxt\ningress:\n  - hostname: test.example.com\n    service: https://localhost:443\n    originRequest:\n      originServerName: test.example.com\nsh\nsudo vi 98-core-rmem-max.conf\ntxt\nnet.core.rmem_max=2500000\nsh\nsudo sysctl -a | grep net.core.rmem_max\nsh\nnet.core.rmem_max = 2500000\nsh\n  dig A region1.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.167\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.67\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.57\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.107\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.27\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.7\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.227\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.47\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.37\n  region1.v2.argotunnel.com. 86400 IN  A  198.41.192.77\n  ...\n  sh\n  dig AAAA region1.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::1\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::2\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::3\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::4\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::5\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::6\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::7\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::8\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::9\n  region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a0::10\n  ...\n  sh\n  dig A region2.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.13\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.193\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.33\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.233\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.53\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.63\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.113\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.73\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.43\n  region2.v2.argotunnel.com. 86400 IN  A  198.41.200.23\n  ...\n  sh\n  dig AAAA region2.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::1\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::2\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::3\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::4\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::5\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::6\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::7\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::8\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::9\n  region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a8::10\n  ...\n  sh\n  dig A us-region1.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.1\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.2\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.3\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.4\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.5\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.6\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.7\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.8\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.9\n  us-region1.v2.argotunnel.com. 86400 IN  A  198.41.218.10\n  ...\n  sh\n  dig AAAA us-region1.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::1\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::2\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::3\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::4\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::5\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::6\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::7\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::8\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::9\n  us-region1.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a1::10\n  ...\n  sh\n  dig A us-region2.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.1\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.2\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.3\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.4\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.5\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.6\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.7\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.8\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.9\n  us-region2.v2.argotunnel.com. 86400 IN  A  198.41.219.10\n  ...\n  sh\n  dig AAAA us-region2.v2.argotunnel.com\n  sh\n  ;; ANSWER SECTION:\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::1\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::2\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::3\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::4\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::5\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::6\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::7\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::8\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::9\n  us-region2.v2.argotunnel.com. 86400 IN  AAAA  2606:4700:a9::10\n  ...\n  sh\ndig A region1.v2.argotunnel.com @1.1.1.1\nsh\nnc -uz -w 3 198.41.192.167 7844\nsh\nConnection to 198.41.192.167 port 7844 [udp/*] succeeded!\nsh\nnc -z -w 3 198.41.192.167 7844\nsh\nConnection to 198.41.192.167 port 7844 [tcp/*] succeeded!\nsh\n   sudo setcap cap_net_raw+ep /usr/bin/traceroute && sudo setcap cap_net_raw+ep /usr/bin/traceroute\n   sh\n   cloudflared tunnel diag\n   sh\n   cloudflared tunnel diag --metrics 127.0.0.1:20241\n   sh\n   docker run -d -p 20241:<metrics_port> docker.io/cloudflare/cloudflared tunnel ...\n   sh\n   curl localhost:20241/diag/tunnel\n   json\n   {\n     \"tunnelID\": \"ef96b330-a7f5-4bce-a00e-827ce5be077f\",\n     \"connectorID\": \"d236670a-9f74-422f-adf1-030f5c5f0523\",\n     \"connections\": [\n       { \"isConnected\": true, \"protocol\": 1, \"edgeAddress\": \"198.41.192.167\"},\n       {\"isConnected\": true, \"protocol\": 1, \"edgeAddress\": \"198.41.200.113\", \"index\": 1},\n       {\"isConnected\": true, \"protocol\": 1, \"edgeAddress\": \"198.41.192.47\", \"index\": 2},\n       {\"isConnected\": true, \"protocol\": 1, \"edgeAddress\": \"198.41.200.73\", \"index\": 3}\n     ],\n     \"icmp_sources\": [\"192.168.1.243\", \"fe80::c59:bd4a:e815:ed6\"]\n   }\n   sh\n   cloudflared tunnel diag --diag-container-id=<containerID>\n   sh\n   cloudflared tunnel diag --diag-container-id=<containerName>\n   sh\n   kubectl port-forward <pod> <diagnostic_port>:<metrics_port>\n   sh\n   kubectl port-forward cloudflared-6d4897585b-r8kfz 20244:12345\n   sh\n   cloudflared tunnel diag --diag-pod-id=<podID>\n   sh\n   cloudflared tunnel diag --diag-pod-id=<podID> --diag-container-id=<containerName>\n   sh\n  telnet test.example.com 443\n  powershell\n  PS C:\\Users\\JohnDoe> Test-NetConnection test.example.com -port 443\n  bash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/sites/$SITE_ID/netflow_config\" \\\n  --request PUT \\\n  --json '{\n    \"collector_ip\": \"162.159.65.1\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/sites/$SITE_ID/netflow_config\" \\\n  --request PUT \\\n  --json '{\n    \"collector_ip\": \"162.159.65.1\",\n    \"collector_port\": 2055,\n    \"sampling_rate\": 100,\n    \"active_timeout\": 60,\n    \"inactive_timeout\": 30\n  }'\nbash\nPAYLOAD='{ \"query\":\n  \"query GetTunnelHealthCheckResults($accountTag: string, $datetimeStart: string, $datetimeEnd: string) {\n      viewer {\n        accounts(filter: {accountTag: $accountTag}) {\n          magicTransitTunnelTrafficAdaptiveGroups(\n            limit: 100,\n            filter: {\n              datetime_geq: $datetimeStart,\n              datetime_lt:  $datetimeEnd,\n              direction: $direction\n            }\n          ) {\n            avg {\n              bitRateFiveMinutes\n            }\n            dimensions {\n              tunnelName\n              datetimeFiveMinutes\n            }\n          }\n        }\n      }\n  }\",\n    \"variables\": {\n      \"accountTag\": \"<CLOUDFLARE_ACCOUNT_TAG>\",\n      \"direction\": \"ingress\",\n      \"datetimeStart\": \"2022-05-04T11:00:00.000Z\",\n      \"datetimeEnd\": \"2022-05-04T12:00:00.000Z\"\n    }\n  }\n}'",
  "code_samples": [
    {
      "code": "### JavaScript (Node.js) example",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Adobe Acrobat Sign · Cloudflare One docs\ndescription: This guide covers how to configure Adobe Acrobat Sign as a SAML\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/adobe-sign-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/adobe-sign-saas/index.md\n---\n\nThis guide covers how to configure [Adobe Acrobat Sign](https://helpx.adobe.com/sign/using/enable-saml-single-sign-on.html) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Adobe Acrobat Sign account\n* A [claimed domain](https://helpx.adobe.com/sign/using/claim-domain-names.html) in Adobe Acrobat Sign\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application** > **SaaS**.\n3. For **Application**, enter `Adobe Sign` and select the corresponding textbox that appears.\n4. For the authentication protocol, select **SAML**.\n5. Select **Add application**.\n6. Copy the **Access Entity ID or Issuer**, **Public key**, and **SSO endpoint**.\n7. Keep this window open without selecting **Select configuration**. You will finish this configuration in step [3. Finish adding a SaaS application to Cloudflare One](#3-finish-adding-a-saas-application-to-cloudflare-one).\n\n## 2. Add a SAML SSO provider to Adobe Sign\n\n1. In Adobe Acrobat Sign, select your profile picture > your name > **Account Settings** > **SAML Settings**.\n\n2. Turn **SAML Allowed** on.\n\n3. Enter a hostname (for example, `yourcompanyname`). Users can use this URL or `https://secure.adobesign.com/public/login` to sign in via SSO.\n\n4. (Optional) For **Single Sign On Login Message**, enter a custom message (for example, `Log in via SSO`). The default message is **Sign in using your corporate credentials**.\n\n5. Fill in the following fields:\n\n   * **Entity ID/Issuer URL**: Access Entity ID or Issuer from application configuration in Cloudflare One.\n   * **Login URL/SSO Endpoint**: SSO endpoint from application configuration in Cloudflare One.\n   * **IdP Certificate**: Public key from application configuration in Cloudflare One. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n6. Copy the **Entity ID/SAML Audience** and **Assertion Consumer URL**.\n\n7. Select **Save**.\n\n## 3. Finish adding a SaaS application to Cloudflare One\n\n1. In your open Cloudflare One window, fill in the following fields:\n\n   * **Entity ID**: Entity ID/SAML Audience from Adobe Acrobat Sign SAML SSO configuration.\n   * **Assertion Consumer Service URL**: Assertion Consumer URL from Adobe Acrobat Sign SAML SSO configuration.\n   * **Name ID format**: *Email*\n\n2. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n3. Save the application.\n\n## 4. Test the integration and finalize configuration\n\n1. Open an incognito browser window and go to your Adobe Sign hostname URL or `https://secure.adobesign.com/public/login`. Select the option to sign in via SSO (**Sign in using your corporate credentials** if you have not configured a custom message). You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\nNote\n\nIf you receive an error while testing SSO integration, go to your profile picture > your name > **Account Settings** > **SAML Errors** for more information.\n\n1. Once this is successful, you can make sign in via SSO mandatory. Select your profile picture > your name > **Account Settings** > **SAML Settings**, and then turn on **SAML Mandatory**. Keeping **Allow Acrobat Sign Account Administrators to log in using their Acrobat Sign Credentials** turned on will allow administrators to log in even if your account experiences SSO issues.\n\n</page>\n\n<page>\n---\ntitle: Area 1 · Cloudflare One docs\ndescription: Cloudflare Area 1 is an email security platform that protects your\n  organization's inbox from phishing, spam, and other malicious messages. This\n  guide covers how to configure Area 1 as a SAML application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/area-1/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/area-1/index.md\n---\n\nAccess to Area 1\n\nBeginning October 1, 2025, access and support for Email Security (formerly Area 1) will only be available through the Cloudflare dashboard. Your Email Security protection will not change, but you will no longer be able to access the Area 1 dashboard or send support requests to `@area1security.com` email addresses. For help accessing the Cloudflare dashboard, reach out to <successteam@cloudflare.com>.\n\n[Cloudflare Area 1](https://www.cloudflare.com/products/zero-trust/email-security/) is an email security platform that protects your organization's inbox from phishing, spam, and other malicious messages. This guide covers how to configure Area 1 as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to your Area 1 account\n* Your user's email in Area 1 matches their email in Cloudflare One\n\n## 1. Add Area 1 to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application**.\n\n3. Select **SaaS**.\n\n4. In the **Application** field, enter `Area 1` and select **Area 1**. (Area 1 is not currently listed in the default drop-down menu.)\n\n5. Enter the following values for your application configuration:\n\n   | | |\n   | - | - |\n   | **Entity ID** | `https://horizon.area1security.com` |\n   | **Assertion Consumer Service URL** | `https://horizon.area1security.com/api/users/saml` |\n   | **Name ID Format** | *Email* |\n\n6. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n7. Save the application.\n\n## 2. Configure SSO for Area 1\n\nFinally, you will need to configure Area 1 to allow users to log in through Cloudflare Access.\n\n1. In your [Area 1 portal](https://horizon.area1security.com/), go to **Settings** > **SSO**.\n\n2. Turn on **Single Sign On**.\n\n3. (Optional) To require users to sign in through Access, set **SSO Enforcement** to *All*. When SSO is enforced, users will no longer be able to sign in with their Area 1 credentials.\n\n4. In **SAML SSO Domain**, enter `<your-team-name>.cloudflareaccess.com`.\n\n5. Get your Metadata XML file:\n\n   1. In Cloudflare One, copy the **SSO Endpoint** for your application.\n\n      ![Copy SSO settings for a SaaS application from Cloudflare One](https://developers.cloudflare.com/_astro/saas-sso-endpoint.ubdoNRaM_1EMtvX.webp)\n\n   2. In a new browser tab, paste the **SSO Endpoint** and append `/saml-metadata` to the end of the URL. For example, `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/saml/<app-id>/saml-metadata`.\n\n   3. Copy the resulting metadata.\n\n6. Return to the Area 1 portal and paste the metadata into **Metadata XML**.\n\n   ![Configure SSO in the Area 1 portal](https://developers.cloudflare.com/_astro/area1-sso-config.DWq80iDZ_ZeOMPf.webp)\n\n7. Select **Update Settings**.\n\nIf you added the application to your App Launcher, you can test the integration by going to `<your-team-name>.cloudflareaccess.com`.\n\n</page>\n\n<page>\n---\ntitle: Asana · Cloudflare One docs\ndescription: This guide covers how to configure Asana as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/asana-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/asana-saas/index.md\n---\n\nThis guide covers how to configure [Asana](https://help.asana.com/hc/en-us/articles/14075208738587-Authentication-and-access-management-options-for-paid-plans#gl-saml) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Super admin access to an Asana Enterprise, Enterprise+, or Legacy Enterprise account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, select *Asana*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://app.asana.com/`\n   * **Assertion Consumer Service URL**: `https://app.asana.com/-/saml/consume`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint** and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Add a SAML SSO provider to Asana\n\n1. In Asana, select your profile picture > **Admin console** > **Security** > **SAML authentication**.\n\n2. Under **SAML options**, select *Optional*.\n\n3. Fill in the following fields:\n\n   * Sign-in page URL: SSO endpoint from application configuration in Cloudflare One.\n   * X.509 certificate: Public key from application configuration in Cloudflare One. Wrap the public key in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n4. Select **Save changes**.\n\n## 3. Test the integration and require SSO\n\n1. Open an incognito browser window and go to your Asana URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n2. After this is successful, you may want to require users to log in via SSO. In Asana, select your profile picture > **Admin console** > **Security** > **SAML authentication**. Under **SAML options**, select **Required for all members, except guest accounts**.\n\n</page>\n\n<page>\n---\ntitle: AWS · Cloudflare One docs\ndescription: This guide covers how to configure AWS as a SAML application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/aws-sso-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/aws-sso-saas/index.md\n---\n\nThis guide covers how to configure [AWS](https://docs.aws.amazon.com/singlesignon/latest/userguide/manage-your-identity-source-idp.html) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to an AWS account\n\n## 1. Get AWS URLs\n\n1. In the AWS admin panel, search for `IAM Identity Center`.\n2. Go to **IAM Identity Center** > **Settings**.\n3. In the **Identity source** tab, select the **Actions** dropdown and select *Change identity source*.\n4. Change the identity source to **External identity provider**.\n5. Copy the values shown in **Service provider metadata**. You will need these values when configuring the SaaS application in Cloudflare One.\n\nNext, we will obtain **Identity provider metadata** from Cloudflare One.\n\n## 2. Add a SaaS application to Cloudflare One\n\n1. In a separate tab or window, open [Cloudflare One](https://one.dash.cloudflare.com) and go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, select *Amazon AWS*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: IAM Identity Center issuer URL\n   * **Assertion Consumer Service URL**: IAM Identity Center Assertion Consumer Service (ACS) URL\n   * **Name ID format**: *Email*\n\n7. (Optional) Additional SAML attribute statements can be passed from your IdP to AWS SSO. To learn more about AWS Attribute mapping, refer to [Attribute mappings - AWS Single Sign-On](https://docs.aws.amazon.com/singlesignon/latest/userguide/attributemappingsconcept.html#supportedidpattributes).\n\n8. AWS supports uploading a metadata XML file. To download your SAML metadata from Access:\n\n   1. Copy the **SAML Metadata endpoint**.\n   2. In a separate browser window, go to the SAML Metadata endpoint (`https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/saml/xxx/saml-metadata`).\n   3. Save the page as `access_saml_metadata.xml`.\n\n9. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n10. Save the application.\n\n## 3. Complete AWS configuration\n\n1. Return to the **IAM Identity Center** > **Settings** > **Change identity source** tab.\n\n2. Under **IdP SAML metadata**, upload your `access_saml_metadata.xml` file.\n\n3. Select **Next** to review settings, type **ACCEPT** and select **Change identity source** to confirm changes.\n\n4. Confirm that **Provisioning** is set to *Manual*.\n\nImportant\n\nAccess for SaaS does not currently support [SCIM provisioning](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/scim/). Make sure that:\n\n1. Users are created in both your identity provider and AWS.\n2. Users have matching usernames in your identity provider and AWS.\n3. Usernames are email addresses. This is the only format AWS supports with third-party SSO providers.\n\n## 4. Test the integration\n\nTo test the connection, go to your **AWS access portal URL**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n</page>\n\n<page>\n---\ntitle: Atlassian Cloud · Cloudflare One docs\ndescription: This guide covers how to configure Atlassian Cloud as a SAML\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/atlassian-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/atlassian-saas/index.md\n---\n\nThis guide covers how to configure [Atlassian Cloud](https://support.atlassian.com/security-and-access-policies/docs/configure-saml-single-sign-on-with-an-identity-provider/) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to an Atlassian Cloud account\n* Atlassian Guard Standard subscription\n* A [domain](https://support.atlassian.com/user-management/docs/verify-a-domain-to-manage-accounts/) verified in Atlassian Cloud\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application** > **SaaS**.\n3. For **Application**, select *Atlassian*.\n4. For the authentication protocol, select **SAML**.\n5. Select **Add application**.\n6. Copy the **Access Entity ID or Issuer**, **Public key**, and **SSO endpoint**.\n7. Keep this window open. You will finish this configuration in step [4. Finish adding a SaaS application to Cloudflare One](#4-finish-adding-a-saas-application-to-cloudflare-one).\n\n## 2. Create a x.509 certificate\n\n1. Paste the **Public key** in a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n## 3. Configure an identity provider and SAML SSO in Atlassian Cloud\n\n1. In Atlassian Cloud, go to **Security** > **Identity providers**.\n\n2. Select **Other provider** > **Choose**.\n\n3. For **Directory name**, enter your desired name. For example, you could enter `Cloudflare Access`.\n\n4. Select **Add** > **Set up SAML single sign-on** > **Next**.\n\n   Note\n\n   This screen will advise you to create an authentication policy before proceeding. You will do this in step [5. Create an application policy to test integration](#5-create-an-authentication-policy-to-test-integration).\n\n5. Fill in the following fields:\n\n   * **Identity provider Entity ID**: Access Entity ID or Issuer from application configuration in Cloudflare One.\n   * **Identity provider SSO URL**: SSO endpoint from application configuration in Cloudflare One.\n   * **Public x509 certificate**: Paste the entire x.509 certificate from step [2. Create a x.509 certificate](#2-create-a-x509-certificate).\n\n6. Select **Next**.\n\n7. Copy the **Service provider entity URL** and **Service provider assertion consumer service URL**.\n\n8. Select **Next**.\n\n9. Under **Link domain**, select the domain you want to use with SAML SSO.\n\n10. Select **Next** > **Stop and save SAML**.\n\n## 4. Finish adding a SaaS application to Cloudflare One\n\n1. In your open Cloudflare One window, fill in the following fields:\n\n   * **Entity ID**: Service provider entity URL from Atlassian Cloud SAML SSO set-up.\n   * **Assertion Consumer Service URL**: Service provider assertion consumer service URL from Atlassian Cloud SAML SSO set-up.\n   * **Name ID format**: *Email*\n\n2. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n3. Save the application.\n\n## 5. Create an authentication policy to test integration\n\nTo enable SSO for users in Atlassian Cloud, create an [Atlassian authentication policy](https://support.atlassian.com/security-and-access-policies/docs/configure-authentication-policies-for-your-organization/):\n\n1. In Atlassian Cloud, go to **Security** > **Authentication policies**.\n2. Select **Add policy**.\n3. Under **Directory**, select the identity provider you used to configure SAML SSO.\n4. For **Policy name**, enter your desired name.\n5. Select **Add**.\n6. In **Settings**, turn on **Enforce single sign-on**.\n7. In **Members**, select **Add members**.\n8. In **Individual Users**, select your desired test user(s) in the dropdown, and select **Add members**.\n9. In **Settings**, select **Update** > **Update**.\n\n## 6. Test the integration\n\nOpen an incognito browser window and log in with the credentials of the test user you added to the test authentication policy. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider. When this is successful, turn on **Enforce single sign-on** in your desired authentication policy, or add the desired users to the application policy created in step [5. Create an Application Policy to test Integration](#5-create-an-authentication-policy-to-test-integration).\n\n</page>\n\n<page>\n---\ntitle: Braintree · Cloudflare One docs\ndescription: This guide covers how to configure Braintree as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/braintree-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/braintree-saas/index.md\n---\n\nThis guide covers how to configure [Braintree](https://developer.paypal.com/braintree/articles/guides/single-sign-on-sso) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Braintree production or sandbox account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `Braintree` and select the textbox that appears below.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields with temporary values:\n\n   * **Entity ID**: `placeholder`\n   * **Assertion Consumer Service URL**: `https://www.placeholder.com`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint** and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Enable SSO Configuration in Braintree\n\n1. In Braintree, create a [support ticket](https://developer.paypal.com/braintree/help).\n\n2. In **Search Issues**, enter `Login and password issues` and select the corresponding value.\n\n3. In **Issue Details**, fill in the following:\n\n   * **Merchant ID**: Your Braintree Merchant ID. This is the 16-digit value that follows `/merchants/`in your Braintree Control Panel URL.\n   * **Email domain(s) to be used in user IDs**: The email domain(s) that should be allowed to sign in to your account via SSO.\n   * **Single Sign-on HTTP POST Binding URL**: SSO endpoint from application configuration in Cloudflare One\n   * **Certificate for validation**: Public key from application configuration in Cloudflare One.\n\n4. Select whether you are using a **Production** or **Sandbox** account.\n\n5. Fill out the **Your contact information** fields and select **Submit a help request**.\n\n6. When you receive an email stating SSO has been successfully configured for your account, you can proceed to the next step.\n\n## 3. Finish adding a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Braintree** > **Edit** > **Overview**.\n3. Replace the temporary values for **Entity ID** and **Assertion Consumer Service URL** with the link provided in the successful SSO configuration email from Braintree support. You will use the same link for both values.\n4. Select **Save Application**.\n\n## 4. Test the integration and add SSO users\n\n1. In your Braintree Control Panel, select the **settings** icon > **Team**.\n2. Select your desired test user.\n3. Under **Single Sign-On**, select **Enable**.\n4. Open an incognito browser window. In the address bar, paste `https://id.sandbox.braintreegateway.com` for a sandbox account or `https://id.braintreegateway.com` for a production account.\n5. In **Your corporate email address** field, type your test user's email. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n6. Upon successful sign-in, you can enable SSO for other users using steps 4.1 - 4.3.\n\n</page>\n\n<page>\n---\ntitle: Coupa · Cloudflare One docs\ndescription: This guide covers how to configure Coupa as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/coupa-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/coupa-saas/index.md\n---\n\nThis guide covers how to configure [Coupa](https://compass.coupa.com/en-us/products/product-documentation/integration-technical-documentation/coupa-core-user-authentication/coupa-saml-sso-setup) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Coupa Stage or Production account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `Coupa` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `sso-stg1.coupahost.com` for a stage account or `sso-prd1.coupahost.com` for a production account\n   * **Assertion Consumer Service URL**: `https://sso-stg1.coupahost.com/sp/ACS.saml2` for a stage account or `https://sso-prd1.coupahost.com/sp/ACS.saml2` for a production account\n   * **Name ID format**: *Email*\n\n7. Copy the **Access Entity ID or Issuer** and **SAML Metadata Endpoint**.\n\n8. In **Default relay state**, enter `https://<your-subdomain>.coupahost.com/sessions/saml_post`.\n\n9. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n10. Save the application.\n\n## 2. Download the metadata file\n\n1. Paste the SAML metadata endpoint from application configuration in Cloudflare One in a web browser.\n2. Follow your browser-specific steps to download the URL's contents as an `.xml` file.\n\n## 3. Add a SAML SSO provider in Coupa\n\n1. In Coupa, go to **Setup** > **Company Setup** > **Security Controls**.\n2. Under **Sign in using SAML**, turn on **Sign in using SAML**.\n3. In **Upload IdP metadata**, select **Choose File**, and upload the `.xml` file you downloaded in step [2. Download the metadata file](#2-download-the-metadata-file).\n4. Turn on **Advanced Options**.\n5. For **Sign in page URL** and **Timeout URL**, enter `https://sso-stg1.coupahost.com/sp/startSSO.ping?PartnerIdpId=<access-entity-id-or-issuer>&TARGET=https://<your-subdomain>.coupahost.com/sessions/saml_post` using the Access Entity ID or Issuer from application configuration in Cloudflare One.\n6. Select **Save**.\n\n## 3. Create a test user and test the integration\n\n1. In Coupa, go to **Setup** > **Company Setup** > **Users**.\n2. Select **Create**, then enter the user details for your test user. For **Login** and **Single Sign-On ID**, enter the user's email address.\n3. Select **Save**.\n4. Open an incognito browser window and go to your Coupa URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n5. Once the login is successful, you can configure other users for SSO by adding their email to the **Single Sign-On ID** field in **Setup** > **Company Setup** > **Users** > user's name.\n\nNote\n\nYou can use the following URL to bypass SSO and login via a username and password: `https://<your-subdomain>.coupahost.com/sessions/support_login`.\n\n</page>\n\n<page>\n---\ntitle: Digicert · Cloudflare One docs\ndescription: This guide covers how to configure Digicert as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/digicert-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/digicert-saas/index.md\n---\n\nThis guide covers how to configure [Digicert](https://docs.digicert.com/en/certcentral/manage-account/saml-admin-single-sign-on-guide/configure-saml-single-sign-on.html) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Digicert account\n* [SAML](https://docs.digicert.com/en/certcentral/manage-account/saml-admin-single-sign-on-guide/saml-single-sign-on-prerequisites.html) enabled in your Digicert account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `Digicert` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://www.digicert.com/account/sso/metadata`\n   * **Assertion Consumer Service URL**: `https://www.digicert.com/account/sso/`\n   * **Name ID format**: *Email*\n\n7. Copy the **SAML Metadata endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Add a SAML SSO provider in Digicert\n\n1. In Digicert, select **Settings** > **Single Sign-On** > **Set up SAML**.\n2. Under **How will you send data from your IDP?**, turn on **Use a dynamic URL**.\n3. Under **Use a dynamic URL**, paste the SAML Metadata endpoint from application configuration in Cloudflare One.\n4. Under **How will you identify a user?**, turn on **NameID**.\n5. Under **Federation Name**, enter a name (for example, `Cloudflare Access`). Your users will select this name when signing in.\n6. Select **Save SAML Settings**.\n\n## 3. Test and Enable SSO in Digicert\n\n1. In Digicert, select **Settings** > **Single Sign-On**.\n2. Copy the **SP Initiated Custom SSO URL**.\n3. Paste the URL into an incognito browser window and sign in. Upon successful sign in, SAML SSO is fully enabled.\n4. (Optional) By default, users can choose to sign in directly or with SSO. To require SSO sign in, go to **Account** > **Users**. Turn on **Only allow this user to log in through SAML/OIDC SSO** in the user details of the desired user.\n\nNote\n\nUsers can sign in using service provider initiated SSO by using the **SP Initiated Custom SSO URL**. Alternatively, users can go to `www.digicert.com/account`, select **Sign in with SSO**, and enter the name of the identity provider configured in step [2. Add a SAML SSO provider in Digicert](#2-add-a-saml-sso-provider-in-digicert).\n\n</page>\n\n<page>\n---\ntitle: DocuSign · Cloudflare One docs\ndescription: This guide covers how to configure Docusign as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/docusign-access/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/docusign-access/index.md\n---\n\nThis guide covers how to configure [Docusign](https://support.docusign.com/s/document-item?bundleId=rrf1583359212854\\&topicId=ozd1583359139126.html) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Docusign account that has Single Sign-On available\n* A [domain](https://support.docusign.com/s/document-item?bundleId=rrf1583359212854\\&topicId=gso1583359141256.html) verified in Docusign\n\n## 1. Create the Access for SaaS application\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an Application**.\n\n3. Select **SaaS**.\n\n4. Use the following configuration:\n\n   * Set the **Application** to *DocuSign*.\n   * Put placeholder values in **EntityID** and **Assertion Consumer Service URL** (for example, `https://example.com`). We'll come back and update these.\n   * Set **Name ID Format** to: *Unique ID*.\n\n5. DocuSign requires SAML attributes to do Just In Time user provisioning. Ensure you are collecting SAML attributes from your IdP:\n\n   * Group\n   * username\n   * department\n   * firstName\n   * lastName\n   * phone\n\n6. These IdP SAML values can then be mapped to the following DocuSign SAML attributes:\n\n   * Email\n   * Surname\n   * Givenname\n\n7. Set an Access policy (for example, create a policy based on *Emails ending in @example.com*).\n\n8. Copy and save the **SSO Endpoint**, **Entity ID** and **Public Key**.\n\n9. Transform the **Public Key** into a fingerprint:\n\n   1. Copy the **Public Key** Value.\n\n   2. Paste the **Public Key** into VIM or another code editor.\n\n   3. Wrap the value in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n   4. Set the file extension to `.crt` and save.\n\n## 2. Configure your DocuSign SSO instance\n\n1. Ensure you have a domain claimed in DocuSign.\n\n2. From the DocuSign Admin dashboard, select **Identity Providers**.\n\n3. On the Identity Providers page, select **ADD IDENTITY PROVIDER**. Use the following mappings from the saved Access Application values:\n\n   * **Name**: Pick your desired name.\n   * **Identity Provider Issuer**: Entity ID.\n   * **Identity Provider Login URL**: Assertion Consumer Service URL.\n\n4. Save the Identity Provider.\n\n5. Upload your certificate to the *DocuSign Identity Provider* menu.\n\n6. Configure your SAML Attribute mappings. The Attribute Names should match the values in **IdP Value** in your Access application.\n\n7. Go back to the Identity Provider's screen and select **Actions** > **Endpoints**. Copy and save the following:\n\n   * Service Provider Issuer URL.\n   * Service Provider Assertion Consumer Service URL.\n\n## 3. Finalize your Cloudflare configuration\n\n1. Go back to your DocuSign application under **Access controls** > **Applications**.\n\n2. Select **Edit**.\n\n3. Use the following mappings:\n\n   * EntityID->Service Provider Issuer URL.\n   * Assertion Consumer Service URL -> Service Provider Assertion Consumer Service URL.\n\n4. Save the application.\n\nWhen ready, enable the SSO for your DocuSign account and you will be able to login to DocuSign via Cloudflare SSO and your Identity Provider.\n\n</page>\n\n<page>\n---\ntitle: Dropbox · Cloudflare One docs\ndescription: This guide covers how to configure Dropbox as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/dropbox-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/dropbox-saas/index.md\n---\n\nThis guide covers how to configure [Dropbox](https://help.dropbox.com/security/sso-admin) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Dropbox Advanced, Business Plus, or Enterprise account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, select `Dropbox`.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `Dropbox`\n   * **Assertion Consumer Service URL**: `https://www.dropbox.com/saml_login`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint** and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Create a certificate file\n\n1. Paste the **Public key** in a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n3. Set the file extension as `.pem` and save.\n\n## 3. Add a SAML SSO provider to Dropbox\n\n1. In Dropbox, go to your profile picture > **Settings** > **Admin Console** > **Security** > **Single sign-on**.\n2. For **Single sign-on**, select *Optional*.\n3. Select **Add Identity provider sign-in URL**.\n4. Paste the SSO endpoint from application configuration in Cloudflare One and select **Done**.\n5. Select **Add X.509 certificate** and upload the `.pem` file from step [2. Create a certificate file](#2-create-a-certificate-file).\n6. Copy **SSO sign-in URL**. This is your custom Dropbox SSO URL.\n7. Select **Save**.\n\n## 3. Test the integration and require SSO\n\n1. Open an incognito browser window and go to your custom Dropbox SSO URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n2. After this is successful, you may want to require users to log in via SSO. Go to your profile picture > **Settings** > **Admin Console** > **Security** > **Single sign-on**. For **Single sign-on**, select *Required*. Dropbox will send an email to your users notifying them of the change.\n\n</page>\n\n<page>\n---\ntitle: Generic OIDC application · Cloudflare One docs\ndescription: This page provides generic instructions for setting up a SaaS\n  application in Cloudflare Access using the OpenID Connect (OIDC)\n  authentication protocol.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/generic-oidc-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/generic-oidc-saas/index.md\n---\n\nThis page provides generic instructions for setting up a SaaS application in Cloudflare Access using the OpenID Connect (OIDC) authentication protocol.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to the account of the SaaS application\n\n## 1. Get SaaS application URL\n\nIn your SaaS application account, obtain the **Redirect URL** (also known as the callback URL). This is the SaaS endpoint where users are redirected to after they authenticate with Cloudflare Access.\n\nSome SaaS applications provide the Redirect URL after you [configure the SSO provider](#3-configure-sso-in-your-saas-application).\n\n## 2. Add your application to Access\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application**.\n\n3. Select **SaaS**.\n\n4. Select your **Application** from the drop-down menu. If your application is not listed, enter a custom name in the **Application** field and select the textbox that appears below.\n\n5. Select **OIDC**.\n\n6. Select **Add application**.\n\n7. In **Scopes**, select the user attributes that you want Access to send in the ID token. For more information about configuring OIDC scopes and claims, refer to [OIDC claims](#oidc-claims).\n\n8. In **Redirect URLs**, enter the callback URL obtained from the SaaS application.\n\n9. (Optional) Enable [Proof of Key Exchange (PKCE)](https://www.oauth.com/oauth2-servers/pkce/) if the protocol is supported by your IdP. PKCE will be performed on all login attempts.\n\n10. Copy the following values to input into your SaaS application. Different SaaS applications may require different sets of input values.\n\n    | Field | Description |\n    | - | - |\n    | Client secret | Credential used to authorize Access as an SSO provider |\n    | Client ID | Unique identifier for this Access application |\n    | Configuration endpoint | If supported by your SaaS application, you can configure OIDC using this endpoint instead of manually entering the URLs listed below. `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<client-id>/.well-known/openid-configuration` |\n    | Issuer | Base URL for this OIDC integration `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<client-id>` |\n    | Token endpoint | Returns the user's ID token `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<client-id>/token` |\n    | Authorization endpoint | URL where users authenticate with Access `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<client-id>/authorization` |\n    | Key endpoint | Returns the current public keys used to [verify the Access JWT](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/validating-json/) `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<client-id>/jwks` |\n    | User info endpoint | Returns all user claims in JSON format `https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<client-id>/userinfo` |\n\n11. Add [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to control who can connect to your application. All Access applications are deny by default -- a user must match an Allow policy before they are granted access.\n\n12. Configure how users will authenticate:\n\n    1. Select the [**Identity providers**](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) you want to enable for your application.\n\n    2. (Recommended) If you plan to only allow access via a single IdP, turn on **Instant Auth**. End users will not be shown the [Cloudflare Access login page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-login-page/). Instead, Cloudflare will redirect users directly to your SSO login event.\n\n    3. (Optional) Under **WARP authentication identity**, allow users to authenticate to the application using their [WARP session identity](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-sessions/).\n\n13. Select **Next**.\n\n14. Configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) for the application. If **Show application in App Launcher** is enabled, then you must enter an **App Launcher URL**. The App Launcher URL is provided by the SaaS application. It may match the base URL portion of **Redirect URL** (`https://<INSTANCE-NAME>.example-app.com`) but could be a different value.\n\n15. Under **Block page**, choose what end users will see when they are denied access to the application:\n\n    * **Cloudflare default**: Reload the [login page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-login-page/) and display a block message below the Cloudflare Access logo. The default message is `That account does not have access`, or you can enter a custom message.\n    * **Redirect URL**: Redirect to the specified website.\n    * **Custom page template**: Display a [custom block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/) hosted in Cloudflare One.\n\n16. Select **Save application**.\n\n## 3. Configure SSO in your SaaS application\n\nNext, configure your SaaS application to require users to log in through Cloudflare Access. Refer to your SaaS application documentation for instructions on how to configure a third-party OIDC SSO provider.\n\n## 4. Test the integration\n\nOpen an incognito browser window and go to the SaaS application's login URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n## OIDC claims\n\nOIDC claims refer to the user identity characteristics that Cloudflare Access shares with your OIDC SaaS application upon successful authentication. An OIDC scope defines a set of OIDC claims. By default, Cloudflare Access passes all [standard claims](https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims) that are included in the `openid`, `email`, `profile`, and `groups` scopes (if available).\n\n| Scope | Description |\n| - | - |\n| `openid` | Includes a unique identifier for the user (required). |\n| `email` | Includes the user's email address. |\n| `profile` | Includes the user's name and all custom OIDC claims from the IdP. |\n| `groups` | Include the user's IdP group membership. |\n\nIn your Access application, you can configure the OIDC scopes and claims that Access sends to the SaaS provider. For example, you can remove the `groups` scope if your SaaS application does not need to receive user group information.\n\n### Filter groups\n\nIn **Group filter regex**, you can enter a regular expression to define the identity provider groups that you want to include in the `groups` scope. For example, if you enter the expression `(^TEAM-Engineering-.$)|(^TEAM-Product-.$)`, only groups with names like TEAM-Engineering-A or TEAM-Product-B would get passed to the SaaS application.\n\n### Add claims\n\nTo add additional OIDC claims onto the ID token sent to your SaaS application, configure the following fields for each claim:\n\n* **Name**: OIDC claim name\n* **Scope**: Select the OIDC scope where this claim should be included. In most cases, we recommend selecting `profile` since it already includes other custom claims from the IdP.\n* **IdP claim**: The identity provider value that should map to this OIDC claim. You can select any [SAML attribute](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/#saml-headers-and-attributes) or [OIDC claim](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/#custom-oidc-claims) that was configured in a Zero Trust IdP integration.\n* **Required**: If a claim is marked as required but is not provided by an IdP, Cloudflare will fail the authentication request and show an error page.\n* **Add per IdP claim**: (Optional) If you turned on multiple identity providers for the SaaS application, you can choose different attribute mappings for each IdP. These values will override the parent **IdP claim**.\n\n## Advanced settings\n\n### Access token lifetime\n\nThe OIDC Access token authorizes users to connect to the SaaS application through Cloudflare Access. You can set an **Access token lifetime** to determine the window in which the token can be used to establish authentication with the SaaS application — if it expires, the user must re-authenticate through Cloudflare Access. To balance security and user convenience, Cloudflare recommends configuring a short Access token lifetime in conjunction with a longer **Refresh token lifetime** (if supported by your application). When the access token expires, Cloudflare will use the refresh token to obtain a new access token after checking the user's identity against your Access policies. When the refresh token expires, the user will need to log back in to the identity provider. The refresh token lifetime should be less than your [global session duration](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/session-management/), otherwise the global session would take precedence.\n\nNote\n\nOIDC Access tokens only control the front door to a SaaS app; Access does not control how long the user can stay in the SaaS app itself. For example, if the user logs out of the SaaS app and then comes back to it, a valid Access token allows them to re-authenticate without another login. The SaaS app issues its own authorization cookie that manages the user's session within the app.\n\n### OIDC flows\n\nSome SaaS applications require SSO providers to provide tokens to the browser without backend authentication. Access for SaaS supports the following OIDC flows:\n\n* **No additional OIDC flows**: (Default) Recommended unless your application requires additional flows.\n* **Hybrid flows**: Used by applications that require information from the ID token before authenticating the user.\n* **Implicit flows**: (Not recommended) Typically used by frontend applications that cannot store secrets and which do not support **PKCE without client secret**.\n\nCloudflare allows various `response_type` values in the authorization request depending on the selected flow. For example, the implicit flow allows Cloudflare to return the ID token, Access token, or both the ID token and Access token from the Authorization endpoint.\n\n| `response_type` values | Default flow | Hybrid flow | Implicit flow |\n| - | - | - | - |\n| `code` | ✅ | ✅ | ❌ |\n| `id_token` | ❌ | ✅ | ✅ |\n| `token` | ❌ | ✅ | ✅ |\n\nTo include `id_token` in the authorization request, turn on **Return ID Token from Authorization Endpoint**. To include `token`, turn on **Return Access Token from Authorization Endpoint**\n\nNote\n\n[Refresh tokens](#access-token-lifetime) are not supported with Hybrid or Implicit flows.\n\n</page>\n\n<page>\n---\ntitle: Generic SAML application · Cloudflare One docs\ndescription: This page provides generic instructions for setting up a SaaS\n  application in Cloudflare Access using the SAML authentication protocol.\nlastUpdated: 2025-10-29T14:53:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/generic-saml-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/generic-saml-saas/index.md\n---\n\nThis page provides generic instructions for setting up a SaaS application in Cloudflare Access using the SAML authentication protocol.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to the account of the SaaS application\n\n## 1. Get SaaS application URLs\n\nObtain the following URLs from your SaaS application account:\n\n* **Entity ID**: A unique URL issued for your SaaS application, for example `https://<your-domain>.my.salesforce.com`.\n* **Assertion Consumer Service URL**: The service provider's endpoint for receiving and parsing SAML assertions.\n\n## 2. Add your application to Access\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application**.\n\n3. Select **SaaS**.\n\n4. Select your **Application** from the drop-down menu. If your application is not listed, enter a custom name in the **Application** field and select the textbox that appears below.\n\n5. Select **SAML**.\n\n6. Select **Add application**.\n\n7. Enter the **Entity ID** and **Assertion Consumer Service URL** obtained from your SaaS application account.\n\n8. Select the **Name ID Format** expected by your SaaS application (usually *Email*).\n\n9. (Optional) Configure any additional [SAML attribute statements](#saml-attributes) required by your SaaS application.\n\n10. Copy the **SSO endpoint**, **Access Entity ID or Issuer**, and **Public key**.\n\nIdP groups\n\nIf you are using Okta, Microsoft Entra ID (formerly Azure AD), Google Workspace, or GitHub as your IdP, Access will automatically send a SAML attribute titled `groups` with all of the user's associated groups as attribute values.\n\n1. Add [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to control who can connect to your application. All Access applications are deny by default -- a user must match an Allow policy before they are granted access.\n\n2. Configure how users will authenticate:\n\n   1. Select the [**Identity providers**](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) you want to enable for your application.\n\n   2. (Recommended) If you plan to only allow access via a single IdP, turn on **Instant Auth**. End users will not be shown the [Cloudflare Access login page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-login-page/). Instead, Cloudflare will redirect users directly to your SSO login event.\n\n   3. (Optional) Under **WARP authentication identity**, allow users to authenticate to the application using their [WARP session identity](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-sessions/).\n\n3. Select **Next**.\n\n4. (Optional) Configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) for the application.\n\n5. Under **Block page**, choose what end users will see when they are denied access to the application:\n\n   * **Cloudflare default**: Reload the [login page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-login-page/) and display a block message below the Cloudflare Access logo. The default message is `That account does not have access`, or you can enter a custom message.\n   * **Redirect URL**: Redirect to the specified website.\n   * **Custom page template**: Display a [custom block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/) hosted in Cloudflare One.\n\n6. Select **Save application**.\n\n## 3. Configure SSO in your SaaS application\n\nNext, configure your SaaS application to require users to log in through Cloudflare Access. Refer to your SaaS application documentation for instructions on how to configure a third-party SAML SSO provider. You will need the following values from the Cloudflare One:\n\n* **SSO endpoint**\n* **Access Entity ID or Issuer**\n* **Public key**\n\nYou can either manually enter this data into your SaaS application or upload a metadata XML file. The metadata is available at the URL: `<SSO endpoint>/saml-metadata`.\n\n### Validate SAML Response\n\nWhen acting as a SAML identity provider, Cloudflare will sign both the SAML Response and the SAML Assertion using the SHA-256 algorithm. The SaaS application can validate this signature using the **Public key** that you upload to the SaaS application.\n\n## 4. Test the integration\n\nOpen an incognito browser window and go to the SaaS application's login URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n## SAML attributes\n\n[SAML attributes](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/#saml-headers-and-attributes) refer to the user identity characteristics that Cloudflare Access shares with your SAML SaaS application upon successful authentication. By default, Cloudflare Access passes the following attributes (if available) to the SaaS application:\n\n* `id` - UUID of the user's Access identity\n* `name` - Full name of the user (for example, `John Doe`)\n* `email` - User's email address\n* `groups` - Identity provider group membership\n\nIn Access for SaaS, you can add additional SAML attributes or customize the SAML statement sent to the SaaS application. This allows you to integrate SaaS applications which have specific SAML attribute requirements.\n\n### SAML attribute statements\n\nTo send additional SAML attributes to your SaaS application, configure the following fields for each attribute:\n\n* **Name**: SAML attribute name\n\n* **SAML friendly name**: (Optional) A human readable name for the SAML attribute\n\n* **Name format**: Specify the **Name** format expected by the SaaS application:\n\n  * `Unspecified`: (default) No specific format required.\n  * `URI`: Name is in a format such as `urn:ietf:params:scim:schemas:core:2.0:User:userName` or `urn:oid:2.5.4.42`.\n  * `Basic`: Name is a normal string such as `userName`.\n\n* **IdP claim**: The identity provider value that should map to this SAML attribute. You can select any [SAML attribute](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/#saml-headers-and-attributes) or [OIDC claim](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/#custom-oidc-claims) that was configured in a Cloudflare One IdP integration.\n\n* **Required**: If an attribute is marked as required but is not provided by an IdP, Cloudflare will fail the authentication request and show an error page.\n\n* **Add per IdP claim**: (Optional) If you turned on multiple identity providers for the SaaS application, you can choose different attribute mappings for each IdP. These values will override the parent **IdP claim**.\n\n### JSONata transforms\n\nIn **Advanced settings** > **Transformation**, you can enter a [JSONata](https://jsonata.org/) script that modifies a copy of the [User Registry identity](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/users/). This is useful for setting default values, excluding email addresses, or ensuring usernames meet arbitrary criteria. Access will send the modified user identity to the SaaS application as SAML attributes.\n\nNote\n\nJSONata transformations are not compatible with [SAML attribute statements](#saml-attribute-statements). JSONata transformations will override any specified SAML attributes.\n\nFor example, the following JSONata script merges group names into a list and adds an `eduPersonPrincipalName` field which maps to the user email.",
      "language": "unknown"
    },
    {
      "code": "Here is an example of a user identity before applying the JSONata transform:",
      "language": "unknown"
    },
    {
      "code": "Result after applying the example JSONata script:",
      "language": "unknown"
    },
    {
      "code": "For more JSONata transform use cases, refer to the following examples.\n\nRemove groups attribute\n\nThe following JSONata script removes the `groups` SAML attribute. This can be useful if your SaaS application does not need to receive user group information.",
      "language": "unknown"
    },
    {
      "code": "Result after applying the JSONata transform:",
      "language": "unknown"
    },
    {
      "code": "Rename groups field and remove group ID\n\nThe following JSONata script changes the `groups.name` field from `name` to `group_name` and removes the `groups.id` field:",
      "language": "unknown"
    },
    {
      "code": "Result after applying the JSONata transform:",
      "language": "unknown"
    },
    {
      "code": "Filter groups by name\n\nThe following JSONata script filters groups to those that match a regular expression.",
      "language": "unknown"
    },
    {
      "code": "Result after applying the JSONata transform:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: GitHub Enterprise Cloud · Cloudflare One docs\ndescription: This guide covers how to configure GitHub Enterprise Cloud as a\n  SAML application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/github-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/github-saas/index.md\n---\n\nThis guide covers how to configure [GitHub Enterprise Cloud](https://docs.github.com/en/enterprise-cloud@latest/admin/managing-iam/using-saml-for-enterprise-iam/configuring-saml-single-sign-on-for-your-enterprise) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* A GitHub Enterprise Cloud subscription\n* Access to a GitHub account as an organization owner\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, select *GitHub*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://github.com/orgs/<your-organization>`\n   * **Assertion Consumer Service URL**: `https://github.com/orgs/<your-organization>/saml/consume`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint**, **Access Entity ID or Issuer**, and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Create an X.509 certificate\n\n1. Paste the **Public key** in a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n## 3. Configure an identity provider and SAML SSO in GitHub Enterprise Cloud\n\n1. In your GitHub organization page, go to **Settings** > **Authentication security**.\n\n2. Under **SAML single sign-on**, turn on **Enable SAML authentication**.\n\n3. Fill in the following fields:\n\n   * **Sign on URL**: SSO endpoint from application configuration in Cloudflare One.\n   * **Issuer**: Access Entity ID or Issuer from application configuration in Cloudflare One.\n   * **Public certificate**: Paste the entire x.509 certificate from step [2. Create a x.509 certificate](#2-create-a-x509-certificate).\n\n## 4. Test the integration\n\nSelect **Test SAML configuration**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider. When this is successful, select **Save**.\n\nYou can also turn on **Require SAML SSO authentication for all members of your organization** if you want to enforce SSO login with Cloudflare Access.\n\n</page>\n\n<page>\n---\ntitle: Google Workspace · Cloudflare One docs\ndescription: This guide covers how to configure Google Workspace as a SAML\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/google-workspace-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/google-workspace-saas/index.md\n---\n\nThis guide covers how to configure [Google Workspace](https://support.google.com/a/topic/7579248?ref_topic=7556686\\&sjid=14539485562330725560-NA) as a SAML application in Cloudflare One.\n\nNote\n\nThe integration of Access as a single sign-on provider for your Google Workspace account does not work for Google super admins. It will work for other users.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Google Workspace account\n\n## 1. Create an application in Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Access controls** > **Applications**.\n\n2. Select **Add an application**.\n\n3. Select **SaaS**.\n\n4. Fill in the following information:\n\n   * **Application**: *Google*.\n   * **Entity ID**: Use the value provided to you by Google when [configuring your SAML SSO provider](https://saml-doc.okta.com/SAML_Docs/How-to-Enable-SAML-2.0-in-Google-Apps.html).\n   * **Assertion Consumer Service URL**: `https://www.google.com/a/<your_domain.com>/acs`, where `<your_domain.com>` is your Google Workspace domain.\n   * **Name ID Format**: *Email*.\n\nWarning\n\nWhen you put your Google Workspace behind Access, users will not be able to log in using [Google](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/google/) or [Google Workspace](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/google-workspace/) as an identity provider. To secure Google Workspace behind Access and avoid an [authentication loop](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/#after-putting-google-workspace-behind-access-i-cant-log-in-it-keeps-redirecting-between-access-and-google-without-ever-completing-authentication), you must configure a different identity provider (not Google or Google Workspace) for authentication.\n\n1. [Create an Access policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for your application. For example, you could allow users with an `@your_domain.com` email address.\n\n2. Copy the **SSO endpoint**, **Access Entity ID or Issuer**, and **Public key**. These values will be used to configure Google Workspace.\n\n3. Save the application.\n\n## 2. Create a certificate from your public key\n\n1. Copy and then paste your **Public key** into a text editor.\n\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`. For example,",
      "language": "unknown"
    },
    {
      "code": "3. Set the file extension as `.crt` and save.\n\n## 3. Create an SSO provider in Google Workspace\n\n1. Log in to your [Google Admin console](https://admin.google.com/).\n\n2. Go to **Security** > **Authentication** > **SSO with third party IdP**.\n\n3. Select **Third-party SSO profile for your organization**.\n\n4. Enable **Set up SSO with third-party identity provider**.\n\n5. Fill in the following information:\n\n   * **Sign-in page URL**: Copy and then paste your **SSO endpoint** from Cloudflare One.\n   * **Sign-out page URL**: `https://<team-name>.cloudflareaccess.com/cdn-cgi/access/logout`, where `<team-name>` is your Cloudflare One team name.\n   * **Verification certificate**: Upload the certificate file containing your public key.\n\n6. (Optional) Enable **Use a domain specific issuer**. If you select this option, Google will send an issuer specific to your Google Workspace domain (`google.com/a/<your_domain.com>` instead of the standard `google.com`).\n\n## 4. Test the integration\n\n1. In your [Google Admin console](https://admin.google.com/), go to **Apps** > **Google Workspace** > **Gmail** > **Setup**.\n2. Copy your Gmail **Web address**.\n3. Open an incognito browser window and go to your Gmail web address (for example, `https://mail.google.com/a/<your_domain.com>`).\n\nAn Access login screen should appear.\n\n## Troubleshooting\n\n`Error: \"G Suite - This account cannot be accessed because the login credentials could not be verified.\"`\n\nIf you see this error, it is likely that the public key and private key do not match. Confirm that your certificate file includes the correct public key.\n\n</page>\n\n<page>\n---\ntitle: Grafana Cloud · Cloudflare One docs\ndescription: This guide covers how to configure Grafana Cloud as an OIDC\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/grafana-cloud-saas-oidc/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/grafana-cloud-saas-oidc/index.md\n---\n\nThis guide covers how to configure [Grafana Cloud](https://grafana.com/docs/grafana-cloud/account-management/authentication-and-permissions/authorization/#configure-oauth-20-with-generic-oauth) as an OIDC application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Grafana Cloud account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application**.\n3. Select **SaaS**.\n4. For **Application**, enter `Grafana Cloud` and select the corresponding textbox that appears.\n5. For the authentication protocol, select **OIDC**.\n6. Select **Add application**.\n7. In **Scopes**, select the attributes that you want Access to send in the ID token.\n8. In **Redirect URLs**, enter `https://<your-grafana-domain>/login/generic_oauth`.\n9. (Optional) Enable [Proof of Key Exchange (PKCE)](https://www.oauth.com/oauth2-servers/pkce/) if the protocol is supported by your IdP. PKCE will be performed on all login attempts.\n10. Copy the **Client secret**, **Client ID**, **Token endpoint**, and **Authorization endpoint**.\n11. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n12. (Optional) In **Experience settings**, configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) by turning on **Enable App in App Launcher** and, in **App Launcher URL**, entering `https://<your-grafana-domain>/login`.\n13. Save the application.\n\n## 2. Add a SSO provider to Grafana Cloud\n\n1. In Grafana Cloud, select the **menu** icon > **Administration** > **Authentication** > **Generic OAuth**.\n\n2. (Optional) For **Display name**, enter a new display name (for example, `Cloudflare Access`). Users will select **Sign in with (display name)** when signing in via SSO.\n\n3. Fill in the following fields:\n\n   * **Client Id**: Client ID from application configuration in Cloudflare One\n   * **Client secret**: Client secret from application configuration in Cloudflare One\n   * **Scopes**: Delete `user:email` and enter the scopes configured in Cloudflare One\n   * **Auth URL**: Authorization endpoint from application configuration in Cloudflare One\n   * **Token URL**: Token endpoint from application configuration in Cloudflare One\n\n4. Select **Save**.\n\n## 3. Test the integration\n\nOpen an incognito browser window and go to your Grafana domain (`https://<your-grafana-domain>/login`). Select **Sign in with (display name)**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n</page>\n\n<page>\n---\ntitle: Grafana · Cloudflare One docs\ndescription: This guide covers how to configure Grafana as an OIDC application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/grafana-saas-oidc/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/grafana-saas-oidc/index.md\n---\n\nThis guide covers how to configure [Grafana](https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/generic-oauth/) as an OIDC application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Grafana account\n\nNote\n\nYou can also configure OIDC SSO for Grafana using a [configuration file](https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/generic-oauth/#configure-generic-oauth-authentication-client-using-the-grafana-configuration-file) instead of using Grafana's user interface (UI), as documented in this guide.\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application**.\n3. Select **SaaS**.\n4. For **Application**, select *Grafana*.\n5. For the authentication protocol, select **OIDC**.\n6. Select **Add application**.\n7. In **Scopes**, select the attributes that you want Access to send in the ID token.\n8. In **Redirect URLs**, enter `https://<your-grafana-domain>/login/generic_oauth`.\n9. (Optional) Enable [Proof of Key Exchange (PKCE)](https://www.oauth.com/oauth2-servers/pkce/) if the protocol is supported by your IdP. PKCE will be performed on all login attempts.\n10. Copy the **Client secret**, **Client ID**, **Token endpoint**, and **Authorization endpoint**.\n11. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n12. (Optional) In **Experience settings**, configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) by turning on **Enable App in App Launcher** and, in **App Launcher URL**, entering `https://<your-grafana-domain>/login`.\n13. Save the application.\n\n## 2. Add a SSO provider to Grafana\n\n1. In Grafana, select the **menu** icon > **Administration** > **Authentication** > **Generic OAuth**.\n\n2. (Optional) For **Display name**, enter a new display name (for example, `Cloudflare Access`). Users will select **Sign in with (display name)** when signing in via SSO.\n\n3. Fill in the following fields:\n\n   * **Client Id**: Client ID from application configuration in Cloudflare One\n   * **Client secret**: Client secret from application configuration in Cloudflare One\n   * **Scopes**: Delete `user:email` and enter the scopes configured in Cloudflare One\n   * **Auth URL**: Authorization endpoint from application configuration in Cloudflare One\n   * **Token URL**: Token endpoint from application configuration in Cloudflare One\n\n4. Select **Save**.\n\n## 3. Test the integration\n\nLog out, then select **Sign in with (display name)**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n</page>\n\n<page>\n---\ntitle: Greenhouse Recruiting · Cloudflare One docs\ndescription: This guide covers how to configure Greenhouse Recruiting as a SAML\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/greenhouse-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/greenhouse-saas/index.md\n---\n\nThis guide covers how to configure [Greenhouse Recruiting](https://support.greenhouse.io/hc/en-us/articles/360040753811-Configure-single-sign-on-SSO-for-Greenhouse-Recruiting) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to an Advanced or Expert Greenhouse Recruiting site\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application** > **SaaS**.\n3. For **Application**, enter `Greenhouse` and select the corresponding textbox that appears.\n4. For the authentication protocol, select **SAML**.\n5. Select **Add application**.\n6. Copy the **SAML Metadata endpoint**.\n7. Keep this window open. You will finish this configuration in step [4. Finish adding a SaaS application to Cloudflare One](#4-finish-adding-a-saas-application-to-cloudflare-one).\n\n## 2. Download the metadata file\n\n1. Paste the SAML Metadata endpoint from application configuration in Cloudflare One in a web browser.\n2. Follow your browser-specific steps to download the URL's contents as an `.xml` file.\n\n## 3. Add a SAML SSO provider to Greenhouse\n\n1. In Greenhouse Recruiting, go to the **Configure** icon > **Dev Center** > **Single sign-on**.\n2. Copy the **SSO Assertion Consumer URL**.\n3. Under **Upload XML file**, select **Choose a file**, and upload the `.xml` file created in step [2. Download the metadata file](#2-download-the-metadata-file).\n4. Change the **Entity ID** to `greenhouse.io`.\n5. Keep this window open without selecting **Begin testing**. You will finish this configuration in step [5. Test the integration and finalize configuration](#5-test-the-integration-and-finalize-configuration).\n\n## 4. Finish adding a SaaS application to Cloudflare One\n\n1. In your open Cloudflare One window, fill in the following fields:\n\n   * **Entity ID**: `greenhouse.io`\n   * **Assertion Consumer Service URL**: SSO Assertion Consumer URL from SSO configuration in Greenhouse Recruiting.\n   * **Name ID format**: *Email*\n\n2. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n3. Save the application.\n\n## 5. Test the integration and finalize configuration\n\n1. In your open Greenhouse Recruiting window, select **Begin Testing** > **Proceed**.\n2. Open an incognito browser window and go to your Greenhouse Recruiting URL. Choose the SSO login option. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n3. Once SSO sign in is successful, go to the **Configure** icon > **Dev Center** > **Single sign-on**.\n4. Select **Finalize Configuration**.\n5. In the text field, enter `CONFIGURE`.\n6. Select **Finalize**. Now, users will only be able to sign in with SSO.\n\n</page>\n\n<page>\n---\ntitle: Hubspot · Cloudflare One docs\ndescription: This guide covers how to configure Hubspot as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/hubspot-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/hubspot-saas/index.md\n---\n\nThis guide covers how to configure [Hubspot](https://knowledge.hubspot.com/account-security/set-up-single-sign-on-sso) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Hubspot Enterprise plan account\n\n## 1. Configure Hubspot\n\n1. Go to **Settings** > **Account**, then go to **Defaults** > **Security**.\n2. Select *Single Sign-on*.\n3. Copy the values for *Audience URI* and *Sign on URL*.\n\n## 2. Configure Cloudflare Access\n\n1. In Cloudflare One, go to **Access controls** > **Applications** and create a SaaS application.\n\n2. Set the **Application type** to *Hubspot*.\n\n3. Use the following Hubspot field mappings:\n\n   | Hubspot values | Cloudflare values |\n   | - | - |\n   | Audience URI | Entity ID |\n   | Sign On URL | Assertion Consumer Service URL |\n\n4. Set **NameID** to *Email*.\n\n5. Add any desired [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to your application.\n\n6. Copy the **SSO endpoint** and **Access Entity ID**.\n\n7. Save the application.\n\n## 3. Create a x.509 certificate\n\n1. Paste the **Public key** in a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n## 4. Finalize Hubspot configuration\n\n1. Use the following field mappings:\n\n   | Cloudflare value | Hubspot value |\n   | - | - |\n   | SSO endpoint | Identity Provider Single Sign-on URL |\n   | Entity ID | Identity Provider Identifier |\n   | Public key | Certificate |\n\n2. Select **Verify** to validate the integration.\n\nYour configuration is now complete. Hubspot SSO can be switched on for specific users or the entire account.\n\n</page>\n\n<page>\n---\ntitle: Ironclad · Cloudflare One docs\ndescription: This guide covers how to configure Ironclad as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/ironclad-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/ironclad-saas/index.md\n---\n\nThis guide covers how to configure [Ironclad](https://support.ironcladapp.com/hc/articles/12286012625559-Set-Up-Generic-SSO-SAML-Integration) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Ironclad site\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application** > **SaaS**.\n3. For **Application**, enter `Ironclad` and select the corresponding textbox that appears.\n4. For the authentication protocol, select **SAML**.\n5. Select **Add application**.\n6. Copy the **SSO Endpoint** and **Public key**.\n7. Keep this window open. You will finish this configuration in step [3. Finish adding a SaaS application to Cloudflare One](#3-finish-adding-a-saas-application-to-cloudflare-one).\n\n## 2. Add a SAML SSO provider to Ironclad\n\n1. In Ironclad, select your profile picture > **Company settings** > **Integrations** > **SAML**.\n\n2. Select **Add SAML Configuration** > **Show Additional IdP Settings**.\n\n3. Copy the **Callback** value.\n\n4. Fill in the following fields:\n\n   * **Entry Point**: SSO endpoint from application configuration in Cloudflare One.\n   * **Identity Provider Certificate**: Public key from application configuration in Cloudflare One. The key will automatically be wrapped in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n5. Select **Save**.\n\n## 3. Finish adding a SaaS application to Cloudflare One\n\n1. In your open Cloudflare One window, fill in the following fields:\n\n   * **Entity ID**: `ironcladapp.com`\n   * **Assertion Consumer Service URL**: Callback from Ironclad SAML SSO set-up.\n   * **Name ID format**: *Email*\n\n2. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n3. Save the application.\n\n## 4. Add a test user to Ironclad and test the integration\n\n1. In Ironclad, select your profile picture > **Company settings** > **Users & Groups**.\n2. Select **Invite User**.\n3. For **Email addresses**, add your desired email address for your test user.\n4. For **Sign-in Method**, ensure **Sign in with (your-team-domain.cloudflareaccess.com)** is selected\n5. Select **Invite**.\n6. In the invitation email sent to the test user, select **Join now**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n7. Once this is successful, you can contact your account team or `support@ironcladapp.com` to migrate existing users to SSO login.\n\n</page>\n\n<page>\n---\ntitle: Jamf Pro · Cloudflare One docs\ndescription: This guide covers how to configure Jamf Pro as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/jamf-pro-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/jamf-pro-saas/index.md\n---\n\nThis guide covers how to configure [Jamf Pro](https://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/Single_Sign-On.html) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Jamf Pro account\n\n## 1. Collect Jamf Pro information\n\n1. In Jamf Pro, go to **Settings** > **Systems** > **Single Sign-On** > **Edit**.\n2. Copy the pre-populated URL in **Entity ID**.\n3. Paste the URL in a web browser to download the Jamf metadata file.\n4. Open the `metadata.xml` file in a text editor, and copy the values for **Entity ID** and **Assertion Consumer Service**.\n\n## 2. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, enter `Jamf` or `Jamf Pro` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: Entity ID value from Jamf Pro metadata file.\n   * **Assertion Consumer Service URL**: Assertion Consumer Service value from Jamf Pro metadata file.\n   * **Name ID format**: *Email*\n\n7. Copy the **SAML Metadata endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 3. Edit Access SAML Metadata\n\n1. Paste the **SAML Metadata endpoint** from application configuration in Cloudflare One into a browser.\n2. Copy the file and paste it into a text editor.\n3. Change `WantAuthnRequestsSigned=\"true\"` to `WantAuthnRequestsSigned=\"false\"`.\n4. Set the file extension as `.xml` and save.\n\n## 4. Add a SAML SSO provider to Jamf Pro\n\n1. In Jamf Pro, go to **Settings** > **Single Sign-On** > **Edit**.\n\n2. In Identity Provider menu, select **Other**.\n\n3. Label **Other provider** as `Cloudflare`.\n\n4. Fill in the following fields:\n\n   * **Entity ID**: Entity ID from Jamf Pro metadata file.\n   * **Identity Provider Metadata Source**: Select **Metadata File** and upload the `.xml` file from step [2. Edit Access SAML Metadata](#2-add-a-saas-application-to-cloudflare-one).\n   * **Identity Provider User Mapping**: *Name ID*\n   * **Jamf Pro User Mapping**: *Email*\n\n5. Turn on **Single Sign On**.\n\nNote\n\nThe Failover Login URL located on this page can be used to log in if your SSO does not work.\n\n## 5. Test the Integration\n\nLog out of Jamf Pro and open an incognito browser window. Go to your Jamf Pro URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n</page>\n\n<page>\n---\ntitle: Miro · Cloudflare One docs\ndescription: This guide covers how to configure Miro as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/miro-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/miro-saas/index.md\n---\n\nThis guide covers how to configure [Miro](https://help.miro.com/hc/articles/360017571414-Single-sign-on-SSO) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Miro Business or Enterprise plan account\n* A [verified domain](https://help.miro.com/hc/articles/360034831793-Domain-control) added to your Miro account (Enterprise plan), or be prepared to do so during SSO configuration (Business or Enterprise plan)\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, enter `Miro` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://miro.com/`\n   * **Assertion Consumer Service URL**: `https://miro.com/sso/saml`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint** and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Add a SAML SSO provider to Miro\n\n* business plan\n\n  1. In Miro, select your profile picture > **Settings** > **\\*\\*Security\\*\\***.\n\n  2. Turn on **SSO/SAML**.\n\n  3. Fill in the following fields:\n\n     * **SAML Sign-in URL**: SSO endpoint from application configuration in Cloudflare One\n     * **Key x509 Certificate**: Public key from application configuration in Cloudflare One\n\n  4. In **Domain**, enter the domain you want to configure SSO for and select **Enter**.\n\n  5. Enter an email address from that domain and select **send verification**.\n\n  6. Once you receive a verification email, select the link in the email, then select **Save**. When the domain is successfully configured, the **VERIFY EMAIL** label next to the domain in the SSO/SAML configuration page will disappear.\n\n  7. If you have additional domains you want to configure SSO for, repeat steps 4-6 for each domain.\n\n* enterprise plan\n\n  1. In Miro, select your profile picture > **Settings** > **\\*\\*Security and Compliance\\*\\* > \\*\\*Authentication\\*\\* > \\*\\*Single sign-on\\*\\***.\n\n  2. Turn on **SSO/SAML**.\n\n  3. Fill in the following fields:\n\n     * **SAML Sign-in URL**: SSO endpoint from application configuration in Cloudflare One\n     * **Key x509 Certificate**: Public key from application configuration in Cloudflare One\n\n  4. In **Domain**, enter the domain you want to configure SSO for and select **Enter**.\n\n  5. If you have not previously \\[verified the domain]\\(https\\://help.miro.com/hc/articles/360034831793-Domain-control), enter an email address from that domain and select **send verification**.\n\n  6. Once you receive a verification email, select the link in the email, then select **Save**. When the domain is successfully configured, the **VERIFY EMAIL** label next to the domain in the SSO/SAML configuration page will disappear.\n\n  7. If you have additional domains you want to configure SSO for, repeat steps 4-6 for each domain.\n\n## 3. Test the integration\n\nIn the Miro SAML/SSO configuration page, select **Test SSO Configuration**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider. If the login is successful, you will receive a **SSO configuration test was successful** message.\n\nNote\n\nWhen testing the integration, you do not have to use an email from a domain you have configured for SSO or a user configured in Miro. The only requirement is that the user is already configured in your identity provider.\n\n</page>\n\n<page>\n---\ntitle: PagerDuty · Cloudflare One docs\ndescription: This guide covers how to configure PagerDuty as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/pagerduty-saml-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/pagerduty-saml-saas/index.md\n---\n\nThis guide covers how to configure [PagerDuty](https://support.pagerduty.com/docs/sso) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a PagerDuty site\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, select *PagerDuty*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://<your-subdomain>.pagerduty.com`\n   * **Assertion Consumer Service URL**: `https://<your-subdomain>.pagerduty.com/sso/saml/consume`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint** and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Create a x.509 certificate\n\n1. Paste the **Public key** in a text editor.\n2. Amend the public key so each row is a maximum of 64 characters long. Originally, each full row of the public key is 65 characters long.\n3. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n## 3. Add a SAML SSO provider to PagerDuty\n\n1. In PagerDuty, select your profile picture and go to **Account Settings** > **Single Sign-on**.\n2. Turn on **SAML**.\n3. In **X.509 Certificate**, paste the entire x.509 certificate from step [2. Create a x.509 certificate](#2-create-a-x509-certificate).\n4. In **Login URL**, paste the SSO endpoint from application configuration in Cloudflare One.\n5. Select **Save Changes**.\n\n## 4. Test the integration and finalize SSO configuration\n\n1. Open an incognito window and paste your PagerDuty URL into the address bar. Select **Sign In With Single Sign-On**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n2. In an incognito window, paste your PagerDuty URL and select **Sign In With Single Sign-On**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n3. Once SSO sign in is successful, select your profile picture and go to **Account Settings** > **Single Sign-on**.\n4. Turn off **Allow username/password login** and select **Save Changes**. Now, users will only be able to sign in with SSO.\n\n</page>\n\n<page>\n---\ntitle: Pingboard · Cloudflare One docs\ndescription: This guide covers how to configure Pingboard as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/pingboard-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/pingboard-saas/index.md\n---\n\nThis guide covers how to configure [Pingboard](https://support.pingboard.com/hc/en-us/articles/360046585994-Set-Up-a-Custom-SSO-Solution) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Pingboard account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `Pingboard` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `http://app.pingboard.com/sp`\n   * **Assertion Consumer Service URL**: `https://sso-demo.pingboard.com/auth/saml/consume`\n   * **Name ID format**: *Email*\n\n7. Copy the **SAML Metadata endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Add a SAML SSO provider to Pingboard\n\n1. In Pingboard, go to **Account** > **Add-Ons**.\n2. Under **Third-Party Integrations**, select **Custom SSO**.\n3. In a web browser, paste the SAML Metadata endpoint you copied from the application configuration in Cloudflare One. Next, copy the contents of the displayed page.\n4. In Pingboard, under **IdP Metadata**, paste the contents from the SAML Metadata endpoint.\n5. (Optional) Under **Sign in with**, enter a name (for example, `Cloudflare Access`). Your users will select this name when signing in.\n\n## 3. Test the integration\n\nOpen an incognito browser window and go to your Pingboard URL. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n</page>\n\n<page>\n---\ntitle: Salesforce (OIDC) · Cloudflare One docs\ndescription: This guide covers how to configure Salesforce as an OpenID Connect\n  (OIDC) application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/salesforce-saas-oidc/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/salesforce-saas-oidc/index.md\n---\n\nThis guide covers how to configure [Salesforce](https://help.salesforce.com/s/articleView?id=sf.sso_provider_openid_connect.htm\\&type=5) as an OpenID Connect (OIDC) application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Salesforce account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, select *Salesforce*.\n\n4. For the authentication protocol, select **OIDC**.\n\n5. Select **Add application**.\n\n6. In **Scopes**, select the attributes that you want Access to send in the ID token.\n\n7. In **Redirect URLs**, enter the callback URL obtained from Salesforce (`https://<your-domain>.my.salesforce.com/services/authcallback/<URL Suffix>`). Refer to [Add a SSO provider to Salesforce](#2-add-a-sso-provider-to-salesforce) for instructions on obtaining this value.\n\n8. (Optional) Enable [Proof of Key Exchange (PKCE)](https://www.oauth.com/oauth2-servers/pkce/) if the protocol is supported by your IdP. PKCE will be performed on all login attempts.\n\n9. Copy the following values:\n\n   * **Client ID**\n   * **Client Secret**\n   * **Authorization endpoint**\n   * **Token endpoint**\n   * **User info endpoint**\n\n10. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n11. (Optional) In **Experience settings**, configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) by turning on **Enable App in App Launcher** and, in **App Launcher URL**, entering `https://<your-domain>.my.salesforce.com`.\n\n12. Save the application.\n\n## 2. Add a SSO provider to Salesforce\n\n1. In Salesforce, go to **Setup**.\n\n2. In the **Quick Find** box, enter `auth` and select **Auth providers**.\n\n3. Select **New**.\n\n4. For the provider type, select **OpenID Connect**.\n\n5. Enter a name for the SSO provider (for example, `Cloudflare Access`).\n\n6. Fill in the following fields with values obtained from Cloudflare Access:\n\n   * **Consumer Key**: Client ID\n   * **Consumer Secret**: Client Secret\n   * **Authorize Endpoint URL**: Authorization endpoint\n   * **Token endpoint URL**: Token endpoint\n   * **User Info Endpoint URL**: User info endpoint\n   * **Token Issuer**: Issuer\n\n7. (Optional) Enable **Use Proof Key for Code Exchange** if you enabled it in Access.\n\n8. In **Default Scopes**, enter a space-separated list of the scopes you configured in Access (for example, `openid email profile groups`).\n\n9. Select **Save**.\n\n10. Copy the **Callback URL**:",
      "language": "unknown"
    },
    {
      "code": "11. In Cloudflare One, paste the Callback URL into the **Redirect URL** field.\n\nTo test the integration, open an incognito browser window and go to the **Test-Only Initialization URL** ( `https://<your-domain>.my.salesforce.com/services/auth/test/<URL Suffix>`)\n\n## 3. Enable Single Sign-On in Salesforce\n\n1. Enable Cloudflare Access as an identity provider on your Salesforce domain:\n\n   1. In the **Quick Find** box, enter `domain` and select **My Domain**.\n   2. In **Authentication Configuration**, select **Edit**.\n   3. In **Authentication Service**, turn on the Cloudflare Access provider.\n\n2. (Optional) To require users to login with Cloudflare Access:\n\n   1. In the **Quick Find** box, enter `single sign-on` and select **Single Sign-On Settings**.\n   2. Turn on **Disable login with Salesforce credentials**.\n\nTo test, open an incognito browser window and go to your Salesforce domain (`https://<your-domain>.my.salesforce.com`).\n\n</page>\n\n<page>\n---\ntitle: Salesforce (SAML) · Cloudflare One docs\ndescription: Learn to configure Salesforce as a SAML app in Cloudflare One.\n  Follow step-by-step instructions for adding SaaS apps and enabling SSO.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/salesforce-saas-saml/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/salesforce-saas-saml/index.md\n---\n\nThis guide covers how to configure [Salesforce](https://help.salesforce.com/s/articleView?id=sf.sso_saml.htm\\&type=5) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Salesforce account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, select *Salesforce*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://<your-domain>.my.salesforce.com` or `https://<your-domain>.my.salesforce.com?so=<your-salesforce-org-id>`, if your account was created before summer 2019 or does not have a My Domain subdomain.\n   * **Assertion Consumer Service URL**: `https://<your-domain>.my.salesforce.com` or `https://<your-domain>.my.salesforce.com?so=<your-salesforce-org-id>`, if your account was created before summer 2019 or does not have a My Domain subdomain.\n   * **Name ID format**: *Email*\n\nNote\n\nIf you are unsure of which URL to use in the **Entity ID** and **Assertion Consumer Service URL** fields, you can check your Salesforce account's metadata. In Salesforce, go to the **Single Sign-On Settings** page and select **Download Metadata**. In this file, you will find the correct URLs to use.\n\n1. Copy the **SSO endpoint**, **Public key**, and **Access Entity ID or Issuer**.\n2. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n3. Save the application.\n\n## 2. Create a certificate file\n\n1. Paste the **Public key** in a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n3. Set the file extension as `.crt` and save.\n\n## 3. Add a SAML SSO provider to Salesforce\n\n1. In Salesforce, go to **Setup**.\n\n2. In the **Quick Find** box, enter `single sign-on` and select **Single Sign-On Settings**.\n\n3. In **SAML Single Sign-On Settings**, select **New**.\n\n4. Fill in the following fields:\n\n   * **Name:** Name of the SSO provider (for example, `Cloudflare Access`). Users will select this name when signing in to Salesforce.\n   * **API name:** (this will pre-populate)\n   * **Issuer:** Paste the Access Entity ID or Issuer from application configuration in Cloudflare One.\n   * **Identity Provider Certificate**: Upload the `.crt` certificate file from [2. Create a certificate file](#2-create-a-certificate-file).\n   * **Entity ID**: `https://<your-domain>.my.salesforce.com`\n   * **SAML Identity type:** If the user's Salesforce username is their email address, select *Assertion contains the User's Salesforce username*. Otherwise, select *Assertion contains the Federation ID from the User object* and make sure the user's Federation ID matches their email address.\n\n   Configure Federation IDs\n\n   1. In the **Quick Find** box, enter `users` and select **Users**. 2. Select the user. 3. Verify that the user's **Federation ID** matches the email address used to authenticate to Cloudflare Access.\n\n   * **Identity Provider Login URL**: SSO endpoint provided in Cloudflare One for this application.\n\n5. Select **Save**.\n\n## 4. Enable Single Sign-On in Salesforce\n\n1. Configure Single Sign-On settings:\n\n   1. In the **Quick Find** box, enter `single sign-on` and select **Single Sign-On Settings**.\n   2. (Optional) To require users to login with Cloudflare Access, turn on **Disable login with Salesforce credentials**.\n   3. Turn on **SAML Enabled**.\n   4. Turn on **Make federation ID case-insensitive**.\n\n2. Enable Cloudflare Access as an identity provider on your Salesforce domain:\n\n   1. In the **Quick Find** box, enter `domain` and select **My Domain**.\n   2. In **Authentication Configuration**, select **Edit**.\n   3. In **Authentication Service**, turn on the Cloudflare Access provider.\n\nTo test, open an incognito browser window and go to your Salesforce domain (`https://<your-domain>.my.salesforce.com`).\n\n</page>\n\n<page>\n---\ntitle: ServiceNow (OIDC) · Cloudflare One docs\ndescription: This guide covers how to configure ServiceNow as an OIDC\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/servicenow-saas-oidc/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/servicenow-saas-oidc/index.md\n---\n\nThis guide covers how to configure [ServiceNow](https://docs.servicenow.com/bundle/washingtondc-platform-security/page/integrate/single-sign-on/task/create-OIDC-configuration-SSO.html) as an OIDC application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a ServiceNow account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application** > **SaaS**.\n3. For **Application**, enter `ServiceNow` and select the corresponding textbox that appears.\n4. For the authentication protocol, select **OIDC**.\n5. Select **Add application**.\n6. In **Scopes**, select the attributes that you want Access to send in the ID token.\n7. In **Redirect URLs**, enter `https://<INSTANCE-NAME>.service-now.com/navpage.do`.\n8. (Optional) Enable [Proof of Key Exchange (PKCE)](https://www.oauth.com/oauth2-servers/pkce/) if the protocol is supported by your IdP. PKCE will be performed on all login attempts.\n9. Copy the **Client secret** and **Client ID**.\n10. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n11. (Optional) In **Experience settings**, configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) by turning on **Enable App in App Launcher** and, in **App Launcher URL**, entering `https://<INSTANCE-NAME>.service-now.com`.\n12. Save the application.\n\n## 2. Add the Multiple Provider Single Sign-On Installer Plugin to ServiceNow\n\n1. In ServiceNow, select **All**.\n2. In the search bar, enter `System Applications`, and under **All Available Applications**, select **All**.\n3. In the search bar, enter `Integration - Multiple Provider Single Sign-On Installer`.\n4. Select **Install**.\n5. Ensure that **Install now** is selected, and select **Install**.\n\n## 3. Add and Test an OIDC SSO provider in ServiceNow\n\n1. Select **All**.\n\n2. In the search bar enter `Multi-Provider SSO`, and select **Identity Providers**.\n\n3. Select **New** > **OpenID Connect**.\n\n4. In the pop-up, fill in the following fields:\n\n   * **Name**: Name of the SSO (for example, `Cloudflare Access`). Unless otherwise configured, users will select this name when signing in to ServiceNow.\n   * **Client ID**: **Client ID** from application configuration in Cloudflare One.\n   * **Client Secret**: **Client Secret** from application configuration in Cloudflare One.\n   * **Well Known Configuration URL**: `https://<TEAM-DOMAIN>.cloudflareaccess.com/cdn-cgi/access/sso/oidc/<CLIENT-ID>/.well-known/openid-configuration`.\n\n5. Select **Import**.\n\n6. Ensure **Active** is turned on\n\n7. Turn on **Show as Login option**, and for **SSO label** enter a label for the user login screen, if desired.\n\n8. Select **Update**.\n\n## 4. Test the integration\n\nFor SSO to appear on the login screen, you must have [account recovery](https://docs.servicenow.com/bundle/washingtondc-platform-security/page/integrate/single-sign-on/concept/sso-acct-recovery.html) enabled and configured for at least one admin account. After account recovery is configured, log out of ServiceNow and open an incognito browser window. Go to your ServiceNow URL. Select the SSO name you just configured, which will prompt you to sign in with your identity provider. When the integration is successful, you can go back to the OIDC configuration screen to turn on **Default** and/or **Auto Redirect IDP**.\n\n</page>\n\n<page>\n---\ntitle: ServiceNow (SAML) · Cloudflare One docs\ndescription: This guide covers how to configure ServiceNow as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/servicenow-saas-saml/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/servicenow-saas-saml/index.md\n---\n\nThis guide covers how to configure [ServiceNow](https://docs.servicenow.com/bundle/washingtondc-platform-security/page/integrate/single-sign-on/task/t_CreateASAML2Upd1SSOConfigMultiSSO.html) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a ServiceNow account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `ServiceNow` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://<INSTANCE-NAME>.service-now.com`\n   * **Assertion Consumer Service URL**: `https://<INSTANCE-NAME>.service-now.com/navpage.do`\n   * **Name ID format**: *Email*\n\n7. Copy the **SAML Metadata endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Add the Multiple Provider Single Sign-On Installer Plugin to ServiceNow\n\n1. In ServiceNow, select **All**.\n2. In the search bar, enter `System Applications`, and under **All Available Applications**, select **All**.\n3. In the search bar, enter `Integration - Multiple Provider Single Sign-On Installer`.\n4. Select **Install**.\n5. Ensure that **Install now** is selected, and select **Install**.\n\n## 3. Add and Test a SAML SSO provider in ServiceNow\n\n1. Select **All**.\n2. In the search bar enter `Multi-Provider SSO`, and select **Identity Providers**.\n3. Select **New** > **SAML**.\n4. In the pop-up, ensure that **URL** is selected.\n5. Paste the **SAML Metadata endpoint** from application configuration in Cloudflare One in the empty field.\n6. Select **Import**.\n7. (Optional) Change the **Name** field to a more recognizable name.\n8. Turn off **Sign AuthnRequest**.\n9. Select **Update**.\n10. In the pop-up, select **Cancel** and then **>**.\n11. Select the **Name** of the configuration you just completed.\n12. Select **Test Connection**.\n13. If the test succeeds, select **Activate**.\n\n</page>\n\n<page>\n---\ntitle: Google Cloud · Cloudflare One docs\ndescription: This guide covers how to configure Google Cloud as a SAML\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/google-cloud-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/google-cloud-saas/index.md\n---\n\nThis guide covers how to configure [Google Cloud](https://support.google.com/cloudidentity/topic/7558767) as a SAML application in Cloudflare One.\n\nWarning\n\nWhen configuring Google Cloud with Access, the following limitations apply:\n\n* Users will not be able to log in using [Google](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/google/) or [Google Workspace](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/google-workspace/) as an identity provider after Google Cloud is configured with Access.\n\n* The integration of Access as a single sign-on provider for your Google Cloud account does not work for Google super admins. It will work for other users.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Google Workspace account\n* [Cloud Identity Free or Premium](https://support.google.com/cloudidentity/answer/7389973) set up in your organization's Google Cloud account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, select *Google Cloud*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `google.com`\n   * **Assertion Consumer Service URL**: `https://www.google.com/a/<your_domain.com>/acs`\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint**, **Access Entity ID or Issuer**, and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Create a x.509 certificate\n\n1. Paste the Public key from application configuration in Cloudflare One into a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n3. Set the file extension as `.crt` and save.\n\n## 3. Create an SSO provider in Google Cloud\n\n1. In your [Google Admin console](https://admin.google.com/), go to **Security** > **Authentication** > **SSO with third party IdP**.\n\n2. Select **Third-party SSO profile for your organization** > **Add SSO Profile**.\n\n3. Turn on **Set up SSO with third-party identity provider**.\n\n4. Fill in the following information:\n\n   * **Sign-in page URL**: SSO endpoint from application configuration in Cloudflare One.\n   * **Sign-out page URL**: `https://<team-name>.cloudflareaccess.com/cdn-cgi/access/logout`, where `<team-name>` is your Cloudflare One team name.\n   * **Verification certificate**: Upload the `.crt` certificate file from step [2. Create a x.509 certificate](#2-create-a-x509-certificate).\n\n5. (Optional) Turn on **Use a domain specific issuer**. If you select this option, Google will send an issuer specific to your Google Cloud domain (`google.com/a/<your_domain.com>` instead of the standard `google.com`).\n\n## 4. Test the integration\n\nOpen an incognito browser window and go to your Google Cloud URL (`https://console.cloud.google.com/a/<your_domain.com>`). Sign in using credentials that do not belong to a super admin account.\n\n## Troubleshooting\n\n`Error: \"G Suite - This account cannot be accessed because the login credentials could not be verified.\"`\n\nIf you see this error, it is likely that the public key and private key do not match. Confirm that your certificate file includes the correct public key.\n\n</page>\n\n<page>\n---\ntitle: Slack · Cloudflare One docs\ndescription: This guide covers how to configure Slack as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/slack-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/slack-saas/index.md\n---\n\nThis guide covers how to configure [Slack](https://slack.com/help/articles/203772216-SAML-single-sign-on) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Slack Business+ or Enterprise Grid plan account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS**.\n\n3. For **Application**, select *Slack*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://slack.com`\n   * **Assertion Consumer Service URL**: `https://<YOUR_DOMAIN>.slack.com/sso/saml`\n   * **Name ID format**: The format expected by Slack, usually *Email*\n\n7. Copy the **SSO endpoint**, **Access Entity ID or Issuer**, and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Create a x.509 certificate\n\n1. Paste the **Public key** in a text editor.\n2. Wrap the certificate in `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n## 3. Add a SAML SSO provider to Slack\n\n* business+ plan\n\n  1. In Slack, go to **Settings & administrations** > **Workspace settings** > **Authentication**.\n\n  2. Select **Configure**.\n\n  3. Turn on **Test**. Configuration changes will not apply until **Configure** is turned on.\n\n  4. Fill in the following fields:\n\n     * **Service Provider Issuer URL**: Ensure set to `https://slack.com`.\n     * **SAML SSO URL**: SSO endpoint from application configuration in Cloudflare One.\n     * **Identity Provider Issuer**: Access Entity ID or Issuer from application configuration in Cloudflare One.\n     * **Public Certificate**: Paste the entire x.509 certificate from step [2. Create a x.509 certificate](#2-create-a-x509-certificate).\n\n  5. Under **Advanced Options**, select **Expand**.\n\n  6. For **AuthnContextClassRef**, ensure *urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport* is selected.\n\n  7. Ensure **Sign the AuthnRequest** is turned off.\n\n  8. For **SAML Response Signing**, turn on **Sign the Response** and **Sign the Assertion**.\n\n  9. In the main configuration page under **Settings**, choose whether SSO is *required*, *partially required*, or *optional* for workspace members.\n\n  10. (Optional) Under **Customize**, enter a **Sign in Button Label**.\n\n  11. Test your set-up. If all works well, turn **Test** to **Configure**.\n\n* enterprise grid plan\n\n  1. In Slack, go to **Settings & administration** > **Organization settings** > **Security** > **SSO Settings**.\n\n  2. For **SSO name**, enter your desired name.\n\n  3. Fill in the following fields:\n\n     * **SAML 2.0 Endpoint URL**: SSO endpoint from application configuration in Cloudflare One.\n     * **Identity Provider Issuer URL**: Access Entity ID or Issuer from application configuration in Cloudflare One.\n     * **Service Provider Issuer URL**: Ensure set to `https://slack.com`.\n     * **x.509 Certificate**: Paste the entire x.509 certificate from step [2. Create a x.509 certificate](#2-create-a-x509-certificate).\n\n  4. For **AuthnContextClassRef**, ensure *urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport* is selected.\n\n  5. Ensure **Sign the AuthnRequest** is turned off.\n\n  6. For **SAML Response Signing**, turn on **Sign the Response** and **Sign the Assertion**.\n\n  7. Select **Test Configuration**.\n\n  8. If all works well, select **Turn on SSO** or **Add SSO**.\n\n</page>\n\n<page>\n---\ntitle: Smartsheet · Cloudflare One docs\ndescription: This guide covers how to configure Smartsheet as a SAML application\n  in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/smartsheet-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/smartsheet-saas/index.md\n---\n\nThis guide covers how to configure [Smartsheet](https://help.smartsheet.com/articles/2483123-domain-level-saml-configuration) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Smartsheet Enterprise account\n* A [domain](https://help.smartsheet.com/articles/2483051-domain-management) verified in Smartsheet\n\nNote\n\nIn Smartsheet, SSO is configured for a domain. If you have multiple plans using the same domain, the SSO configuration will apply to all Smartsheet users in that domain, regardless of their plan type.\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `Smartsheet` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `urn:amazon:cognito:sp:us-east-1_xww1cbP43`\n   * **Assertion Consumer Service URL**: `https://saml.authn.smartsheet.com/saml2/idpresponse`\n   * **Name ID format**: *Unique ID*\n\n7. Copy the **SAML Metadata endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Create and test a SAML SSO provider in Smartsheet\n\n1. In your Smartsheet Admin Center, go to **Settings** > **Authentication** > **Add a SAML IdP**.\n2. In **Other IdP (Customize)**, select **Configure**.\n3. Select **Next**.\n4. Under **XML URL**, paste the SAML Metadata endpoint from application configuration in Cloudflare One.\n5. Under **Name SAML IdP**, enter a name (for example, `Cloudflare Access`).\n6. Select **Save & Next**.\n7. Select **Verify connection** and sign in via Access. If validation is successful, you will see a **SAML IdP Successfully Connected!** message. Close the configuration verification page.\n8. Turn on **I have successfully verified the connection**.\n9. Select **Save & Next**.\n10. Under **Assign domains to SAML IdP**, select your desired domain.\n11. Select **Save and Next** and then **Finish**.\n\n</page>\n\n<page>\n---\ntitle: SparkPost · Cloudflare One docs\ndescription: This guide covers how to configure SparkPost or SparkPost EU as a\n  SAML application in Cloudflare Zero Trust.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/sparkpost-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/sparkpost-saas/index.md\n---\n\nThis guide covers how to configure [SparkPost or SparkPost EU](https://support.sparkpost.com/docs/my-account-and-profile/sso) as a SAML application in Cloudflare Zero Trust.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a SparkPost or SparkPost EU account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `SparkPost` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**:\n\n     * `https://api.sparkpost.com` for SparkPost accounts\n     * `https://api.eu.sparkpost.com` for SparkPost EU accounts\n     * `https://<api-host>` for SparkPost accounts with dedicated tenants\n\n   * **Assertion Consumer Service URL**:\n\n     * `https://api.sparkpost.com/api/v1/users/saml/consume` for SparkPost accounts\n     * `https://api.eu.sparkpost.com/api/v1/users/saml/consume` for SparkPost EU accounts\n     * `https://<api-host>/api/v1/users/saml/consume` for SparkPost accounts with dedicated tenants\n\n   * **Name ID format**: *Email*\n\n7. Copy the **SAML Metadata endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Download the metadata file\n\n1. Paste the SAML metadata endpoint from application configuration in Cloudflare One in a web browser.\n2. Follow your browser-specific steps to download the URL's contents as an `.xml` file.\n\n## 3. Add a SAML SSO provider to SparkPost\n\n1. In SparkPost, select your profile picture > **Account Settings**.\n2. Under **Single Sign-On**, select **Provision SSO**.\n3. Under **Upload your Security Assertion Markup Language (SAML)**, select **select a file** and upload the `.xml` file you created in step [2. Download the metadata file](#2-download-the-metadata-file).\n4. Select **Provision SSO**.\n5. Select **Enable SSO**.\n\n## 4. Add a test user and test the integration\n\n1. In SparkPost, current users must be deleted and re-invited to use SSO. To create a test user, select your profile picture > **Users** > name of the user > **Delete User**. Then, select **Invite User** and fill in the necessary information. Alternatively, invite a new user. An invitation email will be sent.\n2. Go to the link sent in the invitation email. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n3. Once SSO is successful, you can turn on SSO for the rest of your current users by deleting and then re-inviting them.\n\nNote\n\nThe SparkPost SSO login link is `https://app.sparkpost.com/auth/sso`. Alternatively, you can go to the usual sign in page and select **Log in with Single Sign-On**.\n\n</page>\n\n<page>\n---\ntitle: Workday · Cloudflare One docs\ndescription: This guide covers how to configure Workday as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/workday-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/workday-saas/index.md\n---\n\nThis guide covers how to configure [Workday](https://doc.workday.com/admin-guide/en-us/authentication-and-security/authentication/saml/dan1370796470811.html?toc=1.5.1) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Workday account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, enter `Workday` and select the corresponding textbox that appears.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `http://www.workday.com`\n   * **Assertion Consumer Service URL**: `https://<your-environment>.myworkday.com/<your-tenant>/login-saml.flex` for a production account or `https://<your-environment>-impl.myworkday.com/<your-tenant>/login-saml.flex` for a preview sandbox account\n   * **Name ID format**: *Email*\n\n7. Copy the **SSO endpoint**, **Access Entity ID or Issuer**, and **Public key**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Download the metadata file\n\n1. Paste the SAML Metadata endpoint from application configuration in Cloudflare One in a web browser.\n2. Follow your browser-specific steps to download the URL's contents as an `.xml` file.\n\n## 3. Add a SAML SSO provider to Workday\n\n1. In Workday, go to **Account Administration** > **Actions** > **Edit Tenant Setup - Security**.\n\n2. Under **SAML Setup**, turn on **Enable SAML Authentication**.\n\n3. In the **SAML Identity Providers** table, select **+**.\n\n4. Fill in the following fields:\n\n   * **Identity Provider Name**: Your desired name for the identity provider (for example, `Cloudflare Access`)\n   * **Issuer**: Access Entity ID or Issuer from application configuration in Cloudflare One\n   * **IdP SSO Service URL**: SSO endpoint from application configuration in Cloudflare One\n\n5. Under **x509 Certificate**, select the menu icon > **Create x509 Public Key**.\n\n6. Under **Name**, enter a unique name (for example, `access`).\n\n7. Under **Certificate**, paste the Public key from application configuration in Cloudflare One.\n\n8. Select **OK**.\n\n9. If you want to enable SP-initiated login (login initiated by going to your Workday URL), fill in the following fields:\n\n   * **SP Initiated**: Turn on.\n   * **Service Provider ID**: `http://www.workday.com`\n   * **Sign SP-initiated request**: Turn off.\n\n10. Under **Single Sign-On**, add one or both of the following entries to the **Redirection URLs** grid. For each entry, if your user groups will use the same authentication option to sign in, select **Single URL**. If they will use different authentication options, select **Authentication selector**.\n\n    * IdP-initiated SSO: Under **Login Redirect URL**, enter `<your-team-name>.cloudflareaccess.com`.\n    * SP-initiated SSO: Under **Login Redirect URL**, enter `https://<your-environment>/<your-tenant/login-saml2.htmld`.\n\n## 4. Test the integration\n\nNote\n\nIf you encounter a situation where one or more users get locked out of Workday, the user can use this backup URL provided by Workday to sign in with their username and password: `https://<your-workday-url>/login.flex?redirect=n`.\n\n1. In Workday, create an [authentication rule](https://doc.workday.com/admin-guide/en-us/authentication-and-security/authentication/authentication-policies/dan1370796466772.html).\n\n2. Under **Authentication Conditions**, add conditions that will apply only to your test user.\n\n3. Under **Allowed Authentication Types**, select **Specific**, then **SAML**.\n\n4. Select **Done**.\n\n5. Complete the following step:\n\n   * **If you have enabled SP-initiated login**: Open an incognito browser window, go to your Workday URL, and enter your test user's email. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n   * **If you have not enabled SP-initiated login**: Go to your App Launcher at `https://<cloudflare-team-name>.cloudflareaccess.com`. Select the **Workday** tile. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\n6. Once login is successful, you can configure your security settings further, such as adding [user groups](https://doc.workday.com/admin-guide/en-us/authentication-and-security/configurable-security/security-groups/user-based-security-groups/dan1370796695367.html?toc=2.2.12.0) or [authentication rules](https://doc.workday.com/admin-guide/en-us/authentication-and-security/authentication/authentication-policies/dan1370796466772.html) to configure different login rules for different groups of users.\n\n</page>\n\n<page>\n---\ntitle: Tableau Cloud · Cloudflare One docs\ndescription: This guide covers how to configure Tableau Cloud as a SAML\n  application in Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/tableau-saml-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/tableau-saml-saas/index.md\n---\n\nThis guide covers how to configure [Tableau Cloud](https://help.tableau.com/current/online/en-us/saml_config_site.htm) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Tableau Cloud site\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Select **Add an application** > **SaaS**.\n3. For **Application**, select *Tableau*.\n4. For the authentication protocol, select **SAML**.\n5. Select **Add application**.\n6. Copy the **SAML Metadata endpoint**.\n7. Keep this window open. You will finish this configuration in step [4. Finish adding a SaaS application to Cloudflare One](#4-finish-adding-a-saas-application-to-cloudflare-one).\n\n## 2. Download the metadata file\n\n1. Paste the SAML Metadata endpoint from application configuration in Cloudflare One in a web browser.\n2. Follow your browser-specific steps to download the URL's contents as an `.xml` file.\n\n## 3. Add a SAML SSO provider to Tableau Cloud\n\n1. In Tableau Cloud, go to **Settings** > **Authentication**.\n2. Turn on **Enable an additional authentication method**. For **select authentication type**, select *SAML*.\n3. Under **1. Get Tableau Cloud metadata**, copy the **Tableau Cloud entity ID** and **Tableau Cloud ACS URL**.\n4. Under **4. Upload metadata to Tableau**, select **Choose a file**, and upload the `.xml` file created in step [2. Download the metadata file](#2-download-the-metadata-file)\n5. Under **5. Map attributes**, turn on **Full name**. For **Name (full name)**, enter `name`.\n6. (Optional) Choose whether users who are accessing embedded views will **Authenticate in a separate pop-up window** or **Authenticate using an inline frame**.\n7. Select **Save Changes**.\n\n## 4. Finish adding a SaaS application to Cloudflare One\n\n1. In your open Cloudflare One window, fill in the following fields:\n\n   * **Entity ID**: Tableau Cloud entity ID from Tableau Cloud SAML SSO set-up.\n   * **Assertion Consumer Service URL**: Tableau Cloud ACS URL from Tableau Cloud SAML SSO set-up.\n   * **Name ID format**: *Email*\n\n2. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n3. Save the application.\n\n## 5. Test the integration and set default authentication type\n\n1. In Tableau Cloud, go to **Settings** > **Authentication**.\n2. Under **7. Test Configuration**, select **Test Configuration**.\n3. Sign in. If your sign-in is successful, **You are now signed in as (username)** will appear at the top of the page.\n4. Close the pop-up window.\n5. (Optional) Under **Default Authentication Type for Embedded Views**, turn on **cloudflareaccess.com (SAML)**. You can also configure the default authentication type for individual users under **Users** > **Actions** > **Authentication**.\n\n</page>\n\n<page>\n---\ntitle: Zoom · Cloudflare One docs\ndescription: This guide covers how to configure Zoom as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/zoom-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/zoom-saas/index.md\n---\n\nThis guide covers how to configure [Zoom](https://support.zoom.com/hc/en/article?id=zm_kb\\&sysparm_article=KB0060673) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to a Zoom Business, Education, or Enterprise account\n* An [associated domain](https://support.zoom.com/hc/en/article?id=zm_kb\\&sysparm_article=KB0066259) configured in your Zoom account\n* A [vanity URL](https://support.zoom.com/hc/en/article?id=zm_kb\\&sysparm_article=KB0061540) configured in your Zoom account\n\n## 1. Add a SaaS application to Cloudflare One\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **SaaS** > **Select**.\n\n3. For **Application**, select *Zoom*.\n\n4. For the authentication protocol, select **SAML**.\n\n5. Select **Add application**.\n\n6. Fill in the following fields:\n\n   * **Entity ID**: `https://<your-vanity-url>.zoom.us`\n   * **Assertion Consumer Service URL**: `https://<your-vanity-url>.zoom.us/saml/SSO`\n   * **Name ID format**: *Email*\n\n7. Copy the **Access Entity ID or Issuer**, **Public key**, and **SSO endpoint**.\n\n8. Configure [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) for the application.\n\n9. Save the application.\n\n## 2. Add a SAML SSO provider in Zoom\n\n1. In Zoom, go to **Advanced** > **Single Sign-On**.\n\n2. For **Vanity URL**, select the vanity URL you want to configure SSO for.\n\n3. Fill out the following fields:\n\n   * **Sign in page URL**: SSO endpoint from application configuration in Cloudflare One\n   * **Identity Provider Certificate**: Public key from application configuration in Cloudflare One\n   * **Service Provider (SP) Entity ID**: `yourvanityurl.zoom.us` (no `https://`)\n   * **Issuer (DP Entity ID)**: Access Entity ID or Issuer from application configuration in Cloudflare One\n\n4. For **Binding**, select *http-redirect*.\n\n5. For **Signature Hash Algorithm**, ensure **SHA-256** is selected.\n\n6. Under **Security**, turn off **Sign SAML request** and **Sign SAML logout request**.\n\n7. Select **Save Changes**.\n\n8. Go to **Advanced** > **Security**.\n\n9. Under **Sign-in Methods**, ensure **Allow users to sign in with Single Sign-On (SSO)** is turned on.\n\n## 3. Test the integration\n\nOpen an incognito browser window, go to your Zoom vanity URL, and select **Sign in**. You will be redirected to the Cloudflare Access login screen and prompted to sign in with your identity provider.\n\nOnce this is successful, you can require SSO for users in your associated domain(s) by completing the following steps:\n\n1. In Zoom, go to **Advanced** > **Security**.\n2. Under **Sign-in Methods**, turn on **Require users to sign in with SSO if their e-mail address belongs to one of the domains below**.\n3. Under **Select Domains**, turn on the domains that you want to require SSO for.\n4. (Optional) Under **Specify users who can bypass SSO sign-in**, add your desired users.\n5. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Zendesk · Cloudflare One docs\ndescription: This guide covers how to configure Zendesk as a SAML application in\n  Cloudflare One.\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/zendesk-sso-saas/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/zendesk-sso-saas/index.md\n---\n\nThis guide covers how to configure [Zendesk](https://support.zendesk.com/hc/en-us/articles/4408887505690-Enabling-SAML-single-sign-on#topic_u54_wc3_z2b) as a SAML application in Cloudflare One.\n\n## Prerequisites\n\n* An [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) configured in Cloudflare One\n* Admin access to your Zendesk account\n\n## Configure Zendesk and Cloudflare\n\n1. Go to your Zendesk administrator dashboard, typically available at `<yourdomain>.zendesk.com/admin/security/sso`.\n\n2. In a separate tab or window, open [Cloudflare One](https://one.dash.cloudflare.com), select your account, and go to **Access controls** > **Applications**.\n\n3. Select **Add an application**, then choose *SaaS*.\n\n4. Input the following values in the Cloudflare One application configuration:\n\n   | Cloudflare One field | Value |\n   | - | - |\n   | **Entity ID** | `https://<yoursubdomain>.zendesk.com` |\n   | **Assertion Consumer Service URL** | contents of **SAML SSO URL** in Zendesk account |\n   | **Name ID Format** | *Email* |\n\n5. (Optional) Configure these Attribute Statements to include a user's first and last name:\n\n   | Cloudflare attribute name | IdP attribute value |\n   | - | - |\n   | `<first name>` | `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname` |\n   | `<last name>` | `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname` |\n\n   Zendesk will [use the user's email address as their name](https://support.zendesk.com/hc/en-us/articles/203663676#topic_dzb_gl5_2v) if the name is not provided.\n\n6. To determine who can access Zendesk, [create an Access policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/).\n\n7. Copy the **SSO Endpoint** and **Public Key**.\n\n8. Transform the public key into a fingerprint:\n\n   1. Open a [fingerprint calculator](https://www.samltool.com/fingerprint.php).\n\n   2. Paste the **Public Key** into **X.509 cert**.\n\n   3. Wrap the value with `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----`.\n\n   4. Set **Algorithm** to *SHA256* and select **Calculate Fingerprint**.\n\n   5. Copy the **Formatted FingerPrint** value.\n\n9. Add the Cloudflare values to the following Zendesk fields:\n\n   | Cloudflare IdP field | Zendesk field |\n   | - | - |\n   | **SSO Endpoint** | **SAML SSO URL** |\n   | **Public Key** (transformed to fingerprint) | **Certificate Fingerprint** |\n\n10. Go to `https://<yourdomain>.zendesk.com/admin/security/staff_members` and enable **External Authentication** > **Single Sign On**.\n\nUsers should now be able to log in to Zendesk if their Email address exists in the Zendesk user list.\n\n</page>\n\n<page>\n---\ntitle: Arbitrary TCP · Cloudflare One docs\ndescription: Cloudflare Access provides a mechanism for end users to\n  authenticate with their single sign-on (SSO) provider and connect to resources\n  over arbitrary TCP without being on a virtual private network (VPN).\nlastUpdated: 2025-10-23T19:01:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/arbitrary-tcp/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/arbitrary-tcp/index.md\n---\n\nCloudflare Access provides a mechanism for end users to authenticate with their single sign-on (SSO) provider and connect to resources over arbitrary TCP without being on a virtual private network (VPN).\n\n## Requirements\n\n* A Cloudflare account\n* A site active on Cloudflare\n* The `cloudflared` daemon installed on the host and client machines\n\n> Cloudflare Access requires you to first [add a site](https://dash.cloudflare.com/sign-up) to Cloudflare. You can use any site you have registered; the site does not need to be the same one you use for customer traffic and it does not need to match sites in your internal DNS.\n>\n> Adding the site to Cloudflare requires changing your domain's authoritative DNS to point to Cloudflare's nameservers. Once configured, all requests to that hostname will be sent to Cloudflare's network first, where Access policies can be applied.\n\n## **Connect the host to Cloudflare**\n\n### 1. Install the Cloudflare daemon on the host machine\n\nThe Cloudflare daemon, `cloudflared`, will maintain a secure, persistent, outbound-only connection from the machine to Cloudflare. Arbitrary TCP traffic will be proxied over this connection using [Cloudflare Tunnel](https://www.cloudflare.com/products/tunnel/).\n\nFollow [these instructions](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/) to download and install `cloudflared` on the machine hosting the resource.\n\n### 2. Authenticate the Cloudflare daemon\n\nRun the following command to authenticate `cloudflared` into your Cloudflare account.",
      "language": "unknown"
    },
    {
      "code": "`cloudflared` will open a browser window and prompt you to login to your Cloudflare account. If you are working on a machine that does not have a browser, or a browser window does not launch, you can copy the URL from the command-line output and visit the URL in a browser on any machine.\n\nOnce you login, Cloudflare will display the sites that you added to your account. Select the site where you will create a subdomain to represent the resource. For example, if you plan to share the service at `tcp.site.com` select `site.com` from the list.\n\nOnce selected, `cloudflared` will download a wildcard certificate for the site. This certificate will allow `cloudflared` to create a DNS record for a subdomain of the site.\n\n### 3. Secure the subdomain with Cloudflare Access\n\nNext, protect the subdomain you plan to register with a Cloudflare Access policy. Follow [these instructions](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to build a new policy to control who can connect to the resource.\n\nFor example, if you share the resource at `tcp.site.com`, build a policy to only allow your team members to connect to that subdomain.\n\n### 4. Connect the resource to Cloudflare\n\n`cloudflared` can proxy connections to nonstandard ports.\n\nRun the following command to connect the resource to Cloudflare, replacing the `tcp.site.com` and `7870` values with your site and port.",
      "language": "unknown"
    },
    {
      "code": "`cloudflared` will confirm that the connection has been established. The process needs to be configured to stay alive and autostart. If the process is terminated, end users will not be able to connect.\n\n## **Connect from a client machine**\n\n### 1. Install the Cloudflare daemon on the client machine\n\nFollow the same steps above to download and install `cloudflared` on the client desktop that will connect to the resource. `cloudflared` will need to be installed on each user device that will connect.\n\n### 2. Connect to the resource\n\nRun the following command to create a connection from the device to Cloudflare. Any available port can be specified.",
      "language": "unknown"
    },
    {
      "code": "This command can be wrapped as a desktop shortcut so that end users do not need to use the command line.\n\nPoint the client application to the selected port.\n\nWhen the client launches, `cloudflared` will launch a browser window and prompt the user to authenticate with your SSO provider.\n\n**Common issues**\n\n* Ensure that the machine's firewall permits egress on ports 80 and 443, otherwise `cloudflared` will return an error.\n\n</page>\n\n<page>\n---\ntitle: Enable automatic cloudflared authentication · Cloudflare One docs\ndescription: \"When users connect to an Access application through cloudflared,\n  the browser prompts them to allow access by displaying this page:\"\nlastUpdated: 2025-10-27T15:01:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/automatic-cloudflared-authentication/\n  md: https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/automatic-cloudflared-authentication/index.md\n---\n\nWhen users connect to an Access application through `cloudflared`, the browser prompts them to allow access by displaying this page:\n\n![Access request prompt page displayed after logging in with cloudflared.](https://developers.cloudflare.com/_astro/access-screen.BXZJ23p9_2vVJie.webp)\n\nAutomatic `cloudflared` authentication allows users to skip this login page if they already have an active IdP session.\n\nTo enable automatic `cloudflared` authentication:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n2. Locate your application and select **Configure**.\n3. Go to **Advanced settings** > **Browser rendering settings**.\n4. Turn on **Enable automatic cloudflared authentication**.\n5. Select **Save application**.\n\nThis option will still prompt a browser window in the background, but authentication will now happen automatically.\n\n</page>\n\n<page>\n---\ntitle: Set up with Microsoft 365 · Cloudflare One docs\ndescription: This guide will instruct you through setting up Microsoft 365 with\n  Email security via the Cloudflare dashboard.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/api/m365-api/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/api/m365-api/index.md\n---\n\nThis guide will instruct you through setting up Microsoft 365 with Email security via the Cloudflare dashboard.\n\n## Prerequisites\n\nTo use Email security, you will need to have:\n\n* A [Cloudflare account](https://dash.cloudflare.com/sign-up)\n* A [Zero Trust organization](https://developers.cloudflare.com/cloudflare-one/setup/#create-a-zero-trust-organization)\n* A domain to protect\n\n## Enable Email security via the dashboard\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com/) and select **Email security**..\n2. Select **Overview**. Select one of the following options depending on your use case:\n\n* If you have not purchased Email security, select **Contact sales**.\n\n* If you have not associated any integration:\n\n  * Select **Set up**.\n  * Choose **MS Graph API** > **Authorize**.\n  * Refer to [Enable Microsoft integration](#enable-microsoft-integration) to continue the onboarding process.\n\n* If you have associated an integration, but have not connected a domain:\n\n  * Select **Connect a domain**.\n  * Choose **MS Graph API**. Refer to [Connect your domains](#connect-your-domains) to connect your domain(s).\n\n### Enable Microsoft integration\n\nTo enable Microsoft integration:\n\n1. **Configure policy**: Choose how [CASB](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/) interacts with your data. Select **Read-only mode** or **Read-Write mode**. It is recommended that you choose **Read-Write mode**.\n\n2. **Name integration**: Add your integration name, then select **Continue**.\n\n3. **Authorize integration**:\n\n   * Select **Authorize**. Selecting **Authorize** will take you to the Microsoft Sign in page where you will have to enter your email address.\n   * Once you enter your email address, select **Next**.\n   * After selecting **Next**, the system will show a dialog box with a list of requested permissions. Select **Accept** to authorize Email security. Upon authorization, you will be redirected to a page where you can review details and enroll integration.\n\n4. **Review details**: Review your integration details, then:\n\n   * Select **Complete Email security set up** where you will be able to connect your domains and configure auto-moves.\n   * Select **Continue to Email security**.\n\nContinue with [Connect your domains](#connect-your-domains) for the next steps.\n\n### Connect your domains\n\nOn the **Set up Email security** page, you will be able to connect your Microsoft domains. To connect your domains:\n\n1. **Connect domains**: Select at least one domain. Then, select **Continue**.\n2. (Optional) **Modify default scanning**: You can configure which folder Email security can scan.\n3. (Optional - select **Skip for now** to skip this step) **Redirect messages**: Refer to [Auto-moves](https://developers.cloudflare.com/cloudflare-one/email-security/settings/auto-moves/) to learn what auto-moves are, and how to configure auto-moves.\n4. **Review details**: Review your connected domains, then select **Go to Domains**.\n\nYour domains are now connected successfully.\n\n### Connect new domains\n\nTo connect new domains:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), select **Email security**.\n\n2. Select **Settings** > **Domain management** > **Domains**, then select **View**.\n\n3. Select **Add a domain**.\n\n4. Select a method for connecting your mail environment to Email security:\n\n   * If you select **MS Graph API**, refer to [Enable Microsoft integration](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/api/m365-api/#enable-microsoft-integration).\n\n   * If you select BCC/Journaling, choose how to connect your domains:\n\n     * If you select **Integrate with MS**, refer to [Enable Microsoft integration](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/api/m365-api/#enable-microsoft-integration).\n     * If you select **Integrate with Google**, refer to [Connect your domains](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/bcc-setup/gmail-bcc-setup/connect-domains/).\n     * If you select **Manual add**, refer to [Enter domain manually](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/journaling-setup/manual-add/#enter-domain-manually).\n\n## Prevent Cloudflare from scanning a domain\n\nIf you want to prevent Cloudflare from scanning a domain:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), select **Email security**.\n2. Go to **Settings** > **Domain management** > **Domains**, then select **View**.\n3. On the **Domain management** page, select the domain you do not want to be scanned.\n4. Select the three dots > **Stop scanning**.\n\n## View an integration\n\nTo view the integration for each connected domain:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), select **Email security**.\n2. Go to **Settings** > **Domain management** > **Domains**, then select **View**.\n3. Select a domain.\n4. Select the three dots > **View integration**.\n\nOnce you have set up Email security to scan through your inbox, Email security will display detailed information about your inbox. Refer to [Monitor your inbox](https://developers.cloudflare.com/cloudflare-one/email-security/monitoring/) to learn more.\n\n## Verify successful deployment\n\nTo verify that the deployment has been successful and that your emails are being scanned:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), select **Email security**.\n2. Go to **Settings** > **Domain management** > **Domains**, then select **View**.\n3. Under **Your domains**, locate your domain, and verify that **Status** (which describes the state of the configuration) displays **Active**.\n\n## Next steps\n\n[Enable logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/enable-logs/) to send detection data to an endpoint of your choice.\n\n</page>\n\n<page>\n---\ntitle: BCC setup · Cloudflare One docs\nlastUpdated: 2024-10-09T17:05:34.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/bcc-setup/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/bcc-setup/index.md\n---\n\n* [Gmail BCC setup](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/bcc-setup/gmail-bcc-setup/)\n* [Microsoft Exchange BCC setup](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/bcc-setup/bcc-microsoft-exchange/)\n\n</page>\n\n<page>\n---\ntitle: Journaling setup · Cloudflare One docs\nlastUpdated: 2024-10-09T17:05:34.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/journaling-setup/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/journaling-setup/index.md\n---\n\n* [Microsoft 365 journaling setup](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/journaling-setup/m365-journaling/)\n* [Manually add domains](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/journaling-setup/manual-add/)\n\n</page>\n\n<page>\n---\ntitle: Cisco - Cisco as MX Record · Cloudflare One docs\ndescription: In this tutorial, you will learn how to configure Email security\n  with Cisco as MX record.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/cisco-mx/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/cisco-mx/index.md\n---\n\n![A schematic showing where Email security is in the life cycle of an email received](https://developers.cloudflare.com/_astro/Cisco_to_Cisco_MX_Inline.T2fNxiw3_Z8JDhB.webp)\n\nIn this tutorial, you will learn how to configure Email security with Cisco as MX record.\n\n## 1. Add a Sender Group for Email security Email Protection IPs\n\nTo add a new Sender Group:\n\n1. Go to **Mail Policies** > **HAT Overview**.\n\n2. Select the **Add Sender Group** button.\n\n3. Configure the new Sender Group as follows:\n\n   * **Name**: `Email security`.\n   * **Order**: Order above the existing **WHITELIST** sender group.\n   * **Comment**: `Email security Email Protection egress IP Addresses`.\n   * **Policy**: `TRUSTED` (by default, spam detection is disabled for this mail flow policy).\n   * **SBRS**: Leave blank.\n   * **DNS Lists**: Leave blank.\n   * **Connecting Host DNS Verification**: Leave all options unchecked.\n\n4. Select **Submit and Add Senders**, and add the IP addresses mentioned in [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/). If you need to process emails in the EU or India regions for compliance purposes, add those IP addresses as well.\n\n## 2. Add SMTP route for the Email security Email Protection Hosts\n\nTo add a new SMTP Route:\n\n1. Go to **Network** > **SMTP Routes**.\n\n2. Select **Add Route**.\n\n3. Configure the new SMTP Route as follows:\n\n   * **Receiving Domain**: `a1s.mailstream`\n   * In **Destination Hosts**, select **Add Row**, and add the Email security MX hosts. Refer to the [Geographic locations](#5-geographic-locations) table for more information on which MX hosts to use.\n\n## 3. Create Incoming Content Filters\n\nTo manage the mail flow between Email security and Cisco ESA, you need two filters:\n\n* One to direct all incoming messages to Email security.\n* One to recognize messages coming back from Email security to route for normal delivery.\n\n### Incoming Content Filter - To Email security\n\nTo create a new Content Filter:\n\n1. Go to **Mail Policies** > **Incoming Content Filters**.\n\n2. Select **Add Filter** to create a new filter.\n\n3. Configure the new Incoming Content Filter as follows:\n\n   * **Name**: `ESA_to_A1S`\n\n   * **Description**: `Redirect messages to Email security for anti-phishing inspection`\n\n   * **Order**: This will depend on your other filters.\n\n   * **Condition**: No conditions.\n\n   * **Actions**:\n\n     * For **Action** select **Send to Alternate Destination Host**.\n     * For **Mail Host** input `a1s.mailstream` (the SMTP route configured in step 2).\n\n### Incoming Content Filter - From Email security\n\nTo create a new Content Filter:\n\n1. Go to **Mail Policies** > **Incoming Content Filters**.\n\n2. Select the **Add Filter** button to create a new filter.\n\n3. Configure the new Incoming Content Filter as follows:\n\n   * **Name**: `A1S_to_ESA`\n   * **Description**: `Email security inspected messages for final delivery`\n   * **Order**: This filter must come before the previously created filter.\n   * **Conditions**: Add conditions of type **Remote IP/Hostname** with all the IP addresses mentioned in [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/). For example:\n\n   | Order | Condition | Rule |\n   | - | - | - |\n   | `1` | `Remote IP/Hostname` | `Remote IP/Hostname` |\n   | `2` | `Remote IP/Hostname` | `52.89.255.11` |\n   | `3` | `Remote IP/Hostname` | `52.0.67.109` |\n   | `4` | `Remote IP/Hostname` | `54.173.50.115` |\n   | `5` | `Remote IP/Hostname` | `104.30.32.0/19` |\n   | `6` | `Remote IP/Hostname` | `158.51.64.0/26` |\n   | `7` | `Remote IP/Hostname` | `158.51.65.0/26` |\n\n   * Ensure that the *Apply rule:* dropdown is set to **If one or more conditions match**.\n\n   * **Actions**: Select **Add Action**, and add the following:\n\n     | Order | Action | Rule |\n     | - | - | - |\n     | --1 | `Skip Remaining Content Filters (Final Action)` | `skip-filters()` |\n\n## 4. Add the Incoming Content Filter to the Inbound Policy table\n\nAssign the Incoming Content Filters created in [step 3](#3-create-incoming-content-filters) to your primary mail policy in the Incoming Mail Policy table. Then, commit your changes to activate the email redirection.\n\n## 5. Geographic locations\n\nWhen configuring the Email security MX records, it is important to configure hosts with the correct MX priority. This will allow mail flows to the preferred hosts and fail over as needed.\n\nChoose from the following Email security MX hosts, and order them by priority. For example, if you are located outside the US and want to prioritize email processing in the EU, add `mailstream-eu1.mxrecord.io` as your first host, and then the US servers.\n\n| Host | Location | Note |\n| - | - | - |\n| | US | Best option to ensure all email traffic processing happens in the US. |\n| `mailstream-eu1.mxrecord.io` | EU | Best option to ensure all email traffic processing happens in Germany, with backup to US data centers. |\n| `mailstream-bom.mxrecord.mx` | India | Best option to ensure all email traffic processing happens within India. |\n| `mailstream-india-primary.mxrecord.mx` | India | Same as `mailstream-bom.mxrecord.mx`, with backup to US data centers. |\n| `mailstream-asia.mxrecord.mx` | India | Best option to ensure all email traffic processing happens in India, with Australia data centers as backup. |\n| `mailstream-syd.area1.cloudflare.net` | Australia / New Zealand | Best option to ensure all email traffic processing happens within Australia. |\n| `mailstream-australia-primary.area1.cloudflare.net` | Australia / New Zealand | Best option to ensure all email traffic processing happens in Australia, with India and US data centers as backup. |\n\n## 6. Set up MX/Inline\n\nNow that you have completed the prerequisite steps, set up MX/Inline on the Cloudflare dashboard. Refer to [Set up MX/Inline deployment](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/mx-inline-deployment-setup/) for the next steps.\n\n</page>\n\n<page>\n---\ntitle: Cisco - Email security as MX Record · Cloudflare One docs\ndescription: In this tutorial, you will learn how to configure Cisco IronPort\n  with Email security as MX record.\nlastUpdated: 2025-12-08T21:48:49.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/cisco-email-security-mx/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/cisco-email-security-mx/index.md\n---\n\n![A schematic showing where Email security sits in the life cycle of an email received](https://developers.cloudflare.com/_astro/Cisco_to_Email_Security_MX_Inline.CY054jTO_FRn0w.webp)\n\nIn this tutorial, you will learn how to configure Cisco IronPort with Email security as MX record.\n\n## Prerequisites\n\nTo ensure changes made in this tutorial take effect quickly, update the Time to Live (TTL) value of the existing MX records on your domains to five minutes. Do this on all the domains you will be deploying.\n\nChanging the TTL value instructs DNS servers on how long to cache this value before requesting an update from the responsible nameserver. You need to change the TTL value before changing your MX records to Email security. This will ensure that changes take effect quickly and can also be reverted quickly if needed. If your DNS manager does not allow for a TTL of five minutes, set it to the lowest possible setting.\n\nNote\n\nMake TTL changes a few days before the production update, and wait at least as long as the old TTL values before making the update, since some senders might still be using the old cached values.\n\nTo check your existing TTL, open a terminal window and run the following command against your domain:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "In the above example, TTL is shown in seconds as `300` (or five minutes).\n\nIf you are using Cloudflare for DNS, you can leave the [TTL setting as **Auto**](https://developers.cloudflare.com/dns/manage-dns-records/reference/ttl/).\n\nBelow is a list with instructions on how to edit MX records for some popular services:\n\n* **Cloudflare**: [Set up email records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/email-records/)\n* **GoDaddy**: [Edit an MX Record](https://www.godaddy.com/help/edit-an-mx-record-19235)\n* **AWS**: [Creating records by using the Amazon Route 53 console](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html)\n* **Azure**: [Create DNS records in a custom domain for a web app](https://learn.microsoft.com/en-us/azure/dns/dns-web-sites-custom-domain)\n\n## 1. Add a Sender Group for Email security Email Protection IPs\n\nTo add a new Sender Group:\n\n1. Go to **Mail Policies** > **HAT Overview**.\n\n2. Select **Add Sender Group**.\n\n3. Configure the new Sender Group as follows:\n\n   * **Name**: `Email security`.\n   * **Order**: Order above the existing **WHITELIST** sender group.\n   * **Comment**: `Email security Email Protection egress IP Addresses`.\n   * **Policy**: `TRUSTED` (by default, spam detection is disabled for this mail flow policy).\n   * **SBRS**: Leave blank.\n   * **DNS Lists**: Leave blank.\n   * **Connecting Host DNS Verification**: Leave all options unchecked.\n\n4. Select **Submit and Add Senders** and add the IP addresses mentioned in [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/)\n\n## 2. Configure Incoming Relays\n\nYou need to configure the Incoming Relays section to tell IronPort to ignore upstream hops, since all the connections are now coming from Email security. This step is needed so the IronPort can retrieve the original IPs to calculate IP reputation. IronPort also uses this information in the Anti-Spam (IPAS) scoring of messages.\n\n1. To enable the Incoming Relays Feature, select **Network** > **Incoming Relays**.\n2. Select **Enable** and commit your changes.\n3. Now, you will have to add an Incoming Relay. Select **Network** > **Incoming Relays**.\n4. Select **Add Relay** and give your relay a name.\n5. Enter the IP address of the MTA, MX, or other machine that connects to the email gateway to relay incoming messages. You can use IPv4 or IPv6 addresses.\n6. Specify the `Received:` header that will identify the IP address of the original external sender.\n7. Commit your changes.\n\n## 3. Disable SPF checks\n\nMake sure you disable Sender Policy Framework (SPF) checks in IronPort. Because Email security is acting as the MX record, if you do not disable SPF checks, IronPort will block emails due to an SPF failure.\n\nRefer to [Cisco's documentation](https://www.cisco.com/c/en/us/support/docs/security/email-security-appliance/117973-faq-esa-00.html) for more information on how to disable SPF checks.\n\n## 4. Set up MX/Inline\n\nNow that you have completed the prerequisite steps, set up MX/Inline on the Cloudflare dashboard. Refer to [Set up MX/Inline deployment](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/mx-inline-deployment-setup/) for the next steps.\n\n</page>\n\n<page>\n---\ntitle: Google Workspace as MX Record · Cloudflare One docs\ndescription: In this tutorial, you will learn how to configure Google Workspace\n  with Email security as MX record.\nlastUpdated: 2025-12-08T21:48:49.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/gsuite-email-security-mx/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/gsuite-email-security-mx/index.md\n---\n\n![A schematic showing where Email security is in the life cycle of an email received](https://developers.cloudflare.com/_astro/Email_Security_Gmail_MX_Inline.BySaw74N_l8qzh.webp)\n\nIn this tutorial, you will learn how to configure Google Workspace with Email security as MX record.\n\n## Prerequisites\n\nTo ensure changes made in this tutorial take effect quickly, update the Time to Live (TTL) value of the existing MX records on your domains to five minutes. Do this on all the domains you will be deploying.\n\nChanging the TTL value instructs DNS servers on how long to cache this value before requesting an update from the responsible nameserver. You need to change the TTL value before changing your MX records to Email security. This will ensure that changes take effect quickly and can also be reverted quickly if needed. If your DNS manager does not allow for a TTL of five minutes, set it to the lowest possible setting.\n\nNote\n\nMake TTL changes a few days before the production update, and wait at least as long as the old TTL values before making the update, since some senders might still be using the old cached values.\n\nTo check your existing TTL, open a terminal window and run the following command against your domain:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "In the above example, TTL is shown in seconds as `300` (or five minutes).\n\nIf you are using Cloudflare for DNS, you can leave the [TTL setting as **Auto**](https://developers.cloudflare.com/dns/manage-dns-records/reference/ttl/).\n\nBelow is a list with instructions on how to edit MX records for some popular services:\n\n* **Cloudflare**: [Set up email records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/email-records/)\n* **GoDaddy**: [Edit an MX Record](https://www.godaddy.com/help/edit-an-mx-record-19235)\n* **AWS**: [Creating records by using the Amazon Route 53 console](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html)\n* **Azure**: [Create DNS records in a custom domain for a web app](https://learn.microsoft.com/en-us/azure/dns/dns-web-sites-custom-domain)\n\n## Requirements\n\n* Provisioned Email security account.\n* Access to the Google administrator console ([Google administrator console](https://admin.google.com/) > **Apps** > **Google Workspace** > **Gmail**).\n* Access to the domain nameserver hosting the MX records for the domains that will be processed by Email security.\n\n## 1. Set up Inbound Email Configuration\n\nSet up [Inbound Email Configuration](https://support.google.com/a/answer/60730?hl=en) with the following details:\n\n* In **Gateway IPs**, select the **Add** link, and add the IPs mentioned in [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/).\n* Select **Automatically detect external IP (recommended)**.\n* Select **Require TLS for connections from the email gateways listed above**.\n* Do not select **Reject all mail not from gateway IPs**. You will enable this option at a later time to ensure your mail flows.\n* Select **SAVE**.\n\n## 2. (Optional) Set up an email quarantine\n\n[Set up an email quarantine](https://support.google.com/a/answer/6104172?hl=en#add-new-quarantine) with the following details:\n\n* **Name**: Email security Malicious.\n* **Description**: Email security Malicious.\n* For the **Inbound denial consequence**, select **Drop message**.\n* For the **Outbound denial consequence**, select **Drop message**.\n* Select **SAVE**.\n\nTo access the newly created quarantine, select **GO TO ADMIN QUARANTINE** or access the quarantine directly by pointing your browser to <https://email-quarantine.google.com/adminreview>.\n\n## 3. (Optional) Create a content compliance filter\n\nGo to **Compliance**, and create a [content compliance filter](https://support.google.com/a/answer/1346934?hl=en#zippy=%2Cstep-go-to-gmail-compliance-settings-in-the-google-admin-console%2Cstep-enter-email-messages-to-affect) to send malicious messages to quarantine. Enter the following details:\n\n* **Content compliance**: Add `Quarantine Email security Malicious`.\n\n* **Email messages to affect**: Select **Inbound**.\n\n* **Add expressions that describe the content you want to search for in each message**:\n\n  * Select **Add** to add the condition.\n  * In **Simple content match**, select **Advanced content match**.\n  * In **Location**, select **Full headers**.\n  * In **Match type**, select **Contains text**.\n  * In **Content**, enter `X-CFEmailSecurity-Disposition: MALICIOUS`.\n  * Select **SAVE** to save the condition.\n\n* If the above expression match, do the following, select **Quarantine message** and the **Email security Malicious** quarantine that was created in the previous step.\n\n* Select **SAVE**.\n\nIf you would like to quarantine the other dispositions, repeat the above steps and use the following strings for the other dispositions:\n\n* `X-CFEmailSecurity-Disposition: BULK`\n* `X-CFEmailSecurity-Disposition: SPOOF`\n* `X-CFEmailSecurity-Disposition: UCE` (`UCE` is the equivalent of `SPAM`)\n\nIf desired, you can create a separate quarantine for each of the dispositions.\n\n## 4. Set up MX/Inline\n\nNow that you have completed the prerequisite steps, set up MX/Inline on the Cloudflare dashboard. Refer to [Set up MX/Inline deployment](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/mx-inline-deployment-setup/) for the next steps.\n\n## 5. (Recommended) Secure Google Workspace from MX records bypass\n\nOne method of a DNS attack is to search for old MX records and send phishing emails directly to the mail server. To secure the email flow, you should enforce an email flow where inbound messages are accepted by Google Workspace only when they originate from Email security. This can be done by adding a connector to only allow email from Email security with TLS encryption. This step is optional but recommended.\n\nImportant\n\nThis step should not be performed until 72 hours after all domains in your Google Workspace have been onboarded to Email security, and Email security is their MX record. If a domain has not been onboarded or DNS is still propagating, you will impact production email flow for that domain.\n\nAfter 72 hours, the MX record DNS update will have sufficiently propagated across the Internet. It is now safe to secure your email flow. This will ensure that Google Workspace only accepts messages that are first received by Email security. This step is highly recommended to prevent threat actors from using cached MX entries to bypass Email security by injecting messages directly into Google Workspace.\n\n1. Access the [Google Administrative Console](https://admin.google.com/), then select **Apps** > **Google Workspace** > **Gmail**.\n\n2. Select **Spam, Phishing and Malware**.\n\n3. Go to **Inbound gateway** and select **Edit Inbound gateway**.\n\n4. Enable **Reject all mail not from gateway IPs** and select **Save**.\n\n5. Select **Save** once more to commit and activate the configuration change in the Gmail advanced configuration console.\n\n</page>\n\n<page>\n---\ntitle: Microsoft 365 as MX Record · Cloudflare One docs\ndescription: In this tutorial, you will learn how to configure Microsoft 365\n  with Email security as its MX record.\nlastUpdated: 2025-12-08T21:48:49.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/m365-email-security-mx/\n  md: https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/prerequisites/m365-email-security-mx/index.md\n---\n\n![A schematic showing where Email security is in the life cycle of an email received](https://developers.cloudflare.com/_astro/Email_security_M365_MX_Inline.BeUQoQiv_ddJQS.webp)\n\nIn this tutorial, you will learn how to configure Microsoft 365 with Email security as its MX record.\n\n## Prerequisites\n\nTo ensure changes made in this tutorial take effect quickly, update the Time to Live (TTL) value of the existing MX records on your domains to five minutes. Do this on all the domains you will be deploying.\n\nChanging the TTL value instructs DNS servers on how long to cache this value before requesting an update from the responsible nameserver. You need to change the TTL value before changing your MX records to Email security. This will ensure that changes take effect quickly and can also be reverted quickly if needed. If your DNS manager does not allow for a TTL of five minutes, set it to the lowest possible setting.\n\nNote\n\nMake TTL changes a few days before the production update, and wait at least as long as the old TTL values before making the update, since some senders might still be using the old cached values.\n\nTo check your existing TTL, open a terminal window and run the following command against your domain:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "In the above example, TTL is shown in seconds as `300` (or five minutes).\n\nIf you are using Cloudflare for DNS, you can leave the [TTL setting as **Auto**](https://developers.cloudflare.com/dns/manage-dns-records/reference/ttl/).\n\nBelow is a list with instructions on how to edit MX records for some popular services:\n\n* **Cloudflare**: [Set up email records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/email-records/)\n* **GoDaddy**: [Edit an MX Record](https://www.godaddy.com/help/edit-an-mx-record-19235)\n* **AWS**: [Creating records by using the Amazon Route 53 console](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html)\n* **Azure**: [Create DNS records in a custom domain for a web app](https://learn.microsoft.com/en-us/azure/dns/dns-web-sites-custom-domain)\n\n## 1. Add Email security IP addresses to Allow List\n\n1. Go to the [Anti-spam policies page](https://security.microsoft.com/antispam) > Select **Edit connection filter policy**.\n\n2. In **Always allow messages from the following IP addresses or address range**, add IP addresses and CIDR blocks mentioned in the [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/) page.\n\n3. Select **Save**.\n\n4. Microsoft recommends disabling SPF Hard fail when an email solution is placed in front of it:\n\n   * Return to the [Anti-spam option](https://security.microsoft.com/antispam).\n   * Select **Default anti-spam policy**.\n   * Select **[Edit spam threshold and properties](https://learn.microsoft.com/en-us/defender-office-365/anti-spam-bulk-complaint-level-bcl-about)** > **Mark as spam** > **SPF record: hard fail**, and ensure it is set to **Off**.\n\n5. Select **Save**.\n\n## 2. Configure Enhanced Filtering\n\n### Create an inbound connector\n\n1. [Set up a connector](https://learn.microsoft.com/en-us/exchange/mail-flow-best-practices/use-connectors-to-configure-mail-flow/set-up-connectors-to-route-mail#1-set-up-a-connector-from-your-email-server-to-microsoft-365-or-office-365).\n\n2. Select **Partner organization** under **Connection from**.\n\n   * Provide a name for the connector:\n\n     * **Name**: `Email security Inbound Connector`\n     * **Description**: `Inbound connector for Enhanced Filtering`\n\n3. In **Authenticating sent email**, select **By verifying that the IP address of the sending server matches one of the following IP addresses, which belongs to your partner organization.**\n\n4. Enter all of the egress IPs in the [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/) page.\n\n5. In **Security restrictions**, accept the default **Reject email messages if they aren't sent over TLS** setting.\n\n### Enable enhanced filtering\n\nNow that the inbound connector has been configured, you will need to enable the enhanced filtering configuration of the connector.\n\n1. Go to the [Security admin console](https://security.microsoft.com/homepage), and [enable enhanced filtering](https://learn.microsoft.com/en-us/exchange/mail-flow-best-practices/use-connectors-to-configure-mail-flow/enhanced-filtering-for-connectors#use-the-microsoft-defender-portal-to-configure-enhanced-filtering-for-connectors-on-an-inbound-connector).\n2. Select **Automatically detect and skip the last IP address** and **Apply to entire organization**.\n3. Select **Save**.\n\n## 3. Configure anti-spam policies\n\nTo configure anti-spam policies:\n\n1. Open the [Microsoft 365 Defender console](https://security.microsoft.com/).\n2. Go to **Email & collaboration** > **Policies & rules**.\n3. Select **Threat policies**.\n4. Under **Policies**, select **Anti-spam**.\n5. Select the **Anti-spam inbound policy (Default)** text (not the checkbox).\n6. In **Actions**, scroll down and select **Edit actions**.\n7. Set the following conditions and actions (you might need to scroll up or down to find them):\n\n* **Spam**: *Move messages to Junk Email folder*.\n* **High confidence spam**: *Quarantine message*.\n  * **Select quarantine policy**: *AdminOnlyAccessPolicy*.\n* **Phishing**: *Quarantine message*.\n  * **Select quarantine policy**: *AdminOnlyAccessPolicy*.\n* **High confidence phishing**: *Quarantine message*.\n  * **Select quarantine policy**: *AdminOnlyAccessPolicy*.\n* **Retain spam in quarantine for this many days**: Default is 15 days. Email security recommends 15-30 days.\n  * Select the spam actions in the above step:\n\n1. Select **Save**.\n\n## 4. Create transport rules\n\nTo create the transport rules that will send emails with certain [dispositions](https://developers.cloudflare.com/cloudflare-one/email-security/reference/dispositions-and-attributes/#dispositions) to Email security:\n\n1. Open the new [Exchange admin center](https://admin.exchange.microsoft.com/#/homepage).\n\n2. Go to **Mail flow** > **Rules**.\n\n3. Select **Add a Rule** > **Create a new rule**.\n\n4. Set the following rule conditions:\n\n   * **Name**: *Email Security Deliver to Junk Email folder*.\n\n   * **Apply this rule if**: *The message headers* > *includes any of these words*.\n\n     * **Enter text**: `X-CFEmailSecurity-Disposition` > **Save**.\n     * **Enter words**: `BULK` > **Add** > **Save**.\n\n   * **Apply this rule if**: Select **+** to add a second condition.\n\n   * **And**: *The sender* > *IP address is in any of these ranges or exactly matches* > enter the egress IPs mentioned in [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/).\n\n   * **Do the following** - *Modify the message properties* > *Set the Spam Confidence Level (SCL)* > *5*.\n\n5. Select **Next**.\n\n6. You can use the default values on this screen. Select **Next**.\n\n7. Review your settings and select **Finish** > **Done**.\n\n8. Select the rule **Email security Deliver to Junk Email folder** you have just created, and **Enable**.\n\n9. Select **Add a Rule** > **Create a new rule**.\n\n10. Set the following rule conditions:\n\n    * **Name**: `Email security Deliver to Junk Email folder`.\n\n    * **Apply this rule if**: *The message headers* > *includes any of these words*.\n\n      * **Enter text**: `X-CFEmailSecurity-Disposition` > **Save**.\n      * **Enter words**: `MALICIOUS`, `UCE`, `SPOOF` > **Add** > **Save**.\n\n    * **Apply this rule if**: Select **+** to add a second condition.\n\n    * **And**: *The sender* > *IP address is in any of these ranges or exactly matches* > enter the egress IPs in the [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/).\n\n    * **Do the following**: *Redirect the message to* > *hosted quarantine*.\n\n11. Select **Next**.\n\n12. You can use the default values on this screen. Select **Next**.\n\n13. Review your settings and select **Finish** > **Done**.\n\n14. Select the rule you have just created, and select **Enable**.\n\n## 5. Set up MX/Inline\n\nNow that you have completed the prerequisite steps, set up MX/Inline on the Cloudflare dashboard. Refer to [Set up MX/Inline deployment](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/mx-inline-deployment-setup/) for the next steps.\n\n## 6. (Recommended) Secure Microsoft 365 from MX records bypass\n\nOne method of a DNS attack is to search for old MX records and send phishing emails directly to the mail server. To secure the email flow, you should enforce an email flow where inbound messages are accepted by Microsoft 365 only when they originate from Email security. This can be done by adding a connector to only allow email from Email security with TLS encryption. This step is optional but recommended.\n\nImportant\n\nThis step should not be performed until 72 hours after all domains in your Microsoft 365 organization have been onboarded to Email security, and Email security is their MX record. If a domain has not been onboarded or DNS is still propagating, you will impact production email flow for that domain.\n\n#### Create Connector\n\n1. Go to the new [Exchange admin center](https://admin.exchange.microsoft.com/#/homepage).\n\n2. Go to **Mail flow** > **Connectors**.\n\n3. Select **Add a connector**.\n\n4. Go to **Connection from** > **Partner organization**.\n\n5. Select **Next**.\n\n6. Set the following options:\n\n   * **Name** - `Secure M365 Inbound`\n   * **Description** - `Only accept inbound email from Email security`\n\n7. Select **Next**.\n\n8. Make sure **By Verifying that the sender domain matches one of the following domains** is selected.\n\n9. Enter `*` in the text field, and select **+**.\n\n10. Select **Next**.\n\n11. Make sure **Reject email messages if they aren't sent over TLS** is selected.\n\n12. Still in the same screen, select **Reject email messages if they aren't sent from within this IP address range**, and enter all the egress IPs in the [Egress IPs](https://developers.cloudflare.com/cloudflare-one/email-security/setup/pre-delivery-deployment/egress-ips/) page.\n\n13. Select **Next**.\n\n14. Review your settings and select **Create connector**.\n\n</page>\n\n<page>\n---\ntitle: Cipher suites · Cloudflare One docs\ndescription: Cloudflare Tunnel connections use the cipher suites supported by\n  cloudflared, which relies on the Go TLS library for its TLS implementation.\n  These cipher suites apply to both the TLS connection between Cloudflare's\n  network and cloudflared, and the HTTPS connection between cloudflared and your\n  origin. In both cases, cloudflared negotiates the most secure cipher suite\n  supported by both sides.\nlastUpdated: 2025-10-29T16:39:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cipher-suites/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cipher-suites/index.md\n---\n\nCloudflare Tunnel connections use the cipher suites supported by `cloudflared`, which relies on the Go TLS library for its TLS implementation. These cipher suites apply to both the TLS connection between Cloudflare's network and `cloudflared`, and the HTTPS connection between `cloudflared` and your origin. In both cases, `cloudflared` negotiates the most secure cipher suite supported by both sides.\n\nThe following table lists the cipher suites supported by `cloudflared`:\n\n| Protocol support | Cipher suites |\n| - | - |\n| TLS 1.3 only | `TLS_AES_128_GCM_SHA256` `TLS_AES_256_GCM_SHA384` `TLS_CHACHA20_POLY1305_SHA256` |\n| TLS 1.2 only | `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256` `TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384` `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256` `TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384` `TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256` `TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256` |\n| Up to and including TLS 1.2 | `TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA` `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA` `TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA` `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA` |\n\n</page>\n\n<page>\n---\ntitle: Configure cloudflared parameters · Cloudflare One docs\ndescription: Remotely-managed tunnels run as a service on your OS. You can\n  modify the Cloudflare Tunnel service with one or more general-purpose tunnel\n  parameters.\nlastUpdated: 2025-12-01T16:08:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/index.md\n---\n\nRemotely-managed tunnels run as a service on your OS. You can modify the Cloudflare Tunnel service with one or more [general-purpose tunnel parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/).\n\nNote\n\nFor instructions on configuring a locally-managed tunnel, refer to the [configuration file documentation](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/configuration-file/).\n\n## Update tunnel run parameters\n\n* Linux\n\n  On Linux, Cloudflare Tunnel installs itself as a system service using `systemctl`. By default, the service will be named `cloudflared.service`. To configure your tunnel on Linux:\n\n  1. Open `cloudflared.service`.",
      "language": "unknown"
    },
    {
      "code": "2. Modify the `cloudflared tunnel run` command with the desired configuration flag. For example,",
      "language": "unknown"
    },
    {
      "code": "3. Restart `cloudflared.service`:",
      "language": "unknown"
    },
    {
      "code": "4. To verify the new configuration, check the service status:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "* macOS\n\n  On macOS, Cloudflare Tunnel installs itself as a launch agent using `launchctl`. By default, the agent will be called `com.cloudflare.cloudflared`. To configure your tunnel on macOS:\n\n  1. Stop the `cloudflared` service.",
      "language": "unknown"
    },
    {
      "code": "2. Unload the configuration file.",
      "language": "unknown"
    },
    {
      "code": "3. Open `/Library/LaunchDaemons/com.cloudflare.cloudflared.plist` in a text editor.\n\n  4. Modify the `ProgramArguments` key with the desired configuration flag. For example,",
      "language": "unknown"
    },
    {
      "code": "5. Load the updated configuration file.",
      "language": "unknown"
    },
    {
      "code": "6. Start the `cloudflared` service.",
      "language": "unknown"
    },
    {
      "code": "* Windows\n\n  On Windows, Cloudflare Tunnel installs itself as a system service using the Registry Editor. By default, the service will be named `cloudflared`. To configure your tunnel on Windows:\n\n  1. Open the Registry Editor.\n\n  2. Go to **HKEY\\_LOCAL\\_MACHINE** > **SYSTEM** > **CurrentControlSet** > **Services** > **cloudflared**.\n\n  3. Double-click **ImagePath**.\n\n  4. Modify **Value data** with the desired configuration flag. For example,",
      "language": "unknown"
    },
    {
      "code": "![Modify cloudflared service in the Registry Editor](https://developers.cloudflare.com/_astro/remote-management-windows.BFUIIr2f_FjUR8.webp)\n\n## Update origin configuration\n\nTo configure how `cloudflared` sends requests to your [published applications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/):\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n2. Choose a tunnel and select **Edit**.\n3. Select the **Published application routes** tab.\n4. Choose an application and select **Edit**.\n5. Under **Additional application settings**, modify one or more [origin configuration parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/).\n6. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Tunnel permissions · Cloudflare One docs\ndescription: A remotely-managed tunnel only requires the tunnel token to run.\n  Anyone with access to the token will be able to run the tunnel.\nlastUpdated: 2025-10-27T16:36:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/remote-tunnel-permissions/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/remote-tunnel-permissions/index.md\n---\n\nA remotely-managed tunnel only requires the tunnel token to run. Anyone with access to the token will be able to run the tunnel.\n\n## Get the tunnel token\n\nTo get the token for a remotely-managed tunnel:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n  2. Select a `cloudflared` tunnel and select **Edit**.\n  3. Copy the `cloudflared` installation command.\n  4. Paste the installation command into any text editor. The token value is of the form `eyJhIjoiNWFiNGU5Z...`\n\n* API\n\n  Make a `GET` request to the [Cloudflare Tunnel token](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/subresources/cloudflared/subresources/token/methods/get/) endpoint:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Cloudflare One Connectors Write`\n  * `Cloudflare One Connector: cloudflared Write`\n  * `Cloudflare Tunnel Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "The token value can be found in the `result`.\n\n* Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "If your host machine is not managed in Terraform or you want to install the tunnel manually, you can output the token value to the CLI.\n\n  Example: Output to CLI\n\n  1. Output the tunnel token to the Terraform state file:",
      "language": "unknown"
    },
    {
      "code": "2. Apply the configuration:",
      "language": "unknown"
    },
    {
      "code": "3. Read the tunnel token:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Alternatively, pass `data.cloudflare_zero_trust_tunnel_cloudflared_token.tunnel_token.token` directly into your host's Terraform configuration or store the token in your secret management tool.\n\n  Example: Store in HashiCorp Vault",
      "language": "unknown"
    },
    {
      "code": "## Rotate a token without service disruption\n\nCloudflare recommends rotating the tunnel token at a regular cadence to reduce the risk of token compromise. You can rotate a token with minimal disruption to users as long as the tunnel is served by at least two [`cloudflared` replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/). To ensure service availability, we recommend performing token rotations outside of working hours or in a maintenance window.\n\nTo rotate a tunnel token:\n\n1. Refresh the token on Cloudflare:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n  2. Select a `cloudflared` tunnel and select **Edit**.\n  3. Select **Refresh token**.\n  4. Copy the `cloudflared` installation command for your operating system. This command contains the new token.\n\n* API\n\n  1. Generate a random base64 string (minimum size 32 bytes) to use as a tunnel secret:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. Make a `PATCH` request to the [Cloudflare Tunnel](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/methods/edit/) endpoint:\n\n     Required API token permissions\n\n     At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n     * `Cloudflare One Connectors Write`\n     * `Cloudflare One Connector: cloudflared Write`\n     * `Cloudflare Tunnel Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. Copy the `token` value shown in the output.\n\nAfter refreshing the token, `cloudflared` can no longer establish new connections to Cloudflare using the old token. However, existing connectors will remain active and the tunnel will continue serving traffic.\n\n1. On half of your `cloudflared` replicas, update `cloudflared` to use the new token. For example, on a Linux host:",
      "language": "unknown"
    },
    {
      "code": "2. Restart `cloudflared`:",
      "language": "unknown"
    },
    {
      "code": "3. Confirm that the service started correctly:",
      "language": "unknown"
    },
    {
      "code": "While these replicas are connecting to Cloudflare with the new token, traffic will automatically route through the other replicas.\n\n4. Wait 10 minutes for traffic to route through the new connectors.\n\n5. Repeat steps 2, 3, and 4 for the second half of the replicas.\n\nThe tunnel token is now fully rotated. The old token is no longer in use.\n\n## Rotate a compromised token\n\nIf your tunnel token is compromised, we recommend taking the following steps:\n\n1. Refresh the token using the dashboard or API. Refer to Step 1 of [Rotate a token without service disruption](#rotate-a-token-without-service-disruption).\n\n2. [Delete all connections](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/subresources/connections/methods/delete/) between `cloudflared` and Cloudflare:\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Cloudflare One Connectors Write`\n   * `Cloudflare One Connector: cloudflared Write`\n   * `Cloudflare Tunnel Write`",
      "language": "unknown"
    },
    {
      "code": "This will clean up any unauthorized connections and prevent users from connecting to your network.\n\n3. On each `cloudflared` replica, update `cloudflared` to use the new token. For example, on a Linux host:",
      "language": "unknown"
    },
    {
      "code": "4. Restart `cloudflared`:",
      "language": "unknown"
    },
    {
      "code": "5. Confirm that the service started correctly:",
      "language": "unknown"
    },
    {
      "code": "The tunnel token is now fully rotated. The old token is no longer in use.\n\n## Account-scoped roles\n\nMinimum permissions needed to create, delete, and configure tunnels for an account:\n\n* [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/roles-permissions/)\n\nAdditional permissions needed to [route traffic to a public hostname](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/):\n\n* [DNS](https://developers.cloudflare.com/fundamentals/manage-members/roles/)\n\n</page>\n\n<page>\n---\ntitle: Tunnel availability and failover · Cloudflare One docs\ndescription: Our lightweight and open-source connector, cloudflared, was built\n  to be highly available without any additional configuration requirements. When\n  you run a tunnel, cloudflared establishes four outbound-only connections\n  between the origin server and the Cloudflare network. These four connections\n  are made to four different servers spread across at least two distinct data\n  centers. This model ensures high availability and mitigates the risk of\n  individual connection failures. This means in event a single connection,\n  server, or data center goes offline, your resources will remain available.\nlastUpdated: 2025-10-29T21:18:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/index.md\n---\n\nOur lightweight and open-source connector, [`cloudflared`](https://github.com/cloudflare/cloudflared), was built to be highly available without any additional configuration requirements. When you run a tunnel, `cloudflared` establishes four outbound-only connections between the origin server and the Cloudflare network. These four connections are made to four different servers spread across at least two distinct data centers. This model ensures high availability and mitigates the risk of individual connection failures. This means in event a single connection, server, or data center goes offline, your resources will remain available.\n\n## `cloudflared` replicas\n\nCloudflare Tunnel allows users to deploy additional instances of our connector, `cloudflared`, for availability and failover scenarios. We refer to these unique instances as replicas. Each replica establishes four new connections which serve as additional points of ingress to your origin, should you need them. Each of the replicas will point to the same tunnel. This ensures that your network remains up in the event a single host running `cloudflared` goes down.",
      "language": "unknown"
    },
    {
      "code": "By design, replicas do not offer any level of traffic steering (random, hash, or round-robin). Instead, when a request arrives to Cloudflare, it will be forwarded to the replica that is geographically closest. If that distance calculation is unsuccessful or the connection fails, we will retry others, but there is no guarantee about which connection is chosen.\n\n### When to use `cloudflared` replicas\n\n* To provide additional points of availability for a single tunnel.\n* To allocate failover nodes within your network.\n* To update the configuration of a tunnel [without downtime](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/#update-with-multiple-cloudflared-instances).\n\nFor setup instructions, refer to [Deploy cloudflared replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/deploy-replicas/).\n\n## Cloudflare Load Balancers\n\n[Cloudflare Load Balancing](https://developers.cloudflare.com/load-balancing/) proactively steers traffic away from unhealthy origins and intelligently distributes the traffic load based on your choice of [steering algorithms](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/). Unlike [`cloudflared` replicas](#cloudflared-replicas) which all use the same tunnel, a typical load balancer setup requires creating multiple tunnels. Most customers will create one tunnel per data center and one load balancer pool per tunnel.",
      "language": "unknown"
    },
    {
      "code": "### When to use load balancers\n\n* To intelligently steer traffic based on latency, geolocation, or other signals.\n* To implement failover logic if a tunnel reaches an inactive state.\n* To get a [health alert](https://developers.cloudflare.com/notifications/notification-available/#load-balancing) when a tunnel reaches an inactive state.\n* To distribute traffic more evenly across your Cloudflare Tunnel-accessible origins or endpoints.\n\nFor setup instructions, refer to [Public load balancers](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/) or [Private Network Load Balancing](https://developers.cloudflare.com/load-balancing/private-network/) depending on your [use case](#types-of-load-balancers).\n\n### Types of load balancers\n\nThere are two types of load balancers that you can use with Cloudflare Tunnel endpoints:\n\n* [Public load balancers](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/) steer traffic from the Internet to applications published on a Cloudflare domain. Use this method if your service is served by Cloudflare Tunnel via a [published application route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#2a-publish-an-application).\n* [Private load balancers](https://developers.cloudflare.com/load-balancing/private-network/) steer traffic from WARP clients, Magic WAN, and other on-ramps to an internal IP on your private network. Use this method if your service is connected to Cloudflare Tunnel via a [CIDR route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-cidr/).\n\nNote\n\n[Private hostname routes](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-private-hostname/) are not currently compatible with Load Balancing. If your service is connected via a hostname route, use `cloudflared` [replicas](#cloudflared-replicas) for high availability.\n\n</page>\n\n<page>\n---\ntitle: Tunnel with firewall · Cloudflare One docs\ndescription: You can implement a positive security model with Cloudflare Tunnel\n  by blocking all ingress traffic and allowing only egress traffic from\n  cloudflared. Only the services specified in your tunnel configuration will be\n  exposed to the outside world.\nlastUpdated: 2025-11-10T16:04:41.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/index.md\n---\n\nYou can implement a positive security model with Cloudflare Tunnel by blocking all ingress traffic and allowing only egress traffic from `cloudflared`. Only the services specified in your tunnel configuration will be exposed to the outside world.\n\n## Ports\n\nThe parameters below can be configured for egress traffic inside of a firewall.\n\nHow you configure your firewall depends on the firewall type:\n\n* If your firewall supports domain-based rules (FQDN allowlists), you can allow outbound connections to the hostnames listed below.\n* If your firewall requires IP-based rules, allow outbound connections to all listed IP addresses for each domain.\n\nEnsure port `7844` is allowed for both TCP and UDP protocols (for `http2` and `quic`).\n\n### Required for tunnel operation\n\n`cloudflared` connects to Cloudflare's global network on port `7844`. To use Cloudflare Tunnel, your firewall must allow outbound connections to the following destinations on port `7844` (via UDP if using the `quic` protocol or TCP if using the `http2` protocol).\n\n#### `region1.v2.argotunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| `198.41.192.167` `198.41.192.67` `198.41.192.57` `198.41.192.107` `198.41.192.27` `198.41.192.7` `198.41.192.227` `198.41.192.47` `198.41.192.37` `198.41.192.77` | `2606:4700:a0::1` `2606:4700:a0::2` `2606:4700:a0::3` `2606:4700:a0::4` `2606:4700:a0::5` `2606:4700:a0::6` `2606:4700:a0::7` `2606:4700:a0::8` `2606:4700:a0::9` `2606:4700:a0::10` | 7844 | TCP/UDP (`http2`/`quic`) |\n\n#### `region2.v2.argotunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| `198.41.200.13` `198.41.200.193` `198.41.200.33` `198.41.200.233` `198.41.200.53` `198.41.200.63` `198.41.200.113` `198.41.200.73` `198.41.200.43` `198.41.200.23` | `2606:4700:a8::1` `2606:4700:a8::2` `2606:4700:a8::3` `2606:4700:a8::4` `2606:4700:a8::5` `2606:4700:a8::6` `2606:4700:a8::7` `2606:4700:a8::8` `2606:4700:a8::9` `2606:4700:a8::10` | 7844 | TCP/UDP (`http2`/`quic`) |\n\n#### `_v2-origintunneld._tcp.argotunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| Not applicable | Not applicable | 7844 | TCP (`http2`) |\n\nThis rule is only required for firewalls that enforce SNI.\n\n#### `cftunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| Not applicable | Not applicable | 7844 | TCP/UDP (`http2`/`quic`) |\n\nThis rule is only required for firewalls that enforce SNI.\n\n#### `h2.cftunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| Not applicable | Not applicable | 7844 | TCP (`http2`) |\n\nThis rule is only required for firewalls that enforce SNI.\n\n#### `quic.cftunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| Not applicable | Not applicable | 7844 | UDP (`quic`) |\n\nThis rule is only required for firewalls that enforce SNI.\n\n### Region US\n\nWhen using the [US region](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#region), ensure your firewall allows outbound connections to these US-region destinations on port `7844` (TCP/UDP) for tunnel operation.\n\n#### `us-region1.v2.argotunnel.com`\n\n| IPv4 | IPv6 | Port | Protocol |\n| - | - | - | - |\n| `198.41.218.1` `198.41.218.2` `198.41.218.3` `198.41.218.4` `198.41.218.5` `198.41.218.6` `198.41.218.7` `198.41.218.8` `198.41.218.9` `198.41.218.10` | `2606:4700:a1::1` `2606:4700:a1::2` `2606:4700:a1::3` `2606:4700:a1::4` `2606:4700:a1::5` `2606:4700:a1::6` `2606:4700:a1::7` `2606:4700:a1::8` `2606:4700:a1::9` `2606:4700:a1::10` | 7844 | TCP/UDP (`http2`/`quic`) |\n\n#### `us-region2.v2.argotunnel.com`\n\n| IPv4 | IPv6 | Port | Protocol |\n| - | - | - | - |\n| `198.41.219.1` `198.41.219.2` `198.41.219.3` `198.41.219.4` `198.41.219.5` `198.41.219.6` `198.41.219.7` `198.41.219.8` `198.41.219.9` `198.41.219.10` | `2606:4700:a9::1` `2606:4700:a9::2` `2606:4700:a9::3` `2606:4700:a9::4` `2606:4700:a9::5` `2606:4700:a9::6` `2606:4700:a9::7` `2606:4700:a9::8` `2606:4700:a9::9` `2606:4700:a9::10` | 7844 | TCP/UDP (`http2`/`quic`) |\n\n### Optional\n\nOpening port `443` enables some optional features. Failure to allow these connections may prompt a log error, but `cloudflared` will still run correctly.\n\n#### `api.cloudflare.com`\n\nAllows `cloudflared` to query if software updates are available.\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| `104.19.192.29` `104.19.192.177` `104.19.192.175` `104.19.193.29` `104.19.192.174` `104.19.192.176` | `2606:4700:300a::6813:c0af` `2606:4700:300a::6813:c01d` `2606:4700:300a::6813:c0ae` `2606:4700:300a::6813:c11d` `2606:4700:300a::6813:c0b0` `2606:4700:300a::6813:c0b1` | 443 | TCP (HTTPS) |\n\n#### `update.argotunnel.com`\n\nAllows `cloudflared` to query if software updates are available.\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| `104.18.25.129` `104.18.24.129` | `2606:4700::6812:1881` `2606:4700::6812:1981` | 443 | TCP (HTTPS) |\n\n#### `github.com`\n\nAllows `cloudflared` to download the latest release and perform a software update.\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| [GitHub's IPs](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-githubs-ip-addresses) | [GitHub's IPs](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-githubs-ip-addresses) | 443 | TCP (HTTPS) |\n\n#### `<your-team-name>.cloudflareaccess.com`\n\nAllows `cloudflared` to validate the Access JWT. Only required if the [`access`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#access) setting is enabled.\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| `104.19.194.29` `104.19.195.29` | `2606:4700:300a::6813:c31d` `2606:4700:300a::6813:c21d` | 443 | TCP (HTTPS) |\n\n#### `pqtunnels.cloudflareresearch.com`\n\nAllows `cloudflared` to report [post-quantum key exchange](https://blog.cloudflare.com/post-quantum-tunnel/) errors to Cloudflare.\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| `104.18.4.64` `104.18.5.64` | `2606:4700::6812:540` `2606:4700::6812:440` | 443 | TCP (HTTPS) |\n\n#### `cfd-features.argotunnel.com`\n\n| IPv4 | IPv6 | Port | Protocols |\n| - | - | - | - |\n| Not applicable | Not applicable | Not applicable | Not applicable |\n\nPerforming a DNS query for a `TXT` record to this hostname allows `cloudflared` to determine which version of [UDP datagram](https://developers.cloudflare.com/changelog/2025-07-15-udp-improvements/) to use when connecting via the `quic` protocol. If your firewall filters egress DNS queries by FQDN, you may need to allow queries for this domain to ensure optimal `quic` performance.\n\n## Firewall configuration\n\n### Cloud VM firewall\n\nIf you host your services on a virtual machine (VM) instance in a cloud provider, you may set up instance-level firewall rules to block all ingress traffic and allow only egress traffic. For example, on Google Cloud Platform (GCP), you may delete all ingress rules, leaving only the relevant egress rules. This is because GCP's firewall denies ingress traffic unless it matches an explicit rule.\n\n### OS firewall\n\nAlternatively, you may use operating system (OS)-level firewall rules to block all ingress traffic and allow only egress traffic. For example, if your server runs on Linux, you may use `iptables` to set up firewall rules:\n\n1. Check your current firewall rules.",
      "language": "unknown"
    },
    {
      "code": "2. Allow `localhost` to communicate with itself.",
      "language": "unknown"
    },
    {
      "code": "3. Allow already established connection and related traffic.",
      "language": "unknown"
    },
    {
      "code": "4. Allow new SSH connections.",
      "language": "unknown"
    },
    {
      "code": "5. Drop all other ingress traffic.\n\n   Warning\n\n   Be very careful with the following command. If you did not preserve the current SSH connection or allow new SSH connections, you would be logged out and unable to SSH back into the system again.",
      "language": "unknown"
    },
    {
      "code": "6. After setting the firewall rules, use this command to check the current `iptables` settings:",
      "language": "unknown"
    },
    {
      "code": "Run your tunnel and check that all configured services are still accessible to the outside world via the tunnel, but not via the external IP address of the server.\n\nYou can also [secure your application with Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/).\n\n## Test connectivity\n\n### Test with dig\n\nTo test your connectivity to Cloudflare, you can use the `dig` command to query the hostnames listed above. Note that `cloudflared` defaults to connecting with IPv4.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Test with PowerShell\n\nOn Windows, you can use PowerShell commands if `dig` is not available.\n\nTo test DNS:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "To test ports:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Ansible · Cloudflare One docs\ndescription: Ansible is a software tool that enables at scale management of\n  infrastructure. Ansible is agentless — all it needs to function is the ability\n  to SSH to the target and Python installed on the target.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/ansible/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/ansible/index.md\n---\n\nAnsible is a software tool that enables at scale management of infrastructure. Ansible is agentless — all it needs to function is the ability to SSH to the target and Python installed on the target.\n\nAnsible works alongside Terraform to streamline the Cloudflare Tunnel setup process. In this guide, you will use Terraform to deploy an SSH server on Google Cloud and create a [locally-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/create-local-tunnel/) that makes the server available over the Internet. Terraform will automatically run an Ansible playbook that installs and configures `cloudflared` on the server.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n## Prerequisites\n\nTo complete the steps in this guide, you will need:\n\n* [A Google Cloud Project](https://cloud.google.com/resource-manager/docs/creating-managing-projects#creating_a_project) and [GCP CLI installed and authenticated](https://cloud.google.com/sdk/docs/install).\n* [Basic knowledge of Terraform](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/terraform/) and [Terraform installed](https://developer.hashicorp.com/terraform/tutorials/certification-associate-tutorials/install-cli).\n* [A zone on Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/).\n* [A Cloudflare API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with `Cloudflare Tunnel` and `DNS` permissions.\n\n## 1. Install Ansible\n\nRefer to the [Ansible installation instructions](https://docs.ansible.com/ansible/latest/installation_guide/index.html).\n\n## 2. (Optional) Create an SSH key pair\n\nTerraform and Ansible require an unencrypted SSH key to connect to the GCP server. If you do not already have a key, you can generate one as follows:\n\n1. Open a terminal and type the following command:",
      "language": "unknown"
    },
    {
      "code": "2. When prompted for a passphrase, press the `Enter` key twice to leave it blank. Terraform cannot decode encrypted private keys.\n\nTwo files will be generated: `gcp_ssh` which contains the private key, and `gcp_ssh.pub` which contains the public key.\n\n## 3. Create a configuration directory\n\n1. Create a folder for your Terraform and Ansible configuration files:",
      "language": "unknown"
    },
    {
      "code": "2. Change to the new directory:",
      "language": "unknown"
    },
    {
      "code": "## 4. Create Terraform configuration files\n\n### Define input variables\n\nThe following variables will be passed into your GCP and Cloudflare configuration.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Open the file in a text editor and copy and paste the following:",
      "language": "unknown"
    },
    {
      "code": "### Assign values to the variables\n\n1. In your configuration directory, create a `.tfvars` file:",
      "language": "unknown"
    },
    {
      "code": "Terraform will automatically use these variables if the file is named `terraform.tfvars`, otherwise the variable file will need to be manually passed in.\n\n2. Add the following variables to `terraform.tfvars`. Be sure to modify the example with your own values.",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nTo prevent accidentally exposing sensitive credentials, do not save `terraform.tfvars` in your version control system. For example, if your version control is git, add `terraform.tfvars` to your `.gitignore` file.\n\n### Configure Terraform providers\n\nYou will need to declare the [providers](https://registry.terraform.io/browse/providers) used to provision the infrastructure.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Add the following providers to `providers.tf`. The `random` provider is used to generate a tunnel secret.",
      "language": "unknown"
    },
    {
      "code": "### Configure Cloudflare resources\n\nThe following configuration will modify settings in your Cloudflare account.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Add the following resources to `Cloudflare-config.tf`:",
      "language": "unknown"
    },
    {
      "code": "### Configure GCP resources\n\nThe following configuration defines the specifications for the GCP virtual machine and installs Python3 on the machine. Python3 allows Ansible to configure the GCP instance instead of having to run a [startup script](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/terraform/#create-a-startup-script) on boot.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Open the file in a text editor and copy and paste the following example. Be sure to insert your own GCP username and SSH key pair.",
      "language": "unknown"
    },
    {
      "code": "### Export variables to Ansible\n\nThe following Terraform resource exports the [tunnel token](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/remote-tunnel-permissions/) and other variables to `tf_ansible_vars_file.yml`. Ansible will use the tunnel token to configure and run `cloudflared` on the server.\n\n1. In your configuration directory, create a new `tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Copy and paste the following content into `export.tf`:",
      "language": "unknown"
    },
    {
      "code": "## 5. Create the Ansible playbook\n\nAnsible playbooks are YAML files that declare the configuration Ansible will deploy.\n\n1. Create a new `.yml` file:",
      "language": "unknown"
    },
    {
      "code": "2. Open the file in a text editor and copy and paste the following content:",
      "language": "unknown"
    },
    {
      "code": "[Keywords](https://docs.ansible.com/ansible/latest/reference_appendices/playbooks_keywords.html#play) define how Ansible will execute the configuration. In the example above, the `vars_files` keyword specifies where variable definitions are stored, and the `tasks` keyword specifies the actions Ansible will perform.\n\n[Modules](https://docs.ansible.com/ansible/2.9/user_guide/modules.html) specify what tasks to complete. In this example, the `copy` module creates a file and populates it with content.\n\n## 6. Deploy the configuration\n\nOnce you have created the configuration files, you can deploy them through Terraform. The Ansible deployment happens within the Terraform deployment when the `ansible-playbook` command is run.\n\n1. Initialize your configuration directory:",
      "language": "unknown"
    },
    {
      "code": "2. (Optional) Preview everything that will be created:",
      "language": "unknown"
    },
    {
      "code": "3. Deploy the configuration:",
      "language": "unknown"
    },
    {
      "code": "It may take several minutes for the GCP instance and tunnel to come online. You can view your new tunnel in [Cloudflare One](https://one.dash.cloudflare.com) under **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n## 7. Test the connection\n\nTo test, open a browser and go to `http://http_app.<CLOUDFLARE_ZONE>.com` (for example, `http_app.example.com`). You should see the **Hello Cloudflare!** test page.\n\n</page>\n\n<page>\n---\ntitle: Deploy cloudflared in AWS · Cloudflare One docs\ndescription: This guide covers how to connect an Amazon Web Services (AWS)\n  virtual machine to Cloudflare using our lightweight connector, cloudflared.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/aws/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/aws/index.md\n---\n\nThis guide covers how to connect an Amazon Web Services (AWS) virtual machine to Cloudflare using our lightweight connector, `cloudflared`.\n\nWe will deploy:\n\n* An EC2 virtual machine that runs a basic HTTP server.\n* A Cloudflare Tunnel that allows users to connect to the service via either a public hostname or a private IP address.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n### Prerequisites\n\nTo complete the following procedure, you will need to:\n\n* [Add a website to Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/)\n* [Deploy the WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) on an end-user device\n\n## 1. Create a VM instance in AWS\n\n1. From the AWS console, go to **Compute** > **EC2** > **Instances**\n\n2. Select **Launch instance**.\n\n3. Name your VM instance. In this example we will name it `http-test-server`.\n\n4. For \\**Amazon Machine Image (AMI)* choose your desired operating system and specifications. For this example, we will use *Ubuntu Server 24.04 LTS (HVM), SSD Volume Type*.\n\n5. For **Instance type:**, you can select *t2.micro* which is available on the free tier.\n\n6. In **Key pair (login)**, create a new key pair to use for SSH. You will need to download the `.pem` file onto your local machine.\n\n7. In **Network settings**, select **Create security group**.\n\n8. Turn on the following Security Group rules:\n\n   * **Allow SSH traffic from *My IP*** to prevent the instance from being publicly accessible.\n   * **Allow HTTPS traffic from the internet**\n   * **Allow HTTP traffic from the internet**\n\n9. Select **Launch instance**.\n\n10. Once the instance is up and running, go to the **Instances** summary page and copy its **Public IPv4 DNS** hostname (for example, `ec2-44-202-59-16.compute-1.amazonaws.com`).\n\n11. To log in to the instance over SSH, open a terminal and run the following commands:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "1. Run `sudo su` to gain full admin rights to the instance.\n\n2. For testing purposes, you can deploy a basic Apache web server on port `80`:",
      "language": "unknown"
    },
    {
      "code": "1. To verify that the Apache server is running, open a browser and go to `http://ec2-44-202-59-16.compute-1.amazonaws.com` (make sure to connect over `http`, not `https`). You should see the **Hello Cloudflare!** test page.\n\n## 2. Create a Cloudflare Tunnel\n\nCreate a Cloudflare Tunnel in Cloudflare One and run the tunnel on the AWS instance.\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com) and go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n2. Select **Create a tunnel**.\n\n3. Choose **Cloudflared** for the connector type and select **Next**.\n\n4. Enter a name for your tunnel (for example, `aws-tunnel`).\n\n5. Select **Save tunnel**.\n\n6. Under **Choose your environment**, select **Debian**. Copy the command shown in the dashboard and run it on your AWS instance.\n\n7. Once the command has finished running, your connector will appear in Cloudflare One.\n\n8. Select **Next**.\n\n## 3. Connect using a public hostname\n\n[Published applications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/) allow anyone on the Internet to connect to HTTP resources hosted on your virtual private cloud (VPC). To add a published application for your Cloudflare Tunnel:\n\n1. In the **Published application routes** tab, enter a hostname for the application (for example, `hellocloudflare.<your-domain>.com`).\n2. Under **Service**, enter `http://localhost:80`.\n3. Select **Save**.\n4. To test, open a browser and go to `http://hellocloudflare.<your-domain>.com`. You should see the **Hello Cloudflare!** test page.\n\nYou can optionally [create an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/) to control who can access the service.\n\n## 4. Connect using a private IP\n\n[Private network routes](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/) allow users to connect to your virtual private cloud (VPC) using the WARP client. To add a private network route for your Cloudflare Tunnel:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Networks** > **Routes**.\n\n2. In the **CIDR** tab, enter the **Private IPv4 address** of your AWS instance (for example, `172.31.19.0`). You can expand the IP range later if necessary.\n\n3. In your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route), make sure the private IP is routing through WARP. For example, if you are using Split Tunnels in **Exclude** mode, delete `172.16.0.0/12`. We recommend re-adding the IPs that are not explicitly used by your AWS instance.\n\n   To determine which IP addresses to re-add, subtract your AWS instance IPs from `172.16.0.0/12`:\n\n   Add the results back to your Split Tunnel Exclude mode list.\n\n4. To test on a user device:\n\n   1. [Log in to the WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/).\n   2. Open a terminal window and connect to the service using its private IP:",
      "language": "unknown"
    },
    {
      "code": "You can optionally [create Gateway network policies](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#4-recommended-filter-network-traffic-with-gateway) to control who can access the instance via its private IP.\n\nWarning\n\nAvoid configuring your [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) or [Resolver Policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) to direct all `*.amazonaws.com` DNS resolution via AWS Route 53 Resolver.\n\nSome AWS endpoints (such as `ssm.us-east-1.amazonaws.com`) are public AWS endpoints that are not resolvable via internal VPC resolution. This can break AWS Console features for users on WARP.\n\nOnly route specific Route 53 zones, or VPC Endpoints (such as `vpce.amazonaws.com`), through the internal VPC resolver.\n\n## Firewall configuration\n\nTo secure your AWS instance, you can configure your [Security Group rules](https://docs.aws.amazon.com/vpc/latest/userguide/security-group-rules.html) to deny all inbound traffic and allow only outbound traffic to the [Cloudflare Tunnel IP addresses](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/#required-for-tunnel-operation). All Security Group rules are Allow rules; traffic that does not match a rule is blocked. Therefore, you can delete all inbound rules and leave only the relevant outbound rules.\n\nNote\n\nIf you delete the inbound rule for port `22`, you will be unable to SSH back into the instance.\n\nAfter configuring your Security Group rules, verify that you can still access the service through Cloudflare Tunnel via its [public hostname](#3-connect-using-a-public-hostname) or [private IP](#4-connect-using-a-private-ip). The service should no longer be accessible from outside Cloudflare Tunnel -- for example, if you go to `http://ec2-44-202-59-16.compute-1.amazonaws.com` the test page should no longer load.\n\n</page>\n\n<page>\n---\ntitle: Azure · Cloudflare One docs\ndescription: The purpose of this guide is to walk through some best practices\n  for accessing private resources on Azure by deploying Cloudflare's lightweight\n  connector, cloudflared.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/azure/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/azure/index.md\n---\n\nThe purpose of this guide is to walk through some best practices for accessing private resources on Azure by deploying Cloudflare's lightweight connector, `cloudflared`.\n\nWe will walk through how to initialize a service on a Linux VM in Azure, and route to it from another VM running `cloudflared`. This deployment guide does not take into account routing beyond basic security groups and default VPCs.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n## Prerequisites\n\n* In [Cloudflare One](https://one.dash.cloudflare.com/), create a Cloudflare One account.\n* [Enroll an end-user device](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) into your Cloudflare One account.\n\n## Create your environment\n\nMake sure you sign up for Azure and create a new subscription.\n\n1. First, create your first resource group.\n\n   ![Azure group](https://developers.cloudflare.com/_astro/azure-1.f9lJ2gl2_19lfNg.webp)\n\n2. In addition, create your first keypair as well. You will be using the keypair to SSH into your Virtual Machine.\n\n   ![Azure keypair](https://developers.cloudflare.com/_astro/azure-2.TRbZo2Tb_Z1CNlrt.webp)\n\n3. Next, define your inbound and outbound ports to the VM. If these ports are not configured properly, the solution will not function as intended. For testing purposes, we will leave access open.\n\n   ![Azure keypair](https://developers.cloudflare.com/_astro/azure-3.MZiED3ci_2uvV16.webp)\n\nCreate two Ubuntu 20.04 LTS VMs, and make sure you record their internal IP addresses. Azure by default uses the `10.0.0.0/8` subnet.\n\n## Deploy `cloudflared`\n\n1. SSH into your Azure instance using the command line.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. Run `sudo su` to gain full admin rights to the Virtual Machine.\n\n3. Install `cloudflared` on your instance. In this example, we are running a Debian-based instance, so use the Debian package of `cloudflared`:\n\n   1. Add Cloudflare's package signing key:",
      "language": "unknown"
    },
    {
      "code": "1. Add Cloudflare's apt repo to your apt repositories:",
      "language": "unknown"
    },
    {
      "code": "1. Update repositories and install cloudflared:",
      "language": "unknown"
    },
    {
      "code": "4. Run the following command to authenticate `cloudflared` with your Cloudflare account. The command will launch a browser window where you will be prompted to log in with your Cloudflare account and pick any zone you have added to Cloudflare.",
      "language": "unknown"
    },
    {
      "code": "5. Create a tunnel.",
      "language": "unknown"
    },
    {
      "code": "## Complete tunnel configuration\n\n1. Make a directory for your configuration file.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. Build a configuration file. Before moving forward and entering vim, copy your Tunnel ID and credentials path to a notepad.",
      "language": "unknown"
    },
    {
      "code": "3. Type `i` to begin editing the file and copy-paste the following settings in it.",
      "language": "unknown"
    },
    {
      "code": "4. Press `esc` and then enter `:x` to save and exit.\n\n5. Run `cloudflared` as a service.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Next, visit Cloudflare One and ensure your new tunnel shows as **active**. Optionally, begin creating [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to secure your private resources.\n\n</page>\n\n<page>\n---\ntitle: GCP · Cloudflare One docs\ndescription: This guide covers how to connect a Google Cloud Project (GCP)\n  virtual machine to Cloudflare using our lightweight connector, cloudflared.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/google-cloud-platform/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/google-cloud-platform/index.md\n---\n\nThis guide covers how to connect a Google Cloud Project (GCP) virtual machine to Cloudflare using our lightweight connector, `cloudflared`.\n\nWe will deploy:\n\n* A Google Cloud Project (GCP) virtual machine that runs a basic HTTP server.\n* A Cloudflare Tunnel that allows users to connect to the service via either a public hostname or a private IP address.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n### Prerequisites\n\nTo complete the following procedure, you will need to:\n\n* [Add a website to Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/)\n* [Deploy the WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) on an end-user device\n\n## 1. Create a VM instance in GCP\n\n1. In your [Google Cloud Console](https://console.cloud.google.com/), [create a new project](https://developers.google.com/workspace/guides/create-project).\n\n2. Go to **Compute Engine** > **VM instances**.\n\n3. Select **Create instance**.\n\n4. Name your VM instance. In this example we will name it `http-test-server`.\n\n5. Choose your desired operating system and specifications. For this example, you can use the following settings:\n\n   * **Machine family:** General Purpose\n   * **Series:** E2\n   * **Machine type:** e2-micro\n   * **Boot disk image:** Debian GNU/Linux 12\n   * **Firewalls**: Allow HTTP and HTTPS traffic\n\n6. Under **Advanced options** > **Management** > **Automation**, add the following startup script. This example deploys a basic Apache web server on port `80`.",
      "language": "unknown"
    },
    {
      "code": "7. Select **Create**.\n\n8. The operating system automatically starts the Apache HTTP server. To verify that the server is running:\n\n   1. Copy the **External IP** for the VM instance.\n   2. Open a browser and go to `http://<EXTERNAL IP>`. You should see the **Hello Cloudflare!** test page.\n\n9. To login to the VM instance, open the dropdown next to **SSH** and select *Open in browser window*.\n\n## 2. Create a Cloudflare Tunnel\n\nCreate a Cloudflare Tunnel in Cloudflare One and run the tunnel on the GCP VM.\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com) and go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n2. Select **Create a tunnel**.\n\n3. Choose **Cloudflared** for the connector type and select **Next**.\n\n4. Enter a name for your tunnel (for example, `gcp-tunnel`).\n\n5. Select **Save tunnel**.\n\n6. Under **Choose your environment**, select **Debian**. Copy the command shown in the dashboard and run it on your GCP VM.\n\n7. Once the command has finished running, your connector will appear in Cloudflare One.\n\n8. Select **Next**.\n\n## 3. Connect using a public hostname\n\n[Published applications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/) allow anyone on the Internet to connect to HTTP resources hosted on your virtual private cloud (VPC). To add a published application for your Cloudflare Tunnel:\n\n1. In the **Published application routes** tab, enter a hostname for the application (for example, `hellocloudflare.<your-domain>.com`).\n2. Under **Service**, enter `http://localhost:80`.\n3. Select **Save**.\n4. To test, open a browser and go to `http://hellocloudflare.<your-domain>.com`. You should see the **Hello Cloudflare!** test page.\n\nYou can optionally [create an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/) to control who can access the service.\n\n## 4. Connect using a private IP\n\nTo configure a private network route for your Cloudflare Tunnel:\n\n1. In the **CIDR** tab, enter the **Internal IP** of your GCP VM instance (for example, `10.0.0.2`). You can expand the IP range later if necessary.\n\n2. In your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route), make sure the internal IP is routing through WARP. For example, if you are using Split Tunnels in **Exclude** mode, delete `10.0.0.0/8`. We recommend re-adding the IPs that are not explicitly used by your GCP VM.\n\n   To determine which IP addresses to re-add, subtract your GCP instance IPs from `10.0.0.0/8`:\n\n   Add the results back to your Split Tunnel Exclude mode list.\n\n3. To test on a user device:\n\n   1. [Log in to the WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/).\n   2. Open a terminal window and connect to the service using its private IP:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "You can optionally [create Gateway network policies](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#4-recommended-filter-network-traffic-with-gateway) to control who can access the VM via its private IP.\n\n## Firewall configuration\n\nTo secure your VM instance, you can [configure your VPC firewall rules](https://cloud.google.com/firewall/docs/using-firewalls) to deny all ingress traffic and allow only egress traffic to the [Cloudflare Tunnel IP addresses](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/#required-for-tunnel-operation). Since GCP denies ingress traffic by [default](https://cloud.google.com/firewall/docs/firewalls#default_firewall_rules), you can delete all ingress rules and leave only the relevant egress rules.\n\nNote\n\nIf you delete the default `allow-ssh` rule, you will be unable to SSH back into the VM.\n\nAfter configuring your VPC firewall rules, verify that you can still access the service through Cloudflare Tunnel via its [public hostname](#3-connect-using-a-public-hostname) or [private IP](#4-connect-using-a-private-ip). The service should no longer be accessible from outside Cloudflare Tunnel -- for example, if you go to `http://<EXTERNAL IP>` the test page should no longer load.\n\n</page>\n\n<page>\n---\ntitle: Deploy Tunnels with Terraform · Cloudflare One docs\ndescription: Learn how to deploy a Cloudflare Tunnel using Terraform and our\n  lightweight server-side daemon, cloudflared.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/terraform/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/terraform/index.md\n---\n\n[Terraform](https://www.terraform.io/) is an infrastructure as code software tool that allows you to deploy services from different providers using a standardized configuration syntax. When creating a Terraform configuration file, you define the final state of the configuration rather than the step-by-step procedure. This allows you to easily deploy, modify, and manage your Tunnels alongside your other infrastructure.\n\nIn this guide, you will use Terraform to deploy:\n\n* A Google Cloud Project (GCP) virtual machine that runs an HTTP test server\n* A Cloudflare Tunnel that makes the server available over the Internet\n* A Cloudflare Access policy that defines who can connect to the server\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n## Prerequisites\n\nTo complete the following procedure, you will need:\n\n* [A Google Cloud Project](https://cloud.google.com/resource-manager/docs/creating-managing-projects#creating_a_project)\n* [A zone on Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/)\n* Enabled [one-time PIN login](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/) or integrated an [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/)\n\n## 1. Install Terraform\n\nRefer to the [Terraform installation guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli) for your operating system.\n\n## 2. Install the gcloud CLI\n\n1. [Install the gcloud CLI](https://cloud.google.com/sdk/docs/install) so that Terraform can interact with your GCP account.\n\n2. Authenticate with the CLI by running:",
      "language": "unknown"
    },
    {
      "code": "## 3. Create a Cloudflare API token\n\n[Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) so that Terraform can interact with your Cloudflare account. At minimum, your token should include the following permissions:\n\n| Type | Item | Permission |\n| - | - | - |\n| Account | Cloudflare Tunnel | Edit |\n| Account | Access: Apps and Policies | Edit |\n| Zone | DNS | Edit |\n\n## 4. Create a configuration directory\n\nTerraform functions through a working directory that contains configuration files. You can store your configuration in multiple files or just one — Terraform will evaluate all of the configuration files in the directory as if they were in a single document.\n\n1. Create a folder for your Terraform configuration:",
      "language": "unknown"
    },
    {
      "code": "2. Change into the directory:",
      "language": "unknown"
    },
    {
      "code": "## 5. Create Terraform configuration files\n\n### Define input variables\n\nThe following variables will be passed into your GCP and Cloudflare configuration.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Open the file in a text editor and copy and paste the following:",
      "language": "unknown"
    },
    {
      "code": "### Assign values to the variables\n\n1. In your configuration directory, create a `.tfvars` file:",
      "language": "unknown"
    },
    {
      "code": "Terraform will automatically use these variables if the file is named `terraform.tfvars`, otherwise the variable file will need to be manually passed in.\n\n2. Add the following variables to `terraform.tfvars`. Be sure to modify the example with your own values.",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nTo prevent accidentally exposing sensitive credentials, do not save `terraform.tfvars` in your version control system. For example, if your version control is git, add `terraform.tfvars` to your `.gitignore` file.\n\n### Configure Terraform providers\n\nYou will need to declare the [providers](https://registry.terraform.io/browse/providers) used to provision the infrastructure.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Add the following providers to `providers.tf`. The `random` provider is used to generate a tunnel secret.\n\n   * Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v4)",
      "language": "unknown"
    },
    {
      "code": "### Configure Cloudflare resources\n\nThe following configuration will modify settings in your Cloudflare account.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Add the following resources to `Cloudflare-config.tf`:\n\n   * Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v4)",
      "language": "unknown"
    },
    {
      "code": "To learn more about these resources, refer to the [Cloudflare provider documentation](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs).\n\n### Configure GCP resources\n\nThe following configuration defines the specifications for the GCP virtual machine and configures a startup script to run upon boot.\n\n1. In your configuration directory, create a `.tf` file:",
      "language": "unknown"
    },
    {
      "code": "2. Add the following content to `GCP-config.tf`:\n\n   * Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v4)",
      "language": "unknown"
    },
    {
      "code": "### Create a startup script\n\nThe following script will install `cloudflared` and run the tunnel as a service. This example also installs a lightweight HTTP application that you can use to test connectivity.\n\nNote\n\nIf you would prefer to manually install the tunnel, refer to [Install and run the tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel-api/#4-install-and-run-the-tunnel).\n\n1. In your configuration directory, create a Terraform template file:",
      "language": "unknown"
    },
    {
      "code": "2. Open the file in a text editor and copy and paste the following bash script:",
      "language": "unknown"
    },
    {
      "code": "## 6. Deploy Terraform\n\nTo deploy the configuration files:\n\n1. Initialize your configuration directory:",
      "language": "unknown"
    },
    {
      "code": "2. Preview everything that will be created:",
      "language": "unknown"
    },
    {
      "code": "3. Apply the configuration:",
      "language": "unknown"
    },
    {
      "code": "It may take several minutes for the GCP instance and tunnel to come online. You can view your new tunnel, Access application, and Access policy in [Cloudflare One](https://one.dash.cloudflare.com). The new DNS records are available in the [Cloudflare dashboard](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/).\n\nRemove Terraform resources\n\nIf you need to roll back the configuration, run `terraform destroy` to delete everything created through Terraform. Both `terraform apply` and `terraform destroy` prompt for user input before applying the changes. To run without requiring user input, you can add the `-auto-approve` flag to the command.\n\n## 7. Test the connection\n\n1. In **Networks** > **Connectors** > **Cloudflare Tunnels**, verify that your tunnel is active.\n\n2. In **Access controls** > **Applications**, verify that your Cloudflare email is allowed by the Access policy.\n\n3. From any device, open a browser and go to `http_app.<CLOUDFLARE_ZONE>` (for example, `http_app.example.com`).\n\n   You will see the Access login page if you have not recently logged in.\n\n4. Log in with your Cloudflare email.\n\n   You should see the [HTTPBin](https://httpbin.org/) homepage.\n\n</page>\n\n<page>\n---\ntitle: Kubernetes · Cloudflare One docs\ndescription: Kubernetes is a container orchestration tool that is used to deploy\n  applications onto physical or virtual machines, scale the deployment to meet\n  traffic demands, and push updates without downtime. The Kubernetes cluster, or\n  environment, where the application instances are running is connected\n  internally through a private network. You can install the cloudflared daemon\n  inside of the Kubernetes cluster in order to connect applications inside of\n  the cluster to Cloudflare.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/kubernetes/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/kubernetes/index.md\n---\n\n[Kubernetes](https://kubernetes.io/) is a container orchestration tool that is used to deploy applications onto physical or virtual machines, scale the deployment to meet traffic demands, and push updates without downtime. The Kubernetes cluster, or environment, where the application instances are running is connected internally through a private network. You can install the `cloudflared` daemon inside of the Kubernetes cluster in order to connect applications inside of the cluster to Cloudflare.\n\nThis guide will cover how to expose a Kubernetes service to the public Internet using a [remotely-managed](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/tunnel-useful-terms/#remotely-managed-tunnel) Cloudflare Tunnel. For the purposes of this example, we will deploy a basic web application alongside `cloudflared` in Google Kubernetes Engine (GKE). The same principles apply to any other Kubernetes environment (such as `minikube`, `kubeadm`, or a cloud-based Kubernetes service) where `cloudflared` can connect to Cloudflare's network.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\nLocally-managed tunnels\n\nIf you are looking to set up a [locally-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/tunnel-useful-terms/#locally-managed-tunnel) in Kubernetes, refer to the [example code in GitHub](https://github.com/cloudflare/argo-tunnel-examples/tree/master/named-tunnel-k8s).\n\n## Architecture\n\n![Diagram showing how a user connects to Kubernetes services through Cloudflare Tunnel](https://developers.cloudflare.com/_astro/kubernetes-tunnel.C8IQcJlu_wze1M.webp)\n\nAs shown in the diagram, we recommend setting up `cloudflared` as an adjacent [deployment](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/) to the application deployments. Having a separate Kubernetes deployment for `cloudflared` allows you to scale `cloudflared` independently of the application. In the `cloudflared` deployment, you can spin up [multiple replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) running the same Cloudflare Tunnel — there is no need to build a dedicated tunnel for each `cloudflared` pod. Each `cloudflared` replica / pod can reach all Kubernetes services in the cluster.\n\nNote\n\nWe do not recommend using `cloudflared` in autoscaling setups because downscaling (removing replicas) will break existing user connections to that replica. Additionally, `cloudflared` does not load balance across replicas; replicas are strictly for high availability. To load balance traffic to your nodes, you can use [Cloudflare Load Balancer](https://developers.cloudflare.com/load-balancing/private-network/) or a third-party load balancer.\n\nOnce the cluster is connected to Cloudflare, you can configure Cloudflare Tunnel routes to control how `cloudflared` will proxy traffic to services within the cluster. For example, you may wish to publish certain Kubernetes applications to the Internet and restrict other applications to internal WARP client users.\n\n## Prerequisites\n\nTo complete the following procedure, you will need:\n\n* [A Google Cloud Project](https://cloud.google.com/resource-manager/docs/creating-managing-projects#creating_a_project)\n* [A zone on Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/)\n\n## 1. Create a GKE cluster\n\nTo create a new Kubernetes cluster in Google Cloud:\n\n1. Open [Google Cloud](https://console.cloud.google.com/) and go to **Kubernetes Engine**.\n\n2. In **Clusters**, select **Create**.\n\n3. Name the cluster. In this example, we will name it `cloudflare-tunnel`.\n\n4. (Optional) Choose your desired region and other cluster specifications. For this example, we will use the default specifications.\n\n5. Select **Create**.\n\n6. To connect to the cluster:\n\n   1. Select the three-dot menu.\n   2. Select **Connect**.\n   3. Select **Run in Cloud Shell** to open a terminal in the browser.\n   4. Select **Authorize**.\n   5. Press `Enter` to run the pre-populated `gcloud` command.\n   6. (Recommended) In the Cloud Shell menu, select **Open Editor** to launch the built-in IDE.\n\n7. In the Cloud Shell terminal, run the following command to check the cluster status:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## 2. Create pods for the web app\n\nA pod represents an instance of a running process in the cluster. In this example, we will deploy the [httpbin](https://httpbin.org/) application with two pods and make the pods accessible inside the cluster at `httpbin-service:80`.\n\n1. Create a folder for your Kubernetes manifest files:",
      "language": "unknown"
    },
    {
      "code": "2. Change into the directory:",
      "language": "unknown"
    },
    {
      "code": "3. In the `tunnel-example` directory, create a new file called `httpbin.yaml`. This file defines the Kubernetes deployment for the httpbin app.",
      "language": "unknown"
    },
    {
      "code": "4. Create a new `httpbinsvc.yaml` file. This file defines a Kubernetes service that allows other apps in the cluster (such as `cloudflared`) to access the set of httpbin pods.",
      "language": "unknown"
    },
    {
      "code": "5. Use the following command to run the application inside the cluster:",
      "language": "unknown"
    },
    {
      "code": "6. Check the status of your deployment:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## 3. Create a tunnel\n\nTo create a Cloudflare Tunnel:\n\n1. Open a new browser tab and log in to [Cloudflare One](https://one.dash.cloudflare.com).\n\n2. Go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n3. Select **Create a tunnel**.\n\n4. Choose **Cloudflared** for the connector type and select **Next**.\n\n5. Enter a name for your tunnel (for example, `gke-tunnel`).\n\n6. Select **Save tunnel**.\n\n7. Under **Choose an environment**, select **Docker**.\n\n   Applications must be packaged into a containerized image before you can run it in Kubernetes. Therefore, we will use the `cloudflared` Docker container image to deploy the tunnel in Kubernetes.\n\n8. Instead of running the installation command, copy just the token value rather than the whole command. The token value is of the form `eyJhIjoiNWFiNGU5Z...` You will need the token for the Kubernetes manifest file.\n\nLeave the Cloudflare Tunnel browser tab open while we focus on the Kubernetes deployment.\n\n## 4. Store the tunnel token\n\n`cloudflared` uses a tunnel token to run a remotely-managed Cloudflare Tunnel. You can store the tunnel token in a [Kubernetes secret](https://kubernetes.io/docs/concepts/configuration/secret/).\n\n1. In GKE Cloud Shell, create a `tunnel-token.yaml` file with the following content. Make sure to replace `<YOUR_TUNNEL_TOKEN>` with your tunnel token (`eyJhIjoiNWFiNGU5Z...`).",
      "language": "unknown"
    },
    {
      "code": "2. Create the secret:",
      "language": "unknown"
    },
    {
      "code": "3. Check the newly created secret:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## 5. Create pods for cloudflared\n\nTo run the Cloudflare Tunnel in Kubernetes:\n\n1. Create a Kubernetes deployment for a remotely-managed Cloudflare Tunnel:",
      "language": "unknown"
    },
    {
      "code": "1. Deploy `cloudflared` to the cluster:",
      "language": "unknown"
    },
    {
      "code": "Kubernetes will install the `cloudflared` image on two pods and run the tunnel using the command `cloudflared tunnel --no-autoupdate --loglevel info --metrics 0.0.0.0:2000 run`. `cloudflared` will consume the tunnel token from the `TUNNEL_TOKEN` environment variable.\n\n2. Check the status of your cluster:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "You should see two `cloudflared` pods and two `httpbin` pods with a `Running` status. If your `cloudflared` pods keep restarting, check the `command` syntax in `tunnel.yaml` and make sure that the [tunnel run parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/) are in the correct order.\n\n## 6. Verify tunnel status\n\nTo print logs for a `cloudflared` instance:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## 7. Add a tunnel route\n\nNow that the tunnel is up and running, we can use the Zero Trust dashboard to route the httpbin service through the tunnel.\n\n1. Switch to the browser tab where you were configuring Cloudflare Tunnel.\n\n2. Go to the **Route tunnel** step.\n\n3. In the **Public hostnames** tab, enter a hostname for the application (for example, `httpbin.<your-domain>.com`).\n\n4. Under **Service**, enter `http://httpbin-service`. `httpbin-service` is the name of the Kubernetes service defined in `httpbinsvc.yaml`.\n\n5. Select **Complete setup**.\n\n## 8. Test the connection\n\nTo test, open a new browser tab and go to `httpbin.<your-domain>.com`. You should see the httpbin homepage.\n\nYou can optionally [create an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/) to control who can access the service.\n\n</page>\n\n<page>\n---\ntitle: Quick Tunnels · Cloudflare One docs\ndescription: Developers can use the TryCloudflare tool to experiment with\n  Cloudflare Tunnel without adding a site to Cloudflare's DNS. TryCloudflare\n  will launch a process that generates a random subdomain on trycloudflare.com.\n  Requests to that subdomain will be proxied through the Cloudflare network to\n  your web server running on localhost.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/trycloudflare/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/trycloudflare/index.md\n---\n\nDevelopers can use the TryCloudflare tool to experiment with Cloudflare Tunnel without adding a site to Cloudflare's DNS. TryCloudflare will launch a process that generates a random subdomain on `trycloudflare.com`. Requests to that subdomain will be proxied through the Cloudflare network to your web server running on localhost.\n\n## Use TryCloudflare\n\n1. Follow [these instructions](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/) to install `cloudflared`. If you have an older copy, update to 2020.5.1 or later.\n2. Launch a web server that is available over localhost to `cloudflared`.\n3. Run the following terminal command to start a free tunnel.",
      "language": "unknown"
    },
    {
      "code": "`cloudflared` will generate a random subdomain when connecting to the Cloudflare network and print it in the terminal for you to use and share. The output will serve traffic from the server on your local machine to the public Internet, using Cloudflare's Argo Smart Routing, at a public URL.\n\nNote\n\nTryCloudflare quick tunnels are currently not supported if a `config.yaml` configuration file is present in the `.cloudflared` directory. It may be necessary to rename that file temporarily to use the feature.\n\n## FAQ\n\n### What are some example use cases for TryCloudflare?\n\n* Create a web server for a project on your laptop that you want to share with others on different networks\n* Test browser compatibility for a new site by creating a free Tunnel and testing the link in different browsers\n* Run speed tests from different regions by using a tool like Pingdom or WebPageTest to connect to the randomly-generated subdomain created by TryCloudflare\n\n### Why does Cloudflare provide this service for free?\n\n* We want more users to experience the speed and security improvements of Cloudflare Tunnel (and Argo Smart Routing). We hope you test it with TryCloudflare and decide to add it to your production sites.\n* Cloudflare's features historically require you to own a domain, set that domain's DNS to Cloudflare's nameservers, and configure its DNS records before you can begin to use any services. We hope to make more and more of our products available to trial without that burden.\n* We don't guarantee any SLA or uptime of TryCloudflare - we plan to test new Cloudflare Tunnel features and improvements on these free tunnels. This provides us with a group of connections to test before we deploy to production customers. Free tunnels are meant to be used for testing and development, not for deploying a production website.\n\n### Limitations\n\n* Quick Tunnels are subject to a hard limit on the number of concurrent requests that can be proxied at any point in time. Currently, this limit is 200 in-flight requests. If a Quick Tunnel hits this limit, the HTTP response will return a `429` status code.\n* Quick Tunnels do not support Server-Sent Events (SSE).\n\nThese limitations only apply to Quick Tunnels. To avoid these limitations, [sign up](https://dash.cloudflare.com/sign-up) for a Cloudflare account and [create a Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/).\n\n### Legal\n\nYour installation of cloudflared software constitutes a symbol of your signature indicating that you accept the terms of the [Cloudflare License](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/license/), [Terms](https://www.cloudflare.com/terms/) and [Privacy Policy](https://www.cloudflare.com/privacypolicy/).\n\n</page>\n\n<page>\n---\ntitle: Copyrights · Cloudflare One docs\ndescription: View associated copyrights.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/copyrights/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/copyrights/index.md\n---\n\n***\n\n<https://github.com/BurntSushi/toml>\n\nThe MIT License (MIT)\n\nCopyright (c) 2013 TOML authors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n<https://github.com/Sirupsen/logrus>\n\nThe MIT License (MIT)\n\nCopyright (c) 2014 Simon Eskildsen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n<https://github.com/beorn7/perks/>\n\nCopyright (C) 2013 Blake Mizerany\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n<https://github.com/certifi/gocertifi>\n\nThis Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <http://mozilla.org/MPL/2.0/>.\n\n***\n\n<https://github.com/coreos/go-oidc/> <https://github.com/coreos/go-systemd/>\n\nApache License Version 2.0, January 2004 <http://www.apache.org/licenses/>\n\nTERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n1. Definitions.\n\n   \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.\n\n   \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.\n\n   \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.\n\n   \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License.\n\n   \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.\n\n   \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.\n\n   \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).\n\n   \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.\n\n   \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\"\n\n   \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.\n\n2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.\n\n3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.\n\n4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:\n\n   (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and\n\n   (b) You must cause any modified files to carry prominent notices stating that You changed the files; and\n\n   (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and\n\n   (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.\n\n   You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.\n\n5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.\n\n6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.\n\n7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.\n\n8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.\n\n9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.\n\nEND OF TERMS AND CONDITIONS\n\nAPPENDIX: How to apply the Apache License to your work.",
      "language": "unknown"
    },
    {
      "code": "Copyright \\[yyyy] \\[name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at",
      "language": "unknown"
    },
    {
      "code": "Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n\n***\n\n<https://github.com/facebookgo/grace>\n\nBSD License\n\nFor grace software\n\nCopyright (c) 2015, Facebook, Inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n* Neither the name Facebook nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n***\n\n<https://github.com/getsentry/raven-go>\n\nCopyright (c) 2013 Apollic Software, LLC. All rights reserved. Copyright (c) 2015 Functional Software, Inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n* Neither the name of Apollic Software, LLC nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n***\n\n<https://github.com/glycerine/rbtree>\n\nCopyright (C) 2012 Yasushi Saito\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n<https://github.com/golang/protobuf>\n\nGo support for Protocol Buffers - Google's data interchange format\n\nCopyright 2010 The Go Authors. All rights reserved. <https://github.com/golang/protobuf>\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:",
      "language": "unknown"
    },
    {
      "code": "notice, this list of conditions and the following disclaimer. \\* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. \\* Neither the name of Google Inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n***\n\n<https://github.com/lib/pq>\n\nCopyright (c) 2011-2013, 'pq' Contributors Portions Copyright (C) 2011 Blake Mizerany\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n[https://godoc.org/github.com/matttproud/golang\\\\\\_protobuf\\\\\\_extensions/pbutil](https://godoc.org/github.com/matttproud/golang%5C_protobuf%5C_extensions/pbutil)",
      "language": "unknown"
    },
    {
      "code": "TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n1. Definitions.\n\n   \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.\n\n   \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.\n\n   \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.\n\n   \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License.\n\n   \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.\n\n   \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.\n\n   \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).\n\n   \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.\n\n   \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\"\n\n   \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.\n\n2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.\n\n3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.\n\n4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:\n\n   (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and\n\n   (b) You must cause any modified files to carry prominent notices stating that You changed the files; and\n\n   (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and\n\n   (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.\n\n   You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.\n\n5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.\n\n6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.\n\n7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.\n\n8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.\n\n9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.\n\nEND OF TERMS AND CONDITIONS\n\nAPPENDIX: How to apply the Apache License to your work.",
      "language": "unknown"
    },
    {
      "code": "Copyright \\[yyyy] \\[name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at",
      "language": "unknown"
    },
    {
      "code": "Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n\n***\n\n<https://github.com/mitchellh/go-homedir>\n\nThe MIT License (MIT)\n\nCopyright (c) 2013 Mitchell Hashimoto\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n<https://github.com/pkg/errors>\n\nCopyright (c) 2015, Dave Cheney <dave@cheney.net> All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n***\n\n<https://github.com/prometheus/client_golang> <https://github.com/prometheus/client_model> <https://github.com/prometheus/common> <https://github.com/prometheus/procfs>",
      "language": "unknown"
    },
    {
      "code": "TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n1. Definitions.\n\n   \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.\n\n   \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.\n\n   \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.\n\n   \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License.\n\n   \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.\n\n   \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.\n\n   \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).\n\n   \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.\n\n   \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\"\n\n   \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.\n\n2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.\n\n3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.\n\n4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:\n\n   (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and\n\n   (b) You must cause any modified files to carry prominent notices stating that You changed the files; and\n\n   (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and\n\n   (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.\n\n   You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.\n\n5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.\n\n6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.\n\n7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.\n\n8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.\n\n9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.\n\nEND OF TERMS AND CONDITIONS\n\nAPPENDIX: How to apply the Apache License to your work.",
      "language": "unknown"
    },
    {
      "code": "Copyright \\[yyyy] \\[name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at",
      "language": "unknown"
    },
    {
      "code": "Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n\n***\n\n<https://github.com/urfave/cli>\n\nMIT License\n\nCopyright (c) 2016 Jeremy Saenz & Contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n***\n\n<https://github.com/go-yaml/yaml>",
      "language": "unknown"
    },
    {
      "code": "TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n1. Definitions.\n\n   \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.\n\n   \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.\n\n   \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.\n\n   \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License.\n\n   \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.\n\n   \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.\n\n   \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).\n\n   \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.\n\n   \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\"\n\n   \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.\n\n2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.\n\n3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.\n\n4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:\n\n   (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and\n\n   (b) You must cause any modified files to carry prominent notices stating that You changed the files; and\n\n   (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and\n\n   (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.\n\n   You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.\n\n5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.\n\n6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.\n\n7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.\n\n8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.\n\n9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.\n\nEND OF TERMS AND CONDITIONS\n\nAPPENDIX: How to apply the Apache License to your work.",
      "language": "unknown"
    },
    {
      "code": "Copyright \\[yyyy] \\[name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at",
      "language": "unknown"
    },
    {
      "code": "Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n\n***\n\n<https://zombiezen.com/go/capnproto2>\n\ngo-capnproto is licensed under the terms of the MIT license reproduced below.\n\n\\===============================================================================\n\nCopyright (C) 2014 the go-capnproto authors and contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\\===============================================================================\n\n</page>\n\n<page>\n---\ntitle: License · Cloudflare One docs\ndescription: |-\n  Apache License\n  Version 2.0, January 2004\n  http://www.apache.org/licenses/\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/license/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/license/index.md\n---\n\nApache License Version 2.0, January 2004 <http://www.apache.org/licenses/>",
      "language": "unknown"
    },
    {
      "code": "## Runtime Library Exception to the Apache 2.0 License:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Update cloudflared · Cloudflare One docs\ndescription: Updates will cause cloudflared to restart which will impact traffic\n  currently being served. You can perform zero-downtime upgrades by using\n  Cloudflare's Load Balancer product or by using multiple cloudflared instances.\nlastUpdated: 2025-10-27T16:36:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/index.md\n---\n\nUpdates will cause `cloudflared` to restart which will impact traffic currently being served. You can perform zero-downtime upgrades by using Cloudflare's [Load Balancer product](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/#update-with-cloudflare-load-balancer) or by using [multiple `cloudflared` instances](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/#update-with-multiple-cloudflared-instances).\n\n## Update the `cloudflared` service\n\nRefer to the following commands to update `cloudflared` for a [remotely-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/) created through the dashboard or a [locally-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/). Locally-managed tunnels must be set up to [run as a service](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/as-a-service/) for the following commands to execute successfully.\n\n* Windows\n\n  Run the following command:",
      "language": "unknown"
    },
    {
      "code": "After running `cloudflared update` to update `cloudflared`, you must restart the service for it to take effect. Run:",
      "language": "unknown"
    },
    {
      "code": "* macOS\n\n  1. Update the `cloudflared` package:",
      "language": "unknown"
    },
    {
      "code": "1. Restart the service:",
      "language": "unknown"
    },
    {
      "code": "* Debian\n\n  **If installed via apt:**\n\n  1. Update the `cloudflared` package:",
      "language": "unknown"
    },
    {
      "code": "1. Restart the service:",
      "language": "unknown"
    },
    {
      "code": "**If installed via `dpkg -i`:**\n\n  Use the following commands if you installed `cloudflared` using the `dpkg` package manager.\n\n  You can check if `cloudflared` was installed by a package manager by running `ls -la /usr/local/etc/cloudflared/` and looking for `.installedFromPackageManager` in the output.\n\n  1. Update the `cloudflared` package:",
      "language": "unknown"
    },
    {
      "code": "1. Restart the service:",
      "language": "unknown"
    },
    {
      "code": "* Red Hat\n\n  1. Update the `cloudflared` package:",
      "language": "unknown"
    },
    {
      "code": "1. Restart the service:",
      "language": "unknown"
    },
    {
      "code": "* Docker\n\n  **If you created a remotely-managed tunnel using the [dashboard](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/):**\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n  2. Select your tunnel and select **Edit**.\n  3. Select **Docker** and copy the installation command shown in the dashboard. The copied command will contain your token.\n  4. Paste this command into a terminal window.\n\n  This command creates a new container from the latest `cloudflared` image. You can now delete the old container.\n\n  Warning\n\n  Cloudflare recommends creating remotely-managed tunnels when working with Docker.\n\n  **If you created a remotely or locally-managed tunnel using the [API](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel-api/), run the following command:**",
      "language": "unknown"
    },
    {
      "code": "**If you created a locally-managed tunnel using the [CLI](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/create-local-tunnel/#2-authenticate-cloudflared):**\n\n  1. Mount your local `.cloudflared` [directory](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/local-tunnel-terms/#default-cloudflared-directory) into the Docker container using a volume.\n\n  2. Run the following command to update `cloudflared`:",
      "language": "unknown"
    },
    {
      "code": "* Other\n\n  If you installed `cloudflared` from GitHub-provided binaries or from source, run the following command:",
      "language": "unknown"
    },
    {
      "code": "If you installed `cloudflared` with a package manager, you must update it using the same package manager.\n\n  You can check if `cloudflared` was installed by a package manager by running `ls -la /usr/local/etc/cloudflared/` and looking for `.installedFromPackageManager` in the output.\n\n## Update with Cloudflare Load Balancer\n\nYou can update `cloudflared` without downtime by using Cloudflare's Load Balancer product with your Cloudflare Tunnel deployment.\n\n1. Install a new instance of `cloudflared` and [create](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/) a new Tunnel.\n2. Configure the instance to point traffic to the same locally-available service as your current, active instance of `cloudflared`.\n3. [Add the address](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/) of the new instance of `cloudflared` into your Load Balancer pool as priority 2.\n4. Swap the priority such that the new instance is now priority 1 and monitor to confirm traffic is being served.\n5. Once confirmed, you can remove the older version from the Load Balancer pool.\n\n## Update with multiple `cloudflared` instances\n\nIf you are not using Cloudflare's Load Balancer, you can use multiple instances of `cloudflared` to update without the risk of downtime.\n\n1. Install a new instance of `cloudflared` and [create](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/) a new Tunnel.\n2. Configure the instance to point traffic to the same locally-available service as your current, active instance of `cloudflared`.\n3. In the Cloudflare DNS dashboard, [replace](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/dns/) the address of the current instance of `cloudflared` with the address of the new instance. Save the record.\n4. Remove the now-inactive instance of `cloudflared`.\n\nTraffic handling\n\nWhen the old replica is stopped, it will drop long-lived HTTP requests (for example, WebSocket) and TCP connections (for example, SSH). UDP flows will also be dropped, as they are modeled based on timeouts. When the new replica connects, it will handle all new traffic, including new HTTP requests, TCP connections, and UDP flows.\n\n### Run multiple instances in Windows\n\nWindows systems require services to have a unique name and display name. You can run multiple instances of `cloudflared` by creating `cloudflared` services with unique names.\n\n1. Install and configure `cloudflared`.\n2. Next, create a service with a unique name and point to the `cloudflared` executable and configuration file.",
      "language": "unknown"
    },
    {
      "code": "1. Proceed to create additional services with unique names.\n\n2. You can now start each unique service.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Create a tunnel (dashboard) · Cloudflare One docs\ndescription: Follow this step-by-step guide to create your first\n  remotely-managed tunnel using Cloudflare One.\nlastUpdated: 2025-12-23T16:56:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/index.md\n---\n\nFollow this step-by-step guide to create your first [remotely-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/tunnel-useful-terms/#remotely-managed-tunnel) using Cloudflare One.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n## 1. Create a tunnel\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com) and go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n2. Select **Create a tunnel**.\n\n3. Choose **Cloudflared** for the connector type and select **Next**.\n\n4. Enter a name for your tunnel. We suggest choosing a name that reflects the type of resources you want to connect through this tunnel (for example, `enterprise-VPC-01`).\n\n5. Select **Save tunnel**.\n\n6. Next, you will need to install `cloudflared` and run it. To do so, check that the environment under **Choose an environment** reflects the operating system on your machine, then copy the command in the box below and paste it into a terminal window. Run the command.\n\n7. Once the command has finished running, your connector will appear in Cloudflare One.\n\n   ![Connector appearing in the UI after cloudflared has run](https://developers.cloudflare.com/_astro/connector.BnVS4T_M_ZUMQ9r.webp)\n\n8. Select **Next**.\n\nThe next steps depend on whether you want to [publish an application to the Internet](#2a-publish-an-application) or [connect a private network](#2b-connect-a-network).\n\n## 2a. Publish an application\n\nFollow these steps to publish an application to the Internet. If you are looking to connect a private resource, skip to the [Connect a network](#2b-connect-a-network) section.\n\nPrerequisites\n\nBefore you publish an application through your tunnel, you must [add a website to Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/).\n\nTo add a published application when creating a new tunnel:\n\n1. Go to the **Published applications** tab.\n\n2. Enter a subdomain and select a **Domain** from the drop-down menu. Specify any subdomain or path information.\n\n   Note\n\n   If you add a multi-level subdomain (more than one level of subdomain), you must [order an Advanced Certificate for the hostname](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/#i-see-this-site-cant-provide-a-secure-connection).\n\n3. Under **Service**, choose a [service type](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/protocols/) and specify its URL. For example,\n\n   * **Type**: *HTTP*\n   * **URL**: `localhost:8000`\n\n4. Under **Additional application settings**, specify any [parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/) you would like to add to your tunnel configuration.\n\n   ![Example of a published application route in the Cloudflare One dashboard](https://developers.cloudflare.com/_astro/published-app.CZQbD1Bb_Z2hcwo6.webp)\n\n5. Select **Save**.\n\nAnyone on the Internet can now access the application at the specified hostname. To allow or block specific users, [create an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/).\n\n## 2b. Connect a network\n\nTo connect a private network through your tunnel:\n\n1. Go to the **CIDR** tab.\n2. In **CIDR**, enter the private IP address or CIDR range of your service (for example, `10.0.0.1` or `10.0.0.0/24`).\n3. Select **Complete setup**.\n\n`cloudflared` can now route traffic to these destination IPs. To configure Zero Trust policies and connect as a user, refer to [Connect an IP/CIDR](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/).\n\nNote\n\nIf you would like to route to a private application using its hostname instead of its IP, refer to [Connect a private hostname](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-private-hostname/).\n\n## 3. View your tunnel\n\nAfter saving the tunnel, you will be redirected to the **Networks** > **Connectors** page. Your tunnel should be listed with a `Healthy` status. If your tunnel status is `Inactive`, `Down`, or `Degraded`, refer to the [troubleshooting documentation](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/common-errors/#tunnel-status) for recommended next steps.\n\n</page>\n\n<page>\n---\ntitle: Locally-managed tunnels · Cloudflare One docs\ndescription: A locally-managed tunnel is a Cloudflare Tunnel created by running\n  cloudflared tunnel create <NAME> on the command line. Tunnel configuration is\n  stored in your local cloudflared directory.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/index.md\n---\n\nA locally-managed tunnel is a Cloudflare Tunnel created by running `cloudflared tunnel create <NAME>` on the command line. Tunnel configuration is stored in your local [cloudflared directory](#default-cloudflared-directory).\n\nNote\n\nCloudflare recommends setting up a [remotely-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/). Remotely-managed configurations are stored on Cloudflare, which allows you to manage the tunnel from any machine using the dashboard, API, or Terraform.\n\n* [Create a locally-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/create-local-tunnel/)\n* [Configuration file](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/configuration-file/)\n* [Run as a service](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/as-a-service/)\n* [Useful commands](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/tunnel-useful-commands/)\n* [Tunnel permissions](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/tunnel-permissions/)\n* [Useful terms](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/local-tunnel-terms/)\n\n</page>\n\n<page>\n---\ntitle: Useful terms · Cloudflare One docs\ndescription: Review terminology for Cloudflare Tunnels.\nlastUpdated: 2025-10-27T16:36:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/tunnel-useful-terms/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/tunnel-useful-terms/index.md\n---\n\nReview terminology for Cloudflare Tunnels.\n\n## Tunnel\n\nA tunnel is a secure, outbound-only pathway you can establish between your origin and Cloudflare's global network. Each tunnel you create will be assigned a [name](#tunnel-name) and a [UUID](#tunnel-uuid).\n\n## Tunnel UUID\n\nA tunnel UUID is an alphanumeric, unique ID assigned to a tunnel. The tunnel UUID can be used whenever you need to reference a specific tunnel.\n\n## Tunnel name\n\nA tunnel name is a unique, user-friendly identifier that you choose for a tunnel. Since a tunnel can proxy traffic to multiple services, tunnel names do not need to be hostnames. For example, you can assign your tunnel a name that represents your application/network, a particular server, or the cloud environment where it runs.\n\n## Connector\n\nThe connector, referred to as `cloudflared`, establishes connectivity from your origin server to the Cloudflare global network. Our connector offers high availability by creating four long-lived connections to two distinct data centers within Cloudflare's global network. This built-in redundancy means that if an individual connection, server, or data center goes down, your origin remains available.\n\n## Replica\n\nYou can create and configure a tunnel once and run that tunnel through multiple, unique instances of the connector, `cloudflared`. These instances are known as replicas. DNS records and Cloudflare Load Balancers will still point to the tunnel and its DNS Record (`UUID.cfargotunnel.com`), while that tunnel sends traffic to the multiple instances of `cloudflared` that run through it. Today, there is no guarantee about which replica will be chosen. Replicas are often deployed to provide tunnels with high availability in the event a given host running `cloudflared` is interrupted or taken offline.\n\n## Remotely-managed tunnel\n\nA remotely-managed tunnel is a [tunnel](#tunnel) that was created in [Cloudflare One](https://one.dash.cloudflare.com/) under **Networks** > **Tunnels**. Tunnel configuration is stored in Cloudflare, which allows you to manage the tunnel from the dashboard or using the [API](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/subresources/cloudflared/subresources/configurations/methods/get/).\n\n## Locally-managed tunnel\n\nA locally-managed tunnel is a [tunnel](#tunnel) that was created by running `cloudflared tunnel create <NAME>` on the command line. Tunnel configuration is stored in your local [cloudflared directory](#default-cloudflared-directory). For terminology specific to locally-managed tunnels, refer to the [Locally-managed tunnel glossary](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/local-tunnel-terms/).\n\n## Quick tunnels\n\nQuick tunnels, when run, will generate a URL that consists of a random subdomain of the website `trycloudflare.com`, and point traffic to localhost on port `8080`. If you have a web service running at that address, users who visit the generated subdomain will be able to visit your web service through Cloudflare's network. Refer to [TryCloudflare](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/trycloudflare/) for more information on how to run quick tunnels.\n\n## Virtual networks\n\nA [virtual network](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/tunnel-virtual-networks/) is a software abstraction that allows you to logically segregate resources on your private network. Virtual networks are especially useful for exposing resources which have overlapping IP routes. To connect to a resource, end users would select a virtual network in their WARP client settings before entering the destination IP.\n\n</page>\n\n<page>\n---\ntitle: Create a tunnel (API) · Cloudflare One docs\ndescription: Follow this guide to set up a Cloudflare Tunnel using the API.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel-api/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel-api/index.md\n---\n\nFollow this guide to set up a Cloudflare Tunnel using the API.\n\nBefore you deploy\n\nBefore deploying your tunnel, run [connectivity pre-checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/) to validate that your environment can connect to Cloudflare Tunnel endpoints. These tests verify DNS resolution and network connectivity on port `7844`, helping you identify and resolve firewall or DNS issues before deployment. Running these checks sets your deployment up for success and helps narrow down the cause of any later connectivity issues.\n\n## Create an API token\n\n[Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with the following permissions:\n\n| Type | Item | Permission |\n| - | - | - |\n| Account | Cloudflare Tunnel | Edit |\n| Zone | DNS | Edit |\n\n## 2. Create a tunnel\n\nMake a `POST` request to the [Cloudflare Tunnel](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/subresources/cloudflared/methods/create/) endpoint:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Cloudflare One Connectors Write`\n* `Cloudflare One Connector: cloudflared Write`\n* `Cloudflare Tunnel Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Copy the `id` and `token` values shown in the output. You will need these values to configure and run the tunnel.\n\nThe next steps depend on whether you want to [publish an application to the Internet](#3a-publish-an-application) or [connect a private network](#3b-connect-a-network).\n\n## 3a. Publish an application\n\nBefore you publish an application through your tunnel, you must:\n\n* [Add a website to Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/).\n* [Change your domain nameservers to Cloudflare](https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/).\n\nFollow these steps to publish an application to the Internet. If you are looking to connect a private resource, skip to the [Connect a network](#3b-connect-a-network) section.\n\n1. Make a [`PUT` request](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/subresources/cloudflared/subresources/configurations/methods/update/) to route your [local service URL](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/protocols/) to a public hostname. For example,\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Cloudflare One Connectors Write`\n   * `Cloudflare One Connector: cloudflared Write`\n   * `Cloudflare Tunnel Write`",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   If you add a multi-level subdomain (more than one level of subdomain), you must [order an Advanced Certificate for the hostname](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/#i-see-this-site-cant-provide-a-secure-connection).\n\n   Your ingress rules must include a catch-all rule at the end. In this example, `cloudflared` will respond with a 404 status code when the request does not match any of the previous hostnames.\n\n2. [Create a DNS record](https://developers.cloudflare.com/api/resources/dns/subresources/records/methods/create/) for your application:\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `DNS Write`",
      "language": "unknown"
    },
    {
      "code": "This DNS record allows Cloudflare to proxy `app.example.com` traffic to your Cloudflare Tunnel (`<tunnel-id>.cfargotunnel.com`).\n\nThis application will be publicly available on the Internet once you [run the tunnel](#4-install-and-run-the-tunnel). To allow or block specific users, [create an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/).\n\n## 3b. Connect a network\n\nTo connect a private network through your tunnel, [add a tunnel route](https://developers.cloudflare.com/api/resources/zero_trust/subresources/networks/subresources/routes/methods/create/):\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Cloudflare One Networks Write`\n* `Cloudflare Tunnel Write`",
      "language": "unknown"
    },
    {
      "code": "`cloudflared` can now route traffic to these destination IPs. To configure Zero Trust policies and connect as a user, refer to [Connect private networks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/).\n\n## 4. Install and run the tunnel\n\nInstall `cloudflared` on your server and run the tunnel using the `token` value obtained in [2. Create a tunnel](#2-create-a-tunnel). You can also get the tunnel token using the [Cloudflare Tunnel token](https://developers.cloudflare.com/api/resources/zero_trust/subresources/tunnels/subresources/cloudflared/subresources/token/methods/get/) endpoint.\n\n* Linux\n\n  1. [Download and install](https://pkg.cloudflare.com/index.html) `cloudflared`.\n\n  2. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Windows\n\n  1. [Download and install](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/#windows) `cloudflared`.\n\n  2. Open Command Prompt as administrator.\n\n  3. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* macOS\n\n  1. [Download and install](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/#macos) `cloudflared`.\n\n  2. Open a terminal window and run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Docker\n\n  1. Open a terminal window.\n\n  2. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "## 5. Verify tunnel status\n\nTo check if the tunnel is serving traffic:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Cloudflare One Connectors Write`\n* `Cloudflare One Connectors Read`\n* `Cloudflare One Connector: cloudflared Write`\n* `Cloudflare One Connector: cloudflared Read`\n* `Cloudflare Tunnel Write`\n* `Cloudflare Tunnel Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "A healthy tunnel will have four connections to Cloudflare's network.\n\n</page>\n\n<page>\n---\ntitle: Tunnel log streams · Cloudflare One docs\ndescription: Tunnel logs record all activity between a cloudflared instance and\n  Cloudflare's global network, as well as all activity between cloudflared and\n  your origin server. These logs allow you to investigate connectivity or\n  performance issues with a Cloudflare Tunnel. You can configure your server to\n  store persistent logs, or you can stream real-time logs from any client\n  machine.\nlastUpdated: 2025-12-10T20:39:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/index.md\n---\n\nTunnel logs record all activity between a `cloudflared` instance and Cloudflare's global network, as well as all activity between `cloudflared` and your origin server. These logs allow you to investigate connectivity or performance issues with a Cloudflare Tunnel. You can configure your server to store persistent logs, or you can stream real-time logs from any client machine.\n\n## View logs on the server\n\nIf you have access to the origin server, you can use the [`--loglevel` flag](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#loglevel) to enable logging when you start the tunnel. By default, `cloudflared` prints logs to stdout and does not store logs on the server. You can optionally use the [`--logfile` flag](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#logfile) to write your logs to a file.\n\nTo enable logs for a locally-managed tunnel:",
      "language": "unknown"
    },
    {
      "code": "To enable logs for a remotely-managed tunnel, add `--loglevel info` and `--logfile <PATH>` to your system service as shown in [Add tunnel run parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/#update-tunnel-run-parameters).\n\n## View logs on your local machine\n\nYou can view real-time logs for a Cloudflare Tunnel via the dashboard or from any machine that has `cloudflared` installed. With remote log streams, you do not need to SSH into the server that is running the tunnel. To get remote logs, the tunnel must be active and able to receive requests.\n\n### Dashboard\n\nNote\n\nTunnel log streams require [edit permissions](https://developers.cloudflare.com/fundamentals/manage-members/roles/) for Cloudflare Tunnel. Due to the sensitive nature of these logs, read-only roles (such as `Zero Trust Read Only`) do not have access.\n\nDashboard log streams are only available for remotely-managed tunnels. To view logs from the dashboard:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels** and select a remotely-managed tunnel.\n2. In the sidebar, select the **Connector ID** for the `cloudflared` instance you want to view.\n3. Select **Begin log stream**.\n\n### CLI\n\nThe `cloudflared` daemon can stream logs from any tunnel in your account to the local command line. `cloudflared` must be installed on both your local machine and the origin server.\n\n#### View logs\n\n1. On your local machine, authenticate `cloudflared` to your Cloudflare One account:",
      "language": "unknown"
    },
    {
      "code": "2. Run `cloudflared tail` for a specific tunnel:",
      "language": "unknown"
    },
    {
      "code": "For a more structured view of the JSON message, you can pipe the output to tools like [jq](https://stedolan.github.io/jq/):",
      "language": "unknown"
    },
    {
      "code": "#### Filter logs\n\nYou can filter logs by event type (`--event`), event level (`--level`), or sampling rate (`-sampling`) to reduce the volume of logs streamed from the origin. This helps mitigate the performance impact on the origin, especially when the origin is normally under high load. For example:",
      "language": "unknown"
    },
    {
      "code": "| Flag | Description | Allowed values | Default value |\n| - | - | - | - |\n| `--event` | Filter by the type of event / request. | `cloudflared`, `http`, `tcp`, `udp` | All events |\n| `--level` | Return logs at this level and above. Works independently of the [`--loglevel`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#loglevel) setting on the server. | `debug`, `info`, `warn`, `error`, `fatal` | `debug` |\n| `--sampling` | Sample a fraction of the total logs. | Number from `0.0` to `1.0` | `1.0` |\n| | | | |\n\n#### View logs for a replica\n\nIf you are running multiple `cloudflared` instances for the same tunnel (also known as [replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/)), you must specify an individual instance to stream logs from:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels** and select your tunnel.\n\n2. Find the **Connector ID** for the `cloudflared` instance you want to view.\n\n3. Specify the Connector ID in `cloudflared tail`:",
      "language": "unknown"
    },
    {
      "code": "### Performance considerations\n\n* The logging session will only be held open for one hour. All logging systems introduce some level of performance overhead, and this limit helps prevent long term impact to your tunnel's end-to-end latencies.\n* When streaming logs for a high throughput tunnel, Cloudflare intentionally prioritizes service stability over log delivery. To reduce the number of dropped logs, try [requesting fewer logs](#filter-logs). To ensure that you are seeing all logs, [view logs on the server](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/#view-logs-on-the-server) instead of streaming the logs remotely.\n\n</page>\n\n<page>\n---\ntitle: Tunnel metrics · Cloudflare One docs\ndescription: Tunnel metrics show a Cloudflare Tunnel's throughput and resource\n  usage over time. When you run a tunnel, cloudflared will spin up a Prometheus\n  metrics endpoint — an HTTP server that exposes metrics in Prometheus format.\n  You can use the Prometheus toolkit on a remote machine to scrape metrics data\n  from the cloudflared server.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/index.md\n---\n\nTunnel metrics show a Cloudflare Tunnel's throughput and resource usage over time. When you run a tunnel, `cloudflared` will spin up a Prometheus metrics endpoint — an HTTP server that exposes metrics in [Prometheus](https://prometheus.io/docs/introduction/overview/) format. You can use the Prometheus toolkit on a remote machine to scrape metrics data from the `cloudflared` server.\n\n## Default metrics server address\n\nIn non-containerized environments, `cloudflared` starts the metrics server on `127.0.0.1:<PORT>/metrics`, where `<PORT>` is the first available port in the range `20241` to `20245`. In case of all ports being unavailable then the fallback is to bind to a random port. In containerized environments such as Docker and Kubernetes, the default address is `0.0.0.0:<PORT>/metrics`.\n\nTo determine the default port being used by a `cloudflared` instance, you can check your [Tunnel logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/) around the time when the tunnel started. For example:",
      "language": "unknown"
    },
    {
      "code": "## Configure the metrics server address\n\nTo serve metrics on a custom IP address and port, perform these steps on the `cloudflared` host:\n\n1. Run the tunnel using the [--metrics](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#metrics) flag. Here is an example command for a locally-managed tunnel:",
      "language": "unknown"
    },
    {
      "code": "To learn how to add the `--metrics` flag to a remotely-managed tunnel, refer to [Configure a remotely-managed tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/#update-tunnel-run-parameters).\n\n   Note\n\n   If you plan to fetch metrics from another machine on the local network, replace `127.0.0.1` with the internal IP of the `cloudflared` server (for example, `198.168.x.x`). To serve metrics on all available network interfaces, use `0.0.0.0`.\n\n2. Verify that the metrics server is running by going to `http://localhost:60123/metrics`. This will only work if you configured a localhost IP (`127.0.0.1` or `0.0.0.0`).\n\nYou can now export the metrics to Prometheus and Grafana in order to visualize and query the data. Refer to our [tutorial](https://developers.cloudflare.com/cloudflare-one/tutorials/grafana/) for instructions on getting started with these tools.\n\n## Available metrics\n\n### cloudflared metrics\n\n| Name | Description | Type | Labels |\n| - | - | - | - |\n| `build_info` | Build and version information. | GAUGE | `goversion`, `revision`, `type`, `version` |\n| `cloudflared_config_local_config_pushes` | Number of local configuration pushes to Cloudflare. | COUNTER | |\n| `cloudflared_config_local_config_pushes_errors` | Number of errors that occurred during local configuration pushes. | COUNTER | |\n| `cloudflared_orchestration_config_version` | Configuration version. | GAUGE | |\n| `cloudflared_tcp_active_sessions` | Concurrent number of TCP sessions that are being proxied to any origin. | GAUGE | |\n| `cloudflared_tcp_total_sessions` | Total number of TCP sessions that have been proxied to any origin. | COUNTER | |\n| `cloudflared_tunnel_active_streams` | Total number of active streams. | GAUGE | |\n| `cloudflared_tunnel_concurrent_requests_per_tunnel` | Concurrent number of requests proxied through each tunnel. | GAUGE | |\n| `cloudflared_tunnel_ha_connections` | Number of active HA connections. | GAUGE | |\n| `cloudflared_tunnel_request_errors` | Number of errors proxying to origin. | COUNTER | |\n| `cloudflared_tunnel_server_locations` | Where each tunnel is connected to. `1` means current location, `0` means previous locations. | GAUGE | `connection_id`, `edge_location` |\n| `cloudflared_tunnel_timer_retries` | Unacknowledged heart beats count. | GAUGE | |\n| `cloudflared_tunnel_total_requests` | Number of requests proxied through all tunnels. | COUNTER | |\n| `cloudflared_tunnel_tunnel_authenticate_success` | Number of successful tunnel authentication events. | COUNTER | |\n| `cloudflared_tunnel_tunnel_register_success` | Number of successful tunnel registrations. | COUNTER | `rpcName` |\n| `cloudflared_udp_active_sessions` | Concurrent number of UDP sessions that are being proxied to any origin. | GAUGE | |\n| `cloudflared_udp_total_sessions` | Total number of UDP sessions that have been proxied to any origin. | COUNTER | |\n| `coredns_panics_total` | Number of panics. | COUNTER | |\n| `quic_client_closed_connections` | Number of connections that have been closed. | COUNTER | |\n| `quic_client_latest_rtt` | Latest round-trip time (RTT) measured on a connection. | GAUGE | `conn_index` |\n| `quic_client_lost_packets` | Number of packets that have been lost from a connection. | COUNTER | `conn_index`, `reason` |\n| `quic_client_min_rtt` | Lowest RTT measured on a connection in ms. | GAUGE | `conn_index` |\n| `quic_client_packet_too_big_dropped` | Number of packets received from origin that are too big to send to Cloudflare and are dropped as a result. | COUNTER | |\n| `quic_client_smoothed_rtt` | Smoothed RTT calculated for a connection in ms. | GAUGE | `conn_index` |\n| `quic_client_total_connections` | Number of connections initiated. For all QUIC metrics, client means the side initiating the connection. | COUNTER | |\n\n### Prometheus metrics\n\n| Name | Description | Type | Labels |\n| - | - | - | - |\n| `promhttp_metric_handler_requests_in_flight` | Current number of scrapes being served. | GAUGE | |\n| `promhttp_metric_handler_requests_total` | Total number of scrapes by HTTP status code. | COUNTER | `code` |\n| | | | |\n\n### Go runtime metrics\n\n| Name | Description | Type | Labels |\n| - | - | - | - |\n| `go_gc_duration_seconds` | A summary of the pause duration of garbage collection cycles. | SUMMARY | |\n| `go_goroutines` | Number of goroutines that currently exist. | GAUGE | |\n| `go_info` | Information about the Go environment. | GAUGE | `version` |\n| `go_memstats_alloc_bytes` | Number of bytes allocated and still in use. | GAUGE | |\n| `go_memstats_alloc_bytes_total` | Total number of bytes allocated, even if freed. | COUNTER | |\n| `go_memstats_buck_hash_sys_bytes` | Number of bytes used by the profiling bucket hash table. | GAUGE | |\n| `go_memstats_frees_total` | Total number of frees. | COUNTER | |\n| `go_memstats_gc_sys_bytes` | Number of bytes used for garbage collection system metadata. | GAUGE | |\n| `go_memstats_heap_alloc_bytes` | Number of heap bytes allocated and still in use. | GAUGE | |\n| `go_memstats_heap_idle_bytes` | Number of heap bytes waiting to be used. | GAUGE | |\n| `go_memstats_heap_inuse_bytes` | Number of heap bytes that are in use. | GAUGE | |\n| `go_memstats_heap_objects` | Number of allocated objects. | GAUGE | |\n| `go_memstats_heap_released_bytes` | Number of heap bytes released to OS. | GAUGE | |\n| `go_memstats_heap_sys_bytes` | Number of heap bytes obtained from system. | GAUGE | |\n| `go_memstats_last_gc_time_seconds` | Number of seconds since 1970 of last garbage collection. | GAUGE | |\n| `go_memstats_lookups_total` | Total number of pointer lookups. | COUNTER | |\n| `go_memstats_mallocs_total` | Total number of mallocs. | COUNTER | |\n| `go_memstats_mcache_inuse_bytes` | Number of bytes in use by mcache structures. | GAUGE | |\n| `go_memstats_mcache_sys_bytes` | Number of bytes used for mcache structures obtained from system. | GAUGE | |\n| `go_memstats_mspan_inuse_bytes` | Number of bytes in use by mspan structures. | GAUGE | |\n| `go_memstats_mspan_sys_bytes` | Number of bytes used for mspan structures obtained from system. | GAUGE | |\n| `go_memstats_next_gc_bytes` | Number of heap bytes when next garbage collection will take place. | GAUGE | |\n| `go_memstats_other_sys_bytes` | Number of bytes used for other system allocations. | GAUGE | |\n| `go_memstats_stack_inuse_bytes` | Number of bytes in use by the stack allocator. | GAUGE | |\n| | | | |\n\n</page>\n\n<page>\n---\ntitle: Notifications · Cloudflare One docs\ndescription: Administrators can receive an alert when Cloudflare Tunnels in an\n  account change their health or deployment status. Notifications can be\n  delivered via email, webhook, and third-party services.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/notifications/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/notifications/index.md\n---\n\nAdministrators can receive an alert when Cloudflare Tunnels in an account change their health or deployment status. Notifications can be delivered via email, webhook, and third-party services.\n\n## Manage notifications\n\nTunnel notifications are configured on the [Cloudflare dashboard](https://dash.cloudflare.com/). For more information, refer to [Create a notification](https://developers.cloudflare.com/notifications/get-started/#create-a-notification).\n\n## Available notifications\n\nTunnel Creation or Deletion Event\n\n**Who is it for?**\n\nCustomers who want to receive a notification when Cloudflare Tunnels are created or deleted in their account.\n\n**Other options / filters**\n\nNone.\n\n**Included with**\n\nAll Cloudflare Zero Trust plans.\n\n**What should you do if you receive one?**\n\nNo action is needed.\n\nTunnel Health Alert\n\n**Who is it for?**\n\nCustomers who want to be warned about changes in health status for their Cloudflare Tunnels.\n\n**Other options / filters**\n\nNone.\n\n**Included with**\n\nAll Cloudflare Zero Trust plans.\n\n**What should you do if you receive one?**\n\nMonitor tunnel health over time and consider deploying [`cloudflared` replicas or load balancers](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/).\n\n**Additional information**\n\nRefer to [Tunnel status](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/common-errors/#tunnel-status) to review the list of possible tunnel statuses (`Healthy`, `Inactive`, `Down` and `Degraded`).\n\n</page>\n\n<page>\n---\ntitle: Connect with cloudflared · Cloudflare One docs\ndescription: cloudflared is a daemon service that can run on nearly any host\n  machine in your private network and proxies local traffic once validated from\n  the Cloudflare network. The Cloudflare Tunnel created by cloudflared is\n  outbound-only, meaning that it will only proxy requests initiated from a user\n  to your private network. Requests made by a service or application running\n  behind the tunnel will use the server's default routing table.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/index.md\n---\n\n`cloudflared` is a daemon service that can run on nearly any host machine in your private network and proxies local traffic once validated from the Cloudflare network. The Cloudflare Tunnel created by `cloudflared` is outbound-only, meaning that it will only proxy requests initiated from a user to your private network. Requests made by a service or application running behind the tunnel will use the server's default routing table.\n\nOn the client side, end users connect to Cloudflare's global network using the Cloudflare WARP client. The WARP client can be rolled out to your entire organization in just a few minutes using your in-house MDM tooling. When users connect to an IP address or hostname made available through Cloudflare Tunnel, WARP sends their connection through Cloudflare's network and down the corresponding tunnel to the internal service. Traffic to services behind the tunnel will carry the local source IP address of the host machine running the `cloudflared` daemon.\n\n![Diagram displaying connections between a device, Cloudflare, and a private network.](https://developers.cloudflare.com/_astro/private-ips-diagram.BXgaklt9_1RJRC2.webp)\n\nTo enable remote access to your private network, refer to the following guides:\n\n* [**Connect a private hostname**](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-private-hostname/): Route network traffic to an internal application using its hostname.\n* [**Connect an IP/CIDR**](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-cidr/): Route traffic to an internal IP address or CIDR range.\n\n</page>\n\n<page>\n---\ntitle: WARP Connector · Cloudflare One docs\ndescription: \"Cloudflare WARP Connector (beta) is a software client1 that\n  enables site-to-site, bidirectional, and mesh networking connectivity without\n  requiring changes to underlying network routing infrastructure. WARP Connector\n  establishes a secure Layer 3 proxy between a private network and Cloudflare,\n  allowing you to:\"\nlastUpdated: 2025-12-09T10:00:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/index.md\n---\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| Gateway with WARP | All plans |\n\n| System | Availability |\n| - | - |\n| Windows | ❌ |\n| macOS | ❌ |\n| Linux | ✅ |\n| iOS | ❌ |\n| Android | ❌ |\n| ChromeOS | ❌ |\n\nNote\n\nAccounts on Legacy routing mode do not support WARP Connector when [Magic WAN](https://developers.cloudflare.com/magic-wan/) is enabled. Your account needs to be on the Cloudflare One Unified Routing for this to be supported. Contact your account team for more information.\n\nCloudflare WARP Connector (beta) is a software client[1](#user-content-fn-1) that enables site-to-site, bidirectional, and mesh networking connectivity without requiring changes to underlying network routing infrastructure. WARP Connector establishes a secure Layer 3 proxy between a private network and Cloudflare, allowing you to:\n\n* Connect two or more private networks to each other.\n* Connect IoT devices that cannot run external software, such as printers and IP phones.\n* Filter and log server-initiated traffic, such as VoIP and SIP traffic.\n* Apply Zero Trust security policies based on the source IP of the request.\n\n![Two subnets connected with WARP Connector](https://developers.cloudflare.com/_astro/overview.CRSzOP-1_2tbbeT.webp)\n\nAs shown in the diagram, WARP Connector acts as a router for a subnet within the private network to on-ramp and off-ramp traffic through Cloudflare. All devices on the subnet can access any services connected to Cloudflare, and all devices connected to Cloudflare can access any services on the subnet. Each subnet runs a WARP Connector on a designated Linux machine (typically the [default gateway router](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/site-to-internet/#3-route-traffic-from-subnet-to-warp-connector)), but other devices on the network do not need to install software.\n\nTo set up WARP Connector, refer to the guide for your use case:\n\n* **[Site-to-Internet](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/site-to-internet/)**: Send requests from your private network to the Internet.\n* **[Site-to-site](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/site-to-site/)**: Send requests between two or more private networks.\n* **[User-to-site](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/user-to-site/)**: Allow WARP client devices to send requests to your private network.\n* **Internet-to-site**: Not supported by WARP Connector. To provide clientless access to applications on your private network, set up a [Cloudflare Tunnel with `cloudflared`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/) and configure a [published application](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/).\n\n## Footnotes\n\n1. WARP Connector is an extension of the [WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/). [↩](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: Create private networks with WARP-to-WARP · Cloudflare One docs\ndescription: With Cloudflare Zero Trust, you can create a private network\n  between any two or more devices running Cloudflare WARP. This means that you\n  can have a private network between your phone and laptop without ever needing\n  to be connected to the same physical network. If you already have an existing\n  Zero Trust deployment, you can also enable this feature to add\n  device-to-device connectivity to your private network with the press of a\n  button. This will allow you to connect to any service that relies on TCP, UDP,\n  or ICMP-based protocols through Cloudflare's network.\nlastUpdated: 2025-12-02T20:21:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-to-warp/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-to-warp/index.md\n---\n\nWith Cloudflare Zero Trust, you can create a private network between any two or more devices running Cloudflare WARP. This means that you can have a private network between your phone and laptop without ever needing to be connected to the same physical network. If you already have an existing Zero Trust deployment, you can also enable this feature to add device-to-device connectivity to your private network with the press of a button. This will allow you to connect to any service that relies on TCP, UDP, or ICMP-based protocols through Cloudflare's network.\n\nUsers in your organization can reach these services by enrolling into your organization's Zero Trust account. Once enrolled, each device is assigned a virtual IP address in the `100.96.0.0/12` range which will allow users or systems to address these devices directly. Administrators will then be able to build Zero Trust policies to determine who within your organization can reach those virtual IPs.\n\nThis guide covers how to:\n\n* Enable WARP-to-WARP connectivity to establish a private network between your devices.\n* Manage Split Tunnel preferences for the WARP client to determine what traffic should be routed to the Cloudflare global network.\n* Create Zero Trust security policies to restrict access.\n* Connect to virtual IP spaces from WARP devices without any client-side configuration changes.\n\n## Prerequisites\n\n* [Install the Cloudflare WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/) on your devices.\n* [Define device enrollment permissions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/).\n* [Enroll your devices](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) in your Zero Trust organization.\n\n## Enable WARP-to-WARP\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Management**.\n\n2. Select **Peer to peer connectivity**.\n\n3. Enable **Allow all Cloudflare One traffic to reach enrolled devices**. This allows Cloudflare to route traffic to the CGNAT IP space.\n\n4. In your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/), ensure that traffic to `100.96.0.0/12` is going through WARP:\n\n   * Exclude IPs and domains\n\n     If using Split Tunnels in **Exclude** mode:\n\n     1. Delete `100.64.0.0/10` from the list.\n\n     2. We recommend [adding back the IPs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-cidr/#3-route-private-network-ips-through-warp) that are not being used for Zero Trust services. For example, if you are using \\[WARP-to-WARP] alongside [Gateway host selectors](https://developers.cloudflare.com/cloudflare-one/traffic-policies/egress-policies/host-selectors/) or [private hostname routing](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/connect-private-hostname/), add routes to exclude the following IP addresses:\n\n        * `100.64.0.0/12`\n        * `100.81.0.0/16`\n        * `100.82.0.0/15`\n        * `100.84.0.0/14`\n        * `100.88.0.0/13`\n        * `100.112.0.0/12`\n\n   * Include IPs and domains\n\n     If using Split Tunnels in **Include** mode:\n\n     1. Add the required [Zero Trust domains](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-domains) or [IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-ip-addresses) to your Split Tunnel include list.\n     2. [Add a route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) to include `100.96.0.0/12`.\n\nThis will instruct WARP to begin proxying any traffic destined for a `100.96.0.0/12` IP address to Cloudflare for routing and policy enforcement.\n\n## Connect via WARP\n\nOnce enrolled, your users and services will be able to connect to the virtual IPs configured for TCP, UDP, or ICMP-based traffic. You can optionally create [Gateway network policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/) to define the users and devices that can access the `100.96.0.0/12` IP space.\n\n## Troubleshooting\n\n### Check your firewall\n\nVerify that your local firewall allows traffic from the WARP CGNAT IPs. For example, Windows Firewall blocks inbound traffic from `100.96.0.0/12` by default. On Windows devices, you will need to add a firewall rule that allows incoming requests from `100.96.0.0/12` for the desired protocols and/or ports.\n\n</page>\n\n<page>\n---\ntitle: Protocols for published applications · Cloudflare One docs\ndescription: When you add a published application route to a Cloudflare Tunnel,\n  you are instructing Cloudflare to proxy requests for your public hostname to a\n  service running privately behind cloudflared.  The table below lists the\n  service types that can route to a public hostname. Non-HTTP services will\n  require installing cloudflared on the client for end users to connect.\nlastUpdated: 2025-10-23T19:01:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/protocols/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/protocols/index.md\n---\n\nWhen you [add a published application route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#2a-publish-an-application) to a Cloudflare Tunnel, you are instructing Cloudflare to proxy requests for your public hostname to a service running privately behind `cloudflared`. The table below lists the service types that can route to a public hostname. Non-HTTP services will require [installing `cloudflared` on the client](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/) for end users to connect.\n\n| Service type | Description | Example `service` value |\n| - | - | - |\n| HTTP | Incoming requests to Cloudflare over HTTPS are proxied to the local web service via HTTP. | `http://localhost:8000` |\n| HTTPS | Incoming requests to Cloudflare over HTTPS are proxied directly to the local web service. You can [disable TLS verification](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#notlsverify) if your origin uses self-signed certificates. | `https://localhost:8000` |\n| UNIX | Just like HTTP, but using a Unix socket instead. | `unix:/home/production/echo.sock` |\n| TCP | Enables TCP streams over a Websocket connection. `cloudflared` will take the packets received from the Websocket and reach out to the origin using TCP. To [connect to the public hostname over arbitrary TCP](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/arbitrary-tcp/), the user needs to run `cloudflared access tcp`, and there are no guarantees on how long the TCP tunnel will live. For long-lived connections, we recommend using [WARP-to-Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/) instead. | `tcp://localhost:2222` |\n| SSH | Enables SSH streams over a Websocket connection. `cloudflared` will take the packets received from the Websocket and reach out to the origin using SSH. To [connect to the public hostname over SSH](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-cloudflared-authentication/), the client needs to run `cloudflared access ssh`, and there are no guarantees on how long the SSH connection will last. For long-lived connections, we recommend using [WARP-to-Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/) instead. | `ssh://localhost:22` |\n| RDP | Similar to TCP but for RDP streams only. For more information, refer to [Connect to RDP with client-side cloudflared](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/rdp/rdp-cloudflared-authentication/). | `rdp://localhost:3389` |\n| UNIX + TLS | Just like HTTPS, but using a Unix socket instead. | `unix+tls:/home/production/echo.sock` |\n| SMB | Similar to TCP but for SMB streams only. For more information, refer to [Connect to SMB with client-side cloudflared](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/smb/#connect-to-smb-server-with-cloudflared-access). | `smb://localhost:445` |\n| HTTP\\_STATUS | Responds to all requests with the given HTTP status. | `http_status:404` |\n| BASTION | `cloudflared` will act like a jumphost, allowing access to any local address. | `bastion` |\n| HELLO\\_WORLD | Test server for validating your Cloudflare Tunnel connection (for [locally managed tunnels](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/configuration-file/#file-structure-for-published-applications) only). | `hello_world` |\n\n</page>\n\n<page>\n---\ntitle: Public load balancers · Cloudflare One docs\ndescription: A public load balancer allows you to distribute traffic across the\n  servers that are running your published applications.\nlastUpdated: 2025-10-27T16:36:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/index.md\n---\n\nA [public load balancer](https://developers.cloudflare.com/load-balancing/load-balancers/) allows you to distribute traffic across the servers that are running your [published applications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/).\n\nWhen you add a [published application route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#2a-publish-an-application) to your Cloudflare Tunnel, Cloudflare generates a subdomain of `cfargotunnel.com` with the UUID of the created tunnel. You can add the application to a load balancer pool by using `<UUID>.cfargotunnel.com` as the [endpoint address](https://developers.cloudflare.com/load-balancing/understand-basics/load-balancing-components/#endpoints) and specifying the application hostname (`app.example.com`) in the [endpoint host header](https://developers.cloudflare.com/load-balancing/additional-options/override-http-host-headers/). Load Balancer does not support directly adding `app.example.com` as an endpoint if the service is behind Cloudflare Tunnel.\n\n## Create a public load balancer\n\n### Prerequisites\n\n* A Cloudflare Tunnel with a [published application route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#2a-publish-an-application)\n\n### Create a load balancer\n\nTo create a load balancer for Cloudflare Tunnel published applications:\n\n1. In the Cloudflare dashboard, go to the **Load Balancing** page.\n\n   [Go to **Load Balancing**](https://dash.cloudflare.com/?to=/:account/load-balancing)\n\n2. Select **Create load balancer**.\n\n3. Select **Public load balancer**.\n\n4. Under **Select website**, select the domain of your published application route.\n\n5. On the **Hostname** page, enter a hostname for the load balancer (for example, `lb.example.com`).\n\n6. On the **Pools** page, select **Create a pool**.\n\n7. Enter a descriptive name for the pool. For example, if you are configuring one pool per tunnel, the pool name can match your tunnel name.\n\n8. To add a tunnel endpoint to the pool, configure the following fields:\n\n   * **Endpoint Name**: Name of the server that is running the application\n   * **Endpoint Address**: `<UUID>.cfargotunnel.com`, where `<UUID>` is replaced by your Tunnel ID. You can find the **Tunnel ID** in [Cloudflare One](https://one.dash.cloudflare.com) under **Networks** > **Connectors** > **Cloudflare Tunnels**.\n   * **Header value**: Hostname of your published application route (such as `app.example.com`). To find the hostname value, open your Cloudflare Tunnel configuration and go to the **Published application routes** tab.\n   * **Weight**: Assign a [weight](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/#weights) to the endpoint. If you only have one endpoint, enter `1`.\n\n   Note\n\n   A single origin pool cannot have the same Tunnel UUID referenced twice.\n\n9. On the **Pools** page, choose a **Fallback pool**. Refer to [Global traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) for information on how the load balancer routes traffic to pools.\n\n10. (Recommended) On the **Monitors** page, attach a monitor to the tunnel endpoint. For example, if your application is HTTP or HTTPS, you can create an HTTPS monitor to poll the application:\n\n    * **Type**: *HTTPS*\n    * **Path**: `/`\n    * **Port**: `443`\n    * **Expected Code(s)**: `200`\n    * **Header Name**: `Host`\n    * **Value**: `app.example.com`\n\n    Note\n\n    TCP monitors are not supported for tunnel endpoints. For a workaround, refer to [Monitors and TCP tunnel origins](#monitors-and-tcp-tunnel-origins).\n\n11. Save and deploy the load balancer.\n\n12. To test the load balancer, access the application using the load balancer hostname (`lb.example.com`).\n\nRefer to the [Load Balancing documentation](https://developers.cloudflare.com/load-balancing/) for more details on load balancer settings and configurations.\n\n### Optional Cloudflare settings\n\nThe application will default to the Cloudflare settings for the load balancer hostname, including [Rules](https://developers.cloudflare.com/rules/), [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/) and [WAF rules](https://developers.cloudflare.com/waf/). You can change the settings for your hostname in the [Cloudflare dashboard](https://dash.cloudflare.com/).\n\n## Common architectures\n\nReview common load balancing configurations for published applications behind Cloudflare Tunnel.\n\n### One app per load balancer\n\nFor this example, assume we have a web application that runs on servers in two different data centers. We want to connect the application to Cloudflare so that users can access the application from anywhere in the world. Additionally, we want Cloudflare to load balance between the servers such that if the primary server fails, the secondary server receives all traffic.",
      "language": "unknown"
    },
    {
      "code": "As shown in the diagram, a typical setup includes:\n\n* A dedicated Cloudflare Tunnel per data center.\n* One load balancer pool per tunnel. The load balancer hostname is set to the user-facing application hostname (`app.example.com`).\n* One load balancer endpoint per pool. The endpoint host header is set to the `cloudflared` published application hostname (`server1.example.com`)\n* At least two `cloudflared` [replicas](#session-affinity-and-replicas) per tunnel in their respective data centers, in case a `cloudflared` host machine goes down.\n\nUsers can now connect to the application using the load balancer hostname (`app.example.com`). Note that this configuration is only valid for [Active-Passive failover](https://developers.cloudflare.com/load-balancing/load-balancers/common-configurations/#active---passive-failover), since each pool only supports one endpoint per tunnel.\n\n### Multiple apps per load balancer\n\nThe following diagram illustrates how to steer traffic to two different applications on a private network using a single load balancer.",
      "language": "unknown"
    },
    {
      "code": "This load balancing setup includes:\n\n* Two Cloudflare Tunnels with identical routes to both applications.\n* One load balancer pool per application.\n* Each load balancer pool has an endpoint per tunnel.\n* A [DNS record](#dns-records) for each application that points to the load balancer hostname.\n\nUsers can now access all applications through the load balancer. Since there are multiple tunnel endpoints per pool, this configuration supports [Active-Active Failover](https://developers.cloudflare.com/load-balancing/load-balancers/common-configurations/#active---active-failover). Active-Active uses all available endpoints in the pool to process requests simultaneously, providing better performance and scalability by load balancing traffic across them.\n\n#### DNS records\n\nWhen you configure a published application route via the dashboard, Cloudflare will automatically generate a `CNAME` DNS record that points the application hostname (`app1.example.com`) to the tunnel subdomain (`<UUID>.cfargotunnel.com`). You can [edit these DNS records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/#edit-dns-records) so that they point to the load balancer hostname instead.\n\nNote\n\nTunnel routes configured via the API or CLI require [manually creating DNS records](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/dns/).\n\nHere is an example of what your DNS records will look like before and after setting up [Multiple apps per load balancer](#multiple-apps-per-load-balancer):\n\n**Before**:\n\n| Type | Name | Content |\n| - | - | - |\n| CNAME | app1 | `<UUID_1>.cfargotunnel.com` |\n| CNAME | app2 | `<UUID_1>.cfargotunnel.com` |\n| CNAME | app1 | `<UUID_2>.cfargotunnel.com` |\n| CNAME | app2 | `<UUID_2>.cfargotunnel.com` |\n\n**After**:\n\n| Type | Name | Content |\n| - | - | - |\n| LB | `lb.example.com` | n/a |\n| CNAME | app1 | `lb.example.com` |\n| CNAME | app2 | `lb.example.com` |\n\n## Known limitations\n\n### Monitors and TCP tunnel origins\n\nIf you have a tunnel to a port or SSH port, do not set up a [TCP monitor](https://developers.cloudflare.com/load-balancing/monitors/). Instead, set up a health check endpoint on the `cloudflared` host and create an HTTPS monitor. For example, you can use `cloudflared` to return a fixed HTTP status response:\n\n1. In your Cloudflare Tunnel, [add a published application route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#2a-publish-an-application) to represent the health check endpoint:\n\n   * **Hostame**: Enter a hostname for the health check endpoint (for example, `health-check.example.com`)\n   * **Service Type**: *HTTP\\_STATUS*\n   * **HTTP Status Code**: `200`\n\n2. From the **Load Balancing** page, [create a monitor](https://developers.cloudflare.com/load-balancing/monitors/create-monitor/) with the following properties:\n\n   * **Type**: *HTTPS*\n   * **Path**: `/`\n   * **Port**: `443`\n   * **Expected Code(s)**: `200`\n   * **Header Name**: `Host`\n   * **Value**: `health-check.example.com`\n\nYou can now assign this monitor to your load balancer endpoint. The monitor will only verify that your server is reachable. It does not check whether the server is running and accepting requests.\n\n### Session affinity and replicas\n\nThe load balancer does not distinguish between [replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) of the same tunnel. If you run the same tunnel UUID on two separate hosts, the load balancer treats both hosts as a single endpoint. To maintain [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/) between a client and a particular host, you will need to connect each host to Cloudflare using a different tunnel UUID.\n\n### Local connection preference\n\nIf you notice traffic imbalances across endpoints in different locations, you may have to adjust your load balancer setup.\n\nWhen an end user sends a request to your application, Cloudflare routes their traffic using [Anycast routing](https://www.cloudflare.com/learning/cdn/glossary/anycast-network/) and their request typically goes to the nearest Cloudflare data center. Cloudflare Tunnel will prefer to serve the request using `cloudflared` connections in the same data center. This behavior can impact how connections are weighted and traffic is distributed.\n\nIf you are running [`cloudflared` replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/), switch to separate Cloudflare tunnels so that you can have more granular control over [traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/).\n\n</page>\n\n<page>\n---\ntitle: gRPC · Cloudflare One docs\ndescription: gRPC is a Remote Procedure Call (RPC) framework that allows client\n  applications to call methods on a remote server as if they were running on the\n  same local machine. You can connect gRPC servers and clients to Cloudflare's\n  global network, making it easier to build applications that use services\n  across different data centers and environments.\nlastUpdated: 2025-10-23T22:25:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/grpc/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/grpc/index.md\n---\n\ngRPC is a Remote Procedure Call (RPC) framework that allows client applications to call methods on a remote server as if they were running on the same local machine. You can connect gRPC servers and clients to Cloudflare's global network, making it easier to build applications that use services across different data centers and environments.\n\nCloudflare Tunnel supports gRPC traffic via [private subnet routing](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/). Public hostname deployments are not currently supported.\n\n\n\nIn this example, we will connect a gRPC server to Cloudflare using the `cloudflared` daemon, secure the server with Gateway policies, and open a gRPC channel to the server using the Cloudflare WARP client.\n\n## 1. Set up a gRPC server\n\n1. To set up a gRPC Python application, follow this [quick start guide](https://grpc.io/docs/languages/python/quickstart/).\n\n2. Start the server:",
      "language": "unknown"
    },
    {
      "code": "## 2. Connect the server to Cloudflare\n\nTo establish a secure, outbound-only connection to Cloudflare:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n2. [Create a new tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/) or edit an existing `cloudflared` tunnel.\n\n1) In the **CIDR** tab for the tunnel, enter the private IP or CIDR address of your server.\n\n## 3. Route private network IPs through WARP\n\nBy default, WARP excludes traffic bound for [RFC 1918 space](https://datatracker.ietf.org/doc/html/rfc1918), which are IP addresses typically used in private networks and not reachable from the Internet. In order for WARP to send traffic to your private network, you must configure [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) so that the IP/CIDR of your private network routes through WARP.\n\n1. First, check whether your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) is set to **Exclude** or **Include** mode.\n\n2. Edit your Split Tunnel routes depending on the mode:\n\n   * Exclude IPs and domains\n\n     If you are using **Exclude** mode:\n\n     a. [Delete the route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#remove-a-route) containing your private network's IP/CIDR range. For example, if your network uses the default AWS range of `172.31.0.0/16`, delete `172.16.0.0/12`.\n\n     b. [Re-add IP/CIDR ranges](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) that are not explicitly used by your private network. For the AWS example above, you would add new entries for `172.16.0.0/13`, `172.24.0.0/14`, `172.28.0.0/15`, and `172.30.0.0/16`. This ensures that only traffic to `172.31.0.0/16` routes through WARP.\n\n     You can use the following calculator to determine which IP addresses to re-add:\n\n     Calculator instructions\n\n     1. In **Base CIDR**, enter the RFC 1918 range that you deleted from Split Tunnels.\n     2. In **Excluded CIDRs**, enter the IP/CIDR range used by your private network.\n     3. Re-add the calculator results to your Split Tunnel Exclude mode list.\n\n     By tightening the private IP range included in WARP, you reduce the risk of breaking a user's [access to local resources](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-users-to-enable-local-network-exclusion).\n\n   * Include IPs and domains\n\n     If you are using **Include** mode:\n\n     1. Add the required [Zero Trust domains](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-domains) or [IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-ip-addresses) to your Split Tunnel include list.\n     2. [Add a route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) to include your private network's IP/CIDR range.\n\n## 4. (Recommended) Create a Gateway policy\n\nYou can configure [Gateway network policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/) to either block or allow access to the gRPC server. The following example consists of two policies: the first allows gRPC connections from devices that pass [device posture checks](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/), and the second blocks all other traffic. Make sure that the Allow policy has higher [priority](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/#order-of-precedence).\n\n### 1. Allow secured devices\n\n| Selector | Operator | Value | Logic | Action |\n| - | - | - | - | - |\n| Destination Port | is | `50051` | And | Allow |\n| Destination IP | is | `172.31.0.133` | And | |\n| Passed Device Posture Checks | is | `macOS firewall (Firewall)` | And | |\n| Passed Device Posture Checks | is | `macOS disk encryption (Disk encryption)` | | |\n\n### 2. Block everything else\n\n| Selector | Operator | Value | Action |\n| - | - | - | - |\n| Destination IP | in | `172.31.0.0/16` | Block |\n\nFor more details on setting up the Gateway proxy, refer to [Filter network traffic with Gateway](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#4-recommended-filter-network-traffic-with-gateway).\n\n## 5. Set up the client\n\ngRPC clients can connect to the server by installing Cloudflare WARP on the device and enrolling in your Zero Trust organization. When the client makes a request to a private IP exposed through Cloudflare Tunnel, WARP routes the connection through Cloudflare's network to the corresponding tunnel.\n\nTo set up the gRPC client:\n\n1. [Deploy the WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/) on your device in Gateway with WARP mode.\n2. [Create device enrollment rules](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/) to determine which devices can enroll to your Zero Trust organization.\n3. Install gRPC on the device by following this [quick start guide](https://grpc.io/docs/languages/python/quickstart/).\n4. Modify `greeter.py` to point to the private IP of your gRPC server. This is the same private IP configured in your [Cloudflare Tunnel routes](#2-connect-the-server-to-cloudflare). For example,",
      "language": "unknown"
    },
    {
      "code": "## 6. Test the connection\n\n1. On the client device, ensure that WARP is `Connected`.\n2. Run the gRPC client application:",
      "language": "unknown"
    },
    {
      "code": "You can view [Tunnel logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/#view-logs-on-your-local-machine) to validate that requests are coming into the tunnel and reaching the gRPC server as intended.\n\n</page>\n\n<page>\n---\ntitle: RDP · Cloudflare One docs\ndescription: The Remote Desktop Protocol (RDP) provides a graphical interface\n  for users to connect to a computer remotely. RDP is most commonly used to\n  facilitate simple remote access to machines or workstations which users cannot\n  physically access. However, this also makes RDP connections the frequent\n  subject of attacks, since a misconfiguration can inadvertently allow\n  unauthorized access to the machine.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/rdp/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/rdp/index.md\n---\n\nThe Remote Desktop Protocol (RDP) provides a graphical interface for users to connect to a computer remotely. RDP is most commonly used to facilitate simple remote access to machines or workstations which users cannot physically access. However, this also makes RDP connections the frequent subject of attacks, since a misconfiguration can inadvertently allow unauthorized access to the machine.\n\nWith Cloudflare Zero Trust, you can make your RDP server available over the Internet without the risk of opening any inbound ports on your local server.\n\nCloudflare offers three ways to secure RDP:\n\n* [Browser-based RDP](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/rdp/rdp-browser/)\n* [RDP with WARP client](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/rdp/rdp-warp-to-tunnel/)\n* [RDP with client-side cloudflared](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/rdp/rdp-cloudflared-authentication/)\n\n</page>\n\n<page>\n---\ntitle: SMB · Cloudflare One docs\ndescription: The Server Message Block (SMB) protocol allows users to read,\n  write, and access shared resources on a network. Due to security risks,\n  firewalls and ISPs usually block public connections to an SMB file share. With\n  Cloudflare Tunnel, you can provide secure and simple SMB access to users\n  outside of your network.\nlastUpdated: 2025-10-23T20:06:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/smb/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/smb/index.md\n---\n\nThe Server Message Block (SMB) protocol allows users to read, write, and access shared resources on a network. Due to security risks, firewalls and ISPs usually block public connections to an SMB file share. With Cloudflare Tunnel, you can provide secure and simple SMB access to users outside of your network.\n\nCloudflare Zero Trust offers two solutions for connecting to SMB servers:\n\n* [Private subnet routing with Cloudflare WARP to Tunnel](#connect-to-smb-server-with-warp-to-tunnel)\n* [Public hostname routing with `cloudflared access`](#connect-to-smb-server-with-cloudflared-access)\n\n## Set up an SMB server on Linux\n\nWhile SMB was developed for Microsoft Windows, Samba provides SMB connectivity from UNIX-like and BSD systems. A Samba server can be set up using this [guide](https://ubuntu.com/tutorials/install-and-configure-samba#1-overview) on an Ubuntu machine.\n\n## Connect to SMB server with WARP to Tunnel\n\nYou can use Cloudflare Tunnel to create a secure, outbound-only connection from your server to Cloudflare's global network. This requires running the `cloudflared` daemon on the server. Users reach the service by installing the [Cloudflare WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/) on their device and enrolling in your Zero Trust organization. Remote devices will be able to connect as if they were on your private network. By default, all devices enrolled in your organization can access the service unless you build policies to allow or block specific users.\n\n### 1. Connect the server to Cloudflare\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n2. [Create a new tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/) or edit an existing `cloudflared` tunnel.\n\n1) In the **CIDR** tab for the tunnel, enter the private IP or CIDR address of your server.\n2) (Optional) [Set up Zero Trust policies](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#4-recommended-filter-network-traffic-with-gateway) to fine-tune access to your server.\n\n### 2. Set up the client\n\nTo connect your devices to Cloudflare:\n\n1. [Deploy the WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/) on your devices in Gateway with WARP mode or [generate a proxy endpoint](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/proxy-endpoints/) and deploy a PAC file.\n2. [Create device enrollment rules](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/) to determine which devices can enroll to your Zero Trust organization.\n\n### 3. Route private network IPs through WARP\n\nBy default, WARP excludes traffic bound for [RFC 1918 space](https://datatracker.ietf.org/doc/html/rfc1918), which are IP addresses typically used in private networks and not reachable from the Internet. In order for WARP to send traffic to your private network, you must configure [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) so that the IP/CIDR of your private network routes through WARP.\n\n1. First, check whether your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) is set to **Exclude** or **Include** mode.\n\n2. Edit your Split Tunnel routes depending on the mode:\n\n   * Exclude IPs and domains\n\n     If you are using **Exclude** mode:\n\n     a. [Delete the route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#remove-a-route) containing your private network's IP/CIDR range. For example, if your network uses the default AWS range of `172.31.0.0/16`, delete `172.16.0.0/12`.\n\n     b. [Re-add IP/CIDR ranges](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) that are not explicitly used by your private network. For the AWS example above, you would add new entries for `172.16.0.0/13`, `172.24.0.0/14`, `172.28.0.0/15`, and `172.30.0.0/16`. This ensures that only traffic to `172.31.0.0/16` routes through WARP.\n\n     You can use the following calculator to determine which IP addresses to re-add:\n\n     Calculator instructions\n\n     1. In **Base CIDR**, enter the RFC 1918 range that you deleted from Split Tunnels.\n     2. In **Excluded CIDRs**, enter the IP/CIDR range used by your private network.\n     3. Re-add the calculator results to your Split Tunnel Exclude mode list.\n\n     By tightening the private IP range included in WARP, you reduce the risk of breaking a user's [access to local resources](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-users-to-enable-local-network-exclusion).\n\n   * Include IPs and domains\n\n     If you are using **Include** mode:\n\n     1. Add the required [Zero Trust domains](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-domains) or [IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-ip-addresses) to your Split Tunnel include list.\n     2. [Add a route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) to include your private network's IP/CIDR range.\n\n### 4. Connect as a user\n\n#### macOS\n\n1. In the Finder menu, select **Go** > **Connect to Server**.\n\n2. Enter `smb://<smb-server-ip-address>/sambashare`.\n\n   ![Connect to SMB server in macOS](https://developers.cloudflare.com/_astro/smb-connect.C4nMiFKp_Z1KbwQn.webp)\n\n3. Sign in with the username and password created while setting up the server.\n\n#### Windows\n\n1. Open File Explorer and right-click **Network** > **Map Network Drive**.\n2. For **Folder**, enter `\\\\<server-private-ip>\\sambashare`.\n3. Select **Connect using different credentials**.\n4. Select **Finish**.\n5. Sign in with the username and password created while setting up the server.\n\n## Connect to SMB server with `cloudflared access`\n\nCloudflare Tunnel can also route applications through a public hostname, which allows users to connect to the application without the WARP client. This method requires having `cloudflared` installed on both the server machine and on the client machine, as well as an active zone on Cloudflare. The traffic is proxied over this connection, and the user logs in to the server with their Cloudflare Access credentials.\n\nThe public hostname method can be implemented in conjunction with routing over WARP so that there are multiple ways to connect to the server. You can reuse the same tunnel for both the private network and public hostname routes.\n\n### 1. Connect the server to Cloudflare\n\n1. Create a Cloudflare Tunnel by following our [dashboard setup guide](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/).\n\n2. In the **Published application routes** tab, choose a domain from the drop-down menu and specify any subdomain (for example, `smb.example.com`).\n\n3. For **Service**, select *SMB* and enter the SMB listening port (for example, `localhost:445`). SMB drives listen on port `139` or `445` by default.\n\n4. Select **Save**.\n\n### 2. (Recommended) Create an Access application\n\nBy default, anyone on the Internet can connect to the server using the hostname of the published application. To allow or block specific users, create a [self-hosted application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/) in Cloudflare Access.\n\n### 3. Connect as a user\n\n1. [Install `cloudflared`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/) on the client machine.\n\n2. Run the following command to open an SMB listening port. You can specify any available port on the client machine.",
      "language": "unknown"
    },
    {
      "code": "This command can be wrapped as a desktop shortcut so that end users do not need to use the command line.\n\n3. [Open your SMB client](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/smb/#4-connect-as-a-user) and configure the client to point to `smb://localhost:8445/sambashare`. Do not input the hostname.\n\n4. Sign in with the username and password created while setting up the server.\n\n#### Windows-specific requirements\n\nIf you are using a Windows machine and cannot specify the port for SMB, you might need to disable the local server. The local server on a client machine uses the same default port `445` for CIFS/SMB. By listening on that port, the local server can block the `cloudflare access` connection.\n\nWarning\n\nThe Windows Server service supports share actions over a network like file, print, and named-pipe. Disabling this service can cause those actions to fail to start.\n\nTo disable the local server on a Windows machine:\n\n1. Select **Win**+**R** to open the Run window.\n2. Type `services.msc` and select **Enter**.\n3. Locate the local server process, likely called `Server`.\n4. Stop the service and set **Startup type** to *Disabled*.\n5. Repeat steps 3 and 4 for `TCP/IP NetBIOS Helper`.\n\n</page>\n\n<page>\n---\ntitle: DNS records · Cloudflare One docs\ndescription: When you create a tunnel, Cloudflare generates a subdomain of\n  cfargotunnel.com with the UUID of the created tunnel. You can treat\n  <UUID>.cfargotunnel.com as if it were an origin target in the Cloudflare\n  dashboard.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/dns/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/dns/index.md\n---\n\nWhen you create a tunnel, Cloudflare generates a subdomain of `cfargotunnel.com` with the UUID of the created tunnel. You can treat `<UUID>.cfargotunnel.com` as if it were an origin target in the Cloudflare dashboard.\n\nUnlike publicly routable IP addresses, `<UUID>.cfargotunnel.com` will only proxy traffic for a DNS record in the same Cloudflare account. The Tunnel UUID is not secret information; if someone discovers your subdomain UUID, they will not be able to create a DNS record in another account or system to proxy traffic to the address.\n\n## Create a DNS record for the tunnel\n\n* Dashboard\n\n  To create a new DNS record for your tunnel:\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/) and go to the **DNS Records** page for your domain.\n\n     [Go to **Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records)\n\n  2. Select **Add record**.\n\n  3. Input the following information:\n\n     * **Type**: *CNAME*\n     * **Name**: Subdomain of your application\n     * **Target**: `<UUID>.cfargotunnel.com`\n\n  4. Select **Save**.\n\n  ![Example of fields completed to create a new CNAME record.](https://developers.cloudflare.com/_astro/dns-record.B25etJTI_niW2V.webp)\n\n* cli\n\n  You can create a new DNS record directly from `cloudflared`:",
      "language": "unknown"
    },
    {
      "code": "This command create a `CNAME` record that points to the tunnel subdomain, but will not proxy traffic if the tunnel is not currently running.\n\n  Note\n\n  To create DNS records using `cloudflared`, the [`cert.pem`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/local-tunnel-terms/#certpem) file must be installed on your system.\n\nThe DNS record is distinct from the state of the tunnel. You can create DNS records that point to a tunnel that is not currently running. If the tunnel stops running, the DNS record will not be deleted. If you point the DNS record to a tunnel not currently running, visitors will see a `1016` error message.\n\nAdditionally, you can create multiple DNS records that point to the same tunnel subdomain. If you are routing traffic from multiple hostnames to multiple services, you will need to create a `CNAME` entry for each hostname. The CNAME entries will share the same target.\n\n## Optional Cloudflare settings\n\nThe application will default to the Cloudflare settings of the hostname in your account that includes the Cloudflare Tunnel DNS record, including [cache rules](https://developers.cloudflare.com/cache/how-to/cache-rules/) and [firewall policies](https://developers.cloudflare.com/firewall/). You can changes these settings for your hostname in Cloudflare's dashboard.\n\n</page>\n\n<page>\n---\ntitle: SSH · Cloudflare One docs\ndescription: The Secure Shell Protocol (SSH) enables users to remotely access\n  devices through the command line. With Cloudflare Zero Trust, you can make\n  your SSH server available over the Internet without the risk of opening\n  inbound ports on the server.\nlastUpdated: 2025-10-23T19:01:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/index.md\n---\n\nThe Secure Shell Protocol (SSH) enables users to remotely access devices through the command line. With Cloudflare Zero Trust, you can make your SSH server available over the Internet without the risk of opening inbound ports on the server.\n\nCloudflare offers four ways to secure SSH:\n\n* [SSH with Access for Infrastructure](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/) (recommended)\n* [Self-managed SSH keys](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-warp-to-tunnel/)\n* [Browser-rendered SSH terminal](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-browser-rendering/)\n* [SSH with client-side cloudflared](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-cloudflared-authentication/) (legacy)\n\nFor an overview of these connection options, refer to [non-HTTP applications](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/).\n\n</page>\n\n<page>\n---\ntitle: Common errors · Cloudflare One docs\ndescription: This section covers the most common errors you might encounter when\n  connecting resources with Cloudflare Tunnel. If you do not see your issue\n  listed below, refer to the troubleshooting FAQ, view your Tunnel logs, or\n  contact Cloudflare Support.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/common-errors/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/common-errors/index.md\n---\n\nThis section covers the most common errors you might encounter when connecting resources with Cloudflare Tunnel. If you do not see your issue listed below, refer to the [troubleshooting FAQ](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/), view your [Tunnel logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/), or [contact Cloudflare Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n\n## Tunnel status\n\nYou can check your tunnel's connection status either from Cloudflare One (by going to **Networks** > **Connectors** > **Cloudflare Tunnels**) or by running the `cloudflared tunnel list` command. Each tunnel displays a status that reflects its current connection state:\n\n| Status | Meaning | Recommended Action |\n| - | - | - |\n| **Healthy** | The tunnel is active and serving traffic through four connections to the Cloudflare global network. | No action is required. Your tunnel is running correctly. |\n| **Inactive** | The tunnel has been created (via the API or dashboard) but the `cloudflared` connector has never been run to establish a connection. | Run the tunnel as a service (recommended) or use the `cloudflared tunnel run` command on your origin server to connect the tunnel to Cloudflare. Refer to [substep 6 of step 1 in the Create a Tunnel dashboard guide](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#1-create-a-tunnel) or step 4 in the [Create a Tunnel API guide](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel-api/#4-install-and-run-the-tunnel). |\n| **Down** | The tunnel was previously connected but is currently disconnected because the `cloudflared` process has stopped. | 1. Ensure the `cloudflared` [service](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/as-a-service/) or process is actively running on your server. 2. Check for server-side issues, such as the machine being powered off, an application crash, or recent network changes. |\n| **Degraded** | The `cloudflared` connector is running and the tunnel is serving traffic, but at least one individual connection has failed. Further degradation in [tunnel availability](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) could risk the tunnel going down and failing to serve traffic. | 1. Review your `cloudflared` [logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/) for connection failures or error messages. 2. Investigate local network and firewall rules to ensure they are not blocking connections to the [Cloudflare Tunnel IPs and ports](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/).  |\n\nTunnel status scope\n\nThe tunnel status only reflects the connection between `cloudflared` and the Cloudflare network. Tunnel status does not indicate whether `cloudflared` can successfully reach your internal services. As a result, a tunnel can appear `Healthy` while users are still unable to connect to an application.\n\n## I see `cloudflared service is already installed`.\n\nIf you see this error when installing a remotely-managed tunnel, ensure that no other `cloudflared` instances are running as a service on this machine. Only a single instance of `cloudflared` may run as a service on any given machine. Instead, we recommend adding additional routes to your existing tunnel. Alternatively, you can run `sudo cloudflared service uninstall` to uninstall `cloudflared`.\n\n## I see `An A, AAAA, or CNAME record with that host already exists`.\n\nIf you are unable to save your tunnel's public hostname, choose a different hostname or delete the existing DNS record. [Check the DNS records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/) for your domain from the [Cloudflare dashboard](https://dash.cloudflare.com).\n\n## Tunnel credentials file doesn't exist or is not a file.\n\nIf you encounter the following error when running a tunnel, double check your `config.yml` file and ensure that the `credentials-file` points to the correct location. You may need to change `/root/` to your home directory.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## My tunnel fails to authenticate.\n\nTo start using Cloudflare Tunnel, a super administrator in the Cloudflare account must first log in through `cloudflared login`. The client will launch a browser window and prompt the user to select a hostname in their Cloudflare account. Once selected, Cloudflare generates a certificate that consists of three components:\n\n* The public key of the origin certificate for that hostname\n* The private key of the origin certificate for that domain\n* A token that is unique to Cloudflare Tunnel\n\nThose three components are bundled into a single PEM file that is downloaded one time during that login flow. The host certificate is valid for the root domain and any subdomain one-level deep. Cloudflare uses that certificate file to authenticate `cloudflared` to create DNS records for your domain in Cloudflare.\n\nThe third component, the token, consists of the zone ID (for the selected domain) and an API token scoped to the user who first authenticated with the login command. When user permissions change (if that user is removed from the account or becomes an admin of another account, for example), Cloudflare rolls the user's API key. However, the certificate file downloaded through `cloudflared` retains the older API key and can cause authentication failures. The user will need to login once more through `cloudflared` to regenerate the certificate. Alternatively, the administrator can create a dedicated service user to authenticate.\n\n## I see an error: x509: certificate signed by unknown authority.\n\nThis means the origin is using a certificate that `cloudflared` does not trust. For example, you may get this error if you are using SSL/TLS inspection in a proxy between your server and Cloudflare. To solve this:\n\n* Add the certificate to the system certificate pool.\n* Use the `--origin-ca-pool` flag and specify the path to the certificate.\n* Use the `--no-tls-verify` flag to stop `cloudflared` checking the certificate for a trust chain.\n\n## I see an error 1033 when attempting to run a tunnel.\n\nA `1033` error indicates your tunnel is not connected to Cloudflare's network because Cloudflare's network cannot find a healthy `cloudflared` instance to receive the traffic.\n\nFirst, review whether your tunnel is listed as `Active` on the [Cloudflare One](https://one.dash.cloudflare.com/) dashboard by going to **Networks** > **Connectors** > **Cloudflare Tunnels** or run `cloudflared tunnel list`. If the tunnel is not `Active`, review the following and take the action necessary for your tunnel status:\n\n| Status | Meaning | Recommended Action |\n| - | - | - |\n| **Healthy** | The tunnel is active and serving traffic through four connections to the Cloudflare global network. | No action is required. Your tunnel is running correctly. |\n| **Inactive** | The tunnel has been created (via the API or dashboard) but the `cloudflared` connector has never been run to establish a connection. | Run the tunnel as a service (recommended) or use the `cloudflared tunnel run` command on your origin server to connect the tunnel to Cloudflare. Refer to [substep 6 of step 1 in the Create a Tunnel dashboard guide](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel/#1-create-a-tunnel) or step 4 in the [Create a Tunnel API guide](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/get-started/create-remote-tunnel-api/#4-install-and-run-the-tunnel). |\n| **Down** | The tunnel was previously connected but is currently disconnected because the `cloudflared` process has stopped. | 1. Ensure the `cloudflared` [service](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/as-a-service/) or process is actively running on your server. 2. Check for server-side issues, such as the machine being powered off, an application crash, or recent network changes. |\n| **Degraded** | The `cloudflared` connector is running and the tunnel is serving traffic, but at least one individual connection has failed. Further degradation in [tunnel availability](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) could risk the tunnel going down and failing to serve traffic. | 1. Review your `cloudflared` [logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/) for connection failures or error messages. 2. Investigate local network and firewall rules to ensure they are not blocking connections to the [Cloudflare Tunnel IPs and ports](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/).  |\n\nFor more information, refer to the [comprehensive list](https://developers.cloudflare.com/support/troubleshooting/http-status-codes/cloudflare-1xxx-errors/) of Cloudflare 1xxx errors.\n\n## I see `ERR_TOO_MANY_REDIRECTS` when attempting to connect to an Access self-hosted app.\n\nThis error occurs when `cloudflared` does not recognize the SSL/TLS certificate presented by your origin. To resolve the issue, set the [origin server name](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#originservername) parameter to the hostname on your origin certificate. Here is an example of a locally-managed tunnel configuration:",
      "language": "unknown"
    },
    {
      "code": "## `cloudflared access` shows an error `websocket: bad handshake`.\n\nThis means that your `cloudflared access` client is unable to reach your `cloudflared tunnel` origin. To diagnose this, you should look at the `cloudflared tunnel` logs. A very often root cause is that the `cloudflared tunnel` is unable to proxy to your origin (e.g. because the ingress is mis-configured, or the origin is down, or because the origin HTTPS certificate cannot be validated by `cloudflared tunnel`). If `cloudflared tunnel` has no logs, it means Cloudflare Edge is not even able to route the websocket traffic to it.\n\nThere are a few different possible root causes behind the `websocket: bad handshake` error:\n\n* Your `cloudflared tunnel` is either not running or not connected to Cloudflare Edge.\n\n* WebSockets are not [enabled](https://developers.cloudflare.com/network/websockets/#enable-websockets).\n\n* Your Cloudflare account has Universal SSL enabled but your SSL/TLS encryption mode is set to **Off (not secure)**. To resolve:\n\n  1. On the Cloudflare dashboard for your zone, go to **SSL/TLS** > **Overview**.\n  2. Ensure that your SSL/TLS encryption mode is set to either **Flexible**, **Full** or **Full (strict)**.\n\n* Your requests are blocked by [Super Bot Fight Mode](https://developers.cloudflare.com/bots/get-started/super-bot-fight-mode/). To resolve, make sure you set **Definitely automated** to *Allow* in the bot fight mode settings.\n\n* Your SSH or RDP Access application has the [Binding Cookie](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/#binding-cookie) enabled. To disable the cookie, go to **Access controls** > **Applications** and edit the application settings.\n\n* One or more [Workers routes](https://developers.cloudflare.com/workers/configuration/routing/routes/) are overlapping with the tunnel hostname, and the Workers do not properly handle the traffic. To resolve, you could either exclude your tunnel from the Worker route by not defining a route that includes the tunnel's hostname or update your Worker to only handle specific paths and forward all other requests to the origin, for example, by using `return fetch(req)`.\n\n## My tunnel randomly disconnects.\n\nLong-lived connections initiated through Cloudflare One, such as SSH sessions, can last up to eight hours. However, disruptions along the service path may result in more frequent disconnects. Often, these disconnects are caused by regularly scheduled maintenance events such as data center, server, or service updates and restarts. If you believe these events are not the cause of disconnects in your environment, collect the relevant [WARP logs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/warp-logs/) and [Tunnel logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/) and contact Support.\n\n## Tunnel connections fail with SSL error.\n\nIf `cloudflared` returns error `error=\"remote error: tls: handshake failure\"`, check to make sure the hostname in question is covered by a SSL certificate. If using a multi-level subdomain, an advanced certificate may be required as the Universal SSL will not cover more than one level of subdomain. This may surface in the browser as `ERR_SSL_VERSION_OR_CIPHER_MISMATCH`.\n\n## Tunnel connections fail with `Too many open files` error.\n\nIf your [Cloudflare Tunnel logs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/) returns a `socket: too many open files` error, it means that `cloudflared` has exhausted the open files limit on your machine. The maximum number of open files, or file descriptors, is an operating system setting that determines how many files a process is allowed to open. To increase the open file limit, you will need to [configure ulimit settings](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/system-requirements/#ulimits) on the machine running `cloudflared`.\n\n## I see `failed to sufficiently increase receive buffer size` in my cloudflared logs.\n\nThis buffer size increase is reported by the [quic-go library](https://github.com/quic-go/quic-go) leveraged by [cloudflared](https://github.com/cloudflare/cloudflared). You can learn more about the log message in the [quic-go repository](https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes). This log message is generally not impactful and can be safely ignored when troubleshooting. However, if you have deployed `cloudflared` within a unique, high-bandwidth environment then buffer size can be manually overridden for testing purposes.\n\nTo set the maximum receive buffer size on Linux:\n\n1. Create a new file under `/etc/sysctl.d/`:",
      "language": "unknown"
    },
    {
      "code": "1. In the file, define the desired buffer size:",
      "language": "unknown"
    },
    {
      "code": "1. Reboot the host machine running `cloudflared`.\n\n2. To validate that these changes have taken effect, use the `grep` command:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## `ping` and `traceroute` commands do not work.\n\nTo ping an IP address behind Cloudflare Tunnel, your system must allow ICMP traffic through `cloudflared`. For configuration instructions, refer to the [ICMP proxy documentation](https://developers.cloudflare.com/cloudflare-one/traffic-policies/proxy/#icmp).\n\n## Cloudflare Tunnel is buffering my streaming response instead of streaming it live.\n\nProxied traffic through Cloudflare Tunnel is buffered by default unless the origin server includes the response header `Content-Type: text/event-stream`. The `Content-Type: text/event-stream` response header tells `cloudflared` to stream data as it arrives instead of buffering the entire response.\n\n## I see `Error: This route's network is inside an existing subnet's network at \"100.96.0.0/12\"`.\n\nThis error occurs when you try to add a CIDR route that falls within Cloudflare WARP's CGNAT IP range. The `100.96.0.0/12` range, which covers addresses from `100.96.0.1` to `100.111.255.254`, is reserved for internal WARP routing and cannot be added as a Cloudflare Tunnel route. To connect your private network, you will need to change its IP/CIDR so that it does not overlap with `100.96.0.0/12`.\n\n## Troubleshooting\n\n[Troubleshooting](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/) - Browse other Cloudflare One-related troubleshooting errors and solutions.\n\n</page>\n\n<page>\n---\ntitle: Connectivity pre-checks · Cloudflare One docs\ndescription: This guide helps you validate connectivity between your environment\n  and Cloudflare Tunnel endpoints before deploying Cloudflare Tunnel. You will\n  run DNS and network checks from the same host machine that will run\n  cloudflared to help you identify issues that may prevent cloudflared from\n  connecting to Cloudflare Tunnel endpoints.\nlastUpdated: 2025-12-11T01:23:38.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/index.md\n---\n\nThis guide helps you validate connectivity between your environment and [Cloudflare Tunnel endpoints](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/) before deploying [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/). You will run DNS and network checks from the same host machine that will run `cloudflared` to help you identify issues that may prevent `cloudflared` from connecting to Cloudflare Tunnel endpoints.\n\nRunning these checks before you install `cloudflared` sets your deployment up for success and narrows down the cause of any later connectivity issues.\n\nThis guide is structured as follows:\n\n1. [Before you start](#before-you-start): Read prerequisites and terminology.\n\n2. [DNS test with dig](#2-dns-test-with-dig): Confirm that DNS resolves Cloudflare Tunnel endpoints to the expected IPs.\n\n3. [Test network connectivity](#3-test-network-connectivity): Verify that your firewall allows outbound traffic on port `7844` (TCP and UDP).\n\n4. [Get help](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/connectivity-prechecks/#4-get-help): What to collect and who to contact if tests fail.\n\n## 1. Before you start\n\n### Prerequisites\n\nYou must have:\n\n* A host machine connected to the Internet where you plan to run `cloudflared`. The tests must run from the same environment where `cloudflared` will run (same network, same firewall path).\n\n* A terminal session with permission to run `dig` and `nc` (netcat), or similar software.\n\n`cloudflared` is platform-agnostic and supports a wide range of operating systems. For details, refer to [Tunnel system requirements](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/system-requirements/).\n\n### Terminology\n\nWhen troubleshooting connectivity to Cloudflare, it is important to distinguish between:\n\n* Host machine: The server or virtual machine (VM) where you will run `cloudflared`.\n\n* Environment: The broader setup containing the host machine (network and firewall configuration).\n\nCloudflare Tunnel errors can originate from the environment (for example, DNS or firewall policies), even though they surface as `cloudflared` errors on the host machine. This guide focuses on the environment, not on `cloudflared` itself.\n\n`cloudflared` establishes [outbound-only connections](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/#outbound-only-connection) to Cloudflare's global network over port `7844`. The specific destinations and ports are documented in [Tunnel with firewall](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/).\n\n## 2. DNS test with dig\n\nCloudflare Tunnel requires outbound connectivity to `region1.v2.argotunnel.com` and `region2.v2.argotunnel.com` (or to the equivalent `us-region1` and `us-region2` endpoints when using only the [US region](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/#region-us)).\n\nFor a successful and healthy deployment, `cloudflared` should have [four active replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) with connectivity to both regions (that is, both `region1.v2.argotunnel.com` and `region2.v2.argotunnel.com`, or both `us-region1` and `us-region2`).\n\nFirst, you need to verify that your DNS resolver returns the expected IP addresses for Cloudflare Tunnel endpoints.\n\n### 2.1. Test DNS with your current resolver\n\nDepending on whether you are testing a global region or the US region, run one of the following commands:\n\n* Global region",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "* US region",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "The `ANSWER SECTION` should include the expected IP addresses for Cloudflare Tunnel endpoints.\n\nIf you receive:\n\n* Status `NOERROR` with valid IP addresses - Your DNS resolver is successfully returning addresses for the Tunnel hostname. Continue to [Test network connectivity](#3-test-network-connectivity).\n\n* Status `SERVFAIL`, `NXDOMAIN`, or an empty answer - Your DNS resolver cannot resolve the Tunnel endpoint. Continue to [Compare against `1.1.1.1`](#compare-against-1111).\n\n### 2.2. Compare against `1.1.1.1`\n\nIf your original `dig` response is empty or does not match the documented IPs, test again using Cloudflare's public resolver `1.1.1.1`:",
      "language": "unknown"
    },
    {
      "code": "#### If only `1.1.1.1` works\n\nIf `1.1.1.1` returns the correct IPs, but your original resolver does not, your local DNS resolver is misconfigured or blocked.\n\nTo resolve:\n\n* Configure the host machine to use `1.1.1.1` as its resolver.\n* If you must keep using your existing resolver, then investigate with your system administrator or ISP why it is returning different IPs. A recursive resolver should return the same response as the authoritative DNS server. If this cannot be fixed, the issue lies within your local environment and must be resolved before deploying Cloudflare Tunnel.\n\n#### If neither resolver works\n\nIf neither your original resolver nor `1.1.1.1` returns an answer, your firewall may be blocking DNS queries to Cloudflare Tunnel endpoints.\n\nTo resolve:\n\n* Check for firewall rules blocking DNS traffic altogether (UDP on port `53`) or specific DNS queries related to Cloudflare.\n* If you are behind a managed DNS or security appliance, contact that provider to understand why queries to `region1.v2.argotunnel.com` and other Cloudflare Tunnel endpoints are blocked.\n\nOnce DNS resolution returns the expected IPs from your DNS resolver, proceed to connectivity testing in step 3.\n\n## 3. Test network connectivity\n\nAfter confirming that your DNS resolver returns the correct IPs, test whether your host machine can send packets to Cloudflare on port `7844` using both UDP and TCP.\n\nChoose one of the IPs from your `dig` output (for example, `198.41.192.167`) and run the following tests.\n\n### 3.1. Test UDP connectivity",
      "language": "unknown"
    },
    {
      "code": "Example output:",
      "language": "unknown"
    },
    {
      "code": "### 3.2. Test TCP connectivity",
      "language": "unknown"
    },
    {
      "code": "Example output:",
      "language": "unknown"
    },
    {
      "code": "### 3.3 Interpret results\n\nThese tests answer two key questions:\n\n* Can the host machine send a UDP packet to Cloudflare Tunnel endpoints?\n* Can the host machine send a TCP packet to Cloudflare Tunnel endpoints?\n\nIf either protocol succeeds, `cloudflared` can use that protocol to establish the tunnel.\n\nYou have already confirmed DNS is working in the previous steps. These connectivity tests now verify whether your environment allows traffic to Cloudflare on port `7844`. By default, `cloudflared` automatically falls back to whichever protocol is available.\n\nIf a [protocol](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#protocol) is blocked but you force `cloudflared` to use it (for example, forcing QUIC when UDP is blocked), the tunnel will fail to connect.\n\n#### Both UDP and TCP succeed\n\nYour firewall allows outbound traffic and return traffic to Cloudflare's tunnel endpoint on port `7844`. `cloudflared` can connect using either `quic` (UDP) or `http2` (TCP). If both UDP and TCP succeed and your DNS test in the previous section was successful, you can successfully deploy Cloudflare Tunnel in this environment.\n\n#### UDP succeeds, TCP fails\n\nOutbound UDP is allowed, but TCP on port `7844` is blocked or inspected.\n\n`cloudflared` will only be able to connect using `quic`. If you force `http2` in your configuration while TCP is blocked, the tunnel will fail.\n\nTo resolve: Either allow TCP on your local network firewall on port `7844` or stop forcing `http2` to allow `cloudflared` to connect over `QUIC` instead. Refer to the [Protocol](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#protocol) parameter documentation for more information.\n\n#### TCP succeeds, UDP fails\n\nOutbound TCP is allowed, but UDP on port `7844` is blocked.\n\n`cloudflared` will only be able to connect using `http2`. If you force `quic` while UDP is blocked, the tunnel will fail.\n\nTo resolve: Either allow UDP on the local network firewall on port `7844` or stop forcing QUIC to allow `cloudflared` to connect over HTTP/2 instead. Refer to the [Protocol](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#protocol) parameter documentation for more information.\n\n#### Both UDP and TCP fail\n\nPackets are being dropped somewhere between the host and the [Cloudflare Tunnel endpoints](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/).\n\nThis usually indicates a firewall policy or upstream security control that does not allow outbound traffic (or return traffic) on port `7844`.\n\nTo resolve: Allow all traffic over port `7844` on the local network firewall. If this does not resolve the issue, troubleshoot with your ISP or service provider.\n\n## 4. Get help\n\nIf either DNS or network test failed, it will likely be a problem in your local environment. You will need to debug with your administrator, ISP or cloud provider. If you believe the issue is with Cloudflare, please provide detailed information when contacting support.\n\nFor the fastest possible troubleshooting, ensure your support ticket includes comprehensive details. The more context you provide, the faster your issue can be identified and resolved.\n\nTo ensure efficient resolution when [contacting support](https://developers.cloudflare.com/support/contacting-cloudflare-support/), include as much relevant detail as possible in your ticket:\n\n*\n*\n*\n*\n*\n*\n\nWrite a detailed ticket to resolve your issue faster\n\nAvoid vague descriptions and include scenario, timestamps, and steps taken to troubleshoot the issue. Refer to the following example:\n\nAcme Corp attempted to establish a tunnel connection on October 30, 2025, at approximately 3:45 PM UTC. DNS resolution and TCP connectivity tests passed, but the `cloudflared` daemon logs showed `failed to sufficiently increase receive buffer size` errors. The tunnel diagnostic logs collected at 3:50 PM UTC are attached, along with the output from the DNS and network connectivity pre-checks.\n\n</page>\n\n<page>\n---\ntitle: Tunnel diagnostic logs · Cloudflare One docs\ndescription: Cloudflare Tunnel generates a set of diagnostic logs that can be\n  used to troubleshoot issues with cloudflared. A diagnostic report collects\n  data from a single instance of cloudflared running on the local machine.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/diag-logs/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/diag-logs/index.md\n---\n\nCloudflare Tunnel generates a set of diagnostic logs that can be used to troubleshoot issues with `cloudflared`. A diagnostic report collects data from a single instance of `cloudflared` running on the local machine.\n\n## Get diagnostic logs\n\nThe steps for getting diagnostic logs depend on your `cloudflared` deployment environment.\n\n### Prerequisites\n\n* `cloudflared` version 2024.12.2 or later installed on the host\n\n### Host environment\n\nThese instructions apply to remotely-managed and locally-managed tunnels running directly on the host machine.\n\n1. (Linux only) To include network diagnostics in the logs, allow the `cloudflared` user to create RAW and PACKET sockets without root permissions:",
      "language": "unknown"
    },
    {
      "code": "If you do not set `cap_net_raw`, then traceroute data will be unavailable.\n\n2. Get diagnostic logs:",
      "language": "unknown"
    },
    {
      "code": "If multiple instances of `cloudflared` are running on the same host, specify the [metrics server IP and port](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/#configure-the-metrics-server-address) for the instance you want to diagnose. For example:",
      "language": "unknown"
    },
    {
      "code": "This command will output the status of each diagnostic task and place a `cloudflared-diag-YYYY-MM-DDThh-mm-ss.zip` file in your working directory.\n\n### Docker\n\n`cloudflared` reads diagnostic data from the [tunnel metrics server](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/). To get diagnostic logs, the metrics server must be exposed from the Docker container and reachable from the host machine.\n\n1. Determine the [metrics server port](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/#default-metrics-server-address) for the `cloudflared` instance running in Docker.\n\n2. Ensure the container is deployed with port forwarding enabled. The diagnostic feature will request information from the Docker instance using local port `20241`, therefore you should forward port `20241` to the container port obtained in Step 1:",
      "language": "unknown"
    },
    {
      "code": "3. Verify that you can reach the metrics server address from the Docker host environment:",
      "language": "unknown"
    },
    {
      "code": "This command should return a JSON:",
      "language": "unknown"
    },
    {
      "code": "4. Run the diagnostic using the Docker container ID:",
      "language": "unknown"
    },
    {
      "code": "Alternatively, you can specify the container's name instead of its ID:",
      "language": "unknown"
    },
    {
      "code": "Running the diagnostic command with the container ID allows `cloudflared` to collect information from the Docker environment such as logs and container details.\n\nThis command will output the status of each diagnostic task and place a `cloudflared-diag-YYYY-MM-DDThh-mm-ss.zip` file in your working directory.\n\n### Kubernetes\n\nThe diagnostic feature will request data from the [tunnel metrics server](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/) using ports `20241` to `20245`. You will need to use port forwarding to allow the local `cloudflared` instance to connect to the metrics server on one of these ports.\n\n1. Determine the tunnel's [metrics server port](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/#default-metrics-server-address).\n\n2. Enable port forwarding:",
      "language": "unknown"
    },
    {
      "code": "* `<pod>`: Name of the pod where the tunnel is running\n   * `<diagnostic_port>` is any local port in the range `20241` to `20245`.\n   * `<metrics_port>` is the Kubernetes pod port for the `cloudflared` instance you want to diagnose (obtained in Step 1).\n\n   For example, if you set the metrics server address to `0.0.0.0:12345`:",
      "language": "unknown"
    },
    {
      "code": "Connections made to local port `20244` are forwarded to port `12345` of the pod that is running the tunnel.\n\n3. Run the diagnostic:",
      "language": "unknown"
    },
    {
      "code": "If the pod has multiple applications/services running and `cloudflared` is not the first in the pod, you must specify either the container ID or name:",
      "language": "unknown"
    },
    {
      "code": "This command will output the status of each diagnostic task and place a `cloudflared-diag-YYYY-MM-DDThh-mm-ss.zip` file in your working directory.\n\n## cloudflared-diag files\n\nThe `cloudflared-diag-YYYY-MM-DDThh-mm-ss.zip` archive contains the files listed below. The data in a file either applies to the `cloudflared` instance being diagnosed (`diagnosee`) or the instance that triggered the diagnosis (`diagnoser`). For example, if your tunnel is running in a Docker container, the diagnosee is the Docker instance and the diagnoser is the host instance.\n\n| File name | Description | Instance |\n| - | - | - |\n| `cli-configuration.json` | [Tunnel run parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/) used when starting the tunnel | diagnosee |\n| `cloudflared_logs.txt` | [Tunnel log file](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/)[1](#user-content-fn-1) | diagnosee |\n| `configuration.json` | Tunnel configuration parameters | diagnosee |\n| `goroutine.pprof` | goroutine profile made available by `pprof` | diagnosee |\n| `heap.pprof` | heap profile made available by `pprof` | diagnosee |\n| `metrics.txt` | Snapshot of [Tunnel metrics](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/#available-metrics) at the time of diagnosis | diagnosee |\n| `network.txt` | JSON traceroutes to Cloudflare's global network using IPv4 and IPv6 | diagnoser |\n| `raw-network.txt` | Raw traceroutes to Cloudflare's global network using IPv4 and IPv6 | diagnoser |\n| `systeminformation.json` | Operating system information and resource usage | diagnosee |\n| `task-result.json` | Result of each diagnostic task | diagnoser |\n| `tunnelstate.json` | Tunnel connections at the time of diagnosis | diagnosee |\n\n## Footnotes\n\n1. If the log file is blank, you may need to [set `--loglevel` to `debug`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/#view-logs-on-the-server) when you start the tunnel. The `--loglevel` parameter is only required if you ran the tunnel from the CLI using a `cloudflared tunnel run` command. It is not necessary if the tunnel runs as a Linux/macOS service or runs in Docker/Kubernetes. [↩](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: Troubleshoot private network connectivity · Cloudflare One docs\ndescription: Follow this troubleshooting procedure when end users running\n  Cloudflare WARP have issues connecting to a private network behind Cloudflare\n  Tunnel.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/private-networks/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/troubleshoot-tunnels/private-networks/index.md\n---\n\nFollow this troubleshooting procedure when end users running Cloudflare WARP have issues connecting to a private network behind Cloudflare Tunnel.\n\n## 1. Is the WARP client connected to a Cloudflare data center?\n\nThe WARP client GUI should display `Connected` and `Your Internet is protected`.\n\n![WARP client GUI when connected to Cloudflare](https://developers.cloudflare.com/_astro/warp-connected.OHWKwu9t_Z1aOY3o.webp)\n\nIf WARP is stuck in the `Disconnected` state or frequently changes between `Connected` and `Disconnected`, refer to [Unable to connect WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#unable-to-connect-warp).\n\n## 2. Is the WARP client connecting to your private DNS server?\n\nThis step is only needed if users access your application via a private hostname (for example, `wiki.internal.local`).\n\n* If you are using [custom resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) to handle private DNS, go to your Gateway DNS logs (**Insights** > **Logs** > **DNS query logs**) and search for DNS queries to the hostname.\n\n* If you are using [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) to handle private DNS, go to your Gateway Network logs (**Insights** > **Logs** > **Network logs**) and search for port `53` traffic to your DNS server IP.\n\nIf there are no relevant Gateway logs, it means that WARP was unable to forward the query to your private DNS server. Check your resolver policies or Local Domain Fallback configuration and refer to [How WARP handles DNS requests](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/#how-the-warp-client-handles-dns-requests).\n\n## 3. Is network traffic to the application going through WARP?\n\nNext, check if your Gateway Network logs (**Insights** > **Logs** > **Network logs**) show any traffic to the destination IP.\n\nIf WARP is connected but there are no network logs, it means that your private network IPs are not routing through WARP. You can confirm this by [searching the routing table](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#routing-table) on the device for the IP address of your application. Traffic to your application should route through the Cloudflare WARP interface. If another interface is used, [check your Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#3-route-private-network-ips-through-warp).\n\n## 4. Is the user blocked by a Gateway policy?\n\nTo check if a Gateway block event occurred:\n\n1. Go to **Insights** > **Logs** and select the **DNS query logs**, **Network logs**, or **HTTP request logs**.\n\n2. Apply the following filters:\n\n   * **Email**: User's email address\n   * **Event**: *Blocked*\n   * **Date Time Range**: Time period when the user accessed the application\n\n## 5. Is the user matching the correct Gateway policy?\n\nDetermine whether the user is matching any policy, or if they are matching a policy that has a higher priority than the expected policy.\n\n1. To determine the actual policy that was applied:\n\n   1. Go to **Insights** > **Logs** and select the **DNS query logs**, **Network logs**, or **HTTP request logs**.\n\n   2. Apply the following filters:\n\n      * **Email**: User's email address\n      * **Date Time Range**: Time period when the user accessed the application\n\n   3. In the search box, filter by the destination IP or FQDN.\n\n   4. In the results, select a log and note its **Policy Name** value.\n\n2. Go to **Traffic policies** > **Firewall policies** and compare the [order of enforcement](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/) of the matched policy versus the expected policy.\n\n3. Compare the Gateway log values with the expected policy criteria.\n\n   * If the mismatched value is related to identity, [check the user registry](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/users/) and verify the values that are passed to Gateway from your IdP. Cloudflare updates the registry when the user enrolls in the WARP client. If the user's identity is outdated, ask the user to re-authenticate WARP (**Preferences** > **Account** > **Re-Authenticate Session**).\n\n   * If the mismatched value is related to device posture, [view posture check results](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/#2-verify-device-posture-checks) for the user's device. Verify that the device passes the posture checks configured in the policy.\n\n## 6. Are the correct Gateway proxy settings enabled?\n\nUnder **Traffic policies** > **Traffic settings**, ensure that **Allow Secure Web Gateway to proxy traffic** is enabled for TCP, UDP, and ICMP traffic. UDP is required for proxying DNS traffic and other UDP packets, while ICMP is required for `ping` and other administrative functions.\n\n## 7. Is the user's traffic reaching the tunnel?\n\n[Review your tunnel log stream](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/#view-logs-on-your-local-machine). If you do not see any requests to your application, ensure that you have added the appropriate static routes to your Cloudflare Tunnel.\n\n## 8. Is the tunnel forwarding requests to your application?\n\nVerify that you can connect to the application directly from the `cloudflared` host machine:\n\n* macOS and Linux\n\n  Open Terminal and run the following command:",
      "language": "unknown"
    },
    {
      "code": "If `telnet` fails to open the connection, check your infrastructure for firewalls, load balancers, or other network devices that may be interfering with the connection between `cloudflared` and the application server.\n\n* Windows\n\n  Open PowerShell and run the following command:",
      "language": "unknown"
    },
    {
      "code": "If the output shows `TcpTestSucceeded : False`, check your infrastructure for firewalls, load balancers, or other network devices that may be interfering with the connection between `cloudflared` and the application server.\n\nYou can also use a packet capture tool such as `tcpdump` or Wireshark to trace whether traffic from the user device successfully reaches `cloudflared` and routes to your application. Traffic to your application will carry the source IP of the `cloudflared` host.\n\n## 9. How is your application handling requests?\n\n1. Check if the application server has a local firewall in place that is blocking requests from the `cloudflared` host machine.\n\n2. Check if the application server needs to initiate any connection towards the user's device. If so, this is a limitation of `cloudflared` and you should instead [deploy WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) to enable bidirectional traffic.\n\n## 10. Is TLS inspection affecting the connection to your application?\n\nIf there is a problem with [TLS inspection](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/), the user will get an `Insecure Upstream` error when they access the application in a browser. They will probably not get an error if they access the application outside of a browser.\n\nCustomers who have [Logpush](https://developers.cloudflare.com/cloudflare-one/insights/logs/logpush/) enabled can check the [Gateway HTTP dataset](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/account/gateway_http/) for any hostnames which have an elevated rate of `526` HTTP status codes.\n\nTo troubleshoot TLS inspection:\n\n1. Create a temporary Gateway HTTP policy that disables TLS inspection for all traffic to the application. For example:\n\n   | Selector | Operator | Value | Action |\n   | - | - | - | - |\n   | Destination IP | in | `10.2.3.4/32` | Do Not Inspect |\n\n2. If the `Do Not Inspect` policy enables the user to connect, verify that the TLS certificate used by your application is trusted by a public CA and not self-signed. Cloudflare Gateway is unable to negotiate TLS with applications that use self-signed certificates. For more information, refer to [TLS inspection limitations](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#inspection-limitations).\n\n   To work around the issue:\n\n   * **Option 1:** Create a permanent [`Do Not Inspect` HTTP policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#do-not-inspect) for this application.\n   * **Option 2:** Customers who use their [own certificate infrastructure](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/custom-certificate/) for inspection can opt to create an [Allow *Pass Through* policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#untrusted-certificates) which enables our proxy to accept the TLS negotiation from your application. This will allow requests to flow correctly without the need for a `Do Not Inspect` policy.\n   * **Option 3:** If your application uses `HTTPS` or other common protocols, you can add a [published application](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/) to your Cloudflare Tunnel and set [noTLSVerify](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#notlsverify) to `true`. This will allow `cloudflared` to trust your self-signed certificate.\n\n</page>\n\n<page>\n---\ntitle: Magic WAN Connector NetFlow Analytics · Cloudflare One docs\ndescription: You can configure your Magic WAN Connector to export Netflow\n  statistics for local breakout traffic to Magic Network Monitoring. This\n  provides visibility into traffic that leaves your site directly, bypassing the\n  Cloudflare network.\nlastUpdated: 2025-11-06T17:25:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/analytics/netflow-analytics/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/analytics/netflow-analytics/index.md\n---\n\n## NetFlow exports from Magic WAN Connector to Magic Network Monitoring\n\nYou can configure your Magic WAN Connector to export Netflow statistics for [local breakout traffic](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/appliances/network-options/application-based-policies/breakout-traffic/) to [Magic Network Monitoring](https://developers.cloudflare.com/magic-network-monitoring). This provides visibility into traffic that leaves your site directly, bypassing the Cloudflare network.\n\nThe Magic WAN Connector appliance uses NetFlow v9 to export flow data for breakout traffic only. You can enable and configure this export by setting the Netflow configuration for the associated site via the Cloudflare API.\n\n### Enable NetFlow exports\n\nNote\n\nTo export NetFlow statistics, you will need your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and [API token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/), as well as the `site_id` associated with your Magic WAN Connector.\n\n1. Send a `PUT` request to the Netflow configuration endpoint for your site.\n2. In the JSON body request, you must include the `collector_ip` parameter. To export traffic statistics to Magic Network Monitoring, use the IP address `162.159.65.1`. This is the only field required to enable the feature.\n\nMinimal configuration example:",
      "language": "unknown"
    },
    {
      "code": "1. You can customize the configuration by adding optional fields to the JSON payload. These fields include:\n\n* `collector_port`: The UDP port for the collector. The default is `2055`.\n* `sampling_rate`: The rate at which packets are sampled.\n* `active_timeout`: The timeout for active flows in seconds.\n* `inactive_timeout`: The timeout for inactive flows in seconds.\n\nFull configuration example:",
      "language": "unknown"
    },
    {
      "code": "Your Magic WAN Connector will now begin exporting Netflow data for its breakout traffic, which will be ingested and visualized within your Magic Network Monitoring dashboard. You can retrieve the current settings by sending a `GET` request, or disable the export by sending a `DELETE` request to the same endpoint.\n\n</page>\n\n<page>\n---\ntitle: Packet captures · Cloudflare One docs\nlastUpdated: 2025-11-06T14:51:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/analytics/packet-captures/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/analytics/packet-captures/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Querying Magic WAN tunnel bandwidth analytics with GraphQL · Cloudflare\n  One docs\ndescription: This example uses the GraphQL Analytics API to query Magic WAN\n  ingress tunnel traffic over a specified time period.\nlastUpdated: 2025-11-06T14:51:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/analytics/query-bandwidth/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/analytics/query-bandwidth/index.md\n---\n\nThis example uses the GraphQL Analytics API to query Magic WAN ingress tunnel traffic over a specified time period.\n\nThe following API call requests Magic WAN ingress tunnel traffic over a one-hour period and outputs the requested fields. Replace `<CLOUDFLARE_ACCOUNT_TAG>` with your account ID, `<EMAIL>`, `<API_KEY>`[1](#user-content-fn-1) (legacy), or `<API_TOKEN>`[2](#user-content-fn-2) (preferred) with your API credentials, and adjust the `datetime_geq` and `datetime_leq` values as needed.\n\nThe example queries for ingress traffic. To query for egress traffic, change the value in the `direction` filter.\n\n## API Call",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "JavaScript (Node.js) example",
      "id": "javascript-(node.js)-example"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider to Adobe Sign",
      "id": "2.-add-a-saml-sso-provider-to-adobe-sign"
    },
    {
      "level": "h2",
      "text": "3. Finish adding a SaaS application to Cloudflare One",
      "id": "3.-finish-adding-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "4. Test the integration and finalize configuration",
      "id": "4.-test-the-integration-and-finalize-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add Area 1 to Cloudflare One",
      "id": "1.-add-area-1-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Configure SSO for Area 1",
      "id": "2.-configure-sso-for-area-1"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider to Asana",
      "id": "2.-add-a-saml-sso-provider-to-asana"
    },
    {
      "level": "h2",
      "text": "3. Test the integration and require SSO",
      "id": "3.-test-the-integration-and-require-sso"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Get AWS URLs",
      "id": "1.-get-aws-urls"
    },
    {
      "level": "h2",
      "text": "2. Add a SaaS application to Cloudflare One",
      "id": "2.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "3. Complete AWS configuration",
      "id": "3.-complete-aws-configuration"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a x.509 certificate",
      "id": "2.-create-a-x.509-certificate"
    },
    {
      "level": "h2",
      "text": "3. Configure an identity provider and SAML SSO in Atlassian Cloud",
      "id": "3.-configure-an-identity-provider-and-saml-sso-in-atlassian-cloud"
    },
    {
      "level": "h2",
      "text": "4. Finish adding a SaaS application to Cloudflare One",
      "id": "4.-finish-adding-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "5. Create an authentication policy to test integration",
      "id": "5.-create-an-authentication-policy-to-test-integration"
    },
    {
      "level": "h2",
      "text": "6. Test the integration",
      "id": "6.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Enable SSO Configuration in Braintree",
      "id": "2.-enable-sso-configuration-in-braintree"
    },
    {
      "level": "h2",
      "text": "3. Finish adding a SaaS application to Cloudflare One",
      "id": "3.-finish-adding-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "4. Test the integration and add SSO users",
      "id": "4.-test-the-integration-and-add-sso-users"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Download the metadata file",
      "id": "2.-download-the-metadata-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider in Coupa",
      "id": "3.-add-a-saml-sso-provider-in-coupa"
    },
    {
      "level": "h2",
      "text": "3. Create a test user and test the integration",
      "id": "3.-create-a-test-user-and-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider in Digicert",
      "id": "2.-add-a-saml-sso-provider-in-digicert"
    },
    {
      "level": "h2",
      "text": "3. Test and Enable SSO in Digicert",
      "id": "3.-test-and-enable-sso-in-digicert"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create the Access for SaaS application",
      "id": "1.-create-the-access-for-saas-application"
    },
    {
      "level": "h2",
      "text": "2. Configure your DocuSign SSO instance",
      "id": "2.-configure-your-docusign-sso-instance"
    },
    {
      "level": "h2",
      "text": "3. Finalize your Cloudflare configuration",
      "id": "3.-finalize-your-cloudflare-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a certificate file",
      "id": "2.-create-a-certificate-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to Dropbox",
      "id": "3.-add-a-saml-sso-provider-to-dropbox"
    },
    {
      "level": "h2",
      "text": "3. Test the integration and require SSO",
      "id": "3.-test-the-integration-and-require-sso"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Get SaaS application URL",
      "id": "1.-get-saas-application-url"
    },
    {
      "level": "h2",
      "text": "2. Add your application to Access",
      "id": "2.-add-your-application-to-access"
    },
    {
      "level": "h2",
      "text": "3. Configure SSO in your SaaS application",
      "id": "3.-configure-sso-in-your-saas-application"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "OIDC claims",
      "id": "oidc-claims"
    },
    {
      "level": "h3",
      "text": "Filter groups",
      "id": "filter-groups"
    },
    {
      "level": "h3",
      "text": "Add claims",
      "id": "add-claims"
    },
    {
      "level": "h2",
      "text": "Advanced settings",
      "id": "advanced-settings"
    },
    {
      "level": "h3",
      "text": "Access token lifetime",
      "id": "access-token-lifetime"
    },
    {
      "level": "h3",
      "text": "OIDC flows",
      "id": "oidc-flows"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Get SaaS application URLs",
      "id": "1.-get-saas-application-urls"
    },
    {
      "level": "h2",
      "text": "2. Add your application to Access",
      "id": "2.-add-your-application-to-access"
    },
    {
      "level": "h2",
      "text": "3. Configure SSO in your SaaS application",
      "id": "3.-configure-sso-in-your-saas-application"
    },
    {
      "level": "h3",
      "text": "Validate SAML Response",
      "id": "validate-saml-response"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "SAML attributes",
      "id": "saml-attributes"
    },
    {
      "level": "h3",
      "text": "SAML attribute statements",
      "id": "saml-attribute-statements"
    },
    {
      "level": "h3",
      "text": "JSONata transforms",
      "id": "jsonata-transforms"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create an X.509 certificate",
      "id": "2.-create-an-x.509-certificate"
    },
    {
      "level": "h2",
      "text": "3. Configure an identity provider and SAML SSO in GitHub Enterprise Cloud",
      "id": "3.-configure-an-identity-provider-and-saml-sso-in-github-enterprise-cloud"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create an application in Cloudflare One",
      "id": "1.-create-an-application-in-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a certificate from your public key",
      "id": "2.-create-a-certificate-from-your-public-key"
    },
    {
      "level": "h2",
      "text": "3. Create an SSO provider in Google Workspace",
      "id": "3.-create-an-sso-provider-in-google-workspace"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SSO provider to Grafana Cloud",
      "id": "2.-add-a-sso-provider-to-grafana-cloud"
    },
    {
      "level": "h2",
      "text": "3. Test the integration",
      "id": "3.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SSO provider to Grafana",
      "id": "2.-add-a-sso-provider-to-grafana"
    },
    {
      "level": "h2",
      "text": "3. Test the integration",
      "id": "3.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Download the metadata file",
      "id": "2.-download-the-metadata-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to Greenhouse",
      "id": "3.-add-a-saml-sso-provider-to-greenhouse"
    },
    {
      "level": "h2",
      "text": "4. Finish adding a SaaS application to Cloudflare One",
      "id": "4.-finish-adding-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "5. Test the integration and finalize configuration",
      "id": "5.-test-the-integration-and-finalize-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Configure Hubspot",
      "id": "1.-configure-hubspot"
    },
    {
      "level": "h2",
      "text": "2. Configure Cloudflare Access",
      "id": "2.-configure-cloudflare-access"
    },
    {
      "level": "h2",
      "text": "3. Create a x.509 certificate",
      "id": "3.-create-a-x.509-certificate"
    },
    {
      "level": "h2",
      "text": "4. Finalize Hubspot configuration",
      "id": "4.-finalize-hubspot-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider to Ironclad",
      "id": "2.-add-a-saml-sso-provider-to-ironclad"
    },
    {
      "level": "h2",
      "text": "3. Finish adding a SaaS application to Cloudflare One",
      "id": "3.-finish-adding-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "4. Add a test user to Ironclad and test the integration",
      "id": "4.-add-a-test-user-to-ironclad-and-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Collect Jamf Pro information",
      "id": "1.-collect-jamf-pro-information"
    },
    {
      "level": "h2",
      "text": "2. Add a SaaS application to Cloudflare One",
      "id": "2.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "3. Edit Access SAML Metadata",
      "id": "3.-edit-access-saml-metadata"
    },
    {
      "level": "h2",
      "text": "4. Add a SAML SSO provider to Jamf Pro",
      "id": "4.-add-a-saml-sso-provider-to-jamf-pro"
    },
    {
      "level": "h2",
      "text": "5. Test the Integration",
      "id": "5.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider to Miro",
      "id": "2.-add-a-saml-sso-provider-to-miro"
    },
    {
      "level": "h2",
      "text": "3. Test the integration",
      "id": "3.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a x.509 certificate",
      "id": "2.-create-a-x.509-certificate"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to PagerDuty",
      "id": "3.-add-a-saml-sso-provider-to-pagerduty"
    },
    {
      "level": "h2",
      "text": "4. Test the integration and finalize SSO configuration",
      "id": "4.-test-the-integration-and-finalize-sso-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider to Pingboard",
      "id": "2.-add-a-saml-sso-provider-to-pingboard"
    },
    {
      "level": "h2",
      "text": "3. Test the integration",
      "id": "3.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SSO provider to Salesforce",
      "id": "2.-add-a-sso-provider-to-salesforce"
    },
    {
      "level": "h2",
      "text": "3. Enable Single Sign-On in Salesforce",
      "id": "3.-enable-single-sign-on-in-salesforce"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a certificate file",
      "id": "2.-create-a-certificate-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to Salesforce",
      "id": "3.-add-a-saml-sso-provider-to-salesforce"
    },
    {
      "level": "h2",
      "text": "4. Enable Single Sign-On in Salesforce",
      "id": "4.-enable-single-sign-on-in-salesforce"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add the Multiple Provider Single Sign-On Installer Plugin to ServiceNow",
      "id": "2.-add-the-multiple-provider-single-sign-on-installer-plugin-to-servicenow"
    },
    {
      "level": "h2",
      "text": "3. Add and Test an OIDC SSO provider in ServiceNow",
      "id": "3.-add-and-test-an-oidc-sso-provider-in-servicenow"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add the Multiple Provider Single Sign-On Installer Plugin to ServiceNow",
      "id": "2.-add-the-multiple-provider-single-sign-on-installer-plugin-to-servicenow"
    },
    {
      "level": "h2",
      "text": "3. Add and Test a SAML SSO provider in ServiceNow",
      "id": "3.-add-and-test-a-saml-sso-provider-in-servicenow"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a x.509 certificate",
      "id": "2.-create-a-x.509-certificate"
    },
    {
      "level": "h2",
      "text": "3. Create an SSO provider in Google Cloud",
      "id": "3.-create-an-sso-provider-in-google-cloud"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create a x.509 certificate",
      "id": "2.-create-a-x.509-certificate"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to Slack",
      "id": "3.-add-a-saml-sso-provider-to-slack"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Create and test a SAML SSO provider in Smartsheet",
      "id": "2.-create-and-test-a-saml-sso-provider-in-smartsheet"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Download the metadata file",
      "id": "2.-download-the-metadata-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to SparkPost",
      "id": "3.-add-a-saml-sso-provider-to-sparkpost"
    },
    {
      "level": "h2",
      "text": "4. Add a test user and test the integration",
      "id": "4.-add-a-test-user-and-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Download the metadata file",
      "id": "2.-download-the-metadata-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to Workday",
      "id": "3.-add-a-saml-sso-provider-to-workday"
    },
    {
      "level": "h2",
      "text": "4. Test the integration",
      "id": "4.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Download the metadata file",
      "id": "2.-download-the-metadata-file"
    },
    {
      "level": "h2",
      "text": "3. Add a SAML SSO provider to Tableau Cloud",
      "id": "3.-add-a-saml-sso-provider-to-tableau-cloud"
    },
    {
      "level": "h2",
      "text": "4. Finish adding a SaaS application to Cloudflare One",
      "id": "4.-finish-adding-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "5. Test the integration and set default authentication type",
      "id": "5.-test-the-integration-and-set-default-authentication-type"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a SaaS application to Cloudflare One",
      "id": "1.-add-a-saas-application-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "2. Add a SAML SSO provider in Zoom",
      "id": "2.-add-a-saml-sso-provider-in-zoom"
    },
    {
      "level": "h2",
      "text": "3. Test the integration",
      "id": "3.-test-the-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Configure Zendesk and Cloudflare",
      "id": "configure-zendesk-and-cloudflare"
    },
    {
      "level": "h2",
      "text": "Requirements",
      "id": "requirements"
    },
    {
      "level": "h2",
      "text": "**Connect the host to Cloudflare**",
      "id": "**connect-the-host-to-cloudflare**"
    },
    {
      "level": "h3",
      "text": "1. Install the Cloudflare daemon on the host machine",
      "id": "1.-install-the-cloudflare-daemon-on-the-host-machine"
    },
    {
      "level": "h3",
      "text": "2. Authenticate the Cloudflare daemon",
      "id": "2.-authenticate-the-cloudflare-daemon"
    },
    {
      "level": "h3",
      "text": "3. Secure the subdomain with Cloudflare Access",
      "id": "3.-secure-the-subdomain-with-cloudflare-access"
    },
    {
      "level": "h3",
      "text": "4. Connect the resource to Cloudflare",
      "id": "4.-connect-the-resource-to-cloudflare"
    },
    {
      "level": "h2",
      "text": "**Connect from a client machine**",
      "id": "**connect-from-a-client-machine**"
    },
    {
      "level": "h3",
      "text": "1. Install the Cloudflare daemon on the client machine",
      "id": "1.-install-the-cloudflare-daemon-on-the-client-machine"
    },
    {
      "level": "h3",
      "text": "2. Connect to the resource",
      "id": "2.-connect-to-the-resource"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Enable Email security via the dashboard",
      "id": "enable-email-security-via-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Enable Microsoft integration",
      "id": "enable-microsoft-integration"
    },
    {
      "level": "h3",
      "text": "Connect your domains",
      "id": "connect-your-domains"
    },
    {
      "level": "h3",
      "text": "Connect new domains",
      "id": "connect-new-domains"
    },
    {
      "level": "h2",
      "text": "Prevent Cloudflare from scanning a domain",
      "id": "prevent-cloudflare-from-scanning-a-domain"
    },
    {
      "level": "h2",
      "text": "View an integration",
      "id": "view-an-integration"
    },
    {
      "level": "h2",
      "text": "Verify successful deployment",
      "id": "verify-successful-deployment"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "1. Add a Sender Group for Email security Email Protection IPs",
      "id": "1.-add-a-sender-group-for-email-security-email-protection-ips"
    },
    {
      "level": "h2",
      "text": "2. Add SMTP route for the Email security Email Protection Hosts",
      "id": "2.-add-smtp-route-for-the-email-security-email-protection-hosts"
    },
    {
      "level": "h2",
      "text": "3. Create Incoming Content Filters",
      "id": "3.-create-incoming-content-filters"
    },
    {
      "level": "h3",
      "text": "Incoming Content Filter - To Email security",
      "id": "incoming-content-filter---to-email-security"
    },
    {
      "level": "h3",
      "text": "Incoming Content Filter - From Email security",
      "id": "incoming-content-filter---from-email-security"
    },
    {
      "level": "h2",
      "text": "4. Add the Incoming Content Filter to the Inbound Policy table",
      "id": "4.-add-the-incoming-content-filter-to-the-inbound-policy-table"
    },
    {
      "level": "h2",
      "text": "5. Geographic locations",
      "id": "5.-geographic-locations"
    },
    {
      "level": "h2",
      "text": "6. Set up MX/Inline",
      "id": "6.-set-up-mx/inline"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add a Sender Group for Email security Email Protection IPs",
      "id": "1.-add-a-sender-group-for-email-security-email-protection-ips"
    },
    {
      "level": "h2",
      "text": "2. Configure Incoming Relays",
      "id": "2.-configure-incoming-relays"
    },
    {
      "level": "h2",
      "text": "3. Disable SPF checks",
      "id": "3.-disable-spf-checks"
    },
    {
      "level": "h2",
      "text": "4. Set up MX/Inline",
      "id": "4.-set-up-mx/inline"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Requirements",
      "id": "requirements"
    },
    {
      "level": "h2",
      "text": "1. Set up Inbound Email Configuration",
      "id": "1.-set-up-inbound-email-configuration"
    },
    {
      "level": "h2",
      "text": "2. (Optional) Set up an email quarantine",
      "id": "2.-(optional)-set-up-an-email-quarantine"
    },
    {
      "level": "h2",
      "text": "3. (Optional) Create a content compliance filter",
      "id": "3.-(optional)-create-a-content-compliance-filter"
    },
    {
      "level": "h2",
      "text": "4. Set up MX/Inline",
      "id": "4.-set-up-mx/inline"
    },
    {
      "level": "h2",
      "text": "5. (Recommended) Secure Google Workspace from MX records bypass",
      "id": "5.-(recommended)-secure-google-workspace-from-mx-records-bypass"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Add Email security IP addresses to Allow List",
      "id": "1.-add-email-security-ip-addresses-to-allow-list"
    },
    {
      "level": "h2",
      "text": "2. Configure Enhanced Filtering",
      "id": "2.-configure-enhanced-filtering"
    },
    {
      "level": "h3",
      "text": "Create an inbound connector",
      "id": "create-an-inbound-connector"
    },
    {
      "level": "h3",
      "text": "Enable enhanced filtering",
      "id": "enable-enhanced-filtering"
    },
    {
      "level": "h2",
      "text": "3. Configure anti-spam policies",
      "id": "3.-configure-anti-spam-policies"
    },
    {
      "level": "h2",
      "text": "4. Create transport rules",
      "id": "4.-create-transport-rules"
    },
    {
      "level": "h2",
      "text": "5. Set up MX/Inline",
      "id": "5.-set-up-mx/inline"
    },
    {
      "level": "h2",
      "text": "6. (Recommended) Secure Microsoft 365 from MX records bypass",
      "id": "6.-(recommended)-secure-microsoft-365-from-mx-records-bypass"
    },
    {
      "level": "h2",
      "text": "Update tunnel run parameters",
      "id": "update-tunnel-run-parameters"
    },
    {
      "level": "h2",
      "text": "Update origin configuration",
      "id": "update-origin-configuration"
    },
    {
      "level": "h2",
      "text": "Get the tunnel token",
      "id": "get-the-tunnel-token"
    },
    {
      "level": "h2",
      "text": "Rotate a token without service disruption",
      "id": "rotate-a-token-without-service-disruption"
    },
    {
      "level": "h2",
      "text": "Rotate a compromised token",
      "id": "rotate-a-compromised-token"
    },
    {
      "level": "h2",
      "text": "Account-scoped roles",
      "id": "account-scoped-roles"
    },
    {
      "level": "h2",
      "text": "`cloudflared` replicas",
      "id": "`cloudflared`-replicas"
    },
    {
      "level": "h3",
      "text": "When to use `cloudflared` replicas",
      "id": "when-to-use-`cloudflared`-replicas"
    },
    {
      "level": "h2",
      "text": "Cloudflare Load Balancers",
      "id": "cloudflare-load-balancers"
    },
    {
      "level": "h3",
      "text": "When to use load balancers",
      "id": "when-to-use-load-balancers"
    },
    {
      "level": "h3",
      "text": "Types of load balancers",
      "id": "types-of-load-balancers"
    },
    {
      "level": "h2",
      "text": "Ports",
      "id": "ports"
    },
    {
      "level": "h3",
      "text": "Required for tunnel operation",
      "id": "required-for-tunnel-operation"
    },
    {
      "level": "h3",
      "text": "Region US",
      "id": "region-us"
    },
    {
      "level": "h3",
      "text": "Optional",
      "id": "optional"
    },
    {
      "level": "h2",
      "text": "Firewall configuration",
      "id": "firewall-configuration"
    },
    {
      "level": "h3",
      "text": "Cloud VM firewall",
      "id": "cloud-vm-firewall"
    },
    {
      "level": "h3",
      "text": "OS firewall",
      "id": "os-firewall"
    },
    {
      "level": "h2",
      "text": "Test connectivity",
      "id": "test-connectivity"
    },
    {
      "level": "h3",
      "text": "Test with dig",
      "id": "test-with-dig"
    },
    {
      "level": "h3",
      "text": "Test with PowerShell",
      "id": "test-with-powershell"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Install Ansible",
      "id": "1.-install-ansible"
    },
    {
      "level": "h2",
      "text": "2. (Optional) Create an SSH key pair",
      "id": "2.-(optional)-create-an-ssh-key-pair"
    },
    {
      "level": "h2",
      "text": "3. Create a configuration directory",
      "id": "3.-create-a-configuration-directory"
    },
    {
      "level": "h2",
      "text": "4. Create Terraform configuration files",
      "id": "4.-create-terraform-configuration-files"
    },
    {
      "level": "h3",
      "text": "Define input variables",
      "id": "define-input-variables"
    },
    {
      "level": "h3",
      "text": "Assign values to the variables",
      "id": "assign-values-to-the-variables"
    },
    {
      "level": "h3",
      "text": "Configure Terraform providers",
      "id": "configure-terraform-providers"
    },
    {
      "level": "h3",
      "text": "Configure Cloudflare resources",
      "id": "configure-cloudflare-resources"
    },
    {
      "level": "h3",
      "text": "Configure GCP resources",
      "id": "configure-gcp-resources"
    },
    {
      "level": "h3",
      "text": "Export variables to Ansible",
      "id": "export-variables-to-ansible"
    },
    {
      "level": "h2",
      "text": "5. Create the Ansible playbook",
      "id": "5.-create-the-ansible-playbook"
    },
    {
      "level": "h2",
      "text": "6. Deploy the configuration",
      "id": "6.-deploy-the-configuration"
    },
    {
      "level": "h2",
      "text": "7. Test the connection",
      "id": "7.-test-the-connection"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create a VM instance in AWS",
      "id": "1.-create-a-vm-instance-in-aws"
    },
    {
      "level": "h2",
      "text": "2. Create a Cloudflare Tunnel",
      "id": "2.-create-a-cloudflare-tunnel"
    },
    {
      "level": "h2",
      "text": "3. Connect using a public hostname",
      "id": "3.-connect-using-a-public-hostname"
    },
    {
      "level": "h2",
      "text": "4. Connect using a private IP",
      "id": "4.-connect-using-a-private-ip"
    },
    {
      "level": "h2",
      "text": "Firewall configuration",
      "id": "firewall-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Create your environment",
      "id": "create-your-environment"
    },
    {
      "level": "h2",
      "text": "Deploy `cloudflared`",
      "id": "deploy-`cloudflared`"
    },
    {
      "level": "h2",
      "text": "Complete tunnel configuration",
      "id": "complete-tunnel-configuration"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create a VM instance in GCP",
      "id": "1.-create-a-vm-instance-in-gcp"
    },
    {
      "level": "h2",
      "text": "2. Create a Cloudflare Tunnel",
      "id": "2.-create-a-cloudflare-tunnel"
    },
    {
      "level": "h2",
      "text": "3. Connect using a public hostname",
      "id": "3.-connect-using-a-public-hostname"
    },
    {
      "level": "h2",
      "text": "4. Connect using a private IP",
      "id": "4.-connect-using-a-private-ip"
    },
    {
      "level": "h2",
      "text": "Firewall configuration",
      "id": "firewall-configuration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Install Terraform",
      "id": "1.-install-terraform"
    },
    {
      "level": "h2",
      "text": "2. Install the gcloud CLI",
      "id": "2.-install-the-gcloud-cli"
    },
    {
      "level": "h2",
      "text": "3. Create a Cloudflare API token",
      "id": "3.-create-a-cloudflare-api-token"
    },
    {
      "level": "h2",
      "text": "4. Create a configuration directory",
      "id": "4.-create-a-configuration-directory"
    },
    {
      "level": "h2",
      "text": "5. Create Terraform configuration files",
      "id": "5.-create-terraform-configuration-files"
    },
    {
      "level": "h3",
      "text": "Define input variables",
      "id": "define-input-variables"
    },
    {
      "level": "h3",
      "text": "Assign values to the variables",
      "id": "assign-values-to-the-variables"
    },
    {
      "level": "h3",
      "text": "Configure Terraform providers",
      "id": "configure-terraform-providers"
    },
    {
      "level": "h3",
      "text": "Configure Cloudflare resources",
      "id": "configure-cloudflare-resources"
    },
    {
      "level": "h3",
      "text": "Configure GCP resources",
      "id": "configure-gcp-resources"
    },
    {
      "level": "h3",
      "text": "Create a startup script",
      "id": "create-a-startup-script"
    },
    {
      "level": "h2",
      "text": "6. Deploy Terraform",
      "id": "6.-deploy-terraform"
    },
    {
      "level": "h2",
      "text": "7. Test the connection",
      "id": "7.-test-the-connection"
    },
    {
      "level": "h2",
      "text": "Architecture",
      "id": "architecture"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create a GKE cluster",
      "id": "1.-create-a-gke-cluster"
    },
    {
      "level": "h2",
      "text": "2. Create pods for the web app",
      "id": "2.-create-pods-for-the-web-app"
    },
    {
      "level": "h2",
      "text": "3. Create a tunnel",
      "id": "3.-create-a-tunnel"
    },
    {
      "level": "h2",
      "text": "4. Store the tunnel token",
      "id": "4.-store-the-tunnel-token"
    },
    {
      "level": "h2",
      "text": "5. Create pods for cloudflared",
      "id": "5.-create-pods-for-cloudflared"
    },
    {
      "level": "h2",
      "text": "6. Verify tunnel status",
      "id": "6.-verify-tunnel-status"
    },
    {
      "level": "h2",
      "text": "7. Add a tunnel route",
      "id": "7.-add-a-tunnel-route"
    },
    {
      "level": "h2",
      "text": "8. Test the connection",
      "id": "8.-test-the-connection"
    },
    {
      "level": "h2",
      "text": "Use TryCloudflare",
      "id": "use-trycloudflare"
    },
    {
      "level": "h2",
      "text": "FAQ",
      "id": "faq"
    },
    {
      "level": "h3",
      "text": "What are some example use cases for TryCloudflare?",
      "id": "what-are-some-example-use-cases-for-trycloudflare?"
    },
    {
      "level": "h3",
      "text": "Why does Cloudflare provide this service for free?",
      "id": "why-does-cloudflare-provide-this-service-for-free?"
    },
    {
      "level": "h3",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h3",
      "text": "Legal",
      "id": "legal"
    },
    {
      "level": "h2",
      "text": "Runtime Library Exception to the Apache 2.0 License:",
      "id": "runtime-library-exception-to-the-apache-2.0-license:"
    },
    {
      "level": "h2",
      "text": "Update the `cloudflared` service",
      "id": "update-the-`cloudflared`-service"
    },
    {
      "level": "h2",
      "text": "Update with Cloudflare Load Balancer",
      "id": "update-with-cloudflare-load-balancer"
    },
    {
      "level": "h2",
      "text": "Update with multiple `cloudflared` instances",
      "id": "update-with-multiple-`cloudflared`-instances"
    },
    {
      "level": "h3",
      "text": "Run multiple instances in Windows",
      "id": "run-multiple-instances-in-windows"
    },
    {
      "level": "h2",
      "text": "1. Create a tunnel",
      "id": "1.-create-a-tunnel"
    },
    {
      "level": "h2",
      "text": "2a. Publish an application",
      "id": "2a.-publish-an-application"
    },
    {
      "level": "h2",
      "text": "2b. Connect a network",
      "id": "2b.-connect-a-network"
    },
    {
      "level": "h2",
      "text": "3. View your tunnel",
      "id": "3.-view-your-tunnel"
    },
    {
      "level": "h2",
      "text": "Tunnel",
      "id": "tunnel"
    },
    {
      "level": "h2",
      "text": "Tunnel UUID",
      "id": "tunnel-uuid"
    },
    {
      "level": "h2",
      "text": "Tunnel name",
      "id": "tunnel-name"
    },
    {
      "level": "h2",
      "text": "Connector",
      "id": "connector"
    },
    {
      "level": "h2",
      "text": "Replica",
      "id": "replica"
    },
    {
      "level": "h2",
      "text": "Remotely-managed tunnel",
      "id": "remotely-managed-tunnel"
    },
    {
      "level": "h2",
      "text": "Locally-managed tunnel",
      "id": "locally-managed-tunnel"
    },
    {
      "level": "h2",
      "text": "Quick tunnels",
      "id": "quick-tunnels"
    },
    {
      "level": "h2",
      "text": "Virtual networks",
      "id": "virtual-networks"
    },
    {
      "level": "h2",
      "text": "Create an API token",
      "id": "create-an-api-token"
    },
    {
      "level": "h2",
      "text": "2. Create a tunnel",
      "id": "2.-create-a-tunnel"
    },
    {
      "level": "h2",
      "text": "3a. Publish an application",
      "id": "3a.-publish-an-application"
    },
    {
      "level": "h2",
      "text": "3b. Connect a network",
      "id": "3b.-connect-a-network"
    },
    {
      "level": "h2",
      "text": "4. Install and run the tunnel",
      "id": "4.-install-and-run-the-tunnel"
    },
    {
      "level": "h2",
      "text": "5. Verify tunnel status",
      "id": "5.-verify-tunnel-status"
    },
    {
      "level": "h2",
      "text": "View logs on the server",
      "id": "view-logs-on-the-server"
    },
    {
      "level": "h2",
      "text": "View logs on your local machine",
      "id": "view-logs-on-your-local-machine"
    },
    {
      "level": "h3",
      "text": "Dashboard",
      "id": "dashboard"
    },
    {
      "level": "h3",
      "text": "CLI",
      "id": "cli"
    },
    {
      "level": "h3",
      "text": "Performance considerations",
      "id": "performance-considerations"
    },
    {
      "level": "h2",
      "text": "Default metrics server address",
      "id": "default-metrics-server-address"
    },
    {
      "level": "h2",
      "text": "Configure the metrics server address",
      "id": "configure-the-metrics-server-address"
    },
    {
      "level": "h2",
      "text": "Available metrics",
      "id": "available-metrics"
    },
    {
      "level": "h3",
      "text": "cloudflared metrics",
      "id": "cloudflared-metrics"
    },
    {
      "level": "h3",
      "text": "Prometheus metrics",
      "id": "prometheus-metrics"
    },
    {
      "level": "h3",
      "text": "Go runtime metrics",
      "id": "go-runtime-metrics"
    },
    {
      "level": "h2",
      "text": "Manage notifications",
      "id": "manage-notifications"
    },
    {
      "level": "h2",
      "text": "Available notifications",
      "id": "available-notifications"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Enable WARP-to-WARP",
      "id": "enable-warp-to-warp"
    },
    {
      "level": "h2",
      "text": "Connect via WARP",
      "id": "connect-via-warp"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h3",
      "text": "Check your firewall",
      "id": "check-your-firewall"
    },
    {
      "level": "h2",
      "text": "Create a public load balancer",
      "id": "create-a-public-load-balancer"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h3",
      "text": "Create a load balancer",
      "id": "create-a-load-balancer"
    },
    {
      "level": "h3",
      "text": "Optional Cloudflare settings",
      "id": "optional-cloudflare-settings"
    },
    {
      "level": "h2",
      "text": "Common architectures",
      "id": "common-architectures"
    },
    {
      "level": "h3",
      "text": "One app per load balancer",
      "id": "one-app-per-load-balancer"
    },
    {
      "level": "h3",
      "text": "Multiple apps per load balancer",
      "id": "multiple-apps-per-load-balancer"
    },
    {
      "level": "h2",
      "text": "Known limitations",
      "id": "known-limitations"
    },
    {
      "level": "h3",
      "text": "Monitors and TCP tunnel origins",
      "id": "monitors-and-tcp-tunnel-origins"
    },
    {
      "level": "h3",
      "text": "Session affinity and replicas",
      "id": "session-affinity-and-replicas"
    },
    {
      "level": "h3",
      "text": "Local connection preference",
      "id": "local-connection-preference"
    },
    {
      "level": "h2",
      "text": "1. Set up a gRPC server",
      "id": "1.-set-up-a-grpc-server"
    },
    {
      "level": "h2",
      "text": "2. Connect the server to Cloudflare",
      "id": "2.-connect-the-server-to-cloudflare"
    },
    {
      "level": "h2",
      "text": "3. Route private network IPs through WARP",
      "id": "3.-route-private-network-ips-through-warp"
    },
    {
      "level": "h2",
      "text": "4. (Recommended) Create a Gateway policy",
      "id": "4.-(recommended)-create-a-gateway-policy"
    },
    {
      "level": "h3",
      "text": "1. Allow secured devices",
      "id": "1.-allow-secured-devices"
    },
    {
      "level": "h3",
      "text": "2. Block everything else",
      "id": "2.-block-everything-else"
    },
    {
      "level": "h2",
      "text": "5. Set up the client",
      "id": "5.-set-up-the-client"
    },
    {
      "level": "h2",
      "text": "6. Test the connection",
      "id": "6.-test-the-connection"
    },
    {
      "level": "h2",
      "text": "Set up an SMB server on Linux",
      "id": "set-up-an-smb-server-on-linux"
    },
    {
      "level": "h2",
      "text": "Connect to SMB server with WARP to Tunnel",
      "id": "connect-to-smb-server-with-warp-to-tunnel"
    },
    {
      "level": "h3",
      "text": "1. Connect the server to Cloudflare",
      "id": "1.-connect-the-server-to-cloudflare"
    },
    {
      "level": "h3",
      "text": "2. Set up the client",
      "id": "2.-set-up-the-client"
    },
    {
      "level": "h3",
      "text": "3. Route private network IPs through WARP",
      "id": "3.-route-private-network-ips-through-warp"
    },
    {
      "level": "h3",
      "text": "4. Connect as a user",
      "id": "4.-connect-as-a-user"
    },
    {
      "level": "h2",
      "text": "Connect to SMB server with `cloudflared access`",
      "id": "connect-to-smb-server-with-`cloudflared-access`"
    },
    {
      "level": "h3",
      "text": "1. Connect the server to Cloudflare",
      "id": "1.-connect-the-server-to-cloudflare"
    },
    {
      "level": "h3",
      "text": "2. (Recommended) Create an Access application",
      "id": "2.-(recommended)-create-an-access-application"
    },
    {
      "level": "h3",
      "text": "3. Connect as a user",
      "id": "3.-connect-as-a-user"
    },
    {
      "level": "h2",
      "text": "Create a DNS record for the tunnel",
      "id": "create-a-dns-record-for-the-tunnel"
    },
    {
      "level": "h2",
      "text": "Optional Cloudflare settings",
      "id": "optional-cloudflare-settings"
    },
    {
      "level": "h2",
      "text": "Tunnel status",
      "id": "tunnel-status"
    },
    {
      "level": "h2",
      "text": "I see `cloudflared service is already installed`.",
      "id": "i-see-`cloudflared-service-is-already-installed`."
    },
    {
      "level": "h2",
      "text": "I see `An A, AAAA, or CNAME record with that host already exists`.",
      "id": "i-see-`an-a,-aaaa,-or-cname-record-with-that-host-already-exists`."
    },
    {
      "level": "h2",
      "text": "Tunnel credentials file doesn't exist or is not a file.",
      "id": "tunnel-credentials-file-doesn't-exist-or-is-not-a-file."
    },
    {
      "level": "h2",
      "text": "My tunnel fails to authenticate.",
      "id": "my-tunnel-fails-to-authenticate."
    },
    {
      "level": "h2",
      "text": "I see an error: x509: certificate signed by unknown authority.",
      "id": "i-see-an-error:-x509:-certificate-signed-by-unknown-authority."
    },
    {
      "level": "h2",
      "text": "I see an error 1033 when attempting to run a tunnel.",
      "id": "i-see-an-error-1033-when-attempting-to-run-a-tunnel."
    },
    {
      "level": "h2",
      "text": "I see `ERR_TOO_MANY_REDIRECTS` when attempting to connect to an Access self-hosted app.",
      "id": "i-see-`err_too_many_redirects`-when-attempting-to-connect-to-an-access-self-hosted-app."
    },
    {
      "level": "h2",
      "text": "`cloudflared access` shows an error `websocket: bad handshake`.",
      "id": "`cloudflared-access`-shows-an-error-`websocket:-bad-handshake`."
    },
    {
      "level": "h2",
      "text": "My tunnel randomly disconnects.",
      "id": "my-tunnel-randomly-disconnects."
    },
    {
      "level": "h2",
      "text": "Tunnel connections fail with SSL error.",
      "id": "tunnel-connections-fail-with-ssl-error."
    },
    {
      "level": "h2",
      "text": "Tunnel connections fail with `Too many open files` error.",
      "id": "tunnel-connections-fail-with-`too-many-open-files`-error."
    },
    {
      "level": "h2",
      "text": "I see `failed to sufficiently increase receive buffer size` in my cloudflared logs.",
      "id": "i-see-`failed-to-sufficiently-increase-receive-buffer-size`-in-my-cloudflared-logs."
    },
    {
      "level": "h2",
      "text": "`ping` and `traceroute` commands do not work.",
      "id": "`ping`-and-`traceroute`-commands-do-not-work."
    },
    {
      "level": "h2",
      "text": "Cloudflare Tunnel is buffering my streaming response instead of streaming it live.",
      "id": "cloudflare-tunnel-is-buffering-my-streaming-response-instead-of-streaming-it-live."
    },
    {
      "level": "h2",
      "text": "I see `Error: This route's network is inside an existing subnet's network at \"100.96.0.0/12\"`.",
      "id": "i-see-`error:-this-route's-network-is-inside-an-existing-subnet's-network-at-\"100.96.0.0/12\"`."
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "1. Before you start",
      "id": "1.-before-you-start"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h3",
      "text": "Terminology",
      "id": "terminology"
    },
    {
      "level": "h2",
      "text": "2. DNS test with dig",
      "id": "2.-dns-test-with-dig"
    },
    {
      "level": "h3",
      "text": "2.1. Test DNS with your current resolver",
      "id": "2.1.-test-dns-with-your-current-resolver"
    },
    {
      "level": "h3",
      "text": "2.2. Compare against `1.1.1.1`",
      "id": "2.2.-compare-against-`1.1.1.1`"
    },
    {
      "level": "h2",
      "text": "3. Test network connectivity",
      "id": "3.-test-network-connectivity"
    },
    {
      "level": "h3",
      "text": "3.1. Test UDP connectivity",
      "id": "3.1.-test-udp-connectivity"
    },
    {
      "level": "h3",
      "text": "3.2. Test TCP connectivity",
      "id": "3.2.-test-tcp-connectivity"
    },
    {
      "level": "h3",
      "text": "3.3 Interpret results",
      "id": "3.3-interpret-results"
    },
    {
      "level": "h2",
      "text": "4. Get help",
      "id": "4.-get-help"
    },
    {
      "level": "h2",
      "text": "Get diagnostic logs",
      "id": "get-diagnostic-logs"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h3",
      "text": "Host environment",
      "id": "host-environment"
    },
    {
      "level": "h3",
      "text": "Docker",
      "id": "docker"
    },
    {
      "level": "h3",
      "text": "Kubernetes",
      "id": "kubernetes"
    },
    {
      "level": "h2",
      "text": "cloudflared-diag files",
      "id": "cloudflared-diag-files"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "1. Is the WARP client connected to a Cloudflare data center?",
      "id": "1.-is-the-warp-client-connected-to-a-cloudflare-data-center?"
    },
    {
      "level": "h2",
      "text": "2. Is the WARP client connecting to your private DNS server?",
      "id": "2.-is-the-warp-client-connecting-to-your-private-dns-server?"
    },
    {
      "level": "h2",
      "text": "3. Is network traffic to the application going through WARP?",
      "id": "3.-is-network-traffic-to-the-application-going-through-warp?"
    },
    {
      "level": "h2",
      "text": "4. Is the user blocked by a Gateway policy?",
      "id": "4.-is-the-user-blocked-by-a-gateway-policy?"
    },
    {
      "level": "h2",
      "text": "5. Is the user matching the correct Gateway policy?",
      "id": "5.-is-the-user-matching-the-correct-gateway-policy?"
    },
    {
      "level": "h2",
      "text": "6. Are the correct Gateway proxy settings enabled?",
      "id": "6.-are-the-correct-gateway-proxy-settings-enabled?"
    },
    {
      "level": "h2",
      "text": "7. Is the user's traffic reaching the tunnel?",
      "id": "7.-is-the-user's-traffic-reaching-the-tunnel?"
    },
    {
      "level": "h2",
      "text": "8. Is the tunnel forwarding requests to your application?",
      "id": "8.-is-the-tunnel-forwarding-requests-to-your-application?"
    },
    {
      "level": "h2",
      "text": "9. How is your application handling requests?",
      "id": "9.-how-is-your-application-handling-requests?"
    },
    {
      "level": "h2",
      "text": "10. Is TLS inspection affecting the connection to your application?",
      "id": "10.-is-tls-inspection-affecting-the-connection-to-your-application?"
    },
    {
      "level": "h2",
      "text": "NetFlow exports from Magic WAN Connector to Magic Network Monitoring",
      "id": "netflow-exports-from-magic-wan-connector-to-magic-network-monitoring"
    },
    {
      "level": "h3",
      "text": "Enable NetFlow exports",
      "id": "enable-netflow-exports"
    },
    {
      "level": "h2",
      "text": "API Call",
      "id": "api-call"
    }
  ],
  "url": "llms-txt#your-cf-access-team-domain",
  "links": []
}