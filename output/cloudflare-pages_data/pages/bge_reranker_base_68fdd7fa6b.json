{
  "title": "bge-reranker-base",
  "content": "Text Classification • baai\n\n@cf/baai/bge-reranker-base\n\nDifferent from embedding model, reranker uses question and document as input and directly output similarity instead of embedding. You can get a relevance score by inputting query and passage to the reranker. And the score can be mapped to a float value in \\[0,1] by sigmoid function.\n\n| Model Info | |\n| - | - |\n| Unit Pricing | $0.0031 per M input tokens |\n\n\\* indicates a required field\n\n* `query` string required min 1\n\nA query you wish to perform against the provided contexts.\n\n* `top_k` integer min 1\n\nNumber of returned results starting with the best score.\n\n* `contexts` array required\n\nList of provided contexts. Note that the index in this array is important, as the response will refer to it.\n\n* `text` string min 1\n\nOne of the provided context content\n\nIndex of the context in the request\n\nScore of the context under the index.\n\nThe following schemas are based on JSON Schema\n\n<page>\n---\ntitle: bge-small-en-v1.5 · Cloudflare Workers AI docs\ndescription: BAAI general embedding (Small) model that transforms any given text\n  into a 384-dimensional vector\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers-ai/models/bge-small-en-v1.5/\n  md: https://developers.cloudflare.com/workers-ai/models/bge-small-en-v1.5/index.md\n---",
  "code_samples": [
    {
      "code": "export interface Env {\n  AI: Ai;\n}\n\n\nexport default {\n  async fetch(request, env): Promise<Response> {\n    const query = 'Which one is cooler?'\n    const contexts = [\n      {\n        text: 'a cyberpunk lizzard'\n      },\n      {\n        text: 'a cyberpunk cat'\n      }\n    ];\n\n\n    const response = await env.AI.run('@cf/baai/bge-reranker-base', { query, contexts });\n\n\n    return Response.json(response);\n  },\n} satisfies ExportedHandler<Env>;",
      "language": "ts"
    },
    {
      "code": "import os\nimport requests\n\n\nACCOUNT_ID = \"your-account-id\"\nAUTH_TOKEN = os.environ.get(\"CLOUDFLARE_AUTH_TOKEN\")\n\n\nresponse = requests.post(\n  f\"https://api.cloudflare.com/client/v4/accounts/{ACCOUNT_ID}/ai/run/@cf/baai/bge-reranker-base\",\n    headers={\"Authorization\": f\"Bearer {AUTH_TOKEN}\"},\n    json={\n    \"query\": \"Which one is better?\",\n      \"contexts\": [\n        {\"text\": \"a cyberpunk lizzard\"},\n        {\"text\": \"a cyberpunk car\"},\n      ]\n    }\n)\nresult = response.json()\nprint(result)",
      "language": "py"
    },
    {
      "code": "curl https://api.cloudflare.com/client/v4/accounts/$CLOUDFLARE_ACCOUNT_ID/ai/run/@cf/baai/bge-reranker-base \\\n  -X POST \\\n  -H \"Authorization: Bearer $CLOUDFLARE_AUTH_TOKEN\" \\\n  -d '{ \"query\": \"Which one is better?\", \"contexts\": [{ \"text\": \"a cyberpunk lizzard\" }, {\"text\": \"a cyberpunk cat\"}]}'",
      "language": "sh"
    },
    {
      "code": "{\n      \"type\": \"object\",\n      \"properties\": {\n          \"query\": {\n              \"type\": \"string\",\n              \"minLength\": 1,\n              \"description\": \"A query you wish to perform against the provided contexts.\"\n          },\n          \"top_k\": {\n              \"type\": \"integer\",\n              \"minimum\": 1,\n              \"description\": \"Number of returned results starting with the best score.\"\n          },\n          \"contexts\": {\n              \"type\": \"array\",\n              \"items\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                      \"text\": {\n                          \"type\": \"string\",\n                          \"minLength\": 1,\n                          \"description\": \"One of the provided context content\"\n                      }\n                  }\n              },\n              \"description\": \"List of provided contexts. Note that the index in this array is important, as the response will refer to it.\"\n          }\n      },\n      \"required\": [\n          \"query\",\n          \"contexts\"\n      ]\n  }",
      "language": "json"
    },
    {
      "code": "{\n      \"type\": \"object\",\n      \"contentType\": \"application/json\",\n      \"properties\": {\n          \"response\": {\n              \"type\": \"array\",\n              \"items\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                      \"id\": {\n                          \"type\": \"integer\",\n                          \"description\": \"Index of the context in the request\"\n                      },\n                      \"score\": {\n                          \"type\": \"number\",\n                          \"description\": \"Score of the context under the index.\"\n                      }\n                  }\n              }\n          }\n      }\n  }",
      "language": "json"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h2",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h3",
      "text": "Input",
      "id": "input"
    },
    {
      "level": "h3",
      "text": "Output",
      "id": "output"
    },
    {
      "level": "h2",
      "text": "API Schemas",
      "id": "api-schemas"
    }
  ],
  "url": "llms-txt#bge-reranker-base",
  "links": []
}