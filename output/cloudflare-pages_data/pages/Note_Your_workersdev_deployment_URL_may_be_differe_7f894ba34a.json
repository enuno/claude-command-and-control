{
  "title": "Note: Your workers.dev deployment URL may be different",
  "content": "curl https://d1-example.signalnerve.workers.dev/api/posts/hello-world/comments\n[\n  {\n    \"id\": 1,\n    \"author\": \"Kristian\",\n    \"body\": \"Hello from the comments section!\",\n    \"post_slug\": \"hello-world\"\n  }\n]\ntypescript\nimport { Hono } from \"hono\";\nimport { cors } from \"hono/cors\";\n\nconst app = new Hono();\napp.use(\"/api/*\", cors());\nsh\nnpm create hono@latest\nplaintext\n.\n‚îú‚îÄ‚îÄ app\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ global.d.ts // global type definitions\n‚îÇ¬†¬† ‚îú‚îÄ‚îÄ routes\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _404.tsx // not found page\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _error.tsx // error page\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ _renderer.tsx // renderer definition\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ about\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ [name].tsx // matches `/about/:name`\n‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ index.tsx // matches `/`\n‚îÇ¬†¬† ‚îî‚îÄ‚îÄ server.ts // server entry file\n‚îú‚îÄ‚îÄ package.json\n‚îú‚îÄ‚îÄ tsconfig.json\n‚îî‚îÄ‚îÄ vite.config.ts\nsh\nnpx wrangler d1 create staff-directory\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"staff-directory\",\n    \"compatibility_date\": \"2023-12-01\"\n  }\n  toml\n  name = \"staff-directory\"\n  compatibility_date = \"2023-12-01\"\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"d1_databases\": [\n      {\n        \"binding\": \"DB\",\n        \"database_name\": \"staff-directory\",\n        \"database_id\": \"f495af5f-dd71-4554-9974-97bdda7137b3\"\n      }\n    ]\n  }\n  toml\n  [[d1_databases]]\n  binding = \"DB\"\n  database_name = \"staff-directory\"\n  database_id = \"f495af5f-dd71-4554-9974-97bdda7137b3\"\n  ts\nimport adapter from \"@hono/vite-dev-server/cloudflare\";\n\nexport default defineConfig(({ mode }) => {\n  if (mode === \"client\") {\n    return {\n      plugins: [client()],\n    };\n  } else {\n    return {\n      plugins: [\n        honox({\n          devServer: {\n            adapter,\n          },\n        }),\n        pages(),\n      ],\n    };\n  }\n});\nsh\nwrangler d1 execute staff-directory --command \"SELECT name FROM sqlite_schema WHERE type ='table'\"\nsql\nCREATE TABLE locations (\n    location_id INTEGER PRIMARY KEY AUTOINCREMENT,\n    location_name VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE departments (\n    department_id INTEGER PRIMARY KEY AUTOINCREMENT,\n    department_name VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE employees (\n    employee_id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name VARCHAR(255) NOT NULL,\n    position VARCHAR(255) NOT NULL,\n    image_url VARCHAR(255) NOT NULL,\n    join_date DATE NOT NULL,\n    location_id INTEGER REFERENCES locations(location_id),\n    department_id INTEGER REFERENCES departments(department_id)\n);\n\nINSERT INTO locations (location_name) VALUES ('London, UK'), ('Paris, France'), ('Berlin, Germany'), ('Lagos, Nigeria'), ('Nairobi, Kenya'), ('Cairo, Egypt'), ('New York, NY'), ('San Francisco, CA'), ('Chicago, IL');\n\nINSERT INTO departments (department_name) VALUES ('Software Engineering'), ('Product Management'), ('Information Technology (IT)'), ('Quality Assurance (QA)'), ('User Experience (UX)/User Interface (UI) Design'), ('Sales and Marketing'), ('Human Resources (HR)'), ('Customer Support'), ('Research and Development (R&D)'), ('Finance and Accounting');\nsh\nwrangler d1 execute staff-directory --file=./schema.sql\nts\nexport const findAllEmployees = async (db: D1Database) => {\n  const query = `\n      SELECT employees.*, locations.location_name, departments.department_name\n      FROM employees\n      JOIN locations ON employees.location_id = locations.location_id\n      JOIN departments ON employees.department_id = departments.department_id\n      `;\n  const { results } = await db.prepare(query).run();\n  const employees = results;\n  return employees;\n};\nts\nexport const createEmployee = async (db: D1Database, employee: Employee) => {\n  const query = `\n      INSERT INTO employees (name, position, join_date, image_url, department_id, location_id)\n      VALUES (?, ?, ?, ?, ?, ?)`;\n\nconst results = await db\n    .prepare(query)\n    .bind(\n      employee.name,\n      employee.position,\n      employee.join_date,\n      employee.image_url,\n      employee.department_id,\n      employee.location_id,\n    )\n    .run();\n  const employees = results;\n  return employees;\n};\nts\nimport { jsxRenderer } from 'hono/jsx-renderer'\nimport { Script } from 'honox/server'\n\nexport default jsxRenderer(({ children, title }) => {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <title>{title}</title>\n        <Script src=\"/app/client.ts\" async />\n      </head>\n      <body>{children}</body>\n    </html>\n  )\n})\nts\ndeclare module \"hono\" {\n  interface Env {\n    Variables: {};\n    Bindings: {\n      DB: D1Database;\n    };\n  }\n}\nts\nimport { css } from 'hono/css'\nimport { createRoute } from 'honox/factory'\nimport Counter from '../islands/counter'\n\nconst className = css`\n  font-family: sans-serif;\n`\n\nexport default createRoute((c) => {\n  const name = c.req.query('name') ?? 'Hono'\n  return c.render(\n    <div class={className}>\n      <h1>Hello, {name}!</h1>\n      <Counter />\n    </div>,\n    { title: name }\n  )\n})\nts\nimport { createRoute } from 'honox/factory'\nimport type { FC } from 'hono/jsx'\nimport type { Employee } from '../db'\nimport { findAllEmployees, findAllDepartments, findAllLocations } from '../db'\n\nconst EmployeeCard: FC<{ employee: Employee }> = ({ employee }) => {\n  const { employee_id, name, image_url, department_name, location_name } = employee;\n  return (\n    <div className=\"max-w-sm bg-white border border-gray-200 rounded-lg shadow-md\">\n      <a href={`/employee/${employee_id}`}>\n        <img className=\"bg-indigo-600 p-4 rounded-t-lg\" src={image_url} alt={name} />\n        //...\n      </a>\n    </div>\n  );\n};\n\nexport const GET = createRoute(async (c) => {\n  const employees = await findAllEmployees(c.env.DB)\n  const locations = await findAllLocations(c.env.DB)\n  const departments = await findAllDepartments(c.env.DB)\n  return c.render(\n    <section className=\"flex-grow\">\n      <h1 className=\"mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl mt-12\">\n        <span className=\"text-transparent bg-clip-text bg-gradient-to-r to-blue-600 from-sky-400\">{`Directory `}</span>\n      </h1>\n      //...\n      </section>\n      <section className=\"flex flex-wrap -mx-4\">\n        {employees.map((employee) => (\n          <div className=\"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 px-2 mb-4\">\n            <EmployeeCard employee={employee} />\n          </div>\n        ))}\n      </section>\n    </section>\n  )\n})\nts\nimport { createRoute } from \"honox/factory\";\nimport type { Employee } from \"../../db\";\nimport { getFormDataValue, getFormDataNumber } from \"../../utils/formData\";\nimport { createEmployee } from \"../../db\";\n\nexport const POST = createRoute(async (c) => {\n  try {\n    const formData = await c.req.formData();\n    const imageFile = formData.get(\"image_file\");\n    let imageUrl = \"\";\n\n// TODO: process image url with R2\n\nconst employeeData: Employee = {\n      employee_id: getFormDataValue(formData, \"employee_id\"),\n      name: getFormDataValue(formData, \"name\"),\n      position: getFormDataValue(formData, \"position\"),\n      image_url: imageUrl,\n      join_date: getFormDataValue(formData, \"join_date\"),\n      department_id: getFormDataNumber(formData, \"department_id\"),\n      location_id: getFormDataNumber(formData, \"location_id\"),\n      location_name: \"\",\n      department_name: \"\",\n    };\n\nawait createEmployee(c.env.DB, employeeData);\n    return c.redirect(\"/\", 303);\n  } catch (error) {\n    return new Response(\"Error processing your request\", { status: 500 });\n  }\n});\nsh\nwrangler r2 bucket create employee-avatars\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"r2_buckets\": [\n      {\n        \"binding\": \"MY_BUCKET\",\n        \"bucket_name\": \"employee-avatars\"\n      }\n    ]\n  }\n  toml\n  [[r2_buckets]]\n  binding = \"MY_BUCKET\"\n  bucket_name = \"employee-avatars\"\n  ts\ndeclare module \"hono\" {\n  interface Env {\n    Variables: {};\n    Bindings: {\n      DB: D1Database;\n      MY_BUCKET: R2Bucket;\n    };\n  }\n}\nts\nif (imageFile instanceof File) {\n  const key = `${new Date().getTime()}-${imageFile.name}`;\n  const fileBuffer = await imageFile.arrayBuffer();\n\nawait c.env.MY_BUCKET.put(key, fileBuffer, {\n    httpMetadata: {\n      contentType: imageFile.type || \"application/octet-stream\",\n    },\n  });\n  console.log(`File uploaded successfully: ${key}`);\n  imageUrl = `https://pub-8d936184779047cc96686a631f318fce.r2.dev/${key}`;\n}\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"staff-directory\",\n    \"compatibility_date\": \"2023-12-01\",\n    \"r2_buckets\": [\n      {\n        \"binding\": \"MY_BUCKET\",\n        \"bucket_name\": \"employee-avatars\"\n      }\n    ],\n    \"d1_databases\": [\n      {\n        \"binding\": \"DB\",\n        \"database_name\": \"staff-directory\",\n        \"database_id\": \"f495af5f-dd71-4554-9974-97bdda7137b3\"\n      }\n    ]\n  }\n  toml\n  name = \"staff-directory\"\n  compatibility_date = \"2023-12-01\"\n\n[[r2_buckets]]\n  binding = \"MY_BUCKET\"\n  bucket_name = \"employee-avatars\"\n\n[[d1_databases]]\n  binding = \"DB\"\n  database_name = \"staff-directory\"\n  database_id = \"f495af5f-dd71-4554-9974-97bdda7137b3\"\n  sh\n     npm create cloudflare@latest -- d1-http\n     sh\n     yarn create cloudflare d1-http\n     sh\n     pnpm create cloudflare@latest d1-http\n     sh\n   cd d1-http\n   sh\n     npm i hono\n     sh\n     yarn add hono\n     sh\n     pnpm add hono\n     bash\n   API_KEY=\"YOUR_API_KEY\"\n   sh\n   openssl rand -base64 32\n   ts\n   import { Hono } from \"hono\";\n   import { bearerAuth } from \"hono/bearer-auth\";\n   import { logger } from \"hono/logger\";\n   import { prettyJSON } from \"hono/pretty-json\";\n\ntype Bindings = {\n     API_KEY: string;\n   };\n\nconst app = new Hono<{ Bindings: Bindings }>();\n\napp.use(\"*\", prettyJSON(), logger(), async (c, next) => {\n     const auth = bearerAuth({ token: c.env.API_KEY });\n     return auth(c, next);\n   });\n   ts\n   // Paste this code at the end of the src/index.ts file\n\napp.post(\"/api/all\", async (c) => {\n     return c.text(\"/api/all endpoint\");\n   });\n\napp.post(\"/api/exec\", async (c) => {\n     return c.text(\"/api/exec endpoint\");\n   });\n\napp.post(\"/api/batch\", async (c) => {\n     return c.text(\"/api/batch endpoint\");\n   });\n\nexport default app;\n   sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n   curl -H \"Authorization: Bearer YOUR_API_KEY\" \"http://localhost:8787/api/all\" --data '{}'\n   txt\n   /api/all endpoint\n   sh\n   npx wrangler d1 create d1-http-example\n   sh\n   ‚úÖ Successfully created DB 'd1-http-example' in region EEUR\n   Created your new D1 database.\n\n[[d1_databases]]\n   binding = \"DB\" # i.e. available in your Worker on env.DB\n   database_name = \"d1-http-example\"\n   database_id = \"1234567890\"\n   jsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"d1_databases\": [\n         {\n           \"binding\": \"DB\",\n           \"database_name\": \"d1-http-example\",\n           \"database_id\": \"1234567890\"\n         }\n       ]\n     }\n     toml\n     [[d1_databases]]\n     binding = \"DB\" # i.e. available in your Worker on env.DB\n     database_name = \"d1-http-example\"\n     database_id = \"1234567890\"\n     ts\n   type Bindings = {\n     DB: D1Database;\n     API_KEY: string;\n   };\n   sql\n   DROP TABLE IF EXISTS posts;\n   CREATE TABLE IF NOT EXISTS posts (\n     id integer PRIMARY KEY AUTOINCREMENT,\n     author text NOT NULL,\n     title text NOT NULL,\n     body text NOT NULL,\n     post_slug text NOT NULL\n   );\n   INSERT INTO posts (author, title, body, post_slug) VALUES ('Harshil', 'D1 HTTP API', 'Learn to create an API to query your D1 database.','d1-http-api');\n   sh\n   npx wrangler d1 execute d1-http-example --file=./schemas/schema.sql\n   ts\n   // Update the API routes\n\n/**\n   * Executes the `stmt.run()` method.\n   * https://developers.cloudflare.com/d1/worker-api/prepared-statements/#run\n   */\n\napp.post('/api/all', async (c) => {\n       return c.text(\"/api/all endpoint\");\n     try {\n       let { query, params } = await c.req.json();\n       let stmt = c.env.DB.prepare(query);\n       if (params) {\n         stmt = stmt.bind(params);\n       }\n\nconst result = await stmt.run();\n       return c.json(result);\n     } catch (err) {\n       return c.json({ error: `Failed to run query: ${err}` }, 500);\n     }\n   });\n\n/**\n   * Executes the `db.exec()` method.\n   * https://developers.cloudflare.com/d1/worker-api/d1-database/#exec\n   */\n\napp.post('/api/exec', async (c) => {\n       return c.text(\"/api/exec endpoint\");\n     try {\n       let { query } = await c.req.json();\n       let result = await c.env.DB.exec(query);\n       return c.json(result);\n     } catch (err) {\n       return c.json({ error: `Failed to run query: ${err}` }, 500);\n     }\n   });\n\n/**\n   * Executes the `db.batch()` method.\n   * https://developers.cloudflare.com/d1/worker-api/d1-database/#batch\n   */\n\napp.post('/api/batch', async (c) => {\n       return c.text(\"/api/batch endpoint\");\n     try {\n       let { batch } = await c.req.json();\n       let stmts = [];\n       for (let query of batch) {\n         let stmt = c.env.DB.prepare(query.query);\n         if (query.params) {\n           stmts.push(stmt.bind(query.params));\n         } else {\n           stmts.push(stmt);\n         }\n       }\n       const results = await c.env.DB.batch(stmts);\n       return c.json(results);\n     } catch (err) {\n       return c.json({ error: `Failed to run query: ${err}` }, 500);\n     }\n   });\n   ...\n   sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n   curl -H \"Authorization: Bearer YOUR_API_KEY\" \"http://localhost:8787/api/all\" --data '{\"query\": \"SELECT title FROM posts WHERE id=?\", \"params\":1}'\n   sh\n   curl -H \"Authorization: Bearer YOUR_API_KEY\" \"http://localhost:8787/api/batch\" --data '{\"batch\": [ {\"query\": \"SELECT title FROM posts WHERE id=?\", \"params\":1},{\"query\": \"SELECT id FROM posts\"}]}'\n   sh\n   curl -H \"Authorization: Bearer YOUR_API_KEY\" \"localhost:8787/api/exec\" --data '{\"query\": \"INSERT INTO posts (author, title, body, post_slug) VALUES ('\\''Harshil'\\'', '\\''D1 HTTP API'\\'', '\\''Learn to create an API to query your D1 database.'\\'','\\''d1-http-api'\\'')\" }'\n   sh\n   npx wrangler d1 execute d1-http-example --file=./schemas/schema.sql --remote\n   sh\n   npx wrangler deploy\n   sh\n    ‚õÖÔ∏è wrangler 3.78.4 (update available 3.78.5)\n   -------------------------------------------------------\n\nTotal Upload: 53.00 KiB / gzip: 13.16 KiB\n   Your worker has access to the following bindings:\n   - D1 Databases:\n     - DB: d1-http-example (DATABASE_ID)\n   Uploaded d1-http (4.29 sec)\n   Deployed d1-http triggers (5.57 sec)\n     [DEPLOYED_APP_LINK]\n   Current Version ID: [BINDING_ID]\n   sh\n   openssl rand -base64 32\n   sh\n   [YOUR_API_KEY]\n   sh\n   npx wrangler secret put API_KEY\n   sh\n   ‚úî Enter a secret value:\n   sh\n   ‚úî Enter a secret value: [YOUR_API_KEY]\n   sh\n   üåÄ Creating the secret for the Worker \"d1-http\"\n   ‚ú® Success! Uploaded secret API_KEY\n   sh\n   curl -H \"Authorization: Bearer YOUR_API_KEY\" \"https://DEPLOYED_APP_LINK/api/exec\" --data '{\"query\": \"SELECT 1\"}'\n   sh\nnpm create cloudflare@latest prisma-d1-example -- --type hello-world\nsh\ncd prisma-d1-example\nsh\n  npm i -D prisma\n  sh\n  yarn add -D prisma\n  sh\n  pnpm add -D prisma\n  sh\n  npm i @prisma/client @prisma/adapter-d1\n  sh\n  yarn add @prisma/client @prisma/adapter-d1\n  sh\n  pnpm add @prisma/client @prisma/adapter-d1\n  sh\n  npx prisma init --datasource-provider sqlite\n  sh\n  yarn prisma init --datasource-provider sqlite\n  sh\n  pnpm prisma init --datasource-provider sqlite\n  prisma\ngenerator client {\n  provider        = \"prisma-client-js\"\n  output          = \"../src/generated/prisma\"\n  previewFeatures = [\"driverAdapters\"]\n}\nsh\nnpx wrangler d1 create prisma-demo-db\nplaintext\n‚úÖ Successfully created DB 'prisma-demo-db' in region WEUR\nCreated your new D1 database.\n\n{\n  \"d1_databases\": [\n    {\n      \"binding\": \"DB\",\n      \"database_name\": \"prisma-demo-db\",\n      \"database_id\": \"<D1_DATABASE_ID>\"\n    }\n  ]\n}\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"prisma-d1-example\",\n    \"main\": \"src/index.ts\",\n    \"compatibility_date\": \"2024-03-20\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"observability\": {\n      \"enabled\": true\n    },\n    \"d1_databases\": [\n      {\n        \"binding\": \"DB\",\n        \"database_name\": \"prisma-demo-db\",\n        \"database_id\": \"<D1_DATABASE_ID>\"\n      }\n    ]\n  }\n  toml\n  name = \"prisma-d1-example\"\n  main = \"src/index.ts\"\n  compatibility_date = \"2024-03-20\"\n  compatibility_flags = [\"nodejs_compat\"]\n  [observability]\n  enabled = true\n\n[[d1_databases]]\n  binding = \"DB\" # i.e. available in your Worker on env.DB\n  database_name = \"prisma-demo-db\"\n  database_id = \"<D1_DATABASE_ID>\"\n  sh\nnpx wrangler d1 migrations create prisma-demo-db create_user_table\nprisma\nmodel User {\n  id    Int     @id @default(autoincrement())\n  email String  @unique\n  name  String?\n}\nsh\nnpx prisma migrate diff --from-empty --to-schema-datamodel ./prisma/schema.prisma --script --output migrations/0001_create_user_table.sql\nsql\n-- CreateTable\nCREATE TABLE \"User\" (\n    \"id\" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n    \"email\" TEXT NOT NULL,\n    \"name\" TEXT\n);\n\n-- CreateIndex\nCREATE UNIQUE INDEX \"User_email_key\" ON \"User\"(\"email\");\nsh",
  "code_samples": [
    {
      "code": "## 8. Test with an optional frontend\n\nThis application is an API back-end, best served for use with a front-end UI for creating and viewing comments. To test this back-end with a prebuild front-end UI, refer to the example UI in the [example-frontend directory](https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-d1-api/example-frontend). Notably, the [`loadComments` and `submitComment` functions](https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-d1-api/example-frontend/src/views/PostView.vue#L57-L82) make requests to a deployed version of this site, meaning you can take the frontend and replace the URL with your deployed version of the codebase in this tutorial to use your own data.\n\nInteracting with this API from a front-end will require enabling specific Cross-Origin Resource Sharing (or *CORS*) headers in your back-end API. Hono allows you to enable Cross-Origin Resource Sharing for your application. Import the `cors` module and add it as middleware to your API in `src/worker.js`:",
      "language": "unknown"
    },
    {
      "code": "Now, when you make requests to `/api/*`, Hono will automatically generate and add CORS headers to responses from your API, allowing front-end UIs to interact with it without erroring.\n\n## Conclusion\n\nIn this example, you built a comments API for powering a blog. To see the full source for this D1-powered comments API, you can visit [cloudflare/workers-sdk/templates/worker-d1-api](https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-d1-api).\n\n</page>\n\n<page>\n---\ntitle: Build a Staff Directory Application ¬∑ Cloudflare D1 docs\ndescription: Build a staff directory using D1. Users access employee info;\n  admins add new employees within the app.\nlastUpdated: 2025-10-13T13:40:40.000Z\nchatbotDeprioritize: false\ntags: Hono,TypeScript,SQL\nsource_url:\n  html: https://developers.cloudflare.com/d1/tutorials/build-a-staff-directory-app/\n  md: https://developers.cloudflare.com/d1/tutorials/build-a-staff-directory-app/index.md\n---\n\nIn this tutorial, you will learn how to use D1 to build a staff directory. This application will allow users to access information about an organization's employees and give admins the ability to add new employees directly within the app. To do this, you will first need to set up a [D1 database](https://developers.cloudflare.com/d1/get-started/) to manage data seamlessly, then you will develop and deploy your application using the [HonoX Framework](https://github.com/honojs/honox) and [Cloudflare Pages](https://developers.cloudflare.com/pages).\n\n## Prerequisites\n\nBefore moving forward with this tutorial, make sure you have the following:\n\n* A Cloudflare account, if you do not have one, [sign up](https://dash.cloudflare.com/sign-up/workers-and-pages) before continuing.\n* A recent version of [npm](https://docs.npmjs.com/getting-started) installed.\n\nIf you do not want to go through with the setup now, [view the completed code](https://github.com/lauragift21/staff-directory) on GitHub.\n\n## 1. Install HonoX\n\nIn this tutorial, you will use [HonoX](https://github.com/honojs/honox), a meta-framework for creating full-stack websites and Web APIs to build your application. To use HonoX in your project, run the `hono-create` command.\n\nTo get started, run the following command:",
      "language": "unknown"
    },
    {
      "code": "During the setup process, you will be asked to provide a name for your project directory and to choose a template. When making your selection, choose the `x-basic` template.\n\n## 2. Initialize your HonoX application\n\nOnce your project is set up, you can see a list of generated files as below. This is a typical project structure for a HonoX application:",
      "language": "unknown"
    },
    {
      "code": "The project includes directories for app code, routes, and server setup, alongside configuration files for package management, TypeScript, and Vite.\n\n## 3. Create a database\n\nTo create a database for your project, use the Cloudflare CLI tool, [Wrangler](https://developers.cloudflare.com/workers/wrangler), which supports the `wrangler d1` command for D1 database operations. Create a new database named `staff-directory` with the following command:",
      "language": "unknown"
    },
    {
      "code": "After creating your database, you will need to set up a [binding](https://developers.cloudflare.com/workers/runtime-apis/bindings/) in the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/) to integrate your database with your application.\n\nThis binding enables your application to interact with Cloudflare resources such as D1 databases, KV namespaces, and R2 buckets. To configure this, create a Wrangler file in your project's root directory and input the basic setup information:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Next, add the database binding details to your Wrangler file. This involves specifying a binding name (in this case, `DB`), which will be used to reference the database within your application, along with the `database_name` and `database_id` provided when you created the database:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "You have now configured your application to access and interact with your D1 database, either through the command line or directly within your codebase.\n\nYou will also need to make adjustments to your Vite config file in `vite.config.js`. Add the following config settings to ensure that Vite is properly set up to work with Cloudflare bindings in local environment:",
      "language": "unknown"
    },
    {
      "code": "## 4. Interact with D1\n\nTo interact with your D1 database, you can directly issue SQL commands using the `wrangler d1 execute` command:",
      "language": "unknown"
    },
    {
      "code": "The command above allows you to run queries or operations directly from the command line.\n\nFor operations such as initial data seeding or batch processing, you can pass a SQL file with your commands. To do this, create a `schema.sql` file in the root directory of your project and insert your SQL queries into this file:",
      "language": "unknown"
    },
    {
      "code": "The above queries will create three tables: `Locations`, `Departments`, and `Employees`. To populate these tables with initial data, use the `INSERT INTO` command. After preparing your schema file with these commands, you can apply it to the D1 database. Do this by using the `--file` flag to specify the schema file for execution:",
      "language": "unknown"
    },
    {
      "code": "To execute the schema locally and seed data into your local directory, pass the `--local` flag to the above command.\n\n## 5. Create SQL statements\n\nAfter setting up your D1 database and configuring the Wrangler file as outlined in previous steps, your database is accessible in your code through the `DB` binding. This allows you to directly interact with the database by preparing and executing SQL statements. In the following step, you will learn how to use this binding to perform common database operations such as retrieving data and inserting new records.\n\n### Retrieve data from database",
      "language": "unknown"
    },
    {
      "code": "### Insert data into the database",
      "language": "unknown"
    },
    {
      "code": "For a complete list of all the queries used in the application, refer to the [db.ts](https://github.com/lauragift21/staff-directory/blob/main/app/db.ts) file in the codebase.\n\n## 6. Develop the UI\n\nThe application uses `hono/jsx` for rendering. You can set up a Renderer in `app/routes/_renderer.tsx` using the JSX-rendered middleware, serving as the entry point for your application:",
      "language": "unknown"
    },
    {
      "code": "Add the bindings defined earlier in `global.d.ts` file where the global type definitions for TypeScript is defined ensuring type consistency across your application:",
      "language": "unknown"
    },
    {
      "code": "This application uses [Tailwind CSS](https://tailwindcss.com/) for styling. To use Tailwind CSS, refer to the [TailwindCSS documentation](https://v2.tailwindcss.com/docs), or follow the steps [provided on GitHub](https://github.com/honojs/honox?tab=readme-ov-file#using-tailwind-css).\n\nTo display a list of employees, invoke the `findAllEmployees` function from your `db.ts` file and call that within the `routes/index.tsx` file. The `createRoute()` function present in the file serves as a helper function for defining routes that handle different HTTP methods like `GET`, `POST`, `PUT`, or `DELETE`.",
      "language": "unknown"
    },
    {
      "code": "The existing code within the file includes a placeholder that uses the Counter component. You should replace this section with the following code block:",
      "language": "unknown"
    },
    {
      "code": "The code snippet demonstrates how to import the `findAllEmployees`, `findAllLocations`, and `findAllDepartments` functions from the `db.ts` file, and how to use the binding `c.env.DB` to invoke these functions. With these, you can retrieve and display the fetched data on the page.\n\n### Add an employee\n\nUse the `export POST` route to create a new employee through the `/admin` page:",
      "language": "unknown"
    },
    {
      "code": "### Store images in R2\n\nDuring the process of creating a new employee, the image uploaded can be stored in an R2 bucket prior to being added to the database.\n\nTo store an image in an R2 bucket:\n\n1. Create an R2 bucket.\n2. Upload the image to this bucket.\n3. Obtain a public URL for the image from the bucket. This URL is then saved in your database, linking to the image stored in the R2 bucket.\n\nUse the `wrangler r2 bucket create` command to create a bucket:",
      "language": "unknown"
    },
    {
      "code": "Once the bucket is created, add the R2 bucket binding to your Wrangler file:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Pass the R2 binding to the `global.d.ts` file:",
      "language": "unknown"
    },
    {
      "code": "To store the uploaded image in the R2 bucket, you can use the `put()` method provided by R2. This method allows you to upload the image file to your bucket:",
      "language": "unknown"
    },
    {
      "code": "[Refer to GitHub](https://github.com/lauragift21/staff-directory) for the full codebase.\n\n## 7. Deploy your HonoX application\n\nWith your application ready for deployment, you can use Wrangler to build and deploy your project to the Cloudflare Network. Ensure you are logged in to your Cloudflare account by running the `wrangler whoami` command. If you are not logged in, Wrangler will prompt you to login by creating an API key that you can use to make authenticated requests automatically from your computer.\n\nAfter successful login, confirm that your Wrangler file is configured similarly to the code block below:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Run `wrangler deploy` to deploy your project to Cloudflare. After deployment you can test your application is working by accessing the deployed URL provided for you. Your browser should display your application with the base frontend you created. If you do not have any data populated in your database, go to the `/admin` page to add a new employee, and this should return a new employee in your home page.\n\n## Conclusion\n\nIn this tutorial, you built a staff directory application where users can view all employees within an organization. Refer to the [Staff directory repository](https://github.com/lauragift21/staff-directory) for the full source code.\n\n![staff directory demo](https://github.com/lauragift21/staff-directory/raw/main/demo.gif)\n\n</page>\n\n<page>\n---\ntitle: Build an API to access D1 using a proxy Worker ¬∑ Cloudflare D1 docs\ndescription: This tutorial shows how to create an API that allows you to\n  securely run queries against a D1 database. The API can be used to customize\n  access controls and/or limit what tables can be queried.\nlastUpdated: 2025-10-13T13:40:40.000Z\nchatbotDeprioritize: false\ntags: Hono,TypeScript,SQL\nsource_url:\n  html: https://developers.cloudflare.com/d1/tutorials/build-an-api-to-access-d1/\n  md: https://developers.cloudflare.com/d1/tutorials/build-an-api-to-access-d1/index.md\n---\n\nIn this tutorial, you will learn how to create an API that allows you to securely run queries against a D1 database.\n\nThis is useful if you want to access a D1 database outside of a Worker or Pages project, customize access controls and/or limit what tables can be queried.\n\nD1's built-in [REST API](https://developers.cloudflare.com/api/resources/d1/subresources/database/methods/create/) is best suited for administrative use as the global [Cloudflare API rate limit](https://developers.cloudflare.com/fundamentals/api/reference/limits) applies.\n\nTo access a D1 database outside of a Worker project, you need to create an API using a Worker. Your application can then securely interact with this API to run D1 queries.\n\nNote\n\nD1 uses parameterized queries. This prevents SQL injection. To make your API more secure, validate the input using a library like [zod](https://zod.dev/).\n\n## Prerequisites\n\n1. Sign up for a [Cloudflare account](https://dash.cloudflare.com/sign-up/workers-and-pages).\n2. Install [`Node.js`](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm).\n3. Have an existing D1 database. Refer to [Get started tutorial for D1](https://developers.cloudflare.com/d1/get-started/).\n\nNode.js version manager\n\nUse a Node version manager like [Volta](https://volta.sh/) or [nvm](https://github.com/nvm-sh/nvm) to avoid permission issues and change Node.js versions. [Wrangler](https://developers.cloudflare.com/workers/wrangler/install-and-update/), discussed later in this guide, requires a Node version of `16.17.0` or later.\n\n## 1. Create a new project\n\nCreate a new Worker to create and deploy your API.\n\n1. Create a Worker named `d1-http` by running:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "For setup, select the following options:\n\n   * For *What would you like to start with?*, choose `Hello World example`.\n   * For *Which template would you like to use?*, choose `Worker only`.\n   * For *Which language do you want to use?*, choose `TypeScript`.\n   * For *Do you want to use git for version control?*, choose `Yes`.\n   * For *Do you want to deploy your application?*, choose `No` (we will be making some changes before deploying).\n\n2. Change into your new project directory to start developing:",
      "language": "unknown"
    },
    {
      "code": "## 2. Install Hono\n\nIn this tutorial, you will use [Hono](https://github.com/honojs/hono), an Express.js-style framework, to build the API.\n\n1. To use Hono in this project, install it using `npm`:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "## 3. Add an API\\_KEY\n\nYou need an API key to make authenticated calls to the API. To ensure that the API key is secure, add it as a [secret](https://developers.cloudflare.com/workers/configuration/secrets).\n\n1. For local development, create a `.dev.vars` file in the root directory of `d1-http`.\n\n2. Add your API key in the file as follows.",
      "language": "unknown"
    },
    {
      "code": "Replace `YOUR_API_KEY` with a valid string value. You can also generate this value using the following command.",
      "language": "unknown"
    },
    {
      "code": "Note\n\nIn this step, we have defined the name of the API key to be `API_KEY`.\n\n## 4. Initialize the application\n\nTo initialize the application, you need to import the required packages, initialize a new Hono application, and configure the following middleware:\n\n* [Bearer Auth](https://hono.dev/docs/middleware/builtin/bearer-auth): Adds authentication to the API.\n* [Logger](https://hono.dev/docs/middleware/builtin/logger): Allows monitoring the flow of requests and responses.\n* [Pretty JSON](https://hono.dev/docs/middleware/builtin/pretty-json): Enables \"JSON pretty print\" for JSON response bodies.\n\n1. Replace the contents of the `src/index.ts` file with the code below.",
      "language": "unknown"
    },
    {
      "code": "## 5. Add API endpoints\n\n1. Add the following snippet into your `src/index.ts`.",
      "language": "unknown"
    },
    {
      "code": "This adds the following endpoints:\n\n   * POST `/api/all`\n   * POST `/api/exec`\n   * POST `/api/batch`\n\n2. Start the development server by running the following command:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "3. To test the API locally, open a second terminal.\n\n4. In the second terminal, execute the below cURL command. Replace `YOUR_API_KEY` with the value you set in the `.dev.vars` file.",
      "language": "unknown"
    },
    {
      "code": "You should get the following output:",
      "language": "unknown"
    },
    {
      "code": "5. Stop the local server from running by pressing `x` in the first terminal.\n\nThe Hono application is now set up. You can test the other endpoints and add more endpoints if needed. The API does not yet return any information from your database. In the next steps, you will create a database, add its bindings, and update the endpoints to interact with the database.\n\n## 6. Create a database\n\nIf you do not have a D1 database already, you can create a new database with `wrangler d1 create`.\n\n1. In your terminal, run:",
      "language": "unknown"
    },
    {
      "code": "You may be asked to login to your Cloudflare account. Once logged in, the command will create a new D1 database. You should see a similar output in your terminal.",
      "language": "unknown"
    },
    {
      "code": "Make a note of the displayed `database_name` and `database_id`. You will use this to reference the database by creating a [binding](https://developers.cloudflare.com/workers/runtime-apis/bindings/).\n\n## 7. Add a binding\n\n1. From your `d1-http` folder, open the Wrangler file, Wrangler's configuration file.\n\n2. Add the following binding in the file. Make sure that the `database_name` and the `database_id` are correct.\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "3. In your `src/index.ts` file, update the `Bindings` type by adding `DB: D1Database`.",
      "language": "unknown"
    },
    {
      "code": "You can now access the database in the Hono application.\n\n## 8. Create a table\n\nTo create a table in your newly created database:\n\n1. Create a new folder called `schemas` inside your `d1-http` folder.\n\n2. Create a new file called `schema.sql`, and paste the following SQL statement into the file.",
      "language": "unknown"
    },
    {
      "code": "The code drops any table named `posts` if it exists, then creates a new table `posts` with the field `id`, `author`, `title`, `body`, and `post_slug`. It then uses an INSERT statement to populate the table.\n\n3. In your terminal, execute the following command to create this table:",
      "language": "unknown"
    },
    {
      "code": "Upon successful execution, a new table will be added to your database.\n\nNote\n\nThe table will be created in the local instance of the database. If you want to add this table to your production database set `\"remote\" : true` in the D1 binding configuration. Refer to the [remote bindings documentation](https://developers.cloudflare.com/workers/development-testing/#remote-bindings) for more information.\n\n## 9. Query the database\n\nYour application can now access the D1 database. In this step, you will update the API endpoints to query the database and return the result.\n\n1. In your `src/index.ts` file, update the code as follow.",
      "language": "unknown"
    },
    {
      "code": "In the above code, the endpoints are updated to receive `query` and `params`. These queries and parameters are passed to the respective functions to interact with the database.\n\n* If the query is successful, you receive the result from the database.\n* If there is an error, the error message is returned.\n\n## 10. Test the API\n\nNow that the API can query the database, you can test it locally.\n\n1. Start the development server by executing the following command:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "2. In a new terminal window, execute the following cURL commands. Make sure to replace `YOUR_API_KEY` with the correct value.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "If everything is implemented correctly, the above commands should result successful outputs.\n\n## 11. Deploy the API\n\nNow that everything is working as expected, the last step is to deploy it to the Cloudflare network. You will use Wrangler to deploy the API.\n\n1. To use the API in production instead of using it locally, you need to add the table to your remote (production) database. To add the table to your production database, run the following command:",
      "language": "unknown"
    },
    {
      "code": "You should now be able to view the table on the [Cloudflare dashboard > **Storage & Databases** > **D1**.](https://dash.cloudflare.com/?to=/:account/workers/d1/)\n\n2. To deploy the application to the Cloudflare network, run the following command:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Upon successful deployment, you will get the link of the deployed app in the terminal (`DEPLOYED_APP_LINK`). Make a note of it.\n\n3. Generate a new API key to use in production.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "4. Execute the `wrangler secret put` command to add an API to the deployed project.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "The terminal will prompt you to enter a secret value.\n\n5. Enter the value of your API key (`YOUR_API_KEY`). Your API key will now be added to your project. Using this value you can make secure API calls to your deployed API.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "6. To test it, run the following cURL command with the correct `YOUR_API_KEY` and `DEPLOYED_APP_LINK`.\n\n   * Use the `YOUR_API_KEY` you have generated as the secret API key.\n   * You can also find your `DEPLOYED_APP_LINK` from the Cloudflare dashboard > **Workers & Pages** > **`d1-http`** > **Settings** > **Domains & Routes**.",
      "language": "unknown"
    },
    {
      "code": "## Summary\n\nIn this tutorial, you have:\n\n1. Created an API that interacts with your D1 database.\n2. Deployed this API to the Workers. You can use this API in your external application to execute queries against your D1 database. The full code for this tutorial can be found on [GitHub](https://github.com/harshil1712/d1-http-example/tree/main).\n\n## Next steps\n\nYou can check out a similar implementation that uses Zod for validation in [this GitHub repository](https://github.com/elithrar/http-api-d1-example). If you want to build an OpenAPI compliant API for your D1 database, you should use the [Cloudflare Workers OpenAPI 3.1 template](https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-openapi).\n\n</page>\n\n<page>\n---\ntitle: Query D1 using Prisma ORM ¬∑ Cloudflare D1 docs\ndescription: This tutorial shows you how to set up and deploy a Cloudflare\n  Worker that is accessing a D1 database from scratch.\nlastUpdated: 2025-10-13T13:40:40.000Z\nchatbotDeprioritize: false\ntags: TypeScript,SQL\nsource_url:\n  html: https://developers.cloudflare.com/d1/tutorials/d1-and-prisma-orm/\n  md: https://developers.cloudflare.com/d1/tutorials/d1-and-prisma-orm/index.md\n---\n\n## What is Prisma ORM?\n\n[Prisma ORM](https://www.prisma.io/orm) is a next-generation JavaScript and TypeScript ORM that unlocks a new level of developer experience when working with databases thanks to its intuitive data model, automated migrations, type-safety and auto-completion.\n\nTo learn more about Prisma ORM, refer to the [Prisma documentation](https://www.prisma.io/docs).\n\n## Query D1 from a Cloudflare Worker using Prisma ORM\n\nThis tutorial shows you how to set up and deploy a Cloudflare Worker that is accessing a D1 database from scratch.\n\n## Quick start\n\nIf you want to skip the steps and get started quickly, select **Deploy to Cloudflare** below.\n\n[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/cloudflare/docs-examples/tree/d1-prisma/d1/query-d1-using-prisma)\n\nThis creates a repository in your GitHub account and deploys the application to Cloudflare Workers. Use this option if you are familiar with Cloudflare Workers, and wish to skip the step-by-step guidance.\n\nYou may wish to manually follow the steps if you are new to Cloudflare Workers.\n\n## Prerequisites\n\n* [`Node.js`](https://nodejs.org/en/) and [`npm`](https://docs.npmjs.com/getting-started) installed on your machine.\n* A [Cloudflare account](https://dash.cloudflare.com).\n\n## 1. Create a Cloudflare Worker\n\nOpen your terminal, and run the following command to create a Cloudflare Worker using Cloudflare's [`hello-world`](https://github.com/cloudflare/workers-sdk/tree/4fdd8987772d914cf50725e9fa8cb91a82a6870d/packages/create-cloudflare/templates/hello-world) template:",
      "language": "unknown"
    },
    {
      "code": "In your terminal, you will be asked a series of questions related your project:\n\n1. Answer `yes` to using TypeScript.\n2. Answer `no` to deploying your Worker.\n\n## 2. Initialize Prisma ORM\n\nNote\n\nD1 is supported in Prisma ORM as of [v5.12.0](https://github.com/prisma/prisma/releases/tag/5.12.0).\n\nTo set up Prisma ORM, go into your project directory, and install the Prisma CLI:",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Next, install the Prisma Client package and the driver adapter for D1:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Finally, bootstrap the files required by Prisma ORM using the following command:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "The command above:\n\n1. Creates a new directory called `prisma` that contains your [Prisma schema](https://www.prisma.io/docs/orm/prisma-schema/overview) file.\n2. Creates a `.env` file used to configure environment variables that will be read by the Prisma CLI.\n\nIn this tutorial, you will not need the `.env` file since the connection between Prisma ORM and D1 will happen through a [binding](https://developers.cloudflare.com/workers/runtime-apis/bindings/). The next steps will instruct you through setting up this binding.\n\nSince you will use the [driver adapter](https://www.prisma.io/docs/orm/overview/databases/database-drivers#driver-adapters) feature which is currently in Preview, you need to explicitly enable it via the `previewFeatures` field on the `generator` block.\n\nOpen your `schema.prisma` file and adjust the `generator` block to reflect as follows:",
      "language": "unknown"
    },
    {
      "code": "## 3. Create your D1 database\n\nIn this step, you will set up your D1 database. You can create a D1 database via the [Cloudflare dashboard](https://dash.cloudflare.com), or via `wrangler`. This tutorial will use the `wrangler` CLI.\n\nOpen your terminal and run the following command:",
      "language": "unknown"
    },
    {
      "code": "You should receive the following output on your terminal:",
      "language": "unknown"
    },
    {
      "code": "You now have a D1 database in your Cloudflare account with a binding to your Cloudflare Worker.\n\nCopy the last part of the command output and paste it into your Wrangler file. It should look similar to this:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Replace `<D1_DATABASE_ID>` with the database ID of your D1 instance. If you were not able to fetch this ID from the terminal output, you can also find it in the [Cloudflare dashboard](https://dash.cloudflare.com/), or by running `npx wrangler d1 info prisma-demo-db` in your terminal.\n\nNext, you will create a database table in the database to send queries to D1 using Prisma ORM.\n\n## 4. Create a table in the database\n\n[Prisma Migrate](https://www.prisma.io/docs/orm/prisma-migrate/understanding-prisma-migrate/overview) does not support D1 yet, so you cannot follow the default migration workflows using `prisma migrate dev` or `prisma db push`.\n\nNote\n\nPrisma Migrate for D1 is currently in Early Access. If you want to try it out, you can follow the instructions on the [Prisma documentation](https://www.prisma.io/docs/orm/overview/databases/cloudflare-d1#using-prisma-migrate-via-a-driver-adapter-in-prismaconfigts-early-access).\n\nD1 uses [migrations](https://developers.cloudflare.com/d1/reference/migrations) for managing schema changes, and the Prisma CLI can help generate the necessary SQL for those updates. In the steps below, you will use both tools to create and apply a migration to your database.\n\nFirst, create a new migration using `wrangler`:",
      "language": "unknown"
    },
    {
      "code": "Answer `yes` to creating a new folder called `migrations`.\n\nThe command has now created a new directory called `migrations` and an empty file called `0001_create_user_table.sql` inside of it:\n\nNext, you need to add the SQL statement that will create a `User` table to that file.\n\nOpen the `schema.prisma` file and add the following `User` model to your schema:",
      "language": "unknown"
    },
    {
      "code": "Now, run the following command in your terminal to generate the SQL statement that creates a `User` table equivalent to the `User` model above:",
      "language": "unknown"
    },
    {
      "code": "This stores a SQL statement to create a new `User` table in your migration file from before, here is what it looks like:",
      "language": "unknown"
    },
    {
      "code": "`UNIQUE INDEX` on `email` was created because the `User` model in your Prisma schema is using the [`@unique`](https://www.prisma.io/docs/orm/reference/prisma-schema-reference#unique) attribute on its `email` field.\n\nYou now need to use the `wrangler d1 migrations apply` command to send this SQL statement to D1. This command accepts two options:\n\n* `--local`: Executes the statement against a *local* version of D1. This local version of D1 is a SQLite database file that will be located in the `.wrangler/state` directory of your project. Use this approach when you want to develop and test your Worker on your local machine. Refer to [Local development](https://developers.cloudflare.com/d1/best-practices/local-development/) to learn more.\n* `--remote`: Executes the statement against your *remote* version of D1. This version is used by your *deployed* Cloudflare Workers. Refer to [Remote development](https://developers.cloudflare.com/d1/best-practices/remote-development/) to learn more.\n\nIn this tutorial, you will do both local and remote development. You will test the Worker locally, then deploy your Worker afterwards.\n\nOpen your terminal, and run both commands:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "8. Test with an optional frontend",
      "id": "8.-test-with-an-optional-frontend"
    },
    {
      "level": "h2",
      "text": "Conclusion",
      "id": "conclusion"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Install HonoX",
      "id": "1.-install-honox"
    },
    {
      "level": "h2",
      "text": "2. Initialize your HonoX application",
      "id": "2.-initialize-your-honox-application"
    },
    {
      "level": "h2",
      "text": "3. Create a database",
      "id": "3.-create-a-database"
    },
    {
      "level": "h2",
      "text": "4. Interact with D1",
      "id": "4.-interact-with-d1"
    },
    {
      "level": "h2",
      "text": "5. Create SQL statements",
      "id": "5.-create-sql-statements"
    },
    {
      "level": "h3",
      "text": "Retrieve data from database",
      "id": "retrieve-data-from-database"
    },
    {
      "level": "h3",
      "text": "Insert data into the database",
      "id": "insert-data-into-the-database"
    },
    {
      "level": "h2",
      "text": "6. Develop the UI",
      "id": "6.-develop-the-ui"
    },
    {
      "level": "h3",
      "text": "Add an employee",
      "id": "add-an-employee"
    },
    {
      "level": "h3",
      "text": "Store images in R2",
      "id": "store-images-in-r2"
    },
    {
      "level": "h2",
      "text": "7. Deploy your HonoX application",
      "id": "7.-deploy-your-honox-application"
    },
    {
      "level": "h2",
      "text": "Conclusion",
      "id": "conclusion"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create a new project",
      "id": "1.-create-a-new-project"
    },
    {
      "level": "h2",
      "text": "2. Install Hono",
      "id": "2.-install-hono"
    },
    {
      "level": "h2",
      "text": "3. Add an API\\_KEY",
      "id": "3.-add-an-api\\_key"
    },
    {
      "level": "h2",
      "text": "4. Initialize the application",
      "id": "4.-initialize-the-application"
    },
    {
      "level": "h2",
      "text": "5. Add API endpoints",
      "id": "5.-add-api-endpoints"
    },
    {
      "level": "h2",
      "text": "6. Create a database",
      "id": "6.-create-a-database"
    },
    {
      "level": "h2",
      "text": "7. Add a binding",
      "id": "7.-add-a-binding"
    },
    {
      "level": "h2",
      "text": "8. Create a table",
      "id": "8.-create-a-table"
    },
    {
      "level": "h2",
      "text": "9. Query the database",
      "id": "9.-query-the-database"
    },
    {
      "level": "h2",
      "text": "10. Test the API",
      "id": "10.-test-the-api"
    },
    {
      "level": "h2",
      "text": "11. Deploy the API",
      "id": "11.-deploy-the-api"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "What is Prisma ORM?",
      "id": "what-is-prisma-orm?"
    },
    {
      "level": "h2",
      "text": "Query D1 from a Cloudflare Worker using Prisma ORM",
      "id": "query-d1-from-a-cloudflare-worker-using-prisma-orm"
    },
    {
      "level": "h2",
      "text": "Quick start",
      "id": "quick-start"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create a Cloudflare Worker",
      "id": "1.-create-a-cloudflare-worker"
    },
    {
      "level": "h2",
      "text": "2. Initialize Prisma ORM",
      "id": "2.-initialize-prisma-orm"
    },
    {
      "level": "h2",
      "text": "3. Create your D1 database",
      "id": "3.-create-your-d1-database"
    },
    {
      "level": "h2",
      "text": "4. Create a table in the database",
      "id": "4.-create-a-table-in-the-database"
    }
  ],
  "url": "llms-txt#note:-your-workers.dev-deployment-url-may-be-different",
  "links": []
}