{
  "title": "Still works! Data persisted across sandbox lifecycle",
  "content": "sh\n  npx wrangler secrets-store secret create <STORE_ID> --name MY_SECRET_NAME --scopes workers --remote\n  sh\n  ‚úì Enter a secret value: ‚Ä∫ ***\n\nüîê Creating secret... (Name: MY_SECRET_NAME, Value: REDACTED, Scopes: workers, Comment: undefined)\n  ‚úì Select an account: ‚Ä∫ My account\n  ‚úÖ Created secret! (ID: 13bc7498c6374a4e9d13be091c3c65f1)\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/secrets_store/stores/$STORE_ID/secrets\" \\\n    --request POST \\\n    --header \"X-Auth-Email: $CLOUDFLARE_EMAIL\" \\\n    --header \"X-Auth-Key: $CLOUDFLARE_API_KEY\" \\\n    --json '[\n      {\n          \"name\": \"<MY_SECRET_NAME>\",\n          \"value\": \"<SECRET_VALUE>\",\n          \"scopes\": [\n              \"workers\"\n          ],\n          \"comment\": \"\"\n      },\n      {\n          \"name\": \"<MY_SECRET_NAME_2>\",\n          \"value\": \"<SECRET_VALUE>\",\n          \"scopes\": [\n              \"workers\"\n          ],\n          \"comment\": \"\"\n      }\n    ]'\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"main\": \"./src/index.js\",\n    \"secrets_store_secrets\": [\n      {\n        \"binding\": \"<BINDING_VARIABLE>\",\n        \"store_id\": \"<STORE_ID>\",\n        \"secret_name\": \"<MY_SECRET_NAME>\"\n      }\n    ]\n  }\n  toml\n  main = \"./src/index.js\"\n  secrets_store_secrets = [\n    { binding = \"<BINDING_VARIABLE>\", store_id= \"<STORE_ID>\", secret_name = \"<MY_SECRET_NAME>\" }\n  ]\n  js\nexport default {\n  async fetch(request, env) {\n    // Example of using the secret safely in an API request\n    const APIkey = await env.<BINDING_VARIABLE>.get()\n\nconst response = await fetch(\"https://api.example.com/data\", {\n      headers: { \"Authorization\": `Bearer ${APIKey}` },\n    });\n\nif (!response.ok) {\n      return new Response(\"Failed to fetch data\", { status: response.status });\n    }\n\nconst data = await response.json();\n    return new Response(JSON.stringify(data), {\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n  },\n};\nbash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/secrets_store/stores/$STORE_ID/secrets\" \\\n    --request POST \\\n    --header \"X-Auth-Email: $CLOUDFLARE_EMAIL\" \\\n    --header \"X-Auth-Key: $CLOUDFLARE_API_KEY\" \\\n    --json '[\n      {\n          \"name\": \"<MY_SECRET_NAME>\",\n          \"value\": \"<SECRET_VALUE>\",\n          \"scopes\": [\n              \"workers\"\n          ],\n          \"comment\": \"\"\n      },\n      {\n          \"name\": \"<MY_SECRET_NAME_2>\",\n          \"value\": \"<SECRET_VALUE>\",\n          \"scopes\": [\n              \"workers\"\n          ],\n          \"comment\": \"\"\n      }\n    ]'\n  bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/secrets_store/stores/$STORE_ID/secrets/$SECRET_ID/duplicate \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n      \"name\":\"<NEW_DUPLICATE_NAME>\",\n      \"scopes\":[\"workers\"],\n      \"comment\":\"\"\n  }'\n  bash\n  curl --request PATCH \\\n  https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/secrets_store/stores/$STORE_ID/secrets/$SECRET_ID \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n      \"comment\":\"<NEW_COMMENT>\",\n      \"value\":\"<NEW_SECRET_VALUE>\",\n      \"scopes\":[\"workers\"]\n  }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/secrets_store/stores/$STORE_ID/secrets/$SECRET_ID\" \\\n    --request DELETE \\\n    --header \"X-Auth-Email: $CLOUDFLARE_EMAIL\" \\\n    --header \"X-Auth-Key: $CLOUDFLARE_API_KEY\"\n  json\nexport URL=\"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/intel/miscategorization\"\ncurl -X POST \"$URL\" \\\n     -H \"Authorization: Bearer $TOKEN\" \\\n     -H \"Content-Type:application/json\" \\\n--data '{\n  \"content_adds\": [\n  ],\n  \"content_removes\": [\n  ],\n  \"indicator_type\": \"domain\",\n  \"ip\": null,\n  \"security_adds\": [\n    115\n  ],\n  \"security_removes\": [\n  ],\n  \"url\": \"cloudflare.com\"\n}'\njson\n{\n  \"result\": \"\",\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\n   curl https://api.cloudflare.com/client/v4/accounts/{account_id}/intel/miscategorization \\\n   --header \"Authorization: Bearer <API_TOKEN>\" \\\n   --header \"Content-Type: application/json\" \\\n   --data '{\n     \"content_adds\": [\n       82\n     ],\n     \"content_removes\": [\n       155\n     ],\n     \"indicator_type\": \"domain\",\n     \"ip\": null,\n     \"security_adds\": [\n       117,\n       131\n     ],\n     \"security_removes\": [\n       83\n     ],\n     \"url\": \"example.com\"\n   }'\n   json\n{\n  \"id\": \"4590376cf2994d72cee36828ec4eff19\",\n  \"protocol\": \"tcp/22\",\n  \"dns\": {\n    \"type\": \"ADDRESS\",\n    \"name\": \"ssh.example.com\"\n  },\n  \"origin_direct\": [\"tcp://192.0.2.1:22\"],\n  \"ip_firewall\": true,\n  \"proxy_protocol\": false,\n  \"spp\": false,\n  \"tls\": \"off\",\n  \"traffic_type\": \"direct\",\n  \"edge_ips\": {\n    \"type\": \"static\",\n    \"ips\": [\"198.51.100.10\", \"2001:DB8::1\"]\n  }\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/spectrum/apps\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"protocol\": \"tcp/80\",\n    \"dns\": {\n        \"type\": \"ADDRESS\",\n        \"name\": \"www.example.com\"\n    },\n    \"origin_direct\": [\n        \"tcp://192.0.2.1:80\"\n    ],\n    \"tls\": \"off\",\n    \"traffic_type\": \"http\",\n    \"edge_ips\": {\n        \"type\": \"static\",\n        \"ips\": [\n            \"198.51.100.10\",\n            \"2001:DB8::1\"\n        ]\n    }\n  }'\nbash\n> pasv_min_port=20000\n> pasv_max_port=20020\n>\n>\n> pasv_enable=YES\n> pasv_address=ftp.example.com\n> pasv_addr_resolve=YES\n> pasv_promiscuous=YES\n> bash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/load_balancers/monitors\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"description\": \"Spectrum Health Check\",\n    \"type\": \"tcp\",\n    \"port\": 2048,\n    \"interval\": 30,\n    \"retries\": 2,\n    \"timeout\": 5,\n    \"method\": \"connection_established\"\n  }'\njson\n{\n    \"result\": {\n        \"description\": \"TCP Monitor for Spectrum\",\n        \"created_on\": \"2025-07-17T14:55:04.830009Z\",\n        \"modified_on\": \"2025-07-17T14:55:04.830009Z\",\n        \"id\": \"1d404721c660a8a7aaa28d68ed6d48d9\",\n        \"type\": \"tcp\",\n        \"port\": 2048,\n        \"interval\": 60,\n        \"retries\": 2,\n        \"timeout\": 5,\n        \"expected_body\": \"\",\n        \"expected_codes\": \"\",\n        \"follow_redirects\": false,\n        \"allow_insecure\": false,\n        \"probe_zone\": \"\",\n        \"path\": \"\",\n        \"method\": \"connection_established\"\n    },\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/spectrum/apps\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"protocol\": \"tcp/80\",\n    \"dns\": {\n        \"type\": \"ADDRESS\",\n        \"name\": \"www.example.com\"\n    },\n    \"origin_direct\": [\n        \"tcp://192.0.2.1:80\"\n    ],\n    \"tls\": \"off\",\n    \"traffic_type\": \"http\",\n    \"edge_ips\": {\n        \"type\": \"static\",\n        \"ips\": [\n            \"198.51.100.10\",\n            \"2001:DB8::1\"\n        ]\n    }\n  }'\nplaintext\nPROXY_STRING + single space + INET_PROTOCOL + single space + CLIENT_IP + single space + PROXY_IP + single space + CLIENT_PORT + single space + PROXY_PORT + \"\\r\\n\"\nplaintext\nPROXY TCP4 192.0.2.0 192.0.2.255 42300 443\\r\\n\nplaintext\nPROXY TCP6 2001:db8:: 2001:db8:ffff:ffff:ffff:ffff:ffff:ffff 42300 443\\r\\n\ntxt\n 0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                                                               |\n+                                                               +\n|                  Proxy Protocol v2 Signature                  |\n+                                                               +\n|                                                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|Version|Command|   AF  | Proto.|         Address Length        |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                      IPv4 Source Address                      |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                    IPv4 Destination Address                   |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|          Source Port          |        Destination Port       |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\ntxt\n 0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                                                               |\n+                                                               +\n|                  Proxy Protocol v2 Signature                  |\n+                                                               +\n|                                                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|Version|Command|   AF  | Proto.|         Address Length        |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                                                               |\n+                                                               +\n|                                                               |\n+                      IPv6 Source Address                      +\n|                                                               |\n+                                                               +\n|                                                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                                                               |\n+                                                               +\n|                                                               |\n+                    IPv6 Destination Address                   +\n|                                                               |\n+                                                               +\n|                                                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|          Source Port          |        Destination Port       |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\ntxt\n/api/v4/zones/{zone_id}/spectrum/analytics/events/summary?metrics=METRICS&dimensions=DIMENSIONS&filters=FILTERS&since=FROM_TS&sort=SORT&until=TO_TS&limit=LIMIT\n/api/v4/zones/{zone_id}/spectrum/analytics/events/bytime?metrics=METRICS&dimensions=DIMENSIONS&filters=FILTERS&since=FROM_TS&sort=SORT&until=TO_TS&limit=LIMIT\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/spectrum/analytics/events/summary\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"protocol\": \"tcp/1000-2000\",\n  \"dns\": {\n    \"type\": \"CNAME\",\n    \"name\": \"range.example.com\"\n  },\n  \"origin_direct\": [\"tcp://192.0.2.1:3000-4000\"]\n}\njson\n{\n  \"protocol\": \"tcp/1000-2000\",\n  \"dns\": {\n    \"type\": \"CNAME\",\n    \"name\": \"range.example.com\"\n  },\n  \"origin_dns\": {\n    \"name\": \"origin.example.com\",\n    \"ttl\": 1200\n  },\n  \"origin_port\": \"3000-4000\"\n}\ntxt\n 0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|          Magic Number         |                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n|                                                               |\n+                                                               +\n|                                                               |\n+                         Client Address                        +\n|                                                               |\n+                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                               |                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +\n|                                                               |\n+                                                               +\n|                                                               |\n+                         Proxy Address                         +\n|                                                               |\n+                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                               |         Client Port           |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|           Proxy Port          |          Payload...           |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\nc\nstruct {\n    uint16_t magic;\n    uint8_t  client_addr[16];\n    uint8_t  proxy_addr[16];\n    uint16_t client_port;\n    uint16_t proxy_port;\n};\ntxt\n  \"expression\": \"(http.host in {\\\"<HOSTNAME_1>\\\" \\\"<HOSTNAME_2>\\\"} and not cf.tls_client_auth.cert_verified)\",\n  \"action\": \"block\"\nbash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/certificate_authorities/hostname_associations\" \\\n    --request GET \\\n    --header \"X-Auth-Email: $CLOUDFLARE_EMAIL\" \\\n    --header \"X-Auth-Key: $CLOUDFLARE_API_KEY\"\n  bash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/certificate_authorities/hostname_associations\" \\\n    --request PUT \\\n    --header \"X-Auth-Email: $CLOUDFLARE_EMAIL\" \\\n    --header \"X-Auth-Key: $CLOUDFLARE_API_KEY\" \\\n    --json '{\n      \"hostnames\": [\n          \"<UPDATED_HOSTNAME_ASSOCIATIONS>\"\n      ]\n    }'\n  txt\n  \"hostnames\": [],\n  \"mtls_certificate_id\": \"<CERTIFICATE_ID>\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/certificate_authorities/hostname_associations?mtls_certificate_id=ID_FROM_STEP_2\" \\\n  --request GET \\\n  --header \"X-Auth-Email: $CLOUDFLARE_EMAIL\" \\\n  --header \"X-Auth-Key: $CLOUDFLARE_API_KEY\"\njs\nconst defaultData = { temperatures: [] };\n\nconst getCache = (key) => TEMPERATURES.get(key);\nconst setCache = (key, data) => TEMPERATURES.put(key, data);\n\nasync function addTemperature(request) {\n  // Pull previously recorded temperatures for this client.\n  const ip = request.headers.get(\"CF-Connecting-IP\");\n  const cacheKey = `data-${ip}`;\n  let data;\n  const cache = await getCache(cacheKey);\n  if (!cache) {\n    await setCache(cacheKey, JSON.stringify(defaultData));\n    data = defaultData;\n  } else {\n    data = JSON.parse(cache);\n  }\n\n// Append the recorded temperatures with the submitted reading (assuming it has both temperature and a timestamp).\n  try {\n    const body = await request.text();\n    const val = JSON.parse(body);\n\nif (val.temperature && val.time) {\n      data.temperatures.push(val);\n      await setCache(cacheKey, JSON.stringify(data));\n      return new Response(\"\", { status: 201 });\n    } else {\n      return new Response(\n        \"Unable to parse temperature and/or timestamp from JSON POST body\",\n        { status: 400 },\n      );\n    }\n  } catch (err) {\n    return new Response(err, { status: 500 });\n  }\n}\n\nfunction compareTimestamps(a, b) {\n  return -1 * (Date.parse(a.time) - Date.parse(b.time));\n}\n\n// Return the 5 most recent temperature measurements.\nasync function getTemperatures(request) {\n  const ip = request.headers.get(\"CF-Connecting-IP\");\n  const cacheKey = `data-${ip}`;\n\nconst cache = await getCache(cacheKey);\n  if (!cache) {\n    return new Response(JSON.stringify(defaultData), {\n      status: 200,\n      headers: { \"content-type\": \"application/json\" },\n    });\n  } else {\n    data = JSON.parse(cache);\n    const retval = JSON.stringify(\n      data.temperatures.sort(compareTimestamps).splice(0, 5),\n    );\n    return new Response(retval, {\n      status: 200,\n      headers: { \"content-type\": \"application/json\" },\n    });\n  }\n}\n\nexport default {\n  async fetch(request, env, ctx) {\n    return request.method === \"POST\"\n      ? addTemperature(request)\n      : getTemperatures(request);\n  },\n};\nsh\n$ TEMPERATURE=$(echo $((361 + RANDOM %11)) | awk '{printf(\"%.2f\",$1/10.0)}')\n$ TIMESTAMP=$(date -u +\"%Y-%m-%dT%H:%M:%SZ\")\n\n$ echo -e \"$TEMPERATURE\\n$TIMESTAMP\"\n36.70\n2020-09-28T02:54:56Z\n\n$ curl --verbose --header \"Content-Type: application/json\" --data '{\"temperature\":'''$TEMPERATURE''', \"time\": \"'''$TIMESTAMP'''\"}' https://shield.upinatoms.com/temps 2>&1 | grep \"< HTTP/2\"\n< HTTP/2 201\nsh\n$ curl --silent https://shield.upinatoms.com/temps | jq .\n[\n  {\n    \"temperature\": 36.3,\n    \"time\": \"2020-09-28T02:57:49Z\"\n  },\n  {\n    \"temperature\": 36.7,\n    \"time\": \"2020-09-28T02:54:56Z\"\n  },\n  {\n    \"temperature\": 36.2,\n    \"time\": \"2020-09-28T02:33:08Z\"\n  }\n]\nbash",
  "code_samples": [
    {
      "code": "The key insight: After destroying the sandbox, the next request creates a new sandbox instance, mounts the same R2 bucket, and finds the data still there.\n\n## What you learned\n\nIn this tutorial, you built a data pipeline that demonstrates filesystem persistence through R2 bucket mounting:\n\n* **Mounting buckets**: Use `mountBucket()` to make R2 accessible as a local directory\n* **Standard file operations**: Access mounted buckets using familiar filesystem commands (`cat`, Python `open()`, etc.)\n* **Automatic persistence**: Data written to mounted directories survives sandbox destruction\n* **Credential management**: Configure R2 access using environment variables or explicit credentials\n\n## Next steps\n\n* [Mount buckets guide](https://developers.cloudflare.com/sandbox/guides/mount-buckets/) - Comprehensive mounting reference\n* [Storage API](https://developers.cloudflare.com/sandbox/api/storage/) - Complete API documentation\n* [Environment variables](https://developers.cloudflare.com/sandbox/configuration/environment-variables/) - Credential configuration options\n\n## Related resources\n\n* [R2 documentation](https://developers.cloudflare.com/r2/) - Learn about Cloudflare R2\n* [Background processes guide](https://developers.cloudflare.com/sandbox/guides/background-processes/) - Long-running data processing\n* [Sandboxes concept](https://developers.cloudflare.com/sandbox/concepts/sandboxes/) - Understanding sandbox lifecycle\n\n</page>\n\n<page>\n---\ntitle: AI Gateway integration ¬∑ Cloudflare Secrets Store docs\nlastUpdated: 2025-09-03T14:48:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/secrets-store/integrations/ai-gateway/\n  md: https://developers.cloudflare.com/secrets-store/integrations/ai-gateway/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Workers integration ¬∑ Cloudflare Secrets Store docs\ndescription: Cloudflare Secrets Store is a secure, centralized location in which\n  account-level secrets are stored and managed. The secrets are securely\n  encrypted and stored across all Cloudflare data centers.\nlastUpdated: 2025-10-09T15:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/secrets-store/integrations/workers/\n  md: https://developers.cloudflare.com/secrets-store/integrations/workers/index.md\n---\n\n[Cloudflare Secrets Store](https://developers.cloudflare.com/secrets-store/) is a secure, centralized location in which account-level secrets are stored and managed. The secrets are securely encrypted and stored across all Cloudflare data centers.\n\nConsider the steps below to learn how to use values from your account secrets store with [Cloudflare Workers](https://developers.cloudflare.com/workers/).\n\nNote\n\nThis is different from Workers [Variables and Secrets](https://developers.cloudflare.com/workers/configuration/secrets/), where you define and manage your secrets on a per-Worker level.\n\n## Before you begin\n\n* If [using the Dashboard](#via-dashboard), make sure you already have a Workers application. Refer to the [Workers get started](https://developers.cloudflare.com/workers/get-started/dashboard/) for guidance.\n\n* You should also have a store created under the **Secrets Store** tab on the Dashboard. The first store in your account is created automatically when a user with [Super Administrator or Secrets Store Admin role](https://developers.cloudflare.com/secrets-store/access-control/) interacts with it.\n\n  * If no store exists in your account yet and you have the necessary permissions, you can use the [Wrangler command](https://developers.cloudflare.com/workers/wrangler/commands/#secrets-store-store) `secrets-store store create <name> --remote` to create your first store.\n\nLocal development mode\n\nThis guide assumes you are working in production. To use Secrets Store locally, you must use `secrets-store secret` [Wrangler commands](https://developers.cloudflare.com/workers/wrangler/commands/) without the `--remote` flag.\n\n## 1. Set up account secrets in Secrets Store\n\nFollow the steps below to create secrets. You must have a [Super Administrator or a Secrets Store Admin role](https://developers.cloudflare.com/secrets-store/access-control/) within your Cloudflare account.\n\nNote\n\nYou may also add account secrets directly from the Workers settings on the dashboard. You can skip to [step 2](#via-dashboard) to do that.\n\n* Wrangler\n\n  Use the [Wrangler command](https://developers.cloudflare.com/workers/wrangler/commands/#secrets-store-secret) `secrets-store secret create`.\n\n  To use the following example, replace the store ID and secret name by your actual data. You can find and copy the store ID from the [Secrets Store tab](https://dash.cloudflare.com/?to=/:account/secrets-store/) on the dashboard or use `wrangler secrets-store store list`.\n\n  Note that a secret name cannot contain spaces.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **Secrets Store** page.\n\n     [Go to **Secrets Store**](https://dash.cloudflare.com/?to=/:account/secrets-store)\n\n  2. Select **Create secret**.\n\n  3. Fill in the required fields, choosing *Workers* as the **Permission scope**. Once the secret is saved, the secret value will no longer be available for viewing.\n\n  4. (Optional) Select **Add additional secret** to create more than one secret at a time.\n\n  5. Select **Save** to confirm.\n\n* API\n\n  You can find and copy the store ID from the [Secrets Store tab](https://dash.cloudflare.com/?to=/:account/secrets-store/) on the dashboard or use the [Wrangler command](https://developers.cloudflare.com/workers/wrangler/commands/#secrets-store-store). Also, make sure your secret `name` does not contain spaces.\n\n  Refer to [Secrets Store API](https://developers.cloudflare.com/api/resources/secrets_store/) for the full API documentation.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Secrets Store Write`",
      "language": "unknown"
    },
    {
      "code": "Refer to [manage account secrets](https://developers.cloudflare.com/secrets-store/manage-secrets/) for further options.\n\n## 2. Bind an account secret to your Worker\n\n[Bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/) allow your Worker to interact with resources on your Cloudflare account.\n\nTo bind an account secret to your Worker, you must have one of the following [roles within your Cloudflare account](https://developers.cloudflare.com/secrets-store/access-control/):\n\n* Super Administrator\n* Secrets Store Deployer\n\n### Via Wrangler\n\n1. Add a Secrets Store binding to your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n   * `binding`: a descriptive name for your binding. This will be used in the Workers application when [accessing your secret on the `env` object](https://developers.cloudflare.com/secrets-store/integrations/workers/#3-access-the-secret-on-the-env-object).\n   * `store_id`: the corresponding Secrets Store ID where your account secret was created.\n   * `secret_name`: the unique secret name, defined when your account secret was created.\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "### Via Dashboard\n\n1. In the Cloudflare dashboard, go to **Workers & Pages**.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select a Workers application.\n\n3. Go to **Settings** > **Bindings** and select **Add**.\n\n4. On the **Add a resource binding** side panel, choose **Secrets Store**.\n\n5. Fill in the required fields:\n\n   * **Variable name**: a name for the binding. This will be used for your Worker to access the secret ([step 3](#3-access-the-secret-on-the-env-object) below).\n   * **Secret name**: select from the list of available account secrets created in [step 1](#1-set-up-account-secrets-in-secrets-store).\n   * (Optional - Admins only) If the secret you need does not exist yet, select **Create secret**. This will add an account level secret in the same way as if you had [created it on the Secrets Store](https://developers.cloudflare.com/secrets-store/manage-secrets/).\n\n6. Select **Deploy** to deploy your binding. When deploying, there are two options:\n\n   * **Deploy:** Immediately deploy the binding to 100% of your audience.\n   * **Save version:** Save a version of the binding which you can deploy in the future.\n\n## 3. Access the secret on the `env` object\n\n[Bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/) are located on the `env` object. To access the secret you first need an asynchronous call.\n\n### Call `get()` on the binding variable\n\nLocal development mode\n\nYou cannot access production secrets (created on the dashboard, via API, or with the `--remote` flag) from your local development setup. To use Secrets Store locally, you must use `secrets-store secret` [Wrangler commands](https://developers.cloudflare.com/workers/wrangler/commands/) without the `--remote` flag.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: How to ¬∑ Cloudflare Secrets Store docs\ndescription: Refer to the sections below to learn about common actions you might\n  want to take when managing your data in Secrets Store.\nlastUpdated: 2025-09-03T14:48:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/secrets-store/manage-secrets/how-to/\n  md: https://developers.cloudflare.com/secrets-store/manage-secrets/how-to/index.md\n---\n\nRefer to the sections below to learn about common actions you might want to take when managing your data in Secrets Store.\n\nYou must have a [Super Administrator or Secrets Store Admin role](https://developers.cloudflare.com/secrets-store/access-control/) within your Cloudflare account.\n\n## Manage via Wrangler\n\n[Wrangler](https://developers.cloudflare.com/workers/wrangler/) is a command-line interface (CLI) that allows you to manage [Cloudflare Workers](https://developers.cloudflare.com/workers/) projects. Refer to [Wrangler commands](https://developers.cloudflare.com/workers/wrangler/commands/#secrets-store-secret) for guidance on how to use it with Secrets Store.\n\n## Create a secret\n\n* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **Secrets Store** page.\n\n     [Go to **Secrets Store**](https://dash.cloudflare.com/?to=/:account/secrets-store)\n\n  2. Select **Create secret**.\n\n  3. Fill in the required fields. Note that, once the secret is saved, the secret value will no longer be available for viewing.\n\n  4. (Optional) Select **Add additional secret** to create more than one secret at a time.\n\n  5. Select **Save** to confirm.\n\n* API\n\n  Note\n\n  A secret `name` cannot contain spaces. Refer to [Secrets Store API](https://developers.cloudflare.com/api/resources/secrets_store/) for the full API documentation.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Secrets Store Write`",
      "language": "unknown"
    },
    {
      "code": "## Duplicate a secret\n\nDuplicate a secret to keep the same secret value but change name, scope, or comments.\n\n* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **Secrets Store** page.\n\n     [Go to **Secrets Store**](https://dash.cloudflare.com/?to=/:account/secrets-store)\n\n  2. Search for the secret you would like to duplicate within the existing secrets list.\n\n  3. Select the three dots next to the secret and choose **Duplicate**.\n\n  4. Edit the **Secret name**, **Permission scope**, or **Comment**, according to your needs.\n\n  5. Select **Save** to confirm.\n\n* API\n\n  Note\n\n  A secret `name` cannot contain spaces. Refer to [Secrets Store API](https://developers.cloudflare.com/api/resources/secrets_store/) for the full API documentation.",
      "language": "unknown"
    },
    {
      "code": "## Edit a secret\n\nEdit a secret to replace an existing value with a new one.\n\nWarning\n\nThis action will cause the replacement in all services using the secret.\n\nYou can also edit the secret **Permission scope** and **Comment**.\n\n* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **Secrets Store** page.\n\n     [Go to **Secrets Store**](https://dash.cloudflare.com/?to=/:account/secrets-store)\n\n  2. Search for the secret you would like to edit within the existing secrets list.\n\n  3. Select the three dots next to the secret and choose **Edit**.\n\n  4. Edit the available fields according to your needs and select **Save** to confirm.\n\n* API\n\n  Refer to [Secrets Store API](https://developers.cloudflare.com/api/resources/secrets_store/) for the full API documentation.",
      "language": "unknown"
    },
    {
      "code": "## Delete a secret\n\nWarning\n\nBefore deleting a secret, make sure it is not deployed in your [Workers applications](https://dash.cloudflare.com/?to=/:account/workers-and-pages/) or [AI gateways](https://dash.cloudflare.com/?to=/:account/ai/ai-gateway).\n\n* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **Secrets Store** page.\n\n     [Go to **Secrets Store**](https://dash.cloudflare.com/?to=/:account/secrets-store)\n\n  2. Search for the secret you would like to delete within the existing secrets list.\n\n  3. Select the three dots next to the secret and choose **Delete**.\n\n  4. Type in the secret name and select **Delete** to confirm.\n\n* API\n\n  Refer to [Secrets Store API](https://developers.cloudflare.com/api/resources/secrets_store/) for the full API documentation.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Secrets Store Write`",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Cloudforce One ¬∑ Cloudflare Security Center docs\nlastUpdated: 2024-10-21T15:37:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/cloudforce-one/cloudforce-one/\n  md: https://developers.cloudflare.com/security-center/cloudforce-one/cloudforce-one/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Open Port Scanning ¬∑ Cloudflare Security Center docs\ndescription: Open Port Scanning allows Magic Transit and Bring your Own IPs\n  users to efficiently monitor IP ranges for security vulnerabilities. This API\n  enables users to scan their designated IP ranges, detect any open ports, and\n  receive daily notifications regarding newly opened ports.\nlastUpdated: 2025-03-20T12:35:16.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/cloudforce-one/open-port-scanning/\n  md: https://developers.cloudflare.com/security-center/cloudforce-one/open-port-scanning/index.md\n---\n\nOpen Port Scanning allows [Magic Transit](https://developers.cloudflare.com/magic-transit/) and [Bring your Own IPs](https://developers.cloudflare.com/byoip/) users to efficiently monitor IP ranges for security vulnerabilities. This API enables users to scan their designated IP ranges, detect any open ports, and receive daily notifications regarding newly opened ports.\n\nYou can access this feature via the [API](https://developers.cloudflare.com/api/resources/cloudforce_one/subresources/scans/subresources/config/).\n\n## Prerequisites\n\n* Cloudforce One Administrator, Administrator and Super Administrator roles.\n* Account token: **Custom API Token** > **Cloudforce One:Edit**.\n\nTo create a custom API token:\n\n1. From the [Cloudflare dashboard](https://dash.cloudflare.com/profile/api-tokens/), go to **My Profile** > **API Tokens** for user tokens. Go to **Create Custom Token** > **Get started**.\n\n2. Enter a **Token name**, for example, `Open Port Scanning`.\n\n3. In **Permissions**:\n\n   * Choose **Account**.\n   * Select **Cloudforce One** as the account.\n   * Choose **Edit** access.\n\n4. In Client IP Address Filtering:\n\n   * In **Operator**, select `is in`.\n   * In **Value**, enter a valid IP address.\n\n5. Select **Continue to summary**.\n\n6. Review the token, then select **Create Token**.\n\nNote\n\nThe Open Port Scanner will run from a predetermined set of IPs. The Cloudforce One team recommends you to allowlist these IPs in your rules.\n\n## Configure Open Port Scanning\n\nTo configure Open Port Scanning, follow these steps:\n\n1. **Create a new scan config**:\n\n   * **IPs**: Enter the IP ranges you wish to monitor. Ensure that the ranges are correctly formatted to avoid scanning errors. The API will validate if the IPs requested are onboarded to Cloudflare and associated to the account belonging to the API token used.\n\n   * **Frequency**: Enter the scan frequency in days.\n\n   * **Ports**: Select the ports to scan. Choose among:\n\n     * All\n     * Default (refer to [Default ports](https://developers.cloudflare.com/security-center/cloudforce-one/open-port-scanning/#default-ports) for a comprehensive list)\n     * List of specific ports\n\n2. **Scan IPs**: Initiate the scanning process. The system will analyze the specified IP ranges to identify any open ports.\n\n3. **Generate list of open ports**: Once the scan is complete, the API will generate a list of detected open ports for review and action.\n\n4. **Select open ports to list**: Choose which open ports you would like to be notified about. You can exclude any ports that do not require immediate attention.\n\n5. **View differences from previous scan**: The API will highlight any changes in open ports since the last scan, allowing you to quickly assess new vulnerabilities.\n\n6. **Stop scanning**: If necessary, you can stop the scanning process at any time.\n\n7. **Set up alerts**: Configure alerts for specific ports of interest. You will be notified immediately via email or webhook if any of these designated ports become newly open.\n\nBeta feature notice\n\nOpen Port Scanning feature is currently in closed beta. The Cloudforce One team appreciates your feedback as the team works to enhance its functionality and user experience. If you want to subscribe to this feature or participate in the beta program, [join our closed beta for Port Scanning](https://www.cloudflare.com/lp/open-port-scanning-beta/).\n\n## Default ports\n\nList of default ports\n\n* `80`\n* `631`\n* `161`\n* `137`\n* `123`\n* `138`\n* `1434`\n* `445`\n* `135`\n* `67`\n* `23`\n* `53`\n* `443`\n* `21`\n* `139`\n* `22`\n* `500`\n* `68`\n* `520`\n* `1900`\n* `25`\n* `4500`\n* `514`\n* `49152`\n* `162`\n* `69`\n* `5353`\n* `111`\n* `49154`\n* `3389`\n* `110`\n* `1701`\n* `998`\n* `996`\n* `997`\n* `999`\n* `3283`\n* `49153`\n* `445`\n* `1812`\n* `136`\n* `139`\n* `143`\n* `53`\n* `2222`\n* `135`\n* `3306`\n* `2049`\n* `32768`\n* `5060`\n* `8080`\n* `1025`\n* `1433`\n* `3456`\n* `80`\n* `1723`\n* `111`\n* `995`\n* `993`\n* `20031`\n* `1026`\n* `7`\n* `5900`\n* `1646`\n* `1645`\n* `593`\n* `1025`\n* `518`\n* `2048`\n* `626`\n* `1027`\n* `587`\n* `177`\n* `1719`\n* `427`\n* `497`\n* `8888`\n* `4444`\n* `1023`\n* `65024`\n* `199`\n* `19`\n* `9`\n* `49193`\n* `1029`\n* `1720`\n* `49`\n* `465`\n* `88`\n* `1028`\n* `17185`\n* `1718`\n* `49186`\n* `548`\n* `113`\n* `81`\n* `6001`\n* `2000`\n* `10000`\n* `31337`\n\n## Frequently Asked Questions\n\n1. What IPs will the scan come from?\n\n   * `2a09:bac0:1008:5000:1000:0000:0000:0050/104.30.128.13`\n   * `2a09:bac0:1008:5000:1000:0000:0000:0048/104.30.129.33`\n   * `2001:19f0:1000:2941:5400:4ff:fe70:2a7a/140.82.60.241`\n\n2. Can the Port Scanner bypass other security rules configured?\n\n   * The Cloudforce One team asks customers to ensure they allow the IPs for the scanner to run correctly.\n\n3. How long do scans take?\n\n   * Depending on the number of IP addresses and number of ports scanned, scans can take between a few minutes and up to 10 hours.\n\n4. Can I stop automatic scanning?\n\n   * Yes, you can decide at any point to stop scan and restart scans when it is convenient for you.\n\n5. What are the limitations for the scans?\n\n   * Scans are limited to ranges of up to 5,000 IPs.\n   * The API scans both IPv4 and IPv6 IP addresses.\n\n</page>\n\n<page>\n---\ntitle: Set up your security.txt file ¬∑ Cloudflare Security Center docs\ndescription: \"To manage your security.txt file via the Cloudflare dashboard:\"\nlastUpdated: 2025-07-14T16:11:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/infrastructure/security-file/\n  md: https://developers.cloudflare.com/security-center/infrastructure/security-file/index.md\n---\n\nTo manage your [security.txt](https://en.wikipedia.org/wiki/Security.txt) file via the Cloudflare dashboard:\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), select your account and domain.\n  2. Go to **Security** > **Settings**.\n  3. Next to **Enable Security.txt**, select **Edit Security.txt**.\n\n* New dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), select your account and domain.\n  2. Go to **Security** > **Settings** and filter by **Web application exploits**.\n  3. Under **Security.txt** > **Configurations**, select the edit icon.\n\nFrom here, you can create and manage your `security.txt` file to provide the security research team with a standardized way to report vulnerabilities.\n\nFill in the following information:\n\n* **(Required) Contact**: You can enter one of the following to contact you about security issues:\n\n  * An email address: The email address must start with `mailto:` (for example, `mailto:help@example.com`).\n  * A phone number: The phone number must start with `tel:` (for example, `tel:+1 1234567890`).\n  * A URL link: The URL link must start with `https://` (for example, `https://example.com`).\n\n  Select **Add more** to add multiple contacts.\n\n* **(Required) Expires at**: Enter the expiration date and time of the `security.txt` file.\n\n* **Encryption**: A link to a key which security researchers can use to communicate with you.\n\n* **Acknowledgements**: A link to your acknowledgements page.\n\n* **Canonical**: Links to your `security.txt` file.\n\n* **Hiring**: A link to your security-related job openings.\n\n* **Policy**: A link to a policy describing what security researchers should do when searching for or reporting security issues.\n\n* **Preferred languages**: A list of language codes that your security team speaks.\n\nOnce you have entered the necessary information, select **Save**.\n\nTo edit your security.txt file:\n\n* Old dashboard: Select **Security** > **Settings** > **Edit Security.txt**.\n\n* New security dashboard:\n\n  1. Go to **Security** > **Settings** and filter by **Web application exploits**.\n  2. Under **Security.txt** > **Configurations**, select the edit icon.\n\nTo download your security.txt file:\n\n* Old dashboard: Select **Security** > **Settings** > **Download Security.txt**.\n\n* New security dashboard:\n\n  1. Go to **Security** > **Settings** and filter by **Web application exploits**.\n  2. Under **Security.txt** > **Configurations**, select the download icon.\n\nTo delete your security.txt file:\n\n* Old dashboard:\n  * Select **Security** > **Settings** > **Delete Security.txt**.\n\n* New security dashboard:\n\n  1. Select **Security** > **Settings** and filter by **Web application exploits**.\n  2. Under **Security.txt** > **Configurations**, select the edit icon.\n  3. Select **Delete**.\n\n</page>\n\n<page>\n---\ntitle: Limits ¬∑ Cloudflare Security Center docs\ndescription: Limits\nlastUpdated: 2024-08-22T14:15:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/intel-apis/limits/\n  md: https://developers.cloudflare.com/security-center/intel-apis/limits/index.md\n---\n\n## API request limits\n\nAll API calls made to Threat Intelligence endpoints will contribute to the monthly quota. Additionally, utilizing features within the Security Center such as Investigate and Brand Protection, or other products, such as Page Shield, which also leverage the Security Intelligence APIs, will also contribute to the consumption of the quota.\n\nThese request limits currently do not apply to the DDoS Botnet Threat Feed API.\n\n| Cloudflare Plan | Calls per month |\n| - | - |\n| Free | 100 |\n| Pro | 100 |\n| Business | 100 |\n| Enterprise | 2,500 |\n| Cloudforce One Core | 10,000 |\n| Cloudforce One Premier | 50,000 |\n\n</page>\n\n<page>\n---\ntitle: Manage miscategorization reports ¬∑ Cloudflare Security Center docs\ndescription: This guide will show you how to manage miscategorization of\n  reports. To complete this guide, you will need to generate an API token.\nlastUpdated: 2025-02-04T11:54:13.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/intel-apis/manage-miscategorization-reports/\n  md: https://developers.cloudflare.com/security-center/intel-apis/manage-miscategorization-reports/index.md\n---\n\nThis guide will show you how to manage miscategorization of reports. To complete this guide, you will need to generate an [API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/).\n\n1. Create an [API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) if you do not have one already.\n2. Choose **Custom Token**.\n3. Name the token, and grant permissions.\n4. Send a `POST` request to the miscategorization [API endpoint](https://developers.cloudflare.com/api/resources/intel/subresources/miscategorizations/methods/create/). You can find an example below:",
      "language": "unknown"
    },
    {
      "code": "You should receive a response with the value `\"success\": true`:",
      "language": "unknown"
    },
    {
      "code": "Once you send the request, the Cloudflare Support team will receive it and will be able to take action.\n\n</page>\n\n<page>\n---\ntitle: Change categorization ¬∑ Cloudflare Security Center docs\ndescription: Cloudflare sorts domains into categories based on their content and\n  security type. You can request categorization changes via the dashboard,\n  Cloudflare Radar, or the API.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/investigate/change-categorization/\n  md: https://developers.cloudflare.com/security-center/investigate/change-categorization/index.md\n---\n\nCloudflare sorts domains into categories based on their content and security type. You can request categorization changes via the [dashboard](#via-the-cloudflare-dashboard), [Cloudflare Radar](#via-cloudflare-radar), or the [API](#via-the-api).\n\nFor a detailed list of categories, refer to [Domain categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/).\n\n## Via the Cloudflare dashboard\n\nTo request a categorization change via the Cloudflare dashboard:\n\n1. In the Cloudflare dashboard, go to the **Investigate** page.\n\n   [Go to **Investigate**](https://dash.cloudflare.com/?to=/:account/security-center/investigate)\n\n2. Search for the domain you want to change.\n\n3. In **Domain overview**, select **Request to change categorization**.\n\n4. Choose whether to change a [security category](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-categories) or a [content category](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#content-categories).\n\n5. Choose which categories you want to add or remove from the domain.\n\n   Content category limit\n\n   A domain cannot have more than two associated content categories. To propose changes to categories of a domain with more than two existing categories, remove one or more of the existing categories.\n\n6. Select **Submit** to submit your request for review.\n\nRequesting a security category change will trigger a deeper investigation by Cloudflare to confirm that the submission is valid. Requesting a content category change also requires Cloudflare validation, but the turnaround time for these submissions is usually shorter as it requires less investigation.\n\nYour category change requests will be revised by the Cloudflare team depending on the type of change. If your requests have been reviewed and applied by the Cloudflare team, the new categories will be visible in the Cloudflare dashboard in **Security Center** > **Investigate**, as well as in [Cloudflare Radar](https://radar.cloudflare.com/).\n\nWarning\n\nCloudflare does not guarantee the category change will be approved.\n\n## Via Cloudflare Radar\n\nTo request recategorization via Cloudflare Radar, submit feedback in [Radar Domain Categorization](https://radar.cloudflare.com/domains/feedback).\n\n## Via the API\n\nTo request a categorization change via the API:\n\n1. [Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with permission to edit your Intel account.\n\n   | **Permissions** | | |\n   | - | - | - |\n   | Account | Intel | Edit |\n\n   | **Account Resources** | |\n   | - | - |\n   | Include | All accounts |\n\n2. Make a call to the [miscategorization endpoint](https://developers.cloudflare.com/api/resources/intel/subresources/miscategorizations/methods/create/) including the domain name and any categories you would like to add or remove. For example:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Investigate threats ¬∑ Cloudflare Security Center docs\ndescription: Users can investigate the details of an IP address, domain name,\n  URL, or Autonomous System Number (ASN). You can find the Investigate feature\n  in your Cloudflare account's Security Center and in Cloudflare Radar.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/investigate/investigate-threats/\n  md: https://developers.cloudflare.com/security-center/investigate/investigate-threats/index.md\n---\n\nUsers can investigate the details of an IP address, domain name, URL, or Autonomous System Number (ASN). You can find the Investigate feature in your Cloudflare account's Security Center and in [Cloudflare Radar](https://radar.cloudflare.com/scan).\n\nYou can search with Investigate by [IP address](https://developers.cloudflare.com/security-center/investigate/investigate-threats/#ip-address), [domain](https://developers.cloudflare.com/security-center/investigate/investigate-threats/#domain), [URL](https://developers.cloudflare.com/security-center/investigate/investigate-threats/#url) and [AS number](https://developers.cloudflare.com/security-center/investigate/investigate-threats/#as-number).\n\nNote\n\nSearch methods are also available through the [API](https://developers.cloudflare.com/security-center/intel-apis/).\n\n## IP Address\n\nAn [IP address](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/) is a unique address that identifies a server. It stands for [Internet Protocol](https://www.cloudflare.com/learning/network-layer/internet-protocol/), which is the set of rules that allows servers to communicate with each other.\n\nIP address search allows you to search both [IPv4 and IPv6](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/) addresses and retrieve relevant information such as their pointer records, AS numbers and passive DNS records.\n\n## Domain\n\nA [domain name](https://www.cloudflare.com/learning/dns/glossary/what-is-a-domain-name/) is a string of text that maps to an IP address. Domain names are used to help people remember where websites are hosted. Domain names are purchased through [registrars](https://developers.cloudflare.com/registrar/) and can be acquired easily by anyone.\n\nWhen you search for a domain name, Cloudflare will provide an overview of the domain's [category](#domain-categories) and IP addresses it currently resolves to.\n\n### Domain categories\n\nFor a detailed list of categories, refer to [Domain categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/).\n\nA domain can have multiple categories. Cloudflare displays both the parent category and the detailed child category. You can [request category changes](https://developers.cloudflare.com/security-center/investigate/change-categorization/) for a domain. Miscategorized domains can also request to have a category added. This request goes through an approval process with the Cloudflare team.\n\nAs part of the domain search results, Cloudflare show the WHOIS details and a history of its category changes over time.\n\n## AS Number\n\nAn [AS number](https://www.cloudflare.com/learning/network-layer/what-is-an-autonomous-system/) is a group of IP addresses belonging to and controlled by a single organization. The entire group of networks have a single unified routing policy. The [Internet Assigned Numbers Authority](https://www.iana.org/) (IANA) is the organization responsible for managing the assignment and distribution of AS numbers. The AS number's routing policies are used by [BGP](https://www.cloudflare.com/learning/security/glossary/what-is-bgp/) which is how Cloudflare's [anycast network](https://www.cloudflare.com/learning/cdn/glossary/anycast-network/) works.\n\nWhen you search for an AS number, Cloudflare will return registration data such as its country, description and type. It will also display data such as domain count, top 10 domains and subnets.\n\nWith sufficient data, AS number search results will also return the geographical distribution of traffic in its network, application level attacks and network level attacks, each broken down by Cloudflare mitigation techniques and network protocols, respectively.\n\n## Hash\n\nWhen you search for a hash, the Cloudflare dashboard will provide a URL report for that specific hash.\n\nTo search using a hash:\n\n1. In the Cloudflare dashboard, go to the **Investigate** page.\n\n   [Go to **Investigate**](https://dash.cloudflare.com/?to=/:account/security-center/investigate)\n\n2. Enter the hash, then select **Search**.\n\n3. Select **View report** to view the report for your URL.\n\n## URL\n\nWhen you search for a URL, Cloudflare will provide a list of recent scan reports for that specific URL, limited to the past 30 days. You can view previously generated reports or scan again to generate a new report.\n\nDifferent Cloudflare plans will have different [scan limitations](https://developers.cloudflare.com/security-center/investigate/scan-limits/).\n\nIf you want to scan a URL:\n\n1. In the Cloudflare dashboard, go to the **Investigate** page.\n\n   [Go to **Investigate**](https://dash.cloudflare.com/?to=/:account/security-center/investigate)\n\n2. Enter the URL, then select **Search**.\n\nAlternatively, to scan a URL, go to [Cloudflare Radar](https://radar.cloudflare.com/) > **URL scanner**. Enter the URL, then select **Publish**.\n\nNote\n\nYou can use [Cloudflare Radar API](https://developers.cloudflare.com/radar/investigate/url-scanner/#use-the-api) to investigate threats.\n\n### Visibility\n\nWhen generating a new scan report, the default visibility is set to `Unlisted`, but you have the option to set it to `Public`. By choosing `Public`, the generated scan will be available to all Cloudflare dashboard and Cloudflare Radar users alike, which will increase awareness of potentially malicious websites for others.\n\nWe recommend choosing `Unlisted` if you are scanning infrastructure that is not intended to be shared with the wider Cloudflare community.\n\n### Filters\n\nWhile viewing the most recent scans, you can use the filtering options. Selecting `All account scans` will display both `Unlisted` or `Public` scans initiated from your Cloudflare account. However, by selecting `All global scans`, only `Public` scans are displayed.\n\n### Downloads\n\nYou can download a report of your scan in HAR or JSON format.\n\nTo download a report:\n\n1. In the Cloudflare dashboard, go to the **Investigate** page.\n\n   [Go to **Investigate**](https://dash.cloudflare.com/?to=/:account/security-center/investigate)\n\n2. Enter your domain and select **Search**.\n\n3. Once the report has been generated, select **Download** and choose between **Download HAR** or **Download JSON**.\n\n</page>\n\n<page>\n---\ntitle: Scan limits ¬∑ Cloudflare Security Center docs\ndescription: Limits\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/investigate/scan-limits/\n  md: https://developers.cloudflare.com/security-center/investigate/scan-limits/index.md\n---\n\nURL scans are limited by search history, Public and Unlisted visibility, and requests per second across different Cloudflare plans.\n\n| Cloudflare Plan | Search history | Public scans (per month) | Unlisted scans (per month) | Rate limit |\n| - | - | - | - | - |\n| **Free / Radar** | last 50 scans | 5,000 | none | 1 per 10 seconds |\n| **Self serve** | 30 days | 5,000 | 500 | 1 per 10 seconds |\n| **Enterprise** | 12 months | 10,000 | 5,000 | 12 per second |\n| **Cloudforce One** | Unlimited | 75,000 | 20,000 | 12 per second |\n\n</page>\n\n<page>\n---\ntitle: How it works ¬∑ Cloudflare Security Center docs\ndescription: Once you enable Security Insights, Cloudflare runs regular security\n  scans on the infrastructure associated with your Cloudflare account. These\n  scans perform a series of checks on your Cloudflare account settings and on\n  the configurations of different Cloudflare products for the domains in your\n  Cloudflare account.\nlastUpdated: 2025-08-20T21:45:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/security-insights/how-it-works/\n  md: https://developers.cloudflare.com/security-center/security-insights/how-it-works/index.md\n---\n\nOnce you [enable Security Insights](https://developers.cloudflare.com/security-center/get-started/), Cloudflare runs regular security scans on the infrastructure associated with your Cloudflare account. These scans perform a series of checks on your Cloudflare account settings and on the configurations of different Cloudflare products for the domains in your Cloudflare account.\n\nThe performed checks take into account a set of ideal product configurations and states that indicate a good security posture. If your current configuration does not meet this ideal configuration for one or more checks, the Security Center will report these situations as **Security Insights**.\n\nThe list of insights may include potential security threats, vulnerabilities, compliance risks, insecure configurations, or any other identified risks.\n\nNote\n\nSecurity Insights will check non-proxied hostnames.\n\n## Scan properties\n\nEach insight will have the following properties assigned to them:\n\n* **Severity**: The security risk of the insight. The severity values are: *Moderate*, *High*, and *Critical*. The higher the severity level, the higher the risk of threat to your environment.\n* **Insight**: The insight description detailing the current configuration that is causing the risk or vulnerability.\n* **Risk**: A description of the risk associated with not addressing the issue.\n* **Type**: The insight category.\n\n## Scan frequency\n\nOnce you enable Security Insights, Cloudflare performs scans automatically. Paying customers (as defined in the table below) are re-scanned daily and can trigger a scan manually:\n\n| Plan | Scan Frequency | On-Demand |\n| - | - | - |\n| Accounts on a Free, Pro, or Business plan | Every 7 days | Yes |\n| Accounts on an Enterprise plan | Every 3 days | Yes |\n\n</page>\n\n<page>\n---\ntitle: Review Security Insights ¬∑ Cloudflare Security Center docs\ndescription: After enabling Security Insights and letting the first scan run,\n  check the Security Insights tab for a list of detected insights that you\n  should address.\nlastUpdated: 2025-09-03T13:18:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/security-insights/review-insights/\n  md: https://developers.cloudflare.com/security-center/security-insights/review-insights/index.md\n---\n\nAfter [enabling Security Insights](https://developers.cloudflare.com/security-center/get-started/) and letting the first scan run, check the **Security Insights** tab for a list of detected insights that you should address.\n\nFor each detected insight, you can resolve it or archive it, after understanding its risks.\n\n1. In the Cloudflare dashboard, go to the **Security Insights** page.\n\n   [Go to **Security insights**](https://dash.cloudflare.com/?to=/:account/security-center)\n\n2. Next to the insight you wish to address, select **Details** to review it.\n\n## Resolve an insight\n\nInsights will not be automatically removed from your dashboard when you address them. You must either manually [archive insights](#archive-insights), manually trigger another scan or wait for the automatic scan to run as per [scan frequency](https://developers.cloudflare.com/security-center/security-insights/how-it-works/#scan-frequency).\n\nIn the Resolve insights page, if you choose to update a configuration based on the recommendation actions, follow the instructions on the insight details page.\n\nThe following insights follow a different yet straightforward workflow to be resolved:\n\n* **Minimum Version of TLS 1.2 not enforced**: To resolve this insight:\n\n  * Go to **SSL/TLS** > **Edge Certificates**.\n  * Select **TLS 1.2**.\n\n* **Domains without \"Always use HTTPS\"**: To resolve this insight:\n\n  * Go to **SSL/TLS** > **Edge Certificates**.\n  * Select **Always Use HTTPS**.\n\n* **Turn on JavaScript Detections**: To resolve this insight:\n\n  * Go to **Security** > **Bots** > Select **Configure Bot Management**.\n  * Select **JavaScript Detections**.\n\n## Export insights\n\nYou can export security insights to a CSV format directly from the dashboard.\n\nTo export security insights:\n\n1. In the Cloudflare dashboard, go to the **Security Insights** page.\n\n   [Go to **Security insights**](https://dash.cloudflare.com/?to=/:account/security-center)\n\n2. Select **Export insights**.\n\nExporting security insights allow you to perform a deeper analysis of your insights.\n\nThe exported CSV file includes information such as the severity of your data, insight type scan date, issue class and additional optional fields, such as insight details, risk assessment, detection method, and recommended actions.\n\n## Archive insights\n\nYou can archive one or more insights from the dashboard.\n\nTo archive insights:\n\n1. In the Cloudflare dashboard, go to the **Security Insights** page.\n\n   [Go to **Security insights**](https://dash.cloudflare.com/?to=/:account/security-center)\n\n2. Select the insight(s) you want to archive, then select **Archive selected**.\n\nAlternatively, to archive an insight:\n\n1. Select the insight you want to archive and select **Details**. The dashboard will open a page where you will be able to review [insight properties](https://developers.cloudflare.com/security-center/security-insights/how-it-works/#scan-properties).\n2. Select **Archive insight**.\n\n## Enable alerts\n\nYou can enable alerts for critical insights.\n\nTo enable alerts:\n\n1. In the Cloudflare dashboard, go to the **Security Insights** page.\n\n   [Go to **Security insights**](https://dash.cloudflare.com/?to=/:account/security-center)\n\n2. Select the security insight(s) you want to create an alert for, then select **Create alert for selected classes**.\n\n3. Enter the notification name, and choose one or more insights classes to filter a notification.\n\n4. Select **Add email recipient** and enter an email address to receive the alert.\n\n5. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Roles and permissions ¬∑ Cloudflare Security Center docs\ndescription: \"Cloudflare users with the following roles have access to Security\n  Insights in the Cloudflare dashboard:\"\nlastUpdated: 2025-05-29T18:16:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/security-center/security-insights/roles-and-permissions/\n  md: https://developers.cloudflare.com/security-center/security-insights/roles-and-permissions/index.md\n---\n\nCloudflare users with the following [roles](https://developers.cloudflare.com/fundamentals/manage-members/roles/) have access to Security Insights in the Cloudflare dashboard:\n\n* Administrator\n* Administrator Read Only\n* Super Administrator - All Privileges\n* SSL/TLS, Caching, Performance, Page Rules, and Customization\n* DNS\n* Page Shield\n* Page Shield Read\n* Firewall\n\n</page>\n\n<page>\n---\ntitle: Connection reuse ¬∑ Cloudflare Smart Shield docs\ndescription: Smart Shield leverages Cloudflare's optimized infrastructure to\n  package multiple requests from an upper-tier into a single connection to your\n  origin. This means overall connections to your origin are lowered by 30% on\n  average. Refer to the blog post for details.\nlastUpdated: 2025-11-19T12:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/concepts/connection-reuse/\n  md: https://developers.cloudflare.com/smart-shield/concepts/connection-reuse/index.md\n---\n\nSmart Shield leverages Cloudflare's optimized infrastructure to package multiple requests from an [upper-tier](https://developers.cloudflare.com/smart-shield/configuration/smart-tiered-cache/) into a single connection to your origin. This means overall connections to your origin are lowered by 30% on average. Refer to the [blog post](https://blog.cloudflare.com/introducing-observatory-and-smart-shield/#protecting-and-accelerating-origins-with-smart-connection-reuse) for details.\n\n## About connection reuse\n\nImplemented by HTTP/1.1, connection reuse describes multiple requests passing through one same connection (between one source IP:port and one destination IP:port). It is commonly the case even for simple websites nowadays.\n\nFor example, when a connection is initiated for `shop.example.com`, several embedded subresources may be requested - CSS, image files, advertisement, etc. This can mean hundreds of requests just for the website to load. Instead of having a one to one ratio of request per connection, a single connection is used for multiple requests.\n\nWith HTTP/2, requests can use the same connection even if they are for different domains (also known as connection coalescing).\n\nFor example, a connection initiated for `shop.example.com` can be used for requests for `blog.example.com` as well - as long as the requests have the same destination IP:port and the server TLS certificate is authoritative for both hostnames.\n\n## Egress IPs allocation\n\nConnection reuse and connection coalescing are also considered when allocating your [Dedicated CDN Egress IPs](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/).\n\n</page>\n\n<page>\n---\ntitle: Network diagram ¬∑ Cloudflare Smart Shield docs\ndescription: The diagram below illustrates the different configurations\n  available for Smart Shield and the role each of them plays in protecting your\n  origin while also improving your website or application performance.\nlastUpdated: 2025-09-17T12:18:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/concepts/network-diagram/\n  md: https://developers.cloudflare.com/smart-shield/concepts/network-diagram/index.md\n---\n\nThe diagram below illustrates the different configurations available for Smart Shield and the role each of them plays in protecting your origin while also improving your website or application performance.\n\n![Network diagram of requests being processed with all Smart Shield features](https://developers.cloudflare.com/_astro/network-diagram.PeUYDGK__Z2bsF22.webp)\n\n</page>\n\n<page>\n---\ntitle: Argo Smart Routing ¬∑ Cloudflare Smart Shield docs\ndescription: Argo Smart Routing detects real-time network issues and routes your\n  web traffic across the most efficient network path, avoiding congestion.\nlastUpdated: 2025-09-17T12:18:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/configuration/argo/\n  md: https://developers.cloudflare.com/smart-shield/configuration/argo/index.md\n---\n\nAvailability\n\nAvailable with Smart Shield + Argo and Smart Shield Advanced.\n\nArgo Smart Routing detects real-time network issues and routes your web traffic across the most efficient network path, avoiding congestion.\n\nCloudflare provides analytics to show the performance benefits of Argo Smart Routing.\n\nAnalytics collects data based on the time-to-first-byte (TTFB) from your origin to the Cloudflare network. TTFB is the delay between when Cloudflare sends a request to your server and when it receives the first byte in response. Argo Smart Routing optimizes your server's network transit time to minimize this delay.\n\n</page>\n\n<page>\n---\ntitle: Cache Reserve ¬∑ Cloudflare Smart Shield docs\ndescription: Cache Reserve is a large, persistent data store implemented on top\n  of R2. By pushing a single button in the dashboard, your website's cacheable\n  content will be written to Cache Reserve.\nlastUpdated: 2025-09-17T12:18:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/configuration/cache-reserve/\n  md: https://developers.cloudflare.com/smart-shield/configuration/cache-reserve/index.md\n---\n\nAvailability\n\nAvailable with Smart Shield Advanced.\n\nCache Reserve is a large, persistent data store [implemented on top of R2](https://developers.cloudflare.com/r2/). By pushing a single button in the dashboard, your website's cacheable content will be written to Cache Reserve.\n\nIn the same way that Tiered Cache builds a hierarchy of caches between your visitors and your origin, Cache Reserve serves as the ultimate upper-tier cache, that will reserve storage space for your assets for as long as you want. This ensures that your content is served from cache longer, shielding your origin from unneeded egress fees.\n\nSmart Shield Advanced includes 2 TB of storage for Cache Reserve.\n\n## Asset eligibility\n\nNot all assets are eligible for Cache Reserve. To be admitted into Cache Reserve, assets must:\n\n* Be cacheable, according to Cloudflare's standard [cacheability factors](https://developers.cloudflare.com/cache/).\n* Have a freshness time-to-live (TTL) of at least 10 hours (set by any means such as Cache-Control / [CDN-Cache-Control](https://developers.cloudflare.com/cache/concepts/cache-control/) origin response headers, [Edge Cache TTL](https://developers.cloudflare.com/cache/how-to/edge-browser-cache-ttl/#edge-cache-ttl), [Cache TTL By Status](https://developers.cloudflare.com/cache/how-to/configure-cache-status-code/), or [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/)),\n* Have a Content-Length response header.\n* When using [Image transformations](https://developers.cloudflare.com/images/manage-images/create-variants/), original files are eligible for Cache Reserve, but resized file variants are not eligible because transformations happen after Cache Reserve in the response flow.\n\n## Limits\n\n* Cache Reserve file limits are the same as [R2 limits](https://developers.cloudflare.com/r2/platform/limits/). Note that [CDN cache limits](https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#customization-options-and-limits) still apply. Assets larger than standard limits will not be stored in the standard CDN cache, so these assets will incur Cache Reserve operations costs far more frequently.\n* Origin Range requests are not supported at this time from Cache Reserve.\n* [Vary for images](https://developers.cloudflare.com/cache/advanced-configuration/vary-for-images/) is currently not compatible with Cache Reserve.\n* Requests to [R2 public buckets linked to a zone's domain](https://developers.cloudflare.com/r2/buckets/public-buckets/) will not use Cache Reserve. Enabling Cache Reserve for the connected zone will use Cache Reserve only for requests not destined for the R2 bucket.\n* Cache Reserve makes requests for uncompressed content directly from the origin. Unlike the standard Cloudflare CDN, Cache Reserve does not include the `Accept-Encoding: gzip` header when sending requests to the origin.\n* Cache Reserve is bypassed when using the Cloudflare [O2O](https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/saas-customers/how-it-works/) setup.\n\n## Delete data\n\nYou can remove all data stored in Cache Reserve. In most cases, deletion takes around 24 hours to be completed.\n\n1. Select the three dots next to Cache Reserve in your Smart Shield configurations.\n2. Choose **View details** to open the Cache Reserve sidebar.\n3. Make sure to pause Cache Reserve.\n4. Select **Delete data** and then **Save**.\n5. Select **Delete** again in the dialog to confirm.\n\nNote\n\nIf you want to purge your cache instead, refer to [cache configurations](https://developers.cloudflare.com/cache/how-to/purge-cache/).\n\n</page>\n\n<page>\n---\ntitle: Dedicated CDN Egress IPs ¬∑ Cloudflare Smart Shield docs\ndescription: Enterprise customers can leverage dedicated egress1 IPs for layer 7\n  WAF and CDN services, as well as Spectrum. The egress IPs are reserved\n  exclusively for your account so that you can increase your origin security by\n  only allowing traffic from a small list of IP addresses.\nlastUpdated: 2025-11-19T12:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/\n  md: https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/index.md\n---\n\nEnterprise customers can leverage dedicated egress[1](#user-content-fn-1) IPs for layer 7 [WAF](https://developers.cloudflare.com/waf/) and CDN services, as well as [Spectrum](https://developers.cloudflare.com/spectrum/). The egress IPs are reserved exclusively for your account so that you can increase your origin security by only allowing traffic from a small list of IP addresses.\n\nNote\n\nIf you are interested in using Smart Shield Advanced with Dedicated CDN Egress IPs, reach out to your account team.\n\nDedicated CDN Egress IPs was formerly known as Cloudflare Aegis ([release blog post](https://blog.cloudflare.com/cloudflare-aegis/)).\n\n## Benefits\n\nWith Dedicated CDN Egress IPs, you can:\n\n* Lock down your network firewall to only allow traffic from your dedicated IPs.\n* Use [Cloudflare Access and CNI](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/other-products/#access-and-cni) to secure your applications without installing software or customizing code on your server.\n* Ensure only authorized [Workers](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/other-products/#workers) can access your origin services.\n\n## Scope\n\nYou can assign Dedicated CDN Egress IPs to single or multiple Cloudflare zones, and across different Cloudflare accounts.\n\nDedicated CDN Egress IPs are included within [BGP advertisement over CNI](https://developers.cloudflare.com/network-interconnect/).\n\nEach dedicated egress pool can consist of either IPs from a [BYOIP prefix](https://developers.cloudflare.com/byoip/) or Cloudflare-leased IPs. A single dedicated egress pool cannot contain both BYOIPs and leased IPs.\n\n## Resources\n\n* [How it works](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/how-it-works/)\n* [IPs utilization](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/ips-utilization/)\n* [Use with other Cloudflare products](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/other-products/)\n\n## Footnotes\n\n1. From Cloudflare to your origin. Refer to [how it works](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/how-it-works/egress-ips/) for details. [‚Ü©](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: Health Checks ¬∑ Cloudflare Smart Shield docs\ndescription: A health check is a service that runs on Cloudflare's edge network\n  to monitor whether an origin server is online. This allows you to view the\n  health of your origin servers even if there is only one origin or you do not\n  yet need to balance traffic across your infrastructure.\nlastUpdated: 2025-09-17T12:18:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/configuration/health-checks/\n  md: https://developers.cloudflare.com/smart-shield/configuration/health-checks/index.md\n---\n\nAvailability\n\nAvailable for Pro, Business, and Enterprise customers in all Smart Shield packages.\n\nA health check is a service that runs on Cloudflare's edge network to monitor whether an origin server is online. This allows you to view the health of your origin servers even if there is only one origin or you do not yet need to balance traffic across your infrastructure.\n\nHealth Checks support various configurations to hone in on what you can check, including response codes, protocol types, and intervals. You can specify a particular path if an origin server serves multiple applications or check a larger subset of response codes for your staging environment. All of these options allow you to properly target your Health Check, providing a precise picture of what is wrong with an origin server.\n\n## Regions\n\nCloudflare has data centers in [hundreds of cities worldwide](https://www.cloudflare.com/network/). Health checks do not run from every single of these data centers as this would result in numerous requests to your servers. Instead, you are able to choose between one and thirteen regions from which to run health checks. Cloudflare will run Health Checks from three data centers in each region that you select.\n\nNote\n\nThe exact location of these data centers are subject to change at any moment.\n\nThe Internet is not the same everywhere around the world and your users may not have the same experience on your application according to where they are. Running Health Checks from different regions lets you know the health of your application from the point of view of the Cloudflare network in each of these regions.\n\nIf you select multiple regions or choose **All Regions** (Business and Enterprise Only), you may increase traffic to your servers. Each region sends individual health checks from three data centers.\n\n## Further reading\n\n* [Manage Health Checks](https://developers.cloudflare.com/smart-shield/configuration/health-checks/setup/)\n* [Health Checks analytics](https://developers.cloudflare.com/smart-shield/configuration/health-checks/analytics/)\n* [Zone Lockdown](https://developers.cloudflare.com/smart-shield/configuration/health-checks/zone-lockdown/)\n\n</page>\n\n<page>\n---\ntitle: Regional Tiered Cache ¬∑ Cloudflare Smart Shield docs\ndescription: Regional Tiered Cache provides an additional layer of caching for\n  customers who have a global traffic footprint and want to serve content faster\n  by avoiding network latency when there is a cache MISS in a lower-tier,\n  resulting in an upper-tier fetch in a data center located far away.\nlastUpdated: 2025-09-17T12:18:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/configuration/regional-tiered-cache/\n  md: https://developers.cloudflare.com/smart-shield/configuration/regional-tiered-cache/index.md\n---\n\nAvailability\n\nAvailable with Smart Shield Advanced.\n\nRegional Tiered Cache provides an additional layer of caching for customers who have a global traffic footprint and want to serve content faster by avoiding network latency when there is a cache `MISS` in a lower-tier, resulting in an upper-tier fetch in a data center located far away.\n\nRegional Tiered Cache instructs Cloudflare to check a regional hub data center near the lower tier before going to the upper tier that may be outside of the region.\n\n</page>\n\n<page>\n---\ntitle: Smart Tiered Cache ¬∑ Cloudflare Smart Shield docs\ndescription: With data centers around the world, Cloudflare caches content very\n  close to end users. However, if a piece of content is not in cache, the\n  Cloudflare data centers must contact the origin server to receive the\n  cacheable content. Tiered cache works by dividing Cloudflare's data centers\n  into a hierarchy of lower-tiers and upper-tiers, where only upper-tiers can\n  ask your origin for content.\nlastUpdated: 2025-09-17T12:18:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/smart-shield/configuration/smart-tiered-cache/\n  md: https://developers.cloudflare.com/smart-shield/configuration/smart-tiered-cache/index.md\n---\n\nAvailability\n\nAvailable in all Smart Shield packages.\n\nWith data centers around the world, Cloudflare caches content very close to end users. However, if a piece of content is not in cache, the Cloudflare data centers must contact the origin server to receive the cacheable content. Tiered cache works by dividing Cloudflare's data centers into a hierarchy of lower-tiers and upper-tiers, where only upper-tiers can ask your origin for content.\n\nSmart Tiered Cache dynamically selects the single closest upper tier for each of your website‚Äôs origins with no configuration required, using our in-house performance and routing data. Cloudflare collects latency data for each request to an origin, and uses the latency data to determine how well any upper-tier data center is connected with an origin. As a result, Cloudflare can select the data center with the lowest latency to be the upper-tier for an origin.\n\n#### Load Balancing interaction\n\nWhile Smart Tiered Cache selects one Upper Tier per origin, when using Load Balancing, Smart Tiered Cache will select the single best Upper Tier for the entire [Load Balancing Pool](https://developers.cloudflare.com/load-balancing/understand-basics/load-balancing-components/#pools).\n\n#### Caveats\n\nSmart Tiered Cache does not work when an origin is behind an [anycast](https://www.cloudflare.com/en-gb/learning/cdn/glossary/anycast-network/) or a regional unicast network because that will prevent us from knowing where the origin is located. As a result, we are unable to select the optimal upper tier and latency may be negatively impacted.\n\nYou need to be careful when updating your origin IPs/DNS records while Smart Tiered Cache is enabled. Depending on the changes made, it may cause the existing assigned upper tiers to change, resulting in an increased `MISS` rate as cache is refilled in the new upper tiers. If the origin is switched to a network behind anycast, it will significantly reduce the effectiveness of Smart Tiered Cache.\n\nIf you need to use anycast or regional unicast and want to use Smart Tiered cache, please engage your account team.\n\n</page>\n\n<page>\n---\ntitle: BYOIP ¬∑ Cloudflare Spectrum docs\ndescription: When creating a Spectrum application, Cloudflare normally assigns\n  an arbitrary IP from Cloudflare‚Äôs IP pool to your application. If you want to\n  be explicit in your network setup or use your own IP addresses, BYOIP with\n  Spectrum allows you to do just that.\nlastUpdated: 2025-07-08T13:27:31.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/about/byoip/\n  md: https://developers.cloudflare.com/spectrum/about/byoip/index.md\n---\n\nWhen creating a Spectrum application, Cloudflare normally assigns an arbitrary IP from Cloudflare‚Äôs IP pool to your application. If you want to be explicit in your network setup or use your own IP addresses, BYOIP with Spectrum allows you to do just that.\n\nBYOIP stands for [Bring Your Own IP](https://developers.cloudflare.com/byoip/). If you own an IP prefix you can migrate it to Cloudflare. After migration, Cloudflare broadcasts your IP prefix and traffic is routed to the global Cloudflare network. However, without configuration, Cloudflare will not know how to handle this traffic. The last step is to add Spectrum applications for all applications that you wish to protect with the IP addresses you want associated with them.\n\nWarning\n\nWhen switching from non-BYOIP to BYOIP, if you are already using a Spectrum application, you need to delete your configurations and recreate new ones.\n\nThe smallest prefixes that Cloudflare currently supports is /24 for IPv4 and /48 for IPv6.\n\nBYOIP does not come standard with Spectrum. To enable it, contact your account team.\n\n## Assign an IP address\n\nTo use an IP, it must be assigned to a Spectrum app to create the appropriate A (IPv4) or AAAA (IPv6) records. This is done by specifying one or more IP addresses when creating an application through the API. Any change to the application's properties also needs to be done via API. In addition, you must update the DNS `\"type\"` field to `\"ADDRESS\"` to create a Spectrum app using BYOIP.",
      "language": "unknown"
    },
    {
      "code": "## Example\n\nIn the example below, the application routes traffic through Cloudflare‚Äôs HTTP pipeline, including WAF, Workers and CDN functionality.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone Settings Write`",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: FTP ¬∑ Cloudflare Spectrum docs\ndescription: Enabling Spectrum for FTP is not straightforward due to the\n  implementation of the protocol. This guide gives an overview of the\n  intricacies of FTP and under which circumstances you can enable Spectrum for\n  your FTP service.\nlastUpdated: 2025-05-01T15:14:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/about/ftp/\n  md: https://developers.cloudflare.com/spectrum/about/ftp/index.md\n---\n\nEnabling Spectrum for FTP is not straightforward due to the implementation of the protocol. This guide gives an overview of the intricacies of FTP and under which circumstances you can enable Spectrum for your FTP service.\n\nNote\n\nThis feature requires an Enterprise plan. If you would like to upgrade, contact your account team.\n\n## How FTP Operates\n\nFTP leverages two different sockets, one for issuing commands and the other for actual data transfer. The control socket takes care of users logging in and sending commands, and the data socket is where directory listings and files actually get transferred.\n\nThere are two ways in which client and server can establish a data socket: active and passive. In active mode, the server connects *back* to the client on a port that they have specified, which can create issues where clients are behind an NAT. The alternative is passive mode, where the server opens an extra port that the client then connects to. For an overview of active versus passive FTP, refer to [Active FTP vs. Passive FTP, a Definitive Explanation](http://slacksite.com/other/ftp.html).\n\nIn passive mode, the FTP server communicates a port that the client should connect to, which is done on the control socket via a PASV command. By default, the FTP server responds with the IP address that it is listening on. This scenario is fine for servers running directly on a public-facing IP but creates issues when a server is behind an NAT, firewall, or Cloudflare Spectrum.\n\nAlternatively, more modern FTP server software supports [FTP extensions](https://tools.ietf.org/html/rfc2428), which introduces the EPSV command that omits the IP address that the client should connect on. Instead, the client connects to the same IP that it connected to for the control pane.\n\n## What Does and Does Not Work\n\nSpectrum is able to protect servers serving FTP traffic in *passive mode only*. Active mode is not supported due to the fact that the origin server sees the Spectrum IP as being the client instead of the actual client IP. When the client issues a PORT command with their own IP, the FTP server rejects because the two addresses do not match.\n\nPassive mode in combination with EPSV works out of the box with no origin-side configuration required. Note that the client must also support EPSV for this to work. Traditional passive mode with PASV is possible with minimal origin-side configuration (see below, Protecting an FTP server with Spectrum)\n\n## Protect an FTP Server with Spectrum\n\nConfiguring Spectrum to protect your FTP server requires creating a set of Spectrum applications that point to your origin and some configuration on the FTP server.\n\n### Protect the Control Port\n\nThe control plane runs on port 21 by default, and there is nothing special that needs to be to protect this part of the FTP server. In the example below, replace 198.51.100.1 with the IP of the origin server.\n\n![Add an application dialog with IP address and port set to 21](https://developers.cloudflare.com/_astro/ftp-control-plane-app.CCDNXmIO_jpBON.webp)\n\nThis configuration proxies incoming connections to the origin. However, if clients issue a PASV command, they will still receive the IP of the actual origin for the data connection. This is not preferred, as this exposes the origin's IP to the client instead of being masked behind Spectrum. Steps to prevent this are documented in sections below.\n\n### Protect Data Ports\n\nMost FTP servers allow configuration of the port range that the server will use to open data connections. It is recommended to specify a port range to prevent accidentally exposing other ports on the server. For each port in the range, create a corresponding Spectrum application that maps to that port.\n\nAdditionally, the FTP server needs to be configured to expose the correct IP when the client issues a PASV command. This IP should match the IP of the Spectrum app.\n\nSome FTP servers also allow dynamic resolving of hostnames. In this case, it is recommended to use the Spectrum app URL instead of the IP.\n\nExample configuration for [vsftpd](https://security.appspot.com/vsftpd.html):\n\n>",
      "language": "unknown"
    },
    {
      "code": "### Spectrum FTPS (ProFTPD) instructions\n\nTo use Spectrum TCP to proxy and protect FTPS, specifically ProFTPD, the following example configuration is recommended:\n\n* **Control Port**: Port 21\n* **Data Ports**: Port ranges 50000-50500\n\nOn the ProFTPD server side use the following example configuration:\n\n* `MasqueradeAddress`: `www.example.com`\n* `AllowForeignAddress`: You can use the option `on` to allow all IPs, but it is recommended to only allow [Cloudflare IP](https://developers.cloudflare.com/fundamentals/concepts/cloudflare-ip-addresses/#allow-cloudflare-ip-addresses).\n* `PassivePorts`: `50000-50500`\n\nFor more details, refer to the [ProFTPD documentation](http://www.proftpd.org/docs/modules/mod_core.html).\n\n## SFTP\n\nUnlike FTP or FTPS, enabling Spectrum for SFTP does not require extra configuration. When setting up a Spectrum application for SSH, select port 22 and TCP.\n\n## Microsoft Windows IIS FTP\n\nRefer to the [Microsoft Windows IIS documentation](https://docs.microsoft.com/en-us/iis/publish/using-the-ftp-service/configuring-ftp-firewall-settings-in-iis-7#step-1-configure-the-passive-port-range-for-the-ftp-service) to configure a static data port range and external IP matching your Spectrum application.\n\nAdditionally, IIS requires that the source IP for both, FTP control and data connections are the same. However, when using Spectrum, this requirement may not be met, as both connections often terminate on different servers with their own unique egress IPs. To ensure proper functionality, also set `dataChannelSecurity/matchClientAddressForPasv = false`. Refer to [Microsoft Windows IIS FTP Official Guide](https://learn.microsoft.com/en-us/iis/configuration/system.applicationhost/sites/site/ftpserver/security/datachannelsecurity) for further details.\n\n</page>\n\n<page>\n---\ntitle: DDoS Protection for Spectrum ¬∑ Cloudflare Spectrum docs\ndescription: Spectrum provides DDoS Protection at layers 3-4 of the OSI model,\n  that is against TCP and UDP based DDoS attacks.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/about/ddos-for-spectrum/\n  md: https://developers.cloudflare.com/spectrum/about/ddos-for-spectrum/index.md\n---\n\nSpectrum provides DDoS Protection at layers 3-4 of the [OSI model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/), that is against TCP and UDP based DDoS attacks.\n\nSpectrum works as a layer 4 reverse proxy, therefore a proper TCP connection must be first established before traffic is proxied to the origin. This moves any impact of SYN or SYN-ACK reflection attacks to the Cloudflare global network. Additionally, by using Spectrum in front of your application, your origin IP is concealed ‚Äî preventing attackers from targeting your origin server directly. It is also recommended that you replace your origin IP address after moving to Cloudflare, and lock it down to only accept traffic from [Cloudflare‚Äôs IP address range](https://www.cloudflare.com/ips/).\n\nRandom or out-of-state TCP packets should not be passed to the origin if a legitimate TCP connection has not yet been established between the client and Cloudflare. Spectrum also [leverages SYN cookie challenges as part of the Linux networking stack](https://blog.cloudflare.com/syn-packet-handling-in-the-wild/) to defend against floods.\n\nFurthermore, if a flood of packets of an unspecified protocol target your application (for example, your Spectrum application is for TCP traffic, and a UDP flood targets your Spectrum application), the packets will be dropped. Similarly, if packets target a port or port range that you did not specify, they will also be dropped.\n\nL3/4 DDoS attacks should be detected and mitigated by the [Network-layer DDoS Attack Protection managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/) that is enabled by default. This ruleset detects and mitigates DDoS attacks by dynamically fingerprinting attacks based on packet header fields.\n\nFor protecting HTTP/S applications against L7 DDoS attacks and to benefit from caching and additional features, onboard your application to Cloudflare‚Äôs Web Application Firewall/Content Delivery Network service, which works in tandem with Cloudflare Spectrum.\n\nRefer to [Cloudflare DDoS Protection](https://developers.cloudflare.com/ddos-protection/) to learn more.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Load Balancing ¬∑ Cloudflare Spectrum docs\ndescription: You can configure Spectrum with Cloudflare Load Balancing to\n  provide TCP healthchecks, failover, and traffic steering, bringing resiliency\n  to your Spectrum applications.\nlastUpdated: 2025-07-18T15:11:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/about/load-balancer/\n  md: https://developers.cloudflare.com/spectrum/about/load-balancer/index.md\n---\n\nYou can configure Spectrum with Cloudflare [Load Balancing](https://developers.cloudflare.com/load-balancing/) to provide TCP healthchecks, failover, and traffic steering, bringing resiliency to your Spectrum applications.\n\nFor an overview of how Cloudflare Load Balancing works refer to [Load Balancing components](https://developers.cloudflare.com/load-balancing/understand-basics/load-balancing-components/). For setup guidance refer to [Add load balancing to Spectrum applications](https://developers.cloudflare.com/load-balancing/additional-options/spectrum/).\n\n## TCP health checks\n\nYou can configure a Cloudflare load balancer to probe any TCP port for an accepted connection, which is in addition to HTTP and HTTPS probing capabilities.\n\nHealth checks are optional within a load balancer. However, without a health check, the load balancer will distribute traffic to all endpoints in the first pool. With the health checks enabled, hosts that have gone into an error state will not receive traffic, maintaining uptime. This allows you to enable intelligent failover within a pool of hosts or amongst multiple pools.\n\nThe example below shows a TCP health check configuration for an application running on port 2408 with a refresh rate every 30 seconds. You can configure TCP health checks through the dashboard or through Cloudflare's API.\n\nTCP health check - Dashboard example\n\n| Field | Value |\n| - | - |\n| Type | TCP |\n| Port | 2408 |\n\nUnder **Advanced health check settings**:\n\n| Field | Value |\n| - | - |\n| Interval | 30 |\n| Timeout | 5 seconds |\n| Retries | 2 |\n\nTCP health check - API example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Load Balancing: Monitors and Pools Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Traffic steering\n\nAll traffic steering policies are available for transport load balancing through Spectrum. Refer to the Load Balancing documentation to learn more about the available [global traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) and [endpoint steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/) options.\n\n## Weights\n\n[Endpoint weights](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/#weights) allow you to have endpoints with different capacity or to split traffic amongst hosts for any other reason.\n\nWeight configured within a load balancer pool will be honored with load balancing through Spectrum.\n\n## Requirements and limitations\n\n* Load Balancing [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/), [failover across pools](https://developers.cloudflare.com/load-balancing/understand-basics/adaptive-routing/#failover-across-pools), and [custom rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/) are not supported by Spectrum.\n\n* UDP health checks are only available with public monitoring. TCP can be used with both public and private monitoring.\n\n- This feature requires an Enterprise plan. If you would like to upgrade, contact your account team.\n\n</page>\n\n<page>\n---\ntitle: Static IP ¬∑ Cloudflare Spectrum docs\ndescription: When you create a Spectrum application, you are assigned an IP.\n  These IPs are normally dynamic, meaning that they will change over time. But,\n  for instance, if you want to set up WAF custom rules for specific IPs, you may\n  want to use static IPs.\nlastUpdated: 2025-10-01T13:13:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/about/static-ip/\n  md: https://developers.cloudflare.com/spectrum/about/static-ip/index.md\n---\n\nWhen you create a Spectrum application, you are assigned an IP. These IPs are normally dynamic, meaning that they will change over time. But, for instance, if you want to set up WAF custom rules for specific IPs, you may want to use static IPs.\n\nA static IP, like a physical street address can tell other computers or servers on the Internet where a specific computer is located or connected. This makes the device easier to find on the network, since the IP will not change.\n\nWith static IPs, Cloudflare commits to never changing the IP address of a client's domain resolved at the Cloudflare global network. For example, `www.example.com` will always resolve and accept traffic sent to `198.51.100.10`. No other customer will be hosted on that IP.\n\nImportantly, the static IP is associated with the DNS name, not with each individual Spectrum application. This means that all Spectrum apps using the same hostname will share the same static IP.\n\n## Use static IPs with Spectrum\n\nAvailability\n\nStatic IP is an Enterprise feature that does not come standard with Spectrum. Contact your account team to request access.\n\nOnce you get your static IP from Cloudflare, you can use it via API, just like [BYOIP](https://developers.cloudflare.com/byoip/). For the moment, there is still no UI available for this feature.\n\nWhen creating a Spectrum application through the API, specify the static IPs that you have been provided. See, for instance, the API example below that creates an application routing traffic through Cloudflare‚Äôs HTTP pipeline.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone Settings Write`",
      "language": "unknown"
    },
    {
      "code": "## Check your static IPs\n\nYou can find your leased static IPs for Spectrum on the dashboard under [**IP addresses** > **Leased IPs**](https://dash.cloudflare.com/?to=/:account/ip-addresses/leased-ips).\n\n</page>\n\n<page>\n---\ntitle: Enable Proxy protocol ¬∑ Cloudflare Spectrum docs\ndescription: Because Cloudflare intercepts packets before forwarding them to\n  your server, if you were to look up the client IP, you would see Cloudflare's\n  IP rather than the true client IP.\nlastUpdated: 2025-10-09T07:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/how-to/enable-proxy-protocol/\n  md: https://developers.cloudflare.com/spectrum/how-to/enable-proxy-protocol/index.md\n---\n\nBecause Cloudflare intercepts packets before forwarding them to your server, if you were to look up the client IP, you would see Cloudflare's IP rather than the true client IP.\n\nSome services you run may require knowledge of the true client IP. In those cases, you can use a proxy protocol for Cloudflare to pass on the client IP to your service. Sending proxy information along is dependent on whether TCP or UDP is used. For TCP, Spectrum supports adding [Proxy Protocol v1](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt), which is the human readable version supported by Amazon ELB and [NGINX](https://docs.nginx.com/nginx/admin-guide/load-balancer/using-proxy-protocol/). For UDP applications, Cloudflare has developed a custom proxy protocol called Simple Proxy Protocol. Be aware that Proxy Protocol is not supported for Spectrum egresses to Magic WAN.\n\nNote\n\nThis feature requires an Enterprise plan. If you would like to upgrade, contact your account team.\n\n## Enable Proxy Protocol v1 for TCP\n\n1. In the Cloudflare dashboard, go to the **Spectrum** page.\n\n   [Go to **Spectrum**](https://dash.cloudflare.com/?to=/:account/:zone/spectrum)\n\n2. Locate the application that will use the PROXY protocol and select **Configure**.\n\n3. From the dropdown, select **PROXY Protocol v1**.\n\nWhen TCP applications are configured to use **PROXY Protocol v1**, Cloudflare will prepend each inbound TCP connection with the PROXY Protocol plain-text header.\n\n### The Proxy Protocol v1 Header\n\nPROXY Protocol prepends every connection with a header reporting the client IP address and port. A PROXY Protocol plain-text header has the format:",
      "language": "unknown"
    },
    {
      "code": "An example PROXY Protocol line for an IPv4 address would look like:",
      "language": "unknown"
    },
    {
      "code": "An example PROXY Protocol line for an IPv6 address would look like:",
      "language": "unknown"
    },
    {
      "code": "## Enable Proxy Protocol v2 for TCP/UDP\n\n1. In the Cloudflare dashboard, go to the **Spectrum** page.\n\n   [Go to **Spectrum**](https://dash.cloudflare.com/?to=/:account/:zone/spectrum)\n\n2. Locate the application that will use the PROXY protocol and select **Configure**.\n\n3. From the dropdown, select **PROXY Protocol v2**.\n\nWhen TCP applications are configured to use **PROXY Protocol v2**, Cloudflare will prepend each inbound TCP connection with the PROXY Protocol binary header.\n\nWhen UDP applications are configured to use **PROXY Protocol v2**, Cloudflare will prepend the first UDP datagram on a stream with a PROXY Protocol binary header.\n\n### The Proxy Protocol v2 Header\n\nPROXY Protocol prepends every connection with a header reporting the client IP address and port.\n\nA PROXY Protocol binary header for a IPv4 incoming address has the format:",
      "language": "unknown"
    },
    {
      "code": "A PROXY Protocol binary header for a IPv6 incoming address has the format:",
      "language": "unknown"
    },
    {
      "code": "## Enable Simple Proxy Protocol for UDP\n\nWhen using Spectrum for UDP, the client source IP and port information can be obtained by using Simple Proxy Protocol, a lightweight protocol developed specifically for UDP.\n\nTo enable it, select **Configure** on a Spectrum application and toggle the setting for Simple Proxy Protocol to **On**.\n\nSimple Proxy Protocol dictates that your origin must also prepend packets meant for the client with the same header, including original client source information. This is done to validate that packets coming in are in fact intended for the client.\n\nFor more information about Simple Proxy Protocol headers, refer to [Simple Proxy Protocol headers](https://developers.cloudflare.com/spectrum/reference/simple-proxy-protocol-header/).\n\n</page>\n\n<page>\n---\ntitle: Analytics ¬∑ Cloudflare Spectrum docs\ndescription: Cloudflare measures the following metrics for every connection.\nlastUpdated: 2025-07-08T13:27:31.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/analytics/\n  md: https://developers.cloudflare.com/spectrum/reference/analytics/index.md\n---\n\nCloudflare measures the following metrics for every connection.\n\n| Metric | Name | Example | Unit |\n| - | - | - | - |\n| count | Count of total events | `1000` | Count |\n| bytesIngress | Sum of ingress bytes | `1000` | Sum |\n| bytesEgress | Sum of egress bytes | `1000` | Sum |\n| durationAvg | Average connection duration | `1.0` | Time in milliseconds |\n| durationMedian | Median connection duration | `1.0` | Time in milliseconds |\n| duration90th | 90th percentile connection duration | `1.0` | Time in milliseconds |\n| duration99th | 99th percentile connection duration | `1.0` | Time in milliseconds |\n\n## Additional dimensions\n\nYou can divide your analytics further by the following dimensions.\n\n| Dimension | Name | Example |\n| - | - | - |\n| event | Connection Event | `connect`, `progress`, `disconnect`, `originError`, `clientFiltered` |\n| appID | Application ID | `40d67c87c6cd4b889a4fd57805225e85` |\n| coloName | Colo Name | `SFO` |\n| ipVersion | IP version used by the client | `4`, `6` |\n\n## Operators for filtering\n\nUse the operators below to filter data.\n\n| Operator | Name | URL Encoded |\n| - | - | - |\n| `==` | Equals | `%3D%3D` |\n| `!=` | Does not equal | `!%3D` |\n| `>` | Greater Than | `%3E` |\n| `<` | Less Than | `%3C` |\n| `>=` | Greater than or equal to | `%3E%3D` |\n| `<=` | Less than or equal to | `%3C%3D` |\n\nCombine filters using `OR` and `AND` boolean logic:\n\n* `AND` takes precedence over `OR` in all expressions.\n\n* The `OR` operator is defined using a comma `,` or the `OR` keyword surrounded by whitespace.\n\n* The `AND` operator is defined using a semicolon `;` or the `AND` keyword surrounded by whitespace.\n\n  Note\n\n  Note that the semicolon is a reserved character in URLs ([RFC 1738](https://www.rfc-editor.org/rfc/rfc1738)) and should be percent-encoded as `%3B`.\n\n## Analytics request structure",
      "language": "unknown"
    },
    {
      "code": "* METRICS is one or more metrics (such as count) to compute\n\n* DIMENSIONS can be used to break down the data by given attributes\n\n* FILTERS used to filter rows by one or more dimensions (see Filters section below)\n\n* SORT is the sort order for the result set; sort fields must be included in METRICS or DIMENSIONS\n\n* TO\\_TS is that end of time interval to query, defaults to current time\n\n* FROM\\_TS is that start of time interval to query, defaults to TO\\_TS - 6 hours\n\n* STEP is used to select time series resolution when using endpoint:\n\n* auto or omitted - selects time step most appropriate to time interval\n\n  * year\n  * quarter\n  * month\n  * week\n  * day\n  * hour\n\n## Analytics query example\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Analytics Read`",
      "language": "unknown"
    },
    {
      "code": "Refer to the [Spectrum API documentation](https://developers.cloudflare.com/api/resources/spectrum/subresources/analytics/subresources/aggregates/subresources/currents/methods/get/) for more examples of API requests.\n\n</page>\n\n<page>\n---\ntitle: Configuration options ¬∑ Cloudflare Spectrum docs\ndescription: Spectrum is a global TCP and UDP proxy running on Cloudflare's edge\n  nodes. It does not terminate the connection in the application-layer sense.\n  However, at Layer 4, Spectrum does terminate the TCP and UDP sockets in both\n  directions. The L4 payloads of TCP segments and UDP datagrams are passed back\n  and forth as-is, without modifications.\nlastUpdated: 2025-10-24T08:58:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/configuration-options/\n  md: https://developers.cloudflare.com/spectrum/reference/configuration-options/index.md\n---\n\nSpectrum is a global TCP and UDP proxy running on Cloudflare's edge nodes. It does not terminate the connection in the application-layer sense. However, at Layer 4, Spectrum does terminate the TCP and UDP sockets in both directions. The L4 payloads of TCP segments and UDP datagrams are passed back and forth as-is, without modifications.\n\nNote\n\nSome of these features require an Enterprise plan. If you would like to upgrade, contact your account team.\n\n## Application type\n\nThe application type determines the protocol by which data travels from the edge to your origin. Select *TCP/UDP* if you want to proxy directly to the origin. If you want to set up products like CDN, Workers, or Bot management, you need to select *HTTP/HTTPS*. In this case, traffic is routed through Cloudflare's pipeline instead of connecting directly to your origin.\n\n## IP addresses\n\nWhen a Spectrum application is created, it is assigned a unique IPv4 and IPv6 address, or you can provision the application to be IPv6 only. The addresses are not static, and they may change over time. The best way to look up the current addresses is by using DNS. The DNS name of the Spectrum application will always return the IPs currently dedicated to the application.\n\nThe addresses are anycasted from all Cloudflare data centers, with the exception of data centers in China.\n\n## SMTP\n\nSpectrum can act as a TCP load balancer in front of an SMTP server but will not act as an intermediary mail server. Instead, Spectrum passes data through to your origin. The client IP shown on mail will be the Cloudflare edge IP. If the mail server requires knowing the true client IP, it should use Proxy Protocol to get the source IP from Cloudflare. Cloudflare recommends enabling Proxy Protocol on applications configured to proxy SMTP.\n\nSMTP servers may perform a series of checks on servers attempting to send messages through it. These checks are intended to filter requests from illegitimate servers.\n\nMessages may be rejected if:\n\n* A reverse DNS lookup on the IP address of the connecting server returns a negative response.\n* The reverse DNS lookup produces a different hostname than what was sent in the SMTP `HELO`/`EHLO` message.\n* The reverse DNS lookup produces a different hostname than what is advertised in your SMTP server's banner.\n* The result of a reverse DNS lookup does not match a corresponding forward DNS lookup.\n\nSpectrum applications do not have reverse DNS entries.\n\nAdditionally, SMTP servers may perform a DNS lookup to find the MX records for a domain. Messages from your server may be rejected if an MX record for your domain is associated with a Spectrum application, as the IP address of server will not match the Spectrum IP address.\n\n## Ports\n\nCloudflare supports all TCP ports.\n\n## Port ranges\n\nSpectrum applications can be configured to proxy traffic on ranges of ports.\n\nFor direct origins:",
      "language": "unknown"
    },
    {
      "code": "For DNS origins:",
      "language": "unknown"
    },
    {
      "code": "The number of ports in an origin port range must match the number of ports specified in the `protocol` field. Connections to a port within a port range at the edge will be proxied to the equivalent port offset in the origin range. For example, in the configurations above, a connection to `range.example.com:1005` would be proxied to port 3005 on the origin.\n\n## IP Access rules\n\nIf IP Access rules are enabled for a Spectrum application, Cloudflare will respect the IP Access rules created under **Security** > **WAF** > **Tools** for that domain. Cloudflare only respects rules created for specific IP addresses, IP blocks, countries, or ASNs for Spectrum applications. Spectrum will also only respect rules created with the actions `allow` or `block`.\n\nNote\n\nNetwork analytics data for Spectrum does not reflect the outcomes of IP Access rules. Instead, to verify whether traffic was allowed or blocked based on these rules, consult the Spectrum event logs.\n\n## Argo Smart Routing\n\nOnce Argo Smart Routing is enabled for your application, traffic will automatically be routed through the fastest and most reliable network path available. Argo Smart Routing is available for TCP and UDP (beta) applications.\n\n## Edge TLS Termination\n\nIf you enable **Edge TLS Termination** for a Spectrum application, Cloudflare will encrypt traffic for the application at the Edge. The Edge TLS Termination toggle applies only to TCP applications.\n\nSpectrum offers three modes of TLS termination: 'Flexible', 'Full', and 'Full (Strict)'.\n\n'Flexible' enables termination of the client connection at the edge, but does not enable TLS from Cloudflare to your origin. Traffic will be sent over an encrypted connection from the client to Cloudflare, but not from Cloudflare to the origin.\n\n'Full' specifies that traffic from Cloudflare to the origin will also be encrypted but without certificate validation. When set to 'Full (Strict)', traffic from Cloudflare to the origin will also be encrypted with strict validation of the origin certificate.\n\nTLS versions supported by Spectrum include TLS 1.1, TLS 1.2, and TLS 1.3.\n\nYou can manage this through the Spectrum app at the Cloudflare dashboard, or using the [Spectrum API endpoint](https://developers.cloudflare.com/api/resources/spectrum/subresources/apps/methods/update/).\n\nNote\n\nIf you have the TLS termination setting configured to **off**, this means that Spectrum will then proxy connections to the origin without decrypting. The certificate that is presented in this case will be the certificate installed at your origin server, instead of the Edge Certificate from Cloudflare.\n\nWarning\n\nIf you need to control TLS settings, like the minimum TLS version or cipher suites, you need to use an HTTPS application. For TCP applications, default settings will apply. The minimum TLS version will be 1.1 and the cipher suites are:\n\n| OpenSSL Name |\n| - |\n| AEAD-CHACHA20-POLY1305-SHA256 |\n| AEAD-AES128-GCM-SHA256 |\n| AEAD-AES256-GCM-SHA384 |\n| ECDHE-RSA-CHACHA20-POLY1305 |\n| ECDHE-ECDSA-CHACHA20-POLY1305 |\n| ECDHE-RSA-AES128-GCM-SHA256 |\n| ECDHE-ECDSA-AES128-GCM-SHA256 |\n| ECDHE-RSA-AES256-GCM-SHA384 |\n| ECDHE-ECDSA-AES256-GCM-SHA384 |\n| ECDHE-RSA-AES128-SHA256 |\n| ECDHE-RSA-AES128-SHA |\n| CDHE-ECDSA-AES128-SHA256 |\n| ECDHE-ECDSA-AES128-SHA |\n| ECDHE-RSA-AES256-SHA |\n| ECDHE-ECDSA-AES256-SHA |\n| AES128-GCM-SHA256 |\n| AES256-GCM-SHA384 |\n| AES128-SHA256 |\n| AES128-SHA |\n| AES256-SHA |\n| ECDHE-RSA-DES-CBC3-SHA |\n| DES-CBC3-SHA |\n\n## Origin TLS Termination\n\nBelow are the cipher suites Cloudflare presents to origins during an SSL/TLS handshake. For cipher suites supported at our edge or presented to browsers and other user agents, refer to [Cipher suites](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/cipher-suites/).\n\nThe cipher suites below are ordered based on how they appear in the ClientHello, communicating our preference to the origin. Customers do not have the ability to modify the ciphers used by Spectrum.\n\n## Supported cipher suites by protocol\n\n| OpenSSL Name | TLS 1.1 | TLS 1.2 | TLS 1.3 |\n| - | - | - | - |\n| AEAD-AES128-GCM-SHA256[1](#user-content-fn-1) | ‚ùå | ‚ùå | ‚úÖ |\n| AEAD-AES256-GCM-SHA384[1](#user-content-fn-1) | ‚ùå | ‚ùå | ‚úÖ |\n| AEAD-CHACHA20-POLY1305-SHA256[1](#user-content-fn-1) | ‚ùå | ‚ùå | ‚úÖ |\n| ECDHE-ECDSA-AES128-GCM-SHA256 | ‚ùå | ‚úÖ | ‚ùå |\n| ECDHE-RSA-AES128-GCM-SHA256 | ‚ùå | ‚úÖ | ‚ùå |\n| ECDHE-RSA-AES128-SHA | ‚úÖ | ‚úÖ | ‚ùå |\n| AES128-GCM-SHA256 | ‚ùå | ‚úÖ | ‚ùå |\n| AES128-SHA | ‚úÖ | ‚úÖ | ‚ùå |\n| AES256-SHA | ‚úÖ | ‚úÖ | ‚ùå |\n\n## Footnotes\n\n1. Although TLS 1.3 uses the same cipher suite space as previous versions of TLS, TLS 1.3 cipher suites are defined differently, only specifying the symmetric ciphers, and cannot be used for TLS 1.2. Similarly, TLS 1.2 and lower cipher suites cannot be used with TLS 1.3 ([RFC 8446](https://www.rfc-editor.org/rfc/rfc8446.html)). BoringSSL also hard-codes cipher preferences in this order for TLS 1.3. Refer to [TLS 1.3 cipher suites](https://developers.cloudflare.com/ssl/origin-configuration/cipher-suites/#tls-13-cipher-suites) for details. [‚Ü©](#user-content-fnref-1) [‚Ü©2](#user-content-fnref-1-2) [‚Ü©3](#user-content-fnref-1-3)\n\n</page>\n\n<page>\n---\ntitle: Why Spectrum-enabled hostnames might appear in Layer 7 Analytics ¬∑\n  Cloudflare Spectrum docs\ndescription: >-\n  Even when you have Spectrum enabled to handle Layer 4 traffic (for example,\n  TCP/UDP connections), you may still notice traffic in your Layer 7 (L7)\n  analytics dashboard. This is due to the way Cloudflare's Layer 7 CDN\n\n  and Spectrum handle customer identity differently.\nlastUpdated: 2024-10-18T13:20:04.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/layer-7-analytics/\n  md: https://developers.cloudflare.com/spectrum/reference/layer-7-analytics/index.md\n---\n\nEven when you have Spectrum enabled to handle Layer 4 traffic (for example, TCP/UDP connections), you may still notice traffic in your Layer 7 (L7) analytics dashboard. This is due to the way Cloudflare's Layer 7 CDN and Spectrum handle customer identity differently.\n\n## How Spectrum identifies a user (Layer 4)\n\nIn Spectrum, the identity of the customer hostname is based on the Cloudflare IP address that the client uses to connect to the edge. Here is the typical process:\n\n1. Spectrum sets up a DNS hostname in the customer's zone that points to its Spectrum edge IP, and links this edge IP and port to the customer's configuration.\n2. The client performs a DNS lookup on the Spectrum hostname, retrieves the Spectrum edge IP, and connects to that IP and port.\n3. Spectrum uses this edge IP and port to match the connection to the customer's configuration, identifying the customer.\n\nThis process focuses on Layer 4 associating a hostname and customer configuration around IP addresses and ports.\n\n## How the CDN identifies a user (Layer 7)\n\n1. The customer sets up a DNS hostname in their zone that directs traffic to their origin server.\n2. The client performs a DNS lookup on the CDN hostname, and the DNS server responds with a CDN edge IP. In contrast to Spectrum, the CDN edge IP is primarily used for traffic management rather than customer identity, as multiple customers can share the same CDN edge IP.\n\nFor the CDN, identifying the customer relies heavily on resolving hostnames during the TLS handshake (SNI) and the HTTP request (`Host` header). Notably, the CDN is designed to accept any hostname that matches the customer's zone (for example, `*.example.com`), even if there is no specific Layer 7 DNS match. This means that even Spectrum or Load Balancer hostnames will be accepted as valid under `*.example.com`.\n\n## The overlap: Layer 7 traffic being proxied through Spectrum\n\nBecause the CDN is designed to accept any hostname under your zone (for example, `spectrum.example.com`), HTTP traffic that should first be proxied by Spectrum, or even HTTP traffic meant for a Layer-4-only Spectrum app, may sometimes be processed directly by the Layer 7 CDN system. The process is the following:\n\n1. The client connects to a Layer 7 CDN edge IP while using the hostname of a Spectrum application (for example, `spectrum.example.com`) during both the TLS handshake and the HTTP request. Essentially, this means the client is attempting to access `spectrum.example.com` on an incorrect IP.\n2. The CDN accepts this hostname as part of the customer zone during both the TLS and HTTP phases because it is designed to recognize any hostname under `*.example.com`. As a result, the request passes through the CDN under the zone's identity.\n3. However, when the CDN attempts to connect to the origin server, it performs an internal DNS lookup of the HTTP hostname, which resolves to the Spectrum IP (from `spectrum.example.com` to the Spectrum edge IP). Consequently, the CDN establishes an origin connection to Spectrum, loading its configuration and forwarding the request to the Spectrum origin.\n\nThis means traffic for this hostname undergoes the standard Layer 7 CDN products, including Analytics and logs.\n\n## Blocking unwanted L7 traffic\n\nIf you want to prevent traffic for Layer-4-only Spectrum hostnames from being proxied through Layer 7 to your origin (including unwanted scans or requests), we recommend implementing a Layer 7 WAF (Web Application Firewall) rule. This rule can block traffic directed at specific hostnames or ports, ensuring that only legitimate traffic reaches your Spectrum service.\n\nFor example, you can create a WAF rule to block requests to `spectrum.example.com` unless they originate from a Spectrum IP or a customer's Spectrum BYOIP. The traffic will still be logged in Layer 7 Analytics, including WAF Security Events, but this prevents it from arriving at the wrong address and looping through the CDN a second time.\n\n</page>\n\n<page>\n---\ntitle: Limitations ¬∑ Cloudflare Spectrum docs\ndescription: The following limitations apply to different protocols supported by Spectrum.\nlastUpdated: 2025-12-17T15:37:29.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/limitations/\n  md: https://developers.cloudflare.com/spectrum/reference/limitations/index.md\n---\n\nThe following limitations apply to different protocols supported by Spectrum.\n\n## HTTPS\n\nAt the moment, HTTPS applications do not support HTTP/3.\n\n## UDP\n\nAt the moment, Cloudflare does not support packet fragmentation for UDP packets. If packets are fragmented, they will be dropped at Cloudflare‚Äôs edge. Additionally, UDP Spectrum applications are not supported on Magic Transit, BYOIP, Spectrum, and Bindings.\n\n## Minecraft\n\nMinecraft Java Edition is supported but Minecraft Bedrock Edition is not supported.\n\n## Universal SSL\n\n[Universal SSL](https://developers.cloudflare.com/ssl/edge-certificates/universal-ssl/) is not compatible with Cloudflare Spectrum. Use either an [advanced certificate](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/) or a [custom certificate](https://developers.cloudflare.com/ssl/edge-certificates/custom-certificates/) instead.\n\n## Private Network Load Balancing\n\nWhen using [Spectrum](https://developers.cloudflare.com/load-balancing/private-network/#on-ramps) as an on-ramp and [Magic WAN](https://developers.cloudflare.com/load-balancing/private-network/#magic-wan) as an off-ramp the [proxy protocol](https://developers.cloudflare.com/spectrum/how-to/enable-proxy-protocol/) setting in Spectrum is not supported.\n\n## Cloudflare Tunnel\n\nIntegrating Spectrum with [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) is only supported for **HTTP/HTTPS** applications. This is because Spectrum must upstream the request through the [Layer 7 CDN products](https://developers.cloudflare.com/spectrum/reference/layer-7-analytics/#the-overlap-layer-7-traffic-being-proxied-through-spectrum) to reach the Tunnel service.\n\nTo correctly route traffic from Spectrum through a Cloudflare Tunnel, you must:\n\n1. Configure your Spectrum application with the type set to **HTTP** or **HTTPS**.\n2. Point the Spectrum application's origin to a hostname that is already [routing traffic](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/) through your Cloudflare Tunnel (for example, via a [DNS record](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/dns/) or [Cloudflare Load Balancer](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/)).\n\nUsing a Spectrum application of any other type (for example, TCP) with a Cloudflare Tunnel origin is not supported. Pointing a Spectrum application's origin directly to your Tunnel's subdomain (`<UUID>.cfargotunnel.com`) is also not a valid configuration and will not work.\n\n## Listen on ports configuration\n\nBy default, Spectrum is configured to listen on all ports, which can raise concerns for security auditors. However, it is important to note that Spectrum will only proxy connections from edge ports that are specifically configured within Cloudflare.\n\nWhen a TCP handshake is initiated to any port for a Spectrum IP, the handshake will always be completed. If there is a Spectrum application configured for the port, the connection will be proxied to origin. If no application is configured, the connection is immediately terminated and no origin connection will be opened.\n\nSpectrum will only ever proxy traffic to an origin if there is a Spectrum application configured for that port.\n\n</page>\n\n<page>\n---\ntitle: Event logs ¬∑ Cloudflare Spectrum docs\ndescription: Spectrum logs the entire lifecycle of every client that connects\n  through it. These event logs are available through Logpush as a separate\n  category (dataset type spectrum_events); they are not part of HTTP log events.\nlastUpdated: 2025-07-25T16:42:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/logs/\n  md: https://developers.cloudflare.com/spectrum/reference/logs/index.md\n---\n\nSpectrum logs the entire lifecycle of every client that connects through it. These event logs are available through Logpush as a separate category (dataset type `spectrum_events`); they are not part of HTTP log events.\n\nFor each connection, Spectrum logs a connect event and either a disconnect or error event. Details on status codes can be found below.\n\n## Configure Logpush\n\nSpectrum [log events](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/) can be configured through the dashboard or API, depending on your preferred [destination](https://developers.cloudflare.com/logs/logpush/logpush-job/enable-destinations/).\n\n## Status Codes\n\n| Code | Description |\n| - | - |\n| 0 | Connection was opened successfully. |\n| 200 | Normal connection closure. |\n| 400 | The TLS client hello sent during the client/edge TLS handshake contained an invalid SNI. |\n| 403 | Connection closed because the client IP matched a firewall rule with deny action. |\n| 443 | The client TLS handshake failed. |\n| 444 | The origin closed the connection by sending a reset (RST) packet. Not all data may have been sent. |\n| 445 | A timeout event (ETIMEDOUT) occurred on an established connection to origin. |\n| 446 | Origin keepalive expired (EHOSTUNREACH). |\n| 447 | Error while reading from or writing to an established origin connection (ECONNREFUSED). |\n| 448 | Origin connection closed due to a broken pipe (EPIPE). |\n| 490 | Client TLS error on established connection. |\n| 495 | Client connection received an error (ECONNREFUSED). |\n| 496 | Client host is unreachable (EHOSTUNREACH). |\n| 497 | A timeout event (ETIMEDOUT) occurred on an established connection to client. |\n| 498 | Established client connection closed due to broken pipe (EPIPE). |\n| 499 | The client closed the connection by sending a reset (RST) packet. Not all data may have been sent. |\n| 500 | Internal Cloudflare error. |\n| 503 | Error related to performing the TLS handshake with keyless SSL. |\n| 520 | Unknown origin connection error. |\n| 521 | Origin refused to open the connection (ECONNREFUSED). |\n| 522 | Opening a connection to origin failed: ETIMEDOUT |\n| 523 | Opening a connection to origin failed: ENETUNREACH |\n| 524 | Opening a connection to origin failed due to an internal system error. |\n| 530 | Internal error while resolving origin to an IP. |\n| 531 | Could not resolve origin to an IP. |\n| 532 | The origin connection was not opened because the origin IP is blocked. |\n| 533 | Internal error while resolving origin to an IP. |\n| 540 | The client/edge TLS handshake failed due to an invalid configuration. |\n| 999 | Unknown connection error. |\n\n</page>\n\n<page>\n---\ntitle: Settings by plan ¬∑ Cloudflare Spectrum docs\ndescription: Certain fields in Spectrum request and response bodies require an\n  Enterprise plan. To upgrade your plan, contact your account team.\nlastUpdated: 2025-08-18T14:27:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/settings-by-plan/\n  md: https://developers.cloudflare.com/spectrum/reference/settings-by-plan/index.md\n---\n\nCertain fields in Spectrum request and response bodies require an Enterprise plan. To upgrade your plan, contact your account team.\n\nSpectrum properties requiring an Enterprise plan:\n\n| Name | Type | Description | Example |\n| - | - | - | - |\n| `origin_dns` | object | Method and parameters used to discover the origin server address via DNS. Valid record types are `A`, `AAAA`, `SRV` and empty (both `A` and `AAA`). A request must contain either an `origin_dns` parameter or an `origin_direct` parameter. When both are specified the service returns an `HTTP 400 Bad Request`. | `origin_dns: {type: A, name: mqtt.example.com, ttl: 1200}` |\n| `origin_port` | integer | The destination port at the origin. | `22` |\n| `proxy_protocol` | string | Enables Proxy Protocol to the origin. Spectrum supports `v1`, `v2`, and `simple` proxy protocols. Refer to [Proxy Protocol](https://developers.cloudflare.com/spectrum/how-to/enable-proxy-protocol/) for more details. | `off` |\n| `ip_firewall` | boolean | Enables IP Access rules for this application. | `true` |\n| `tls` | string | Type of TLS termination for the application. Options are `off` (default, also known as Passthrough), `flexible`, `full`, and `strict`. Refer to [Configuration Options](https://developers.cloudflare.com/spectrum/reference/configuration-options/) for descriptions of each. | `full` |\n| `argo_smart_routing` | boolean | Enables Argo Smart Routing for the application. Note that it is only available for TCP applications with traffic\\_type set to `direct`. | `true` |\n\nReview the [Spectrum API documentation](https://developers.cloudflare.com/api/resources/spectrum/subresources/apps/methods/list/) for example API requests.\n\n</page>\n\n<page>\n---\ntitle: Simple Proxy Protocol Header ¬∑ Cloudflare Spectrum docs\ndescription: The client source IP and port is encoded in a fixed-length,\n  38-octet long header and prepended to the payload of each proxied UDP datagram\n  in the format described below.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/spectrum/reference/simple-proxy-protocol-header/\n  md: https://developers.cloudflare.com/spectrum/reference/simple-proxy-protocol-header/index.md\n---\n\nThe client source IP and port is encoded in a fixed-length, 38-octet long header and prepended to the payload of each proxied UDP datagram in the format described below.",
      "language": "unknown"
    },
    {
      "code": "The contents of the header are below.\n\n## Magic Number\n\n16-bit fixed value set to 0x56EC for SPP. This field should be used to identify the SPP protocol and its SPP 38-byte header.\n\n## Client Address\n\n128-bit address of the originator of the proxied UDP datagram, that is, the client. An IPv6 address if the client used IPv6 addressing, or an IPv4-mapped IPv6 address (refer to [RFC 4291](https://tools.ietf.org/html/rfc4291)) in case of an IPv4 client.\n\n## Proxy address\n\n128-bit address of the recipient of the proxied UDP datagram, that is the proxy. Contents should be interpreted in the same way as the Client Address.\n\n## Client port\n\n16-bit source port number of the proxied UDP datagram. In other words, the UDP port number from which the client sent the datagram.\n\n## Proxy port\n\n16-bit destination port number of the proxied UDP datagram. In other words, the UDP port number on which the proxy received the datagram.\n\n## Payload\n\nData following the header carried by the datagram. Magic number, addresses, and port numbers are encoded in network byte order.\n\nA corresponding C structure describing the header is:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Observatory dashboard ¬∑ Cloudflare Speed docs\ndescription: The Observatory overview dashboard provides a single view of your\n  zone's performance over the past seven days. It combines synthetic monitoring,\n  real user data, and Cloudflare's analysis to help you quickly identify\n  performance bottlenecks and receive actionable recommendations.\nlastUpdated: 2025-09-26T10:03:24.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/speed/observatory/dashboard/\n  md: https://developers.cloudflare.com/speed/observatory/dashboard/index.md\n---\n\nThe Observatory overview dashboard provides a single view of your zone's performance over the past seven days. It combines synthetic monitoring, real user data, and Cloudflare's analysis to help you quickly identify performance bottlenecks and receive actionable recommendations.\n\n## Suggestions\n\nThe **Suggestions** panel highlights tailored optimizations you can make to improve performance. Examples include:\n\n* Reduce Largest Contentful Paint (LCP) with Polish.\n* Reduce Time to First Byte (TTFB) with Argo Smart Routing.\n\nThese recommendations will vary based on your site's observed performance.\n\nSelecting a suggestion expands it to show more detail:\n\n* **Why you're seeing this**: Explains the performance issue detected.\n* **What you can do**: Lists recommended actions you can take.\n\n## Core Web Vitals\n\nThe dashboard integrates **Core Web Vitals**, showing values at the 75th percentile (p75). These metrics reflect real user experiences:\n\n* **Largest Contentful Paint (LCP)**: How quickly the main content of a page becomes visible.\n* **Interaction to Next Paint (INP)**: How responsive the site is to user interactions.\n* **Cumulative Layout Shift (CLS)**: How visually stable the page layout is.\n\nIf insufficient real user data is available, metrics may show as **No data**.\n\n## Network Performance\n\nThe **Network Performance** section shows timing data that can help pinpoint where latency occurs.\n\n* **Time to First Byte (TTFB)**: Measures the time between the initial request and the first byte of the response.\n\n* **Time to Last Byte (TTLB) Breakdown**: Provides a breakdown of response phases:\n\n  * DNS resolution time\n  * TCP connection time\n  * Request processing time at the server\n  * Response transfer time\n\nThis breakdown helps identify whether delays are caused by DNS, connection setup, server processing, or response delivery.\n\n## HTTP Traffic\n\nThe **HTTP Traffic** section shows how traffic is handled between Cloudflare and your origin server:\n\n* **Served by**: Percentage of requests served from Cloudflare versus from your origin.\n* **4xx errors**: Client errors, broken down by Cloudflare edge versus origin.\n* **5xx errors**: Server errors, broken down by Cloudflare edge versus origin.\n\nThis view helps distinguish between Cloudflare-side issues and origin-side issues.\n\n## Synthetic Monitoring\n\nThe **Synthetic Monitoring** table shows automated test results for your site. Each row includes:\n\n* **URL tested**\n* **Last test run**\n* **Repeats** (if scheduled multiple times)\n* **Score** (Pass/Fail)\n\nSynthetic monitoring allows you to proactively test site availability and performance under consistent conditions, complementing real user monitoring (RUM).\n\n## Using the dashboard\n\nUse the Speed Overview dashboard to:\n\n* Review **Suggestions** for actionable optimizations.\n* Track **Core Web Vitals** to ensure a good user experience.\n* Analyze **Network Performance** to identify latency bottlenecks.\n* Diagnose errors with **HTTP Traffic** insights.\n* Confirm site reliability using **Synthetic Monitoring** results.\n\n</page>\n\n<page>\n---\ntitle: FAQ ¬∑ Cloudflare Speed docs\ndescription: Find answers to common questions about Cloudflare Observatory.\nlastUpdated: 2025-09-26T10:03:24.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/speed/observatory/faq/\n  md: https://developers.cloudflare.com/speed/observatory/faq/index.md\n---\n\nBelow you will find answers to our most commonly asked questions. If you cannot find the answer you are looking for, refer to the [community page](https://community.cloudflare.com/c/website-application-performance/88) to explore more resources.\n\n## How long does it take for a test to load?\n\nIt can vary from about 25 seconds to over a minute. If you leave your speed tab open, your test is still going to run. You can leave and return and still see your test results.\n\n## Are query parameters or anchors supported in tested URLs?\n\nNo. At the moment, any query parameter or anchor appended to the tested URL are dropped.\n\nFor example, using the `https://example.com/blog/?utm_medium=social#title` URL, the Observatory will discard the `?utm_medium=social` query parameter as well as the `#title` anchor. The tested URL will actually be `https://example.com/blog/`.\n\n## I get a `403` response when rerunning the website analysis?\n\nCheck your WAF custom rules to make sure that you are not blocking traffic from Observatory to request your site.\n\nNote\n\nFor **IPv6** Cloudflare Observatory tests originate from **ASN 15169** or **ASN 132892** and are generated with the following user agents:\n\n* Mozilla/5.0 (Linux; Android 11; Moto G Power (2022)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36\n* Mozilla/5.0 (Macintosh; Intel Mac OS X 10\\_15\\_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36\n\nFor **IPv4** Cloudflare Observatory tests originate from **ASN 396982** and are generated with the following user agents:\n\n* Mozilla/5.0 (Linux; Android 11; moto g power (2022)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36 CloudflareObservatory/1.0\n* Mozilla/5.0 (Macintosh; Intel Mac OS X 10\\_15\\_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 CloudflareObservatory/1.0\n\n## Why might users not see any Real User Monitoring (RUM) data on the map in Observatory?\n\nThere are several reasons why users might not see any Real User Monitoring (RUM) data on the map in Observatory:\n\n* Time Required for RUM Data Population: Populating the RUM database takes some time. It means that newly enabled RUM might not have immediate data available, and users may need to wait for some time before RUM data starts appearing on the map.\n\n* Progressive Sampling: RUM data is progressively sampled, which means that not all requests are captured. Some requests may pass through the sampling period, resulting in incomplete or missing data points on the map.\n\n* Adblockers Impact on RUM Data: RUM data collection relies on third-party JavaScript executing on the real-user browser. However, adblockers or similar browser extensions can block this script, preventing the collection of RUM data, and thereby affecting the completeness of the analytics presented on the map.\n\n* The RUM feature needs to be enabled and configured in your environment. If it has not been turned on, or if configuration is incomplete, RUM data may not appear.\n\n## What are the potential reasons for discrepancies between RUM analytics and traffic analytics in Observatory?\n\nDifferences between Real User Monitoring (RUM) analytics and traffic analytics in Observatory can occur due to the following reasons:\n\n* Adblockers Impact on RUM Data: Similar to the previous point, RUM data collection can be thwarted by adblockers, leading to missed data. Since traffic analytics typically rely on server-side data collection, they may not be as affected by adblockers as RUM.\n\n* Progressive Sampling in RUM: RUM data is collected through progressive sampling, which means that not all user requests are captured. This sampling method could result in slight variations in analytics when compared to traditional traffic analytics that record every server request.\n\n## How do I disable Real User Monitoring (RUM) if it has been enabled from the Observatory test result page?\n\nEnabling RUM creates a Web Analytics configuration entry for the hostname at the account level.\n\nIf you wish to disable RUM, follow these steps:\n\n1. In the Cloudflare dashboard, go to the **Web Analytics** page.\n\n   [Go to **Web analytics**](https://dash.cloudflare.com/?to=/:account/web-analytics)\n\n2. Select **Manage Site** for the hostname for which you wish to disable RUM.\n\n3. Select **Delete**.\n\n</page>\n\n<page>\n---\ntitle: RUM beacon for Web Analytics ¬∑ Cloudflare Speed docs\ndescription: The RUM beacon is a JavaScript snippet that runs when a Cloudflare\n  customer enables RUM through Web Analytics or Observatory. This script runs in\n  users' browsers when they visit the customer's site, and its purpose is to\n  collect performance-related data, for example, page load time, and send it to\n  Cloudflare's systems for processing. This data is then presented to the\n  customer, providing valuable insights into the website's performance and\n  usage.\nlastUpdated: 2025-11-20T11:40:48.000Z\nchatbotDeprioritize: false\ntags: Privacy\nsource_url:\n  html: https://developers.cloudflare.com/speed/observatory/rum-beacon/\n  md: https://developers.cloudflare.com/speed/observatory/rum-beacon/index.md\n---\n\nThe RUM beacon is a JavaScript snippet that runs when a Cloudflare customer enables RUM through [Web Analytics](https://developers.cloudflare.com/web-analytics/) or [Observatory](https://developers.cloudflare.com/speed/observatory/). This script runs in users' browsers when they visit the customer's site, and its purpose is to collect performance-related data, for example, page load time, and send it to Cloudflare's systems for processing. This [data](https://developers.cloudflare.com/web-analytics/data-metrics/) is then presented to the customer, providing valuable insights into the website's performance and usage.\n\nThe RUM beacon script can be enabled into a webpage in two ways:\n\n* **One-click setup**: For [sites proxied through Cloudflare](https://developers.cloudflare.com/web-analytics/get-started/#sites-proxied-through-cloudflare) that have Web Analytics enabled, the snippet can be *automatically* injected into pages as the HTML response passes through Cloudflare's edge network to the browser by simply enabling the automatic injection option.\n\n* **Manual setup**: Websites can *manually* add the script by embedding a code snippet into their pages. Refer to the [Sites not proxied through Cloudflare section](https://developers.cloudflare.com/web-analytics/get-started/#sites-not-proxied-through-cloudflare), for more information about how to manually insert the snippet into your HTML.\n\n## Data collection\n\nOnce downloaded to the browser, the RUM beacon script runs as JavaScript in the browser. It collects performance data from browser [APIs](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API) and sends this data to Cloudflare for processing.\n\nThe data collected from the browser is summarized in the table below:\n\n| Field | Example | Description | How it is collected |\n| - | - | - | - |\n| `pageloadId` | 0c698922-8d60-40bf-85ac-7982b5f8034d | The unique ID for the page. | Generated in the browser code. |\n| `referrer` | <https://cfrumtest.com/> | The referring page URL. | If it is a multi-page application (MPA), then it is generated from [document.referrer](https://developer.mozilla.org/en-US/docs/Web/API/Document/referrer). If it is a single-page application (SPA), then it is generated from a local in-memory variable in the beacon code which stores previous URLs. |\n| `startTime` | 1693488419352 | Baseline for performance-related timestamps. | [performance.timeOrigin](https://developer.mozilla.org/en-US/docs/Web/API/Performance/timeOrigin) |\n| `memory` | `{ totalJSHeapSize: 39973671, usedJSHeapSize: 39127515, jsHeapSizeLimit: 4294705152 }` | Measures memory heap size. | [performance.memory](https://developer.mozilla.org/en-US/docs/Web/API/Performance/memory) (deprecated) |\n| `timings` | Object of [PerformanceTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming) | Timing data. | [performance.timing](https://developer.mozilla.org/en-US/docs/Web/API/Performance/timing) (deprecated, fallback when `timingV2` is unavailable) |\n| `timingV2` | Array of [PerformanceNavigationTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming) | Navigation timing data. | [performance.getEntriesByType(\"navigation\")](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByType) |\n| `resources` | Array of [PerformanceResourceTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming) | Resource timing data. | [performance.getEntriesByType(\"resource\")](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming) |\n| `firstPaint` | Array of [PerformancePaintTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformancePaintTiming) | Paint timing data. | [performance.getEntriesByType(\"paint\")](https://developer.mozilla.org/en-US/docs/Web/API/PerformancePaintTiming) |\n| `firstContentfulPaint` | 209 | First Contentful Paint metric. | [web-vitals module](https://www.npmjs.com/package/web-vitals) [1](#user-content-fn-1) |\n| `FCP` | 209 | First Contentful Paint metric. | [web-vitals module](https://www.npmjs.com/package/web-vitals) [1](#user-content-fn-1) |\n| `LCP` | 209 | Largest Contentful Paint metric. | [web-vitals module](https://www.npmjs.com/package/web-vitals) [1](#user-content-fn-1) |\n| `CLS` | 0.001 | Cumulative Layout Shift metric. | [web-vitals module](https://www.npmjs.com/package/web-vitals) [1](#user-content-fn-1) |\n| | | | |\n| `TTFB` | 0.03 | Time to First Byte metric. | [web-vitals module](https://www.npmjs.com/package/web-vitals) [1](#user-content-fn-1) |\n| `INP` | 1.23 | Interaction to Next Paint metric. | [web-vitals module](https://www.npmjs.com/package/web-vitals) [1](#user-content-fn-1) |\n| `landingPath` | <https://cfrumtest.com/> | The landing page URL. | [performance.getEntriesByType(\"navigation\")](https://developer.mozilla.org/en-US/docs/Web/API/Performance/getEntriesByType) |\n\n## Data processing\n\nRUM data is generally processed at the nearest Cloudflare data center based on how the incoming request is routed. This is determined by a number of factors including [Anycast](https://www.cloudflare.com/en-gb/learning/cdn/glossary/anycast-network/) and [Unimog](https://blog.cloudflare.com/unimog-cloudflares-edge-load-balancer/). Since RUM data does not use location services, it may be processed in a different country or region from where it originated. Although the RUM service receives the client/source IP address from the beacon as part of normal HTTP request handling process, it discards the IP address at the nearest Cloudflare data center and does not store it in core databases or logs.\n\n## Privacy information\n\nThe RUM beacon script does not store any data in the browser or access any storage data, such as [cookies](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie), [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage), [sessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage), IP address, or [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB). The data we collect is performance data from the browser performance [APIs](https://developer.mozilla.org/en-US/docs/Web/API/Performance_API). This performance data is ephemeral and only relates to the current webpage that is being viewed. If the user refreshes their browser, all the previous performance data is gone and new performance data starts being available. This data is not stored or accessed from anywhere on the device, it is only available as in-memory data.\n\n## RUM excluding EEA/EU\n\nCustomers have the option to enable RUM globally or to limit its application to exclude users connecting to Cloudflare data centers in the EEA/EU. If the latter option is selected, the RUM beacon does not process performance data for users connecting to a Cloudflare data center located in the following countries (ISO codes): AT, BE, BG, HR, CY, CZ, DK, EE, FI, FR, DE, GR, HU, IS, IE, IT, LV, LI, LT, LU, MT, NL, NO, PL, PT, RO, SK, SI, ES, SE, CH, GB.\n\nFree customers have RUM enabled automatically, with EU traffic excluded, and can switch it off if they prefer. Customers on other plans may enable RUM as needed.\n\n![Enable RUM in the dashboard.](https://developers.cloudflare.com/_astro/enable-rum.BsPZ4NVP_Z4xPEn.webp)\n\n## Footnotes\n\n1. The web-vitals module is an open-source module written by Google. It does not access any type of storage on the browser. [‚Ü©](#user-content-fnref-1) [‚Ü©2](#user-content-fnref-1-2) [‚Ü©3](#user-content-fnref-1-3) [‚Ü©4](#user-content-fnref-1-4) [‚Ü©5](#user-content-fnref-1-5) [‚Ü©6](#user-content-fnref-1-6)\n\n</page>\n\n<page>\n---\ntitle: Run test ¬∑ Cloudflare Speed docs\ndescription: Learn how to use Cloudflare's Observatory to assess the performance\n  of your website.\nlastUpdated: 2025-10-09T17:14:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/speed/observatory/run-speed-test/\n  md: https://developers.cloudflare.com/speed/observatory/run-speed-test/index.md\n---\n\n## Run Synthetic test\n\n1. In the Cloudflare dashboard, go to the **Synthetic Monitoring** page.\n\n   [Go to **Synthetic monitoring**](https://dash.cloudflare.com/?to=/:account/:zone/speed/test)\n\n2. Enter the URL you want to test. The URL must belong to the zone you are testing from.\n\n3. Select the test type you want to use: **Browser** or **Network tests**.\n\n4. Select the **Region** the automated browser will use.\n\n5. Depending on your plan you can select to run the test **once**, **daily** or **weekly**. Refer to the [Quotas](https://developers.cloudflare.com/speed/observatory/run-speed-test/#quotas) section for information on the test frequency available for your plan. Note that these limits may change over time.\n\n6. After the test finishes running, you will get a Lighthouse score and you will have access to the list of the tests run. The test result page will give you details regarding the performance of your website, both for the desktop and mobile versions. Refer to [Understand test results](https://developers.cloudflare.com/speed/observatory/test-results/) for more information.\n\nNote\n\nFor **IPv6** Cloudflare Observatory tests originate from **ASN 15169** or **ASN 132892** and are generated with the following user agents:\n\n* Mozilla/5.0 (Linux; Android 11; Moto G Power (2022)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36\n* Mozilla/5.0 (Macintosh; Intel Mac OS X 10\\_15\\_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36\n\nFor **IPv4** Cloudflare Observatory tests originate from **ASN 396982** and are generated with the following user agents:\n\n* Mozilla/5.0 (Linux; Android 11; moto g power (2022)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36 CloudflareObservatory/1.0\n* Mozilla/5.0 (Macintosh; Intel Mac OS X 10\\_15\\_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 CloudflareObservatory/1.0\n\n### Recommendations\n\nObservatory shows you a **Recommendations** tab, depending on the results from testing your website. The **Recommendations** section shows you the opportunities to improve your website that were identified based on the Lighthouse audits and recommends Cloudflare features or products that will help you improve those metrics. We also show you the potential savings you will get by enabling the recommended features or products.\n\n### Trend and History report\n\nIn the Tested URLs table, in the last column, you can select the three dots > **View history report**, and you will have access to the **Trend** table that will show your website‚Äôs performance metrics over time and a **History report** of all the tests you run on your website.\n\n## Enable real user monitoring (RUM)\n\nOnce a test has been run, you can enable [RUM](https://developers.cloudflare.com/speed/observatory/#real-user-monitoring-rum) data in the test results page:\n\n1. Go to **Observatory** and select **Enable RUM**. You can choose to enable globally or enable everywhere except the EU.\n2. Once RUM data is running on your site, you can access **Real user measurements** on your test results page. Usually it takes less than five minutes to see the data coming in, but it will depend on traffic.\n\nRefer to [Understand test results](https://developers.cloudflare.com/speed/observatory/test-results/) for more information about the results provided by real user data.\n\n### Information collected\n\nRUM uses a lightweight JavaScript beacon to collect the information Observatory uses. It does not use any client-side state, such as cookies or `localStorage`, to collect usage metrics.\n\n## Quotas\n\nQuota limits for the number of tests you can run per month are currently the following:\n\n| Plan | One-off tests | Recurring tests | Frequency of recurring tests |\n| - | - | - | - |\n| Pro | 50 | 5 | Daily |\n| Business | 100 | 10 | Daily |\n| Enterprise | 150 | 15 | Daily |\n\n**Available Regions (all plans):**\n\n| Region | Region | Region |\n| - | - | - |\n| Iowa, USA | Hamina, Finland | Changhua County, Taiwan |\n| South Carolina, USA | Madrid, Spain | Tokyo, Japan |\n| North Virginia, USA | St. Ghislain, Belgium | Osaka, Japan |\n| Dallas, USA | Eemshaven, Netherlands | Jurong West, Singapore |\n| Oregon, USA | Milan, Italy | Sydney, Australia |\n| London, England | Paris, France | Mumbai, India |\n| Frankfurt, Germany | Tel Aviv, Israel | S√£o Paulo, Brazil |\n\n</page>\n\n<page>\n---\ntitle: Understand test results ¬∑ Cloudflare Speed docs\ndescription: The test result page shows you how your website performed regarding\n  several key industry metrics. Some of these metrics are presented for\n  synthetic tests and the real user monitoring, and others only apply to\n  synthetic tests or only to real user monitoring.\nlastUpdated: 2025-09-26T10:03:24.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/speed/observatory/test-results/\n  md: https://developers.cloudflare.com/speed/observatory/test-results/index.md\n---\n\nThe test result page shows you how your website performed regarding several key industry metrics. Some of these metrics are presented for synthetic tests and the real user monitoring, and others only apply to synthetic tests or only to real user monitoring.\n\n## Synthetic tests and real user monitoring metrics\n\nThese metrics are presented for the synthetic tests and they are also collected as part of the real user data.\n\n| Metric | Definition |\n| - | - |\n| Time to First Byte ([TTFB](https://web.dev/ttfb/)) | Measures the time between the request for a resource and when the first byte of a response begins to arrive. |\n| First Contentful Paint ([FCP](https://web.dev/first-contentful-paint/)) | Measures the time from when the page starts loading to when any part of the page's content is rendered on the screen. |\n| Largest Contentful Paint ([LCP](https://web.dev/lcp/)) | CP reports the render time of the largest image or text block visible within the viewport. |\n| Cumulative Layout Shift ([CLS](https://web.dev/cls/)) | Measures the largest burst of layout shift scores for every unexpected layout shift that occurs during the entire lifespan of a page. |\n\n## Synthetic tests metrics\n\nThese metrics result from the synthetic tests.\n\n| Metric | Definition |\n| - | - |\n| Time to Interactive ([TTI](https://web.dev/tti/)) | Measures the time from when the page starts loading to when its main sub-resources have loaded and it is capable of reliably responding to user input quickly. |\n| Total Blocking Time ([TBT](https://web.dev/tbt/)) | Measures the total amount of time between First Contentful Paint (FCP) and Time to Interactive (TTI) where the main thread was blocked for long enough to prevent input responsiveness. |\n| [Speed index](https://web.dev/speed-index/) | Measures how quickly content is visually displayed during page load. |\n\n## Real user monitoring metrics\n\nThese metrics are collected as part of the real user data, as they require real user interaction with a page.\n\n| Metric | Definition |\n| - | - |\n| Interaction to Next Paint ([INP](https://web.dev/inp/)) | Aims to represent a page's overall responsiveness by measuring all click, tap, and keyboard interactions made with a page. |\n\nRefer to [Data and metrics](https://developers.cloudflare.com/web-analytics/data-metrics/) for more information about the metrics you can find in the Real User Monitoring dashboard. You can find details about [Core Web Vitals](https://developers.cloudflare.com/web-analytics/data-metrics/core-web-vitals/), the debug view and the data collected.\n\n## Network monitoring metrics\n\n| Metric | Definition |\n| - | - |\n| Wait Time | Measures the time spent waiting for the server to send back the first byte of a response after a request is made. |\n| Load Time | Measures the total time it takes for a web page to fully load in a user‚Äôs browser from the network. |\n| Time to First Byte ([TTFB](https://web.dev/articles/ttfb)) | Measures the duration between initiating a web page request and receiving the first byte from the server. |\n| Server Response Time | Measures the time it takes for a server to respond to a request from a user's browser. |\n| Connect Time | Measures the time taken to establish a connection between the user's browser and the web server. |\n| TLS Time | Measures the time required to complete the TLS/SSL handshake between the user's browser and the web server. |\n\n</page>\n\n<page>\n---\ntitle: Content optimizations ¬∑ Cloudflare Speed docs\nlastUpdated: 2024-09-13T14:14:41.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/speed/optimization/content/\n  md: https://developers.cloudflare.com/speed/optimization/content/index.md\n---\n\n* [Automatic Platform Optimization](https://developers.cloudflare.com/automatic-platform-optimization/)\n* [Content compression](https://developers.cloudflare.com/speed/optimization/content/compression/)\n* [Cloudflare Fonts (beta)](https://developers.cloudflare.com/speed/optimization/content/fonts/)\n* [Early Hints](https://developers.cloudflare.com/cache/advanced-configuration/early-hints/)\n* [Prefetch URLs](https://developers.cloudflare.com/speed/optimization/content/prefetch-urls/)\n* [Rocket Loader](https://developers.cloudflare.com/speed/optimization/content/rocket-loader/)\n* [Smart Hints](https://blog.cloudflare.com/smart-hints/)\n* [Speed Brain](https://developers.cloudflare.com/speed/optimization/content/speed-brain/)\n* [Troubleshooting](https://developers.cloudflare.com/speed/optimization/content/troubleshooting/)\n\n</page>\n\n<page>\n---\ntitle: Image optimization ¬∑ Cloudflare Speed docs\nlastUpdated: 2024-09-13T14:14:41.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/speed/optimization/images/\n  md: https://developers.cloudflare.com/speed/optimization/images/index.md\n---\n\n* [Image Resizing](https://developers.cloudflare.com/images/transform-images/)\n* [Polish](https://developers.cloudflare.com/images/polish/)\n* [Cloudflare Mirage (deprecated)](https://developers.cloudflare.com/speed/optimization/images/mirage/)\n* [Troubleshooting](https://developers.cloudflare.com/speed/optimization/images/troubleshooting/)\n\n</page>\n\n<page>\n---\ntitle: Measurement ¬∑ Cloudflare Speed docs\ndescription: Enable measurement to track your traffic in a privacy-first manner,\n  optimizing your site's speed tools. To access this feature, you need to enable\n  Web Analytics on your website. This analytics tool leverages Real User\n  Measurement (RUM) data, providing insights based on actual user interactions\n  to enhance site performance effectively.\nlastUpdated: 2025-09-19T11:19:54.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/speed/optimization/measurement/\n  md: https://developers.cloudflare.com/speed/optimization/measurement/index.md\n---\n\nEnable measurement to track your traffic in a privacy-first manner, optimizing your site's speed tools. To access this feature, you need to enable [Web Analytics](https://developers.cloudflare.com/web-analytics/) on your website. This analytics tool leverages [Real User Measurement](https://developers.cloudflare.com/speed/observatory/run-speed-test/#enable-real-user-monitoring-rum) (RUM) data, providing insights based on actual user interactions to enhance site performance effectively.\n\n</page>\n\n<page>\n---\ntitle: Protocol optimization ¬∑ Cloudflare Speed docs\nlastUpdated: 2024-09-13T14:14:41.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/speed/optimization/protocol/\n  md: https://developers.cloudflare.com/speed/optimization/protocol/index.md\n---\n\n* [HTTP/2](https://developers.cloudflare.com/speed/optimization/protocol/http2/)\n* [HTTP/3 (with QUIC)](https://developers.cloudflare.com/speed/optimization/protocol/http3/)\n* [Enhanced HTTP/2 Prioritization](https://developers.cloudflare.com/speed/optimization/protocol/enhanced-http2-prioritization/)\n* [0-RTT Connection Resumption](https://developers.cloudflare.com/speed/optimization/protocol/0-rtt-connection-resumption/)\n* [HTTP/2 to Origin](https://developers.cloudflare.com/speed/optimization/protocol/http2-to-origin/)\n* [Troubleshooting](https://developers.cloudflare.com/speed/optimization/protocol/troubleshooting/)\n\n</page>\n\n<page>\n---\ntitle: Recommendations ¬∑ Cloudflare Speed docs\ndescription: In the Recommendations tab, with one click you can enable all the\n  recommended settings available for your plan. You can enable all the\n  recommended settings at once or you can also just enable the ones you want.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/speed/optimization/recommendations/\n  md: https://developers.cloudflare.com/speed/optimization/recommendations/index.md\n---\n\nIn the **Recommendations** tab, with one click you can enable all the recommended settings available for your plan. You can enable all the recommended settings at once or you can also just enable the ones you want.\n\n</page>\n\n<page>\n---\ntitle: Bring your own CA for mTLS ¬∑ Cloudflare SSL/TLS docs\ndescription: Cloudflare mTLS now supports client certificates that have not been\n  issued by Cloudflare CA. Learn how you can bring your own CA and use it with\n  Cloudflare mTLS.\nlastUpdated: 2025-10-28T21:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ssl/client-certificates/byo-ca/\n  md: https://developers.cloudflare.com/ssl/client-certificates/byo-ca/index.md\n---\n\nThis page explains how you can manage client certificates that have not been issued by Cloudflare CA. For a broader overview, refer to the [mTLS at Cloudflare learning path](https://developers.cloudflare.com/learning-paths/mtls/concepts/).\n\nBring your own CA (BYOCA) is especially useful if you already have mTLS implemented and [client certificates are already installed](https://developers.cloudflare.com/ssl/client-certificates/#how-it-works) on devices.\n\n## Availability\n\n* Currently, you can only manage your uploaded CA via API, and the hostname associations are **not** reflected on the [dashboard](https://dash.cloudflare.com/?to=/:account/:zone/ssl-tls/client-certificates/).\n* This process is only available on Enterprise accounts.\n* Each Enterprise account can upload up to five CAs. This quota does not apply to CAs uploaded through [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/).\n\n## CA certificate requirements\n\nWhen you upload your CA, Cloudflare validates the certificate according to certain requirements.\n\n* The CA certificate can be from a publicly trusted CA or self-signed.\n\n* In the certificate `Basic Constraints`, the attribute `CA` must be set to `TRUE`.\n\n* The certificate must use one of the signature algorithms listed below:\n\n  Allowed signature algorithms\n\n  `x509.SHA1WithRSA`\n\n  `x509.SHA256WithRSA`\n\n  `x509.SHA384WithRSA`\n\n  `x509.SHA512WithRSA`\n\n  `x509.ECDSAWithSHA1`\n\n  `x509.ECDSAWithSHA256`\n\n  `x509.ECDSAWithSHA384`\n\n  `x509.ECDSAWithSHA512`\n\nNote\n\nUploading the CA private key is only required if you wish to use [Zero Trust's block page](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/custom-certificate/). For more context on how mTLS works, refer to our [Learning Center](https://www.cloudflare.com/learning/access-management/what-is-mutual-tls/).\n\n## Set up mTLS with your CA\n\n1. Use the [Upload mTLS certificate endpoint](https://developers.cloudflare.com/api/resources/mtls_certificates/methods/create/) to upload the CA root certificate.\n\n* `ca` boolean required\n\n  * Set to `true` to indicate that the certificate is a CA certificate.\n\n* `certificates` string required\n\n  * Insert content from the `.pem` file associated with the CA certificate, formatted as a single string with `\\n` replacing the line breaks.\n\n* `name` string optional\n\n  * Indicate a unique name for your CA certificate.\n\n1. Take note of the certificate ID (`id`) that is returned in the API response.\n2. Use the [Replace Hostname Associations endpoint](https://developers.cloudflare.com/api/resources/certificate_authorities/subresources/hostname_associations/methods/update/) to enable mTLS in each hostname that should use the CA for mTLS validation. Use the following parameters:\n\n* `hostnames` array required\n\n  * List the hostnames that will be using the CA for client certificate validation.\n\n    Warning\n\n    Submitting an empty array will remove all hostnames associations.\n\n* `mtls_certificate_id` string required\n\n  * Indicate the certificate ID obtained from the previous step.\n\n    Warning\n\n    If no `mtls_certificate_id` is provided, the action will be performed against a Cloudflare Managed CA.\n\n1. (Optional) Since this process is API-only, and hostnames that use your uploaded CA certificate **are not** listed on the dashboard, you can make a [GET request](#list-ca-hostname-associations) to confirm the CA hostname associations.\n\n2. Create a custom rule to enforce client certificate validation. You can do this [via the dashboard](https://developers.cloudflare.com/api-shield/security/mtls/configure/) or [via API](https://developers.cloudflare.com/waf/custom-rules/create-api/).",
      "language": "unknown"
    },
    {
      "code": "Note\n\nWhen using CNAME, enforce mTLS on the specific hostname where it should be checked. It is not enough to have it set on the CNAME target.\n\n### Multiple CAs for one hostname\n\nThere can be multiple CAs (Cloudflare-managed or BYOCA) associated with the same hostname. For BYOCA certificates, the most recently deployed certificate will be prioritized.\n\nIf you wish to remove the association from the Cloudflare-managed certificate and only use your BYOCA certificate(s):\n\n* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **Client Certificates** page.\n\n     [Go to **Client Certificates**](https://dash.cloudflare.com/?to=/:account/:zone/ssl-tls/client-certificates)\n\n  2. On the **Hosts** section of the **Client Certificates** card, select **Edit**.\n\n  3. Select the cross next to the hostname you want to remove. The list of hostname associations will be updated.\n\n  4. Select **Save** to confirm.\n\n* API\n\n  1. [List the hostname associations](https://developers.cloudflare.com/api/resources/certificate_authorities/subresources/hostname_associations/methods/get/) **without** the `mtls_certificate_id` parameter.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `SSL and Certificates Write`\n  * `SSL and Certificates Read`",
      "language": "unknown"
    },
    {
      "code": "1. Copy the `hostnames` array returned by the API and update it, removing the hostname that should no longer use the Cloudflare-managed CA.\n  2. Use the [Replace Hostname Associations endpoint](https://developers.cloudflare.com/api/resources/certificate_authorities/subresources/hostname_associations/methods/update/) **without** the `mtls_certificate_id` parameter to perform the action against the Cloudflare-managed CA. For `hostnames` use the list from the previous step.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `SSL and Certificates Write`",
      "language": "unknown"
    },
    {
      "code": "## Delete an uploaded CA\n\nIf you want to remove a CA that you have previously uploaded, you must first remove any hostname associations that it has.\n\n1. Make a request to the [Replace Hostname Associations endpoint](https://developers.cloudflare.com/api/resources/certificate_authorities/subresources/hostname_associations/methods/update/), with an empty array for `hostnames` and specifying your CA certificate ID in `mtls_certificate_id`:",
      "language": "unknown"
    },
    {
      "code": "1. Use the [Delete mTLS certificate endpoint](https://developers.cloudflare.com/api/resources/mtls_certificates/methods/delete/) to delete the certificate.\n\n## List CA hostname associations\n\nYou can also use the [API](https://developers.cloudflare.com/api/resources/certificate_authorities/subresources/hostname_associations/methods/get/) to list the hostname associations. Make sure you include the query parameter `mtls_certificate_id`, where `mtls_certificate_id` is the certificate ID of the uploaded CA (step 2 above).\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `SSL and Certificates Write`\n* `SSL and Certificates Read`",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Configure your mobile app or IoT device ¬∑ Cloudflare SSL/TLS docs\ndescription: This tutorial demonstrates how to configure your Internet-of-things\n  (IoT) device and mobile application to use client certificates with API\n  Shield.\nlastUpdated: 2025-10-28T21:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ssl/client-certificates/configure-your-mobile-app-or-iot-device/\n  md: https://developers.cloudflare.com/ssl/client-certificates/configure-your-mobile-app-or-iot-device/index.md\n---\n\nThis tutorial demonstrates how to configure your Internet-of-things (IoT) device and mobile application to use client certificates with [API Shield](https://developers.cloudflare.com/api-shield/).\n\n## Scenario details\n\nThis walkthrough uses the example of a device that captures temperature readings and transmits them by sending a POST request to a Cloudflare-protected API. A mobile application built in Swift for iOS retrieves those readings and displays them.\n\nTo keep this example simple, the API is implemented as a Cloudflare Worker (borrowing code from the [To-Do List tutorial on building a jamstack app](https://developers.cloudflare.com/workers/tutorials/build-a-jamstack-app/)).\n\nTemperatures are stored in [Workers KV](https://developers.cloudflare.com/kv/concepts/how-kv-works/) using the source IP address as a key, but you can easily use a [value from the client certificate](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/), such as the fingerprint.\n\nThe example API code below saves a temperature and timestamp into KV when a POST is made and returns the most recent five temperatures when a GET request is made.",
      "language": "unknown"
    },
    {
      "code": "***\n\n## 1. Validate API\n\n### POST sample data to API\n\nTo validate the API before adding mTLS authentication, POST a random temperature reading:",
      "language": "unknown"
    },
    {
      "code": "### GET sample data from API\n\nA GET request to the `temps` endpoint returns the most recent readings, including the one submitted in the example above:",
      "language": "unknown"
    },
    {
      "code": "***\n\n## 2. Create Cloudflare-issued certificates\n\nBefore you can use API Shield to protect your API or web application, create Cloudflare-issued client certificates.\n\nYou can [create a client certificate in the Cloudflare dashboard](https://developers.cloudflare.com/ssl/client-certificates/create-a-client-certificate/).\n\nHowever, since most developers working at scale generate their own private keys and certificate signing requests via API, this example uses the Cloudflare API to create client certificates.\n\nTo create a bootstrap certificate for the iOS application and the IoT device, this example uses [Cloudflare‚Äôs public key infrastructure toolkit, CFSSL](https://github.com/cloudflare/cfssl):",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "What you learned",
      "id": "what-you-learned"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Before you begin",
      "id": "before-you-begin"
    },
    {
      "level": "h2",
      "text": "1. Set up account secrets in Secrets Store",
      "id": "1.-set-up-account-secrets-in-secrets-store"
    },
    {
      "level": "h2",
      "text": "2. Bind an account secret to your Worker",
      "id": "2.-bind-an-account-secret-to-your-worker"
    },
    {
      "level": "h3",
      "text": "Via Wrangler",
      "id": "via-wrangler"
    },
    {
      "level": "h3",
      "text": "Via Dashboard",
      "id": "via-dashboard"
    },
    {
      "level": "h2",
      "text": "3. Access the secret on the `env` object",
      "id": "3.-access-the-secret-on-the-`env`-object"
    },
    {
      "level": "h3",
      "text": "Call `get()` on the binding variable",
      "id": "call-`get()`-on-the-binding-variable"
    },
    {
      "level": "h2",
      "text": "Manage via Wrangler",
      "id": "manage-via-wrangler"
    },
    {
      "level": "h2",
      "text": "Create a secret",
      "id": "create-a-secret"
    },
    {
      "level": "h2",
      "text": "Duplicate a secret",
      "id": "duplicate-a-secret"
    },
    {
      "level": "h2",
      "text": "Edit a secret",
      "id": "edit-a-secret"
    },
    {
      "level": "h2",
      "text": "Delete a secret",
      "id": "delete-a-secret"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Configure Open Port Scanning",
      "id": "configure-open-port-scanning"
    },
    {
      "level": "h2",
      "text": "Default ports",
      "id": "default-ports"
    },
    {
      "level": "h2",
      "text": "Frequently Asked Questions",
      "id": "frequently-asked-questions"
    },
    {
      "level": "h2",
      "text": "API request limits",
      "id": "api-request-limits"
    },
    {
      "level": "h2",
      "text": "Via the Cloudflare dashboard",
      "id": "via-the-cloudflare-dashboard"
    },
    {
      "level": "h2",
      "text": "Via Cloudflare Radar",
      "id": "via-cloudflare-radar"
    },
    {
      "level": "h2",
      "text": "Via the API",
      "id": "via-the-api"
    },
    {
      "level": "h2",
      "text": "IP Address",
      "id": "ip-address"
    },
    {
      "level": "h2",
      "text": "Domain",
      "id": "domain"
    },
    {
      "level": "h3",
      "text": "Domain categories",
      "id": "domain-categories"
    },
    {
      "level": "h2",
      "text": "AS Number",
      "id": "as-number"
    },
    {
      "level": "h2",
      "text": "Hash",
      "id": "hash"
    },
    {
      "level": "h2",
      "text": "URL",
      "id": "url"
    },
    {
      "level": "h3",
      "text": "Visibility",
      "id": "visibility"
    },
    {
      "level": "h3",
      "text": "Filters",
      "id": "filters"
    },
    {
      "level": "h3",
      "text": "Downloads",
      "id": "downloads"
    },
    {
      "level": "h2",
      "text": "Scan properties",
      "id": "scan-properties"
    },
    {
      "level": "h2",
      "text": "Scan frequency",
      "id": "scan-frequency"
    },
    {
      "level": "h2",
      "text": "Resolve an insight",
      "id": "resolve-an-insight"
    },
    {
      "level": "h2",
      "text": "Export insights",
      "id": "export-insights"
    },
    {
      "level": "h2",
      "text": "Archive insights",
      "id": "archive-insights"
    },
    {
      "level": "h2",
      "text": "Enable alerts",
      "id": "enable-alerts"
    },
    {
      "level": "h2",
      "text": "About connection reuse",
      "id": "about-connection-reuse"
    },
    {
      "level": "h2",
      "text": "Egress IPs allocation",
      "id": "egress-ips-allocation"
    },
    {
      "level": "h2",
      "text": "Asset eligibility",
      "id": "asset-eligibility"
    },
    {
      "level": "h2",
      "text": "Limits",
      "id": "limits"
    },
    {
      "level": "h2",
      "text": "Delete data",
      "id": "delete-data"
    },
    {
      "level": "h2",
      "text": "Benefits",
      "id": "benefits"
    },
    {
      "level": "h2",
      "text": "Scope",
      "id": "scope"
    },
    {
      "level": "h2",
      "text": "Resources",
      "id": "resources"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Regions",
      "id": "regions"
    },
    {
      "level": "h2",
      "text": "Further reading",
      "id": "further-reading"
    },
    {
      "level": "h2",
      "text": "Assign an IP address",
      "id": "assign-an-ip-address"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "How FTP Operates",
      "id": "how-ftp-operates"
    },
    {
      "level": "h2",
      "text": "What Does and Does Not Work",
      "id": "what-does-and-does-not-work"
    },
    {
      "level": "h2",
      "text": "Protect an FTP Server with Spectrum",
      "id": "protect-an-ftp-server-with-spectrum"
    },
    {
      "level": "h3",
      "text": "Protect the Control Port",
      "id": "protect-the-control-port"
    },
    {
      "level": "h3",
      "text": "Protect Data Ports",
      "id": "protect-data-ports"
    },
    {
      "level": "h3",
      "text": "Spectrum FTPS (ProFTPD) instructions",
      "id": "spectrum-ftps-(proftpd)-instructions"
    },
    {
      "level": "h2",
      "text": "SFTP",
      "id": "sftp"
    },
    {
      "level": "h2",
      "text": "Microsoft Windows IIS FTP",
      "id": "microsoft-windows-iis-ftp"
    },
    {
      "level": "h2",
      "text": "TCP health checks",
      "id": "tcp-health-checks"
    },
    {
      "level": "h2",
      "text": "Traffic steering",
      "id": "traffic-steering"
    },
    {
      "level": "h2",
      "text": "Weights",
      "id": "weights"
    },
    {
      "level": "h2",
      "text": "Requirements and limitations",
      "id": "requirements-and-limitations"
    },
    {
      "level": "h2",
      "text": "Use static IPs with Spectrum",
      "id": "use-static-ips-with-spectrum"
    },
    {
      "level": "h2",
      "text": "Check your static IPs",
      "id": "check-your-static-ips"
    },
    {
      "level": "h2",
      "text": "Enable Proxy Protocol v1 for TCP",
      "id": "enable-proxy-protocol-v1-for-tcp"
    },
    {
      "level": "h3",
      "text": "The Proxy Protocol v1 Header",
      "id": "the-proxy-protocol-v1-header"
    },
    {
      "level": "h2",
      "text": "Enable Proxy Protocol v2 for TCP/UDP",
      "id": "enable-proxy-protocol-v2-for-tcp/udp"
    },
    {
      "level": "h3",
      "text": "The Proxy Protocol v2 Header",
      "id": "the-proxy-protocol-v2-header"
    },
    {
      "level": "h2",
      "text": "Enable Simple Proxy Protocol for UDP",
      "id": "enable-simple-proxy-protocol-for-udp"
    },
    {
      "level": "h2",
      "text": "Additional dimensions",
      "id": "additional-dimensions"
    },
    {
      "level": "h2",
      "text": "Operators for filtering",
      "id": "operators-for-filtering"
    },
    {
      "level": "h2",
      "text": "Analytics request structure",
      "id": "analytics-request-structure"
    },
    {
      "level": "h2",
      "text": "Analytics query example",
      "id": "analytics-query-example"
    },
    {
      "level": "h2",
      "text": "Application type",
      "id": "application-type"
    },
    {
      "level": "h2",
      "text": "IP addresses",
      "id": "ip-addresses"
    },
    {
      "level": "h2",
      "text": "SMTP",
      "id": "smtp"
    },
    {
      "level": "h2",
      "text": "Ports",
      "id": "ports"
    },
    {
      "level": "h2",
      "text": "Port ranges",
      "id": "port-ranges"
    },
    {
      "level": "h2",
      "text": "IP Access rules",
      "id": "ip-access-rules"
    },
    {
      "level": "h2",
      "text": "Argo Smart Routing",
      "id": "argo-smart-routing"
    },
    {
      "level": "h2",
      "text": "Edge TLS Termination",
      "id": "edge-tls-termination"
    },
    {
      "level": "h2",
      "text": "Origin TLS Termination",
      "id": "origin-tls-termination"
    },
    {
      "level": "h2",
      "text": "Supported cipher suites by protocol",
      "id": "supported-cipher-suites-by-protocol"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "How Spectrum identifies a user (Layer 4)",
      "id": "how-spectrum-identifies-a-user-(layer-4)"
    },
    {
      "level": "h2",
      "text": "How the CDN identifies a user (Layer 7)",
      "id": "how-the-cdn-identifies-a-user-(layer-7)"
    },
    {
      "level": "h2",
      "text": "The overlap: Layer 7 traffic being proxied through Spectrum",
      "id": "the-overlap:-layer-7-traffic-being-proxied-through-spectrum"
    },
    {
      "level": "h2",
      "text": "Blocking unwanted L7 traffic",
      "id": "blocking-unwanted-l7-traffic"
    },
    {
      "level": "h2",
      "text": "HTTPS",
      "id": "https"
    },
    {
      "level": "h2",
      "text": "UDP",
      "id": "udp"
    },
    {
      "level": "h2",
      "text": "Minecraft",
      "id": "minecraft"
    },
    {
      "level": "h2",
      "text": "Universal SSL",
      "id": "universal-ssl"
    },
    {
      "level": "h2",
      "text": "Private Network Load Balancing",
      "id": "private-network-load-balancing"
    },
    {
      "level": "h2",
      "text": "Cloudflare Tunnel",
      "id": "cloudflare-tunnel"
    },
    {
      "level": "h2",
      "text": "Listen on ports configuration",
      "id": "listen-on-ports-configuration"
    },
    {
      "level": "h2",
      "text": "Configure Logpush",
      "id": "configure-logpush"
    },
    {
      "level": "h2",
      "text": "Status Codes",
      "id": "status-codes"
    },
    {
      "level": "h2",
      "text": "Magic Number",
      "id": "magic-number"
    },
    {
      "level": "h2",
      "text": "Client Address",
      "id": "client-address"
    },
    {
      "level": "h2",
      "text": "Proxy address",
      "id": "proxy-address"
    },
    {
      "level": "h2",
      "text": "Client port",
      "id": "client-port"
    },
    {
      "level": "h2",
      "text": "Proxy port",
      "id": "proxy-port"
    },
    {
      "level": "h2",
      "text": "Payload",
      "id": "payload"
    },
    {
      "level": "h2",
      "text": "Suggestions",
      "id": "suggestions"
    },
    {
      "level": "h2",
      "text": "Core Web Vitals",
      "id": "core-web-vitals"
    },
    {
      "level": "h2",
      "text": "Network Performance",
      "id": "network-performance"
    },
    {
      "level": "h2",
      "text": "HTTP Traffic",
      "id": "http-traffic"
    },
    {
      "level": "h2",
      "text": "Synthetic Monitoring",
      "id": "synthetic-monitoring"
    },
    {
      "level": "h2",
      "text": "Using the dashboard",
      "id": "using-the-dashboard"
    },
    {
      "level": "h2",
      "text": "How long does it take for a test to load?",
      "id": "how-long-does-it-take-for-a-test-to-load?"
    },
    {
      "level": "h2",
      "text": "Are query parameters or anchors supported in tested URLs?",
      "id": "are-query-parameters-or-anchors-supported-in-tested-urls?"
    },
    {
      "level": "h2",
      "text": "I get a `403` response when rerunning the website analysis?",
      "id": "i-get-a-`403`-response-when-rerunning-the-website-analysis?"
    },
    {
      "level": "h2",
      "text": "Why might users not see any Real User Monitoring (RUM) data on the map in Observatory?",
      "id": "why-might-users-not-see-any-real-user-monitoring-(rum)-data-on-the-map-in-observatory?"
    },
    {
      "level": "h2",
      "text": "What are the potential reasons for discrepancies between RUM analytics and traffic analytics in Observatory?",
      "id": "what-are-the-potential-reasons-for-discrepancies-between-rum-analytics-and-traffic-analytics-in-observatory?"
    },
    {
      "level": "h2",
      "text": "How do I disable Real User Monitoring (RUM) if it has been enabled from the Observatory test result page?",
      "id": "how-do-i-disable-real-user-monitoring-(rum)-if-it-has-been-enabled-from-the-observatory-test-result-page?"
    },
    {
      "level": "h2",
      "text": "Data collection",
      "id": "data-collection"
    },
    {
      "level": "h2",
      "text": "Data processing",
      "id": "data-processing"
    },
    {
      "level": "h2",
      "text": "Privacy information",
      "id": "privacy-information"
    },
    {
      "level": "h2",
      "text": "RUM excluding EEA/EU",
      "id": "rum-excluding-eea/eu"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Run Synthetic test",
      "id": "run-synthetic-test"
    },
    {
      "level": "h3",
      "text": "Recommendations",
      "id": "recommendations"
    },
    {
      "level": "h3",
      "text": "Trend and History report",
      "id": "trend-and-history-report"
    },
    {
      "level": "h2",
      "text": "Enable real user monitoring (RUM)",
      "id": "enable-real-user-monitoring-(rum)"
    },
    {
      "level": "h3",
      "text": "Information collected",
      "id": "information-collected"
    },
    {
      "level": "h2",
      "text": "Quotas",
      "id": "quotas"
    },
    {
      "level": "h2",
      "text": "Synthetic tests and real user monitoring metrics",
      "id": "synthetic-tests-and-real-user-monitoring-metrics"
    },
    {
      "level": "h2",
      "text": "Synthetic tests metrics",
      "id": "synthetic-tests-metrics"
    },
    {
      "level": "h2",
      "text": "Real user monitoring metrics",
      "id": "real-user-monitoring-metrics"
    },
    {
      "level": "h2",
      "text": "Network monitoring metrics",
      "id": "network-monitoring-metrics"
    },
    {
      "level": "h2",
      "text": "Availability",
      "id": "availability"
    },
    {
      "level": "h2",
      "text": "CA certificate requirements",
      "id": "ca-certificate-requirements"
    },
    {
      "level": "h2",
      "text": "Set up mTLS with your CA",
      "id": "set-up-mtls-with-your-ca"
    },
    {
      "level": "h3",
      "text": "Multiple CAs for one hostname",
      "id": "multiple-cas-for-one-hostname"
    },
    {
      "level": "h2",
      "text": "Delete an uploaded CA",
      "id": "delete-an-uploaded-ca"
    },
    {
      "level": "h2",
      "text": "List CA hostname associations",
      "id": "list-ca-hostname-associations"
    },
    {
      "level": "h2",
      "text": "Scenario details",
      "id": "scenario-details"
    },
    {
      "level": "h2",
      "text": "1. Validate API",
      "id": "1.-validate-api"
    },
    {
      "level": "h3",
      "text": "POST sample data to API",
      "id": "post-sample-data-to-api"
    },
    {
      "level": "h3",
      "text": "GET sample data from API",
      "id": "get-sample-data-from-api"
    },
    {
      "level": "h2",
      "text": "2. Create Cloudflare-issued certificates",
      "id": "2.-create-cloudflare-issued-certificates"
    }
  ],
  "url": "llms-txt#still-works!-data-persisted-across-sandbox-lifecycle",
  "links": []
}