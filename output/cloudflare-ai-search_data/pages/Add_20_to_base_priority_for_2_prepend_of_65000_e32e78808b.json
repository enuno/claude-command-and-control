{
  "title": "Add 20 to base priority for 2 prepend of 65000",
  "content": "AS_PATH: 65000 65000 65000 65200\nmermaid\nflowchart LR\naccTitle: Tunnels diagram\naccDescr: This example has three tunnel routes, with traffic equally distributed across two paths.\n\nsubgraph Cloudflare\ndirection LR\nB[Cloudflare <br> data center]\nC[Cloudflare <br> data center]\nD[Cloudflare <br> data center]\nend\n\nZ(\"Load balancing for some <br> priority tunnels uses ECMP <br> (hashing on src IP, dst IP, <br> scr port, dst port)\") --- Cloudflare\nA((User)) --> Cloudflare --- E[Anycast IP]\nE[Anycast IP] --> F[/\"GRE Tunnel 1 / <br> priority 1 / <br> ~50% of flows\"/] --> I{{Customer <br> data center/ <br> network 1}}\nE[Anycast IP] --> G[/\"GRE Tunnel 2 / <br> priority 1 / <br> ~50% of flows\"/] --> J{{Customer <br> data center/ <br> network 2}}\nE[Anycast IP] --> H[/GRE Tunnel 3 / <br> priority 2 / <br> 0% of flows/] --o K{{Customer <br> data center/ <br> network 3}}\nmermaid\nflowchart LR\naccTitle: Tunnels diagram\naccDescr: This example has Tunnel 2 unhealthy, and all traffic prioritized to Tunnel 1.\n\nsubgraph Cloudflare\ndirection LR\nB[Cloudflare <br> data center]\nC[Cloudflare <br> data center]\nD[Cloudflare <br> data center]\nend\n\nZ(Tunnel health is <br> determined by <br> health checks that <br> run from all Cloudflare <br> data centers) --- Cloudflare\nA((User)) --> Cloudflare --- E[Anycast IP]\nE[Anycast IP] --> F[/\"Tunnel 1 / <br> priority 1 / <br> ~100% of flows\"/]:::green --> I{{Customer <br> data center/ <br> network 1}}\nE[Anycast IP] --> G[/Tunnel 2 / <br> priority 3 / <br> unhealthy / 0% of flows/]:::red --x J{{Customer <br> data center/ <br> network 2}}\nE[Anycast IP] --> H[/Tunnel 3 / <br> priority 2 / <br> 0% of flows/] --o K{{Customer <br> data center/ <br> network 3}}\nclassDef red fill:#EE4B2B,color: black\nclassDef green fill:#00FF00,color: black\nmermaid\nflowchart LR\naccTitle: Tunnels diagram\naccDescr: This example has Tunnel 1 and 2 unhealthy, and all traffic prioritized to Tunnel 3.\n\nsubgraph Cloudflare\ndirection LR\nB[Cloudflare <br> data center]\nC[Cloudflare <br> data center]\nD[Cloudflare <br> data center]\nend\n\nZ(Lower-priority tunnels <br> are used when <br> higher-priority tunnels <br> are unhealthy) --- Cloudflare\nA((User)) --> Cloudflare --- E[Anycast IP]\nE[Anycast IP]  -- Intermediary <br> network issue -->  F[/Tunnel 1 / <br> priority 3 / <br> unhealthy / 0% of flows/]:::red --x I{{Customer <br> data center/ <br> network 1}}\nE[Anycast IP]  -- Intermediary <br> network issue -->  G[/Tunnel 2 / <br> priority 3 / <br> unhealthy / 0% of flows/]:::red --x J{{Customer <br> data center/ <br> network 2}}\nE[Anycast IP] -->  H[/Tunnel 3 / <br> priority 2 / <br> 100% of flows/]:::green --> K{{Customer <br> data center/ <br> network 3}}\nclassDef red fill:#EE4B2B,color: black\nclassDef green fill:#00FF00,color: black\nmermaid\nflowchart LR\nsubgraph subGraph0[\"Data center\"]\n  direction TB\n      InternalDNS([\"Internal DNS\"])\n      ResolverPolicies[\"Resolver policies\"]\n      CloudflareGatewayDNSResolver[\"Gateway DNS resolver\"]\nend\n  ResolverPolicies -- Retain and use</br>Source Internal IP --> InternalDNS\n  CloudflareGatewayDNSResolver -- <br> --> ResolverPolicies\n  WarpConnector[\"WARP Connector\"] -- DHCP/DNS resolver --> IPSecTunnel[\"IPsec tunnel\"]\n  MagicWAN[$Magic WAN] -- DHCP/DNS resolver --> IPSecTunnel\n  IPSecTunnel -- Shared IP endpoints --> CloudflareGatewayDNSResolver\n  ResolverPolicies@{ shape: proc}\n  WarpConnector@{ shape: in-out}\n  MagicWAN@{ shape: in-out}\nsh\nip route add 100.96.0.0/12 dev gre1\nsh\nnslookup <SERVER_BEHIND_MAGIC_WAN>\nbash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/devices/policy\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"allow_mode_switch\": false,\n      \"allow_updates\": false,\n      \"allowed_to_leave\": false,\n      \"auto_connect\": 600,\n      \"captive_portal\": 180,\n      \"description\": \"Example device profile recommended in the implementation documentation. For details, refer to https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-profiles/\",\n      \"disable_auto_fallback\": true,\n      \"enabled\": true,\n      \"exclude_office_ips\": false,\n      \"match\": \"identity.email in {\\\"jdoe@example.com\\\"} or any(identity.groups.name[*] in {\\\"developers\\\" \\\"admin\\\"}) and os.name == \\\"windows\\\"\",\n      \"name\": \"Example device profile\",\n      \"precedence\": 101,\n      \"service_mode_v2\": {\n          \"mode\": \"warp\"\n      },\n      \"support_url\": \"https://support.example.com\",\n      \"switch_locked\": true\n    }'\n  tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Example device profile\"\n       description           = \"Example device profile recommended in the implementation documentation. For details, refer to https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-profiles/\"\n       allow_mode_switch     = false\n       allow_updates         = false\n       allowed_to_leave      = false\n       auto_connect          = 600\n       captive_portal        = 180\n       disable_auto_fallback = true\n       enabled               = true\n       exclude_office_ips    = false\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       support_url           = \"https://support.example.com\"\n       switch_locked         = true\n       tunnel_protocol       = \"wireguard\"\n\nmatch = trimspace(replace(<<-EOT\n         identity.email in {\"jdoe@example.com\"}\n         or any(identity.groups.name[*] in {\"developers\" \"admin\"})\n         and os.name == \"windows\"\n       EOT\n       , \"\\n\", \" \"))\n     }\n     sh\nwarp-cli settings\nmermaid\nflowchart TB\n    %% Accessibility\n    accTitle: How Gateway matches queries to DNS locations\n    accDescr: Flowchart describing the order of checks Cloudflare Gateway performs to determine the DNS location of a DNS query.\n\n%% Flowchart\n    router([\"Router\"])-->gateway[\"Cloudflare Gateway\"]\n\ngateway-->query{{\"Is the DNS query sent over HTTPS?\"}}\n\nquery--\"Yes\"-->hostname[\"Look up location by<br />unique hostname\"]\n    query--\"No\"-->ipv4{{\"Is it over IPv4?\"}}\n\nipv4--\"Yes\"-->source[\"Look up location by<br />source IPv4 address\"]\n    ipv4--\"No\"-->destination[\"Look up location by<br />destination IPv6 address\"]\nsh\n   openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes -keyout example.key -out example.pem -subj \"/CN=example.com\" -addext \"subjectAltName=DNS:example.com\"\n   txt\n   events {\n   worker_connections  1024;\n   }\n\nhttp {\n       server {\n         listen              443 ssl;\n         ssl_certificate     /certs/example.pem;\n         ssl_certificate_key /certs/example.key;\n         location / {\n               return 200;\n         }\n       }\n   }\n   yml\n   version: \"3.3\"\n   services:\n   nginx:\n     image: nginx:latest\n     ports:\n       - 3333:443\n     volumes:\n       - ./nginx.conf:/etc/nginx/nginx.conf:ro\n       - ./certs:/certs:ro\n   sh\n   docker-compose up -d\n   sh\n   curl --verbose --insecure https://<private-server-IP>:3333/\n   powershell\n   New-SelfSignedCertificate -CertStoreLocation Cert:\\LocalMachine\\My -DnsName \"office-name.example.internal\" -FriendlyName \"Cloudflare Managed Network Certificate\" -NotAfter (Get-Date).AddYears(10)\n   powershell\n     PSParentPath: Microsoft.PowerShell.Security\\Certificate::LocalMachine\\My\n\nThumbprint                                Subject\n   ----------                                -------\n   0660C4FCD15F69C49BD080FEEA4136B3D302B41B  CN=office-name.example.internal\n   powershell\n   [System.BitConverter]::ToString([System.Security.Cryptography.SHA256]::Create().ComputeHash((Get-ChildItem Cert:\\LocalMachine\\My | Where-Object { $_.FriendlyName -eq \"Cloudflare Managed Network Certificate\" }).RawData)) -replace \"-\", \"\"\n   powershell\n   DD4F4806C57A5BBAF1AA5B080F0541DA75DB468D0A1FE731310149500CCD8662\n   sh\n   curl --verbose --insecure --resolve office-name.example.internal:443:<private-server-IP> https://office-name.example.internal\n   sh\n  openssl x509 -noout -fingerprint -sha256 -inform pem -in example.pem | tr -d :\n  txt\n  SHA256 Fingerprint=DD4F4806C57A5BBAF1AA5B080F0541DA75DB468D0A1FE731310149500CCD8662\n  sh\n  openssl s_client -connect <private-server-IP>:443 < /dev/null 2> /dev/null | openssl x509 -noout -fingerprint -sha256 | tr -d :\n  txt\n  SHA256 Fingerprint=DD4F4806C57A5BBAF1AA5B080F0541DA75DB468D0A1FE731310149500CCD8662\n  tf\n     resource \"cloudflare_zero_trust_device_managed_networks\" \"office\" {\n       account_id = var.cloudflare_account_id\n       name       = \"Office managed network\"\n       type       = \"tls\"\n       config = {\n         tls_sockaddr = \"192.168.185.198:3333\"\n         sha256       = \"DD4F4806C57A5BBAF1AA5B080F0541DA75DB468D0A1FE731310149500CCD8662\"\n       }\n     }\n     tf\n  resource \"cloudflare_zero_trust_device_custom_profile\" \"office\" {\n    account_id            = var.cloudflare_account_id\n    name                  = \"Office\"\n    description           = \"Devices connected to the office network\"\n    precedence            = 1\n    service_mode_v2       = {mode = \"warp\"}\n\nmatch = trimspace(replace(<<-EOT\n      network == \"${cloudflare_zero_trust_device_managed_networks.office.name}\"\n    EOT\n    , \"\\n\", \" \"))\n  }\n  mermaid\nflowchart TD\n    A[\"WARP user requests resource\"] --> B[\"WARP client proxies all DNS traffic\"]\n    B -- WARP checks if domain is listed in Local Domain Fallback policies --> C[\"Local Domain Fallback\"]\n\n%% Left branch (LDF exists)\n    C -- Domain exists in Local Domain Fallback policies --> ST[\"Split Tunnel processing\"]\n\nST -- Resolver IP included in WARP Tunnel per Split Tunnel configuration --> QW[\"Query sent via WARP Tunnel to be resolved\"]\n    ST -- Resolver IP not included in WARP Tunnel per Split Tunnel configuration --> QO[\"Query sent to resolver IP outside WARP Tunnel\"]\n\n%% Gateway evaluation after query via WARP\n    QW -- Allowed by Gateway --> OR[\"Evaluated by Cloudflare on-ramp routes\"]\n    QW -- Blocked by Gateway Network or HTTP Policy --> BLK[\"Traffic blocked by Cloudflare\"]\n\nOR -- Onramp routes do not include resolver IP --> GP[\"Gateway proxies query to resolver IP via normal WARP egress route\"]\n    OR -- Onramp routes include resolver IP --> ADV[\"Cloudflare onramps advertise route that includes Resolver IP\"]\n    ADV --> PR[\"Private resolver returns IP address to WARP client\"]\n\n%% Right branch (no LDF match)\n    C -- Domain does not exist in Local Domain Fallback policies --> GWR[\"Gateway checks Resolver Policies (Enterprise only)\"]\n\nGWR -- Resolver policy is not matched --> C1111a[\"1.1.1.1\"]\n\nGWR -- Resolver policy is matched --> MATCH((Resolver policy directs query to one of the following))\n    MATCH --> IDNS[\"Internal DNS\"]\n    MATCH --> C1111b[\"1.1.1.1\"]\n    MATCH --> CUST[\"Custom resolver\"]\n    CUST --> PNS[\"Private network services<br>(Cloudflare Tunnel, Magic WAN, WARP Connector)\"]\ntf\n     resource \"cloudflare_zero_trust_gateway_policy\" \"network_allow_wiki_IPs\" {\n       name        = \"Company Wiki Network policy\"\n       enabled     = true\n       account_id  = var.cloudflare_account_id\n       description = \"Managed by Terraform - Allow employees to access company wiki IPs.\"\n       precedence  = 103\n       action      = \"allow\"\n       filters     = [\"l4\"]\n       traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.wiki_IPs.id}\"\n       identity    = \"identity.email matches \\\".*@example.com\\\"\"\n\nrule_settings = {\n         check_session = {\n           enforce = true\n           duration = \"1h30m0s\"\n         }\n       }\n     }\n     cmd\n   warp-cli settings | findstr \"SCCM VPN Boundary\"\n   cmd\n   (network policy) SCCM VPN Boundary Support: true\n   cmd\n   ipconfig /all\n   cmd\n   Windows IP Configuration\n\nUnknown adapter CloudflareWARP:\n\nConnection-specific DNS Suffix  . :\n     Description . . . . . . . . . . . : (SCCM) Cloudflare WARP Interface Tunnel\n     Physical Address. . . . . . . . . :\n     DHCP Enabled. . . . . . . . . . . : No\n     Autoconfiguration Enabled . . . . : Yes\n     IPv6 Address. . . . . . . . . . . : 2606:4700:110:8f79:145:f180:fc4:8106(Preferred)\n     Link-local IPv6 Address . . . . . : fe80::83b:d647:4bed:d388%49(Preferred)\n     IPv4 Address. . . . . . . . . . . : 172.16.0.2(Preferred)\n     Subnet Mask . . . . . . . . . . . : 255.255.255.255\n     Default Gateway . . . . . . . . . :\n     DNS Servers . . . . . . . . . . . : 127.0.2.2\n                                         127.0.2.3\n     NetBIOS over Tcpip. . . . . . . . : Enabled\n   tf\n     resource \"cloudflare_zero_trust_access_policy\" \"allow_company_emails\" {\n       account_id   = var.cloudflare_account_id\n       name         = \"Allow company emails\"\n       decision     = \"allow\"\n       include      = [\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_application\" \"device_enrollment\" {\n       account_id       = var.cloudflare_account_id\n       type             = \"warp\"\n       name             = \"Warp device enrollment\"\n       allowed_idps              = [cloudflare_zero_trust_access_identity_provider.microsoft_entra_id.id]\n       auto_redirect_to_identity = true\n       app_launcher_visible      = false\n       policies = [\n         {\n           id = cloudflare_zero_trust_access_policy.allow_company_emails.id\n           precedence = 1\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_policy\" \"warp_enrollment_service_token\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"Allow service token\"\n       decision       = \"non_identity\"\n       include = [\n         {\n           service_token = {\n             token_id = cloudflare_zero_trust_access_service_token.example_service_token.id\n           }\n         }\n       ]\n     }\n     txt\n     -----BEGIN CERTIFICATE-----\n     <intermediate.pem>\n     -----END CERTIFICATE-----\n     -----BEGIN CERTIFICATE-----\n     <rootCA.pem>\n     -----END CERTIFICATE-----\n     tf\n     resource \"cloudflare_zero_trust_access_mtls_certificate\" \"example_mtls_cert\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"WARP enrollment mTLS cert\"\n       certificate    = <<EOT\n       -----BEGIN CERTIFICATE-----\n       xxxx\n       xxxx\n       -----END CERTIFICATE-----\n       EOT\n       associated_hostnames = [\"your-team-name.cloudflareaccess.com\"]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_policy\" \"warp_enrollment_mtls\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"Allow employees with mTLS cert\"\n       decision       = \"allow\"\n       include = [\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n\nrequire = [\n         {\n           common_name = {\n             common_name = \"Common name 1\"\n           }\n         },\n             {\n           common_name = {\n             common_name = \"Common name 2\"\n           }\n         }\n       ]\n     }\n     sh\n   warp-cli registration new <your-team-name>\n   sh\n   warp-cli registration show\n   sh\n   warp-cli registration token \"com.cloudflare.warp://<your-team-name>.cloudflareaccess.com/auth?token=<your-token>\"\n   sh\n   warp-cli connect\n   txt\n   cf1app://oneapp.cloudflare.com/team?name=<your-team-name>\n   bash\nmsiexec /i \"Cloudflare_WARP_<VERSION>.msi\" /qn ORGANIZATION=\"your-team-name\" SUPPORT_URL=\"http://support.example.com\"\npowershell\nGet-WmiObject Win32_Product | Where-Object { $_.Name -match \"WARP\" } | Sort-Object -Property Name | Format-Table IdentifyingNumber, Name, LocalPackage -AutoSize\ntxt\nIdentifyingNumber                      Name            LocalPackage\n-----------------                      ----            ------------\n{5RA4DJWK-13D8-2NSX-QRF8-UANLODWD6D90} Cloudflare WARP C:\\WINDOWS\\Installer\\3f476db.msi\npowershell\nmsiexec /x C:\\WINDOWS\\Installer\\<WARP_RELEASE>.msi /quiet\nxml\n<dict>\n  <key>organization</key>\n  <string>your-team-name</string>\n  <key>onboarding</key>\n  <false/>\n</dict>\ntxt\n   REG ADD HKLM\\SOFTWARE\\Cloudflare\\CloudflareWARP /f /v UseWebView2 /t REG_SZ /d y\n   xml\n<dict>\n  <key>organization</key>\n  <string>your-team-name</string>\n</dict>\nxml\n<dict>\n  <key>organization</key>\n  <string>your-team-name</string>\n</dict>\nxml\n<dict>\n    <key>organization</key>\n    <string>your-team-name</string>\n    <key>auto_connect</key>\n    <integer>1</integer>\n    <key>switch_locked</key>\n    <false />\n    <key>service_mode</key>\n    <string>warp</string>\n    <key>support_url</key>\n    <string>https://support.example.com</string>\n</dict>\nxml\n<key>organization</key>\n<string>your-team-name</string>\n<key>switch_locked</key>\n<true />\n<key>auto_connect</key>\n<integer>0</integer>\n<key>gateway_unique_id</key>\n<string>your_gateway_doh_subdomain</string>\n<key>service_mode</key>\n<string>warp</string>\n<key>support_url</key>\n<string>https://support.example.com</string>\njson\n{\n  \"organization\": \"your-team-name\",\n  \"gateway_unique_id\": \"your_gateway_doh_subdomain\",\n  \"onboarding\": true,\n  \"switch_locked\": true,\n  \"auto_connect\": 0,\n  \"service_mode\": \"warp\",\n  \"support_url\": \"https://support.example.com\"\n}\ntxt\n  ERROR main_loop: warp::warp::happy_eyeballs: Happy eyeballs error Custom { kind: NotConnected, error: \"All Happy Eyeballs checks failed\" }\n  txt\n  ERROR warp::warp::connectivity_check: DNS check failed error=ResolveError { kind: Timeout }\n  WARN warp::warp::connectivity_check: Tunnel trace failed request::Error { kind: Request, url: Url { scheme: \"https\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"connectivity.cloudflareclient.com\")), port: None, path: \"/cdn-cgi/trace\", query: None, fragment: None }, source: TimedOut }\n  txt\n  DEBUG warp::warp_service: Routes changed:\n      Added; Interface: 8; Destination: 10.133.27.201/32; Next hop: 100.64.0.2;\n      Added; Interface: 8; Destination: 10.133.27.202/32; Next hop: 100.64.0.2;\n  DEBUG warp::warp_service: Routes changed:\n      Added; Interface: 8; Destination: 10.133.27.203/32; Next hop: 100.64.0.2;\n      Added; Interface: 8; Destination: 10.133.27.204/32; Next hop: 100.64.0.2;\n  DEBUG warp::warp_service: Routes changed:\n      Added; Interface: 8; Destination: 10.133.27.205/32; Next hop: 100.64.0.2;\n  txt\n  WARN main_loop: warp::warp_service: Reinforcing DNS settings. Is something else fighting us?\n  txt\n  WARN warp::warp: Unable to bind local UDP socket error=Os { code: 48, kind: AddrInUse, message: \"Address already in use\" } sockaddr=127.0.2.2:53\n  WARN warp::warp: Unable to bind local TCP socket error=Os { code: 48, kind: AddrInUse, message: \"Address already in use\" } sockaddr=127.0.2.2:53\n  txt\nWARN main_loop: warp::warp_service: Tunnel connection experienced error error=Custom { kind: Other, error: ProtoError { kind: Msg(\"unrecognized char:  \") } }\ntxt\nC:\\Users\\JohnDoe>nslookup google.com\nServer:  UnKnown\nAddress:  ::ffff:127.0.2.2\n\n*** UnKnown can't find google.com: No response from server\nbash\nC:\\Users\\JohnDoe>nslookup google.com 127.0.2.2\npowershell\nResolve-DnsName -Name google.com\njson\n{\n  \"mtu\": 1420\n}\nsh\ndocker network create -o \"com.docker.network.driver.mtu=1420\" my-docker-network\nplaintext",
  "code_samples": [
    {
      "code": "#### How communities and prepends work together\n\nCloudflare adjusts route priority when using AS prepending with communities. For example, if a route is tagged with `13335:60150`, the base priority is set to `150`. If you prepend your ASN twice, Cloudflare adds `10` for each prepend, increasing the route priority to `180`.\n\n## Automatic Return Routing (beta)\n\nAutomatic Return Routing (ARR) allows Cloudflare to track network flows from your Magic WAN connected locations, ensuring return traffic is routed back to the connection where it was received without requiring static or dynamic routes. This functionality requires the new [Unified Routing mode](#unified-routing-mode).\n\nInstead of relying on static or dynamic routes for the return path, Magic WAN learns flows and remembers which connection a given flow arrived on. For any matching return traffic, Magic WAN uses this learned state to choose the next hop. This simplifies configuration, reduces the number of routes you must manage, and helps preserve symmetry for stateful traffic.\n\nARR provides the following benefits:\n\n* **Removes the need for return routes**: For supported traffic types like new TCP connections (TCP SYN), UDP, and ICMP echo traffic, Magic WAN no longer requires a routing table entry to return traffic to the originating tunnel or interconnect.\n* **Maintains symmetric routing for flows**: Responses to a given flow (for example, a TCP session) return over the same Magic WAN connection that carried the initial request — important for stateful firewalls and middleboxes.\n* **Supports overlapping IP space**: Because the return path is tied to the learned connection state instead of a destination prefix in the routing table, Automatic Return Routing can support scenarios where different sites use overlapping private address space.\n* **Operates per connection**: You decide which IPsec / GRE tunnels or network interconnects should use this behavior by enabling the feature on each connection.\n\n### How ARR works\n\nWhen traffic that is eligible for Automatic Return Routing (ARR) arrives on a connection with ARR enabled, Magic WAN creates a flow entry that records:\n\n* The source and destination IP addresses\n* The relevant ports or identifiers, depending on the protocol\n* The connection (tunnel or interconnect) that the traffic arrived on\n\nFor any subsequent packets that match this flow and require a next hop, Magic WAN:\n\n1. Checks for a matching Automatic Return Routing flow.\n2. If a match exists, routes the packet back to the same connection where the flow was learned, instead of consulting the Magic WAN routing table.\n\nThe initial request from your network to the Internet still uses your configured static or BGP routes. ARR only affects the return path for supported traffic after the flow is learned.\n\n### Traffic and destinations affected\n\nAutomatic Return Routing applies when:\n\n* Traffic is received on a tunnel or network interconnect where the feature is enabled.\n* The received traffic is one of:\n* New TCP connections (TCP SYN)\n* UDP\n* ICMP echo (ping) requests\n* The traffic is destined for:\n* Internet egress through Cloudflare\n* A WARP client\n* A private network connected to Cloudflare through Cloudflare Tunnel\n* A private network connected to Cloudflare through WARP Connector\n\nIn this initial release, ARR does not change routing for traffic between Magic WAN connections (for example, traffic from one Magic WAN tunnel or interconnect to another). That traffic continues to follow your configured Magic WAN routes.\n\n## Unified routing mode\n\nThe Unified routing mode is the newer Cloudflare One data plane that uses a single routing fabric for all supported connection types. Unified routing mode routes traffic across WARP, Cloudflare Tunnel, IPsec, GRE, and Cloudflare Network Interconnect (CNI) in a single system, making it easier to set up your Cloudflare One connections.\n\nIn the Magic WAN dashboard, routing mode appears where you manage Magic routes:\n\n* **Routing mode: Unified** — your account is on the unified data plane and supports the new routing features.\n* **Routing mode: Legacy** — your account uses the previous data plane and does not support all unified routing features.\n\n## Scoping routes to specific regions\n\nIf you have multiple connectivity paths to a network segment and want to apply different route prioritization based on where traffic arrives at the Cloudflare network, you can scope routes to specific Cloudflare data center regions. This is useful if you run your own anycast network and want your end-user traffic to arrive at your network location closest to the user.\n\nWhen you scope a route to a Cloudflare data center region, it only shows up in the Magic routing table in that region, along with all global routes that do not have any region scope. Route prioritization and ECMP logic apply across both region-scoped and global routes.\n\nNote\n\nScoping routes to specific regions is not supported with BGP peering, and is only available to statically configured routes at this time.\n\nWhen using region-scoped routes, ensure that all prefixes have routes covering all regions. Otherwise, traffic may arrive at a Cloudflare region that is not covered by any route, in which case Cloudflare drops the traffic.\n\nThe following table exemplifies how to use geographic scoping for routes:\n\n| Prefix | NextHop | Priority | Region code |\n| - | - | - | - |\n| `10.10.10.100/24` | `TUNNEL_1_IAD` | `100` | `AFR` |\n| `10.10.10.100/24` | `TUNNEL_2_IAD` | `100` | `EEUR` |\n| `10.10.10.100/24` | `TUNNEL_3_ATL` | `100` | `ENAM` |\n| `10.10.10.100/24` | `TUNNEL_4_ATL` | `100` | `ME` |\n| `10.10.10.100/24` | `TUNNEL_5_ATL` | `100` | `WNAM` |\n| `10.10.10.100/24` | `TUNNEL_4_ATL` | `100` | `ENAM` |\n\nWhen there are multiple routes to the same prefix with equal priority, and those routes are assigned to different geographic regions (like WNAM and ENAM), traffic entering the network in a specific region — for example, WNAM — will egress through the route associated with that same region.\n\n### Region codes and associated regions\n\nCloudflare has nine geographic regions:\n\n| Region code | Region |\n| - | - |\n| `AFR` | Africa |\n| `APAC` | Asia Pacific |\n| `EEUR` | Eastern Europe |\n| `ENAM` | Eastern North America |\n| `ME` | Middle East |\n| `OC` | Oceania |\n| `SAM` | South America |\n| `WEUR` | Western Europe |\n| `WNAM` | Western North America |\n\nConfigure scoping for your traffic in the **Region code** section when adding or editing a static route. Refer to [Create a static route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-routes/#create-a-static-route) and [Edit a static route](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-routes/#edit-a-static-route) for more information.\n\n## Equal-cost multi-path routing\n\nEqual-cost multi-path routing uses hashes calculated from [packet](https://www.cloudflare.com/learning/network-layer/what-is-a-packet/) data to determine the route chosen. The hash always uses the source and destination IP addresses. For TCP and UDP packets, the hash includes the source and destination ports as well. The ECMP algorithm divides the hash for each packet by the number of equal-cost next hops. The modulus (remainder) determines the route the packet takes.\n\nUsing ECMP has a number of consequences:\n\n* Routing to equal-cost paths is probabilistic.\n* Packets in the same session with the same source and destination have the same hash. The packets also use the same next hop.\n* Routing changes in the number of equal-cost next hops can cause traffic to use different tunnels. For example, dynamic reprioritization triggered by health check events can cause traffic to use different tunnels.\n\nAs a result, ECMP provides load balancing across tunnels with the same prefix and priority.\n\nNote\n\nPackets in the same flow use the same tunnel unless the tunnel priority changes. Packets for different flows can use different tunnels depending on which tunnel the flow's 4-tuple — source and destination IP and source and destination port — hash to.\n\n### Examples\n\nThis diagram illustrates how ECMP distributes traffic equally across two paths with the same prefix and priority.\n\n#### Normal traffic flow",
      "language": "unknown"
    },
    {
      "code": "#### Failover traffic flow: Scenario 1\n\n**Customer router failure**\n\nWhen Magic WAN health checks determine that Tunnel 2 is unhealthy, Magic WAN dynamically de-prioritizes that route, leaving Tunnel 1 as the sole top-priority route. As a result, Magic WAN steers traffic away from Tunnel 2, and all traffic flows to Tunnel 1.",
      "language": "unknown"
    },
    {
      "code": "#### Failover traffic flow: Scenario 2\n\n**Intermediary Internet Service Provider (ISP) failure**\n\nWhen Magic WAN determines that Tunnel 1 is unhealthy as well, that route is also de-prioritized, leaving Tunnel 3 with the top priority route. In that case, all traffic flows to Tunnel 3.",
      "language": "unknown"
    },
    {
      "code": "When Magic WAN determines that Tunnels 1 and 2 are healthy again, it re-prioritizes those routes, and traffic flow returns to normal.\n\n### ECMP and bandwidth utilization\n\nBecause ECMP is probabilistic, the algorithm routes roughly the same number of flows through each tunnel. However, it does not consider the amount of traffic already sent through a tunnel when deciding where to route the next packet.\n\nFor example, consider a scenario with many very low-bandwidth TCP connections and one very high-bandwidth TCP connection. Packets for the high-bandwidth connection have the same hash and thus use the same tunnel. As a result, that tunnel utilizes greater bandwidth than the others.\n\nNote\n\nMagic WAN supports a weight field that you can apply to a route so that a specified percentage of traffic uses a certain tunnel rather than other equal-cost tunnels. Refer to [Route prioritization](#route-prioritization) for more information.\n\nFor example, in a scenario where you want to route 70% of your traffic through ISP A and 30% through ISP B, you can use the weight field to help achieve that.\n\nNote that because ECMP balances flows probabilistically, the use of weights is only approximate.\n\nFor more on Magic WAN tunnel weights, contact your Cloudflare customer service manager.\n\n## BGP information\n\nWhen using a [CNI with Dataplane v2 (beta)](https://developers.cloudflare.com/network-interconnect/) connection as an on-ramp, you can use BGP peering between your network and your Magic routing table.\n\nUsing BGP peering with a CNI allows you to:\n\n* Automate the process of adding or removing networks and subnets.\n* Take advantage of failure detection and session recovery features.\n\nWith this functionality, you can:\n\n* Establish an eBGP session between your devices and the Magic WAN service when connected through CNI.\n* Secure the session by MD5 authentication to prevent misconfigurations.\n* Exchange routes dynamically between your devices and your Magic routing table.\n\n### BGP peering with the Magic routing table\n\nMagic WAN BGP peering is with the Magic networking routing table (as opposed to peering with the Cloudflare Internet global network). BGP peers configured by following this guide will receive advertisements for all prefixes in the Magic routing table plus any additional prefixes configured in the per-interconnect [Advertised prefix list](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-routes/#set-up-bgp-peering).\n\nIf instead you are seeking to do public peering with the Cloudflare ASN 13335 at one of the Cloudflare data centers, refer to [PNI and peering setup](https://developers.cloudflare.com/network-interconnect/). Note that it is not currently possible to share Magic network BGP peering and PNI on the same physical interconnect port.\n\n### BGP route distribution and convergence\n\nCloudflare redistributes routes received from your device into the Magic routing table, which both Magic WAN and Magic Transit use.\n\nAll routes in the Magic routing table are advertised to BGP peers. Each BGP peer will receive each prefix route along with the full `AS_PATH`, with the selected Cloudflare side [ASN](https://www.cloudflare.com/learning/network-layer/what-is-an-autonomous-system/) prepended. This is so that the peer can accurately perform [loop prevention](https://datatracker.ietf.org/doc/html/rfc4271#section-9.1.2).\n\nBGP peering sessions can advertise reachable prefixes to a peer and withdraw previously advertised prefixes. This propagation takes no more than a few minutes.\n\n### BGP timers and settings\n\nCloudflare uses the following timers, which are not configurable:\n\n| Setting | Description |\n| - | - |\n| **Hold timer** | 240 seconds (*To establish a session, Cloudflare will compare our hold timer and the peer's hold timer, and use the smaller of the two values to establish the BGP session.*) |\n| **Keepalive timer** | One third of the hold time. |\n| **Graceful restart** | 120 seconds |\n\n* **Hold timer**: Specifies the maximum amount of time that a BGP peer will wait to receive a keepalive, update, or notification message before declaring the BGP session down. Cloudflare will use the smaller of this default hold time and that received from the peer in the open message.\n* **Keepalive timer**: BGP systems exchange keepalive messages to determine whether the peer router is reachable. If keepalive messages are not received within the Hold Timer, the session is assumed to be down, indicating that the peer is no longer reachable at the BGP protocol level.\n* **Graceful restart timer**: Tracks how long a router will wait for a peer to re-establish a BGP session after the peer initiates a graceful restart. If the peer does not reconnect within this time, the router declares the session down and removes stale routes.\n\n### BGP limitations\n\nBGP multipath is supported. If BGP learns the same prefix on two different interconnects, Cloudflare distributes traffic destined for that prefix across each interconnect according to the usual ECMP behavior.\n\nBGP support currently has the following limitations:\n\n* The Cloudflare account ASN and your device ASN must be different. Only eBGP is supported.\n* Cloudflare always injects routes with a priority of `100`.\n* Bidirectional Forwarding Detection (BFD) is not supported.\n* Only Internet Protocol version 4 (IPv4) routes are supported.\n\n### Tunnel health checks\n\nYou need to enable [legacy health checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/reference/tunnel-health-checks/#legacy-bidirectional-health-checks) alongside BGP. This is essential to determine if a specific Cloudflare data center is reachable from your device. [Tunnel health checks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/reference/tunnel-health-checks/) modify the route priorities for dynamically learned BGP routes.\n\n## Application-aware policies\n\nBy default, Cloudflare balances and steers traffic based on network-layer characteristics (IP, port etc). If you are using the Magic WAN Connector, you can also steer traffic based on well-known applications. Application-aware policies provide easier management and more granularity over traffic flows. For more information, refer to [Applications and app types](https://developers.cloudflare.com/cloudflare-one/traffic-policies/application-app-types/).\n\n</page>\n\n<page>\n---\ntitle: Connect to Cloudflare Gateway with WAN Tunnels · Cloudflare One docs\ndescription: Cloudflare Gateway, our comprehensive Secure Web Gateway, allows\n  you to set up policies to inspect DNS, network, HTTP, and egress traffic.\nlastUpdated: 2025-11-04T17:07:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/cloudflare-gateway/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/cloudflare-gateway/index.md\n---\n\n[Cloudflare Gateway](https://developers.cloudflare.com/cloudflare-one/traffic-policies/), our comprehensive Secure Web Gateway, allows you to set up policies to inspect DNS, network, HTTP, and egress traffic.\n\nYou can apply network and HTTP Gateway policies alongside [Magic Firewall](https://developers.cloudflare.com/magic-firewall/) policies (for L3/4 traffic filtering) to Internet-bound traffic or private traffic entering the Cloudflare network via Magic WAN. Additionally, you can configure Gateway to [resolve DNS queries](#dns-filtering) from Magic WAN.\n\n## HTTPS filtering\n\nIn order to inspect HTTPS traffic, you need to install a Cloudflare root certificate on each client device. You can use the [WARP client](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/warp/) to [automatically install a Cloudflare certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/automated-deployment/) on supported devices. If your device or application does not support certificate installation via WARP, you can [manually install a certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/manual-deployment/). A certificate is required for Cloudflare to [decrypt TLS](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/).\n\nIf you cannot or do not want to install the certificate, you can create [Do Not Inspect](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#do-not-inspect) policies to exempt incompatible Magic WAN traffic from inspection or to disable TLS decryption entirely. Because Gateway cannot discern Magic WAN traffic, you must use [WARP client checks](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/) or the IP addresses associated with Magic WAN to match traffic with Gateway policies. For example, if your organization onboards devices to Magic WAN via WARP, you can exempt devices not running WARP using [OS version checks](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/os-version/):\n\n| Selector | Operator | Value | Logic | Action |\n| - | - | - | - | - |\n| Passed Device Posture Checks | not in | Windows (OS version) | Or | Do Not Inspect |\n| Passed Device Posture Checks | not in | macOS (OS version) | Or | Do Not Inspect |\n| Passed Device Posture Checks | not in | Linux (OS version) | Or | Do Not Inspect |\n| Passed Device Posture Checks | not in | iOS (OS version) | Or | Do Not Inspect |\n| Passed Device Posture Checks | not in | Android (OS version) | | Do Not Inspect |\n\nIf your organization onboards users to Magic WAN via an [on-ramp other than WARP](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/on-ramps/), you can exempt devices from inspection using the IP addresses for your Magic IPsec tunnels:\n\n| Selector | Operator | Value | Action |\n| - | - | - | - |\n| Source IP | in | `203.0.113.0/24` | Do Not Inspect |\n\n## DNS filtering\n\nYou can configure the DNS resolver for your Magic WAN networks to the shared IP addresses for the Gateway DNS resolver. The Gateway DNS resolver IPs are `172.64.36.1` and `172.64.36.2`. When you resolve DNS queries from Magic WAN through Gateway, Gateway will log the queries with the private source IP. You can use the private source IP to create [resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) for queries intended for [internal DNS records](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/#internal-dns).",
      "language": "unknown"
    },
    {
      "code": "## Outbound Internet traffic\n\nBy default, the following traffic routed through Magic WAN tunnels and destined to public IP addresses is proxied/filtered through Cloudflare Gateway:\n\n* TCP, UDP, and ICMP traffic sourced from [RFC 1918](https://datatracker.ietf.org/doc/html/rfc1918) IPs or WARP devices.\n* TCP and UDP traffic sourced from [BYO](https://developers.cloudflare.com/byoip/) or [Leased IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/) and destined to a well-known port (`0`-`1023`).\n\nTraffic destined to public IPs will be routed over the public Internet, unless explicitly specified otherwise. If you want to configure specific public IP ranges to be routed through your Magic WAN tunnels instead of over the public Internet after filtering, contact your account team.\n\nThis traffic will egress from Cloudflare according to the [egress policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/egress-policies/) you define in Cloudflare Gateway. By default, it will egress from a shared Cloudflare public IP range.\n\n## Private traffic\n\nBy default, TCP, UDP, and ICMP traffic routed through Magic WAN tunnels and destined to routes behind [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) will be proxied/filtered through Cloudflare Gateway.\n\nContact your account team to enable Gateway filtering for traffic destined to routes behind Magic WAN tunnels.\n\nIf enabled, by default TCP/UDP traffic meeting **all** the following criteria will be proxied/filtered by Cloudflare Gateway:\n\n* Both source and destination IPs are part of either [RFC1918](https://datatracker.ietf.org/doc/html/rfc1918) space, [WARP](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/warp/), [BYO](https://developers.cloudflare.com/byoip/) or [Leased IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/)\n* Source port must be a client port strictly higher than `1023`\n* Destination port is a well-known port lower than `1024`\n\nOptionally, more specific matches may be specified to override the default:\n\n* Source IP prefix in a subset of RFC1918 space, or [BYO](https://developers.cloudflare.com/byoip/) or [Leased IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/)\n* Destination IP prefix in a subset of RFC1918 space, or [BYO](https://developers.cloudflare.com/byoip/) or [Leased IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/)\n* Destination port number anywhere from `0`-`65535`\n\nSource ports are hard-coded to `1024`-`65535` and may not be overridden.\n\nRun `traceroute`\n\nMagic WAN clients connecting through [GRE](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/), [IPsec](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/), [CNI](https://developers.cloudflare.com/network-interconnect/) or [WARP](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/warp/) that want to perform a `traceroute` to an endpoint behind a [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) will need to change some settings to make the command useful. Refer to [Run `traceroute`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/traceroute/) for more information.\n\n## Test Gateway integration\n\nTo check if Gateway is working properly with your Magic WAN connection, open a browser from a host behind your customer premise equipment, and browse to `https://ifconfig.me`.\n\nIf you are still in the process of testing Gateway, and Cloudflare is not your default route, configure a policy-based route on your router to send traffic to Cloudflare Gateway first, before browsing to `https://ifconfig.me`.\n\nConfirm there is an entry for the test in [HTTP Gateway Activity Logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/gateway-logs/#http-logs). The destination IP address should be the public IP address of `ifconfig.me`, and the source IP address should be the private (WAN) address of the host with the browser. Your outbound connection should be sourced from a Magic WAN IP address, and not any public IP address that Cloudflare might be advertising on your behalf. This is true as well when using [Magic Transit With Egress Option](https://developers.cloudflare.com/reference-architecture/architectures/magic-transit/#magic-transit-with-egress-option-enabled).\n\nAdditionally, test both `http://ifconfig.me` (non-TLS) and `https://ifconfig.me` (TLS) to ensure that your [TCP maximum segment size (MSS Clamping)](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/get-started/#set-maximum-segment-size) has been set properly. If the response to the HTTPS query hangs or fails, but HTTP works, it is possible that the MSS value is too high or not set. Reduce this value on your customer premise equipment to match the overhead introduced by your [IKE](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/reference/gre-ipsec-tunnels/#supported-configuration-parameters) and [ESP](https://en.wikipedia.org/wiki/IPsec#Encapsulating_Security_Payload) settings.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Tunnel · Cloudflare One docs\ndescription: Magic WAN can work together with Cloudflare Tunnel to provide easy\n  access between your networks and applications.\nlastUpdated: 2025-11-04T17:07:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/cloudflare-tunnel/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/cloudflare-tunnel/index.md\n---\n\nMagic WAN can work together with [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) to provide easy access between your networks and applications.\n\nBy default, TCP, UDP, and ICMP traffic routed through Magic WAN tunnels and destined to routes behind Cloudflare Tunnel is proxied and filtered through [Cloudflare Gateway](https://developers.cloudflare.com/cloudflare-one/traffic-policies/).\n\n## Route evaluation and precedence\n\n[Private network routes](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/) are evaluated together across the Cloudflare Tunnel and Magic Networking routing tables. If traffic matches either a Cloudflare Tunnel route (in any virtual network) or a Magic Networking route, the matched route determines the next hop.\n\nWhen a destination IP matches both a Cloudflare Tunnel private network route and a Magic Networking route, Cloudflare Tunnel takes precedence. This happens whenever a `cloudflared` tunnel CIDR matches a packet, regardless of prefix length. For example, a `cloudflared` tunnel with prefix `10.1.2.0/24` takes precedence over a static route configured to `10.1.2.4/32`, and Cloudflare sends packets over the tunnel instead of a GRE tunnel.\n\nFor complex deployments where you need overlapping routes in both Cloudflare Tunnel and Magic Networking, consult your Solutions Engineering team for guidance.\n\nFor more information about private network routes with `cloudflared`, refer to [Connect with cloudflared](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/).\n\n## Test `cloudflared` tunnel integration\n\nTo verify that a `cloudflared` tunnel works correctly with your Magic WAN connection:\n\n1. From a host behind your customer premises equipment, open a browser.\n2. Browse to an IP address or hostname that is reachable through a Cloudflare Tunnel private network route, such as the example destination `10.1.2.3`.\n3. Confirm that the application loads as expected.\n\nIf the application loads correctly, Cloudflare Tunnel is handling the traffic as configured.\n\nRun `traceroute`\n\nMagic WAN clients connecting through [GRE](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/), [IPsec](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/), [CNI](https://developers.cloudflare.com/network-interconnect/) or [WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/) that want to perform a `traceroute` to an endpoint behind a [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) will need to change some settings to make the command useful. Refer to [Run `traceroute`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/traceroute/) for more information.\n\n</page>\n\n<page>\n---\ntitle: Use WARP as an on-ramp · Cloudflare One docs\ndescription: Use WARP as an on-ramp to Magic WAN and route traffic from user\n  devices with WARP installed to any network connected with Cloudflare Tunnel or\n  IP-layer tunnels (anycast GRE, IPsec, or CNI).\nlastUpdated: 2025-12-17T16:32:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/warp/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/zero-trust/warp/index.md\n---\n\nNote\n\nBy default, direct WARP-to-WARP connections are not supported for devices located behind Magic WAN with WARP enabled. This is due to issues caused by double encapsulation and asymmetric routing.\n\nWhen a device is behind Magic WAN, it is recommended to avoid enabling WARP. Instead, access the device using its local LAN IP from remote systems, rather than relying on WARP-to-WARP communication.\n\nIf you do want to use WARP on a device behind Magic WAN and connect to its WARP IP (within the `100.96.0.0/12` range), you will need to adjust your WARP profiles. Specifically, exclude the `100.96.0.0/12` subnet from the on-premises WARP profile, and include it in the off-premises profile.\n\nUse [WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/) as an on-ramp to Magic WAN and route traffic from user devices with WARP installed to any network connected with Cloudflare Tunnel or Magic IP-layer tunnels (anycast [GRE, IPsec](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/#add-tunnels), or [CNI](https://developers.cloudflare.com/network-interconnect/)). Take advantage of the integration between Magic WAN and [Magic Firewall](https://developers.cloudflare.com/magic-firewall/) and enforce policies at Cloudflare's global network.\n\n## Prerequisites\n\nBefore you can begin using WARP as an on-ramp to Magic WAN, you must set up your [Zero Trust account](https://developers.cloudflare.com/cloudflare-one/setup/#create-a-zero-trust-organization).\n\n## IP ranges\n\nWhen connecting a WARP device to Magic WAN, you will have virtual IP addresses from WARP, in the `100.96.0.0/12` range.\n\n***\n\n## Set up WARP with Magic WAN\n\n### 1. Route packets back to WARP devices\n\nRoute packets back to WARP devices from services behind an anycast GRE or other type tunnel. You need to do this before actually installing WARP. Otherwise, your infrastructure will not route packets correctly to Cloudflare global network and connectivity will fail.\n\nCloudflare will assign IP addresses from the WARP virtual IP (VIP) space to your WARP devices. To view your virtual IP address, go to [Cloudflare One](https://one.dash.cloudflare.com/), and select **My Team > Devices**.\n\nAll packets with a destination IP in the VIP space need to be routed back through the tunnel. For example, with a single GRE tunnel named `gre1`, in Linux, the following command would add a routing rule that would route such packets:",
      "language": "unknown"
    },
    {
      "code": "Note\n\nAfter set up, **HTTP** and **Network logs** in Gateway will show the virtual IP address of your WARP device as the **Source IP**. DNS logs will continue to show the original WARP device IP because DNS traffic is sent over the public Internet to Cloudflare's public-facing resolver.\n\n### 2. Configure Split Tunnels\n\nConfigure [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) from your Zero Trust account to only include traffic from the private IP addresses you want to access.\n\nOptionally, you can configure Split Tunnels to include IP ranges or domains you want to use for connecting to public IP addresses.\n\n### 3. Install the WARP client on your device\n\nRefer to [Deploy WARP to your organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/) for more information on whether to choose a manual or managed deployment.\n\nYou should be able to access Private IP addresses specified in the Split Tunnel configuration.\n\nYou must log out and log back in with at least one WARP device to ensure the configuration updates on your device.\n\nRun `traceroute`\n\nMagic WAN clients connecting through [GRE](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/#add-tunnels), [IPsec](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/configure-tunnel-endpoints/#add-tunnels), [CNI](https://developers.cloudflare.com/network-interconnect/) or [WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/) that want to perform a `traceroute` to an endpoint behind a [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) will need to change some settings to make the command useful. Refer to [Run `traceroute`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/wan-tunnels/configuration/manually/how-to/traceroute/) for more information.\n\n## Double encapsulation\n\nWhen a WARP user goes to a location (like an office) with a Magic WAN tunnel already set up, WARP traffic is doubly encapsulated - first by WARP and then by Magic WAN. This is unnecessary, since each on-ramp method provides full Zero Trust protection.\n\nSince WARP traffic is already protected on its own, Cloudflare recommends that you set up Magic WAN to exclude WARP traffic, sending it to the Internet through regular connections.\n\nTo learn which IP addresses and UDP ports you should exclude to accomplish this, refer to [WARP ingress IP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#warp-ingress-ip).\n\n### WARP and Magic WAN Connector\n\nIf you have Magic WAN Connector and WARP clients deployed in your premises, Magic WAN Connector automatically routes WARP traffic to the Internet rather than Magic WAN IPsec tunnels. This prevents traffic from being encapsulated twice.\n\nYou may need to configure your firewall to allow this new traffic. Make sure to allow the following IPs and ports:\n\n* **Destination IPs**: `162.159.193.0/24`, `162.159.197.0/24`\n* **Destination ports**: `443`, `500`, `1701`, `2408`, `4443`, `4500`, `8095`, `844`\n\nRefer to [WARP with firewall](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/) for more information on this topic.\n\n## Test WARP integration\n\nBefore testing, be sure to [configure domain fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/#add-a-domain) for the server or service in WARP settings. This is needed because by default Cloudflare Zero Trust excludes common top level domains used for local resolution from being sent to Gateway for processing.\n\nIf WARP integration has been enabled for the account within the last day, log off and on again in the WARP client before testing.\n\nTo check if WARP is working correctly as an on-ramp, you can do a resolution test on a [fully qualified domain name (FQDN)](https://en.wikipedia.org/wiki/Fully_qualified_domain_name) for a server or service in the Magic WAN. Test this from a user with a WARP device.\n\nFor example:",
      "language": "unknown"
    },
    {
      "code": "This DNS lookup should return a valid IP address associated with the server or service you are testing for.\n\nNext, test with a browser that you can connect to a service on the WAN by opening a webpage that is only accessible on the WAN. The server can be the same server used in the DNS lookup or another server in the WAN. Connecting using an IP address instead of a domain name should work.\n\n</page>\n\n<page>\n---\ntitle: Device profiles · Cloudflare One docs\ndescription: A device profile defines WARP client settings for a specific set of\n  devices in your organization. You can create multiple profiles and apply\n  different settings based on the user's identity, the device's location, and\n  other criteria.\nlastUpdated: 2025-10-24T18:24:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/index.md\n---\n\nA device profile defines [WARP client settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) for a specific set of devices in your organization. You can create multiple profiles and apply different settings based on the user's identity, the device's location, and other criteria.\n\nFor example, users in one identity provider group (signifying a specific office location) might have different routes that need to be excluded from their WARP tunnel, or some device types (like Linux) might need different DNS settings to accommodate local development services.\n\n## Create a new profile\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles**.\n  2. In the **Profile** card, select **Create new profile**. This will make a copy of the **Default** profile.\n  3. Enter any name for the profile.\n  4. Create rules to define the devices that will use this profile. Learn more about the available [Selectors](#selectors), [Operators](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/#comparison-operators), and [Values](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/#value).\n  5. Configure [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#device-settings) for these devices.\n\n  Note\n\n  At this time, **Split Tunnels** and **Local Domain Fallback** can only be modified after you save the profile.\n\n  1. Select **Create profile**.\n\n  Your profile will appear in the **Profile settings** list. You can rearrange the profiles in the list according to your desired [order of precedence](#order-of-precedence).\n\n* API\n\n  Send a `POST` request to the [Devices API](https://developers.cloudflare.com/api/resources/zero_trust/subresources/devices/subresources/policies/subresources/custom/methods/create/):\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zero Trust Write`",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Create a new profile using the [`cloudflare_zero_trust_device_custom_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile) resource:",
      "language": "unknown"
    },
    {
      "code": "## Edit profile settings\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to update and select **Configure**.\n\n3. Use [selectors](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/#selectors) to add or adjust match rules, and modify [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#device-settings) for this profile as needed.\n\n   Note\n\n   Changing any of the settings below will cause the WARP connection to restart. The user may experience a brief period of connectivity loss while the new settings are being applied.\n\n   * [Service mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#service-mode)\n   * [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#local-domain-fallback)\n   * [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#split-tunnels)\n\n4. Select **Save profile**.\n\nIt may take up to 10 minutes for newly updated settings to propagate to devices.\n\n## Verify device profile\n\n### Via the dashboard\n\nTo verify the last active device profile for a specific device:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices**.\n2. Under devices, find your device.\n3. Review the device profile under **Last active device profile**.\n\nTo verify the last active device profile for a user's devices:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Users**.\n2. Under **User name**, find the user you would like to investigate.\n3. Select **Devices** to see all devices used by the user.\n4. Find the device you want to investigate and verify the last active device profile for that device under the **Device profile** column.\n\nAlternatively, you can use [DEX remote captures](https://developers.cloudflare.com/cloudflare-one/insights/dex/remote-captures/) to collect WARP diagnostic logs. The device profile UUID is shown in your [detection report](https://developers.cloudflare.com/cloudflare-one/insights/dex/remote-captures/#warp-diagnostics-analyzer-beta) under `Profile ID`.\n\n### Via the CLI\n\nTo check which device profile and profile settings are currently on a device, open a terminal and run:",
      "language": "unknown"
    },
    {
      "code": "The device profile UUID is shown in the `Profile ID` field.\n\n## Selectors\n\nYou can configure device profiles to match against the following selectors, or criteria. Identity-based selectors are only available if the user [enrolled the device](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) by logging in to an identity provider (IdP).\n\n### User email\n\nApply a device profile based on the user's email.\n\n| UI name | API example value |\n| - | - |\n| User email | `identity.email == \"user-name@company.com\"` |\n\n### User group emails\n\nApply a device profile based on an [IdP group](https://developers.cloudflare.com/cloudflare-one/traffic-policies/identity-selectors/#idp-groups-in-gateway) email address of which the user is configured as a member in the IdP.\n\n| UI name | API example |\n| - | - |\n| User group emails | `identity.groups.email == \"contractors@company.com\"` |\n\n### User group IDs\n\nApply a device profile based on an [IdP group](https://developers.cloudflare.com/cloudflare-one/traffic-policies/identity-selectors/#idp-groups-in-gateway) ID of which the user is configured as a member in the IdP.\n\n| UI name | API example |\n| - | - |\n| User group IDs | `identity.groups.id == \"12jf495bhjd7893ml09o\"` |\n\n### User group names\n\nApply a device profile based on an [IdP group](https://developers.cloudflare.com/cloudflare-one/traffic-policies/identity-selectors/#idp-groups-in-gateway) name of which the user is configured as a member in the IdP.\n\n| UI name | API example |\n| - | - |\n| User group names | `identity.groups.name == \"\\\"finance\\\"\"` |\n\n### Operating system\n\nApply a device profile based on the operating system of the device.\n\n| UI name | API example |\n| - | - |\n| Operating system | `os.name in {\\\"windows\\\" \\\"mac\\\"}` |\n\n### Operating system version\n\nApply a device profile based on the [OS version](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/os-version/#determine-the-os-version) of the device.\n\n| UI name | API example |\n| - | - |\n| Operating system version | `os.version == \\\"1.2.0\\\"` |\n\nNote\n\nThe OS version must be specified as a valid [Semver](https://semver.org/). For example, if your device is running OS version `1.2`, you must enter `1.2.0`.\n\n### Managed network\n\nApply a device profile based on the [managed network](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/) that the device is connected to.\n\n| UI name | API example |\n| - | - |\n| Managed network | `network == \\\"Austin office\\\"` |\n\n### SAML attributes\n\nApply a device profile based on an attribute name and value from a [SAML IdP](https://developers.cloudflare.com/cloudflare-one/traffic-policies/identity-selectors/#generic-saml-idp).\n\n| UI name | API example |\n| - | - |\n| SAML Attributes | `identity.saml_attributes == \"\\\"group=finance\\\"\"` |\n\n### Service token\n\nApply a device profile based on the [service token](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#check-for-service-token) used to enroll the device.\n\n| UI name | API example |\n| - | - |\n| Service Token | `identity.service_token_uuid == \\\"f174e90a-fafe-4643-bbbc-4a0ed4fc8415\\\"` |\n\n## Comparison operators\n\nComparison operators determine how device profiles match a selector.\n\n| Operator | Meaning |\n| - | - |\n| is | equals the defined value |\n| in | matches at least one of the defined values |\n\n## Logical operators\n\nTo evaluate multiple conditions in an expression, select a logical operator:\n\n| Operator | Meaning |\n| - | - |\n| And | match all of the conditions in the expression |\n| Or | match any of the conditions in the expression |\n\n## Order of precedence\n\nCloudflare WARP evaluates device profiles dynamically based on a hierarchy. When a device connects, WARP checks the profiles from top to bottom as they appear in the dashboard. WARP follows the first match principle — once a device matches a profile, WARP stops evaluating and no subsequent profiles can override the decision.\n\nThe **Default** profile is always at the bottom of the list. It will only be applied if the device does not meet the criteria of any profile listed above it. If you make another custom profile the default, all settings will be copied over into the **Default** profile.\n\nAdministrators can create multiple profiles to apply different settings based on specific criteria such as user identity, location, or operating system. Understanding this top-to-bottom evaluation order is crucial for ensuring that the correct policies are applied to devices.\n\n</page>\n\n<page>\n---\ntitle: DNS resolver IPs and hostnames · Cloudflare One docs\ndescription: When you create a DNS location, Gateway assigns IPv4/IPv6 addresses\n  and DoT/DoH hostnames to that location. These are the IP addresses and\n  hostnames you send your DNS queries to for Gateway to resolve.\nlastUpdated: 2025-11-21T18:29:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/locations/dns-resolver-ips/\n  md: https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/locations/dns-resolver-ips/index.md\n---\n\nWhen you create a DNS location, Gateway assigns IPv4/IPv6 addresses and DoT/DoH hostnames to that location. These are the IP addresses and hostnames you send your DNS queries to for Gateway to resolve.\n\nTo view the resolver endpoint IP addresses and hostnames for a DNS location:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Resolvers & Proxies**.\n2. Select the DNS location, then select **Edit**.\n3. Go to **Setup instructions**. The addresses and hostnames will appear in **Your configuration**.\n\n## DNS query location matching\n\nGateway uses different methods to match a DNS query to DNS locations depending on the type of request and network:",
      "language": "unknown"
    },
    {
      "code": "1. First, Gateway checks whether the query was sent using DNS over HTTPS. If yes, Gateway looks up the DNS location by its unique hostname.\n2. Next, if the query was not sent with DNS over HTTPS, Gateway checks whether it was sent over IPv4. If yes, it looks up the DNS location by the source IPv4 address.\n3. Last, if the query was not sent over IPv4, it means it was sent over IPv6. Gateway will look up the DNS location associated with the query based on the unique DNS resolver IPv6 address.\n\n## IPv4/IPv6 address\n\n### Source IP\n\nGateway uses the public source IPv4 address of your network to identify your DNS location, apply policies, and log DNS requests. Unless you have purchased a [dedicated IPv4 resolver IP](#dedicated-dns-resolver-ip), you must provide source IP addresses for the IPv4 traffic you want to filter with DNS policies. Otherwise, Gateway will not be able to attribute the traffic to your account.\n\nIf you are on an Enterprise plan, you have the option of manually entering one or more source IP addresses of your choice. This enables you to create Gateway DNS locations even if you are not connecting from any of those networks' IP addresses.\n\n### DNS resolver IP\n\nWhen you create a DNS location, Gateway will resolve queries over IPv4 with the default DNS resolver IP addresses. These addresses are anycast IP addresses shared across every Cloudflare Zero Trust account. To resolve queries over IPv6, your location will receive and use a unique DNS resolver IPv6 address. These IP addresses are how Gateway will match DNS queries to locations and apply the appropriate filtering rules.\n\n#### Dedicated DNS resolver IP\n\nEnterprise users can request a dedicated DNS resolver IPv4 address to be provisioned for a DNS location instead of the default anycast addresses. Queries forwarded to that address will be identified using the dedicated DNS resolver IPv4 address.\n\nCloudflare will only assign resolver IP addresses to the Zero Trust account you request. For more information on requesting dedicated DNS resolver IPv4 addresses, contact your account team.\n\n#### Bring your own DNS resolver IP\n\nEnterprise users can use their own authority-provided IPv4 and IPv6 addresses as DNS endpoints for a location. Gateway can resolve UDP, TCP, DoT, and DoH queries through the IPv4 addresses provided, as well as UDP and TCP queries through the IPv6 addresses provided.\n\nAfter you onboard your IP addresses, the IP addresses will appear under the associated endpoint when you create a new DNS location. If you did not provide IP addresses for a specific endpoint type, you can use the default Cloudflare resolver IPs or dedicated resolver IPs alongside your own resolver IPs. For example, if you want to use the IPv6 endpoint but only provided IPv4 addresses, you can use your own resolver IPs for IPv4 and the default Cloudflare IPs for IPv6.\n\nFor more information, refer to [Cloudflare BYOIP](https://developers.cloudflare.com/byoip/) or contact your account team.\n\n## DNS over TLS (DoT)\n\nEach DNS location is assigned a unique hostname for DNS over TLS (DoT). Gateway will identify your location based on its DoT hostname.\n\n## DNS over HTTPS (DoH)\n\nEach DNS location is assigned a unique hostname for DNS over HTTPS (DoH). Gateway will identify your location based on its DoH hostname.\n\n### DoH subdomain\n\nEach DNS location in Cloudflare Zero Trust has a unique DoH subdomain (previously known as unique ID). If your organization uses DNS policies, you can enter your location's DoH subdomain as part of the WARP client settings.\n\nFor example, for the DoH hostname `https://65y9p2vm1u.cloudflare-gateway.com/dns-query`, the DoH subdomain is `65y9p2vm1u`.\n\n## Send specific queries to Gateway\n\nBy default, all queries from a configured DNS location will be sent to its DNS resolver IP address to be inspected by Gateway. You can configure Gateway to only filter queries originating from specific networks within a location:\n\n1. [Create an IP list](https://developers.cloudflare.com/cloudflare-one/reusable-components/lists/) with the IPv4 and/or IPv6 addresses that your organization will source queries from.\n2. Add a [Source IP](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/#source-ip) condition to your DNS policies.\n\nFor example, to block security threats for specific networks, you could create the following policy:\n\n| Selector | Operator | Value | Logic | Action |\n| - | - | - | - | - |\n| Security Categories | in | Select all categories that apply | And | Block |\n| Source IP | in list | The name of the IP list containing your organization's networks | | |\n\nDNS queries made from IP addresses that are not in your IP list will not be filtered or populate your organization's [Gateway activity logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/gateway-logs/).\n\n</page>\n\n<page>\n---\ntitle: Managed networks · Cloudflare One docs\ndescription: Cloudflare WARP allows you to selectively apply specific device\n  profiles and WARP client settings when a device connects to a secure network\n  location, such as an office. WARP identifies these managed networks by\n  detecting a TLS endpoint you set up on the network.\nlastUpdated: 2025-10-24T18:24:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/index.md\n---\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| All modes | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2025.1.861.0 |\n| macOS | ✅ | 2025.1.861.0 |\n| Linux | ✅ | 2025.1.861.0 |\n| iOS | ✅ | 1.0 |\n| Android | ✅ | 1.0 |\n| ChromeOS | ✅ | 1.0 |\n\nCloudflare WARP allows you to selectively apply specific [device profiles](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) and WARP client settings when a device connects to a secure network location, such as an office. WARP identifies these managed networks by detecting a TLS endpoint you set up on the network.\n\nOn this page, you will learn how to:\n\n* Create a TLS endpoint on your trusted network.\n* Configure the TLS endpoint in Zero Trust to set up a managed network.\n* Apply the appropriate device profile to a device when the WARP client detects it is on your managed network.\n\n## Requirements\n\n* The WARP client scans for managed networks when the operating system's default route changes, the SSID of the active Wi-Fi connection changes, or the DNS servers of the default interface change. To minimize performance impact, reuse the same TLS endpoint across multiple locations unless you require distinct settings profiles for each location.\n* Ensure that the device can only reach one managed network at any given time. If multiple managed networks are configured and reachable, there is no way to determine which settings profile the device will receive.\n\n## WARP client managed network detection\n\nWhen you configure a managed network, the WARP client uses the TLS endpoint to determine whether the device is on that network.\n\nThe time it takes to apply the correct device profile depends on how quickly the TLS endpoint responds.\n\nIf the TLS endpoint times out after 5 seconds, the WARP client will determine that the device is not on a managed network and will apply the default device profile. The WARP client only retries detection if a non-timeout error occurs. A timeout triggers fallback to the default device profile without further retries.\n\n## 1. Choose a TLS endpoint\n\nA TLS endpoint is a host on your network that serves a TLS certificate. The TLS endpoint acts like a network location beacon — when a device connects to a network, the WARP client on the device detects the TLS endpoint and validates the TLS certificate against the SHA-256 fingerprint (if specified) or against the local certificate store to check that it is signed by a public certificate authority.\n\nThe TLS certificate can be hosted by any device on your network. However, the endpoint must be inaccessible to users outside of the network location. WARP will automatically exclude the managed network endpoint from all device profiles to ensure that users cannot connect to this endpoint over Cloudflare Tunnel. We recommend choosing a host that is physically in the office which remote users do not need to access, such as a printer.\n\n### Create a new TLS endpoint\n\nIf you do not already have a TLS endpoint on your network, you can set one up as follows:\n\n1. Generate a TLS certificate:",
      "language": "unknown"
    },
    {
      "code": "The command will output a certificate in PEM format and its private key. Store these files in a secure place.\n\n   Note\n\n   The WARP client requires certificates to include `CN` and `subjectAltName` metadata. You can use `example.com` or any other domain.\n\n2. Configure an HTTPS server on your network to use this certificate and key. The example below demonstrates how to serve the TLS certificate from an nginx container in Docker:\n\n   a. Create an nginx configuration file called `nginx.conf`:",
      "language": "unknown"
    },
    {
      "code": "If needed, replace `/certs/example.pem` and `/certs/example.key` with the locations of your certificate and key.\n\n   b. Add the nginx image to your Docker compose file:",
      "language": "unknown"
    },
    {
      "code": "If needed, replace `./nginx.conf` and `./certs` with the locations of your nginx configuration file and certificate.\n\n   c. Start the server:",
      "language": "unknown"
    },
    {
      "code": "3. To test that the TLS server is working, run a curl command from the end user's device:",
      "language": "unknown"
    },
    {
      "code": "You need to pass the `--insecure` option because we are using a self-signed certificate. If the device is connected to the network, the request should return a `200` status code.\n\nWindows IIS\n\nTo create a TLS endpoint using Windows Internet Information Services (IIS) Manager:\n\n1. Run Powershell as administrator.\n\n2. Generate a self-signed certificate:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. Extract the certificate's SHA-256 fingerprint:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "You will need the SHA-256 fingerprint to [configure the managed network in Zero Trust](#3-add-managed-network-to-zero-trust). Do not use the default SHA-1 thumbprint generated by the `New-SelfSignedCertificate` command.\n\n4. Open IIS Manager.\n\n5. In the **Connections** pane, right-click the **Sites** node and select **Add Website**.\n\n6. In **Site name**, enter any name for the TLS server (for example, `Managed Network Server`).\n\n7. In **Physical path**, enter any directory that contains a `.htm` or `html` file, such as `C:\\inetpub\\wwwroot`. Cloudflare does not validate the content within the directory.\n\n8. Under **Binding**, configure the following fields:\n\n   * **Type**: *https*\n   * **IP address**: *All Unassigned*\n   * **Port**: `443`\n   * **Host name**: Enter the certificate's Common Name (CN). The CN of our example certificate is `office-name.example.internal`.\n   * **Require Server Name Indication**: Enabled\n   * **SSL certificate**: Select the name of your TLS certificate. Our example certificate is called `Cloudflare Managed Network Certificate`.\n\n9. To test that the TLS server is working, run a curl command from the end user's device:",
      "language": "unknown"
    },
    {
      "code": "You need to pass the `--insecure` option because we are using a self-signed certificate. The `--resolve` option allows you to connect to the server's private IP but also pass the hostname to the server for SNI and certificate validation. If the device is connected to the network, the request should return your directory's default homepage (`C:\\inetpub\\wwwroot\\iisstart.htm`).\n\n### Supported cipher suites\n\nThe WARP client establishes a TLS connection using [Rustls](https://github.com/rustls/rustls). Make sure your TLS endpoint accepts one of the [cipher suites supported by Rustls](https://docs.rs/rustls/0.21.10/src/rustls/suites.rs.html#125-143).\n\n## 2. Extract the SHA-256 fingerprint\n\nThe SHA-256 fingerprint is only required if your TLS endpoint uses a self-signed certificate.\n\n* Local certificate\n\n  To obtain the SHA-256 fingerprint of a local certificate:",
      "language": "unknown"
    },
    {
      "code": "The output will look something like:",
      "language": "unknown"
    },
    {
      "code": "* Remote server\n\n  To test connectivity and obtain the SHA-256 fingerprint of a remote server:",
      "language": "unknown"
    },
    {
      "code": "The output will look something like:",
      "language": "unknown"
    },
    {
      "code": "## 3. Add managed network to Cloudflare One\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Select **Managed networks** and select **Add new managed network**.\n\n  3. Name your network location.\n\n  4. In **Host and Port**, enter the private IP address and port number of your [TLS endpoint](#create-a-new-tls-endpoint) (for example, `192.168.185.198:3333`).\n\n     Note\n\n     We recommend using the private IP of your managed network endpoint and not a hostname to prevent issues related to DNS lookups resolving the incorrect IP.\n\n  5. (Optional) In **TLS Cert SHA-256**, enter the [SHA-256 fingerprint](#2-extract-the-sha-256-fingerprint) of the TLS certificate. This field is only needed for self-signed certificates. If a TLS fingerprint is not supplied, WARP validates the certificate against the local certificate store and checks that it is signed by a public certificate authority.\n\n  6. Select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Add a managed network using the [`cloudflare_zero_trust_device_managed_network`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_managed_network) resource:",
      "language": "unknown"
    },
    {
      "code": "WARP will automatically exclude the TLS endpoint from all device profiles if it is specified as a private IP address. This exclusion prevents remote users from accessing the endpoint through the WARP tunnel on any port. If the TLS endpoint is specified as a hostname instead of a private IP, WARP will not automatically exclude it.\n\nIf a device profile uses [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) in **Include** mode, ensure that the Split Tunnel entries do not contain the TLS endpoint IP address; otherwise, the entire IP range will be excluded from the WARP tunnel.\n\n## 4. Configure device profile\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Under **Profiles**, create a new [profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) or edit an existing profile.\n\n  3. To apply this profile whenever a device connects to your network, add the following rule:\n\n     | Selector | Operator | Value |\n     | - | - | - |\n     | Managed network | is | `<NETWORK-NAME>` |\n\n  4. Save the profile.\n\n* Terraform (v5)\n\n  In [`cloudflare_zero_trust_device_custom_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile), configure a `match` expression using the `network` selector. For example, the following device profile will match all devices connected a specific managed network:",
      "language": "unknown"
    },
    {
      "code": "Managed networks are now enabled. Every time a device in your organization connects to a network (for example, when waking up the device or changing Wi-Fi networks), the WARP client will determine its network location and apply the corresponding settings profile.\n\n## 5. Verify managed network\n\nTo check if the WARP client detects the network location:\n\n1. Turn on WARP.\n2. Disconnect and reconnect to the network.\n3. Open a terminal and run `warp-cli debug alternate-network`.\n\n## Related resources\n\n* [Device profiles](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) - How to create and manage the device profiles you apply via managed networks.\n* [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) - Defines how WARP behaves and what users can do.\n* [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/) - Troubleshoot common WARP issues.\n\n</page>\n\n<page>\n---\ntitle: Route traffic · Cloudflare One docs\ndescription: When the WARP client is deployed on a device, Cloudflare will\n  process all DNS queries and network traffic by default. However, under certain\n  circumstances, you may need to exclude specific DNS queries or network traffic\n  from WARP. For example, you may need to resolve an internal hostname with a\n  private DNS resolver instead of Cloudflare's public DNS resolver.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/index.md\n---\n\nWhen the WARP client is deployed on a device, Cloudflare will process all DNS queries and network traffic by default. However, under certain circumstances, you may need to exclude specific DNS queries or network traffic from WARP. For example, you may need to resolve an internal hostname with a private DNS resolver instead of Cloudflare's [public DNS resolver](https://developers.cloudflare.com/1.1.1.1/).\n\nCloudflare recommends Enterprise users configure [Gateway resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) to resolve traffic with custom resolvers. WARP will send private DNS queries to Gateway, then Gateway will send the queries to custom resolvers based on matching policies.\n\nAdditionally, there are three options you can configure to exclude traffic from WARP:\n\n* [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/): Use Local Domain Fallback to instruct the WARP client to proxy DNS requests for a specified domain to a resolver that is not Cloudflare Gateway. This is useful when you have private hostnames that would not otherwise resolve on the public Internet.\n\n  Warning\n\n  Gateway will not encrypt, monitor, or apply DNS policies to DNS queries to domain names entered in Local Domain Fallback.\n\n* [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) Exclude mode: Use Exclude mode to instruct the WARP client to ignore traffic to a specified set of IP addresses or domains. Any traffic that is destined to an IP address or domain defined in the Split Tunnels Exclude configuration will be ignored by the WARP client and handled by the local machine. Use this mode when you want the majority of your traffic encrypted and processed by Gateway, but need to exclude certain routes due to app compatibility, or if you need WARP to run alongside a VPN.\n\n* [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) Include mode: Use Include mode to instruct the WARP client to only handle traffic to a specified set of IP addresses or domains. Any traffic that is not included by an IP address or domain defined in the Split Tunnel Include configuration will be ignored by the WARP client and handled by the local machine. Use this mode when you only want specific traffic processed by Gateway, such as when using Tunnels for a specific resource.\n\n  Warning\n\n  Gateway will not encrypt, manage, or monitor traffic excluded from WARP by a Split Tunnel configuration.\n\n## How the WARP client handles DNS requests\n\nWhen you use the WARP client together with `cloudflared` Tunnels or third-party VPNs, Cloudflare evaluates each request and routes it according to the following traffic flow:",
      "language": "unknown"
    },
    {
      "code": "#### Terms mentioned\n\n#### On-ramps (how traffic gets onto Cloudflare)\n\n* On-ramp\n* [Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/)\n* [WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/)\n* [Magic WAN](https://developers.cloudflare.com/magic-wan/)\n\n#### Routing features (how queries are handled)\n\n* [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/)\n* [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/)\n* [Gateway Resolver Policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/)\n\n#### Resolvers (where queries are resolved)\n\n* [Internal DNS](https://developers.cloudflare.com/dns/internal-dns/)\n* [1.1.1.1](https://developers.cloudflare.com/1.1.1.1/)\n\n## Add a DNS suffix\n\nSupport for DNS suffix search lists in WARP is currently in development. You can manually configure DNS suffixes at the device level using the following instructions.\n\n### macOS\n\nTo manually configure a DNS suffix on macOS:\n\n1. Open **System Settings** (or **System Preferences** on older macOS versions).\n2. Go to **Network** and select your active connection (**Wi-Fi** or **Ethernet**).\n3. Select **Details** (or **Advanced**).\n4. Go to the **DNS** tab.\n5. Under **Search Domains**, select the `+` button and add your DNS suffix.\n6. Select **OK**, then **Apply**.\n\n### Windows\n\nTo manually configure a DNS suffix on Windows:\n\n1. Open the **Search** bar in Windows, type **View network connections**, and select **Open**.\n2. Right-click the network adapter (**Wi-Fi** or **Ethernet**) you want to modify and select **Properties**. (Admin privileges required.)\n3. Double-click **Internet Protocol Version 4 (TCP/IPv4)**.\n4. In the **Internet Protocol (TCP/IP) Properties** window, select **Advanced**.\n5. Go to the **DNS** tab.\n6. Select **Append these DNS suffixes (in order)**.\n7. Select **Add**, enter your DNS suffix and select **Add**.\n8. Select **OK** on all windows to apply changes.\n\n</page>\n\n<page>\n---\ntitle: WARP modes · Cloudflare One docs\ndescription: You can deploy the WARP client in different modes to control the\n  types of traffic sent to Cloudflare Gateway. The WARP mode determines which\n  Zero Trust features are available on the device.\nlastUpdated: 2025-10-23T22:25:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/index.md\n---\n\nYou can deploy the WARP client in different modes to control the types of traffic sent to Cloudflare Gateway. The WARP mode determines which Zero Trust features are available on the device.\n\n## Gateway with WARP (default)\n\nThis mode is best suited for organizations that want to use advanced firewall/proxy functionalities and enforce device posture rules.\n\n| DNS filtering | Network filtering | HTTP filtering | Features enabled |\n| - | - | - | - |\n| Yes | Yes | Yes | DNS policies, network policies, HTTP policies, Browser Isolation, identity-based policies, device posture checks, AV scanning, and Data Loss Prevention |\n\n## Gateway with DoH\n\nGateway with DNS-over-HTTPS (DoH) is best suited for organizations that only want to apply DNS filtering to outbound traffic from their company devices. Network and HTTP traffic is handled by the default mechanisms on your devices.\n\n| DNS filtering | Network filtering | HTTP filtering | Features enabled |\n| - | - | - | - |\n| Yes | No | No | DNS policies |\n\n## Secure Web Gateway without DNS filtering\n\nSecure Web Gateway without DNS filtering mode (sometimes referred to as tunnel-only mode) is best suited for organizations that want to proxy network and HTTP traffic but keep their existing DNS filtering software. DNS traffic is handled by the default mechanism on your device.\n\n| DNS filtering | Network filtering | HTTP filtering | Features enabled |\n| - | - | - | - |\n| No | Yes | Yes | Network policies, HTTP policies, Browser Isolation, identity-based policies, device posture checks, AV scanning, and Data Loss Prevention |\n\nNote\n\n* Secure Web Gateway without DNS filtering mode disables all features that rely on WARP for DNS resolution, including [domain-based split tunneling](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#domain-based-split-tunnels) and [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/).\n* Only available on Windows, Linux, and macOS.\n* Secure Web Gateway without DNS filtering mode has a known limitation concerning [DNS servers with IPv6 addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/known-limitations/#ipv6-dns-resolution-in-secure-web-gateway-without-dns-filtering-mode).\n\n## Proxy mode\n\nProxy mode is best suited for organizations that want to filter traffic directed to specific applications.\n\n| DNS filtering | Network filtering | HTTP filtering | Features enabled |\n| - | - | - | - |\n| No | No | Yes | HTTP policies, Browser Isolation, identity-based policies, AV scanning, and Data Loss Prevention for traffic sent through localhost proxy |\n\n### Limitations\n\n* Proxy mode can only be used by applications/operating systems that support SOCKS5/HTTPS proxy communication.\n* Requires the MASQUE [device tunnel protocol](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#device-tunnel-protocol). Wireguard is not supported.\n* Only available on Windows, Linux, and macOS.\n* Proxy mode has a timeout limit of 10 seconds for requests. If a request goes above the 10 second limit, Cloudflare will drop the connection.\n\n## Device Information Only\n\nThis mode is best suited for organizations that only want to enforce [WARP client device posture checks](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/) for zones in your account. DNS, Network and HTTP traffic is handled by the default mechanisms on your devices. To setup Device Information Only mode, refer to the [dedicated page](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/device-information-only/).\n\n| DNS filtering | Network filtering | HTTP filtering | Features enabled |\n| - | - | - | - |\n| No | No | No | Device posture rules in [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) |\n\n## WARP modes comparison\n\nEach WARP mode offers a different set of Zero Trust features.\n\n| WARP Mode | DNS Filtering | Network Filtering | HTTP Filtering | Service mode (displayed in `warp-cli settings`) |\n| - | - | - | - | - |\n| [**Gateway with WARP (default)**](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-warp-default) | ✅ | ✅ | ✅ | `WarpWithDnsOverHttps` |\n| [**Gateway with DoH**](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-doh) | ✅ | ❌ | ❌ | `DnsOverHttps` |\n| [**Secure Web Gateway without DNS filtering**](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#secure-web-gateway-without-dns-filtering) | ❌ | ✅ | ✅ | `TunnelOnly` |\n| [**Proxy mode**](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#proxy-mode) | ❌ | ❌ | ✅ | `WarpProxy on port 40000` |\n| [**Device Information Only**](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#device-information-only) | ❌ | ❌ | ❌ | `PostureOnly` |\n\n## Related resources\n\n* [Connectivity status](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/connectivity-status/) - Learn about the status messages displayed by the WARP client during its connection process, and understand each stage as WARP establishes a secure tunnel to Cloudflare.\n\n</page>\n\n<page>\n---\ntitle: WARP sessions · Cloudflare One docs\ndescription: Cloudflare Zero Trust enforces WARP client reauthentication on a\n  per-application basis, unlike legacy VPNs which treat it as a global setting.\n  You can configure WARP session timeouts for your Access applications or as\n  part of your Gateway policies.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-sessions/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-sessions/index.md\n---\n\nCloudflare Zero Trust enforces WARP client reauthentication on a per-application basis, unlike legacy VPNs which treat it as a global setting. You can configure WARP session timeouts for your [Access applications](#configure-warp-sessions-in-access) or as part of your [Gateway policies](#configure-warp-sessions-in-gateway).\n\nWhen a user goes to a protected application or website, Cloudflare checks their WARP session duration against the configured session timeout. If the session has expired, the user will be prompted to re-authenticate with the identity provider (IdP) used to enroll in the WARP client.\n\n![WARP client prompts user to re-authenticate session.](https://developers.cloudflare.com/_astro/warp-reauthenticate-session.BjGtdKWz_ZIudhz.webp)\n\nA user's WARP session duration resets to zero whenever they re-authenticate with the IdP, regardless of what triggered the authentication event.\n\n## Prerequisites\n\nEnsure that traffic can reach your IdP and `<your-team-name>.cloudflareaccess.com` through WARP.\n\n## Configure WARP sessions in Gateway\n\nYou can enforce WARP session timeouts on any Gateway Network and HTTP policy that has an Allow action. If you do not specify a session timeout, the WARP session will be unlimited by default.\n\nSession timeouts have no impact on Gateway DNS policies. DNS policies remain active even when a user needs to re-authenticate.\n\nTo configure a session timeout for a Gateway policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to either **Traffic policies** > **Firewall policies**. Choose either **Network** or **HTTP**.\n  2. Add a policy and select the *Allow* action. Alternatively, choose any existing *Allow* policy.\n  3. Under **Step 4 - Configure policy settings**, select **Edit** next to **Enforce WARP client session duration**.\n  4. Enter a session expiration time in `1h30m0s` format and save.\n  5. Save the policy.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a Network (`l4`) or HTTP (`http`) policy with an Allow action.\n\n  3. In the policy's [`rule_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_policy), use the `check_session` argument to enable and configure a session timeout:",
      "language": "unknown"
    },
    {
      "code": "Session checks are now enabled for the application protected by this policy. Users can continue to reach applications outside of the policy definition.\n\nEnforce a global timeout\n\nTo enforce a global reauthentication event, set each of your Network or HTTP policies to the same WARP session duration.\n\n## Configure WARP sessions in Access Beta\n\nYou can allow users to log in to Access applications using their WARP session. WARP authentication is only supported for Access applications protected by Allow or Block policies.\n\nTo configure WARP sessions for Access applications:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Management**.\n2. In **Device enrollment permissions**, select **Manage**.\n3. Go to the **Login methods** tab and enable **WARP authentication identity**.\n4. Under **Session duration**, choose a session timeout value. This timeout will apply to all Access applications that have WARP authentication enabled.\n\nNote\n\nThis timeout value does not apply to [WARP session checks in Gateway policies](#configure-warp-sessions-in-gateway).\n\n1. (Optional) To enable WARP authentication by default for all existing and new applications, select **Apply to all Access applications**. You can override this default setting on a per-application basis when you [create](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/) or modify an Access application.\n2. Select **Save**.\n\nUsers can now authenticate once with WARP and have access to your Access applications for the configured period of time. The session timer resets when the user re-authenticates with the IdP used to enroll in WARP.\n\n## Force user interaction with IdP\n\nIf the user has an active browser session with the IdP, WARP will use the existing browser cookies to re-authenticate and the user will not be prompted to re-enter their credentials. You can override this behavior to require explicit user interaction in the IdP.\n\n### Supported IdPs\n\n* [Microsoft Entra ID](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/entra-id/#force-user-interaction-during-warp-reauthentication)\n\n## Manually reauthenticate\n\nTo manually refresh your Cloudflare Access session and update your group information from your identity provider (IdP), go to the following URL in your browser and fill in your [team name](https://developers.cloudflare.com/cloudflare-one/faq/getting-started-faq/#what-is-a-team-domainteam-name):\n\n`https://<your-team-name>.cloudflareaccess.com/cdn-cgi/access/refresh-identity`\n\nReauthenticating resets your [session duration](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/session-management/) and fetches the latest group information from the organization's IdP.\n\n## Limitations\n\n* **Only one user per device** — If a device is already registered with User A, User B will not be able to log in on that device through the re-authentication flow. To switch the device registration to a different user, User A must first log out from Zero Trust (if [Allow device to leave organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-device-to-leave-organization) is enabled), or an admin can revoke the registration from **Team & Resources** > **Devices**. User B can then properly [enroll](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/).\n* **Active connections are not terminated** — Active sessions such as SSH and RDP will remain connected beyond the timeout limit.\n* **Binding Cookie is not supported** - WARP authentication will not work for Access applications that have the [Binding Cookie](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/#binding-cookie) enabled.\n\n## Related resources\n\n* [Connectivity status](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/connectivity-status/) - Learn about the status messages displayed by the WARP client during its connection process, and understand each stage as WARP establishes a secure tunnel to Cloudflare.\n\n</page>\n\n<page>\n---\ntitle: WARP settings · Cloudflare One docs\ndescription: WARP settings define the WARP client modes and permissions\n  available to end users.\nlastUpdated: 2025-12-02T20:21:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/index.md\n---\n\nWARP settings define the WARP client modes and permissions available to end users.\n\n* [Global settings](#global-settings) apply to all devices enrolled in your Zero Trust organization.\n* [Device settings](#device-settings) may vary across devices depending on which [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) is applied.\n\nNote\n\nIt may take up to 10 minutes for newly updated settings to propagate to devices.\n\n## Global settings\n\n### Allow admin override codes\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nNote\n\nTo use **Allow admin override codes**, you must first have enabled [**Lock WARP switch**](#lock-warp-switch).\n\nWhen [**Lock WARP switch**](#lock-warp-switch) is enabled, users cannot toggle the WARP client on and off on their device. Enabling **Allow admin override codes** gives users the ability to temporarily turn on or off the WARP client using an override code provided by an admin. **Allow admin override codes** is only needed in a configuration where **Lock WARP switch** is enabled.\n\nExample use cases for **Allow admin override codes** include:\n\n* Allowing users to momentarily turn off WARP to work around a temporary network issue such as an incompatible public Wi-Fi, or a firewall at a customer site blocking the connection.\n* Allowing test users to turn on WARP when [Disconnect WARP on all devices](#disconnect-warp-on-all-devices) is in effect.\n\nAs admin, you can set a **Timeout** to define how long a user can toggle the WARP switch on or off after entering the override code. Cloudflare generates a new override code every hour that an admin can send to end users. The override code's validity adheres to fixed-hour time blocks and aims to be generous to the end user.\n\nTroubleshooting\n\nTo learn more about override code timeouts and how Cloudflare calculates an override code's valid duration, refer to [Troubleshooting](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/#i-entered-an-override-code-for-warp-that-was-supposed-to-be-valid-for-3-hours-but-the-override-code-expired-faster-than-i-expected).\n\nIf [Auto connect](#auto-connect) is enabled, WARP will automatically reconnect, according to the value set for the auto connect timeout, even when using **Allow admin override codes**. Refer to [Troubleshooting](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/#i-disabled-warp-using-an-override-code-but-warp-turned-on-by-itself-before-my-override-code-expired) for more information.\n\n#### Retrieve the override code\n\nTo retrieve the one-time code for a user:\n\n1. Enable **Allow admin override codes**.\n2. Go to **Team & Resources** > **Devices**.\n3. Select **View details** for a connected device.\n4. Scroll down to **User details** and select the user's name.\n5. Copy the 7-digit **Override code** shown in the side panel.\n6. Share this code with the user for them to enter on their device.\n\nThe user will have an unlimited amount of time to activate their code.\n\n#### Enter the override code\n\nTo activate the override code on a user device:\n\n1. In the WARP client, go to **Settings** > **Preferences** > **Advanced**.\n2. Select **Enter code**.\n3. Enter the override code.\n\nThe user can now toggle the WARP switch or use the `warp-cli connect` command. The client will automatically reconnect after the [Auto connect period](#auto-connect), but the user can continue to turn on or off WARP until the override expires.\n\n### Install CA to system certificate store\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| Gateway with WARP, Proxy mode | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2024.12.554.0 |\n| macOS | ✅ | 2024.12.554.0 |\n| Linux | ✅ | 2024.12.554.0 |\n| iOS | ❌ | |\n| Android | ❌ | |\n| ChromeOS | ❌ | |\n\nWhen `Enabled`, the WARP client will [automatically install](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/automated-deployment/) your organization's root certificate on the device.\n\n### Assign a unique IP address to each device\n\nFeature availability\n\n| Operating Systems | [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| Windows, macOS, Linux | Gateway with WARP, Secure Web Gateway without DNS Filtering | All plans |\n\nOverrides the default IP address of WARP's [virtual network interface](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#ip-traffic) such that each device has its own unique local interface IP.\n\nThis setting is primarily used as a prerequisite for [WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) and [MASQUE](#device-tunnel-protocol). You can also use it when the default IP conflicts with other local services on your network.\n\n**Value:**\n\n* `Disabled`: (default) Sets the local interface IP to `172.16.0.2` on all devices. This configuration is only respected by devices using [WireGuard](#device-tunnel-protocol) and does not affect devices using [MASQUE](#device-tunnel-protocol).\n\n* `Enabled`: Sets the local interface IP on each device to its CGNAT IP.\n\nThe CGNAT IP assigned to a WARP device is permanent until the device unregisters from your Zero Trust organization. Disconnects and reconnects do not change the IP address assignment.\n\n### Disconnect WARP on all devices\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| All modes | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2025.2.600.0 |\n| macOS | ✅ | 2025.2.600.0 |\n| Linux | ✅ | 2025.2.600.0 |\n| iOS | ❌ | |\n| Android | ❌ | |\n| ChromeOS | ❌ | |\n\nNote\n\nRequires the [Super Administrator](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) role.\n\n**Disconnect WARP on all devices** allows administrators to fail open WARP in case of an incident occurring in your environment, independent from incidents or outages affecting Cloudflare's services. When you turn on **Disconnect WARP on all devices**, Cloudflare will disconnect all Windows, macOS, and Linux WARP clients that are connected to your Zero Trust organization. This includes end user devices, [WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) hosts, and [WARP-to-WARP](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-to-warp/) devices. End users will receive a notification on their device and the WARP client will display [`Admin directed disconnect`](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/client-errors/#admin-directed-disconnect).\n\n[Auto connect](#auto-connect) and [Lock WARP switch](#lock-warp-switch) will not apply while the global disconnect is on. Additionally, the global disconnect will clear any existing [admin override codes](#allow-admin-override-codes). The only way for users to reconnect during a global disconnect is by using a new [admin override code](#allow-admin-override-codes). For example, you may want to provide IT staff with a code so that they can test resolution of the incident that led to the global disconnect.\n\nTo resume normal operations, turn off **Disconnect WARP on all devices**. The WARP client will automatically reconnect.\n\n## Device settings\n\n### Captive portal detection\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nWhen `Enabled`, the WARP client will automatically turn off when it detects a captive portal, and it will automatically turn back on after the **Timeout** duration.\n\nSince captive portal implementations vary, WARP may not detect all captive portals. For more information, refer to [Captive portal detection](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/captive-portals/).\n\n### Mode switch\n\nFeature availability\n\n| Operating Systems | [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nWhen `Enabled`, users have the option to switch between [Gateway with WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-warp-default) mode and [Gateway with DoH mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-doh). This feature does not support switching between any other modes.\n\n### Device tunnel protocol\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| * Gateway with WARP\n* Secure Web Gateway without DNS filtering | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2024.11.309.0 |\n| macOS | ✅ | 2024.11.309.0 |\n| Linux | ✅ | 2024.11.309.0 |\n| iOS | ✅ | 1.7 |\n| Android | ✅ | 2.0 |\n| ChromeOS | ✅ | 2.0 |\n\nConfigures the protocol used to route IP traffic from the device to Cloudflare Gateway. To check the active protocol on a device, open a terminal and run `warp-cli settings | grep protocol`.\n\n**Value**:\n\n* **WireGuard**: Establishes a [WireGuard](https://www.wireguard.com/) connection to Cloudflare. The WARP client will encrypt traffic using a non-FIPs compliant cipher suite, `TLS_CHACHA20_POLY1305_SHA256`. When switching from MASQUE to WireGuard, users may lose Internet connectivity if their Wi-Fi network blocks the [ports and IPs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#warp-ingress-ip) required for WireGuard to function.\n* **MASQUE**: (default) Establishes an HTTP/3 connection to Cloudflare. The WARP client will encrypt traffic using TLS 1.3 and a [FIPS 140-2](https://csrc.nist.gov/pubs/fips/140-2/upd2/final) compliant cipher suite, `TLS_AES_256_GCM_SHA384`. [Assign a unique IP address to each device](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#assign-a-unique-ip-address-to-each-device) is enabled by default for devices with MASQUE enabled.\n\nFor more details on WireGuard versus MASQUE, refer to our [blog post](https://blog.cloudflare.com/zero-trust-warp-with-a-masque).\n\n### Lock WARP switch\n\nFeature availability\n\n| Operating Systems | [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nAllows the user to turn off the WARP switch and disconnect the client.\n\n**Value:**\n\n* `Disabled`: (default) The user is able to turn the WARP switch on or off at their discretion. When the WARP switch is off, the user will not have the ability to reach sites protected by Access that leverage certain device posture checks.\n* `Enabled`: The user is prevented from turning off the WARP switch. The WARP client will always start in the connected state.\n\nOn MDM deployments, you must also include the `auto_connect` parameter with at least a value of `0`. This will prevent clients from being deployed in the off state without a way for users to manually enable them.\n\n### Allow device to leave organization\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nWhen `Enabled`, users can log out from your Zero Trust organization by selecting **Logout from Zero Trust** in the WARP client UI. The **Logout from Zero Trust** button is only available for devices that were [enrolled manually](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/). Devices that enrolled using an MDM file are always prevented from leaving your Zero Trust organization.\n\n### Allow updates\n\nFeature availability\n\n| Operating Systems | [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| macOS, Windows, Linux | Any mode | All plans |\n\nWhen `Enabled`, users will receive update notifications when a new version of the client is available. Only turn this on if your users are local administrators with the ability to add or remove software from their device.\n\n### Auto connect\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nWhen `Enabled`, the client will automatically reconnect if it has been disabled for the specified **Timeout** value. This setting is best used in conjunction with [Lock WARP Switch](#lock-warp-switch) above.\n\nWe recommend keeping this set to a very low value — usually just enough time for a user to log in to hotel or airport Wi-Fi. If any value is specified, the client defaults to the Connected state (for example, after a reboot or the initial install).\n\n**Value:**\n\n* `0`: Allow the switch to stay in the off position indefinitely until the user turns it back on.\n* `1` to `1440`: Turn switch back on automatically after the specified number of minutes.\n\n### Support URL\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nWhen `Enabled`, the **Send Feedback** button in the WARP client appears and will launch the URL specified. Example **Support URL** values are:\n\n* `https://support.example.com`: Use an https\\:// link to open your companies internal help site.\n* `mailto:yoursupport@example.com`: Use a `mailto:` link to open your default mail client.\n\n### Service mode\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nAllows you to choose the operational mode of the client. Refer to [WARP Modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes) for a detailed description of each mode.\n\n### Local Domain Fallback\n\nFeature availability\n\n| Operating Systems | [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Gateway with WARP, Gateway with DoH | All plans |\n\nConfigures the WARP client to redirect DNS requests to a private DNS resolver. For more information, refer to our [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) documentation.\n\n### Split Tunnels\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nConfigures the WARP client to exclude or include traffic to specific IP addresses or domains. For more information, refer to our [Split Tunnel](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) documentation.\n\n### Directly route Microsoft 365 traffic\n\nFeature availability\n\n| Operating Systems | [WARP mode required](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - | - |\n| All systems | Any mode | All plans |\n\nCreates [Split Tunnel](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) Exclude entries for all [Microsoft 365 IP addresses specified by Microsoft](https://docs.microsoft.com/en-us/microsoft-365/enterprise/microsoft-365-ip-web-service). To use this setting, **Split Tunnels** must be set to **Exclude IPs and domains**. Once enabled, all Microsoft 365 network traffic will bypass WARP and Gateway.\n\nNote\n\nMicrosoft has recently made changes to the IPs used by their applications (such as Microsoft Teams). Until Microsoft updates their [IP address and URL web service](https://learn.microsoft.com/en-us/microsoft-365/enterprise/microsoft-365-ip-web-service?view=o365-worldwide), you will need to manually add the following IPs to your [Split Tunnels Exclude list](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route):\n\n* `24.24.24.24/32`\n* `52.120.0.0/14`\n\n### Allow users to enable local network exclusion\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| * Gateway with WARP\n* Secure Web Gateway without DNS filtering | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2024.1.159.0 |\n| macOS | ✅ | 2024.1.160.0 |\n| Linux | ✅ | 2024.2.62.0 |\n| iOS | ❌ | N/A[1](#user-content-fn-1) |\n| Android | ✅ | 1.4 |\n| ChromeOS | ✅ | 1.4 |\n\nThis setting is intended as a workaround for users whose home network uses the same set of IP addresses as your corporate private network. To use this setting, **Split Tunnels** must be set to **Exclude IPs and domains**.\n\nWhen `Enabled`, users have the option to access local network resources (such as printers and storage devices) while connected to WARP. When the user turns on [**Access Local Network**](#access-local-network-as-a-user), WARP will detect the local IP range advertised by the user's home network (for example, `10.0.0.0/24`) and temporarily exclude this range from the WARP tunnel. The user will need to re-request access after the **Timeout** expires. Setting **Timeout** to `0 minutes` will allow LAN access until the next WARP reconnection, such as a reboot or a laptop waking from sleep.\n\nWarning\n\nEnabling this setting comes with two major consequences:\n\n* **Device is exposed to security threats.** The user may be unaware that traffic to what used to be their company's private network is now actually being routed to their local network. This leaves the device vulnerable to [on-path attackers](https://www.cloudflare.com/learning/security/threats/on-path-attack/) and other security vulnerabilities. For example, imagine that a user's typical workflow involves logging into a remote desktop on the corporate network at `10.0.0.30`. A bad actor could set up a fake server on the local network at `10.0.0.30`. If the user goes to `10.0.0.30` while **Access local network** is enabled, the attacker can now steal their credentials.\n* **User loses access to corporate resources.** — While accessing their local network, the user will be unable to connect to corporate resources that fall within the same IP/CIDR range.\n\n#### Access local network as a user\n\nTo turn on local network access in the WARP client:\n\n* Windows and macOS\n\n  1. Select the Cloudflare logo in the menu bar.\n  2. Select the gear icon.\n  3. Select **Access Local Network**.\n\n* Linux\n\n  1. Open a terminal window.\n  2. Run `warp-cli override local-network start`.\n\n* Android and ChromeOS\n\n  1. Open the Cloudflare One Agent app.\n  2. Go to **Settings** > **Advanced** > **Connection Options**.\n  3. Select **Access Local Network**.\n\n#### Limitations\n\n* WARP will only exclude local networks in the [RFC 1918](https://datatracker.ietf.org/doc/html/rfc1918) address space. Other IP addresses such as CGNAT are not supported.\n* The maximum excluded subnet size is `/24`.\n* If a device has multiple network interfaces with distinct local IP ranges, WARP will only exclude one of those networks. To access a specific local network, disable the other interfaces and disconnect/reconnect WARP.\n\n### WARP interface IP DNS registration\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| * Gateway with WARP\n* Secure Web Gateway without DNS filtering | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2025.2.600.0 |\n| macOS | ❌ | |\n| Linux | ❌ | |\n| iOS | ❌ | |\n| Android | ❌ | |\n| ChromeOS | ❌ | |\n\nWhen `Enabled`, the operating system will register WARP's [local interface IP](#assign-a-unique-ip-address-to-each-device) (CGNAT IP or `172.16.0.2`) with your on-premise DNS server when the DNS server is reachable.\n\nIf you use on-premise DNS infrastructure (such as Active Directory), we recommend turning this setting on for remote [device profiles](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) and turning it off for [managed network](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/) device profiles. In this configuration, remote devices will register their WARP interface IP, while on-premise devices will only register their local DHCP address. This allows the on-premise DNS server to resolve device hostnames no matter where the device is located.\n\n### SCCM VPN boundary support\n\nFeature availability\n\n| [WARP modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) | [Zero Trust plans](https://www.cloudflare.com/teams-pricing/) |\n| - | - |\n| * Gateway with WARP\n* Secure Web Gateway without DNS filtering | All plans |\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ✅ | 2025.5.735.1 |\n| macOS | ❌ | |\n| Linux | ❌ | |\n| iOS | ❌ | |\n| Android | ❌ | |\n| ChromeOS | ❌ | |\n\nMicrosoft's [System Center Configuration Manager](https://learn.microsoft.com/en-us/intune/configmgr/) (SCCM) is used to manage software on Windows devices based on the [boundary group](https://learn.microsoft.com/en-us/intune/configmgr/core/servers/deploy/configure/define-site-boundaries-and-boundary-groups), or network location, to which they belong. You can assign WARP clients to a SCCM boundary group based on their [managed network](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/) and other device profile attributes. When **SCCM VPN Boundary Support** is turned on, the WARP client will modify the description field on its [virtual network interface](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#ip-traffic). This allows you to define a VPN boundary group that matches on the network interface description.\n\n**Value:**\n\n* `Disabled`: (default) WARP network interface description is `Cloudflare WARP Interface Tunnel`.\n\n* `Enabled`: WARP network interface description is `(SCCM) Cloudflare WARP Interface Tunnel` for devices which have the [SCCM client](https://learn.microsoft.com/en-us/intune/configmgr/core/clients/deploy/deploy-clients-to-windows-computers) installed. Devices without the SCCM client will still use the default `Cloudflare WARP Interface Tunnel` description. WARP checks if the SCCM client is installed by looking for the SMS Agent Host (`ccmexec.exe`) Windows service.\n\n#### Example SCCM configuration\n\nAssume you want to push software updates from a cloud based [distribution point](https://learn.microsoft.com/en-us/intune/configmgr/core/servers/deploy/configure/boundary-groups-distribution-points) if the device is remote, but use on-prem servers if the device is on the office network. To set up these boundary groups:\n\n1. In Zero Trust:\n\n   a. Turn on **SCCM VPN Boundary Support** for remote [device profiles](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/).\n\n   b. Turn off **SCCM VPN Boundary Support** for [on-prem device profiles](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/#4-configure-device-profile).\n\n   c. (Optional) Verify device settings:\n\n   Verify SCCM VPN Boundary Support\n\n   To check if **SCCM VPN Boundary Support** is active on a device, run the following command:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "You can also verify network interface details for the `CloudflareWARP` adapter:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. In Microsoft SCCM:\n\n   a. [Create a boundary](https://learn.microsoft.com/en-us/intune/configmgr/core/servers/deploy/configure/boundaries#create-a-boundary) with the following settings:\n\n   * **Description**: `Remote WARP clients`\n   * **Type**: *VPN*\n   * **Connection description**: `(SCCM) Cloudflare WARP Interface Tunnel`\n\n   b. Assign this boundary to one or more boundary groups.\n\nWhen the device is remote, the WARP interface description changes to `(SCCM) Cloudflare WARP Interface Tunnel` and the SCCM server will determine that the device belongs to the VPN boundary group. The device can now download updates from the distribution point assigned to this boundary group. When a network change occurs and WARP detects a managed network, it will revert the interface description to `Cloudflare WARP Interface Tunnel` and the boundary condition will no longer be satisfied. The device will match your local IP range and be considered as on-prem.\n\n## Footnotes\n\n1. Current versions of iOS do not allow LAN traffic to route through the WARP tunnel. Therefore, this feature is not needed on iOS. [↩](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: Device enrollment permissions · Cloudflare One docs\ndescription: Device enrollment permissions determine which users can connect new\n  devices to your organization's Cloudflare Zero Trust instance.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/index.md\n---\n\nDevice enrollment permissions determine which users can connect new devices to your organization's Cloudflare Zero Trust instance.\n\n## Set device enrollment permissions\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles** > **Management**.\n\n  2. In **Device enrollment** > **Device enrollment permissions**, select **Manage**.\n\n  3. In the **Policies** tab, configure one or more [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to define who can join their device. For example, you could allow all users with a company email address:\n\n     | Rule type | Selector | Value |\n     | - | - | - |\n     | Include | Emails ending in | `@company.com` |\n\n  Note\n\n  Device posture checks are not supported in device enrollment policies. WARP can only perform posture checks after the device is enrolled.\n\n  1. In the **Login methods** tab:\n\n     a. Select the [identity providers](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) users can authenticate with. If you have not integrated an identity provider, you can use the [one-time PIN](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/).\n\n     b. (Optional) If you plan to only allow access via a single IdP, turn on **Instant Auth**. End users will not be shown the Cloudflare Access login page. Instead, Cloudflare will redirect users directly to your SSO login event.\n\n  2. Select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Apps and Policies Write`\n\n  2. Create a reusable Access policy using the [`cloudflare_zero_trust_access_policy`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_policy) resource:",
      "language": "unknown"
    },
    {
      "code": "3. Use the [`cloudflare_zero_trust_access_application`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_application) resource to create an application with type `warp`.",
      "language": "unknown"
    },
    {
      "code": "Users can now [enroll their device](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) by logging in to your identity provider. To prevent users from logging out of your organization after they enroll, disable [Allow devices to leave organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-device-to-leave-organization) in your WARP client settings.\n\n## Example policies\n\n### Check for service token\n\nInstead of requiring users to authenticate with their credentials, you can use a [service token](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/) to enroll devices without any user interaction. Because users are not required to log in to an identity provider, identity-based policies cannot be enforced on these devices.\n\nTo enroll devices using a service token:\n\n* Dashboard\n\n  1. [Create a service token](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/#create-a-service-token).\n\n  2. Copy the token's **Client ID** and **Client Secret**.\n\n  3. Go to **Access controls** > **Policies** and create the following policy:\n\n     | Rule Action | Rule type | Selector | Value |\n     | - | - | - | - |\n     | Service Auth | Include | Service Token | `<TOKEN-NAME>` |\n\n     Make sure to set **Action** to *Service Auth* instead of *Allow*.\n\n  4. Add the Access policy to your [device enrollment permissions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#set-device-enrollment-permissions).\n\n  5. In your MDM [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/), add the following fields:\n\n     * `auth_client_id`: The **Client ID** of your service token.\n     * `auth_client_secret`: The **Client Secret** of your service token.\n\n* Terraform (v5)\n\n  1. Add the following permissions to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Apps and Policies Write`\n     * `Access: Service Tokens Write`\n\n  2. [Create a service token](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/#create-a-service-token) and copy its **Client ID** and **Client Secret**.\n\n  3. Create the following Access policy:",
      "language": "unknown"
    },
    {
      "code": "4. Add the policy to your [`cloudflared_zero_trust_access_application` for WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#set-device-enrollment-permissions).\n\n  5. In your MDM [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/), add the following fields:\n\n     * `auth_client_id`: The **Client ID** of your service token.\n     * `auth_client_secret`: The **Client Secret** of your service token.\n\nWhen you deploy the WARP client with your MDM provider, WARP will automatically connect the device to your Zero Trust organization.\n\nYou can verify which devices have enrolled by going to **Team & Resources** > **Devices**. Devices that enrolled using a service token (or any other Service Auth policy) will have the **Email** field show as `non_identity@<team-name>.cloudflareaccess.com`.\n\n### Check for mTLS certificate\n\nEnterprise customers can enforce [mutual TLS authentication](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/) during device enrollment.\n\nCertificate requirements\n\n* The CA certificate can be from a publicly trusted CA or self-signed.\n\n* In the certificate `Basic Constraints`, the attribute `CA` must be set to `TRUE`.\n\n* The certificate must use one of the signature algorithms listed below:\n\n  Allowed signature algorithms\n\n  `x509.SHA1WithRSA`\n\n  `x509.SHA256WithRSA`\n\n  `x509.SHA384WithRSA`\n\n  `x509.SHA512WithRSA`\n\n  `x509.ECDSAWithSHA1`\n\n  `x509.ECDSAWithSHA256`\n\n  `x509.ECDSAWithSHA384`\n\n  `x509.ECDSAWithSHA512`\n\nTo check for an mTLS certificate:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Access controls** > **Service credentials** > **Mutual TLS**.\n\n  2. Select **Add mTLS Certificate**.\n\n  3. Enter any name for the root CA.\n\n  4. In **Certificate content**, paste the contents of your root CA.\n\n     If the client certificate is directly signed by the root CA, you only need to upload the root. If the client certificate is signed by an intermediate certificate, you must upload the entire CA chain (intermediate and root). For example:",
      "language": "unknown"
    },
    {
      "code": "1) In **Associated hostnames**, enter your Zero Trust team domain: `<team-name>.cloudflareaccess.com`\n\n  2) In your [device enrollment permissions](#set-device-enrollment-permissions), add a *Common Name* or *Valid Certificate* rule. For example, the following policy requires a client certificate with a specific common name:\n\n     | Action | Rule type | Selector | Value |\n     | - | - | - | - |\n     | Allow | Require | Common Name | `<CERT-COMMON-NAME>` |\n\n  3) On your device, add the client certificate to the [system keychain](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#test-in-the-browser).\n\n* Terraform (v5)\n\n  1. Add the following permissions to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Mutual TLS Certificates Write`\n     * `Access: Apps and Policies Write`\n\n  2. Use the [`cloudflare_zero_trust_access_mtls_certificate`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_mtls_certificate) resource to add an mTLS certificate to your account:",
      "language": "unknown"
    },
    {
      "code": "3. Create the following Access policy:",
      "language": "unknown"
    },
    {
      "code": "4. Add the policy to your [`cloudflared_zero_trust_access_application` for WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#set-device-enrollment-permissions).\n\n  5. On your device, add the client certificate to the [system keychain](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#test-in-the-browser).\n\nWhen users [log in to your Zero Trust organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/) from the WARP client, their device must present a valid client certificate in order to connect.\n\n</page>\n\n<page>\n---\ntitle: WARP with firewall · Cloudflare One docs\ndescription: If your organization uses a firewall or other policies to restrict\n  or intercept Internet traffic, you may need to exempt the following IP\n  addresses and domains to allow the WARP client to connect.\nlastUpdated: 2025-12-09T18:14:25.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/index.md\n---\n\nIf your organization uses a firewall or other policies to restrict or intercept Internet traffic, you may need to exempt the following IP addresses and domains to allow the WARP client to connect.\n\n## Client orchestration API\n\nThe WARP client connects to Cloudflare via a standard HTTPS connection outside the tunnel for operations like registration or settings changes. To perform these operations, you must allow the following IPs and domains:\n\n* IPv4 API endpoints: `162.159.137.105` and `162.159.138.105`\n* IPv6 API endpoints: `2606:4700:7::a29f:8969` and `2606:4700:7::a29f:8a69`\n* SNIs: `zero-trust-client.cloudflareclient.com` and `notifications.cloudflareclient.com`\n\nEven though `zero-trust-client.cloudflareclient.com` and `notifications.cloudflareclient.com` may resolve to different IP addresses, WARP overrides the resolved IPs with the IPs listed above. To avoid connectivity issues, ensure that the above IPs are permitted through your firewall.\n\nFedRAMP High requirements\n\nTo deploy WARP in FedRAMP High environments, you will need to allow a different set of IPs and domains through your firewall:\n\n* IPv4 API endpoints: `162.159.213.1` and `172.64.98.1`\n* IPv6 API endpoints: `2606:54c1:11::` and `2a06:98c1:4b::`\n* SNIs: `api.devices.fed.cloudflare.com` and `notifications.devices.fed.cloudflare.com`\n\n## DoH IP\n\nNote\n\nOnly required for [Gateway with DoH](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-doh) mode.\n\nIn [Gateway with DoH](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-doh) mode, the WARP client sends DNS requests to Gateway over an HTTPS connection. For DNS to work correctly, you must allow the following IPs and domains:\n\n* IPv4 DoH addresses: `162.159.36.1` and `162.159.46.1`\n* IPv6 DoH addresses: `2606:4700:4700::1111` and `2606:4700:4700::1001`\n* SNIs: `<ACCOUNT_ID>.cloudflare-gateway.com`\n\nEven though `<ACCOUNT_ID>.cloudflare-gateway.com` may resolve to different IP addresses, WARP overrides the resolved IPs with the IPs listed above. To avoid connectivity issues, ensure that the above IPs are permitted through your firewall.\n\nFedRAMP High requirements\n\nTo deploy WARP in FedRAMP High environments, you will need to allow a different set of IPs and domains through your firewall:\n\n* IPv4 DoH addresses: `172.64.100.3` and `172.64.101.3`\n* IPv6 DoH addresses: `2606:54c1:13::2`\n* SNIs: `<ACCOUNT_ID>.fed.cloudflare-gateway.com`\n\n### Android devices\n\nIf you are deploying the Cloudflare One Agent on Android/ChromeOS, you must also add `cloudflare-dns.com` to your firewall exception list. On Android/ChromeOS devices, WARP uses `cloudflare-dns.com` to resolve domains on your [Split Tunnel list](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#domain-based-split-tunnels).\n\n## Client authentication endpoint\n\nWhen you [log in to your Cloudflare One organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/), you will have to complete the authentication steps required by your organization in the browser window that opens. To perform these operations, you must allow the following domains:\n\n* The IdP used to authenticate to Cloudflare One\n* `<your-team-name>.cloudflareaccess.com`\n\nFedRAMP High requirements\n\nTo deploy WARP in FedRAMP High environments, you will need to allow different domains through your firewall:\n\n* FedRAMP High IdP used to authenticate to Cloudflare One\n* `<your-team-name>.fed.cloudflareaccess.com`.\n\n## WARP ingress IP\n\nWARP connects to the following IP addresses, depending on which [tunnel protocol](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#device-tunnel-protocol) is configured for your device (WireGuard or MASQUE). All network traffic from your device to Cloudflare goes through these IPs and ports over UDP.\n\n### WireGuard\n\n| | |\n| - | - |\n| IPv4 address | `162.159.193.0/24` |\n| IPv6 address | `2606:4700:100::/48` |\n| Default port | `UDP 2408` |\n| Fallback ports | `UDP 500` `UDP 1701` `UDP 4500` |\n\n### MASQUE\n\n| | |\n| - | - |\n| IPv4 address | `162.159.197.0/24` |\n| IPv6 address | `2606:4700:102::/48` |\n| Default port | `UDP 443` |\n| Fallback ports | `UDP 500` `UDP 1701` `UDP 4500` `UDP 4443` `UDP 8443` `UDP 8095` `TCP 443` [1](#user-content-fn-1) |\n\nNote\n\nBefore you [log in to your Cloudflare One organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/), you may see the IPv4 range `162.159.192.0/24`. This IP is used for consumer WARP ([1.1.1.1 w/ WARP](https://developers.cloudflare.com/warp-client/)) and is not required for Zero Trust services.\n\nFedRAMP High requirements\n\nDevices will use the MASQUE protocol in FedRAMP High environments. To deploy WARP for FedRAMP High, you will need to allow the following IPs and ports:\n\n| | |\n| - | - |\n| IPv4 address | `162.159.239.0/24` |\n| IPv6 address | `2606:4700:105::/48` |\n| Default port | `UDP 443` |\n| Fallback ports | `UDP 500` `UDP 1701` `UDP 4500` `UDP 4443` `UDP 8443` `UDP 8095` `TCP 443` [1](#user-content-fn-1) |\n\n## Captive portal\n\nThe following domains are used as part of our captive portal check:\n\n* `cloudflareportal.com`\n* `cloudflareok.com`\n* `cloudflarecp.com`\n* `www.msftconnecttest.com`\n* `captive.apple.com`\n* `connectivitycheck.gstatic.com`\n\n## Connectivity checks\n\nAs part of establishing the WARP connection, the client runs connectivity checks inside and outside of the WARP tunnel.\n\n### Outside tunnel\n\nThe client connects to the following destinations to verify general Internet connectivity outside of the WARP tunnel. Make sure that these IPs and domains are on your firewall allowlist.\n\n* `162.159.197.3`\n* `2606:4700:102::3`\n* `engage.cloudflareclient.com`: The client will always send requests directly to an IP in the [WARP ingress IPv4 or IPv6 range](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#warp-ingress-ip) (or to your [`override_warp_endpoint`](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/#override_warp_endpoint) if set). Requests will not use a proxy server, even if one is configured for the system.\n\nEven though `engage.cloudflareclient.com` may resolve to different IP addresses, WARP overrides the resolved IPs with the IPs listed above. To avoid connectivity issues, ensure that the above IPs are permitted through your firewall.\n\n### Inside tunnel\n\nThe WARP client connects to the following destinations to verify connectivity inside of the WARP tunnel:\n\n* `162.159.197.4`\n* `2606:4700:102::4`\n* `connectivity.cloudflareclient.com`\n\nBecause this check happens inside of the tunnel, you do not need to add these IPs and domains to your firewall allowlist. However, since the requests go through Gateway, ensure that they are not blocked by a Gateway HTTP or Network policy.\n\n## NEL reporting (optional)\n\nThe WARP client reports connectivity issues to our NEL endpoint via `a.nel.cloudflare.com`. This is not technically required to operate but will result in errors in our logs if not excluded properly.\n\n## Latency statistics (optional)\n\nThe WARP client generates ICMP traffic to the [WARP ingress IPs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#warp-ingress-ip) when running tunnel latency tests. This is not technically required to operate but will result in errors in our logs if not excluded properly.\n\n## Time synchronization (optional)\n\nThe WARP client attempts to synchronize the exact time by NTP (`UDP 123`) to [Cloudflare's Time Service](https://developers.cloudflare.com/time-services/ntp/usage/) via `time.cloudflare.com`. This is not technically required to operate but will result in errors in our logs if not excluded properly.\n\n## Scope of firewall rules\n\n### Required scopes\n\nIf your organization does not currently allow inbound/outbound communication over the IP addresses, ports, and domains described above, you must manually add an exception. The rule at a minimum needs to be scoped to the following process based on your platform:\n\n* Windows: `C:\\Program Files\\Cloudflare\\Cloudflare WARP\\warp-svc.exe`\n\n* macOS: You must explicitly allow both the core networking daemon and GUI component as shown in the following instructions.\n\n  1. Core networking daemon: `/Applications/Cloudflare WARP.app/Contents/Resources/CloudflareWARP`\n\n     This binary does not have a Bundle ID and must be allowed via full path.\n\n  2. GUI component, choose one of the following three identifiers depending on your MDM or firewall vendor's preferred format:\n\n     `/Applications/Cloudflare WARP.app` (Path)\n\n     `/Applications/Cloudflare WARP.app/Contents/MacOS/Cloudflare WARP` (Path)\n\n     `com.cloudflare.1dot1dot1dot1dot1.macos` (Bundle ID)\n\n  macOS 15.0 through 15.4\n\n  Due to changes in macOS Sequoia versions 15.0 through 15.4, you must update your [macOS firewall settings](https://support.apple.com/guide/mac-help/change-firewall-settings-on-mac-mh11783/mac) to allow the WARP client to manage your device's firewall. Later versions of macOS are not affected because of changes Apple introduced to fix the unexpected breaking changes in their firewall.\n\n  To allow the WARP client to function on macOS Sequoia versions 15.0 through 15.4 while still blocking unwanted incoming traffic, follow these steps:\n\n  1. Turn off the following [macOS firewall settings](https://support.apple.com/guide/mac-help/change-firewall-settings-on-mac-mh11783/mac):\n\n     * **Block all incoming connections**\n     * **Automatically allow built-in software to receive incoming connections**\n     * **Automatically allow downloaded signed software to receive incoming connections**\n\n  2. Add the [WARP daemon and GUI processes](#required-scopes) to the firewall exceptions list and set them to *Allow incoming connections*.\n\n  3. Restrict the other allow exceptions to only the processes you want receiving traffic.\n\n  4. (Optional) Do not grant users administrative privileges, otherwise they will be able to modify firewall settings and exceptions.\n\n### Optional scopes\n\n#### DEX tests\n\nTo run [Digital Experience Monitoring tests](https://developers.cloudflare.com/cloudflare-one/insights/dex/tests/), you will need to allow the `warp-dex` process to generate network traffic to your target destinations:\n\n* Windows: `C:\\Program Files\\Cloudflare\\Cloudflare WARP\\warp-dex.exe`\n* macOS: `/Applications/Cloudflare WARP.app/Contents/Resources/warp-dex`\n\n#### WARP network statistics\n\nTo use the network connectivity tests built into the WARP GUI, you will need to allow the GUI application to generate network traffic:\n\n* Windows: `C:\\Program Files\\Cloudflare\\Cloudflare WARP\\Cloudflare WARP.exe`\n* macOS: `/Applications/Cloudflare WARP.app`\n\n## Related resources\n\n* [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) - Resolve selected domains via local DNS instead of Cloudflare Gateway.\n* [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) - Control which traffic goes through WARP by including or excluding specific IPs or domains.\n\n## Footnotes\n\n1. Required for HTTP/2 fallback [↩](#user-content-fnref-1) [↩2](#user-content-fnref-1-2)\n\n</page>\n\n<page>\n---\ntitle: Manual deployment · Cloudflare One docs\ndescription: If you plan to direct your users to manually download and configure\n  the WARP client, users will need to connect the client to your organization's\n  Cloudflare Zero Trust instance.\nlastUpdated: 2025-11-27T23:23:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/index.md\n---\n\nIf you plan to direct your users to manually download and configure the WARP client, users will need to connect the client to your organization's Cloudflare Zero Trust instance.\n\n## Prerequisites\n\n* [Set device enrollment permissions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/) to specify which users can connect.\n\n* After deploying the WARP client, you can check its connection progress using the [Connectivity status](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/connectivity-status/) messages displayed in the WARP GUI.\n\n## Windows, macOS, and Linux\n\n### Enroll using the GUI\n\nTo enroll your device using the WARP GUI:\n\n1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the WARP client.\n\n2. Launch the WARP client.\n\n3. Select the Cloudflare logo in the menu bar.\n\n4. Select the gear icon.\n\n5. Go to **Preferences** > **Account**.\n\n6. Select **Login with Cloudflare Zero Trust**.\n\n7. Enter your team name.\n\n8. Complete the authentication steps required by your organization.\n\n   Once authenticated, you will see a Success page and a dialog prompting you to open WARP.\n\n9. Select **Open Cloudflare WARP.app** to complete the registration.\n\nThe device is now protected by your organization's Zero Trust policies.\n\n### Enroll using the CLI\n\nTo enroll your device using the terminal:\n\n1. [Download](https://pkg.cloudflareclient.com/) and install the WARP package.\n\n2. Open a terminal window. Ensure that you are logged into the terminal as the current user and not as root.\n\n3. Enroll into Cloudflare Zero Trust using your organization's team name:",
      "language": "unknown"
    },
    {
      "code": "4. In the browser window that opens, complete the authentication steps required by your organization.\n\n   Once authenticated, you will see a success page and a dialog prompting you to open a link.\n\n5. Select **Open Link**.\n\n6. Verify the registration in the terminal:",
      "language": "unknown"
    },
    {
      "code": "Troubleshoot missing registration\n\nThe registration process may take a few minutes to complete. If the registration continues to be missing, then manually copy the authentication token from the browser to the WARP client:\n\n1. On the success page, right-click and select **View Page Source**.\n\n2. Find the HTML metadata tag that contains the token. For example, `<meta http-equiv=\"refresh\" content\"=0;url=com.cloudflare.warp://<your-team-name>.cloudflareaccess.com/auth?token=yeooilknmasdlfnlnsadfojDSFJndf_kjnasdf...\" />`\n\n3. Copy the URL field: `com.cloudflare.warp://<your-team-name>.cloudflareaccess.com/auth?token=<your-token>`\n\n4. In the terminal, run the following command using the URL obtained in the previous step.",
      "language": "unknown"
    },
    {
      "code": "If you get a `401` error, then the token has expired. Generate a new one by refreshing the web page and quickly grab the new token from the page source.\n\n1. If you did not configure WARP to [auto-connect](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#auto-connect), manually turn on WARP:",
      "language": "unknown"
    },
    {
      "code": "The device is now protected by your organization's Zero Trust policies. For more information on all available commands, run `warp-cli --help`.\n\n## iOS, Android, and ChromeOS\n\n### Enroll manually\n\n1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the Cloudflare One Agent app.\n2. Launch the Cloudflare One Agent app.\n3. Select **Next**.\n4. Review the privacy policy and select **Accept**.\n5. Enter your team name.\n6. Complete the authentication steps required by your organization.\n7. After authenticating, select **Install VPN Profile**.\n8. In the **Connection request** popup window, select **OK**.\n9. If you did not enable [auto-connect](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#auto-connect), manually turn on the switch to **Connected**.\n\nThe device is now protected by your organization's Zero Trust policies.\n\n### Enroll using a URL\n\nFeature availability\n\n| System | Availability | Minimum WARP version |\n| - | - | - |\n| Windows | ❌ | |\n| macOS | ❌ | |\n| Linux | ❌ | |\n| iOS | ✅ | 1.10 |\n| Android | ✅ | 2.4 |\n| ChromeOS | ✅ | 2.4 |\n\nAdministrators can provide users with a custom login URL that automatically fills in your organization's team name during device enrollment. Using a URL reduces the potential for error that comes with manual entry of the team name.\n\nThe WARP client supports URLs accessed through a direct link or with a URL handler such as a QR code. Direct links are currently only supported in Safari and Firefox. If your default browser is Chrome (or another unsupported browser), we recommend embedding the link in a QR code.\n\n#### Generate a login URL\n\nTo generate a URL for device enrollment:\n\n1. Copy the following link, replacing `<your-team-name>` with your Zero Trust team name:",
      "language": "unknown"
    },
    {
      "code": "2. (Optional) Use any QR code generator to embed the link in a QR code.\n\n3. Distribute the link or QR code to users.\n\n#### Use the login URL\n\nTo enroll a device using a login URL:\n\n1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the Cloudflare One Agent app.\n\n2. Go to the [login URL](#generate-a-login-url) provided by your account administrator. To use a QR code, open the QR scanner app on your device and scan the QR code.\n\n   The Cloudflare One Agent app will open and start the onboarding flow.\n\n   Note\n\n   If the device is already enrolled in the account associated with this URL, Cloudflare One agent will bypass onboarding and show the **Connected** switch.\n\n3. To complete the onboarding flow:\n\n   a. Review the privacy policy and select **Accept**.\n\n   b. On the **Enter team name** screen, confirm that the pre-populated team name matches your organization.\n\n   `Already Authenticated` error\n\n   If Cloudflare One Agent is logged in using another team name, you must first log out of that account. Go to **Settings** > **Account** to log out, and then retry the QR code or login link.\n\n   c. Complete the authentication steps required by your organization.\n\n   d. After authenticating, select **Install VPN Profile**.\n\n   e. In the **Connection request** popup window, select **OK**.\n\n4. If you did not enable [auto-connect](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#auto-connect), manually turn on the switch to **Connected**.\n\nThe device is now protected by your organization's Zero Trust policies.\n\n## Virtual machines\n\nBy default, virtual machines (VMs) are subject to the WARP client settings of the host. If you want to deploy a separate instance of WARP in a VM, you must configure the VM to operate in bridged networking mode.\n\n</page>\n\n<page>\n---\ntitle: Managed deployment · Cloudflare One docs\ndescription: Organizations can deploy WARP automatically to their fleet of\n  devices in a single operation. The WARP client is compatible with the vast\n  majority of managed deployment workflows, including mobility management\n  solutions such as Intune or JAMF, or by executing an .msi file on desktop\n  machines.\nlastUpdated: 2025-11-14T21:15:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/index.md\n---\n\nOrganizations can deploy WARP automatically to their fleet of devices in a single operation. The WARP client is compatible with the vast majority of managed deployment workflows, including [mobility management solutions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/partners/) such as Intune or JAMF, or by executing an `.msi` file on desktop machines.\n\nThis page provides generic instructions for an automated deployment. If you want to deploy the WARP client manually, refer to the [instructions for manual deployment](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/).\n\nWarning\n\n[MDM parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) that you specify in a local policy file will overrule any [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) configured in the dashboard.\n\n## Prerequisites\n\n* Refer to the [Download page](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/#windows) to review system requirements and download the installer for your operating system.\n\n* After deploying the WARP client, you can check its connection progress using the [Connectivity status](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/connectivity-status/) messages displayed in the WARP GUI.\n\n## Windows\n\nThe WARP client for Windows allows for an automated install via tools like Intune, AD, or any script or management tool that can execute a `.msi` file.\n\n### Install WARP\n\nTo install the WARP client, run the following command:",
      "language": "unknown"
    },
    {
      "code": "#### Supported properties\n\nThe WARP MSI installer supports the following [public properties](https://learn.microsoft.com/en-us/windows/win32/msi/public-properties):\n\n* `ORGANIZATION`\n* `GATEWAY_UNIQUE_ID`\n* `AUTH_CLIENT_ID`\n* `AUTH_CLIENT_SECRET`\n* `ONBOARDING`\n* `OVERRIDE_API_ENDPOINT`\n* `OVERRIDE_DOH_ENDPOINT`\n* `OVERRIDE_WARP_ENDPOINT`\n* `SERVICE_MODE`\n* `SUPPORT_URL`\n* `SWITCH_LOCKED`\n\nRefer to [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) for a description of each property.\n\n### Uninstall WARP\n\nTo uninstall the WARP client:\n\n1. First, locate the `.msi` package with the following PowerShell command:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "1. You can then use the LocalPackage output in the uninstall command. For example,",
      "language": "unknown"
    },
    {
      "code": "### Update MDM parameters\n\nThe on-disk configuration of the Windows client can be changed at any time by modifying or replacing the contents of `C:\\ProgramData\\Cloudflare\\mdm.xml`. The format of this file is as follows:",
      "language": "unknown"
    },
    {
      "code": "Changes to this file are processed immediately by the WARP client.\n\n### Authenticate in embedded browser\n\nBy default WARP will use the user's default browser to perform registration. You can override the default setting to instead authenticate users in an embedded browser. The embedded browser will work around any protocol handler issues that may prevent the default browser from launching.\n\nTo use an embedded browser:\n\n1. Download and install WebView2 by following the [Microsoft instructions](https://developer.microsoft.com/en-us/microsoft-edge/webview2/#download-section).\n\n2. Add a registry key with the following command:",
      "language": "unknown"
    },
    {
      "code": "The WARP client will now launch WebView2 when the user is registering their device with Zero Trust.\n\n## macOS\n\nThe WARP client for macOS allows for an automated install via tools like Jamf, Intune, Kandji, or JumpCloud or any script or management tool that can place a `com.cloudflare.warp.plist` file in `/Library/Managed Preferences`. The plist can also be wrapped in a `.mobileconfig`.\n\nWarning\n\nDo not deploy WARP via [Intune's line-of-business (LOB) deployment method](https://learn.microsoft.com/en-us/intune/intune-service/apps/lob-apps-macos). This deployment type is not supported. Use [Intune's `.pkg` deployment method](https://learn.microsoft.com/en-us/intune/intune-service/apps/macos-unmanaged-pkg) instead to successfully install the WARP client on macOS.\n\nIf you do not wish to use a management tool, you can manually place an `mdm.xml` file in `/Library/Application Support/Cloudflare`.\n\n### Prepare file for MDM deployment\n\n#### `plist` file\n\n1. [Download](https://developers.cloudflare.com/cloudflare-one/static/mdm/com.cloudflare.warp.plist) an example `com.cloudflare.warp.plist` file.\n\n2. Modify the file with your desired [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/).\n\n#### `mobileconfig` file\n\n1. [Download](https://developers.cloudflare.com/cloudflare-one/static/mdm/CloudflareWARP.mobileconfig) an example `.mobileconfig` file.\n\n2. Run `uuidgen` from your macOS Terminal. This will generate a value for `PayloadUUID`, which you can use to replace the default value used for `PayloadUUID`.\n\n3. Modify the file with your desired [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/).\n\n### Place an unmanaged `mdm.xml` file\n\nYou can configure [WARP deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) on macOS by manually placing an `mdm.xml` file in `/Library/Application Support/Cloudflare`. This deployment method is an alternative to pushing a `plist` or `mobileconfig` using an MDM tool.\n\nThe format of `/Library/Application Support/Cloudflare/mdm.xml` is as follows:",
      "language": "unknown"
    },
    {
      "code": "## Linux\n\nThe WARP client for Linux allows for an automated install via the presence of an `mdm.xml` file in `/var/lib/cloudflare-warp`. The format of `/var/lib/cloudflare-warp/mdm.xml` is as follows:",
      "language": "unknown"
    },
    {
      "code": "Refer to [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) for a list of accepted arguments.\n\nTo learn how to automate WARP deployment on headless servers, refer to our [tutorial](https://developers.cloudflare.com/cloudflare-one/tutorials/warp-on-headless-linux/).\n\n## iOS\n\nMigrate from 1.1.1.1\n\nThe legacy iOS client, [1.1.1.1: Faster Internet](https://apps.apple.com/us/app/1-1-1-1-faster-internet/id1423538627), has been replaced by the Cloudflare One Agent. Learn more in our [migration guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/cloudflare-one-agent-migration/).\n\nThe Cloudflare WARP iOS client, known in the App Store as [Cloudflare One Agent](https://apps.apple.com/us/app/cloudflare-one-agent/id6443476492), allows for an automated install via tools like Jamf, Intune, or SimpleMDM.\n\nTo proceed with the installation, here is an example of the XML code you will need:",
      "language": "unknown"
    },
    {
      "code": "Refer to [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) for a description of each argument.\n\n## Android / ChromeOS\n\nMigrate from 1.1.1.1\n\nThe legacy Android client, [1.1.1.1 + WARP: Safer Internet](https://play.google.com/store/apps/details?id=com.cloudflare.onedotonedotonedotone), has been replaced by the Cloudflare One Agent. Learn more in our [migration guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/cloudflare-one-agent-migration/).\n\nThe Cloudflare WARP Android client, known in the Google Play store as [Cloudflare One Agent](https://play.google.com/store/apps/details?id=com.cloudflare.cloudflareoneagent), allows for an automated install via tools like Intune, Google Endpoint Manager, and others.\n\nTo proceed with the installation, here is an example of the XML code you will need:",
      "language": "unknown"
    },
    {
      "code": "If your MDM tool does not support XML, you may need to convert the XML to JSON. Here is an example below:",
      "language": "unknown"
    },
    {
      "code": "Refer to [deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) for a description of each value.\n\n</page>\n\n<page>\n---\ntitle: WARP with legacy VPN · Cloudflare One docs\ndescription: \"The Cloudflare WARP client can run alongside most legacy\n  third-party VPNs. Because the WARP client and third-party VPN client both\n  enforce firewall, routing, and DNS rules on your local device, the two\n  products will compete with each other for control over IP and DNS traffic. To\n  ensure compatibility make sure that:\"\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/vpn/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/vpn/index.md\n---\n\nThe Cloudflare WARP client can run alongside most legacy third-party VPNs. Because the WARP client and third-party VPN client both enforce firewall, routing, and DNS rules on your local device, the two products will compete with each other for control over IP and DNS traffic. To ensure compatibility make sure that:\n\n* IP traffic is split tunneled between WARP and the VPN. All VPN traffic must bypass WARP and vice versa.\n* The VPN bypasses/allows/excludes all domains, IPs, and ports listed in [WARP with firewall](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n* DNS resolution is handled by either WARP or the VPN. You must disable DNS filtering in one of the two products.\n\nFor the most stable and consistent connection, we recommend connecting your [private network or individual applications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/) to Cloudflare instead of using a legacy VPN. However, until you can migrate, the following guidelines will help get your Zero Trust deployment up and running.\n\n## Gateway with WARP\n\nIn [Gateway with WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-warp-default) mode, WARP must be allowed to capture and route all DNS traffic on the device. You can use [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) to send DNS requests to a server behind your third-party VPN or firewall, but the request must first go through WARP's local DNS proxy. Refer to [WARP architecture](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/) for more information about this requirement.\n\nIf you cannot disable DNS on your VPN, switch to [Secure Web Gateway without DNS filtering](#secure-web-gateway-without-dns-filtering) mode to disable DNS in WARP.\n\n### 1. Configure the VPN\n\nPerform these steps in your third-party VPN software. Refer to your VPN's documentation for specific instructions on how to configure these settings.\n\n1. Enable split tunneling in the third-party VPN.\n\n2. Disable DNS configuration in the third-party VPN.\n\n### 2. Configure WARP\n\nPerform these steps in [Cloudflare One](https://one.dash.cloudflare.com/).\n\n1. Set your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) to **Exclude IPs and domains**.\n\n2. [Add the following entries](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) to your Split Tunnel Exclude list:\n\n   * Private IP address range exposed by your third-party VPN client. For example,\n\n     | Selector | Value |\n     | - | - |\n     | IP Address | `172.16.0.0/12` |\n     | | |\n\n   * Server that your third-party VPN client connects to. For example,\n\n     | Selector | Value |\n     | - | - |\n     | Domain | `*.cvpn-endpoint-xxxxx.prod.clientvpn.us-west-2.amazonaws.com` |\n\n1) (Optional) In [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/), add the domains that you want to resolve using your VPN's private DNS servers. For example,\n\n   | Domain | DNS Servers |\n   | - | - |\n   | `internal.wiki.intranet` | `172.31.26.130`, `172.31.23.120` |\n\nYou can now [test](#test-the-configuration) if WARP runs alongside the VPN.\n\n## Secure Web Gateway without DNS filtering\n\nIn [Secure Web Gateway without DNS filtering](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#secure-web-gateway-without-dns-filtering) mode, WARP does not perform any DNS functions on the device. Therefore, all you need to do is split tunnel your IP traffic.\n\n### 1. Configure the VPN\n\nEnable split tunneling in your third-party VPN software. Refer to your VPN's documentation for specific instructions on how to configure this setting.\n\n### 2. Configure WARP\n\nPerform these steps in [Cloudflare One](https://one.dash.cloudflare.com/).\n\n1. Set your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) to **Exclude IPs and domains**.\n\n2. [Add the following entries](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) to your Split Tunnel Exclude list:\n\n   * Private IP address range exposed by your third-party VPN client. For example,\n\n     | Selector | Value |\n     | - | - |\n     | IP Address | `172.16.0.0/12` |\n     | | |\n\n   * Server that your third-party VPN client connects to. For example,\n\n     | Selector | Value |\n     | - | - |\n     | Domain | `*.cvpn-endpoint-xxxxx.prod.clientvpn.us-west-2.amazonaws.com` |\n\n1) In your device profile, verify that **Service mode** is set to **Secure Web Gateway without DNS filtering**.\n\n## Test the configuration\n\nWe recommend enabling the WARP client before enabling your third-party VPN. Some third-party VPNs must be the last to edit a network's configuration or they will fail.\n\n1. Connect the WARP client.\n2. Connect the third-party VPN client.\n3. To test your Split Tunnel configuration, connect to a private IP address that is behind the VPN. For example, you can open a terminal and run `ping <SERVER-IP>`.\n4. To test your DNS configuration, connect to an internal domain that is behind the VPN. For example, you can open a browser and go to `internal.wiki.intranet`.\n\nTest before updates\n\nOnce you have a configuration in place and working, make sure to thoroughly test compatibility before updating your VPN software. Compatibility testing with what are essentially competing software will need to be done with each new version.\n\n</page>\n\n<page>\n---\ntitle: Download WARP beta releases · Cloudflare One docs\ndescription: Cloudflare tests new WARP features and improvements in an unstable\n  beta release before adding them to the stable release. Beta releases are not\n  recommended for production environments. To get early access to new features,\n  download the latest beta client from the links below.\nlastUpdated: 2025-12-17T19:51:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/beta-releases/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/beta-releases/index.md\n---\n\nCloudflare tests new WARP features and improvements in an unstable beta release before adding them to the [stable release](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/). Beta releases are not recommended for production environments. To get early access to new features, download the latest beta client from the links below.\n\n## Windows\n\n[Download latest beta release](https://downloads.cloudflareclient.com/v1/download/windows/beta)\n\n| | |\n| - | - |\n| **OS version** | Windows 10 LTSC, Windows 11, Windows 365 Cloud PC running Windows 11 |\n| **Processor** | AMD64 / x86-64 or ARM64 / AArch64 |\n| **.NET Framework version** | 4.7.2 or later |\n| **HD space** | 184 MB |\n| **Memory** | 3 MB |\n| **Network interface type** | Wi-Fi or LAN |\n| **MTU** | 1381 bytes recommended [1](#user-content-fn-1) |\n\n## Footnotes\n\n1. Minimum 1281 bytes with [Path MTU Discovery](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/path-mtu-discovery/) [↩](#user-content-fnref-1)\n\nLatest release\n\nPrevious version history (8)\n\nWindows 2025.9.173.1\n\nWindows 2025.7.106.1\n\nWindows 2025.6.824.1\n\nWindows 2025.5.828.1\n\nWindows 2025.5.735.1\n\nWindows 2025.4.589.1\n\nWindows 2025.2.460.1\n\nWindows 2025.1.447.1\n\n## macOS\n\n[Download latest beta release](https://downloads.cloudflareclient.com/v1/download/macos/beta)\n\n| | |\n| - | - |\n| **OS version** | Sonoma 14.0+, Sequoia 15.1+ (15.0.x is not supported), Tahoe 26.0+ |\n| **Processor** | M series |\n| **HD space** | 75 MB |\n| **Memory** | 35 MB |\n| **Network interface type** | Wi-Fi or LAN |\n| **MTU** | 1381 bytes recommended [1](#user-content-fn-1) |\n\n## Footnotes\n\n1. Minimum 1281 bytes with [Path MTU Discovery](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/path-mtu-discovery/) [↩](#user-content-fnref-1)\n\nLatest release\n\nPrevious version history (9)\n\nmacOS 2025.9.173.1\n\nmacOS 2025.7.106.1\n\nmacOS 2025.6.824.1\n\nmacOS 2025.5.828.1\n\nmacOS 2025.5.735.1\n\nmacOS 2025.4.589.1\n\nmacOS 2025.2.460.1\n\nmacOS 2025.1.634.1\n\nmacOS 2025.1.447.1\n\n</page>\n\n<page>\n---\ntitle: Migrate 1.1.1.1 app · Cloudflare One docs\ndescription: Users can connect to Cloudflare Zero Trust services through an\n  agent that runs on their device. Cloudflare previously bundled that\n  functionality into the WARP client, an application that also provides\n  privacy-focused DNS and VPN services for consumers (known as 1.1.1.1 w/ WARP).\n  Supporting both enterprise and consumer functionality in the same application\n  allowed us to build Zero Trust upon the same foundation used by millions of\n  consumers across the globe, but has limited the pace at which changes could be\n  released. As a result, we are launching a dedicated Cloudflare One Agent that\n  replaces the WARP client for Zero Trust deployments.\nlastUpdated: 2025-12-17T19:51:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/cloudflare-one-agent-migration/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/cloudflare-one-agent-migration/index.md\n---\n\nUsers can connect to Cloudflare Zero Trust services through an agent that runs on their device. Cloudflare previously bundled that functionality into the [WARP client](https://developers.cloudflare.com/warp-client/), an application that also provides privacy-focused DNS and VPN services for consumers (known as 1.1.1.1 w/ WARP). Supporting both enterprise and consumer functionality in the same application allowed us to build Zero Trust upon the same foundation used by millions of consumers across the globe, but has limited the pace at which changes could be released. As a result, we are launching a dedicated Cloudflare One Agent that replaces the WARP client for Zero Trust deployments.\n\nThe Cloudflare One Agent supports all existing Zero Trust functionality. The underlying connection technology remains the same, and improvements made to performance and reliability based on feedback from 1.1.1.1 w/ WARP users will continue to be built into the Cloudflare One Agent.\n\n## macOS, Windows, and Linux\n\nNo action is required for desktop clients at this time. The existing Cloudflare WARP client will continue to support both Zero Trust and 1.1.1.1 functionality.\n\n## iOS and Android\n\nZero Trust users must migrate from the 1.1.1.1 app to the Cloudflare One Agent app. Cloudflare is no longer supporting customers using the 1.1.1.1 app for Zero Trust features.\n\nOrganizations can migrate their teams with minimal disruption in one of two modes: [manually](#migrate-manual-deployments) or via a [managed endpoint solution](#migrate-managed-deployments).\n\n### Migrate manual deployments\n\nIf you downloaded and installed the 1.1.1.1 app manually, here are the recommended migration steps:\n\n* android\n\n  1. Update the **1.1.1.1** app to version 6.29 or above. The update ensures that 1.1.1.1 can [co-exist](#what-to-do-with-the-old-app) with the new Cloudflare One Agent app.\n\n  2. If you have enabled [TLS decryption](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/), ensure that you have a [Do Not Inspect policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/initial-setup/http/) in place for the following applications:\n\n     * *Google Services (Do Not Inspect)*\n     * *Google Play Store (Do Not Inspect)*\n     * *Google (Do Not Inspect)*\n     * *Google Drive (Do Not Inspect)*\n     * *Google Chat (Do Not Inspect)*\n     * *Google Meet (Do Not Inspect)*\n\n     This prevents certificate pinning issues when performing the Android migration.\n\n  3. Follow [these instructions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/#ios-android-and-chromeos) to install and enroll the Cloudflare One Agent.\n\n* ios\n\n  1. Update the **1.1.1.1** app to version 6.22 or above. The update ensures that 1.1.1.1 can [co-exist](#what-to-do-with-the-old-app) with the new Cloudflare One Agent app.\n  2. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/#ios) the **Cloudflare One Agent** app.\n  3. Launch the Cloudflare One Agent app. All settings from 1.1.1.1 will automatically migrate over to the Cloudflare One Agent. The user does not need to reauthenticate.\n\nIf you enrolled the Cloudflare One Agent in the same Zero Trust organization as 1.1.1.1, you will be automatically logged out of Cloudflare One on 1.1.1.1. The 1.1.1.1 app will revert to consumer mode, and the **Login with Cloudflare Zero Trust** button on the old app will redirect to the new app.\n\nIf you enrolled the Cloudflare One Agent in a different Zero Trust organization, you will remain logged into your other Zero Trust organization on 1.1.1.1.\n\n#### What to do with the old app\n\nWhile both 1.1.1.1 and Cloudflare One Agent can exist on the device, iOS and Android will only allow one of these applications to connect at a time.\n\nTo access your company's resources, you must use the Cloudflare One Agent app.\n\nYou can use the 1.1.1.1 app for personal browsing. When connected to 1.1.1.1 w/ WARP, your traffic will be encrypted and privately routed via Cloudflare's network, and your employer will not be able to see any of your browsing activity. To learn more about consumer WARP services, refer to [WARP client](https://developers.cloudflare.com/warp-client/).\n\nIf you do not wish to use the old 1.1.1.1 app for personal browsing, you may [uninstall](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/remove-warp/#ios-and-android) it.\n\n### Migrate managed deployments\n\nIf you deployed the 1.1.1.1 app with an [MDM provider](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/), perform the migration as follows:\n\n* android\n\n  1. Using your MDM tool, update the **1.1.1.1** app to version 6.29 or above. The update ensures that 1.1.1.1 can co-exist with the new Cloudflare One Agent app during the migration.\n\n  2. Add the **Cloudflare One Agent** app from the Google Play store. Its application ID is `com.cloudflare.cloudflareoneagent`.\n\n  3. Copy your [MDM deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/#android--chromeos) for the **1.1.1.1** app.\n\n  4. Paste the MDM deployment parameters into the **Cloudflare One Agent** app configuration. Make sure that you do not accidentally overwrite the application ID (`com.cloudflare.cloudflareoneagent`).\n\n  5. Using your MDM tool, install the **Cloudflare One Agent** on your devices.\n\n  6. On Android, the user will need to [re-authenticate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/manual-deployment/#ios-android-and-chromeos) to the new application, following the same onboarding steps they went through initially.\n\n* ios\n\n  1. Using your MDM tool, update the **1.1.1.1** app to version 6.22 or above. The update ensures that 1.1.1.1 can co-exist with the new Cloudflare One Agent app during the migration.\n\n  2. Add the **Cloudflare One Agent** app from the App store. Its application ID is `com.cloudflare.cloudflareoneagent`.\n\n  3. Copy your [MDM deployment parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/#ios) for the **1.1.1.1** app.\n\n  4. Paste the MDM deployment parameters into the **Cloudflare One Agent** app configuration. Make sure that you do not accidentally overwrite the application ID (`com.cloudflare.cloudflareoneagent`).\n\n  5. Using your MDM tool, install the **Cloudflare One Agent** on your devices.\n\n  On iOS, the user does not need to re-authenticate — registration data from the 1.1.1.1 app is automatically migrated to the new Cloudflare One Agent app.\n\nOnce users have enrolled, the migration process is complete. The 1.1.1.1 app will revert to [consumer mode](#what-to-do-with-the-old-app) and ignore the existing MDM configuration profile. If you do not wish to keep the 1.1.1.1 app, you may uninstall it and delete its MDM configuration.\n\n### Verify migration\n\nTo check whether a user has migrated, go to **Team & Resources** > **Devices**. A device enrolled through the Cloudflare One Agent will appear as a new device with a new device ID. Their old 1.1.1.1 registration will remain as an inactive device.\n\n</page>\n\n<page>\n---\ntitle: Download WARP LTS releases · Cloudflare One docs\ndescription: Long-Term Support (LTS) releases are stable releases that are\n  guaranteed to continue receiving security bug fixes for at least 12 months or\n  90 days after the next LTS release, whichever is greater.\nlastUpdated: 2025-12-17T19:51:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/lts-releases/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/lts-releases/index.md\n---\n\nLong-Term Support (LTS) releases are stable releases that are guaranteed to continue receiving security bug fixes for at least 12 months or 90 days after the next LTS release, whichever is greater.\n\nFor more details on WARP client support timelines and end-of-life (EOL) policies, refer to the [Support lifecycle](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/support-lifecycle/) page.\n\nNote\n\nNo LTS releases are currently available, as Cloudflare is still rolling out our new LTS release process. When a stable release is declared an LTS release, it will be listed on this page and announced in the [WARP changelog](https://developers.cloudflare.com/cloudflare-one/changelog/warp/).\n\n## Windows\n\n| | |\n| - | - |\n| **OS version** | Windows 10 LTSC, Windows 11, Windows 365 Cloud PC running Windows 11 |\n| **Processor** | AMD64 / x86-64 or ARM64 / AArch64 |\n| **.NET Framework version** | 4.7.2 or later |\n| **HD space** | 184 MB |\n| **Memory** | 3 MB |\n| **Network interface type** | Wi-Fi or LAN |\n| **MTU** | 1381 bytes recommended [1](#user-content-fn-1) |\n\n## Footnotes\n\n1. Minimum 1281 bytes with [Path MTU Discovery](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/path-mtu-discovery/) [↩](#user-content-fnref-1)\n\n## macOS\n\n| | |\n| - | - |\n| **OS version** | Sonoma 14.0+, Sequoia 15.1+ (15.0.x is not supported), Tahoe 26.0+ |\n| **Processor** | M series |\n| **HD space** | 75 MB |\n| **Memory** | 35 MB |\n| **Network interface type** | Wi-Fi or LAN |\n| **MTU** | 1381 bytes recommended [1](#user-content-fn-1) |\n\n## Footnotes\n\n1. Minimum 1281 bytes with [Path MTU Discovery](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/path-mtu-discovery/) [↩](#user-content-fnref-1)\n\n## Linux\n\n| | |\n| - | - |\n| **OS version** | CentOS 8, RHEL 8, Debian 12, Debian 13, Fedora 34, Fedora 35, Ubuntu 22.04 LTS, Ubuntu 24.04 LTS |\n| **Processor** | AMD64 / x86-64 or ARM64 / AArch64 |\n| **HD space** | 75 MB |\n| **Memory** | 35 MB |\n| **Network interface type** | Wi-Fi or LAN |\n| **MTU** | 1381 bytes recommended [1](#user-content-fn-1) |\n\n## Footnotes\n\n1. Minimum 1281 bytes with [Path MTU Discovery](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/path-mtu-discovery/) [↩](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: WARP lifecycle and support policy · Cloudflare One docs\ndescription: This page details the technical support policies for the WARP\n  client, which operating systems and their versions are supported and for how\n  long, and the process by which WARP features will be deprecated.\nlastUpdated: 2025-12-17T19:51:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/support-lifecycle/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/support-lifecycle/index.md\n---\n\nThis page details the technical support policies for the WARP client, which operating systems and their versions are supported and for how long, and the process by which WARP features will be deprecated.\n\nNote\n\nBoth the WARP client and the OS it is installed on must be in support as defined in this document for their combined use to be supported.\n\n## WARP client lifecycle\n\n### Desktop platforms\n\nWARP client releases for Windows, macOS, and Linux come in two forms: beta and stable. Occasionally, a stable release will be declared a Long-Term Support release (LTS).\n\n* [Beta releases](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/beta-releases/) allow for early testing of new features before the features ship in the next stable release. Beta releases are not guaranteed to get security fixes and are not recommended for production environments.\n\n* [Stable releases](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/), including those labeled as LTS releases, are production-ready and will include the latest features as well as functional and security bug fixes. Functional and security bugs found in non-LTS stable releases will be fixed in later stable releases; they are not backported to previous versions. Therefore, Cloudflare recommends regularly deploying the latest stable release.\n\n* [LTS releases](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/lts-releases/) are guaranteed to continue receiving security bug fixes for at least 12 months or 90 days after the next LTS release, whichever is greater. For example, if there are 15 months between two consecutive LTS releases, the earlier LTS release will receive security fixes for 18 months (from its release until 90 days after the later LTS release). An upcoming stable release will be declared an LTS release in advance to notify customers of the upcoming 90-day migration period.\n\n  To ensure timely security fixes with less frequent [version testing](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/update-warp/#test-before-updates), customers may choose to deploy only LTS releases and skip the stable releases in between. This approach is recommended for large or risk-averse organizations where stability is more important than rapid adoption of the latest features.\n\n### Mobile platforms\n\nWARP client releases for iOS, iPadOS, Android, ChromeOS, and ChromeOS Flex are limited to stable releases released via the iOS App Store or Google Play Store. Therefore, security fixes will be shipped via the latest release.\n\n### Feature deprecation policy\n\nMajor features included in a specific WARP client version will remain supported for the entire lifecycle of that version. In other words, Cloudflare will not remove features from a client version that is still within its security support window.\n\nCloudflare will provide a minimum 90-day notice prior to removing major features in future releases. This allows customers on the stable release track to prepare for feature removal without delaying the adoption of the latest release. Customers on the LTS release track already have a 90-day overlap period between LTS releases.\n\n### Release schedule\n\nCloudflare does not operate on a fixed release schedule; all releases for the WARP client are incremental. When a new WARP client version is released, Cloudflare will publish release notes on the [Downloads page](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and in the [changelog](https://developers.cloudflare.com/cloudflare-one/changelog/warp/).\n\n## Supported operating systems\n\nWARP is guaranteed to support operating systems for the primary maintenance timespan provided by the vendors or maintainers. This is to ensure that security fixes in the WARP client are always supported by security fixes in the underlying operating system.\n\n### Windows\n\nThe WARP client support policy for Windows follows [Microsoft's Lifecycle Policy](https://learn.microsoft.com/en-us/lifecycle/).\n\n* **Windows 10 and 11**: WARP supports [Windows client versions](https://learn.microsoft.com/en-us/windows/release-health/supported-versions-windows-client) as long as they remain in active servicing under Microsoft's Modern Lifecycle Policy. Enterprise LTSC editions must remain under Mainstream Support.\n* **Windows Server**: WARP support for Windows Server is pending. Once testing is complete, our policy will be to support [Windows Server LTSC releases](https://learn.microsoft.com/en-us/windows/release-health/windows-server-release-info) within their Mainstream Support window. Annual Channel releases of Windows Server will not be supported.\n\nNote\n\nThere is only one version of Windows 10 still supported by the WARP client: the latest LTSC release. Standard Windows 10 releases are no longer supported. We strongly encourage customers to deploy Windows 11 for desktop devices.\n\nAs of December 2025, the following versions of Windows are supported:\n\n| Windows version | Supported until |\n| - | - |\n| Windows 10 21H2 LTSC | January 2027 |\n| Windows 11 24H2 LTSC | October 2029 |\n| Windows 11 25H2 | October 2027 |\n| Windows 11 24H2 | October 2026 |\n| Windows Server 2025 LTSC | Pending full testing. Once complete, will be supported until November 2029. |\n| Windows Server 2022 LTSC | Pending full testing. Once complete, will be supported until October 2026. |\n| Windows Server 2019 LTSC | [To be determined](#older-versions-of-windows-server) as it is currently out of mainstream Microsoft support. Usage is highly discouraged. |\n\n#### Older versions of Windows Server\n\nThe WARP client will support the most recent Windows Server version that has left Microsoft's Mainstream Support window, as migration of Windows Server has been observed to take significantly longer than most operating systems. Once Windows Server releases have left Mainstream Support, the WARP client does not guarantee an amount of time it will continue to be supported, though end of support will be announced 90 days in advance. We strongly recommend migrating as quickly as possible to supported versions of Windows Server to avoid incidents caused by unfixed bugs in the operating system. In all cases, the WARP client will not attempt to fix security issues in the underlying operating system.\n\n#### Windows Subsystem for Linux (WSL)\n\nWindows Subsystem for Linux v2 (WSLv2) is supported by the WARP client that is installed on the Windows host (not a WARP client running inside WSLv2), so long as the host version of Windows is supported.\n\n### macOS\n\nThe WARP client supports the current major version of macOS and the two previous major versions. Devices on a previous major version must have the latest minor and patch updates installed (for example, `14.8.3`) to receive support. This policy aligns with Apple's standard security update cycle, as well as the comparatively rapid release of new macOS versions compared to other desktop operating systems.\n\nAs of December 2025, the following major versions of macOS are supported:\n\n| macOS version | Supported until |\n| - | - |\n| macOS 26 (Tahoe) | Release of 2028 major version |\n| macOS 15 (Sequoia) | Release of 2027 major version |\n| macOS 14 (Sonoma) | Release of 2026 major version |\n\n### Debian\n\nThe WARP client supports all Debian releases within their [standard EOL window](https://www.debian.org/releases/). Devices must be updated to the latest point release (for example, `12.12`) to receive support.\n\nAs of December 2025, the following versions of Debian are supported:\n\n| Debian version | Supported until |\n| - | - |\n| Debian 13 (Trixie) | August 2028 |\n| Debian 12 (Bookworm) | June 2026 |\n\n### Ubuntu\n\nThe WARP client supports all Ubuntu releases within their [Standard Security Maintenance window](https://www.debian.org/releases/). Devices must be updated to the latest point release (for example, `22.04.5`) to receive support.\n\nAs of December 2025, the following versions of Ubuntu are supported:\n\n| Ubuntu version | Supported until |\n| - | - |\n| Ubuntu 25.10 (Questing Quokka) | July 2026 |\n| Ubuntu 25.04 (Plucky Puffin) | January 2026 |\n| Ubuntu 24.04 LTSC (Noble Numbat) | April 2029 |\n| Ubuntu 22.04 LTSC (Jammy Jellyfish) | April 2027 |\n\n### Red Hat Enterprise Linux (RHEL)\n\nWARP client support for RHEL is pending. Once testing is complete, our policy will be to support all major versions of RHEL within their [Full Support window](https://access.redhat.com/product-life-cycles). Devices must be updated to the latest minor release (for example, `9.4`) to receive support.\n\nAs of December 2025, only RHEL 8 has completed full compatibility testing, which is now out of the Red Hat Full Support window. This section will be updated as we add RHEL support to match Red Hat's support lifecyle.\n\n| RHEL version | Supported until |\n| - | - |\n| RHEL 10 | Pending full testing. Once complete, will be supported until May 2030. |\n| RHEL 9 | Pending full testing. Once complete, will be supported until May 2027. |\n\n### iOS and iPadOS\n\nThe WARP client supports the current major version of iOS and iPadOS as well as the two previous major versions. Devices must have the latest available update installed (for example, `17.7.2`) to receive support. This policy aligns with Apple's standard security update cycle, as well as the comparatively rapid release of new iOS and iPadOS versions compared to other mobile operating systems.\n\nAs of December 2025, the following versions of iOS and iPadOS are supported:\n\n| iOS or iPadOS version | Supported until |\n| - | - |\n| iOS and iPadOS 26 | Release of 2028 major version |\n| iOS and iPadOS 18 | Release of 2027 major version |\n| iOS and iPadOS 17 | Release of 2026 major version |\n\n### Android\n\nThe WARP client supports the current major Android release and the three previous major releases. Devices must have the latest available [Android Security Patch Level](https://source.android.com/docs/security/bulletin/asb-overview) installed to receive support.\n\nNote\n\nThe WARP client is regularly tested on much older versions of Android to maximize compatibility with common devices, which tend to lag behind newer versions of Android. While security fixes are not guaranteed from a support contract perspective, the WARP client is currently expected to generally work on Android 9 or later.\n\nAs of December 2025, the following versions of Android are supported:\n\n| Android version | Supported until |\n| - | - |\n| Android 16 | Release of 2029 major version |\n| Android 15 | Release of 2028 major version |\n| Android 14 | Release of 2027 major version |\n| Android 13 | Release of 2026 major version |\n| Android 9-12 | Not officially supported, but expected to generally work. |\n\n### ChromeOS\n\nThe WARP client supports only the current ChromeOS release on the Stable, LTS, and LTSC channels.\n\nUnlike other operating systems listed in this document, specific ChromeOS version numbers are not tracked here due to the rapid release cadence of the platform (approximately every four weeks to six months). Refer to the official [ChromeOS Release Schedule](https://chromiumdash.appspot.com/schedule) to verify the current version for your channel.\n\n</page>\n\n<page>\n---\ntitle: Update WARP · Cloudflare One docs\ndescription: This guide covers best practices for updating the WARP client.\nlastUpdated: 2025-12-17T19:51:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/update-warp/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/update-warp/index.md\n---\n\nThis guide covers best practices for updating the WARP client.\n\n## When to update WARP\n\nCloudflare recommends deploying the latest [stable release](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) to get new bug fixes, performance improvements, and features. If you run into issues that require troubleshooting or support tickets, one of the first requested actions by our support team will be to update your clients to the latest version.\n\nWe also recognize that there is a cost associated for a business to go through an update cycle, potentially related to change management, QA version testing, and other critical activities for software updates. Customers with limited software update cycles may choose to deploy only the latest [LTS (Long-term Support) release](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/lts-releases/) rather than deploy each stable release. This strategy reduces deployment churn while still addressing security bug fixes in a timely manner.\n\nFor more details on WARP client support timelines and end-of-life (EOL) policies, refer to the [Support lifecycle](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/support-lifecycle/) page.\n\nTip\n\nTo get notified of new releases, subscribe to the [Zero Trust WARP Client changelog](https://developers.cloudflare.com/cloudflare-one/changelog/warp/).\n\n## How to update WARP\n\n### Windows, macOS, and Linux\n\n#### Managed devices\n\nJAMF, Intune, and other MDM tools perform software updates by installing a new binary file. If you deployed WARP using a [device management tool](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/), the update procedure will look exactly the same as your initial installation. To update WARP, simply push the [latest binary file](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) with the same deployment parameters. End users will not be signed out of their client, and they will not have to manually engage with the update.\n\n#### Unmanaged devices\n\nIf your users have local administration rights on their device, you can allow them to update WARP on their own via the WARP GUI. [**Allow updates**](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-updates) is usually disabled on managed devices, as it can introduce version consistency control issues if WARP versions are centrally managed by IT.\n\n### iOS, Android, and ChromeOS\n\nThe iOS App Store and Google Play store can automatically push automatic updates to devices which have auto update enabled. We recommend using this method to keep the Cloudflare One Agent up-to-date on your mobile devices (managed or unmanaged).\n\n## Test before updates\n\nMost issues that occur after an update are due to compatibility issues between WARP and third party security software. Before rolling out an update to your organization, be sure to test the new WARP release alongside your other software.\n\nTo deploy an update incrementally:\n\n1. Install the latest version of WARP on a single device.\n2. Verify connectivity in your Gateway logs, and verify that your third party software still works as expected.\n3. Deploy the update to a few more devices that represent a broad set of configurations within your organization. For example, you could include devices from a variety of departments such as Engineering, Human Resources, and IT.\n4. Verify connectivity for these devices.\n5. Once everything is working, deploy the update to the rest of your organization.\n\n</page>\n\n<page>\n---\ntitle: Client errors · Cloudflare One docs\ndescription: This page lists the error codes that can appear in the WARP client\n  GUI. If you do not see your error below, refer to common issues or contact\n  Cloudflare Support.\nlastUpdated: 2025-12-02T20:21:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/client-errors/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/client-errors/index.md\n---\n\nThis page lists the error codes that can appear in the WARP client GUI. If you do not see your error below, refer to [common issues](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/) or [contact Cloudflare Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n\nTroubleshoot WARP\n\nFor step-by-step guidance on diagnosing and resolving WARP client issues, refer to the [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/). The guide covers:\n\n* How to collect diagnostic logs via the Cloudflare dashboard or CLI\n* How to review key configuration files\n* Common misconfigurations and their fixes\n* Best practices for filing support tickets\n\n![Example of error message in WARP GUI](https://developers.cloudflare.com/_astro/warp-gui-error.CMgEf0Hq_2fUhJv.webp)\n\n## CF\\_CAPTIVE\\_PORTAL\\_TIMED\\_OUT\n\n### Symptoms\n\n* Unable to login to a captive portal network\n* No Internet connectivity\n\n### Cause\n\n[Captive portal detection](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#captive-portal-detection) is turned on and one of the following issues occurred:\n\n* The user did not complete the captive portal login process within the time limit set by WARP.\n* The captive portal redirected the user to a flow that is not yet supported by the captive portal detection feature.\n\n### Resolution\n\n1. Increase the [captive portal timeout](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#captive-portal-detection) to allow users more time to login.\n2. If this does not resolve the issue, allow users to manually [turn off WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#lock-warp-switch). We recommend setting an [auto connect](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#auto-connect) value so that the client turns itself back on after a few minutes.\n\n## CF\\_CONNECTIVITY\\_FAILURE\\_UNKNOWN\n\n### Symptoms\n\n* Unable to connect WARP\n* No Internet connectivity\n* User may be behind a captive portal\n\n### Cause\n\nThe initial [connectivity check](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#connectivity-checks) failed for an unknown reason. Refer to [Unable to connect WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#unable-to-connect-warp) for the most common reasons why this error occurs.\n\n### Resolution\n\n1. Retrieve [WARP debug logs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/warp-logs/) for the device.\n2. Follow the troubleshooting steps in [Unable to connect WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#unable-to-connect-warp).\n\n## CF\\_DNS\\_LOOKUP\\_FAILURE\n\n### Symptoms\n\n* Unable to connect WARP\n* Unable to browse the Internet\n* `nslookup` and `dig` commands fail on the device\n\n### Cause\n\nWARP was unable to resolve hostnames via its [local DNS proxy](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#dns-traffic).\n\n### Resolution\n\n1. Verify that the network the user is on has DNS connectivity.\n2. Verify that DNS resolution works when WARP is disabled.\n3. Ensure that no third-party tools are interfering with WARP for control of DNS.\n4. Ensure that no third-party tools are [performing TLS decryption](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#a-third-party-security-product-is-interfering-with-gateway) on traffic to the [WARP IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n\n## CF\\_DNS\\_PROXY\\_FAILURE\n\n### Symptoms\n\n* Unable to connect WARP in a [mode that enables DNS filtering](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/).\n\n### Cause\n\nA third-party process (usually a third-party DNS software) is bound to port `53`, which is used by WARP's [local DNS proxy](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#dns-traffic) to perform DNS resolution. The name of third-party process will appear in the GUI error message.\n\nOn macOS, you may see `mDNSResponder` instead of the specific application name -- `mDNSResponder` is a macOS system process that handles DNS requests on behalf of other processes. There is no known way to determine which process caused `mDNSResponder` to bind to port `53`, but the most common culprits are virtual machine software (for example, Docker and VMware Workstation) and the macOS Internet Sharing feature.\n\n### Resolution\n\n1. Remove or disable DNS interception in the third-party process.\n\nmDNSResponder\n\nBelow is a non-exhaustive list of third-party software that are known to cause `mDNSResponder` to bind to port `53`. Rather than try to stop `mDNSResponder`, you should either configure the third-party software so that they no longer use port `53`, or temporarily disable them before connecting to WARP.\n\n* **Docker**: [Turn off kernel networking for UDP](https://github.com/docker/for-mac/issues/7008#issuecomment-1746653802) in Docker.\n\n* **Internet Sharing feature**: To disable Internet Sharing:\n\n  1. On macOS, go to **System Settings** > **General** > **Sharing**.\n  2. Turn off **Internet Sharing**.\n\n* **Certain VM software (such as VMware Workstation or Parallels)**: The presence of VM software does not guarantee that it is the offending program, since compatibility with WARP is highly dependent on the VM's configuration. To work around the issue, connect to WARP before running any VMs:\n\n  1. Stop/quit all VMs.\n  2. Connect to WARP.\n  3. Start the VMs again.\n\n1. Alternatively, switch WARP to [Secure Web Gateway without DNS filtering](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#secure-web-gateway-without-dns-filtering) mode.\n\n## CF\\_FAILED\\_READ\\_SYSTEM\\_DNS\\_CONFIG\n\n### Symptoms\n\n* Unable to connect WARP\n* Unable to browse the Internet\n\n### Cause\n\nWARP could not read the system DNS configuration, most likely because it contains an invalid nameserver or search domain.\n\n### Resolution\n\nOn macOS and Linux, validate that `/etc/resolv.conf` is [formatted correctly](https://man7.org/linux/man-pages/man5/resolv.conf.5.html) and check for [invalid characters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#maclinux-the-devices-etcresolvconf-file-has-an-invalid-character).\n\nOn Windows, validate that the registry entry `HKLM\\System\\CurrentControlSet\\Services\\TCPIP\\Parameters\\SearchList` contains only valid search domains. Examples of invalid entries include IP addresses and domains that start with a period (such as `.local`).\n\n## CF\\_FAILED\\_TO\\_SET\\_MTLS\n\n### Symptoms\n\n* Unable to connect WARP\n\n### Cause\n\nThe device failed to present a [valid mTLS certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#check-for-mtls-certificate) during device enrollment.\n\n### Resolution\n\n1. Ensure that there are no admin restrictions on certificate installation.\n2. Re-install the client certificate on the device.\n\n## CF\\_HAPPY\\_EYEBALLS\\_MITM\\_FAILURE\n\n### Symptoms\n\n* Unable to connect WARP\n\n### Cause\n\nA router, firewall, antivirus software, or other third-party security product is blocking UDP on the WARP ports.\n\n### Resolution\n\n1. Configure the third-party security product to allow the [WARP ingress IPs and ports](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#warp-ingress-ip).\n2. Ensure that your Internet router is working properly and try rebooting the router.\n3. Check that the device is not revoked by going to **Team & Resources** > **Devices**.\n\n## CF\\_HOST\\_UNREACHABLE\\_CHECK\n\n### Symptoms\n\n* Unable to connect WARP\n* No Internet connectivity\n* User may be behind a captive portal\n\n### Cause\n\nThe [connectivity check](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#connectivity-checks) inside of the WARP tunnel has failed.\n\n### Resolution\n\n1. Check for the presence of third-party HTTP filtering software (AV, DLP, or firewall) that could be intercepting traffic to the [WARP IPs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall).\n2. In the third-party software, bypass inspection for all IP traffic going through WARP. To find out what traffic routes through the WARP tunnel, refer to [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/).\n\n## CF\\_INSUFFICIENT\\_DISK\n\n### Symptoms\n\n* Unable to connect WARP\n* OS warns that the disk is full\n\n### Cause\n\nThe hard drive is full or has incorrect permissions for WARP to write data.\n\n### Resolution\n\n1. Ensure that your device meets the [HD space requirements](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) for WARP.\n2. Check for disk permissions that may prevent WARP from using disk space.\n3. Empty trash or remove large files.\n\n## CF\\_INSUFFICIENT\\_FILE\\_DESCRIPTORS\n\n### Symptoms\n\n* Unable to connect WARP\n* Unable to open files on the device\n\n### Cause\n\nThe device does not have sufficient file descriptors to create network sockets or open files.\n\n### Resolution\n\nIncrease the file descriptor limit in your system settings.\n\n## CF\\_INSUFFICIENT\\_MEMORY\n\n### Symptoms\n\n* Unable to connect WARP\n* Device is very slow\n\n### Cause\n\nThe device does not have enough memory to run WARP.\n\n### Resolution\n\n1. Ensure that your device meets the [minimum memory requirements](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) for WARP.\n2. List all running processes to check memory usage.\n\n## CF\\_LOCAL\\_POLICY\\_FILE\\_FAILED\\_TO\\_PARSE\n\n### Symptoms\n\n* Unable to connect WARP\n\n### Cause\n\nThe WARP client was deployed on the device using an invalid MDM configuration file.\n\n### Resolution\n\n1. Review the [managed deployment guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/) for your operating system.\n2. Locate the MDM configuration file on your device.\n3. Ensure that the file is formatted correctly and only contains [accepted arguments](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/).\n\n## CF\\_NO\\_NETWORK\n\n### Symptoms\n\n* Unable to connect WARP\n* No Internet connectivity\n\n### Cause\n\nThe device is not connected to a Wi-Fi network or LAN that has connectivity to the Internet.\n\n### Resolution\n\n1. Launch the network settings panel on your device.\n2. Ensure that you are connected to a valid network.\n3. Check that your device is retrieving a valid IP address.\n4. If this does not resolve the error, try rebooting your device or running your system's network diagnostics tool.\n\n## CF\\_REGISTRATION\\_MISSING\n\n### Symptoms\n\n* Unable to connect WARP\n\n### Cause\n\nThe device is not authenticated to an [organization](https://developers.cloudflare.com/cloudflare-one/setup/#create-a-zero-trust-organization) because:\n\n* The device was revoked in Zero Trust.\n* The registration was corrupted or deleted for an unknown reason.\n\n### Resolution\n\n1. Launch the WARP client.\n2. Select the gear icon and go to **Preferences** > **Account**.\n3. Select **Re-Authenticate Session**.\n4. Complete the authentication steps required by your organization.\n5. If this does not resolve the error, select **Logout from Cloudflare Zero Trust** and then log back in. Logging out is only possible if [Allow device to leave organization](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-device-to-leave-organization) is enabled for your device.\n6. If the issue persists, contact your administrator for assistance.\n\n### CF\\_REGISTRATION\\_MISSING (Revoked)\n\n#### Cause\n\nYour device was unenrolled from your company's [organization](https://developers.cloudflare.com/cloudflare-one/setup/#create-a-zero-trust-organization) by an administrator on your account.\n\n#### Resolution\n\nContact your company or team administrator for assistance.\n\n## CF\\_TLS\\_INTERCEPTION\\_BLOCKING\\_DOH\n\n### Symptoms\n\n* DNS requests fail to resolve when WARP is turned on.\n\n### Cause\n\nA third-party application or service is intercepting DNS over HTTPS traffic from WARP.\n\n### Resolution\n\nConfigure the third-party application to exempt the [WARP DoH IPs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#doh-ip).\n\n## CF\\_TLS\\_INTERCEPTION\\_CHECK\n\n### Symptoms\n\n* Unable to connect WARP\n\n### Cause\n\nA third-party security product on the device or network is performing TLS decryption on HTTPS traffic. For more information, refer to the [Troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#a-third-party-security-product-is-interfering-with-gateway).\n\n### Resolution\n\nIn the third-party security product, disable HTTPS inspection and TLS decryption for the [WARP IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n\n## Admin directed disconnect\n\n### Symptoms\n\n* Unable to connect WARP\n\n### Cause\n\nThe account administrator has disconnected WARP for all devices registered to the account.\n\n### Resolution\n\nThe account administrator must turn the [Disconnect WARP on all devices](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#disconnect-warp-on-all-devices) feature off.\n\n</page>\n\n<page>\n---\ntitle: Common issues · Cloudflare One docs\ndescription: This section covers the most common issues you might encounter as\n  you deploy the WARP client in your organization, or turn on new features that\n  interact with the client. If you do not see your issue listed below, refer to\n  the troubleshooting FAQ or contact Cloudflare Support.\nlastUpdated: 2025-11-20T01:18:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/index.md\n---\n\nThis section covers the most common issues you might encounter as you deploy the WARP client in your organization, or turn on new features that interact with the client. If you do not see your issue listed below, refer to the [troubleshooting FAQ](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/) or [contact Cloudflare Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n\nTroubleshoot WARP\n\nFor step-by-step guidance on diagnosing and resolving WARP client issues, refer to the [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/). The guide covers:\n\n* How to collect diagnostic logs via the Cloudflare dashboard or CLI\n* How to review key configuration files\n* Common misconfigurations and their fixes\n* Best practices for filing support tickets\n\n## Unable to connect WARP\n\nIf WARP is stuck in the `Disconnected` state or frequently changes between `Connected` and `Disconnected`, this indicates that the client cannot establish a connection to Cloudflare's global network.\n\n![Example of WARP client UI when unable to turn on WARP](https://developers.cloudflare.com/_astro/warp-stuck-on-disconnected.B4_MhRve_260ELD.webp)\n\nIn your [WARP debug logs](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/warp-logs/), `daemon.log` will typically show one or more of the following errors:\n\n* Happy Eyeball checks failing:",
      "language": "unknown"
    },
    {
      "code": "* Many other checks timing out:",
      "language": "unknown"
    },
    {
      "code": "Here are the most common reasons why this issue occurs:\n\n### A third-party service is blocking WARP\n\nA third-party service (such as a hardware or software firewall, router, MDM/group policy configuration, or other networking interface) may have a security policy in place which blocks WARP from connecting.\n\n#### Solution\n\nConfigure the third-party service to exempt the [IP addresses required by WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n\n### A third-party VPN is interfering with WARP\n\nThe most common places we see interference with WARP from VPNs are:\n\n* **Control of traffic routing:** In `daemon.log`, you will see a large number of routing table changes. For example,",
      "language": "unknown"
    },
    {
      "code": "This indicates that a third-party VPN is fighting WARP for control over the routing table.\n\n* **Control of DNS:** In `daemon.log`, you will see a large number of DNS changes followed by this warning:",
      "language": "unknown"
    },
    {
      "code": "The daemon may also note that some other process has already bound to the UDP and TCP sockets:",
      "language": "unknown"
    },
    {
      "code": "To confirm that the VPN is the source of the issue, temporarily uninstall (not disable or disconnect) the VPN.\n\n#### Solution\n\n1. Disable all DNS enforcement on the VPN. WARP must be the last client to touch the primary and secondary DNS server on the default interface.\n2. In [Cloudflare One](https://one.dash.cloudflare.com/), create a [Split Tunnel rule](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) to exclude the VPN server you are connecting to (for example, `vpnserver.3rdpartyvpn.example.com`).\n3. Configure your VPN to only include routes to your internal resources. Make sure that the VPN routes do not overlap with the routes [included in the WARP tunnel](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/).\n\nFor more information, refer to our [guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/vpn/) for running VPNs alongside the WARP client.\n\n### Your ISP or country is blocking WARP\n\nSome countries explicitly block the use of VPN or VPN-like software that intentionally encrypts traffic. These blocks are often inconsistently enforced and you may sometimes see successful connections.\n\nIf you suspect your country may be blocking WARP traffic, contact your ISP to verify.\n\n### (Mac/Linux) The device's `/etc/resolv.conf` file has an invalid character\n\nWARP cannot parse `resolv.conf` files which contain an invalid hostname. In `daemon.log`, you will see an `unrecognized char` warning:",
      "language": "unknown"
    },
    {
      "code": "#### Solution\n\n1. Open the `/etc/resolv.conf` file on your device.\n2. In the `search` directives, check for invalid URL characters such as `!@#$%^&*()<>?`.\n3. Remove the invalid lines and rely on WARP and Gateway for DNS services.\n\n## Turned on WARP and can no longer browse the Internet\n\nIf WARP shows as `Connected` but you cannot reach any websites or internal resources, this is likely due to one of the following configuration issues.\n\n### A Gateway firewall policy is blocking traffic\n\nA misconfigured Gateway firewall policy can result in traffic to some or all sites being restricted.\n\n#### Solution\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n2. Disable all DNS, Network, and HTTP policies and see if the issue persists. It may take up to two minutes for the change to take effect. Note that all policy enforcement happens on the Cloudflare global network, not on your local device.\n3. Slowly re-enable your policies. Once you have narrowed down the issue, modify the policies or their [order of enforcement](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/).\n\n### The device does not have a root certificate installed\n\nInstalling and trusting a [root CA](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/) is a necessary step to enable advanced security features such as Browser Isolation, [TLS decryption](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/), AV scanning, and device posture.\n\nIf the root CA is not installed on the device, you will see untrusted certificate warnings on every website. Example warnings include `Certificate not trusted`, `Not trusted identity` or `SSL Error`.\n\n#### Solution\n\n[Install a Cloudflare certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/manual-deployment/) on all of your devices, or [upload your own certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/custom-certificate/) to Cloudflare.\n\nNote\n\nMore and more applications (including browsers) are relying on their own certificate stores. In addition to ensuring a root certificate is trusted at the device level, you may also need to [add the certificate to individual applications](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/manual-deployment/#add-the-certificate-to-applications). For example, to use Firefox on Linux, you must install the certificate on both the system and on Firefox.\n\n### A third-party security product is interfering with Gateway\n\nWARP does not allow third-party DLP or proxy services to perform TLS decryption on traffic sent to Gateway.\n\nTo diagnose the issue, go to `https://zero-trust-client.cloudflareclient.com/v0/client_config` and verify the certificate the HTTPS traffic is signed with. If the certificate is issued by your organization or a third-party service, the third-party service is performing TLS decryption on WARP traffic and re-signing with a certificate that we do not trust.\n\n#### Solution\n\nIn the third-party security product, disable HTTPS inspection and TLS decryption for the [WARP IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n\n### Docker container is failing DNS resolution\n\nIf you are using WARP and running a CI/CD pipeline inside a Docker container on Microsoft hardware to provide GitHub Actions with an egress IP, your container's `/etc/resolv.conf` file might be injecting a [custom nameserver with the IP address `168.63.129.16`](https://learn.microsoft.com/en-us/azure/virtual-network/what-is-ip-address-168-63-129-16) (specific to Azure infrastructure.) The `168.63.129.16` IP address is only accessible to Azure VMs and causes the container's traffic to fail when routed through the Cloudflare WARP tunnel.\n\n#### Solution\n\nTo fix this issue, you must exclude the Azure-specific nameserver IP (`168.63.129.16`) from being routed through WARP tunnel. Refer to [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) and follow the instructions to exclude the Azure-specific IP.\n\n## Cannot connect to a specific app or website\n\nBelow are the most common reasons why turning on WARP blocks a specific application from loading.\n\n### TLS Decryption is enabled and the app or site does certificate pinning\n\nSome applications do not support SSL inspection or are otherwise [incompatible with TLS decryption](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#inspection-limitations). Gateway provides a [list of applications known to perform certificate pinning](https://developers.cloudflare.com/cloudflare-one/traffic-policies/application-app-types/#do-not-inspect-applications).\n\n#### Solution (if the app has a private certificate store)\n\nApplications such as Firefox, Docker, Python, and npm rely on their own certificate store and the Cloudflare root certificate must be trusted in each.\n\nRefer to [our instructions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/manual-deployment/#add-the-certificate-to-applications) for adding a root certificate to common applications. For applications not on our list, try searching the Internet for `<app-name> proxy support` or `<app-name> proxy certificate`.\n\n#### Solution (last resort)\n\nIf you cannot install the certificate on the application, create a [Do Not Inspect policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#do-not-inspect) to exclude the application from Gateway inspection.\n\n### A Gateway firewall policy is blocking the app or site\n\nYou may have a Gateway DNS, Network, or HTTP in place that accidentally blocks a port, IP, or domain that the app or site relies on.\n\n#### Solution\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n2. Disable all DNS, Network, and HTTP policies and see if the issue persists. It may take up to two minutes for the change to take effect. Note that all policy enforcement happens on the Cloudflare global network, not on your local device.\n3. Slowly re-enable your policies. Once you have narrowed down the issue, modify the policies or their [order of enforcement](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/).\n\n### Split Tunnel settings are misconfigured for the app or site\n\nSome applications require traffic to flow either all inside or all outside of the WARP tunnel. For instance, in order to use AirDrop or communicate with a local printer, traffic must be outside the tunnel. For applications like Microsoft Teams to function properly, all Microsoft Teams traffic must be either fully inside the tunnel or fully outside the tunnel.\n\n#### Solution\n\n1. Determine the IP addresses and/or domains required for your application to function. Common Internet search terms include `<app-name> split tunnel list`, `<app-name> allow list`, or `<app-name> firewall ips`.\n2. In [Cloudflare One](https://one.dash.cloudflare.com/), go to your [Split Tunnel settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/).\n3. Depending on the application, either include or exclude all of the necessary IPs and/or domains. For Microsoft applications, we provide a [one-click action](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#directly-route-microsoft-365-traffic) to exclude all Microsoft 365 IPs.\n\n## Troubleshooting\n\n* [Troubleshooting](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/) - Browse other Cloudflare One-related troubleshooting errors and solutions.\n\n</page>\n\n<page>\n---\ntitle: Connectivity status · Cloudflare One docs\ndescription: The WARP client GUI displays the following status messages when\n  transitioning from a Disconnected to Connected state. These messages indicate\n  the connectivity stage of the WARP daemon as it establishes a connection from\n  the device to Cloudflare. The WARP mode determines which messages are\n  displayed during the connection process. If WARP encounters an error while\n  connecting, the status message will change to an error code.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/connectivity-status/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/connectivity-status/index.md\n---\n\nThe WARP client GUI displays the following status messages when transitioning from a **Disconnected** to **Connected** state. These messages indicate the connectivity stage of the WARP daemon as it establishes a connection from the device to Cloudflare. The [WARP mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/) determines which messages are displayed during the connection process. If WARP encounters an error while connecting, the status message will change to an [error code](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/client-errors/).\n\nTo print status messages to the console, run the `warp-cli -l status` command before turning on the WARP switch.\n\n| Status message | Description |\n| - | - |\n| Verifying connection settings | Initializes connection components based on your [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/). |\n| Validating network | Validates Ethernet and/or Wi-Fi network connectivity. |\n| Initializing IP connection | Checks for IPv4 and IPv6 connectivity to Cloudflare using the [Happy Eyeballs algorithm](https://datatracker.ietf.org/doc/html/rfc6555). |\n| Establishing a connection | Connects to the endpoint discovered by Happy Eyeballs. |\n| Building a Tunnel | Creates a [virtual network interface](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#virtual-interface) on the operating system for the WARP tunnel. |\n| Configuring the firewall | Configures the system firewall to allow WARP tunnel traffic. |\n| Setting up your routing table | Updates the [system routing table](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#routing-table) based on your [Split Tunnel rules](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/). |\n| Configuring your firewall rules | Configures the [system firewall](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#system-firewall) based on your Split Tunnel rules. |\n| Checking connectivity to DNS | Checks connectivity to the DNS endpoint (`<account-id>.cloudflare-gateway.com`). |\n| Setting local endpoint communication | Configures local DNS proxy sockets. |\n| Configuring local DNS proxy | Creates a [local DNS proxy](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#dns-traffic) for DNS resolution. |\n| Applying DNS settings | Sets the local DNS proxy as the default DNS server on the device. |\n| Configuring forward proxy | (Only in [Proxy mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#proxy-mode)) Configures the SOCKS proxy. |\n| Confirming Tunnel connection | Checks connectivity to [destinations](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/#connectivity-checks) inside and outside of the WARP tunnel. |\n| Validating DNS configuration | Verifies that DNS requests are answered by WARP's local DNS proxy. |\n| Verifying SOCKS proxy configuration | (Only in [Proxy mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#proxy-mode)) Verifies the SOCKS proxy configuration. |\n| Ensuring MTLS identity | (Only in [Device Information Only mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/device-information-only/)) Installs a client certificate for mTLS authentication. |\n\n</page>\n\n<page>\n---\ntitle: Known limitations - WARP · Cloudflare One docs\ndescription: Below, you will find information on devices, software, and\n  configurations that are incompatible with Cloudflare WARP.\nlastUpdated: 2025-12-19T19:09:35.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/known-limitations/\n  md: https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/known-limitations/index.md\n---\n\nBelow, you will find information on devices, software, and configurations that are incompatible with Cloudflare WARP.\n\nTroubleshoot WARP\n\nFor step-by-step guidance on diagnosing and resolving WARP client issues, refer to the [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/). The guide covers:\n\n* How to collect diagnostic logs via the Cloudflare dashboard or CLI\n* How to review key configuration files\n* Common misconfigurations and their fixes\n* Best practices for filing support tickets\n\n## Windows Server\n\nThe WARP client does not run on Windows Server. Refer to the [downloads page](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) for a list of supported operating systems.\n\n## WARP disconnected on Windows ARM\n\nOn Windows devices with ARM-based processors, the WARP client can sometimes get [stuck in a disconnected state](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#unable-to-connect-warp) when you toggle on WARP (such as when installing WARP for the first time).\n\nTo work around this issue, you can temporarily remove the WARP network adapter:\n\n1. Open the WARP client GUI and toggle WARP off.\n2. In Windows, open Device Manager.\n3. Select **View** > **Show hidden devices**.\n4. Under **Network adapters**, find **Cloudflare WARP Interface Tunnel** and select **Uninstall device**.\n5. Select **Attempt to remove the drive for this device**, then select **Uninstall**.\n6. Toggle WARP back on.\n\nWARP will now reinstall its network adapter, and the WARP client GUI should now show **Connected**.\n\n## Managed network on legacy Windows Server\n\n[Managed network detection](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/) will not work when the TLS certificate is served from IIS 8.5 on Windows Server 2012 R2. To work around the limitation, move the certificate to a different host.\n\n## Split Tunnels for Microsoft 365 traffic\n\nMicrosoft has recently made changes to the IP addresses used by Microsoft 365 applications (such as Microsoft Teams). Customers using the [Directly route Microsoft 365 traffic](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#directly-route-microsoft-365-traffic) feature will need to manually add the following IPs to their [Split Tunnels Exclude list](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route):\n\n* `24.24.24.24/32`\n* `52.120.0.0/14`\n\n## nslookup on Windows in DoH mode\n\nOn Windows devices in [Gateway with DoH mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/#gateway-with-doh), `nslookup` by default sends DNS requests to the [WARP local DNS proxy](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#dns-traffic) over IPv6. However, because WARP uses an IPv4-mapped IPv6 address (instead of a real IPv6 address), `nslookup` will not recognize this address type and the query will fail:",
      "language": "unknown"
    },
    {
      "code": "To work around the issue, specify the IPv4 address of the [WARP local DNS proxy](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#dns-traffic) in your query:",
      "language": "unknown"
    },
    {
      "code": "Alternatively, use PowerShell:",
      "language": "unknown"
    },
    {
      "code": "## 4G/5G embedded modules\n\nBecause of how the WARP client instantiates the local DNS Proxy, it is incompatible with 4G/5G cellular adapters which have IPv6 enabled. To run WARP on these devices, you will need to disable IPv6 on the system.\n\nNote\n\nThis limitation does not apply to mobile phones, only desktop machines with cellular connectivity.\n\n## Comcast DNS servers\n\nComcast DNS traffic (to the IPs below) cannot be proxied through WARP. This is because Comcast rejects DNS traffic that is not sent directly from the user's device.\n\n* IPv4 Addresses: `75.75.75.75` and `75.75.76.76`\n* IPv6 Addresses: `2001:558:feed::1` and `2001:558:feed::2`\n\nTo work around the issue, you can either:\n\n* Create a [Split Tunnel rule](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) that excludes the above IPs from WARP.\n* Configure your device or router to use a public DNS server such as [`1.1.1.1`](https://1.1.1.1/dns/).\n\n## Cox DNS servers\n\nSimilar to the [Comcast DNS servers](#comcast-dns-servers) limitation listed above, Cox DNS servers will not respond to traffic from the WARP egress IPs (or any IP that is not a Cox IP). The workaround is nearly identical, except that Cox DNS servers may be specific to the individual end user. You can either:\n\n* Create a [Split Tunnel rule](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) that excludes all Cox DNS servers. For business customers, refer to the [COX documentation](https://www.cox.com/business/support/cox-business-dns-and-mail-exchange-hosting-services.html) for the DNS server IPs. For residential customers, check your local DNS servers. The residential DNS servers typically fall under `68.105.28.0/24` and `68.105.29.0/24`.\n* Configure your device or router to use a public DNS server such as [`1.1.1.1`](https://1.1.1.1/dns/).\n\n## HP Velocity\n\nThe HP Velocity driver has a bug which will cause a blue screen error on devices running WARP. HP recommends [uninstalling this driver](https://support.hp.com/gb-en/document/c06266198).\n\n## Dell firmware version 1.35.0\n\nFor Dell devices running firmware version `1.35.0` (released 2025-07-07), regardless of operating system, Cloudflare has confirmed a bug that prevents the WARP service from starting. Cloudflare recommends users experiencing these issues upgrade their Dell device firmware to version `1.36.0` or later.\n\n## Cisco Meraki\n\nCisco Meraki devices have a bug where WARP traffic can sometimes be identified as [`Statistical-P2P`](https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/qos_nbar/prot_lib/config_library/pp4600/nbar-prot-pack4600/s.html#wp1488575851) and de-prioritised or dropped entirely. To resolve the issue, disable `Statistical-P2P` on the Cisco Meraki device.\n\n## Windows Teredo\n\nThe [Windows Teredo](https://learn.microsoft.com/en-us/windows/win32/teredo/about-teredo) interface conflicts with the WARP client. Since Teredo and WARP will fight for control over IPv6 traffic routing, you must disable Teredo on your Windows device. This allows the WARP client to provide IPv6 connectivity on the device.\n\n## Docker on Linux with bridged networking\n\n[Docker](https://www.docker.com/products/container-runtime/) on Linux does not perform the underlying network tunnel MTU changes required by WARP. This can cause connectivity issues inside of a Docker container when WARP is enabled on the host machine. For example, `curl -v https://cloudflare.com > /dev/null` will fail if run from a Docker container that is using the default bridge network driver.\n\nTo work around this issue, users of WARP with Docker on Linux can manually reconfigure the MTU on Docker's network interface. You can either modify `/etc/docker/daemon.json` to include:",
      "language": "unknown"
    },
    {
      "code": "or create a Docker network with a working MTU value:",
      "language": "unknown"
    },
    {
      "code": "The MTU value should be set to the MTU of your host's default interface minus 80 bytes for the WARP protocol overhead. Most MTUs are 1500, so 1420 should work for most users.\n\n## Access WARP DNS from Docker\n\nWARP runs a local DNS proxy on `127.0.2.2` and `127.0.2.3`. You may need access to these addresses from within Docker containers to resolve internal-only or fallback domains. The default Docker [bridge network](https://docs.docker.com/engine/network/drivers/bridge/) copies the DNS settings from the host, but filters out loopback DNS addresses like `127.0.2.2` and `127.0.2.3`, so containers cannot use them.\n\nTo enable WARP DNS resolution with containers:\n\n* Use a [custom Docker network](https://docs.docker.com/engine/network/#user-defined-networks) (recommended): Allows the Docker container to still use the bridge network driver that maintains network isolation from the host. If you are creating your own bridge network, you should also [adjust the MTU accordingly](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/known-limitations/#docker-on-linux-with-bridged-networking).\n* Use [host networking](https://docs.docker.com/engine/network/drivers/host/) (not recommended): Removes the security benefits of network isolation and may lead to port conflicts.\n\nThe following example uses a special host (`connectivity-check.warp-svc`) that is only resolvable by the local DNS proxy to show the supported Docker networking modes.",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Automatic Return Routing (beta)",
      "id": "automatic-return-routing-(beta)"
    },
    {
      "level": "h3",
      "text": "How ARR works",
      "id": "how-arr-works"
    },
    {
      "level": "h3",
      "text": "Traffic and destinations affected",
      "id": "traffic-and-destinations-affected"
    },
    {
      "level": "h2",
      "text": "Unified routing mode",
      "id": "unified-routing-mode"
    },
    {
      "level": "h2",
      "text": "Scoping routes to specific regions",
      "id": "scoping-routes-to-specific-regions"
    },
    {
      "level": "h3",
      "text": "Region codes and associated regions",
      "id": "region-codes-and-associated-regions"
    },
    {
      "level": "h2",
      "text": "Equal-cost multi-path routing",
      "id": "equal-cost-multi-path-routing"
    },
    {
      "level": "h3",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "ECMP and bandwidth utilization",
      "id": "ecmp-and-bandwidth-utilization"
    },
    {
      "level": "h2",
      "text": "BGP information",
      "id": "bgp-information"
    },
    {
      "level": "h3",
      "text": "BGP peering with the Magic routing table",
      "id": "bgp-peering-with-the-magic-routing-table"
    },
    {
      "level": "h3",
      "text": "BGP route distribution and convergence",
      "id": "bgp-route-distribution-and-convergence"
    },
    {
      "level": "h3",
      "text": "BGP timers and settings",
      "id": "bgp-timers-and-settings"
    },
    {
      "level": "h3",
      "text": "BGP limitations",
      "id": "bgp-limitations"
    },
    {
      "level": "h3",
      "text": "Tunnel health checks",
      "id": "tunnel-health-checks"
    },
    {
      "level": "h2",
      "text": "Application-aware policies",
      "id": "application-aware-policies"
    },
    {
      "level": "h2",
      "text": "HTTPS filtering",
      "id": "https-filtering"
    },
    {
      "level": "h2",
      "text": "DNS filtering",
      "id": "dns-filtering"
    },
    {
      "level": "h2",
      "text": "Outbound Internet traffic",
      "id": "outbound-internet-traffic"
    },
    {
      "level": "h2",
      "text": "Private traffic",
      "id": "private-traffic"
    },
    {
      "level": "h2",
      "text": "Test Gateway integration",
      "id": "test-gateway-integration"
    },
    {
      "level": "h2",
      "text": "Route evaluation and precedence",
      "id": "route-evaluation-and-precedence"
    },
    {
      "level": "h2",
      "text": "Test `cloudflared` tunnel integration",
      "id": "test-`cloudflared`-tunnel-integration"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "IP ranges",
      "id": "ip-ranges"
    },
    {
      "level": "h2",
      "text": "Set up WARP with Magic WAN",
      "id": "set-up-warp-with-magic-wan"
    },
    {
      "level": "h3",
      "text": "1. Route packets back to WARP devices",
      "id": "1.-route-packets-back-to-warp-devices"
    },
    {
      "level": "h3",
      "text": "2. Configure Split Tunnels",
      "id": "2.-configure-split-tunnels"
    },
    {
      "level": "h3",
      "text": "3. Install the WARP client on your device",
      "id": "3.-install-the-warp-client-on-your-device"
    },
    {
      "level": "h2",
      "text": "Double encapsulation",
      "id": "double-encapsulation"
    },
    {
      "level": "h3",
      "text": "WARP and Magic WAN Connector",
      "id": "warp-and-magic-wan-connector"
    },
    {
      "level": "h2",
      "text": "Test WARP integration",
      "id": "test-warp-integration"
    },
    {
      "level": "h2",
      "text": "Create a new profile",
      "id": "create-a-new-profile"
    },
    {
      "level": "h2",
      "text": "Edit profile settings",
      "id": "edit-profile-settings"
    },
    {
      "level": "h2",
      "text": "Verify device profile",
      "id": "verify-device-profile"
    },
    {
      "level": "h3",
      "text": "Via the dashboard",
      "id": "via-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Via the CLI",
      "id": "via-the-cli"
    },
    {
      "level": "h2",
      "text": "Selectors",
      "id": "selectors"
    },
    {
      "level": "h3",
      "text": "User email",
      "id": "user-email"
    },
    {
      "level": "h3",
      "text": "User group emails",
      "id": "user-group-emails"
    },
    {
      "level": "h3",
      "text": "User group IDs",
      "id": "user-group-ids"
    },
    {
      "level": "h3",
      "text": "User group names",
      "id": "user-group-names"
    },
    {
      "level": "h3",
      "text": "Operating system",
      "id": "operating-system"
    },
    {
      "level": "h3",
      "text": "Operating system version",
      "id": "operating-system-version"
    },
    {
      "level": "h3",
      "text": "Managed network",
      "id": "managed-network"
    },
    {
      "level": "h3",
      "text": "SAML attributes",
      "id": "saml-attributes"
    },
    {
      "level": "h3",
      "text": "Service token",
      "id": "service-token"
    },
    {
      "level": "h2",
      "text": "Comparison operators",
      "id": "comparison-operators"
    },
    {
      "level": "h2",
      "text": "Logical operators",
      "id": "logical-operators"
    },
    {
      "level": "h2",
      "text": "Order of precedence",
      "id": "order-of-precedence"
    },
    {
      "level": "h2",
      "text": "DNS query location matching",
      "id": "dns-query-location-matching"
    },
    {
      "level": "h2",
      "text": "IPv4/IPv6 address",
      "id": "ipv4/ipv6-address"
    },
    {
      "level": "h3",
      "text": "Source IP",
      "id": "source-ip"
    },
    {
      "level": "h3",
      "text": "DNS resolver IP",
      "id": "dns-resolver-ip"
    },
    {
      "level": "h2",
      "text": "DNS over TLS (DoT)",
      "id": "dns-over-tls-(dot)"
    },
    {
      "level": "h2",
      "text": "DNS over HTTPS (DoH)",
      "id": "dns-over-https-(doh)"
    },
    {
      "level": "h3",
      "text": "DoH subdomain",
      "id": "doh-subdomain"
    },
    {
      "level": "h2",
      "text": "Send specific queries to Gateway",
      "id": "send-specific-queries-to-gateway"
    },
    {
      "level": "h2",
      "text": "Requirements",
      "id": "requirements"
    },
    {
      "level": "h2",
      "text": "WARP client managed network detection",
      "id": "warp-client-managed-network-detection"
    },
    {
      "level": "h2",
      "text": "1. Choose a TLS endpoint",
      "id": "1.-choose-a-tls-endpoint"
    },
    {
      "level": "h3",
      "text": "Create a new TLS endpoint",
      "id": "create-a-new-tls-endpoint"
    },
    {
      "level": "h3",
      "text": "Supported cipher suites",
      "id": "supported-cipher-suites"
    },
    {
      "level": "h2",
      "text": "2. Extract the SHA-256 fingerprint",
      "id": "2.-extract-the-sha-256-fingerprint"
    },
    {
      "level": "h2",
      "text": "3. Add managed network to Cloudflare One",
      "id": "3.-add-managed-network-to-cloudflare-one"
    },
    {
      "level": "h2",
      "text": "4. Configure device profile",
      "id": "4.-configure-device-profile"
    },
    {
      "level": "h2",
      "text": "5. Verify managed network",
      "id": "5.-verify-managed-network"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "How the WARP client handles DNS requests",
      "id": "how-the-warp-client-handles-dns-requests"
    },
    {
      "level": "h2",
      "text": "Add a DNS suffix",
      "id": "add-a-dns-suffix"
    },
    {
      "level": "h3",
      "text": "macOS",
      "id": "macos"
    },
    {
      "level": "h3",
      "text": "Windows",
      "id": "windows"
    },
    {
      "level": "h2",
      "text": "Gateway with WARP (default)",
      "id": "gateway-with-warp-(default)"
    },
    {
      "level": "h2",
      "text": "Gateway with DoH",
      "id": "gateway-with-doh"
    },
    {
      "level": "h2",
      "text": "Secure Web Gateway without DNS filtering",
      "id": "secure-web-gateway-without-dns-filtering"
    },
    {
      "level": "h2",
      "text": "Proxy mode",
      "id": "proxy-mode"
    },
    {
      "level": "h3",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Device Information Only",
      "id": "device-information-only"
    },
    {
      "level": "h2",
      "text": "WARP modes comparison",
      "id": "warp-modes-comparison"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Configure WARP sessions in Gateway",
      "id": "configure-warp-sessions-in-gateway"
    },
    {
      "level": "h2",
      "text": "Configure WARP sessions in Access Beta",
      "id": "configure-warp-sessions-in-access-beta"
    },
    {
      "level": "h2",
      "text": "Force user interaction with IdP",
      "id": "force-user-interaction-with-idp"
    },
    {
      "level": "h3",
      "text": "Supported IdPs",
      "id": "supported-idps"
    },
    {
      "level": "h2",
      "text": "Manually reauthenticate",
      "id": "manually-reauthenticate"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Global settings",
      "id": "global-settings"
    },
    {
      "level": "h3",
      "text": "Allow admin override codes",
      "id": "allow-admin-override-codes"
    },
    {
      "level": "h3",
      "text": "Install CA to system certificate store",
      "id": "install-ca-to-system-certificate-store"
    },
    {
      "level": "h3",
      "text": "Assign a unique IP address to each device",
      "id": "assign-a-unique-ip-address-to-each-device"
    },
    {
      "level": "h3",
      "text": "Disconnect WARP on all devices",
      "id": "disconnect-warp-on-all-devices"
    },
    {
      "level": "h2",
      "text": "Device settings",
      "id": "device-settings"
    },
    {
      "level": "h3",
      "text": "Captive portal detection",
      "id": "captive-portal-detection"
    },
    {
      "level": "h3",
      "text": "Mode switch",
      "id": "mode-switch"
    },
    {
      "level": "h3",
      "text": "Device tunnel protocol",
      "id": "device-tunnel-protocol"
    },
    {
      "level": "h3",
      "text": "Lock WARP switch",
      "id": "lock-warp-switch"
    },
    {
      "level": "h3",
      "text": "Allow device to leave organization",
      "id": "allow-device-to-leave-organization"
    },
    {
      "level": "h3",
      "text": "Allow updates",
      "id": "allow-updates"
    },
    {
      "level": "h3",
      "text": "Auto connect",
      "id": "auto-connect"
    },
    {
      "level": "h3",
      "text": "Support URL",
      "id": "support-url"
    },
    {
      "level": "h3",
      "text": "Service mode",
      "id": "service-mode"
    },
    {
      "level": "h3",
      "text": "Local Domain Fallback",
      "id": "local-domain-fallback"
    },
    {
      "level": "h3",
      "text": "Split Tunnels",
      "id": "split-tunnels"
    },
    {
      "level": "h3",
      "text": "Directly route Microsoft 365 traffic",
      "id": "directly-route-microsoft-365-traffic"
    },
    {
      "level": "h3",
      "text": "Allow users to enable local network exclusion",
      "id": "allow-users-to-enable-local-network-exclusion"
    },
    {
      "level": "h3",
      "text": "WARP interface IP DNS registration",
      "id": "warp-interface-ip-dns-registration"
    },
    {
      "level": "h3",
      "text": "SCCM VPN boundary support",
      "id": "sccm-vpn-boundary-support"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Set device enrollment permissions",
      "id": "set-device-enrollment-permissions"
    },
    {
      "level": "h2",
      "text": "Example policies",
      "id": "example-policies"
    },
    {
      "level": "h3",
      "text": "Check for service token",
      "id": "check-for-service-token"
    },
    {
      "level": "h3",
      "text": "Check for mTLS certificate",
      "id": "check-for-mtls-certificate"
    },
    {
      "level": "h2",
      "text": "Client orchestration API",
      "id": "client-orchestration-api"
    },
    {
      "level": "h2",
      "text": "DoH IP",
      "id": "doh-ip"
    },
    {
      "level": "h3",
      "text": "Android devices",
      "id": "android-devices"
    },
    {
      "level": "h2",
      "text": "Client authentication endpoint",
      "id": "client-authentication-endpoint"
    },
    {
      "level": "h2",
      "text": "WARP ingress IP",
      "id": "warp-ingress-ip"
    },
    {
      "level": "h3",
      "text": "WireGuard",
      "id": "wireguard"
    },
    {
      "level": "h3",
      "text": "MASQUE",
      "id": "masque"
    },
    {
      "level": "h2",
      "text": "Captive portal",
      "id": "captive-portal"
    },
    {
      "level": "h2",
      "text": "Connectivity checks",
      "id": "connectivity-checks"
    },
    {
      "level": "h3",
      "text": "Outside tunnel",
      "id": "outside-tunnel"
    },
    {
      "level": "h3",
      "text": "Inside tunnel",
      "id": "inside-tunnel"
    },
    {
      "level": "h2",
      "text": "NEL reporting (optional)",
      "id": "nel-reporting-(optional)"
    },
    {
      "level": "h2",
      "text": "Latency statistics (optional)",
      "id": "latency-statistics-(optional)"
    },
    {
      "level": "h2",
      "text": "Time synchronization (optional)",
      "id": "time-synchronization-(optional)"
    },
    {
      "level": "h2",
      "text": "Scope of firewall rules",
      "id": "scope-of-firewall-rules"
    },
    {
      "level": "h3",
      "text": "Required scopes",
      "id": "required-scopes"
    },
    {
      "level": "h3",
      "text": "Optional scopes",
      "id": "optional-scopes"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Windows, macOS, and Linux",
      "id": "windows,-macos,-and-linux"
    },
    {
      "level": "h3",
      "text": "Enroll using the GUI",
      "id": "enroll-using-the-gui"
    },
    {
      "level": "h3",
      "text": "Enroll using the CLI",
      "id": "enroll-using-the-cli"
    },
    {
      "level": "h2",
      "text": "iOS, Android, and ChromeOS",
      "id": "ios,-android,-and-chromeos"
    },
    {
      "level": "h3",
      "text": "Enroll manually",
      "id": "enroll-manually"
    },
    {
      "level": "h3",
      "text": "Enroll using a URL",
      "id": "enroll-using-a-url"
    },
    {
      "level": "h2",
      "text": "Virtual machines",
      "id": "virtual-machines"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Windows",
      "id": "windows"
    },
    {
      "level": "h3",
      "text": "Install WARP",
      "id": "install-warp"
    },
    {
      "level": "h3",
      "text": "Uninstall WARP",
      "id": "uninstall-warp"
    },
    {
      "level": "h3",
      "text": "Update MDM parameters",
      "id": "update-mdm-parameters"
    },
    {
      "level": "h3",
      "text": "Authenticate in embedded browser",
      "id": "authenticate-in-embedded-browser"
    },
    {
      "level": "h2",
      "text": "macOS",
      "id": "macos"
    },
    {
      "level": "h3",
      "text": "Prepare file for MDM deployment",
      "id": "prepare-file-for-mdm-deployment"
    },
    {
      "level": "h3",
      "text": "Place an unmanaged `mdm.xml` file",
      "id": "place-an-unmanaged-`mdm.xml`-file"
    },
    {
      "level": "h2",
      "text": "Linux",
      "id": "linux"
    },
    {
      "level": "h2",
      "text": "iOS",
      "id": "ios"
    },
    {
      "level": "h2",
      "text": "Android / ChromeOS",
      "id": "android-/-chromeos"
    },
    {
      "level": "h2",
      "text": "Gateway with WARP",
      "id": "gateway-with-warp"
    },
    {
      "level": "h3",
      "text": "1. Configure the VPN",
      "id": "1.-configure-the-vpn"
    },
    {
      "level": "h3",
      "text": "2. Configure WARP",
      "id": "2.-configure-warp"
    },
    {
      "level": "h2",
      "text": "Secure Web Gateway without DNS filtering",
      "id": "secure-web-gateway-without-dns-filtering"
    },
    {
      "level": "h3",
      "text": "1. Configure the VPN",
      "id": "1.-configure-the-vpn"
    },
    {
      "level": "h3",
      "text": "2. Configure WARP",
      "id": "2.-configure-warp"
    },
    {
      "level": "h2",
      "text": "Test the configuration",
      "id": "test-the-configuration"
    },
    {
      "level": "h2",
      "text": "Windows",
      "id": "windows"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "macOS",
      "id": "macos"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "macOS, Windows, and Linux",
      "id": "macos,-windows,-and-linux"
    },
    {
      "level": "h2",
      "text": "iOS and Android",
      "id": "ios-and-android"
    },
    {
      "level": "h3",
      "text": "Migrate manual deployments",
      "id": "migrate-manual-deployments"
    },
    {
      "level": "h3",
      "text": "Migrate managed deployments",
      "id": "migrate-managed-deployments"
    },
    {
      "level": "h3",
      "text": "Verify migration",
      "id": "verify-migration"
    },
    {
      "level": "h2",
      "text": "Windows",
      "id": "windows"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "macOS",
      "id": "macos"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Linux",
      "id": "linux"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "WARP client lifecycle",
      "id": "warp-client-lifecycle"
    },
    {
      "level": "h3",
      "text": "Desktop platforms",
      "id": "desktop-platforms"
    },
    {
      "level": "h3",
      "text": "Mobile platforms",
      "id": "mobile-platforms"
    },
    {
      "level": "h3",
      "text": "Feature deprecation policy",
      "id": "feature-deprecation-policy"
    },
    {
      "level": "h3",
      "text": "Release schedule",
      "id": "release-schedule"
    },
    {
      "level": "h2",
      "text": "Supported operating systems",
      "id": "supported-operating-systems"
    },
    {
      "level": "h3",
      "text": "Windows",
      "id": "windows"
    },
    {
      "level": "h3",
      "text": "macOS",
      "id": "macos"
    },
    {
      "level": "h3",
      "text": "Debian",
      "id": "debian"
    },
    {
      "level": "h3",
      "text": "Ubuntu",
      "id": "ubuntu"
    },
    {
      "level": "h3",
      "text": "Red Hat Enterprise Linux (RHEL)",
      "id": "red-hat-enterprise-linux-(rhel)"
    },
    {
      "level": "h3",
      "text": "iOS and iPadOS",
      "id": "ios-and-ipados"
    },
    {
      "level": "h3",
      "text": "Android",
      "id": "android"
    },
    {
      "level": "h3",
      "text": "ChromeOS",
      "id": "chromeos"
    },
    {
      "level": "h2",
      "text": "When to update WARP",
      "id": "when-to-update-warp"
    },
    {
      "level": "h2",
      "text": "How to update WARP",
      "id": "how-to-update-warp"
    },
    {
      "level": "h3",
      "text": "Windows, macOS, and Linux",
      "id": "windows,-macos,-and-linux"
    },
    {
      "level": "h3",
      "text": "iOS, Android, and ChromeOS",
      "id": "ios,-android,-and-chromeos"
    },
    {
      "level": "h2",
      "text": "Test before updates",
      "id": "test-before-updates"
    },
    {
      "level": "h2",
      "text": "CF\\_CAPTIVE\\_PORTAL\\_TIMED\\_OUT",
      "id": "cf\\_captive\\_portal\\_timed\\_out"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_CONNECTIVITY\\_FAILURE\\_UNKNOWN",
      "id": "cf\\_connectivity\\_failure\\_unknown"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_DNS\\_LOOKUP\\_FAILURE",
      "id": "cf\\_dns\\_lookup\\_failure"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_DNS\\_PROXY\\_FAILURE",
      "id": "cf\\_dns\\_proxy\\_failure"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_FAILED\\_READ\\_SYSTEM\\_DNS\\_CONFIG",
      "id": "cf\\_failed\\_read\\_system\\_dns\\_config"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_FAILED\\_TO\\_SET\\_MTLS",
      "id": "cf\\_failed\\_to\\_set\\_mtls"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_HAPPY\\_EYEBALLS\\_MITM\\_FAILURE",
      "id": "cf\\_happy\\_eyeballs\\_mitm\\_failure"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_HOST\\_UNREACHABLE\\_CHECK",
      "id": "cf\\_host\\_unreachable\\_check"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_INSUFFICIENT\\_DISK",
      "id": "cf\\_insufficient\\_disk"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_INSUFFICIENT\\_FILE\\_DESCRIPTORS",
      "id": "cf\\_insufficient\\_file\\_descriptors"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_INSUFFICIENT\\_MEMORY",
      "id": "cf\\_insufficient\\_memory"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_LOCAL\\_POLICY\\_FILE\\_FAILED\\_TO\\_PARSE",
      "id": "cf\\_local\\_policy\\_file\\_failed\\_to\\_parse"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_NO\\_NETWORK",
      "id": "cf\\_no\\_network"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_REGISTRATION\\_MISSING",
      "id": "cf\\_registration\\_missing"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h3",
      "text": "CF\\_REGISTRATION\\_MISSING (Revoked)",
      "id": "cf\\_registration\\_missing-(revoked)"
    },
    {
      "level": "h2",
      "text": "CF\\_TLS\\_INTERCEPTION\\_BLOCKING\\_DOH",
      "id": "cf\\_tls\\_interception\\_blocking\\_doh"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "CF\\_TLS\\_INTERCEPTION\\_CHECK",
      "id": "cf\\_tls\\_interception\\_check"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "Admin directed disconnect",
      "id": "admin-directed-disconnect"
    },
    {
      "level": "h3",
      "text": "Symptoms",
      "id": "symptoms"
    },
    {
      "level": "h3",
      "text": "Cause",
      "id": "cause"
    },
    {
      "level": "h3",
      "text": "Resolution",
      "id": "resolution"
    },
    {
      "level": "h2",
      "text": "Unable to connect WARP",
      "id": "unable-to-connect-warp"
    },
    {
      "level": "h3",
      "text": "A third-party service is blocking WARP",
      "id": "a-third-party-service-is-blocking-warp"
    },
    {
      "level": "h3",
      "text": "A third-party VPN is interfering with WARP",
      "id": "a-third-party-vpn-is-interfering-with-warp"
    },
    {
      "level": "h3",
      "text": "Your ISP or country is blocking WARP",
      "id": "your-isp-or-country-is-blocking-warp"
    },
    {
      "level": "h3",
      "text": "(Mac/Linux) The device's `/etc/resolv.conf` file has an invalid character",
      "id": "(mac/linux)-the-device's-`/etc/resolv.conf`-file-has-an-invalid-character"
    },
    {
      "level": "h2",
      "text": "Turned on WARP and can no longer browse the Internet",
      "id": "turned-on-warp-and-can-no-longer-browse-the-internet"
    },
    {
      "level": "h3",
      "text": "A Gateway firewall policy is blocking traffic",
      "id": "a-gateway-firewall-policy-is-blocking-traffic"
    },
    {
      "level": "h3",
      "text": "The device does not have a root certificate installed",
      "id": "the-device-does-not-have-a-root-certificate-installed"
    },
    {
      "level": "h3",
      "text": "A third-party security product is interfering with Gateway",
      "id": "a-third-party-security-product-is-interfering-with-gateway"
    },
    {
      "level": "h3",
      "text": "Docker container is failing DNS resolution",
      "id": "docker-container-is-failing-dns-resolution"
    },
    {
      "level": "h2",
      "text": "Cannot connect to a specific app or website",
      "id": "cannot-connect-to-a-specific-app-or-website"
    },
    {
      "level": "h3",
      "text": "TLS Decryption is enabled and the app or site does certificate pinning",
      "id": "tls-decryption-is-enabled-and-the-app-or-site-does-certificate-pinning"
    },
    {
      "level": "h3",
      "text": "A Gateway firewall policy is blocking the app or site",
      "id": "a-gateway-firewall-policy-is-blocking-the-app-or-site"
    },
    {
      "level": "h3",
      "text": "Split Tunnel settings are misconfigured for the app or site",
      "id": "split-tunnel-settings-are-misconfigured-for-the-app-or-site"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "Windows Server",
      "id": "windows-server"
    },
    {
      "level": "h2",
      "text": "WARP disconnected on Windows ARM",
      "id": "warp-disconnected-on-windows-arm"
    },
    {
      "level": "h2",
      "text": "Managed network on legacy Windows Server",
      "id": "managed-network-on-legacy-windows-server"
    },
    {
      "level": "h2",
      "text": "Split Tunnels for Microsoft 365 traffic",
      "id": "split-tunnels-for-microsoft-365-traffic"
    },
    {
      "level": "h2",
      "text": "nslookup on Windows in DoH mode",
      "id": "nslookup-on-windows-in-doh-mode"
    },
    {
      "level": "h2",
      "text": "4G/5G embedded modules",
      "id": "4g/5g-embedded-modules"
    },
    {
      "level": "h2",
      "text": "Comcast DNS servers",
      "id": "comcast-dns-servers"
    },
    {
      "level": "h2",
      "text": "Cox DNS servers",
      "id": "cox-dns-servers"
    },
    {
      "level": "h2",
      "text": "HP Velocity",
      "id": "hp-velocity"
    },
    {
      "level": "h2",
      "text": "Dell firmware version 1.35.0",
      "id": "dell-firmware-version-1.35.0"
    },
    {
      "level": "h2",
      "text": "Cisco Meraki",
      "id": "cisco-meraki"
    },
    {
      "level": "h2",
      "text": "Windows Teredo",
      "id": "windows-teredo"
    },
    {
      "level": "h2",
      "text": "Docker on Linux with bridged networking",
      "id": "docker-on-linux-with-bridged-networking"
    },
    {
      "level": "h2",
      "text": "Access WARP DNS from Docker",
      "id": "access-warp-dns-from-docker"
    }
  ],
  "url": "llms-txt#add-20-to-base-priority-for-2-prepend-of-65000",
  "links": []
}