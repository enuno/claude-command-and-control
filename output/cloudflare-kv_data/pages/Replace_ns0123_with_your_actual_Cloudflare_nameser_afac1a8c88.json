{
  "title": "Replace ns0123 with your actual Cloudflare nameservers",
  "content": "dig example.com @ns0123.secondary.cloudflare.com\ntxt\n   www.example.com CNAME www.example.com.cdn.cloudflare.net\n   txt\nsub1.partialzone.com   CNAME   sub2.partialzone.com\nsub2.partialzone.com   A       192.0.2.1\nmermaid\n    flowchart TD\n      accTitle: DNS resolution flow with CNAME target in same partial zone\n      A[Request to <code>sub1.partialzone.com</code>] --> B[<code>CNAME</code> record for <code>sub1.partialzone.com</code> to <code>sub2.partialzone.com</code>]\n      subgraph Cloudflare\n        B --> C[<code>A</code> record for <code>sub2.partialzone.com</code> to <code>192.0.2.1</code>]\n      end\n      C --> D[<code>192.0.2.1</code>]\n      subgraph Authoritative DNS\n      E[<code>A</code> record for <code>sub2.partialzone.com</code> to <code>192.0.2.4</code>]\n      end\nmermaid\n    flowchart TD\n      accTitle: DNS resolution flow with CNAME target not in partial zone\n      A[Request to <code>sub1.partialzone.com</code>] --> B[<code>CNAME</code> record for <code>sub1.partialzone.com</code> to <code>sub2.partialzone.com</code>]\n      B --> C[<code>A</code> record for <code>sub2.partialzone.com</code> to <code>192.0.2.4</code>]\n      C --> D[<code>192.0.2.4</code>]\n      subgraph Cloudflare\n        B\n      end\n      subgraph Authoritative DNS\n        C\n      end\nmermaid\n    flowchart TD\n      accTitle: DNS resolution flow with CNAME target in a zone within the same account\n      A[Request to <code>www\\.alice.com</code>] --> B[<code>CNAME</code> record for <code>www\\.alice.com</code> to <code>www\\.partialzone.com</code>]\n      B --> C[<code>A</code> record for <code>www\\.partialzone.com</code> to <code>192.0.2.4</code>]\n      C --> D[<code>192.0.2.4</code>]\n      subgraph Cloudflare account\n        subgraph Cloudflare zone 1\n          B\n        end\n        subgraph Cloudflare zone 2\n        E[<code>A</code> record for <code>www\\.partialzone.com</code> to <code>203.0.113.1</code>]\n        end\n      end\n      subgraph Authoritative DNS\n      C\n      end\nmermaid\n    flowchart TD\n      accTitle: DNS resolution flow with CNAME target in a zone within the same account and auth DNS pointing to cdn.cloudflare.net\n      A[Request to <code>www\\.alice.com</code>] --> B[<code>CNAME</code> record for <code>www\\.alice.com</code> to <code>www\\.partialzone.com</code>]\n      B --> C[<code>CNAME</code> record for <code>www\\.partialzone.com</code> to <code>www\\.partialzone.com.cdn.cloudflare.net</code>]\n      C --> D[<code>Cloudflare proxy IP</code>]\n      subgraph Cloudflare account\n        subgraph Cloudflare zone 1\n          B\n        end\n        subgraph Cloudflare zone 2\n        E[Proxied <code>A</code> record for <code>www\\.partialzone.com</code> to <code>203.0.113.1</code>]\n        end\n      end\n      subgraph Authoritative DNS\n      C\n      end\nbash\n  curl \"https://api.cloudflare.com/client/v4/zones\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"example.com\",\n      \"account\": {\n          \"id\": \"YOUR_ACCOUNT_ID\"\n      },\n      \"type\": \"partial\"\n    }'\n  txt\n   www.example.com CNAME www.example.com.cdn.cloudflare.net\n   mermaid\nflowchart LR\naccTitle: Zone status flow\naccDescr: Diagram of the different statuses applicable to Cloudflare zones and the transitions from one status to the other.\n\nA[Initializing]\nB[Pending]\nC[Active]\nD[Moved]\nE[Deleted]\nF[Purged]\n\nA-- Plan <br />selection --> B\n B-- Zone <br />authentication --> C\n C-- DNS <br />checks fail --> D\n D-- Moved <br />for 7 days --> E\n E-- Deleted <br />for 7 days --> F\n\nB-- Pending for <br />28 days --> E\n A-- Initializing for 28 days --> E\nsh\ndig +short ns cloudflare.com\nsh\nns3.cloudflare.com.\nns4.cloudflare.com.\nns5.cloudflare.com.\nns6.cloudflare.com.\nns7.cloudflare.com.\nsh\ndig +short soa cloudflare.com\nsh\nns3.cloudflare.com. dns.cloudflare.com. 2029202248 10000 2400 604800 300\nplaintext\nThe zone name provided is subject to a hold which disallows the creation of this zone.\nPlease contact the owner of the Cloudflare account that manages this domain to have this hold removed.\nbash\nzoneid=<ZONE_ID>\nbearer=<API_TOKEN>\ncurl --silent \"https://api.cloudflare.com/client/v4/zones/$zoneid/dns_records?per_page=50000\" \\\n--header \"Authorization: Bearer $bearer\" \\\n| jq --raw-output '.result[].id' | while read id\ndo\n  curl --silent --request DELETE \"https://api.cloudflare.com/client/v4/zones/$zoneid/dns_records/$id\" \\\n--header \"Authorization: Bearer $bearer\"\ndone\nmermaid\n    flowchart TD\n      accTitle: Example of parent zone and subdomains\n      A[<code>example.com</code>] --> B[<code>docs.example.com</code>]\n      A[<code>example.com</code>] --> C[<code>blog.example.com</code>]\n      subgraph Parent domain\n        A\n      end\n      subgraph Subdomains\n        B\n        C\n      end\nmermaid\nflowchart LR\naccTitle: Cloudflare as Secondary DNS\nA((Zone Admin)) --DNS record <br /> management--> B[Primary DNS <br /> provider]\nB --Zone transfer--> C[Cloudflare <br /> DNS]\nB & C <--DNS lookups--> D[Resolver] <--DNS lookups--> E((User))\nbash\ncurl --request DELETE \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters?id={filter_id_1}&id={filter_id_2}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<FILTER_ID_1>\"\n    },\n    {\n      \"id\": \"<FILTER_ID_2>\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl --request DELETE \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters/{filter_id}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<FILTER_ID>\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\ntxt\nhttps://api.cloudflare.com/client/v4/\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<FILTER_ID_1>\",\n      \"paused\": false,\n      \"description\": \"Login from office\",\n      \"expression\": \"ip.src eq 93.184.216.0 and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n    },\n    {\n      \"id\": \"<FILTER_ID_2>\",\n      \"paused\": false,\n      \"description\": \"Login\",\n      \"expression\": \"(http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n    },\n    {\n      \"id\": \"<FILTER_ID_3>\",\n      \"paused\": false,\n      \"description\": \"not /api\",\n      \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\"\n    },\n    {\n      \"id\": \"<FILTER_ID_4>\",\n      \"paused\": false,\n      \"description\": \"/api\",\n      \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\"\n    },\n    {\n      \"id\": \"<FILTER_ID_5>\",\n      \"paused\": false,\n      \"expression\": \"ip.src eq 93.184.216.0\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result_info\": {\n    \"page\": 1,\n    \"per_page\": 25,\n    \"count\": 5,\n    \"total_count\": 5,\n    \"total_pages\": 1\n  }\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters/{filter_id}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": {\n    \"id\": \"<FILTER_ID>\",\n    \"paused\": false,\n    \"description\": \"Login from office\",\n    \"expression\": \"ip.src eq 93.184.216.0 and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\njson\n{\n  \"id\": \"6f58318e7fa2477a23112e8118c66f61\",\n  \"expression\": \"http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\"\",\n  \"paused\": true,\n  \"description\": \"WordPress login paths\",\n  \"ref\": \"\"\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '[\n  {\n    \"expression\": \"ip.src eq 93.184.216.0\"\n  },\n  {\n    \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\",\n    \"description\": \"/api\"\n  },\n  {\n    \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n    \"description\": \"not /api\"\n  },\n  {\n    \"expression\": \"(http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n    \"description\": \"Login\"\n  },\n  {\n    \"expression\": \"ip.src eq 93.184.216.0 and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n    \"description\": \"Login from office\"\n  }\n]'\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<FILTER_ID_1>\",\n      \"paused\": false,\n      \"expression\": \"ip.src eq 93.184.216.0\"\n    },\n    {\n      \"id\": \"<FILTER_ID_2>\",\n      \"paused\": false,\n      \"description\": \"/api\",\n      \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\"\n    },\n    {\n      \"id\": \"<FILTER_ID_3>\",\n      \"paused\": false,\n      \"description\": \"not /api\",\n      \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\"\n    },\n    {\n      \"id\": \"<FILTER_ID_4>\",\n      \"paused\": false,\n      \"description\": \"Login\",\n      \"expression\": \"(http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n    },\n    {\n      \"id\": \"<FILTER_ID_5>\",\n      \"paused\": false,\n      \"description\": \"Login from office\",\n      \"expression\": \"ip.src eq 93.184.216.0 and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl --request PUT \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '[\n  {\n    \"id\": \"<FILTER_ID_1>\",\n    \"paused\": false,\n    \"expression\": \"ip.src eq 93.184.216.0\",\n    \"description\": \"IP of example.org\"\n  },\n  {\n    \"id\": \"<FILTER_ID_2>\",\n    \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\",\n    \"description\": \"/api\"\n  }\n]'\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<FILTER_ID>\",\n      \"paused\": false,\n      \"description\": \"IP of example.org\",\n      \"expression\": \"ip.src eq 93.184.216.0\"\n    },\n    {\n      \"id\": \"<FILTER_ID_2>\",\n      \"paused\": false,\n      \"description\": \"/api\",\n      \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl --request PUT \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/filters/{filter_id}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '{\n  \"id\": \"<FILTER_ID>\",\n  \"paused\": false,\n  \"description\": \"Login from office\",\n  \"expression\": \"ip.src in {2400:cb00::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n}'\njson\n{\n  \"result\": {\n    \"id\": \"<FILTER_ID>\",\n    \"paused\": false,\n    \"description\": \"Login from office\",\n    \"expression\": \"ip.src in {2400:cb00::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/filters/validate-expr?expression=ip.src==34\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": null,\n  \"success\": false,\n  \"errors\": [\n    {\n      \"message\": \"Filter parsing error:\\n`ip.src==34`\\n          ^^ couldn't parse address in network: invalid IP address syntax\\n\"\n    }\n  ],\n  \"messages\": null\n}\ntxt\nFilter parsing error:\n`ip.src==34`\n          ^^ couldn't parse address in network: invalid IP address syntax\nbash\ncurl \"https://api.cloudflare.com/client/v4/filters/validate-expr\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '{\n  \"expression\": \"ip.src in {2400:cb00::/32 2405:8100::/2000 2c0f:f248::/32 2a06:98c0::/29}\"\n}'\njson\n{\n  \"result\": null,\n  \"success\": false,\n  \"errors\": [\n    {\n      \"message\": \"Filter parsing error:\\n`ip.src in {2400:cb00::/32 2405:8100::/2000 2c0f:f248::/32 2a06:98c0::/29}`\\n                                        ^^^^ number too large to fit in target type while parsing with radix 10\\n\"\n    }\n  ],\n  \"messages\": null\n}\ntxt\nFilter parsing error:\n`ip.src in {2400:cb00::/32 2405:8100::/2000 2c0f:f248::/32 2a06:98c0::/29}`\n                                       ^^^^ number too large to fit in target type while parsing with radix 10\ntxt\nif (traffic matches certain criteria) then...\njson\n{\n  \"id\": \"<FILTER_ID>\",\n  \"expression\": \"(http.request.uri.path ~ \\\"^.*wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*xmlrpc.php$\\\") and ip.src ne 93.184.216.34\",\n  \"description\": \"WordPress login paths via the login page or mobile RPC endpoint\"\n}\ntxt\n(http.request.uri.path ~ \"^.*wp-login.php$\" or http.request.uri.path ~ \"^.*xmlrpc.php$\") and ip.src ne 93.184.216.34\nbash\ncurl --request DELETE \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules?id={rule_id_1}&id={rule_id_2}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<RULE_ID_1>\"\n    },\n    {\n      \"id\": \"<RULE_ID_2>\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl --request DELETE \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules/{rule_id}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<RULE_ID>\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\ntxt\nhttps://api.cloudflare.com/client/v4/\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<RULE_ID_1>\",\n      \"paused\": false,\n      \"description\": \"allow API traffic without challenge\",\n      \"action\": \"allow\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_1>\",\n        \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"paused\": false,\n        \"description\": \"/api\"\n      }\n    },\n    {\n      \"id\": \"<RULE_ID_2>\",\n      \"paused\": false,\n      \"description\": \"do not challenge login from office\",\n      \"action\": \"allow\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_2>\",\n        \"expression\": \"ip.src in {2400:cb00::/32 2803:f800::/32 2c0f:f248::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n        \"paused\": false,\n        \"description\": \"Login from office\"\n      }\n    },\n    {\n      \"id\": \"<RULE_ID_3>\",\n      \"paused\": false,\n      \"description\": \"challenge login\",\n      \"action\": \"challenge\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_3>\",\n        \"expression\": \"(http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n        \"paused\": false,\n        \"description\": \"Login\"\n      }\n    },\n    {\n      \"id\": \"<RULE_ID_4>\",\n      \"paused\": false,\n      \"description\": \"JS challenge site\",\n      \"action\": \"js_challenge\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_4>\",\n        \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"paused\": false,\n        \"description\": \"not /api\"\n      }\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result_info\": {\n    \"page\": 1,\n    \"per_page\": 25,\n    \"count\": 4,\n    \"total_count\": 4,\n    \"total_pages\": 1\n  }\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules/{rule_id}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\"\njson\n{\n  \"result\": {\n    \"id\": \"<RULE_ID>\",\n    \"paused\": false,\n    \"description\": \"do not challenge login from office\",\n    \"action\": \"allow\",\n    \"priority\": null,\n    \"filter\": {\n      \"id\": \"<FILTER_ID>\",\n      \"expression\": \"ip.src in {2400:cb00::/32 2803:f800::/32 2c0f:f248::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n      \"paused\": false,\n      \"description\": \"Login from office\"\n    }\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\njson\n{\n  \"id\": \"772bf1026a72c400ea576db1ffa16407\",\n  \"filter\": {\n    \"id\": \"6f58318e7fa2477a23112e8118c66f61\",\n    \"expression\": \"http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\"\",\n    \"paused\": false,\n    \"description\": \"WordPress login paths\",\n    \"ref\": \"\"\n  },\n  \"action\": \"challenge\",\n  \"priority\": 1000,\n  \"paused\": false,\n  \"description\": \"Protect blog login page\",\n  \"ref\": \"\"\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '[\n  {\n    \"filter\": {\n      \"id\": \"<FILTER_ID_1>\"\n    },\n    \"action\": \"allow\",\n    \"description\": \"Do not challenge login from office\"\n  },\n  {\n    \"filter\": {\n      \"id\": \"<FILTER_ID_2>\"\n    },\n    \"action\": \"challenge\",\n    \"description\": \"Challenge login\"\n  },\n  {\n    \"filter\": {\n      \"id\": \"<FILTER_ID_3>\"\n    },\n    \"action\": \"js_challenge\",\n    \"description\": \"JS challenge site\"\n  },\n  {\n    \"filter\": {\n      \"id\": \"<FILTER_ID_4>\"\n    },\n    \"action\": \"allow\",\n    \"description\": \"Allow API traffic without challenge\"\n  }\n]'\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<RULE_ID_1>\",\n      \"paused\": false,\n      \"description\": \"Do not challenge login from office\",\n      \"action\": \"allow\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_1>\",\n        \"expression\": \"ip.src in {2400:cb00::/32 2803:f800::/32 2c0f:f248::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n        \"paused\": false,\n        \"description\": \"Login from office\"\n      }\n    },\n    {\n      \"id\": \"<RULE_ID_2>\",\n      \"paused\": false,\n      \"description\": \"Challenge login\",\n      \"action\": \"challenge\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_2>\",\n        \"expression\": \"(http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n        \"paused\": false,\n        \"description\": \"Login\"\n      }\n    },\n    {\n      \"id\": \"<RULE_ID_3>\",\n      \"paused\": false,\n      \"description\": \"JS challenge site\",\n      \"action\": \"js_challenge\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_3>\",\n        \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"paused\": false,\n        \"description\": \"not /api\"\n      }\n    },\n    {\n      \"id\": \"<RULE_ID_4>\",\n      \"paused\": false,\n      \"description\": \"Allow API traffic without challenge\",\n      \"action\": \"allow\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID_4>\",\n        \"expression\": \"http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"paused\": false,\n        \"description\": \"/api\"\n      }\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl --request PUT \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '[\n  {\n    \"id\": \"<RULE_ID>\",\n    \"paused\": false,\n    \"description\": \"Challenge site\",\n    \"action\": \"challenge\",\n    \"priority\": null,\n    \"filter\": {\n      \"id\": \"<FILTER_ID>\",\n      \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n      \"paused\": false,\n      \"description\": \"not /api\"\n    }\n  }\n]'\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<RULE_ID>\",\n      \"paused\": false,\n      \"description\": \"Challenge site\",\n      \"action\": \"challenge\",\n      \"priority\": null,\n      \"filter\": {\n        \"id\": \"<FILTER_ID>\",\n        \"expression\": \"not http.request.uri.path matches \\\"^/api/.*$\\\"\",\n        \"paused\": false,\n        \"description\": \"not /api\"\n      }\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl --request PUT \\\n\"https://api.cloudflare.com/client/v4/zones/{zone_id}/firewall/rules/{rule_id}\" \\\n--header \"X-Auth-Email: <EMAIL>\" \\\n--header \"X-Auth-Key: <API_KEY>\" \\\n--header \"Content-Type: application/json\" \\\n--data '{\n  \"id\": \"<RULE_ID>\",\n  \"paused\": false,\n  \"description\": \"Do not challenge login from office IPv6\",\n  \"action\": \"allow\",\n  \"priority\": null,\n  \"filter\": {\n    \"id\": \"<FILTER_ID>\",\n    \"expression\": \"ip.src in {2400:cb00::/32 2803:f800::/32 2c0f:f248::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n    \"paused\": false,\n    \"description\": \"Login from office\"\n  }\n}'\njson\n{\n  \"result\": {\n    \"id\": \"<RULE_ID>\",\n    \"paused\": false,\n    \"description\": \"Do not challenge login from office IPv6\",\n    \"action\": \"allow\",\n    \"priority\": null,\n    \"filter\": {\n      \"id\": \"<FILTER_ID>\",\n      \"expression\": \"ip.src in {2400:cb00::/32 2803:f800::/32 2c0f:f248::/32 2a06:98c0::/29} and (http.request.uri.path ~ \\\"^.*/wp-login.php$\\\" or http.request.uri.path ~ \\\"^.*/xmlrpc.php$\\\")\",\n      \"paused\": false,\n      \"description\": \"Login from office\"\n    }\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\ntxt\n   <?xml version=\"1.0\" encoding=\"utf-8\"?><EntityDescriptor ID=\"_<YOUR_DESCRIPTOR_ID>\" entityID=\"https://<YOUR_ENTITY_ID> \" xmlns=\"urn:oasis:names:tc:SAML:2.0:metadata\">...\n   txt\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><EntityDescriptor ID=\"_<YOUR_DESCRIPTOR_ID>\" entityID=\"https://<YOUR_ENTITY_ID> \" xmlns=\"urn:oasis:names:tc:SAML:2.0:metadata\">...\n    txt\nPattern, Notes, Verify Email, Trusted Sender,\nExempt Recipient, Acceptable Sender\nwhale@notaphish.com, not a phish, true, true, false, true\ntxt\nBlocked_Sender, Notes\njohn.smith@email.com, John Smith\nmelanie.turner@email.com, Melanie Turner\ntxt\nDomain, Notes, Proximity, Recent\nmydomain.com, First Person, true, true\ntestdomain.com, New Hire, false, true\ntxt\nDisplay_Name, Email\nStar Phish, star@nophish.com\nPhish Ee, phishee@nophish.com\nbash\ncurl https://{host}:8088/services/collector/event \\\n--header \"Authorization: Splunk <YOUR_TOKEN>\" \\\n--data '{\n    \"sourcetype\": \"<YOUR_SOURCE_TYPE>\",\n    \"event\": \"Hello, World!\"\n    }'\ntxt\n{\"text\":\"Success\",\"code\":0}\nbash\nhttps://api.cloudflare.com/client/v4/accounts/{account_id}/logs/audit\nbash\nGET https://api.cloudflare.com/client/v4/accounts/1234567890abcdef/logs/audit?since=2025-03-01T00:00:00Z&before=2025-03-26T23:59:59Z\njson\n{\n  \"result\": [\n    {\n      \"action\": \"zone.settings.change\",\n      \"actor\": {\n        \"email\": \"user@example.com\",\n        \"id\": \"0987654321abcdef\"\n      },\n      \"ip\": \"192.0.2.1\",\n      \"method\": \"PUT\",\n      \"interface\": \"dashboard\",\n      \"resources\": [\n        {\n          \"resource_id\": \"zone123\",\n          \"resource_type\": \"zone\"\n        }\n      ],\n      \"timestamp\": \"2025-03-15T14:25:37Z\"\n    }\n    // Additional log entries\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/logs/audit\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [\n    {\n      \"message\": \"message\"\n    }\n  ],\n  \"result\": [\n    {\n      \"account\": {\n        \"id\": \"4bb334f7c94c4a29a045f03944f072e5\",\n        \"name\": \"Example Account\"\n      },\n      \"action\": {\n        \"description\": \"Add Member\",\n        \"result\": \"success\",\n        \"time\": \"2024-04-26T17:31:07Z\",\n        \"type\": \"create\"\n      },\n      \"actor\": {\n        \"id\": \"f6b5de0326bb5182b8a4840ee01ec774\",\n        \"context\": \"dash\",\n        \"email\": \"alice@example.com\",\n        \"ip_address\": \"198.41.129.166\",\n        \"token_id\": \"token_id\",\n        \"token_name\": \"token_name\",\n        \"type\": \"user\"\n      },\n      \"raw\": {\n        \"cf_ray_id\": \"8e9b1c60ef9e1c9a\",\n        \"method\": \"POST\",\n        \"status_code\": 200,\n        \"uri\": \"/accounts/4bb334f7c94c4a29a045f03944f072e5/members\",\n        \"user_agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Safari/605.1.15\"\n      },\n      \"resource\": {\n        \"id\": \"id\",\n        \"product\": \"members\",\n        \"request\": {},\n        \"response\": {},\n        \"scope\": {},\n        \"type\": \"type\"\n      },\n      \"zone\": {\n        \"id\": \"id\",\n        \"name\": \"example.com\"\n      }\n    }\n  ],\n  \"result_info\": {\n    \"count\": \"1\",\n    \"cursor\": \"ASqdKd7dKgxh-aZ8bm0mZos1BtW4BdEqifCzNkEeGRzi_5SN_-362Y8sF-C1TRn60_6rd3z2dIajf9EAPyQ_NmIeAMkacmaJPXipqvP7PLU4t72wyqBeJfjmjdE=\"\n  },\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/user/tokens/verify\" \\\n--header \"Authorization: Bearer <API_TOKEN>\"\njson\n{\n  \"result\": {\n    \"id\": \"100bf38cc8393103870917dd535e0628\",\n    \"status\": \"active\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [\n    {\n      \"code\": 10000,\n      \"message\": \"This API Token is valid and active\",\n      \"type\": null\n    }\n  ]\n}\njson\n[\n  {\n    \"id\": \"f267e341f3dd4697bd3b9f71dd96247f\",\n    \"effect\": \"allow\",\n    \"resources\": {\n      \"com.cloudflare.api.account.zone.eb78d65290b24279ba6f44721b3ea3c4\": \"*\",\n      \"com.cloudflare.api.account.zone.22b1de5f1c0e4b3ea97bb1e963b06a43\": \"*\"\n    },\n    \"permission_groups\": [\n      {\n        \"id\": \"c8fed203ed3043cba015a93ad1616f1f\",\n        \"name\": \"Zone Read\"\n      },\n      {\n        \"id\": \"82e64a83756745bbbb1c9c2701bf816b\",\n        \"name\": \"DNS Read\"\n      }\n    ]\n  }\n]\nbash\ncurl \"https://api.cloudflare.com/client/v4/user/tokens/permission_groups\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"19637fbb73d242c0a92845d8db0b95b1\",\n      \"name\": \"AI Crawl Control Read\",\n      \"description\": \"Grants access to reading AI Crawl Control\",\n      \"scopes\": [\n        \"com.cloudflare.api.account.zone\"\n      ]\n    },\n    {\n      \"id\": \"1ba6ab4cacdb454b913bbb93e1b8cb8c\",\n      \"name\": \"AI Crawl Control Write\",\n      \"description\": \"Grants access to reading and editing AI Crawl Control\",\n      \"scopes\": [\n        \"com.cloudflare.api.account.zone\"\n      ]\n    },\n    // (...)\n  ]\n}\njson\n{\n  \"request.ip\": {\n    \"in\": [\"199.27.128.0/21\", \"2400:cb00::/32\"],\n    \"not_in\": [\"199.27.128.0/21\", \"2400:cb00::/32\"]\n  }\n}\nbash\n  curl \"https://api.cloudflare.com/client/v4/accounts/{account_id}/tokens\" \\\n  --header \"Authorization: Bearer <API_TOKEN>\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"readonly token\",\n    \"policies\": [\n      {\n        \"effect\": \"allow\",\n        \"resources\": {\n          \"com.cloudflare.api.account.zone.eb78d65290b24279ba6f44721b3ea3c4\": \"*\",\n          \"com.cloudflare.api.account.zone.22b1de5f1c0e4b3ea97bb1e963b06a43\": \"*\"\n        },\n        \"permission_groups\": [\n          {\n            \"id\": \"c8fed203ed3043cba015a93ad1616f1f\",\n            \"name\": \"Zone Read\"\n          },\n          {\n            \"id\": \"82e64a83756745bbbb1c9c2701bf816b\",\n            \"name\": \"DNS Read\"\n          }\n        ]\n      }\n    ],\n    \"not_before\": \"2020-04-01T05:20:00Z\",\n    \"expires_on\": \"2020-04-10T00:00:00Z\",\n    \"condition\": {\n      \"request.ip\": {\n        \"in\": [\n          \"199.27.128.0/21\",\n          \"2400:cb00::/32\"\n        ],\n        \"not_in\": [\n          \"199.27.128.1/32\"\n        ]\n      }\n    }\n  }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/user/tokens\" \\\n  --header \"Authorization: Bearer <API_TOKEN>\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"readonly token\",\n    \"policies\": [\n      {\n        \"effect\": \"allow\",\n        \"resources\": {\n          \"com.cloudflare.api.account.zone.eb78d65290b24279ba6f44721b3ea3c4\": \"*\",\n          \"com.cloudflare.api.account.zone.22b1de5f1c0e4b3ea97bb1e963b06a43\": \"*\"\n        },\n        \"permission_groups\": [\n          {\n            \"id\": \"c8fed203ed3043cba015a93ad1616f1f\",\n            \"name\": \"Zone Read\"\n          },\n          {\n            \"id\": \"82e64a83756745bbbb1c9c2701bf816b\",\n            \"name\": \"DNS Read\"\n          }\n        ]\n      }\n    ],\n    \"not_before\": \"2020-04-01T05:20:00Z\",\n    \"expires_on\": \"2020-04-10T00:00:00Z\",\n    \"condition\": {\n      \"request.ip\": {\n        \"in\": [\n          \"199.27.128.0/21\",\n          \"2400:cb00::/32\"\n        ],\n        \"not_in\": [\n          \"199.27.128.1/32\"\n        ]\n      }\n    }\n  }'\n  bash\ncurl \"https://api.cloudflare.com/client/v4/user/tokens\" \\\n--header \"Authorization: Bearer <API_TOKEN>\" \\\n--header \"Content-Type: application/json\" \\\n--data '{\n  \"name\": \"readonly token\",\n  \"policies\": [\n    {\n      \"effect\": \"allow\",\n      \"resources\": {\n        \"com.cloudflare.api.account.zone.eb78d65290b24279ba6f44721b3ea3c4\": \"*\",\n        \"com.cloudflare.api.account.zone.22b1de5f1c0e4b3ea97bb1e963b06a43\": \"*\"\n      },\n      \"permission_groups\": [\n        {\n          \"id\": \"c8fed203ed3043cba015a93ad1616f1f\",\n          \"name\": \"Zone Read\"\n        },\n        {\n          \"id\": \"82e64a83756745bbbb1c9c2701bf816b\",\n          \"name\": \"DNS Read\"\n        }\n      ]\n    }\n  ],\n  \"not_before\": \"2020-04-01T05:20:00Z\",\n  \"expires_on\": \"2020-04-10T00:00:00Z\",\n  \"condition\": {\n    \"request.ip\": {\n      \"in\": [\n        \"199.27.128.0/21\",\n        \"2400:cb00::/32\"\n      ],\n      \"not_in\": [\n        \"199.27.128.1/32\"\n      ]\n    }\n  }\n}'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID\" \\\n--header \"Authorization: Bearer YQSn-xWAQiiEh9qM58wZNnyQS7FUdoqGIUAbrh7T\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID\" \\\n--header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" | jq .\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones?account.id=$ACCOUNT_ID\" \\\n--header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\ntxt\n\"count\": 1,\n\"page\": 1,\n\"per_page\": 20,\n\"total_count\": 200,\ntxt\nC:\\>curl --request PATCH \"https://api.cloudflare.com/client/v4/user/invites/{id}\" --header \"X-Auth-Email: <EMAIL>\" --header \"X-Auth-Key: <API_KEY>\" --data \"{\"\"status\"\": \"\"accepted\"\"}\"\ntxt\nC:\\>curl --request PATCH ^\n\"https://api.cloudflare.com/client/v4/user/invites/{id}\" ^\n--header \"X-Auth-Email: <EMAIL>\" ^\n--header \"X-Auth-Key: <API_KEY>\" ^\n--data \"{\"\"status\"\": \"\"accepted\"\"}\"\npowershell\nInvoke-RestMethod -URI \"https://api.cloudflare.com/client/v4/zones/$Env:ZONE_ID/ssl/certificate_packs?ssl_status=all\" -Method 'GET' -Headers @{'X-Auth-Email'=$Env:CLOUDFLARE_EMAIL;'X-Auth-Key'=$Env:CLOUDFLARE_API_KEY}\ntxt\nresult      : {@{id=78411cfa-5727-4dc1-8d4a-773d01f17c7c; type=universal; hosts=System.Object[];\n              primary_certificate=c173c8a1-9724-4e96-a748-2c4494186098; status=active; certificates=System.Object[];\n              created_on=2022-12-09T23:11:06.010263Z; validity_days=90; validation_method=txt;\n              certificate_authority=lets_encrypt}}\nresult_info : @{page=1; per_page=20; total_pages=1; count=1; total_count=1}\nsuccess     : True\nerrors      : {}\nmessages    : {}\npowershell\nInvoke-RestMethod -URI \"https://api.cloudflare.com/client/v4/zones/$Env:ZONE_ID/ssl/certificate_packs?ssl_status=all\" -Method 'GET' -Headers @{'X-Auth-Email'=$Env:CLOUDFLARE_EMAIL;'X-Auth-Key'=$Env:CLOUDFLARE_API_KEY} | ConvertTo-Json -Depth 5\njson\n{\n  \"result\": [\n    {\n      \"id\": \"78411cfa-5727-4dc1-8d4a-773d01f17c7c\",\n      \"type\": \"universal\",\n      \"hosts\": [\"*.example.com\", \"example.com\"],\n      \"primary_certificate\": \"c173c8a1-9724-4e96-a748-2c4494186098\",\n      \"status\": \"active\",\n      \"certificates\": [\n        {\n          \"id\": \"c173c8a1-9724-4e96-a748-2c4494186098\",\n          \"hosts\": [\"*.example.com\", \"example.com\"],\n          \"issuer\": \"LetsEncrypt\",\n          \"signature\": \"ECDSAWithSHA384\",\n          \"status\": \"active\",\n          \"bundle_method\": \"ubiquitous\",\n          \"zone_id\": \"<ZONE_ID>\",\n          \"uploaded_on\": \"2023-02-02T11:20:25.403338Z\",\n          \"modified_on\": \"2022-12-08T00:26:15.577555Z\",\n          \"expires_on\": \"2023-03-07T23:26:12.000000Z\",\n          \"priority\": null\n        }\n      ],\n      \"created_on\": \"2022-12-09T23:11:06.010263Z\",\n      \"validity_days\": 90,\n      \"validation_method\": \"txt\",\n      \"certificate_authority\": \"lets_encrypt\"\n    }\n  ]\n  // (...)\n}\npowershell\ncurl.exe --request PATCH \"https://api.cloudflare.com/client/v4/user/invites/{id}\" --header \"Authorization: Bearer $Env:CLOUDFLARE_API_TOKEN\" --data '{\\\"status\\\": \\\"accepted\\\"}'\npowershell\ncurl.exe --request PATCH `\n\"https://api.cloudflare.com/client/v4/user/invites/{id}\" `\n--header \"X-Auth-Email: $Env:CLOUDFLARE_EMAIL\" `\n--header \"X-Auth-Key: $Env:CLOUDFLARE_API_KEY\" `\n--data '{\\\"status\\\": \\\"accepted\\\"}'\nsh\n  export ZONE_ID='f2ea6707005a4da1af1b431202e96ac5'\n  powershell\n  $Env:ZONE_ID='f2ea6707005a4da1af1b431202e96ac5'\n  powershell\n  [Environment]::SetEnvironmentVariable(\"ZONE_ID\", \"f2ea6707005a4da1af1b431202e96ac5\", \"User\")\n  txt\n  set ZONE_ID=f2ea6707005a4da1af1b431202e96ac5\n  txt\n  setx ZONE_ID f2ea6707005a4da1af1b431202e96ac5\n  sh\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID\" \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n  powershell\n  Invoke-RestMethod -URI \"https://api.cloudflare.com/client/v4/zones/$Env:ZONE_ID\" -Method 'GET' -Headers @{'Authorization'=\"Bearer $Env:CLOUDFLARE_API_TOKEN\"}\n  txt\n  curl \"https://api.cloudflare.com/client/v4/zones/%ZONE_ID%\" --header \"Authorization: Bearer %CLOUDFLARE_API_TOKEN%\"\n  json\n{\n  // ...\n  \"self_hosted_domains\": [\"foo.example.com\", \"bar.example.com\"]\n}\njson\n{\n  // ...\n  \"destinations\": [\n    {\n      \"type\": \"public\",\n      \"uri\": \"foo.example.com\"\n    },\n    {\n      \"type\": \"public\",\n      \"uri\": \"bar.example.com\"\n    }\n  ]\n}\njson\n{\n  \"result\": [\n    {\n      // ...\n      \"zone_id\": \"ab922473c42f4e50819d7c1c9b81b16b\",\n      \"zone_name\": \"example.com\"\n    }\n  ],\n  // ...\n}\ntxt\n{\n  \"result\": null,\n  \"success\": false,\n  \"errors\": [\n    {\n      \"code\": 1004,\n      \"message\": \"DNS Validation Error\",\n      \"error_chain\": [\n        {\n          \"code\": 9999,\n          \"message\": \"This is an example.\"\n        }\n      ]\n    }\n  ],\n  \"messages\": []\n}\ntxt\n{\n  \"result\": null,\n  \"success\": false,\n  \"errors\": [\n    {\n      \"code\": 9999,\n      \"message\": \"This is an example.\"\n    }\n  ],\n  \"messages\": []\n}\ntxt\n{\n  \"name\": \"_xmpp._tcp.example.com\",\n  \"data\": {\n    \"service\": \"_xmpp\",\n    \"proto\": \"_tcp\",\n    \"name\": \"example.com\",\n    ...\n  },\n  ...\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones\" \\\n--header \"Authorization: Bearer <API_TOKEN>\"\njs\nconst client = new Cloudflare({\n  apiToken: process.env[\"CLOUDFLARE_API_TOKEN\"],\n});\n\nconst zones = await client.zones.list();\n\nconsole.log(zones);\ntxt\nhttps://example.com/cdn-cgi/imagedelivery/<ACCOUNT_HASH>/<IMAGE_ID>/<VARIANT_NAME>\ntxt\nhttps://example.com/cdn-cgi/imagedelivery/ZWd9g1K7eljCn_KDTu_MWA/083eb7b2-5392-4565-b69e-aff66acddd00/public\ntxt\n   https://example.com/images/*\n   txt\nregex_replace(\n  http.request.uri.path,\n  \"^/images/(.*)\\\\?w([0-9]+)&h([0-9]+)$\",\n  \"/cdn-cgi/imagedelivery/<ACCOUNT_HASH>/${1}/width=${2},height=${3}\"\n)\njs\n  const KEY = \"YOUR_KEY_FROM_IMAGES_DASHBOARD\";\n  const EXPIRATION = 60 * 60 * 24; // 1 day\n\nconst bufferToHex = (buffer) =>\n    [...new Uint8Array(buffer)]\n      .map((x) => x.toString(16).padStart(2, \"0\"))\n      .join(\"\");\n\nasync function generateSignedUrl(url) {\n    // `url` is a full imagedelivery.net URL\n    // e.g. https://imagedelivery.net/cheeW4oKsx5ljh8e8BoL2A/bc27a117-9509-446b-8c69-c81bfeac0a01/mobile\n\nconst encoder = new TextEncoder();\n    const secretKeyData = encoder.encode(KEY);\n    const key = await crypto.subtle.importKey(\n      \"raw\",\n      secretKeyData,\n      { name: \"HMAC\", hash: \"SHA-256\" },\n      false,\n      [\"sign\"],\n    );\n\n// Attach the expiration value to the `url`\n    const expiry = Math.floor(Date.now() / 1000) + EXPIRATION;\n    url.searchParams.set(\"exp\", expiry);\n    // `url` now looks like\n    // https://imagedelivery.net/cheeW4oKsx5ljh8e8BoL2A/bc27a117-9509-446b-8c69-c81bfeac0a01/mobile?exp=1631289275\n\nconst stringToSign = url.pathname + \"?\" + url.searchParams.toString();\n    // for example, /cheeW4oKsx5ljh8e8BoL2A/bc27a117-9509-446b-8c69-c81bfeac0a01/mobile?exp=1631289275\n\n// Generate the signature\n    const mac = await crypto.subtle.sign(\n      \"HMAC\",\n      key,\n      encoder.encode(stringToSign),\n    );\n    const sig = bufferToHex(new Uint8Array(mac).buffer);\n\n// And attach it to the `url`\n    url.searchParams.set(\"sig\", sig);\n\nreturn new Response(url);\n  }\n\nexport default {\n    async fetch(request, env, ctx) {\n      const url = new URL(event.request.url);\n      const imageDeliveryURL = new URL(\n        url.pathname\n          .slice(1)\n          .replace(\"https:/imagedelivery.net\", \"https://imagedelivery.net\"),\n      );\n      return generateSignedUrl(imageDeliveryURL);\n    },\n  };\n  ts\n  const KEY = \"YOUR_KEY_FROM_IMAGES_DASHBOARD\";\n  const EXPIRATION = 60 * 60 * 24; // 1 day\n\nconst bufferToHex = (buffer) =>\n    [...new Uint8Array(buffer)]\n      .map((x) => x.toString(16).padStart(2, \"0\"))\n      .join(\"\");\n\nasync function generateSignedUrl(url) {\n    // `url` is a full imagedelivery.net URL\n    // e.g. https://imagedelivery.net/cheeW4oKsx5ljh8e8BoL2A/bc27a117-9509-446b-8c69-c81bfeac0a01/mobile\n\nconst encoder = new TextEncoder();\n    const secretKeyData = encoder.encode(KEY);\n    const key = await crypto.subtle.importKey(\n      \"raw\",\n      secretKeyData,\n      { name: \"HMAC\", hash: \"SHA-256\" },\n      false,\n      [\"sign\"],\n    );\n\n// Attach the expiration value to the `url`\n    const expiry = Math.floor(Date.now() / 1000) + EXPIRATION;\n    url.searchParams.set(\"exp\", expiry);\n    // `url` now looks like\n    // https://imagedelivery.net/cheeW4oKsx5ljh8e8BoL2A/bc27a117-9509-446b-8c69-c81bfeac0a01/mobile?exp=1631289275\n\nconst stringToSign = url.pathname + \"?\" + url.searchParams.toString();\n    // for example, /cheeW4oKsx5ljh8e8BoL2A/bc27a117-9509-446b-8c69-c81bfeac0a01/mobile?exp=1631289275\n\n// Generate the signature\n    const mac = await crypto.subtle.sign(\n      \"HMAC\",\n      key,\n      encoder.encode(stringToSign),\n    );\n    const sig = bufferToHex(new Uint8Array(mac).buffer);\n\n// And attach it to the `url`\n    url.searchParams.set(\"sig\", sig);\n\nreturn new Response(url);\n  }\n\nexport default {\n    async fetch(request, env, ctx): Promise<Response> {\n      const url = new URL(event.request.url);\n      const imageDeliveryURL = new URL(\n        url.pathname\n          .slice(1)\n          .replace(\"https:/imagedelivery.net\", \"https://imagedelivery.net\"),\n      );\n      return generateSignedUrl(imageDeliveryURL);\n    },\n  } satisfies ExportedHandler<Env>;\n  json\n   {\n       \"Version\": \"2012-10-17\",\n       \"Statement\": [\n           {\n               \"Effect\": \"Allow\",\n               \"Action\": [\n                   \"s3:Get*\",\n                   \"s3:List*\"\n               ],\n               \"Resource\": [\n                   \"arn:aws:s3:::<BUCKET_NAME>\",\n                   \"arn:aws:s3:::<BUCKET_NAME>/*\"\n               ]\n           }\n       ]\n   }\n   bash\n  curl --request PUT \\\n    --url https://api.cloudflare.com/client/v4/accounts/{account_id}/members/{member_id} \\\n    --header 'Authorization: Bearer <API_TOKEN>' \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n      \"roles\": [\n            {\n                \"id\": \"<ROLE_ID1>\"\n            },\n            {\n                \"id\": \"<ROLE_ID2>\"\n            }\n        ]\n      }'\n  mermaid\nflowchart LR\naccTitle: DNS lookup process\nA[Browser] -- What is the IP address of www.example.com? --> B((DNS resolver)) -- Where is .com? --> C[(\"Root nameserver\")]\nC --IP of .com nameserver--> B\nB -- Where is example.com?--> D[(.com nameserver)]\nD -- IP of example.com nameserver --> B\nB -- Where is www.example.com? --> E[(example.com nameserver)]\nE -- 93.184.216.34 --> B\nB -- 93.184.216.34 --> A\nmermaid\nflowchart LR\naccTitle: DNS filtering\nA[Browser] --  What is the IP address of www.example.com? --> B\n\nsubgraph ide1 [Cloudflare Gateway]\n    direction TB\n    B(DNS policies)-.->C((DNS resolver))\nend\nC --> D[(Nameservers)]\nmermaid\nflowchart TD\naccTitle: DNS filtering logic\nA[Blocked by DNS policy?] --Yes --> B[Block page is configured?] --Yes--> C[Return IP of block page]\nB--No-->E[Return 0.0.0.0]\nA --No --> D[Return IP of www.example.com]\ntf\n     resource \"cloudflare_zero_trust_gateway_settings\" \"team_name\" {\n       account_id = var.cloudflare_account_id\n       settings = {\n         block_page = {\n           enabled = true //do not use the default Gateway block page\n           mode = \"customized_block_page\" //use a custom block page\n           name = \"Cloudflare\"\n           logo_path = \"https://logos.com/a.png\"\n           header_text = \"--header--\"\n           footer_text = \"--footer--\"\n           mailto_address = \"admin@example.com\"\n           mailto_subject = \"Blocked Request\"\n           background_color = \"#ffffff\"\n           suppress_footer = false\n         }\n       }\n     }\n     sh\ncat /etc/resolv.conf\nsh\nnameserver 172.64.X.X\nnameserver 172.64.X.X\nmermaid\nflowchart LR\naccTitle: Access policies for a private web application\nA[Full-time employee]-->policy1-->D\nB[Contractor]-->policy2-->E\nsubgraph C[Access application]\n  policy1[\"Policy 1:\n  Allow employees\n  who pass device posture checks\"]\n  policy2[\"Policy 2:\n  Allow and isolate contractors\"]\nend\nD[Normal browsing]\nE[\"Isolated browsing\nwith HTTP policies applied\"]\nbash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/access/apps/$APP_UUID/policies \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"decision\": \"allow\",\n    \"name\": \"Allow employees who pass device posture checks\",\n    \"include\": [\n      {\n        \"email_domain\": {\n          \"domain\": \"team.com\"\n        }\n      }\n    ],\n    \"exclude\": [],\n    \"require\": [\n      {\n        \"device_posture\": {\n          \"integration_uid\": \"<SERIAL_NUMBER_LIST_UUID>\"\n        }\n      }\n    ],\n    \"precedence\": 1\n  }'\n  bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/access/apps/$APP_UUID/policies \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"decision\": \"allow\",\n    \"name\": \"Allow and isolate contractors\",\n    \"include\": [\n      {\n        \"email_domain\": {\n          \"domain\": \"team.com\"\n        }\n      },\n      {\n        \"email_domain\": {\n          \"domain\": \"contractors.com\"\n        }\n      }\n    ],\n    \"exclude\": [],\n    \"require\": [],\n    \"precedence\": 2,\n    \"isolation_required\": true\n  }'\n  bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"Disable file downloads in isolated browser\",\n    \"conditions\": [\n      {\n        \"type\": \"traffic\",\n        \"expression\": {\n          \"in\": {\n            \"lhs\": \"http.request.host\",\n            \"rhs\": [\n              \"internal.site.com\"\n            ]\n          }\n        }\n      },\n      {\n        \"type\": \"device_posture\",\n        \"expression\": {\n          \"any\": {\n            \"in\": {\n              \"lhs\": {\n                \"splat\": \"device_posture.checks.passed\"\n              },\n              \"rhs\": [\n                \"<SERIAL_NUMBER_LIST_UUID>\"\n              ]\n            }\n          }\n        }\n      }\n    ],\n    \"action\": \"isolate\",\n    \"precedence\": 14002,\n    \"enabled\": true,\n    \"description\": \"\",\n    \"rule_settings\": {\n      \"block_page_enabled\": false,\n      \"block_reason\": \"\",\n      \"biso_admin_controls\": {\n        \"dcp\": false,\n        \"dcr\": false,\n        \"dd\": true,\n        \"dk\": false,\n        \"dp\": false,\n        \"du\": false\n      }\n    },\n    \"filters\": [\n      \"http\"\n    ]\n  }'\n  bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"Block credit card numbers\",\n    \"conditions\": [\n      {\n        \"type\": \"traffic\",\n        \"expression\": {\n          \"and\": [\n            {\n              \"in\": {\n                \"lhs\": \"http.request.host\",\n                \"rhs\": [\n                  \"internal.site.com\"\n                ]\n              }\n            },\n            {\n              \"any\": {\n                \"in\": {\n                  \"lhs\": {\n                    \"splat\": \"dlp.profiles\"\n                  },\n                  \"rhs\": [\n                    \"<DLP_PROFILE_UUID>\"\n                  ]\n                }\n              }\n            }\n          ]\n        }\n      },\n      {\n        \"type\": \"device_posture\",\n        \"expression\": {\n          \"any\": {\n            \"in\": {\n              \"lhs\": {\n                \"splat\": \"device_posture.checks.passed\"\n              },\n              \"rhs\": [\n                \"<SERIAL_NUMBER_LIST_UUID>\"\n              ]\n            }\n          }\n        }\n      }\n    ],\n    \"action\": \"block\",\n    \"precedence\": 14003,\n    \"enabled\": true,\n    \"description\": \"\",\n    \"rule_settings\": {\n      \"block_page_enabled\": false,\n      \"block_reason\": \"\",\n      \"biso_admin_controls\": null\n    },\n    \"filters\": [\n      \"http\"\n    ]\n  }'\n  html\n   <!doctype html>\n   <html>\n     <body>\n       <h1>Access denied.</h1>\n\n<p>To obtain access, contact your IT administrator.</p>\n     </body>\n   </html>\n   tf\n     resource \"cloudflare_zero_trust_access_identity_provider\" \"microsoft_entra_id\" {\n       account_id = var.cloudflare_account_id\n       name       = \"Entra ID example\"\n       type       = \"azureAD\"\n       config      = {\n         client_id                  = var.entra_id_client_id\n         client_secret              = var.entra_id_client_secret\n         directory_id               = var.entra_id_directory_id\n         support_groups             = true\n         }\n     }\n     terraform\n   resource \"cloudflare_zero_trust_organization\" \"<your-team-name>\" {\n     account_id                         = var.cloudflare_account_id\n     name                               = \"Acme Corporation\"\n     auth_domain                        = \"<your-team-name>.cloudflareaccess.com\"\n   }\n   mermaid\nflowchart LR\naccTitle: Authorization flow with integrated SSO\nA(\"User goes to\napp.public.com\")-->B(\"Cloudflare Tunnel\nroutes public hostname (app.public.com)\nto internal domain (app.internal.com)\")-->C(\"app.internal.com redirects\nto integrated SSO\")-->D(\"SSO ACS URL returns\napp.internal.com\")-->E(\"404 error\nDevice cannot resolve\napp.internal.com\")\nmermaid\nflowchart LR\naccTitle: Authorization flow with updated SSO ACS URL\nA(\"User goes to\napp.public.com\")-->B(\"Cloudflare Tunnel\nroutes public hostname (app.public.com)\nto internal domain (app.internal.com)\")-->C(\"app.internal.com redirects\nto integrated SSO\")-->D(\"SSO ACS URL returns\napp.public.com\")-->E(\"Browser displays app.public.com\")\nsh\n   mkdir cloudflare-tf\n   sh\n   cd cloudflare-tf\n   txt\nterraform {\n  required_providers {\n    cloudflare = {\n      source = \"cloudflare/cloudflare\"\n      version = \"~> 4.0\"\n    }\n  }\n}\n\nprovider \"cloudflare\" {\n  api_token = \"<API-TOKEN>\"\n}\n\nvariable \"account_id\" {\n  default = \"<ACCOUNT-ID>\"\n}\n\nvariable \"zone_id\" {\n  default = \"<ZONE-ID>\"\n}\n\nvariable \"zone_name\" {\n  default = \"mycompany.com\"\n}\n\nvariable \"tunnel_id\" {\n  default = \"<TUNNEL-ID>\"\n}\ntxt\nresource \"cloudflare_tunnel_config\" \"example_config\" {\n  account_id = var.cloudflare_account_id\n  tunnel_id  = var.tunnel_id\n\nconfig {\n    ingress_rule {\n      hostname = \"app.${var.zone_name}\"\n      service  = \"http://localhost:8080\"\n      origin_request {\n        connect_timeout = \"2m0s\"\n        access {\n          required  = true\n          team_name = \"myteam\"\n          aud_tag   = [cloudflare_access_application.example_app.aud]\n        }\n      }\n    }\n    ingress_rule {\n      # Respond with a `404` status code when the request does not match any of the previous hostnames.\n      service  = \"http_status:404\"\n    }\n  }\n}\ntxt\nresource \"cloudflare_access_application\" \"example_app\" {\n  zone_id                   = var.zone_id\n  name                      = \"Example application\"\n  domain                    = \"app.${var.zone_name}\"\n  type                      = \"self_hosted\"\n  session_duration          = \"24h\"\n  auto_redirect_to_identity = false\n}\ntxt\nresource \"cloudflare_access_policy\" \"example_policy\" {\n  application_id    = cloudflare_access_application.example_app.id\n  zone_id           = var.zone_id\n  name              = \"Example policy\"\n  precedence        = \"1\"\n  decision          = \"allow\"\n\ninclude {\n    login_method = [\"<IDP-UUID>\"]\n  }\n\n}\nsh\n   terraform init\n   sh\n   terraform plan\n   sh\n   terraform apply\n   bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/routes\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"nexthop\": \"<IP_NEXT_HOP>\",\n      \"prefix\": \"<YOUR_IP_PREFIX>\",\n      \"priority\": 0,\n      \"id\": \"023e105f4ecef8ad9ca31a8372d0c353\",\n      \"description\": \"<ROUTE_DESCRIPTION>\",\n      \"scope\": {\n          \"colo_names\": [\n              \"den01\"\n          ],\n          \"colo_regions\": [\n              \"APAC\"\n          ]\n      },\n      \"weight\": 0\n    }'\n  json\n  {\n    \"errors\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"messages\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"result\": {\n      \"routes\": [\n        {\n          \"nexthop\": \"203.0.113.1\",\n          \"prefix\": \"192.0.2.0/24\",\n          \"priority\": 0,\n          \"id\": \"023e105f4ecef8ad9ca31a8372d0c353\",\n          \"description\": \"New route for new prefix 203.0.113.1\",\n          \"scope\": {\n            \"colo_names\": [\n              \"den01\"\n            ],\n            \"colo_regions\": [\n              \"APAC\"\n            ]\n          },\n          \"weight\": 0\n        }\n      ]\n    },\n    \"success\": true\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/routes/$ROUTE_ID\" \\\n    --request PUT \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"nexthop\": \"<IP_NEXT_HOP>\",\n      \"prefix\": \"<YOUR_IP_PREFIX>\",\n      \"priority\": 0,\n      \"id\": \"023e105f4ecef8ad9ca31a8372d0c353\",\n      \"description\": \"<ROUTE_DESCRIPTION>\",\n      \"scope\": {\n          \"colo_names\": [\n              \"den01\"\n          ],\n          \"colo_regions\": [\n              \"APAC\"\n          ]\n      },\n      \"weight\": 0\n    }'\n  json\n  {\n    \"errors\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"messages\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"result\": {\n      \"modified\": true,\n      \"modified_route\": {\n        \"nexthop\": \"203.0.113.1\",\n        \"prefix\": \"192.0.2.0/24\",\n        \"priority\": 0,\n        \"id\": \"023e105f4ecef8ad9ca31a8372d0c353\",\n        \"description\": \"New route for new prefix 203.0.113.1\",\n        \"scope\": {\n          \"colo_names\": [\n            \"den01\"\n          ],\n          \"colo_regions\": [\n            \"APAC\"\n          ]\n        },\n        \"weight\": 0\n      }\n    },\n    \"success\": true\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/routes/$ROUTE_ID\" \\\n    --request DELETE \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n  json\n  {\n    \"errors\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"messages\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"result\": {\n      \"deleted\": true,\n      \"deleted_route\": {\n        \"nexthop\": \"203.0.113.1\",\n        \"prefix\": \"192.0.2.0/24\",\n        \"priority\": 0,\n        \"id\": \"023e105f4ecef8ad9ca31a8372d0c353\",\n        \"description\": \"New route for new prefix 203.0.113.1\",\n        \"scope\": {\n          \"colo_names\": [\n            \"den01\"\n          ],\n          \"colo_regions\": [\n            \"APAC\"\n          ]\n        },\n        \"weight\": 0\n      }\n    },\n    \"success\": true\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/gre_tunnels\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"<TUNNEL_NAME>\",\n      \"description\": \"<TUNNEL_DESCRIPTION>\",\n      \"interface_address\": \"<INTERFACE_ADDRESS>\",\n      \"cloudflare_gre_endpoint\": \"<CLOUDFLARE_ENDPOINT>\",\n      \"customer_gre_endpoint\": \"<CUSTOMER_ENDPOINT>\"\n    }'\n  json\n  {\n    \"errors\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"messages\": [\n      {\n        \"code\": 1000,\n        \"message\": \"message\"\n      }\n    ],\n    \"result\": {\n      \"gre_tunnels\": [\n        {\n          \"cloudflare_gre_endpoint\": \"<IP_ADDRESS>\",\n          \"customer_gre_endpoint\": \"<IP_ADDRESS>\",\n          \"interface_address\": \"<INTERFACE_CIDR>\",\n          \"name\": \"<TUNNEL_NAME>\",\n          \"description\": \"<TUNNEL_DESCRIPTION>\",\n          \"health_check\": {\n            \"direction\": \"unidirectional\",\n            \"enabled\": true,\n            \"rate\": \"low\",\n            \"type\": \"reply\"\n          },\n          \"mtu\": 0,\n          \"ttl\": 0\n        }\n      ]\n    },\n    \"success\": true\n  }\n  bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/ipsec_tunnels\" \\\n       --request POST \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n       --json '{\n         \"name\": \"<TUNNEL_NAME>\",\n         \"description\": \"<TUNNEL_DESCRIPTION>\",\n         \"interface_address\": \"<INTERFACE_ADDRESS>\",\n         \"cloudflare_endpoint\": \"<CLOUDFLARE_ENDPOINT>\",\n         \"customer_endpoint\": \"<CUSTOMER_ENDPOINT>\"\n       }'\n     json\n     {\n       \"errors\": [\n         {\n           \"code\": 1000,\n           \"message\": \"message\"\n         }\n       ],\n       \"messages\": [\n         {\n           \"code\": 1000,\n           \"message\": \"message\"\n         }\n       ],\n       \"result\": {\n         \"ipsec_tunnels\": [\n           {\n             \"id\": \"<IPSEC_TUNNEL_ID>\",\n             \"interface_address\": \"<INTERFACE_CIDR>\",\n             \"name\": \"<TUNNEL_NAME>\",\n             \"cloudflare_endpoint\": \"<IP_ADDRESS>\",\n             \"customer_endpoint\": \"<IP_ADDRESS>\",\n             \"description\": \"<TUNNEL_DESCRIPTION>\",\n             \"health_check\": {\n               \"direction\": \"unidirectional\",\n               \"enabled\": true,\n               \"rate\": \"low\",\n               \"type\": \"reply\"\n             },\n             \"psk_metadata\": {},\n             \"replay_protection\": false\n           }\n         ]\n       },\n       \"success\": true\n     }\n     bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/magic/ipsec_tunnels/$IPSEC_TUNNEL_ID/psk_generate\" \\\n       --request POST \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n     json\n     {\n       \"result\": {\n         \"ipsec_id\": \"<IPSEC_ID>\",\n         \"ipsec_tunnel_id\": \"<IPSEC_TUNNEL_ID>\",\n         \"psk\": \"<PSK_CODE>\",\n         \"psk_metadata\": {\n           \"last_generated_on\": \"2025-03-13T14:28:47.054317925Z\"\n         }\n       },\n       \"success\": true,\n       \"errors\": [],\n       \"messages\": []\n     }\n     bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/%7Baccount_id%7D/magic/ipsec_tunnels/%7Bipsec_tunnel_id%7D\" \\\n       --request PUT \\\n       --json '{\n         \"psk\": \"<PSK_VALUE>\"\n       }'\n     json\n  {\n    \"result\": {\n      \"modified\": true,\n      \"modified_ipsec_tunnel\": {\n        \"id\": \"<IPSEC_ID>\",\n        \"interface_address\": \"<IPSEC_CIDR>\",\n        \"created_on\": \"2025-03-13T14:28:21.139535Z\",\n        \"modified_on\": \"2025-03-13T14:33:26.09683Z\",\n        \"name\": \"<TUNNEL_NAME>\",\n        \"cloudflare_endpoint\": \"<IP_ADDRESS>\",\n        \"customer_endpoint\": \"<IP_ADDRESS>\",\n        \"remote_identities\": {\n          \"hex_id\": \"\",\n          \"fqdn_id\": \"\",\n          \"user_id\": \"\"\n        },\n        \"psk_metadata\": {\n          \"last_generated_on\": \"2025-03-13T14:28:47.054318Z\"\n        },\n        \"description\": \"<TUNNEL_DESCRIPTION>\",\n        \"health_check\": {\n          \"enabled\": true,\n          \"target\": \"\",\n          \"type\": \"reply\",\n          \"rate\": \"mid\",\n          \"direction\": \"unidirectional\"\n        }\n      }\n    },\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": []\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/%7Baccount_id%7D/magic/ipsec_tunnels/%7Bipsec_tunnel_id%7D\" \\\n    --request PUT \\\n    --json '{\n      \"health_check\": {\n          \"direction\": \"bidirectional\"\n      }\n    }'\n  json\n  {\n    \"result\": {\n      \"modified\": true,\n      \"modified_ipsec_tunnel\": {\n        \"id\": \"<IPSEC_ID>\",\n        \"interface_address\": \"<IPSEC_CIDR>\",\n        \"created_on\": \"2025-03-13T14:28:21.139535Z\",\n        \"modified_on\": \"2025-03-13T14:33:26.09683Z\",\n        \"name\": \"<TUNNEL_NAME>\",\n        \"cloudflare_endpoint\": \"<IP_ADDRESS>\",\n        \"customer_endpoint\": \"<IP_ADDRESS>\",\n        \"remote_identities\": {\n          \"hex_id\": \"\",\n          \"fqdn_id\": \"\",\n          \"user_id\": \"\"\n        },\n        \"psk_metadata\": {\n          \"last_generated_on\": \"2025-03-13T14:28:47.054318Z\"\n        },\n        \"description\": \"<TUNNEL_DESCRIPTION>\",\n        \"health_check\": {\n          \"enabled\": true,\n          \"target\": \"\",\n          \"type\": \"reply\",\n          \"rate\": \"mid\",\n          \"direction\": \"bidirectional\"\n        }\n      }\n    },\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": []\n  }\n  js\nconst COMPANY_NAME = \"Your Company Inc.\";\nconst APPROVED_TOOL_URL = \"https://chat.yourcompany.com\"; // Your sanctioned AI tool URL\nconst APPROVED_TOOL_NAME = \"Corporate AI Assistant\"; // The user-friendly name of your tool\nconst IT_HELPDESK_EMAIL = \"it-security@yourcompany.com\"; // Email for the \"report a problem\" button\nconst COMPANY_LOGO_URL = \"Your_Logo.svg\"; // A publicly accessible URL for your company logo. Replace with your own.\n\nexport default {\n  async fetch(request) {\n    // 1. Get the blocked URL from the query string passed by Gateway.\n    const url = new URL(request.url);\n    const blockedUrlParam = url.searchParams.get(\"blocked_url\");\n\n// Decode and sanitize the blocked URL for display.\n    let blockedHostname = \"the requested site\";\n    let fullBlockedUrl = \"an unapproved external tool\";\n    if (blockedUrlParam) {\n      try {\n        const decodedUrl = decodeURIComponent(blockedUrlParam);\n        fullBlockedUrl = decodedUrl;\n        blockedHostname = new URL(decodedUrl).hostname;\n      } catch (e) {\n        // If the URL is malformed, use the raw param safely.\n        fullBlockedUrl = blockedUrlParam;\n        blockedHostname = blockedUrlParam;\n      }\n    }\n\n// 2. Prepare the \"Report a problem\" mailto link.\n    const mailtoSubject = `Business Justification for AI Tool: ${blockedHostname}`;\n    const mailtoBody = `Hello IT/Security Team,\n\nI was attempting to access the following website and was redirected to this coaching page:\n${fullBlockedUrl}\n\nMy business justification for needing this specific tool is:\n[**Please describe your business need here**]\n\nThank you,\n[Your Name]`;\n\nconst mailtoLink = `mailto:${IT_HELPDESK_EMAIL}?subject=${encodeURIComponent(mailtoSubject)}&body=${encodeURIComponent(mailtoBody)}`;\n\n// 3. Generate the full HTML page.\n    const html = generateHTML(blockedHostname, mailtoLink);\n\n// 4. Return the HTML as a response.\n    return new Response(html, {\n      headers: {\n        \"Content-Type\": \"text/html;charset=UTF-8\",\n      },\n    });\n  },\n};\n\n/**\n * Generates the full HTML for the coaching page.\n * @param {string} blockedHostname - The hostname of the site the user tried to access.\n * @param {string} mailtoLink - The pre-built mailto link for reporting an issue.\n * @returns {string} - The complete HTML document as a string.\n */\nfunction generateHTML(blockedHostname, mailtoLink) {\n  // Using a template literal for easy-to-read HTML with embedded variables.\n  return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>AI Tool Usage Policy</title>\n<style>\n:root {\n--primary-color: #00529B;\n--secondary-color: #0078D4;\n--background-color: #f4f6f8;\n--text-color: #333;\n--card-bg-color: #ffffff;\n--button-primary-bg: #0078D4;\n--button-primary-hover: #005a9e;\n--button-secondary-bg: #e0e0e0;\n--button-secondary-hover: #c7c7c7;\n--button-text-color: #ffffff;\n--button-secondary-text: #333;\n}\nbody {\nfont-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\nbackground-color: var(--background-color);\ncolor: var(--text-color);\nmargin: 0;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nmin-height: 100vh;\npadding: 20px;\nbox-sizing: border-box;\n}\n.container {\nbackground-color: var(--card-bg-color);\nborder-radius: 8px;\nbox-shadow: 0 4px 12px rgba(0,0,0,0.1);\nmax-width: 600px;\nwidth: 100%;\ntext-align: center;\npadding: 40px;\nborder-top: 5px solid var(--primary-color);\nbox-sizing: border-box;\n}\n.logo {\nmax-width: 150px;\nmargin-bottom: 24px;\n}\nh1 {\ncolor: var(--primary-color);\nfont-size: 24px;\nmargin-bottom: 16px;\n}\np {\nfont-size: 16px;\nline-height: 1.6;\nmargin-bottom: 24px;\n}\n.highlight {\nfont-weight: bold;\ncolor: var(--text-color);\n}\n.button-container {\ndisplay: flex;\nflex-direction: column;\ngap: 12px;\nmargin-top: 32px;\n}\n@media (min-width: 600px) {\n.button-container {\nflex-direction: row;\njustify-content: center;\n}\n}\n.button {\ndisplay: inline-block;\npadding: 12px 24px;\nborder-radius: 5px;\ntext-decoration: none;\nfont-weight: bold;\nfont-size: 16px;\ntransition: background-color 0.2s ease;\ncursor: pointer;\nborder: none;\n}\n.button-primary {\nbackground-color: var(--button-primary-bg);\ncolor: var(--button-text-color);\n}\n.button-primary:hover {\nbackground-color: var(--button-primary-hover);\n}\n.button-secondary {\nbackground-color: var(--button-secondary-bg);\ncolor: var(--button-secondary-text);\n}\n.button-secondary:hover {\nbackground-color: var(--button-secondary-hover);\n}\n</style>\n</head>\n<body>\n<div class=\"container\">\n<img src=\"${COMPANY_LOGO_URL}\" alt=\"${COMPANY_NAME} Logo\" class=\"logo\">\n<h1>Access to this AI Tool is Restricted</h1>\n<p>\nYou were redirected to this page because your attempt to access <span class=\"highlight\">${blockedHostname}</span>\nwas blocked by our company's security policy.\n</p>\n<p>\nTo protect our company's confidential data, intellectual property, and customer information, we must ensure that AI tools are used responsibly. Unapproved tools may pose risks related to data privacy, security, and licensing.\n</p>\n<p>\nWe encourage you to use our officially approved and secure solution, the\n<span class=\"highlight\">${APPROVED_TOOL_NAME}</span>, for your business needs.\n</p>\n<div class=\"button-container\">\n<a href=\"${mailtoLink}\" class=\"button button-secondary\">Report a Problem</a>\n<a href=\"${APPROVED_TOOL_URL}\" class=\"button button-primary\">Use Approved Tool</a>\n</div>\n</div>\n</body>\n</html>\n`;\n}\nmermaid\n    flowchart RL\n      accTitle: Load balancing monitor flow\n      accDescr: Monitors issue health monitor requests, which validate the current status of servers within each pool.\n      Monitor -- Health Monitor ----> Endpoint2\n      Endpoint2 -- Response ----> Monitor\n      subgraph Pool\n      Endpoint1((Endpoint 1))\n      Endpoint2((Endpoint 2))\n      end\nmermaid\n    flowchart LR\n      accTitle: Load balancing flow\n      accDescr: Load balancing involves a load balancer, pools, endpoints, monitors, and health monitors.\n      B[Request 1] --> A\n      C[Request 2] --> A\n      D[Request 3] --> A\n      A[Load balancer] -- Request 1 --> P1\n      A -- Request 2 --> P2\n      A -- Request 3 --> P3\n      subgraph P1 [Pool 1]\n      Endpoint1((Endpoint 1))\n      Endpoint2((Endpoint 2))\n      end\n      subgraph P2 [Pool 2]\n      Endpoint3((Endpoint 3))\n      Endpoint4((Endpoint 4))\n      end\n      subgraph P3 [Pool 3]\n      Endpoint5((Endpoint 5))\n      Endpoint6((Endpoint 6))\n      end\nmermaid\n    flowchart LR\n      accTitle: Pool traffic flow\n      accDescr: When an incoming request reaches a pool, it then goes to an endpoint within the pool.\n    A[Request 1] --Routed by pool--> Endpoint2\n      subgraph P1 [Pool]\n        Endpoint1((Endpoint 1))\n        Endpoint2((Endpoint 2))\n      end\nbash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/load_balancers/monitors\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"type\": \"https\",\n      \"description\": \"Login page monitor\",\n      \"method\": \"GET\",\n      \"path\": \"/health\",\n      \"header\": {\n          \"Host\": [\n              \"example.com\"\n          ],\n          \"X-App-ID\": [\n              \"abc123\"\n          ]\n      },\n      \"port\": 8080,\n      \"timeout\": 3,\n      \"retries\": 0,\n      \"interval\": 90,\n      \"expected_body\": \"alive\",\n      \"expected_codes\": \"2xx\",\n      \"follow_redirects\": true,\n      \"allow_insecure\": true,\n      \"consecutive_up\": 3,\n      \"consecutive_down\": 2,\n      \"probe_zone\": \"example.com\"\n    }'\n  json\n  {\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n      \"id\": \":monitor-id\",\n      \"created_on\": \"2021-01-01T05:20:00.12345Z\",\n      \"modified_on\": \"2021-01-01T05:20:00.12345Z\",\n      \"type\": \"https\",\n      \"description\": \"Login page monitor\",\n      \"method\": \"GET\",\n      \"path\": \"/health\",\n      \"header\": {\n        \"Host\": [\n          \"example.com\"\n        ],\n        \"X-App-ID\": [\n          \"abc123\"\n        ]\n      },\n      \"port\": 8080,\n      \"timeout\": 3,\n      \"retries\": 0,\n      \"interval\": 90,\n      \"expected_body\": \"alive\",\n      \"expected_codes\": \"2xx\",\n      \"follow_redirects\": true,\n      \"allow_insecure\": true,\n      \"consecutive_up\": 3,\n      \"consecutive_down\": 2,\n      \"probe_zone\": \"example.com\"\n    }\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/load_balancers/pools\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"description\": \"Primary data center - Provider XYZ\",\n      \"name\": \"primary-dc-1\",\n      \"enabled\": false,\n      \"load_shedding\": {\n          \"default_percent\": 0,\n          \"default_policy\": \"random\",\n          \"session_percent\": 0,\n          \"session_policy\": \"hash\"\n      },\n      \"minimum_origins\": 2,\n      \"monitor\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n      \"check_regions\": [\n          \"WEU\",\n          \"ENAM\"\n      ],\n      \"origins\": [\n          {\n              \"name\": \"app-server-1\",\n              \"address\": \"0.0.0.0\",\n              \"enabled\": true,\n              \"weight\": 0.56,\n              \"header\": {\n                  \"Host\": [\n                      \"example.com\"\n                  ]\n              }\n          }\n      ],\n      \"origin_steering\": {\n          \"policy\": \"random\"\n      },\n      \"notification_filter\": {\n          \"origin\": {\n              \"disable\": false,\n              \"healthy\": null\n          },\n          \"pool\": {\n              \"disable\": false,\n              \"healthy\": null\n          }\n      }\n    }'\n  json\n  {\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n      \"id\": \"17b5962d775c646f3f9725cbc7a53df4\",\n      \"created_on\": \"2021-01-01T05:20:00.12345Z\",\n      \"modified_on\": \"2021-01-01T05:20:00.12345Z\",\n      \"description\": \"Primary data center - Provider XYZ\",\n      \"name\": \"primary-dc-1\",\n      \"enabled\": false,\n      \"load_shedding\": {\n        \"default_percent\": 0,\n        \"default_policy\": \"random\",\n        \"session_percent\": 0,\n        \"session_policy\": \"hash\"\n      },\n      \"minimum_origins\": 2,\n      \"monitor\": \"f1aba936b94213e5b8dca0c0dbf1f9cc\",\n      \"check_regions\": [\n        \"WEU\",\n        \"ENAM\"\n      ],\n      \"origins\": [\n        {\n          \"name\": \"app-server-1\",\n          \"address\": \"0.0.0.0\",\n          \"enabled\": true,\n          \"weight\": 0.56,\n          \"header\": {\n            \"Host\": [\n              \"example.com\"\n            ]\n          }\n        }\n      ],\n      \"origin_steering\": {\n        \"policy\": \"random\"\n      },\n      \"notification_filter\": {\n        \"origin\": {\n          \"disable\": false,\n          \"healthy\": null\n        },\n        \"pool\": {\n          \"disable\": false,\n          \"healthy\": null\n        }\n      }\n    }\n  }\n  json\n  \"alert_type\": \"load_balancing_health_alert\",\n  \"filters\": {\n    \"pool_id\": <<ARRAY_OF_INCLUDED_POOL_IDS>>,\n    \"new_health\": <<ARRAY_OF_STATUS_TRIGGERS>> [\"Unhealthy\", \"Healthy\"],\n    \"event_source\": <<ARRAY_OF_OBJECTS_WATCHED>> [\"pool\", \"origin\"]\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/load_balancers\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"description\": \"Load Balancer for lb.example.com\",\n      \"name\": \"lb.example.com\",\n      \"enabled\": true,\n      \"ttl\": 30,\n      \"fallback_pool\": \"17b5962d775c646f3f9725cbc7a53df4\",\n      \"default_pools\": [\n          \"17b5962d775c646f3f9725cbc7a53df4\",\n          \"9290f38c5d07c2e2f4df57b1f61d4196\",\n          \"00920f38ce07c2e2f4df50b1f61d4194\"\n      ],\n      \"proxied\": true,\n      \"steering_policy\": \"random_steering\",\n      \"session_affinity\": \"cookie\",\n      \"session_affinity_attributes\": {\n          \"samesite\": \"Auto\",\n          \"secure\": \"Auto\",\n          \"drain_duration\": 100,\n          \"zero_downtime_failover\": \"sticky\"\n      },\n      \"session_affinity_ttl\": 5000,\n      \"adaptive_routing\": {\n          \"failover_across_pools\": true\n      },\n      \"location_strategy\": {\n          \"prefer_ecs\": \"always\",\n          \"mode\": \"resolver_ip\"\n      },\n      \"random_steering\": {\n          \"pool_weights\": {\n              \"de90f38ced07c2e2f4df50b1f61d4194\": 0.3,\n              \"9290f38c5d07c2e2f4df57b1f61d4196\": 0.5\n          },\n          \"default_weight\": 0.2\n      }\n    }'\n  json\n  {\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": [],\n    \"result\": {\n      \"id\": \"699d98642c564d2e855e9661899b7252\",\n      \"created_on\": \"2021-01-01T05:20:00.12345Z\",\n      \"modified_on\": \"2021-01-01T05:20:00.12345Z\",\n      \"description\": \"Load Balancer for lb.example.com\",\n      \"name\": \"lb.example.com\",\n      \"enabled\": true,\n      \"ttl\": 30,\n      \"fallback_pool\": \"17b5962d775c646f3f9725cbc7a53df4\",\n      \"default_pools\": [\n        \"17b5962d775c646f3f9725cbc7a53df4\",\n        \"9290f38c5d07c2e2f4df57b1f61d4196\",\n        \"00920f38ce07c2e2f4df50b1f61d4194\"\n      ],\n      \"proxied\": true,\n      \"steering_policy\": \"random_steering\",\n      \"session_affinity\": \"cookie\",\n      \"session_affinity_attributes\": {\n        \"samesite\": \"Auto\",\n        \"secure\": \"Auto\",\n        \"drain_duration\": 100,\n        \"zero_downtime_failover\": \"sticky\"\n      },\n      \"session_affinity_ttl\": 5000,\n      \"random_steering\": {\n        \"pool_weights\": {\n          \"de90f38ced07c2e2f4df50b1f61d4194\": 0.3,\n          \"9290f38c5d07c2e2f4df57b1f61d4196\": 0.5\n        },\n        \"default_weight\": 0.2\n      }\n    }\n  }\n  txt\n% of traffic to endpoint = endpoint weight  sum of all weights in the pool\nmermaid\n    flowchart RL\n      accTitle: Load balancing monitor flow\n      accDescr: Monitors issue health monitor requests, which validate the current status of servers within each pool.\n      Monitor -- Health Monitor ----> Endpoint2\n      Endpoint2 -- Response ----> Monitor\n      subgraph Pool\n      Endpoint1((Endpoint 1))\n      Endpoint2((Endpoint 2))\n      end\nmermaid\n    flowchart LR\n      accTitle: Session affinity process\n      accDescr: Session affinity directs requests from the same client to the same server.\n     A[Client] --Request--> B{<code>__cflb</code> cookie set?}\n     B -->|Yes| C[Route to previous endpoint]\n     C --> O2\n     B ---->|No| E[Follow normal routing]\n     E --> O2\n     E --Set <code>__cflb</code> cookie--> A\n     subgraph P1 [Pool 1]\n        O1[Endpoint 1]\n        O2[Endpoint 2]\n     end\ntext\n(cf.tls_client_auth.cert_revoked)\ntxt\n(not cf.tls_client_auth.cert_verified) or cf.tls_client_auth.cert_revoked\ntxt\n(http.host in {\"mtls.example.com\" \"mtls2.example.com\"} and (not cf.tls_client_auth.cert_verified or cf.tls_client_auth.cert_revoked))\ntxt\n(http.request.uri.path in {\"/headers\"} and http.host in {\"mtls.example.com\" \"mtls2.example.com\"} and not cf.tls_client_auth.cert_verified and cf.tls_client_auth.cert_fingerprint_sha256 ne \"ADD_STRING_OF_CLIENT_CERT_SHA256_FINGERPRINT\")\ntxt\n(http.host in {\"mtls.example.com\" \"mtls2.example.com\"} and cf.tls_client_auth.cert_serial ne \"ADD_STRING_OF_CLIENT_CERT_SERIAL\")\ntxt\n(http.host in {\"mtls.example.com\" \"mtls2.example.com\"} and cf.tls_client_auth.cert_verified)\n\nWith the same characteristics...\n\"Header value of\": \"Cf-Client-Cert-Sha256\"\nmermaid\n        flowchart LR\n        accTitle: Connections without Cloudflare\n        A[Visitor] <-- Connection --> B[Origin server]\nmermaid\n        flowchart LR\n        accTitle: Connections with Cloudflare\n        A[Visitor] <-- Connection --> B[Cloudflare global network] <-- Connection --> C[Origin server]\nmermaid\nsequenceDiagram;\n    participant User;\n    participant Website;\n    participant Server;\n    participant Botnet;\n    User->>Website: Requests to access site\n    Website->>Origin Server: Processes user requests\n    Botnet->>Origin Server: Sends a flood of traffic\n    Origin Server-->>Website: Slows down due to traffic overload\n    Origin Server-->>User: Unable to respond to user requests\nmermaid\nflowchart TD;\n    A[Malicious device]-->|Request to application|CDN;\n    CDN -->|Sends remaining requests|Origin;\n    subgraph CDN\n        WAF\n        Cache\n    end\n    A --Prevent external connections---x Origin\nmermaid\nflowchart TD;\n    User-->|Sends Request|Cloudflare;\n    Cloudflare-->B>Has cached content?];\n    B-->|Yes - Requested content|User;\n    B-->|No|Origin;\n    Origin-->|Requested content|User;\nmermaid\nflowchart TD;\n    User-->|Sends Request|WAF;\n    WAF-->|Filters Request|Application;\n    Application-->|Sends Request|OriginServer;\n    OriginServer-->|Serves Content|Application;\n    Application-->|Serves Content|User;\nmermaid\nsequenceDiagram\n  participant Client\n  participant DDoS_Protection_Service\n  participant Origin_Server\n\nClient->>+DDoS_Protection_Service: Request\n  Note right of DDoS_Protection_Service: Filtered traffic\n  DDoS_Protection_Service->>+Origin_Server: Request\n  Origin_Server-->>-DDoS_Protection_Service: Response\n  DDoS_Protection_Service-->>Client: Response\n\nClient->>+Origin_Server: Direct connection\n  Note over Origin_Server: Potential DDoS Attack\n  Origin_Server-->>-Client: Error response\ntf\n     resource \"cloudflare_zero_trust_gateway_policy\" \"dns_block_security_categories\" {\n       name        = \"Block DNS Security Categories\"\n       enabled     = true\n       account_id  = var.cloudflare_account_id\n       description = \"Managed by Terraform - Generic security policy based on Cloudflare Threat Intelligence categories.\"\n       precedence  = 101\n       action      = \"block\"\n       filters     = [\"dns\"]\n       /* Categories being enabled here:\n         - 80:  \"Command and Control & Botnet\"\n         - 83:  \"Cryptomining\"\n         - 117: \"Malware\"\n         - 131: \"Phishing\"\n         - 153: \"Spyware\"\n         - 175: \"DNS Tunneling\"\n         - 176: \"DGA Domains\"\n         - 178: \"Brand Embedding\"\n       */\n       traffic = \"any(dns.security_category[*] in {80 83 117 131 153 175 176 178})\"\n       identity = \"\"\n\nrule_settings = {\n         block_page_enabled = true\n         block_reason  = \"This domain has been flagged as a potential security risk.\" // Adds an additional message to the custom block page. Requires enabling custom block page in cloudflare_zero_trust_gateway_settings.\n       }\n     }\n     tf\n     resource \"cloudflare_zero_trust_gateway_settings\" \"team_name\" {\n       account_id = var.cloudflare_account_id\n       settings = {\n         block_page = {\n           enabled = true //do not use the default Gateway block page\n           mode = \"customized_block_page\" //use a custom block page\n           name = \"Cloudflare\"\n           logo_path = \"https://logos.com/a.png\"\n           header_text = \"--header--\"\n           footer_text = \"--footer--\"\n           mailto_address = \"admin@example.com\"\n           mailto_subject = \"Blocked Request\"\n           background_color = \"#ffffff\"\n           suppress_footer = false\n         }\n       }\n     }\n     csv\nvalue,description\n192.0.2.0/24,This is an IP address range in CIDR format\n198.51.100.0/24,This is also an IP address range\n203.0.113.0/24,This is the third IP address range\ntf\n     locals {\n       ip_list = csvdecode(file(\"${path.module}/list-test.csv\"))\n     }\n     tf\n     resource \"cloudflare_zero_trust_list\" \"ips_from_csv\" {\n       account_id  = var.cloudflare_account_id\n       name        = \"IPs imported from CSV\"\n       description = \"Managed by Terraform\"\n       type        = \"IP\"\n       items       = local.ip_list\n     }\n     bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/lists\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"description\": \"Private application IPs\",\n      \"items\": [\n          {\n              \"value\": \"10.226.0.177/32\"\n          },\n          {\n              \"value\": \"10.226.1.177/32\"\n          }\n      ],\n      \"name\": \"Corporate IP list\",\n      \"type\": \"IP\"\n    }'\n  tf\n     resource \"cloudflare_zero_trust_list\" \"wiki_IPs\" {\n       account_id  = var.cloudflare_account_id\n       name        = \"Company Wiki IP addresses\"\n       description = \"Managed by Terraform\"\n       type        = \"IP\"\n       items = [\n         {\n           description = \"Example IP address range\"\n           value = \"192.0.2.0/24\",\n         },\n         {\n           value = \"198.51.100.0/24\"\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_list\" \"wiki_domains\" {\n       account_id  = var.cloudflare_account_id\n       name        = \"Company Wiki Domains\"\n       description = \"Managed by Terraform\"\n       type        = \"DOMAIN\"\n       items = [\n         {\n           value = \"wiki.example.com\"\n         },\n         {\n           value = \"wiki2.example.com\"\n         }]\n     }\n     bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"Company Wiki DNS policy\",\n    \"conditions\": [\n      {\n        \"type\": \"traffic\",\n        \"expression\": {\n          \"any\": {\n            \"in\": {\n              \"lhs\": {\n                \"splat\": \"dns.domains\"\n              },\n              \"rhs\": \"$<DOMAIN_LIST_ID>\"\n            }\n          }\n        }\n      },\n      {\n        \"type\": \"identity\",\n        \"expression\": {\n          \"matches\": {\n            \"lhs\": \"identity.email\",\n            \"rhs\": \".*@example.com\"\n          }\n        }\n      }\n    ],\n    \"action\": \"allow\",\n    \"precedence\": 13002,\n    \"enabled\": true,\n    \"description\": \"Allow employees to access company wiki domains.\",\n    \"filters\": [\n      \"dns\"\n    ]\n  }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_allow_wiki_domains\" {\n    name        = \"Company Wiki DNS policy\"\n    enabled     = true\n    account_id  = var.cloudflare_account_id\n    description = \"Managed by Terraform - Allow employees to access company wiki domains.\"\n    precedence  = 102\n    action      = \"allow\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.wiki_domains.id})\"\n    identity    = \"identity.email matches \\\".*@example.com\\\"\"\n  }\n  bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"Company Wiki network policy\",\n    \"conditions\": [\n      {\n        \"type\": \"traffic\",\n        \"expression\": {\n          \"in\": {\n            \"lhs\": \"net.dst.ip\",\n            \"rhs\": \"$<IP_LIST_ID>\"\n          }\n        }\n      },\n      {\n        \"type\": \"identity\",\n        \"expression\": {\n          \"matches\": {\n            \"lhs\": \"identity.email\",\n            \"rhs\": \".*@example.com\"\n          }\n        }\n      }\n    ],\n    \"action\": \"allow\",\n    \"precedence\": 13002,\n    \"enabled\": true,\n    \"description\": \"Allow employees to access company wiki IPs.\",\n    \"filters\": [\n      \"l4\"\n    ]\n  }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"network_allow_wiki_IPs\" {\n    name        = \"Company Wiki Network policy\"\n    enabled     = true\n    account_id  = var.cloudflare_account_id\n    description = \"Managed by Terraform - Allow employees to access company wiki IPs.\"\n    precedence  = 103\n    action      = \"allow\"\n    filters     = [\"l4\"]\n    traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.wiki_IPs.id}\"\n    identity    = \"identity.email matches \\\".*@example.com\\\"\"\n  }\n  bash\n  curl https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"name\": \"Catch-all block policy\",\n    \"conditions\": [\n      {\n        \"type\": \"traffic\",\n        \"expression\": {\n          \"or\": [\n            {\n              \"in\": {\n                \"lhs\": \"net.dst.ip\",\n                \"rhs\": \"$<IP_LIST_ID>\"\n              }\n            },\n            {\n              \"any\": {\n                \"in\": {\n                  \"lhs\": {\n                    \"splat\": \"net.sni.domains\"\n                  },\n                  \"rhs\": \"$<DOMAIN_LIST_ID>\"\n                }\n              }\n            }\n          ]\n        }\n      }\n    ],\n    \"action\": \"block\",\n    \"precedence\": 14002,\n    \"enabled\": true,\n    \"description\": \"Block access to private network.\",\n    \"filters\": [\n      \"l4\"\n    ]\n  }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"network_catch_all\" {\n    name        = \"Catch-all block policy\"\n    enabled     = true\n    account_id  = var.cloudflare_account_id\n    description = \"Managed by Terraform - Block access to private network.\"\n    precedence  = 14002\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.private_IPs.id} or any(net.sni.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.private_domains.id})\"\n  }\n  tf\n     resource \"cloudflare_zero_trust_gateway_policy\" \"network_allow_wiki_IPs\" {\n       name        = \"Company Wiki Network policy\"\n       enabled     = true\n       account_id  = var.cloudflare_account_id\n       description = \"Managed by Terraform - Allow employees to access company wiki IPs.\"\n       precedence  = 103\n       action      = \"allow\"\n       filters     = [\"l4\"]\n       traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.wiki_IPs.id}\"\n       identity    = \"identity.email matches \\\".*@example.com\\\"\"\n\nrule_settings = {\n         check_session = {\n           enforce = true\n           duration = \"1h30m0s\"\n         }\n       }\n     }\n     mermaid\nflowchart LR\naccTitle: How a VPN works\nsubgraph Device\nA(VPN client)\nend\nA<--Encrypted VPN tunnel-->B(VPN server)<-->C((Internet))\ntf\n     resource \"cloudflare_zero_trust_access_policy\" \"allow_company_emails\" {\n       account_id   = var.cloudflare_account_id\n       name         = \"Allow company emails\"\n       decision     = \"allow\"\n       include      = [\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_application\" \"device_enrollment\" {\n       account_id       = var.cloudflare_account_id\n       type             = \"warp\"\n       name             = \"Warp device enrollment\"\n       allowed_idps              = [cloudflare_zero_trust_access_identity_provider.microsoft_entra_id.id]\n       auto_redirect_to_identity = true\n       app_launcher_visible      = false\n       policies = [\n         {\n           id = cloudflare_zero_trust_access_policy.allow_company_emails.id\n           precedence = 1\n         }\n       ]\n     }\n     txt\n     -----BEGIN CERTIFICATE-----\n     <intermediate.pem>\n     -----END CERTIFICATE-----\n     -----BEGIN CERTIFICATE-----\n     <rootCA.pem>\n     -----END CERTIFICATE-----\n     tf\n     resource \"cloudflare_zero_trust_access_mtls_certificate\" \"example_mtls_cert\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"WARP enrollment mTLS cert\"\n       certificate    = <<EOT\n       -----BEGIN CERTIFICATE-----\n       xxxx\n       xxxx\n       -----END CERTIFICATE-----\n       EOT\n       associated_hostnames = [\"your-team-name.cloudflareaccess.com\"]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_policy\" \"warp_enrollment_mtls\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"Allow employees with mTLS cert\"\n       decision       = \"allow\"\n       include = [\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n\nrequire = [\n         {\n           common_name = {\n             common_name = \"Common name 1\"\n           }\n         },\n             {\n           common_name = {\n             common_name = \"Common name 2\"\n           }\n         }\n       ]\n     }\n     bash\n  curl --request PATCH \\\n  https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/devices/policy \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"allow_mode_switch\": false,\n    \"allow_updates\": false,\n    \"allowed_to_leave\": false,\n    \"auto_connect\": 900,\n    \"captive_portal\": 180,\n    \"disable_auto_fallback\": true,\n    \"exclude_office_ips\": false,\n    \"service_mode_v2\": {\n      \"mode\": \"warp\"\n    },\n    \"support_url\": \"https://it.company.com/help\",\n    \"switch_locked\": true\n  }'\n  bash\n  curl --request PUT \\\n  https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/devices/settings \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"disable_for_time\": 3600,\n    \"root_certificate_installation_enabled\": true\n  }'\n  tf\n     resource \"cloudflare_zero_trust_device_default_profile\" \"default_profile\" {\n       account_id            = var.cloudflare_account_id\n       allow_mode_switch     = false\n       allow_updates         = false\n       allowed_to_leave      = false\n       auto_connect          = 600\n       captive_portal        = 180\n       disable_auto_fallback = true\n       exclude_office_ips    = false\n       service_mode_v2       = {mode = \"warp\"}\n       support_url           = \"https://support.example.com\"\n       switch_locked         = true\n       tunnel_protocol       = \"wireguard\"\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_settings\" \"global_warp_settings\" {\n       account_id            = var.cloudflare_account_id\n       disable_for_time      = 3600\n       root_certificate_installation_enabled = true\n       use_zt_virtual_ip     = false\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_settings \"global_warp_settings\" {\n       account_id            = var.cloudflare_account_id\n       gateway_proxy_enabled = true\n       gateway_udp_proxy_enabled = true\n     }\n     tf\n     resource \"cloudflare_zero_trust_gateway_settings\" \"team_name\" {\n       account_id = var.cloudflare_account_id\n       settings = {\n         tls_decrypt = {\n           enabled = true\n         }\n       }\n     }\n     tf\n     locals {\n       default_local_domains = [\n         # Default Local Domain Fallback entries recommended by Cloudflare\n         {\n       suffix = \"corp\"\n     },\n     {\n       suffix = \"domain\"\n     },\n     {\n       suffix = \"home\"\n     },\n     {\n       suffix = \"home.arpa\"\n     },\n     {\n       suffix = \"host\"\n     },\n     {\n       suffix = \"internal\"\n     },\n     {\n       suffix = \"intranet\"\n     },\n     {\n       suffix = \"invalid\"\n     },\n     {\n       suffix = \"lan\"\n     },\n     {\n       suffix = \"local\"\n     },\n     {\n       suffix = \"localdomain\"\n     },\n     {\n       suffix = \"localhost\"\n     },\n     {\n       suffix = \"private\"\n     },\n     {\n       suffix = \"test\"\n     }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile_local_domain_fallback\" \"example\" {\n       account_id = var.cloudflare_account_id\n       policy_id  = cloudflare_zero_trust_device_custom_profile.example.id\n       domains = concat(\n         # Global entries\n         local.default_local_domains,\n\n# Profile-specific entries\n         [\n           {\n           suffix = \"example.com\"\n           description = \"Domain for local development\"\n           dns_server = [\"1.1.1.1\", \"192.168.0.1\"]\n           }\n         ]\n       )\n     }\n     tf\n     resource \"cloudflare_zero_trust_gateway_policy\" \"resolver_policy\" {\n       name        = \"Example resolver policy\"\n       enabled     = true\n       account_id  = var.cloudflare_account_id\n       description = \"TERRAFORM MANAGED resolver policy\"\n       action      = \"resolve\"\n       traffic     = \"dns.fqdn in {\\\"internal.example.com\\\"}\"\n       identity    = \"identity.email in {\\\"jdoe@example.com\\\"}\"\n       precedence  = 1\n       rule_settings = {\n           dns_resolvers = {\n           # You can add up to 10 IPv4 and 10 IPv6 addresses to a policy.\n             ipv4 = [{\n               ip = \"192.0.2.24\"\n               port = 53\n               route_through_private_network = true\n               vnet_id = cloudflare_zero_trust_tunnel_cloudflared_virtual_network.staging_vnet.id\n             }]\n             ipv6 = [{\n               ip = \"2001:DB8::\"\n               port = 53\n               route_through_private_network = true\n               vnet_id = cloudflare_zero_trust_tunnel_cloudflared_virtual_network.staging_vnet.id\n             }]\n           }\n       }\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"exclude_example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Custom profile in Split Tunnels Exclude mode\"\n       enabled               = true\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       match                 =  \"identity.email == \\\"test@cloudflare.com\\\"\"\n\nexclude = [{\n           address = \"10.0.0.0/8\"\n           description = \"Example route to exclude from WARP tunnel\"\n       }]\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"include_example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Custom profile in Split Tunnels Include mode\"\n       enabled               = true\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       match                 =  \"identity.email == \\\"test@cloudflare.com\\\"\"\n\ninclude = [{\n           address = \"10.0.0.0/8\"\n           description = \"Example route to include in WARP tunnel\"\n       }]\n     }\n     tf\n     locals {\n       global_exclude_list = [\n         # Default Split Tunnel entries recommended by Cloudflare\n         {\n           address     = \"ff05::/16\"\n         },\n         {\n           address     = \"ff04::/16\"\n         },\n         {\n           address     = \"ff03::/16\"\n         },\n         {\n           address     = \"ff02::/16\"\n         },\n         {\n           address     = \"ff01::/16\"\n         },\n         {\n           address     = \"fe80::/10\"\n           description = \"IPv6 Link Local\"\n         },\n         {\n           address     = \"fd00::/8\"\n         },\n         {\n           address     = \"255.255.255.255/32\"\n           description = \"DHCP Broadcast\"\n         },\n         {\n           address     = \"240.0.0.0/4\"\n         },\n         {\n           address     = \"224.0.0.0/24\"\n         },\n         {\n           address     = \"192.168.0.0/16\"\n         },\n         {\n           address     = \"192.0.0.0/24\"\n         },\n         {\n           address     = \"172.16.0.0/12\"\n         },\n         {\n           address     = \"169.254.0.0/16\"\n           description = \"DHCP Unspecified\"\n         },\n         {\n           address     = \"100.64.0.0/10\"\n         },\n         {\n           address     = \"10.0.0.0/8\"\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Example custom profile with split tunnels\"\n       enabled               = true\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       match                 =  \"identity.email == \\\"test@cloudflare.com\\\"\"\n\nexclude = concat(\n         # Global entries\n         local.global_exclude_list,\n\n# Profile-specific entries\n         [\n           {\n             address = \"192.0.2.0/24\"\n             description = \"Example IP to exclude from WARP\"\n           },\n           {\n             host = \"example.com\"\n             description = \"Example domain to exclude from WARP\"\n           }\n         ]\n       )\n     }\n     xml\n<dict>\n  <key>organization</key>\n  <string>your-team-name</string>\n  <key>onboarding</key>\n  <false/>\n</dict>\ntf\n     resource \"cloudflare_zero_trust_tunnel_cloudflared\" \"example_tunnel\" {\n       account_id = var.cloudflare_account_id\n       name       = \"Example tunnel\"\n       config_src = \"cloudflare\"\n     }\n     tf\n     resource \"cloudflare_zero_trust_tunnel_cloudflared_route\" \"example_tunnel_route\" {\n       account_id         = var.cloudflare_account_id\n       tunnel_id          = cloudflare_zero_trust_tunnel_cloudflared.example_tunnel.id\n       network            = \"10.0.0.0/8\"\n       comment            = \"Example tunnel route\"\n     }\n     tf\n     data \"cloudflare_zero_trust_tunnel_cloudflared_token\" \"tunnel_token\" {\n       account_id = var.cloudflare_account_id\n       tunnel_id = cloudflare_zero_trust_tunnel_cloudflared.example_tunnel.id\n     }\n     tf\n        output \"tunnel_token\" {\n          value       = data.cloudflare_zero_trust_tunnel_cloudflared_token.tunnel_token.token\n          sensitive   = true\n        }\n        sh\n        terraform apply\n        sh\n        terraform output -raw tunnel_token\n        sh\n        eyJhIj...\n        tf\n     resource \"vault_generic_secret\" \"tunnel_token\" {\n       path         = \"kv/cloudflare/tunnel_token\"\n\ndata_json = jsonencode({\n         \"TUNNEL_TOKEN\" = data.cloudflare_zero_trust_tunnel_cloudflared_token.tunnel_token.token\n       })\n     }\n     sh\n          sudo cloudflared service install <TUNNEL_TOKEN>\n          txt\n          cloudflared.exe service install <TUNNEL_TOKEN>\n          sh\n          sudo cloudflared service install <TUNNEL_TOKEN>\n          sh\n          docker run cloudflare/cloudflared:latest tunnel --no-autoupdate run --token <TUNNEL_TOKEN>\n          sh\n     sudo cloudflared service install <TUNNEL_TOKEN>\n     txt\n     cloudflared.exe service install <TUNNEL_TOKEN>\n     sh\n     sudo cloudflared service install <TUNNEL_TOKEN>\n     sh\n     docker run cloudflare/cloudflared:latest tunnel --no-autoupdate run --token <TUNNEL_TOKEN>\n     mermaid\nflowchart TB\naccTitle: Figure 1: Multiple replicas of a tunnel that proxies all private networks.\nsubgraph replica1[my-tunnel]\n  ip1[10.0.0.0/8 </br> 172.0.0.0/8 </br> 192.0.0.0/8]\nend\nsubgraph replica2[my-tunnel]\n  ip2[10.0.0.0/8 </br> 172.0.0.0/8 </br> 192.0.0.0/8]\nend\nsubgraph replica3[my-tunnel]\n  ip3[10.0.0.0/8 </br> 172.0.0.0/8 </br> 192.0.0.0/8]\nend\nreplica1 <--> C((Cloudflare))\nreplica2 <--> C\nreplica3 <--> C\nmermaid\nflowchart TB\naccTitle: Figure 2: Multiple tunnels proxying different private networks.\nsubgraph tunnel-1\n  ip1[10.0.0.0/8]\nend\nsubgraph tunnel-2\n  ip2[172.0.0.0/8]\nend\nsubgraph tunnel-3\n  ip3[192.0.0.0/8]\nend\ntunnel-1 <--> C((Cloudflare))\ntunnel-2 <--> C\ntunnel-3 <--> C\ntf\n     resource \"cloudflare_zero_trust_access_identity_provider\" \"microsoft_entra_id\" {\n       account_id = var.cloudflare_account_id\n       name       = \"Entra ID example\"\n       type       = \"azureAD\"\n       config      = {\n         client_id                  = var.entra_id_client_id\n         client_secret              = var.entra_id_client_secret\n         directory_id               = var.entra_id_directory_id\n         support_groups             = true\n         }\n     }\n     terraform\n   resource \"cloudflare_zero_trust_organization\" \"<your-team-name>\" {\n     account_id                         = var.cloudflare_account_id\n     name                               = \"Acme Corporation\"\n     auth_domain                        = \"<your-team-name>.cloudflareaccess.com\"\n   }\n   sh\n  telnet test.example.com 443\n  powershell\n  PS C:\\Users\\JohnDoe> Test-NetConnection test.example.com -port 443\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-CorporateDomain-AllowList\",\n      \"description\": \"Allow access to the corporate domains defined under the Corporate Domains list\",\n      \"precedence\": 1,\n      \"enabled\": true,\n      \"action\": \"allow\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.domains[*] in $<CORPORATE_DOMAINS_LIST_UUID>)\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"allow_corporate_domain_access\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-CorporateDomain-AllowList\"\n    description = \"Allow access to the corporate domains defined under the Corporate Domains list\"\n    precedence  = 1\n    enabled     = false\n    action      = \"allow\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.domains[*] in $<Corporate Domains List UUID>)\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-SecurityCategories-Blocklist\",\n      \"description\": \"Block known security risks based on Cloudflare'\\''s threat intelligence\",\n      \"precedence\": 0,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\",\n      \"rule_settings\": {\n          \"block_page_enabled\": true,\n          \"block_reason\": \"This domain was blocked due to being classified as a security risk to your organization\"\n      }\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"security_risks_dns_policy\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-SecurityCategories-Blocklist\"\n    description = \"Block known security risks based on Cloudflare's threat intelligence\"\n    precedence  = 0\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\"\n    rule_settings {\n        block_page_enabled = true\n        block_page_reason = \"This domain was blocked due to being classified as a security risk to your organization\"\n      }\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-Domain-Allowlist\",\n      \"description\": \"Allowlist any known domains and hostnames\",\n      \"precedence\": 0,\n      \"enabled\": true,\n      \"action\": \"allow\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.domains[*] in $<KNOWN_DOMAINS_LIST_UUID>) or dns.fqdn in $<KNOWN_DOMAINS_LIST_UUID>\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_whitelist_policy\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-Domain-Allowlist\"\n    description = \"Allowlist any known domains and hostnames\"\n    precedence  = 0\n    enabled     = true\n    action      = \"allow\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.domain_whitelist.id}) or dns.fqdn in ${\"$\"}${cloudflare_zero_trust_list.domain_whitelist.id}\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Quarantined-Users-DNS-Restricted-Access\",\n      \"description\": \"Restrict access for users included in an identity provider (IdP) user group for risky users\",\n      \"precedence\": 10,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"not(any(dns.domains[] in $<ALLOWED_REMEDIATION_DOMAINS_LIST_UUID>)) or not(any(dns.domains[] in $<ALLOWED_REMEDIATION_DOMAINS_LIST_UUID>))\",\n      \"identity\": \"any(identity.groups.name[*] in {\\\"Quarantined Users\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_restrict_quarantined_users\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"Quarantined-Users-DNS-Restricted-Access\"\n    description = \"Restrict access for users included in an identity provider (IdP) user group for risky users\"\n    precedence  = 10\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"not(any(dns.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.allowed_remediation_domains.id})) or not(any(dns.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.allowed_remediation_domains.id}))\"\n    identity    =  \"any(identity.groups.name[*] in {\\\"Quarantined Users\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-SecurityCategories-Blocklist\",\n      \"description\": \"Block security categories based on Cloudflare'\\''s threat intelligence\",\n      \"precedence\": 20,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\",\n      \"identity\": \"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"block_security_threats\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-SecurityCategories-Blocklist\"\n    description = \"Block security categories based on Cloudflare's threat intelligence\"\n    precedence  = 20\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-ContentCategories-Blocklist\",\n      \"description\": \"Block common content categories that may pose a risk\",\n      \"precedence\": 30,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.content_category[*] in {17 85 87 102 157 135 138 180 162 32 169 177 128 15 115 119 124 141 161})\",\n      \"identity\": \"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"block_content_categories\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-ContentCategories-Blocklist\"\n    description = \"Block common content categories that may pose a risk\"\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.content_category[*] in {17 85 87 102 157 135 138 180 162 32 169 177 128 15 115 119 124 141 161})\"\n    identity    = \"\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-Application-Blocklist\",\n      \"description\": \"Block access to unauthorized AI applications\",\n      \"precedence\": 40,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(app.type.ids[*] in {25})\",\n      \"identity\": \"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"block_unauthorized_apps\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-Application-Blocklist\"\n    description = \"Block access to unauthorized AI applications\"\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(app.type.ids[*] in {25})\"\n    identity    = \"\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-GeoCountryIP-Blocklist\",\n      \"description\": \"Block traffic hosted in countries categorized as high security risks\",\n      \"precedence\": 50,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.dst.geo.country[*] in {\\\"AF\\\" \\\"BY\\\" \\\"CD\\\" \\\"CU\\\" \\\"IR\\\" \\\"IQ\\\" \\\"KP\\\" \\\"MM\\\" \\\"RU\\\" \\\"SD\\\" \\\"SY\\\" \\\"UA\\\" \\\"ZW\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_geolocation_block_policy\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-GeoCountryIP-Blocklist\"\n    description = \"Block traffic hosted in countries categorized as high security risks\"\n    precedence  = 50\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.dst.geo.country[*] in {\\\"AF\\\" \\\"BY\\\" \\\"CD\\\" \\\"CU\\\" \\\"IR\\\" \\\"IQ\\\" \\\"KP\\\" \\\"MM\\\" \\\"RU\\\" \\\"SD\\\" \\\"SY\\\" \\\"UA\\\" \\\"ZW\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-DomainTopLevel-Blocklist\",\n      \"description\": \"Block DNS queries of known risky TLDs\",\n      \"precedence\": 60,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.domains[*] matches \\\".$ or .$ or .$\\\")\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_blacklist_policy\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-DomainTopLevel-Blocklist\"\n    description = \"Block DNS queries of known risky TLDs\"\n    precedence  = 60\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.domains[*] matches \\\"[.](cn|ru)$ or [.](rest|hair|top|live|cfd|boats|beauty|mom|skin|okinawa)$ or [.](zip|mobi)$\\\")\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-DomainPhishing-Blocklist\",\n      \"description\": \"Block misused domains used in phishing campaigns\",\n      \"precedence\": 70,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.domains[] matches \\\".okta.|.cloudflare.|.mfa.|.sso.\\\") and not(any(dns.domains[*] in $<KNOWN_DOMAINS_LIST_UUID>))\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_phishing_domains_block\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-DomainPhishing-Blocklist\"\n    description = \"Block misused domains used in phishing campaigns\"\n    precedence  = 70\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.domains[*] matches \\\".*okta.*|.*cloudflare.*|.*mfa.*|.sso.*\\\") and not(any(dns.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.known_phishing_domains_list.id}))\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-ResolvedIP-Blocklist\",\n      \"description\": \"Block specific IP addresses deemed to be a risk to the Organization\",\n      \"precedence\": 80,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.resolved_ips[*] in $<IP_BLOCKLIST_UUID>)\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"dns_resolvedip_blocklist_rule\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-ResolvedIP-Blocklist\"\n    description = \"Block specific IP addresses deemed to be a risk to the Organization\"\n    precedence  = 80\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.resolved_ips[*] in ${\"$\"}${cloudflare_zero_trust_list.ip_blocklist.id}\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-DNS-DomainHost-Blocklist\",\n      \"description\": \"Block specific domains or hosts that are malicious or pose a threat to your organization.\",\n      \"precedence\": 90,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"dns\"\n      ],\n      \"traffic\": \"any(dns.domains[*] in $<DOMAIN_BLOCKLIST_UUID>) and dns.fqdn in $<HOST_BLOCKLIST_UUID> and dns.fqdn matches \\\".*example.com\\\"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"block_dns_domain_host\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-DNS-DomainHost-Blocklist\"\n    description = \"Block specific domains or hosts that are malicious or pose a threat to your organization.\"\n    precedence  = 90\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"dns\"]\n    traffic     = \"any(dns.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.domain_blocklist.id}) and dns.fqdn in ${\"$\"}${cloudflare_zero_trust_list.host_blocklist.id} and dns.fqdn matches \\\".*example\\\\.com\\\"\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"isolate\",\n      \"description\": \"Block copy, paste, and upload/download for shadow IT\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Block shadow IT interaction\",\n      \"precedence\": 0,\n      \"traffic\": \"http.request.host in <SHADOW_IT_LIST_UUID>\",\n      \"rule_settings\": {\n          \"block_page_enabled\": false,\n          \"block_reason\": \"\",\n          \"override_ips\": null,\n          \"override_host\": \"\",\n          \"l4override\": null,\n          \"biso_admin_controls\": {\n              \"dp\": false,\n              \"dcp\": true,\n              \"dd\": true,\n              \"du\": true,\n              \"dk\": false,\n              \"dcr\": false\n          }\n      }\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"isolate\",\n      \"description\": \"Allow known applications and websites\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Allow known apps and sites\",\n      \"precedence\": 0,\n      \"traffic\": \"http.request.domains in <TRUSTED_DOMAINS_LIST_UUID>\",\n      \"rule_settings\": {\n          \"block_page_enabled\": false,\n          \"block_reason\": \"\",\n          \"override_ips\": null,\n          \"override_host\": \"\",\n          \"l4override\": null\n      }\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"isolate\",\n      \"description\": \"Block all security risks\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Block security risks\",\n      \"precedence\": 0,\n      \"traffic\": \"any(http.request.uri.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\",\n      \"rule_settings\": {\n          \"block_page_enabled\": false,\n          \"block_reason\": \"\",\n          \"override_ips\": null,\n          \"override_host\": \"\",\n          \"l4override\": null\n      }\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"isolate\",\n      \"description\": \"Isolate all other traffic\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Isolate traffic\",\n      \"precedence\": 0,\n      \"traffic\": \"http.request.host matches \\\".*\\\"\",\n      \"rule_settings\": {\n          \"block_page_enabled\": false,\n          \"block_reason\": \"\",\n          \"override_ips\": null,\n          \"override_host\": \"\",\n          \"l4override\": null\n      }\n    }'\n  mermaid\nflowchart TB\n    %% Accessibility\n    accTitle: Browser Isolation architecture\n    accDescr: Flowchart describing the order of operations for user traffic for in-line Browser Isolation.\n\n%% User traffic\n    user([\"User goes to </br>risky.example.com\"])--\"Connects to\"-->cloud[Third-party SWG cloud]\n\n%% Third-party SWG\n    cloud-->warning[Third-party interstitial block or warning page]\n    warning--\"Appends Cloudflare subdomain\"-->biso\n\n%% Browser Isolation\n    subgraph cf [Cloudflare global network]\n    biso[[Cloudflare Clientless Web Isolation]]\n    inline([\"Isolated browser\"])\n    biso--\"User's browser goes to </br>customer.cloudflareaccess.com/browser/risky.example.com\"-->inline\n    end\nbash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n       --request POST \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n       --json '{\n         \"name\": \"Do not inspect applications\",\n         \"description\": \"Bypass TLS decryption for unsupported applications\",\n         \"precedence\": 0,\n         \"enabled\": true,\n         \"action\": \"off\",\n         \"filters\": [\n             \"http\"\n         ],\n         \"traffic\": \"any(app.type.ids[*] in {16})\",\n         \"identity\": \"\",\n         \"device_posture\": \"\"\n       }'\n     sh\n     {\n        \"success\": true,\n        \"errors\": [],\n        \"messages\": []\n     }\n     bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n       --request POST \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n       --json '{\n         \"name\": \"Block known risks\",\n         \"description\": \"Block all default Cloudflare HTTP security categories\",\n         \"precedence\": 0,\n         \"enabled\": true,\n         \"action\": \"block\",\n         \"filters\": [\n             \"http\"\n         ],\n         \"traffic\": \"any(http.request.uri.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\",\n         \"identity\": \"\",\n         \"device_posture\": \"\"\n       }'\n     bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"block\",\n      \"description\": \"Detect secrets and AWS keys\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Secrets and AWS keys\",\n      \"precedence\": 0,\n      \"traffic\": \"any(dlp.profiles[*] in <CREDENTIALS_DLP_PROFILE_UUID>) or any(dlp.profiles[*] in <AWS_DLP_PROFILE_UUID>)\"\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"block\",\n      \"description\": \"Detect product SKUs shared by users in organization\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Detect product SKU leaks\",\n      \"precedence\": 0,\n      \"traffic\": \"any(dlp.profiles[*] in <SKU_DLP_PROFILE_UUID>)\",\n      \"identity\": \"identity.email matches \\\"[a-z0-9]{0,15}@example.com\\\"\"\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"block\",\n      \"description\": \"Prevent financial information from being shared with AI tools\",\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ],\n      \"name\": \"Block AI financial info\",\n      \"precedence\": 0,\n      \"traffic\": \"any(dlp.profiles[*] in <FINANCIAL_INFO_DLP_PROFILE_UUID>) and any(http.request.uri.content_category[*] in {184})\"\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-Application-InspectBypass\",\n      \"description\": \"Bypass HTTP inspection for applications that use embedded certificates\",\n      \"precedence\": 0,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(app.type.ids[*] in {16})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_http_application_inspect_bypass\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-HTTP-Application-InspectBypass\"\n    description = \"Bypass HTTP inspection for applications that use embedded certificates\"\n    precedence  = 0\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"http\"]\n    traffic     = \"any(app.type.ids[*] in {16})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Android-HTTP-Application-InspectionBypass\",\n      \"description\": \"Bypass HTTPS inspection for Android applications with certificate pinning\",\n      \"precedence\": 10,\n      \"enabled\": true,\n      \"action\": \"off\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(app.ids[] in {554})\",\n      \"device_posture\": \"any(device_posture.checks.passed[] in {\\\"<ANDROID_VERSION_POSTURE_CHECK_UUID >\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"android_http_application_inspection_bypass\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"Android-HTTP-Application-InspectionBypass\"\n    description = \"Bypass HTTPS inspection for Android applications with certificate pinning\"\n    precedence  = 10\n    enabled     = true\n    action      = \"off\"\n    filters     = [\"http\"]\n    traffic     = \"any(app.ids[*] in {554})\"\n    device_posture = \"any(device_posture.checks.passed[*] in {\\\"${\"$\"}{cloudflare_zero_trust_list.android_version_posture_check.id}\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-Domain-Inspection-Bypass\",\n      \"description\": \"Bypass HTTP inspection for a custom list of domains identified as incompatible with TLS inspection\",\n      \"precedence\": 20,\n      \"enabled\": true,\n      \"action\": \"off\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(http.request.domains[*] in $<DOMAIN_INSPECTION_BYPASS_LIST_UUID>) or any(http.request.domains[*] in $<KNOWN_DOMAINS_LIST_UUID>)\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"android_http_application_inspection_bypass\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-HTTP-Domain-Inspection-Bypass\"\n    description = \"Bypass HTTP inspection for a custom list of domains identified as incompatible with TLS inspection\"\n    precedence  = 20\n    enabled     = true\n    action      = \"off\"\n    filters     = [\"http\"]\n    traffic     = \"any(http.request.domains[*] in ${\"$\"}{cloudflare_zero_trust_list.domain_inspection_bypass_list.id}) or any(http.request.domains[*] in ${\"$\"}{cloudflare_zero_trust_list.known_domains_list.id})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-SecurityRisks-Blocklist\",\n      \"description\": \"Block security categories based on Cloudflare'\\''s threat intelligence\",\n      \"precedence\": 30,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(http.request.uri.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_http_security_risks_blocklist\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-HTTP-SecurityRisks-Blocklist\"\n    description = \"Block security categories based on Cloudflare's threat intelligence\"\n    precedence  = 30\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"http\"]\n    traffic     = \"any(http.request.uri.security_category[*] in {68 178 80 83 176 175 117 131 134 151 153})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-ContentCategories-Blocklist\",\n      \"description\": \"Block access to questionable content and potential security risks\",\n      \"precedence\": 40,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(http.request.uri.content_category[*] in {17 85 87 102 157 135 138 180 162 32 169 177 128 15 115 119 124 141 161 2 67 125 133 99})\",\n      \"identity\": \"\",\n      \"device_posture\": \"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"block_unauthorized_apps\" {\n    account_id     = var.cloudflare_account_id\n    name           = \"All-HTTP-ContentCategories-Blocklist\"\n    description    = \"Block access to questionable content and potential security risks\"\n    precedence     = 40\n    enabled        = true\n    action         = \"block\"\n    filters        = [\"http\"]\n    traffic        = \"any(http.request.uri.content_category[*] in {17 85 87 102 157 135 138 180 162 32 169 177 128 15 115 119 124 141 161 2 67 125 133 99})\"\n    identity       = \"\"\n    device_posture = \"\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-DomainHost-Blocklist\",\n      \"description\": \"Block specific domains or hosts that are malicious or pose a threat to your organization\",\n      \"precedence\": 50,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(http.request.domains[*] in $<DOMAIN_BLOCKLIST_UUID>) or http.request.host in $<HOST_BLOCKLIST_UUID> or http.request.host matches \\\".*example.com\\\"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_http_domainhost_blocklist\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-HTTP-DomainHost-Blocklist\"\n    description = \"Block specific domains or hosts that are malicious or pose a threat to your organization\"\n    precedence  = 50\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"http\"]\n    traffic     = \"any(http.request.domains[*] in ${\"$\"}{cloudflare_zero_trust_list.domain_blocklist.id}) or http.request.host in ${\"$\"}{cloudflare_zero_trust_list.host_blocklist.id} or http.request.host matches \\\".*example\\\\.com\\\"\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-Application-Blocklist\",\n      \"description\": \"Limit access to shadow IT by blocking web-based tools and applications\",\n      \"precedence\": 60,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(app.type.ids[*] in {25})\",\n      \"identity\": \"\",\n      \"device_posture\": \"\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_http_application_blocklist\" {\n    account_id     = var.cloudflare_account_id\n    name           = \"All-HTTP-Application-Blocklist\"\n    description    = \"Limit access to shadow IT by blocking web-based tools and applications\"\n    precedence     = 60\n    enabled        = true\n    action         = \"block\"\n    filters        = [\"http\"]\n    traffic        = \"any(app.type.ids[*] in {25})\"\n    identity       = \"\"\n    device_posture = \"\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"PrivilegedUsers-HTTP-Any-Isolate\",\n      \"description\": \"Isolate traffic for privileged users who regularly access critical or testing systems\",\n      \"precedence\": 70,\n      \"enabled\": true,\n      \"action\": \"isolate\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"identity\": \"any(identity.groups.name[*] in {\\\"Privileged Users\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"privileged_users_http_any_isolate\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"PrivilegedUsers-HTTP-Any-Isolate\"\n    description = \"Isolate traffic for privileged users who regularly access critical or testing systems\"\n    precedence  = 70\n    enabled     = true\n    action      = \"isolate\"\n    filters     = [\"http\"]\n    identity    = \"any(identity.groups.name[*] in {\\\"Privileged Users\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Quarantined-Users-HTTP-Restricted-Access\",\n      \"description\": \"Restrict access for users included in an identity provider (IdP) user group for risky users\",\n      \"precedence\": 80,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"not(any(http.conn.dst_ip[] in $<QUARANTINED_USERS_IP_ALLOWLIST_UUID>))\",\n      \"identity\": \"any(identity.groups.name[] in {\\\"Quarantined Users\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"quarantined_users_http_restricted_access\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"Quarantined-Users-HTTP-Restricted-Access\"\n    description = \"Restrict access for users included in an identity provider (IdP) user group for risky users\"\n    precedence  = 80\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"http\"]\n    traffic     = \"not(any(http.conn.dst_ip[*] in ${\"$\"}{cloudflare_zero_trust_list.quarantined_users_ip_allowlist.id}))\"\n    identity    = \"any(identity.groups.name[*] in {\\\"Quarantined Users\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-HTTP-Domain-Isolate\",\n      \"description\": \"Isolate high risk domains or create a custom list of known risky domains to avoid data exfiltration or malware infection\",\n      \"precedence\": 90,\n      \"enabled\": true,\n      \"action\": \"isolate\",\n      \"filters\": [\n          \"http\"\n      ],\n      \"traffic\": \"any(http.request.uri.content_category[*] in {169 177}) or any(http.request.domains[*] in $<DOMAIN_ISOLATE_LIST_UUID>)\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_http_domain_isolate\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-HTTP-Domain-Isolate\"\n    description = \"Isolate high risk domains or create a custom list of known risky domains to avoid data exfiltration or malware infection\"\n    precedence  = 90\n    enabled     = true\n    action      = \"isolate\"\n    filters     = [\"http\"]\n    traffic     = \"any(http.request.uri.content_category[*] in {169 177}) or any(http.request.domains[*] in ${\"$\"}{cloudflare_zero_trust_list.domain_isolate_list.id})\"\n  }\n  tf\n     resource \"cloudflare_zero_trust_gateway_settings\" \"team_name\" {\n       account_id = var.cloudflare_account_id\n       settings = {\n         tls_decrypt = {\n           enabled = true\n         }\n       }\n     }\n     bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/lists\" \\\n       --request POST \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n       --json '{\n         \"description\": \"The serial numbers for administrators\",\n         \"items\": [\n             {\n                 \"value\": \"8GE8721RE\"\n             }\n         ],\n         \"name\": \"Admin Serial Numbers\",\n         \"type\": \"SERIAL\"\n       }'\n     bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Do not inspect corporate devices\",\n      \"traffic\": \"\",\n      \"identity\": \"\",\n      \"device_posture\": \"any(device_posture.checks.passed[*] in {\\\"<SERIAL_NUMBER_LIST_UUID>\\\"})\",\n      \"action\": \"off\",\n      \"precedence\": 14002,\n      \"enabled\": true,\n      \"filters\": [\n          \"http\"\n      ]\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Do not inspect corporate devices\",\n      \"traffic\": \"http.conn.internal_src_ip in {203.0.113.0/24}\",\n      \"identity\": \"\",\n      \"device_posture\": \"\",\n      \"action\": \"off\"\n    }'\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"action\": \"egress\",\n      \"description\": \"Define static egress for finance team\",\n      \"enabled\": true,\n      \"filters\": [\n          \"egress\"\n      ],\n      \"name\": \"Finance team static egress\",\n      \"precedence\": 0,\n      \"identity\": \"any(identity.groups.name[*] in {\\\"finance\\\"})\",\n      \"rule_settings\": {\n          \"egress\": {\n              \"ipv4\": \"<DEDICATED_IPV4_ADDRESS>\",\n              \"ipv4_fallback\": \"<SECONDARY_DEDICATED_IPV6_ADDRESS>\",\n              \"ipv6\": \"<DEDICATED_IPV6_ADDRESS>\"\n          }\n      }\n    }'\n  bash\n     curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n       --request POST \\\n       --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n       --json '{\n         \"name\": \"Enforce device posture\",\n         \"description\": \"Ensure only devices in Zero Trust organization can connect to application\",\n         \"precedence\": 0,\n         \"enabled\": true,\n         \"action\": \"block\",\n         \"filters\": [\n             \"l4\"\n         ],\n         \"traffic\": \"any(net.sni.domains[*] == \\\"internalapp.com\\\")\",\n         \"identity\": \"\",\n         \"device_posture\": \"not(any(device_posture.checks.passed[*] in {\\\"LIST_UUID\\\"}))\"\n       }'\n     sh\n  {\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Quarantined-Users-NET-Restricted-Access\",\n      \"description\": \"Restrict access for users included in an IdP user group for risky users\",\n      \"precedence\": 0,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"not(net.dst.ip in $<IP_ALLOWLIST_UUID>) or not(net.sni.host in $<HOST_ALLOWLIST_UUID>) or not(any(net.sni.domains[] in $<DOMAIN_ALLOWLIST_UUID>))\",\n      \"identity\": \"any(identity.groups.name[] in {\\\"Quarantined Users\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"quarantined_users_net_restricted_access\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"Quarantined-Users-NET-Restricted-Access\"\n    description = \"Restrict access for users included in an IdP user group for risky users\"\n    precedence  = 0\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"not(net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.ip_allowlist.id}) or not(net.sni.host in ${\"$\"}${cloudflare_zero_trust_list.host_allowlist.id}) or not(any(net.sni.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.domain_allowlist.id}))\"\n    identity    = \"any(identity.groups.name[*] in {\\\"Quarantined Users\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"Posture-Fail-NET-Restricted-Access\",\n      \"description\": \"Restrict access for devices where baseline posture checks have not passed\",\n      \"precedence\": 10,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"not(net.dst.ip in $<IP_ALLOWLIST_UUID>) or not(net.sni.host in $<HOST_ALLOWLIST_UUID>) or not(any(net.sni.domains[] in $<DOMAIN_ALLOWLIST_UUID>))\",\n      \"device_posture\": \"not(any(device_posture.checks.passed[] in {\\\"<DEVICE_POSTURE_CHECK_UUID>\\\"}))\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"posture_fail_net_restricted_access\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"Posture-Fail-NET-Restricted-Access\"\n    description = \"Restrict access for devices where baseline posture checks have not passed\"\n    precedence  = 10\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"not(net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.ip_allowlist.id}) or not(net.sni.host in ${\"$\"}${cloudflare_zero_trust_list.host_allowlist.id}) or not(any(net.sni.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.domain_allowlist.id}))\"\n    device_posture = \"not(any(device_posture.checks.passed[*] in {\\\"${cloudflare_device_posture_rule.baseline_check.id}\\\"}))\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"FinanceUsers-NET-HTTPS-FinanceServers\",\n      \"description\": \"Allow HTTPS access for user groups\",\n      \"precedence\": 20,\n      \"enabled\": true,\n      \"action\": \"allow\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"net.dst.ip in $<FINANCE_SERVERS_LIST_UUID>\",\n      \"identity\": \"any(identity.groups.name[*] in {\\\"Finance Users\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"finance_users_net_https_finance_servers\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"FinanceUsers-NET-HTTPS-FinanceServers\"\n    description = \"Allow HTTPS access for user groups\"\n    precedence  = 20\n    enabled     = true\n    action      = \"allow\"\n    filters     = [\"l4\"]\n    traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.finance_servers_list.id}\"\n    identity    = \"any(identity.groups.name[*] in {\\\"Finance Users\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-NET-Internet-Blocklist\",\n      \"description\": \"Block traffic to malicious or risky destination IPs, SNIs, and SNI domains\",\n      \"precedence\": 30,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"net.dst.ip in $<IP_BLOCKLIST_UUID> and net.sni.host in $<HOST_BLOCKLIST_UUID> and any(net.sni.domains[*] in $<DOMAIN_BLOCKLIST_UUID>)\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"finance_users_net_https_finance_servers\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-NET-Internet-Blocklist\"\n    description = \"Block traffic to malicious or risky destination IPs, SNIs, and SNI domains\"\n    precedence  = 30\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.ip_blocklist.id} and net.sni.host in ${\"$\"}${cloudflare_zero_trust_list.host_blocklist.id} and any(net.sni.domains[*] in ${\"$\"}${cloudflare_zero_trust_list.domain_blocklist.id})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-NET-SSH-Internet-Allowlist\",\n      \"description\": \"Allow SSH traffic to specific endpoints on the Internet for specific users\",\n      \"precedence\": 40,\n      \"enabled\": true,\n      \"action\": \"allow\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"net.dst.ip in $<SSH_IP_ALLOWLIST_UUID> and net.sni.host in $<SSH_FQDN_ALLOWLIST_UUID> and net.detected_protocol == \\\"ssh\\\"\",\n      \"identity\": \"any(identity.groups.name[*] in {\\\"SSH-Allowed-Users\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_net_ssh_internet_allowlist\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-NET-SSH-Internet-Allowlist\"\n    description = \"Allow SSH traffic to specific endpoints on the Internet for specific users\"\n    precedence  = 40\n    enabled     = true\n    action      = \"allow\"\n    filters     = [\"l4\"]\n    traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.ssh_ip_allowlist.id} and net.sni.host in ${\"$\"}${cloudflare_zero_trust_list.ssh_fqdn_allowlist.id} and net.detected_protocol == \\\"ssh\\\"\"\n    identity    = \"any(identity.groups.name[*] in {\\\"SSH-Allowed-Users\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-NET-NO-HTTP-HTTPS-Internet-Deny\",\n      \"description\": \"Block all non-web traffic towards the Internet\",\n      \"precedence\": 50,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"not(net.dst.ip in $<INTERNAL_NETWORK_IP_LIST_UUID>) and not(net.detected_protocol in {\\\"http\\\" \\\"http2\\\"})\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_net_no_http_https_internet_deny\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-NET-NO-HTTP-HTTPS-Internet-Deny\"\n    description = \"Block all non-web traffic towards the Internet\"\n    precedence  = 50\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"not(net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.internal_network_ip_list.id}) and not(net.detected_protocol in {\\\"http\\\" \\\"http2\\\"})\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-NET-InternalNetwork-ImplicitDeny\",\n      \"description\": \"Implicitly deny all of your internal IP ranges included in a list\",\n      \"precedence\": 60,\n      \"enabled\": true,\n      \"action\": \"block\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"net.dst.ip in $<INTERNAL_NETWORK_IP_LIST_UUID>\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_net_internalnetwork_implicitdeny\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-NET-InternalNetwork-ImplicitDeny\"\n    description = \"Implicitly deny all of your internal IP ranges included in a list\"\n    precedence  = 60\n    enabled     = true\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"net.dst.ip in ${\"$\"}${cloudflare_zero_trust_list.internal_network_ip_list.id}\"\n  }\n  bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/rules\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"name\": \"All-NET-ApplicationAccess-Allow\",\n      \"description\": \"Ensure access to the application comes from authorized WARP clients\",\n      \"precedence\": 70,\n      \"enabled\": false,\n      \"action\": \"block\",\n      \"filters\": [\n          \"l4\"\n      ],\n      \"traffic\": \"any(net.sni.domains[*] == \\\"internalapp.com\\\")\",\n      \"device_posture\": \"not(any(device_posture.checks.passed[*] in {\\\"<DEVICE_SERIAL_NUMBERS_LIST_UUID>\\\"}))\"\n    }'\n  tf\n  resource \"cloudflare_zero_trust_gateway_policy\" \"all_net_applicationaccess_allow\" {\n    account_id  = var.cloudflare_account_id\n    name        = \"All-NET-ApplicationAccess-Allow\"\n    description = \"Ensure access to the application comes from authorized WARP clients\"\n    precedence  = 70\n    enabled     = false\n    action      = \"block\"\n    filters     = [\"l4\"]\n    traffic     = \"any(net.sni.domains[*] == \\\"internalapp.com\\\")\"\n    posture      =  \"not(any(device_posture.checks.passed[*] in {\\\"${\"$\"}${cloudflare_zero_trust_list.allowed_devices_sn_list.id}\\\"}))\"\n  }\n  tf\n     resource \"cloudflare_zero_trust_access_policy\" \"allow_company_emails\" {\n       account_id   = var.cloudflare_account_id\n       name         = \"Allow company emails\"\n       decision     = \"allow\"\n       include      = [\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_application\" \"device_enrollment\" {\n       account_id       = var.cloudflare_account_id\n       type             = \"warp\"\n       name             = \"Warp device enrollment\"\n       allowed_idps              = [cloudflare_zero_trust_access_identity_provider.microsoft_entra_id.id]\n       auto_redirect_to_identity = true\n       app_launcher_visible      = false\n       policies = [\n         {\n           id = cloudflare_zero_trust_access_policy.allow_company_emails.id\n           precedence = 1\n         }\n       ]\n     }\n     txt\n     -----BEGIN CERTIFICATE-----\n     <intermediate.pem>\n     -----END CERTIFICATE-----\n     -----BEGIN CERTIFICATE-----\n     <rootCA.pem>\n     -----END CERTIFICATE-----\n     tf\n     resource \"cloudflare_zero_trust_access_mtls_certificate\" \"example_mtls_cert\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"WARP enrollment mTLS cert\"\n       certificate    = <<EOT\n       -----BEGIN CERTIFICATE-----\n       xxxx\n       xxxx\n       -----END CERTIFICATE-----\n       EOT\n       associated_hostnames = [\"your-team-name.cloudflareaccess.com\"]\n     }\n     tf\n     resource \"cloudflare_zero_trust_access_policy\" \"warp_enrollment_mtls\" {\n       account_id     = var.cloudflare_account_id\n       name           = \"Allow employees with mTLS cert\"\n       decision       = \"allow\"\n       include = [\n         {\n           email_domain = {\n             domain = \"@example.com\"\n           }\n         }\n       ]\n\nrequire = [\n         {\n           common_name = {\n             common_name = \"Common name 1\"\n           }\n         },\n             {\n           common_name = {\n             common_name = \"Common name 2\"\n           }\n         }\n       ]\n     }\n     bash\n  curl --request PATCH \\\n  https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/devices/policy \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"allow_mode_switch\": false,\n    \"allow_updates\": false,\n    \"allowed_to_leave\": false,\n    \"auto_connect\": 900,\n    \"captive_portal\": 180,\n    \"disable_auto_fallback\": true,\n    \"exclude_office_ips\": false,\n    \"service_mode_v2\": {\n      \"mode\": \"warp\"\n    },\n    \"support_url\": \"https://it.company.com/help\",\n    \"switch_locked\": true\n  }'\n  bash\n  curl --request PUT \\\n  https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/devices/settings \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n    \"disable_for_time\": 3600,\n    \"root_certificate_installation_enabled\": true\n  }'\n  tf\n     resource \"cloudflare_zero_trust_device_default_profile\" \"default_profile\" {\n       account_id            = var.cloudflare_account_id\n       allow_mode_switch     = false\n       allow_updates         = false\n       allowed_to_leave      = false\n       auto_connect          = 600\n       captive_portal        = 180\n       disable_auto_fallback = true\n       exclude_office_ips    = false\n       service_mode_v2       = {mode = \"warp\"}\n       support_url           = \"https://support.example.com\"\n       switch_locked         = true\n       tunnel_protocol       = \"wireguard\"\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_settings\" \"global_warp_settings\" {\n       account_id            = var.cloudflare_account_id\n       disable_for_time      = 3600\n       root_certificate_installation_enabled = true\n       use_zt_virtual_ip     = false\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"exclude_example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Custom profile in Split Tunnels Exclude mode\"\n       enabled               = true\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       match                 =  \"identity.email == \\\"test@cloudflare.com\\\"\"\n\nexclude = [{\n           address = \"10.0.0.0/8\"\n           description = \"Example route to exclude from WARP tunnel\"\n       }]\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"include_example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Custom profile in Split Tunnels Include mode\"\n       enabled               = true\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       match                 =  \"identity.email == \\\"test@cloudflare.com\\\"\"\n\ninclude = [{\n           address = \"10.0.0.0/8\"\n           description = \"Example route to include in WARP tunnel\"\n       }]\n     }\n     tf\n     locals {\n       global_exclude_list = [\n         # Default Split Tunnel entries recommended by Cloudflare\n         {\n           address     = \"ff05::/16\"\n         },\n         {\n           address     = \"ff04::/16\"\n         },\n         {\n           address     = \"ff03::/16\"\n         },\n         {\n           address     = \"ff02::/16\"\n         },\n         {\n           address     = \"ff01::/16\"\n         },\n         {\n           address     = \"fe80::/10\"\n           description = \"IPv6 Link Local\"\n         },\n         {\n           address     = \"fd00::/8\"\n         },\n         {\n           address     = \"255.255.255.255/32\"\n           description = \"DHCP Broadcast\"\n         },\n         {\n           address     = \"240.0.0.0/4\"\n         },\n         {\n           address     = \"224.0.0.0/24\"\n         },\n         {\n           address     = \"192.168.0.0/16\"\n         },\n         {\n           address     = \"192.0.0.0/24\"\n         },\n         {\n           address     = \"172.16.0.0/12\"\n         },\n         {\n           address     = \"169.254.0.0/16\"\n           description = \"DHCP Unspecified\"\n         },\n         {\n           address     = \"100.64.0.0/10\"\n         },\n         {\n           address     = \"10.0.0.0/8\"\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile\" \"example\" {\n       account_id            = var.cloudflare_account_id\n       name                  = \"Example custom profile with split tunnels\"\n       enabled               = true\n       precedence            = 101\n       service_mode_v2       = {mode = \"warp\"}\n       match                 =  \"identity.email == \\\"test@cloudflare.com\\\"\"\n\nexclude = concat(\n         # Global entries\n         local.global_exclude_list,\n\n# Profile-specific entries\n         [\n           {\n             address = \"192.0.2.0/24\"\n             description = \"Example IP to exclude from WARP\"\n           },\n           {\n             host = \"example.com\"\n             description = \"Example domain to exclude from WARP\"\n           }\n         ]\n       )\n     }\n     tf\n     locals {\n       default_local_domains = [\n         # Default Local Domain Fallback entries recommended by Cloudflare\n         {\n       suffix = \"corp\"\n     },\n     {\n       suffix = \"domain\"\n     },\n     {\n       suffix = \"home\"\n     },\n     {\n       suffix = \"home.arpa\"\n     },\n     {\n       suffix = \"host\"\n     },\n     {\n       suffix = \"internal\"\n     },\n     {\n       suffix = \"intranet\"\n     },\n     {\n       suffix = \"invalid\"\n     },\n     {\n       suffix = \"lan\"\n     },\n     {\n       suffix = \"local\"\n     },\n     {\n       suffix = \"localdomain\"\n     },\n     {\n       suffix = \"localhost\"\n     },\n     {\n       suffix = \"private\"\n     },\n     {\n       suffix = \"test\"\n     }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_device_custom_profile_local_domain_fallback\" \"example\" {\n       account_id = var.cloudflare_account_id\n       policy_id  = cloudflare_zero_trust_device_custom_profile.example.id\n       domains = concat(\n         # Global entries\n         local.default_local_domains,\n\n# Profile-specific entries\n         [\n           {\n           suffix = \"example.com\"\n           description = \"Domain for local development\"\n           dns_server = [\"1.1.1.1\", \"192.168.0.1\"]\n           }\n         ]\n       )\n     }\n     tf\n     resource \"cloudflare_zero_trust_gateway_policy\" \"resolver_policy\" {\n       name        = \"Example resolver policy\"\n       enabled     = true\n       account_id  = var.cloudflare_account_id\n       description = \"TERRAFORM MANAGED resolver policy\"\n       action      = \"resolve\"\n       traffic     = \"dns.fqdn in {\\\"internal.example.com\\\"}\"\n       identity    = \"identity.email in {\\\"jdoe@example.com\\\"}\"\n       precedence  = 1\n       rule_settings = {\n           dns_resolvers = {\n           # You can add up to 10 IPv4 and 10 IPv6 addresses to a policy.\n             ipv4 = [{\n               ip = \"192.0.2.24\"\n               port = 53\n               route_through_private_network = true\n               vnet_id = cloudflare_zero_trust_tunnel_cloudflared_virtual_network.staging_vnet.id\n             }]\n             ipv6 = [{\n               ip = \"2001:DB8::\"\n               port = 53\n               route_through_private_network = true\n               vnet_id = cloudflare_zero_trust_tunnel_cloudflared_virtual_network.staging_vnet.id\n             }]\n           }\n       }\n     }\n     xml\n<dict>\n  <key>organization</key>\n  <string>your-team-name</string>\n  <key>onboarding</key>\n  <false/>\n</dict>\ntf\n     resource \"cloudflare_zero_trust_access_identity_provider\" \"microsoft_entra_id\" {\n       account_id = var.cloudflare_account_id\n       name       = \"Entra ID example\"\n       type       = \"azureAD\"\n       config      = {\n         client_id                  = var.entra_id_client_id\n         client_secret              = var.entra_id_client_secret\n         directory_id               = var.entra_id_directory_id\n         support_groups             = true\n         }\n     }\n     terraform\n   resource \"cloudflare_zero_trust_organization\" \"<your-team-name>\" {\n     account_id                         = var.cloudflare_account_id\n     name                               = \"Acme Corporation\"\n     auth_domain                        = \"<your-team-name>.cloudflareaccess.com\"\n   }\n   csv\nvalue,description\n192.0.2.0/24,This is an IP address range in CIDR format\n198.51.100.0/24,This is also an IP address range\n203.0.113.0/24,This is the third IP address range\ntf\n     locals {\n       ip_list = csvdecode(file(\"${path.module}/list-test.csv\"))\n     }\n     tf\n     resource \"cloudflare_zero_trust_list\" \"ips_from_csv\" {\n       account_id  = var.cloudflare_account_id\n       name        = \"IPs imported from CSV\"\n       description = \"Managed by Terraform\"\n       type        = \"IP\"\n       items       = local.ip_list\n     }\n     bash\n  curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/gateway/lists\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"description\": \"Private application IPs\",\n      \"items\": [\n          {\n              \"value\": \"10.226.0.177/32\"\n          },\n          {\n              \"value\": \"10.226.1.177/32\"\n          }\n      ],\n      \"name\": \"Corporate IP list\",\n      \"type\": \"IP\"\n    }'\n  tf\n     resource \"cloudflare_zero_trust_list\" \"wiki_IPs\" {\n       account_id  = var.cloudflare_account_id\n       name        = \"Company Wiki IP addresses\"\n       description = \"Managed by Terraform\"\n       type        = \"IP\"\n       items = [\n         {\n           description = \"Example IP address range\"\n           value = \"192.0.2.0/24\",\n         },\n         {\n           value = \"198.51.100.0/24\"\n         }\n       ]\n     }\n     tf\n     resource \"cloudflare_zero_trust_list\" \"wiki_domains\" {\n       account_id  = var.cloudflare_account_id\n       name        = \"Company Wiki Domains\"\n       description = \"Managed by Terraform\"\n       type        = \"DOMAIN\"\n       items = [\n         {\n           value = \"wiki.example.com\"\n         },\n         {\n           value = \"wiki2.example.com\"\n         }]\n     }\n     mermaid\nflowchart TB\n    %% Accessibility\n    accTitle: Gateway order of enforcement\n    accDescr: Flowchart describing the order of enforcement for Gateway policies.\n\nsubgraph Resolution[\"Resolution\"]\n        dns2[\"1.1.1.1\"]\n        dns4[\"Custom resolver\"]\n        dns3[\"Resolver policies <br>(Enterprise users only)\"]\n        internal[\"Internal DNS\"]\n  end\n subgraph DNS[\"DNS\"]\n        dns1[\"DNS policies\"]\n        Resolution\n  end\n subgraph HTTP[\"HTTP policies\"]\n        http1{{\"Do Not Inspect policies\"}}\n        http2[\"Isolate policies  <br>(with Browser Isolation add-on)\"]\n        http3[\"Allow, Block, Do Not Scan, Quarantine, and Redirect policies, DLP, and anti-virus scanning\"]\n        https[\"HTTP or HTTPS?\"]\n  end\n subgraph Proxy[\"Proxy\"]\n        HTTP\n        network1[\"Network policies\"]\n        nonhttp[\"Non-HTTP(S) traffic\"]\n  end\n subgraph Egress[\"Egress\"]\n        egress1[\"Egress policies <br>(Enterprise users only)\"]\n  end\n    start([\"Traffic\"]) --> dns0[/\"DNS query\"/] & http0[\"Network connections\"]\n    dns0 ----> dns1\n    dns1 -- Resolved by --> dns2\n    dns1 --> dns3\n    dns3 -- Resolved by --> dns4\n    dns2 -----> internet([\"Internet\"])\n    dns4 -----> internet\n    dns4 ---> cloudflare[\"Private network services <br>(Cloudflare Tunnel, Magic WAN, WARP Connector)\"]\n    http1 -- Do Not Inspect --> internet\n    http1 -- Inspect --> http2\n    http2 --> http3\n    http0 --> magic[\"Magic Firewall (Enterprise users only)\"]\n    magic --> egress1\n    egress1 --> tcp[\"Check for origin availability (TCP SYN)\"]\n    tcp --> network1\n    http3 --> internet\n    https -- HTTPS --> http1\n    https -- HTTP --> http2\n    network1 --> https & nonhttp\n    dns3 -- Resolved by --> internal & dns2\n    nonhttp -----> internet\n\nhttps@{ shape: hex}\n    http0@{ shape: lean-r}\nmermaid\nflowchart TD\n    %% Accessibility\n    accTitle: How Gateway proxy works\n    accDescr: Flowchart describing how the Gateway proxy uses the Happy Eyeballs algorithm to establish TCP connections and proxy user traffic.\n\n%% Flowchart\n    A[User's device sends TCP SYN to Gateway] --> B[Gateway sends TCP SYN to origin server]\n    B --> C{{Origin server responds with TCP SYN-ACK?}}\n    C -->|Yes| E[TCP handshakes completed]\n    C -->|No| D[Connection fails]\n    E --> F{{Connection allowed?}}\n    F -->|Allow policy| G[Gateway proxies traffic bidirectionally]\n    F -->|Block policy| H[Connection blocked by firewall policies]\n\n%% Styling\n    style D stroke:#D50000\n    style G stroke:#00C853\n    style H stroke:#D50000\ntf\nresource \"cloudflare_zero_trust_gateway_policy\" \"policy_1\" {\n  account_id = var.cloudflare_account_id\n  # other attributes...\n  precedence = 1000\n}\n\nresource \"cloudflare_zero_trust_gateway_policy\" \"policy_2\" {\n  account_id = var.cloudflare_account_id\n  # other attributes...\n  precedence = 2000\n}\n\nresource \"cloudflare_zero_trust_gateway_policy\" \"policy_3\" {\n  account_id = var.cloudflare_account_id\n  # other attributes...\n  precedence = 3000\n}\ntxt\nhttps://phishnet-o365.area1cloudflare-webapps.workers.dev?clientId=ODcxNDA0MjMyNDM3NTA4NjQwNDk1Mzc3MDIxNzE0OTcxNTg0Njk5NDEyOTE2NDU5ODQyNjU5NzYzNjYyNDQ3NjEwMzIxODEyMDk1NQ\njs\n  export default {\n    async fetch(request, env, ctx) {\n      return new Response('Hello World!');\n    },\n  };\n  ts\n  export default {\n    async fetch(request, env, ctx): Promise<Response> {\n      return new Response('Hello World!');\n    },\n  } satisfies ExportedHandler<Env>;\n  sh\n  npm create cloudflare@latest -- first-worker\n  sh\n  yarn create cloudflare first-worker\n  sh\n  pnpm create cloudflare@latest first-worker\n  bash\n  npx wrangler workflows list\n  bash\n  npx wrangler workflows instances list publish\n  bash\n  npx wrangler workflows instances describe publish <instance-id>\n  plaintext\n  Workflow Name: publish\n  Instance ID: oPun-batch-aea07d75-95fa-448f-9573-6e435388eff7\n  Version ID: 75665fce-24a1-4c83-a561-088aabc91e5f\n  Status: Completed\n  Trigger: API\n  Queued: 10/24/2024, 1:43:45 AM\n  Success: Yes\n  Start: 10/24/2024, 1:43:45 AM\n  End: 10/24/2024, 1:43:49 AM\n  Duration: 4 seconds\n  Last Successful Step: update-status-to-published-1\n  Steps:\n\nName: content-moderation-1\n  Type: Step\n  Start: 10/24/2024, 1:43:45 AM\n  End: 10/24/2024, 1:43:45 AM\n  Duration: 0 seconds\n  Success: Yes\n  Output: \"true\"\n  Config: {\"retries\":{\"limit\":5,\"delay\":1000,\"backoff\":\"exponential\"},\"timeout\":\"10 minutes\"}\n  Attempts:\n    Status: Completed\n    Start Time: Oct 23, 2024 6:44:57 PM\n    End Time: Oct 23, 2024 6:44:57 PM\n    Wall Time: 180 ms\n  ... (additional steps like create-pun-embedding-1, categorize-pun-1, add-embeddings-to-vector-store-1, update-status-to-published-1)\n  bash\n  npx wrangler workflows trigger puntificator\n  bash\n  npx wrangler workflows instances describe puntificator latest\n  sql\n(http.request.uri.path contains \"/content\")\nsql\n<field> <operator> <value>\nsql\n(http.request.uri.path contains \"/content\")\nand (http.request.uri.query contains \"webserver\")\nsql\n<expression> <logical operator> <expression>\nsql\n(http.request.uri.path contains \"/content\")\nand (http.request.uri.query contains \"webserver\")\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/{account_id}/load_balancers/pools\" \\\n--header \"Authorization: Bearer <API_TOKEN>\" \\\n| jq '[.result[] | select(.notification_email != \"\") | {name, notification_email}]'\njson\n[\n    {\n        \"name\": \"pool-1\",\n        \"notification_email\": \"user@example.com\"\n    },\n    {\n        \"name\": \"pool-2\",\n        \"notification_email\": \"user@example.com\"\n    },\n    {\n        \"name\": \"pool-3\",\n        \"notification_email\": \"user@example.com\"\n    },\n    {\n        \"name\": \"pool-4\",\n        \"notification_email\": \"user@example.com\"\n    }\n]\njson\n\"alert_type\": \"load_balancing_health_alert\",\n\"filters\": {\n    \"pool_id\": <<ARRAY_OF_INCLUDED_POOL_IDS>>,\n    \"new_health\": <<ARRAY_OF_STATUS_TRIGGERS>> [\"Unhealthy\", \"Healthy\"],\n    \"event_source\": <<ARRAY_OF_OBJECTS_WATCHED>> [\"pool\", \"origin\"]\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/load_balancers/pools\" \\\n  --request PATCH \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"notification_email\": \"\"\n  }'\njson\nquery {\n  viewer {\n    zones(filter: { zoneTag: \"your Zone ID\" }) {\n      loadBalancingRequestsAdaptiveGroups(\n        filter: {\n          datetime_gt: \"2021-06-12T04:00:00Z\",\n          datetime_lt: \"2021-06-13T06:00:00Z\"\n        }\n      ) {\n        dimensions {\n          datetime\n          coloCode\n          ...\n        }\n        avg {\n          sampleInterval\n        }\n      }\n    }\n  }\n}\ntxt\n% of traffic to endpoint = endpoint weight  sum of all weights in the pool\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/ownership\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\"\n  }'\njson\n{\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"filename\": \"burritobot/logs/ownership-challenge.txt\",\n    \"valid\": true,\n    \"message\": \"\"\n  }\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"<DOMAIN_NAME>\",\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"dataset\": \"http_requests\",\n    \"output_options\": {\n        \"field_names\": [\n            \"ClientIP\",\n            \"ClientRequestHost\",\n            \"ClientRequestMethod\",\n            \"ClientRequestURI\",\n            \"EdgeEndTimestamp\",\n            \"EdgeResponseBytes\",\n            \"EdgeResponseStatus\",\n            \"EdgeStartTimestamp\",\n            \"RayID\"\n        ],\n        \"timestamp_format\": \"rfc3339\"\n    },\n    \"ownership_challenge\": \"<OWNERSHIP_CHALLENGE_TOKEN>\"\n  }'\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": <JOB_ID>,\n    \"dataset\": \"http_requests\",\n    \"enabled\": false,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"output_options\": {\n      \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n      \"timestamp_format\": \"rfc3339\"\n    },\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": null,\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": <JOB_ID>,\n    \"dataset\": \"http_requests\",\n    \"enabled\": false,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"output_options\": {\n      \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n      \"timestamp_format\": \"rfc3339\"\n    },\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": null,\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request PUT \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"enabled\": true\n  }'\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": <JOB_ID>,\n    \"dataset\": \"http_requests\",\n    \"enabled\": true,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"output_options\": {\n      \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n      \"timestamp_format\": \"rfc3339\"\n    },\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": null,\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": <JOB_ID>,\n    \"dataset\": \"http_requests\",\n    \"enabled\": true,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"output_options\": {\n      \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n      \"timestamp_format\": \"rfc3339\"\n    },\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": \"2018-08-09T21:26:00Z\",\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request DELETE \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {},\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n      \"id\": <JOB_ID>,\n      \"dataset\": \"http_requests\",\n      \"enabled\": true,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"output_options\": {\n        \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n        \"timestamp_format\": \"rfc3339\"\n      },\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": null,\n      \"last_error\": null,\n      \"error_message\": null\n    }\n  ],\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": [\n    {\n      \"id\": <JOB_ID>,\n      \"dataset\": \"spectrum_events\",\n      \"enabled\": true,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"output_options\": {\n        \"field_names\": [\"Application\", \"ClientAsn\", \"ClientIP\", \"ColoCode\", \"Event\", \"OriginIP\", \"Status\"],\n      },\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": \"2019-10-01T00:25:00Z\",\n      \"last_error\": null,\n      \"error_message\": null\n    },\n    {\n      \"id\": <JOB_ID>,\n      \"dataset\": \"http_requests\",\n      \"enabled\": false,\n      \"name\": \"<DOMAIN_NAME>\",\n      \"output_options\": {\n        \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n        \"timestamp_format\": \"rfc3339\"\n      },\n      \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n      \"last_complete\": \"2019-09-24T21:15:00Z\",\n      \"last_error\": null,\n      \"error_message\": null\n    }\n  ]\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": <JOB_ID>,\n    \"dataset\": \"http_requests\",\n    \"kind\": \"\",\n    \"enabled\": true,\n    \"name\": \"<DOMAIN_NAME>\",\n    \"output_options\": {\n      \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n      \"timestamp_format\": \"rfc3339\"\n    },\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": \"2021-12-14T19:56:49Z\",\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/logpush/jobs/$JOB_ID\" \\\n  --request PUT \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"output_options\": {\n        \"field_names\": [\n            \"ClientIP\",\n            \"ClientRequestHost\",\n            \"ClientRequestMethod\",\n            \"ClientRequestURI\",\n            \"EdgeEndTimestamp\",\n            \"EdgeResponseBytes\",\n            \"EdgeResponseStatus\",\n            \"EdgeStartTimestamp\",\n            \"RayID\"\n        ],\n        \"timestamp_format\": \"rfc3339\"\n    }\n  }'\njson\n{\n  \"errors\": [],\n  \"messages\": [],\n  \"result\": {\n    \"id\": <JOB_ID>,\n    \"dataset\": \"http_requests\",\n    \"kind\": \"\",\n    \"enabled\": true,\n    \"name\": null,\n    \"output_options\": {\n      \"field_names\": [\"ClientIP\", \"ClientRequestHost\", \"ClientRequestMethod\", \"ClientRequestURI\", \"EdgeEndTimestamp\",\"EdgeResponseBytes\", \"EdgeResponseStatus\", \"EdgeStartTimestamp\", \"RayID\"],\n      \"timestamp_format\": \"rfc3339\"\n    },\n    \"destination_conf\": \"s3://<BUCKET_PATH>?region=us-west-2\",\n    \"last_complete\": \"2021-12-14T20:02:19Z\",\n    \"last_error\": null,\n    \"error_message\": null\n  },\n  \"success\": true\n}\npython\nimport json\nimport requests\n\nurl = \"https://api.cloudflare.com/client/v4/\"\n\nx_auth_email = \"<EMAIL>\"\nx_auth_key = \"<API_KEY>\"\n\nzone_id = \"<ZONE_ID>\"\ndestination_conf = \"s3://<BUCKET_NAME>/logs?region=us-west-1\"\n\nlogpush_url = url + \"/zones/%s/logpush\" % zone_id\n\nheaders = {\n  'X-Auth-Email': <EMAIL>,\n  'X-Auth-Key': <API_KEY>,\n  'Content-Type': 'application/json'\n}",
  "code_samples": [
    {
      "code": "1. At your registrar, [update your nameservers](https://developers.cloudflare.com/dns/nameservers/update-nameservers/) to point to the Cloudflare nameservers.\n\nOnce the time to live (TTL) of previous `NS` records is expired and this information is evicted from resolvers' cache, your zone will be properly delegated to Cloudflare. In order to update DNS records, you must configure [zone transfers](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/) in the next steps.\n\n## 3. Configure the zone transfers\n\n1. Remove all references to `cdn.cloudflare.net` from your primary DNS provider. You can do this by importing the same zone file you prepared in [Step 1](#1-prepare-a-zone-file) onto your primary zone.\n\nWarning\n\nIf you keep any DNS records that still refer `cdn.cloudflare.net`, HTTP traffic for the respective hostnames will break.\n\n1. Enable outgoing zone transfers at your primary provider and create a peer DNS server on your Cloudflare account.\n\n* Dashboard\n\n  To create a peer server using the dashboard:\n\n  1. In the Cloudflare dashboard, go to the account **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/configurations)\n\n  2. Go to **DNS Settings**.\n\n  3. Under **DNS Zone Transfers**, for **Peer DNS servers**, select **Create**.\n\n  4. Enter the following information, paying particular attention to:\n\n     * **IP**: Specifies where Cloudflare sends transfer requests to.\n     * **Port**: Specifies the IP Port for the transfer IP.\n     * **Enable incremental (IXFR) zone transfers**: Specifies if Cloudflare sends IXFR requests in addition to the default AXFR requests.\n     * **Link an existing TSIG**: If desired, link the TSIG you [previously created](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/setup/#1-create-tsig-optional).\n\n  5. Select **Create**.\n\n* API\n\n  To create a peer DNS server using the API, send a [POST request](https://developers.cloudflare.com/api/resources/dns/subresources/zone_transfers/subresources/peers/).\n\n1. Link your Cloudflare zone to the peer DNS server you just created.\n\n* Dashboard\n\n  1. In the Cloudflare dashboard, go to the **DNS Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/dns/settings)\n\n  2. Under **DNS Zone Transfers**, select **Manage linked peers**.\n\n  3. Choose a value for **Zone refresh**, which controls the number of seconds between zone updates from your primary DNS server.\n\n     Warning\n\n     Cloudflare will not use the REFRESH value inside the SOA record that is served by your primary provider. Instead the value of zone refresh configured for your secondary zone on Cloudflare will be used to determine the interval after which the SOA serial of the primary zone will be checked for changes.\n\n  4. Select the peer server you previously created. If needed, you can link more than one peer server to a zone.\n\n  5. Select **Save** to confirm.\n\n* API\n\n  Use the [Update Secondary Zone Configuration endpoint](https://developers.cloudflare.com/api/resources/dns/subresources/zone_transfers/subresources/peers/methods/update/) to link your Cloudflare zone to the peer DNS server.\n\n1. On the [**DNS Settings**](https://dash.cloudflare.com/?to=/:account/:zone/dns/settings) page, confirm the linked peer is listed under **DNS Zone Transfers**, and select **Initiate zone transfer**. Alternatively, you can use the [Force AXFR endpoint](https://developers.cloudflare.com/api/resources/dns/subresources/zone_transfers/subresources/force_axfr/methods/create/).\n\n</page>\n\n<page>\n---\ntitle: Convert secondary setup to full setup  Cloudflare DNS docs\ndescription: If you initially set up incoming zone transfers (Cloudflare as\n  secondary), you can later convert your zone to use a full setup.\nlastUpdated: 2025-10-23T07:57:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/conversions/convert-secondary-to-full/\n  md: https://developers.cloudflare.com/dns/zone-setups/conversions/convert-secondary-to-full/index.md\n---\n\nIf you initially set up [incoming zone transfers (Cloudflare as secondary)](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/setup/), you can later convert your zone to use a full setup.\n\nSubdomain setup\n\nIf you also use subdomain setup[1](#user-content-fn-1), consider the [available combinations](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/#available-setups) and whether your zone conversion could have any implications.\n\n## Footnotes\n\n1. Meaning you have one or more subdomains (`sub.example.com`) added to Cloudflare as their own zone, separate from your apex domain (`example.com`). [](#user-content-fnref-1)\n\nFollow the steps below to achieve this conversion.\n\n## 1. Stop transferring the zone\n\n1. In the Cloudflare dashboard, go to the **DNS Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/dns/settings)\n\n2. Under **DNS Zone Transfers**, and select **Manage linked peers**.\n\n3. Unlink the peer and select **Save**.\n\nAt this point, your zone will be read-only.\n\n## 2. Prepare for the conversion\n\n1. Plan for [DNSSEC settings](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/dnssec-for-secondary/). If you were previously using [Pre-signed DNSSEC](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/dnssec-for-secondary/#set-up-pre-signed-dnssec), consider disabling DNSSEC before starting the conversion.\n\n2. Make sure the [proxy statuses](https://developers.cloudflare.com/dns/proxy-status/) of your DNS records are consistently set:\n\n   * If you have [Secondary DNS override](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/proxy-traffic/), confirm each record has the appropriate setting (**Proxied** or **DNS only**).\n   * If [Secondary DNS override](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/proxy-traffic/) is disabled, make sure all of your DNS records are listed as **DNS only**.\n\n3. (Optional) For consistency, use the [Update DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/zone/methods/edit/) endpoint to specify SOA record fields according to your needs. Once Cloudflare automatically generates an SOA record for your zone on full setup, the field overrides will be considered.\n\n## 3. Convert your zone\n\n1. Use the [Edit Zone endpoint](https://developers.cloudflare.com/api/resources/zones/methods/edit/) with `type` set to `full` to convert the zone type. Existing DNS records will not be affected.\n\n2. Go to the [**DNS Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records) page and take note of your new **Cloudflare Nameservers**.\n\n3. At your domain registrar (or parent zone), [update your nameservers](https://developers.cloudflare.com/dns/nameservers/update-nameservers/). Replace the nameservers ending in `secondary.cloudflare.com` by the ones ending in `ns.cloudflare.com`.\n\n   Note\n\n   If Cloudflare will be your only primary DNS provider, remove any other nameservers as well.\n\n4. Delete the previous SOA record to make sure Cloudflare generates a new one.\n\n5. (Optional) If Cloudflare was previously not signing your records and you wish to use DNSSEC, follow the steps to [Enable DNSSEC](https://developers.cloudflare.com/dns/dnssec/#enable-dnssec).\n\n</page>\n\n<page>\n---\ntitle: Convert secondary setup to partial setup  Cloudflare DNS docs\ndescription: If you initially set up incoming zone transfers (Cloudflare as\n  secondary), you can later convert your zone to use a partial setup.\nlastUpdated: 2025-10-23T07:57:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/conversions/convert-secondary-to-partial/\n  md: https://developers.cloudflare.com/dns/zone-setups/conversions/convert-secondary-to-partial/index.md\n---\n\nIf you initially set up [incoming zone transfers (Cloudflare as secondary)](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/setup/), you can later convert your zone to use a partial setup.\n\nSubdomain setup\n\nIf you also use subdomain setup[1](#user-content-fn-1), consider the [available combinations](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/#available-setups) and whether your zone conversion could have any implications.\n\n## Footnotes\n\n1. Meaning you have one or more subdomains (`sub.example.com`) added to Cloudflare as their own zone, separate from your apex domain (`example.com`). [](#user-content-fnref-1)\n\nFollow the steps below to achieve this conversion.\n\n## 1. Stop transferring the zone\n\n1. In the Cloudflare dashboard, go to the **DNS Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/dns/settings)\n\n2. Under **DNS Zone Transfers**, and select **Manage linked peers**.\n\n3. Unlink the peer and select **Save**.\n\nAt this point, your zone will be read-only.\n\n## 2. Configure your authoritative DNS provider\n\n1. (Optional) If you are also migrating to a new authoritative DNS provider, export a zone file from the previous provider and import it into the new one.\n\n2. At your authoritative DNS provider, create `CNAME` records pointing to `{your-hostname}.cdn.cloudflare.net` for every hostname you wish to proxy through Cloudflare.\n\n   Example CNAME record at authoritative DNS provider\n\n   The `CNAME` record for `www.example.com` would be:",
      "language": "unknown"
    },
    {
      "code": "3. At your authoritative DNS provider, remove any previously existing `A`, `AAAA`, or `CNAME` records referencing the hostnames you want to proxy through Cloudflare. For these hostnames, leave only the records pointing to `{your-hostname}.cdn.cloudflare.net`.\n\n## 3. Convert your Cloudflare zone\n\n1. Back at your Cloudflare zone, confirm that you have all the `A`, `AAAA`, or `CNAME` [DNS records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/) needed for the hostnames you pointed to `{your-hostname}.cdn.cloudflare.net` in the previous step. You can also delete any DNS records that have a different type, as they will no longer resolve once you convert your zone to a partial setup.\n\n2. Use the [Edit Zone endpoint](https://developers.cloudflare.com/api/resources/zones/methods/edit/) with `type` set to `partial` to convert the zone type. Existing DNS records will not be affected.\n\n3. On the [**DNS Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records) page, get the **Verification TXT Record** and add it at your authoritative DNS provider.\n\n   Example verification record\n\n   A verification record for `sub.example.com` might be:\n\n   | Type | Name | Content |\n   | - | - | - |\n   | TXT | `cloudflare-verify.sub.example.com` | 966215192-518620144 |\n\n   If your authoritative DNS provider automatically appends DNS record `name` fields with your domain, make sure to only insert `cloudflare-verify` as the record name. Otherwise, it may result in an incorrect record name, such as `cloudflare-verify.sub.example.com.sub.example.com`.\n\n   After creating the record, you can use this [Dig Web Interface link](https://digwebinterface.com/?type=TXT\\&ns=auth\\&nameservers=) to search (`dig`) for `cloudflare-verify.<YOUR DOMAIN>` and validate if it is working.\n\n   Note\n\n   The verification record must remain in place for as long as you want your partial setup to be active on Cloudflare.\n\n## 4. Update nameservers\n\nAt your domain registrar (or parent zone), [update the nameservers](https://developers.cloudflare.com/dns/nameservers/update-nameservers/). In a partial (CNAME) setup, only the nameservers of your external DNS provider should be listed.\n\n* Remove any `secondary.cloudflare.com` nameservers if you used to have them.\n* If you are also migrating to a new authoritative DNS provider, add your new nameservers.\n\n</page>\n\n<page>\n---\ntitle: DNS resolution in partial zones  Cloudflare DNS docs\ndescription: When you have a partial zone, Cloudflare handles DNS records a bit\n  differently from full zones in order to internally resolve the origin server\n  where proxied HTTP requests are sent to.\nlastUpdated: 2025-10-21T15:15:25.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/partial-setup/dns-resolution/\n  md: https://developers.cloudflare.com/dns/zone-setups/partial-setup/dns-resolution/index.md\n---\n\nWhen you have a [partial zone](https://developers.cloudflare.com/dns/zone-setups/partial-setup/), Cloudflare handles DNS records a bit differently from full zones in order to internally resolve the origin server where proxied HTTP requests are sent to.\n\n## Records within the same zone\n\nWhen you [create a new DNS record](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/#create-dns-records) in a partial zone, Cloudflare automatically checks whether any of your CNAME records point to existing A, AAAA, or CNAME records within the same zone.\n\nFor example, Cloudflare would show a warning if you had the following records in your partial zone:",
      "language": "unknown"
    },
    {
      "code": "Since Cloudflare contains both the CNAME and its target, our DNS resolution will send incoming HTTP requests to `sub1.partialzone.com` to the origin `192.0.2.1`.\n\nThis can cause issues if you already have DNS records for `sub2.partialzone.com` at your authoritative DNS provider. These records may point to `192.0.2.4`, another IP address, or another domain but - because Cloudflare contains the initial record and the target - it never queries your authoritative DNS provider for the record for `sub2.partialzone.com`.",
      "language": "unknown"
    },
    {
      "code": "When you avoid this situation - meaning you do not have the **target** of the CNAME record within your partial zone - this DNS resolution would happen differently.",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Records pointing to a partial zone within the same account\n\nYou could also [create a CNAME record](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/#create-dns-records) in a zone (partial or full setup) that points to a record in another partial zone within your account.\n\nIn this case, Cloudflare will always resolve the CNAME target based on the value at your authoritative DNS provider of the partial target zone.",
      "language": "unknown"
    },
    {
      "code": "### Auth DNS points to `cdn.cloudflare.net`\n\nConsidering the following scenario:\n\n* The target zone (Cloudflare zone 2 in this example) is a partial zone and the DNS record on the partial is proxied.\n* The DNS record on the authoritative DNS server points to `cdn.cloudflare.net`\n\nIf such setup is in place, the subdomain (`www.partialzone.com` in this example) will resolve to a Cloudflare proxy IP, which will ultimately result in an error. Consider using [custom hostnames](https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/domain-support/) and [Orange-to-Orange](https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/saas-customers/how-it-works/) setup instead.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Set up a partial (CNAME) zone  Cloudflare DNS docs\ndescription: A partial (CNAME) setup allows you to use Cloudflare's reverse\n  proxy while maintaining your primary and authoritative DNS provider.\nlastUpdated: 2025-11-21T10:02:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/partial-setup/setup/\n  md: https://developers.cloudflare.com/dns/zone-setups/partial-setup/setup/index.md\n---\n\nA partial (CNAME) setup allows you to use [Cloudflare's reverse proxy](https://developers.cloudflare.com/fundamentals/concepts/how-cloudflare-works/) while maintaining your primary and authoritative DNS provider.\n\nUse this option to proxy only individual subdomains through Cloudflare when you cannot change your authoritative DNS provider. You will be able to create A, AAAA, and CNAME records, which are the DNS record types that can be [proxied](https://developers.cloudflare.com/dns/proxy-status/).\n\nNote\n\nA partial setup is only available to customers on a Business or Enterprise plan. Partial setups are not supported on Cloudflare Registrar domains.\n\n***\n\n## Before you begin\n\n1. Create a Cloudflare account and add your domain.\n\n2. Choose **Business** or **Enterprise** as your plan.\n\n3. If you are onboarding a new domain to Cloudflare, ignore the instructions to change your nameservers.\n\n4. (Recommended) Plan for SSL/TLS certificates:\n\n   If you are only using [Universal SSL](https://developers.cloudflare.com/ssl/edge-certificates/universal-ssl/) prior to converting your zone, a certificate will be provisioned for your subdomains only after each of the respective DNS records ([step 3](#3-add-dns-records) below) are [proxied](https://developers.cloudflare.com/dns/proxy-status/). Refer to [Enable Universal SSL](https://developers.cloudflare.com/ssl/edge-certificates/universal-ssl/enable-universal-ssl/#partial-dns-setup) for details.\n\n   If your domain is sensitive to downtime, instead of using Universal SSL, consider using an [advanced certificate](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/) with [delegated DCV](https://developers.cloudflare.com/ssl/edge-certificates/changing-dcv-method/methods/delegated-dcv/#setup).\n\n## 1. Convert your zone and review DNS records\n\n* Dashboard\n\n  Make sure you have the correct plan\n\n  Make sure your zone is on the Business or Enterprise plan. If you have Free or Pro, the options mentioned below will not be displayed.\n\n  1. On the **Overview** page, select **Convert to CNAME DNS Setup**.\n  2. Select **Convert** to confirm.\n  3. Save the information from the **Verification TXT Record**. If you lose the information, you can also access it on the [**DNS Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records) page, under **Verification TXT Record**.\n  4. Make sure that you have all the DNS records (A, AAAA, or CNAME) for subdomains that you want to proxy through Cloudflare.\n\n* API\n\n  If you are adding a zone for the first time via API you can add it directly with a `type` of `partial`, without converting it.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zone Zone Edit`\n  * `Zone DNS Edit`",
      "language": "unknown"
    },
    {
      "code": "## 2. Verify ownership for your domain\n\nAdd the **Verification TXT Record** at your authoritative DNS provider. Cloudflare will verify the TXT record and send a confirmation email. This can take up to a few hours.\n\nExample verification record\n\nA verification record for `example.com` might be:\n\n| Type | Name | Content |\n| - | - | - |\n| TXT | `cloudflare-verify.example.com` | 966215192-518620144 |\n\nNote\n\nIf your authoritative DNS provider automatically appends DNS record `name` fields with your domain, make sure to only insert `cloudflare-verify` as the record name. Otherwise, it may result in an incorrect record name, such as `cloudflare-verify.example.com.example.com`.\n\nAfter creating the record, you can use this [Dig Web Interface link](https://digwebinterface.com/?type=TXT\\&ns=auth\\&nameservers=) to search (`dig`) for `cloudflare-verify.<YOUR DOMAIN>` and validate if it is working.\n\nThe verification record must remain in place for as long as your domain is active on the partial setup on Cloudflare.\n\nIf your organization has multiple Cloudflare accounts, also consider using zone holds to have more control over [domain ownership](https://developers.cloudflare.com/dns/zone-setups/partial-setup/#domain-ownership).\n\n## 3. Add DNS records\n\n1. At your authoritative DNS provider:\n\n   1. Create CNAME records pointing to `{your-hostname}.cdn.cloudflare.net` for every hostname you wish to proxy through Cloudflare.\n\n   Example CNAME record at authoritative DNS provider\n\n   The CNAME record for `www.example.com` would be:",
      "language": "unknown"
    },
    {
      "code": "2. Remove any previously existing A, AAAA, or CNAME records referencing the hostnames you want to proxy through Cloudflare. For these hostnames, leave only the records pointing to `{your-hostname}.cdn.cloudflare.net`.\n\n3. Repeat this process for each subdomain that should be proxied to Cloudflare.\n\n***\n\n## Other record types\n\nIf you are preparing a conversion from partial to full setup, or if you have a more specific use case, you can use the [Create DNS Record](https://developers.cloudflare.com/api/resources/dns/subresources/records/methods/create/) API endpoint to create DNS records of any supported type.\n\n</page>\n\n<page>\n---\ntitle: Records quick scan  Cloudflare DNS docs\ndescription: To help all customers get started when a new zone is created,\n  Cloudflare offers a DNS records quick scan.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/reference/dns-quick-scan/\n  md: https://developers.cloudflare.com/dns/zone-setups/reference/dns-quick-scan/index.md\n---\n\nTo help all customers get started when a new zone is created, Cloudflare offers a DNS records quick scan.\n\n## How the quick scan works\n\nThe scan is built upon a list of recurring patterns of DNS records `type` and `name`, that Cloudflare identifies as being used in existing active zones.\n\nSince DNS record names are automatically appended with the domain that the records are set for, two completely different domains - `domain.com` and `test.xyz`, for example - would probably have a few matches if the lists of DNS records on their zones were compared side by side and the criterion was `type`/`name` combination.\n\nThe DNS records `content` would be different for each zone but, based on record `type` and `name`, Cloudflare can identify recurring patterns and expect to find the same pairs when a new domain is added.\n\nThe following section provides some examples of DNS records `type`/`name` combinations that the scan usually finds.\n\n## Use case examples\n\n### Address records\n\n| Type | Name | Content | TTL |\n| - | - | - | - |\n| `A` | `@` | `<IPv4>` | `<TTL>` |\n\nThe value `@` indicates the domain apex - in the example above, `domain.com` or `test.xyz`.\n\nVirtually all zones on a full setup are expected to have at least one [address record](https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/) pointing to the IP address where the website or application is hosted.\n\n### `www` records\n\n| Type | Name | Content | TTL |\n| - | - | - | - |\n| `CNAME` | `www` | `<TARGET>` | `<TTL>` |\n\n| Type | Name | Content | TTL |\n| - | - | - | - |\n| `A` | `www` | `<IPv4>` | `<TTL>` |\n\nSince it is still common that visitors type `www.<DOMAIN>` in their browsers expecting to reach the domain, zones will usually have a [`CNAME`](https://developers.cloudflare.com/dns/manage-dns-records/reference/dns-record-types/#cname) or an [`A`](https://developers.cloudflare.com/dns/manage-dns-records/reference/dns-record-types/#a-and-aaaa) record named `www`. This allows queries for `www.<DOMAIN>` to return the expected result.\n\n### Email records\n\n| Type | Name | Mail server | TTL | Priority |\n| - | - | - | - | - |\n| `MX` | `@` | `webmail.<DOMAIN>` | `<TTL>` | `<PRIORITY>` |\n\n| Type | Name | Content | TTL |\n| - | - | - | - |\n| `CNAME` | `mail` | `<TARGET>` | `<TTL>` |\n\n| Type | Name | Content | TTL |\n| - | - | - | - |\n| `A` | `webmail` | `<IPv4>` | `<TTL>` |\n\nMail exchanger (`MX`) and other record types combined with names like `mail`, `webmail`, or `smtp`, are also commonly found. As explained in the [Set up email records page](https://developers.cloudflare.com/dns/manage-dns-records/how-to/email-records/), there are several DNS records that can be used to make sure email reaches your mail server and to prevent other email senders from spoofing your domain.\n\n## Limitations\n\nSince the DNS records quick scan is based on this predefined list of commonly used record types and names, and is not tailored to the specific zone you are adding to Cloudflare, there can be cases where not all records are picked up.\n\nFor example, if you have very specific hostnames - such as `my-store1900.example.com` instead of `store.example.com` - or if you have set up a [DKIM record](https://www.cloudflare.com/learning/dns/dns-records/dns-dkim-record/) that uses a more custom name - `this._domainkey` instead of `default._domainkey` - it is expected that the scan will not find the specific DNS records.\n\nImportant\n\nYou should always [review your DNS records](https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/#review-dns-records) and manually add any missing ones before changing your nameservers.\n\n</page>\n\n<page>\n---\ntitle: Zone status  Cloudflare DNS docs\ndescription: Review information on the different statuses that your zone can\n  have after you add your website or application to Cloudflare.\nlastUpdated: 2025-10-15T15:49:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/reference/domain-status/\n  md: https://developers.cloudflare.com/dns/zone-setups/reference/domain-status/index.md\n---\n\nReview information on the different statuses that your [zone](https://developers.cloudflare.com/dns/concepts/#zone) can have after you [add your website or application](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) to Cloudflare.\n\nZone status is also referred to as domain status. An **active** domain status is a requirement for your [application services configurations](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) to be applied. Refer to [How Cloudflare works](https://developers.cloudflare.com/fundamentals/concepts/how-cloudflare-works/) for details.\n\nIf your zone status changes, you will receive an email at the address associated with your account.\n\nThe following diagram gives you an overview of the different statuses applicable and how your zone may transition from one status to the other. For zones with an active paid subscription, the time to automatic deletion or purge may not correspond to this diagram. Refer to the sections below for details.",
      "language": "unknown"
    },
    {
      "code": "Note\n\nIf you use the API to add your website or application to Cloudflare, your zone will be created directly in a **Pending** status. **Initializing** only applies to domains added via the dashboard.\n\n## Initializing (Setup)\n\nYou have initiated the setup via dashboard, but did not select a plan for your zone. Your zone status is presented as **Setup** on the Cloudflare dashboard.\n\nIn this state, Cloudflare does not respond to any DNS queries for your domain.\n\nIf your zone is in **Setup** for over 28 days, it will be automatically [deleted](#deleted).\n\n## Pending\n\nYour zone status is presented as **Pending Nameserver Update** on the Cloudflare dashboard.\n\nNote\n\nIf you have mistakenly added a zone to your account it will appear as pending. It can be safely [removed](https://developers.cloudflare.com/fundamentals/manage-domains/remove-domain/).\n\nCloudflare responds to DNS queries for pending zones on the assigned Cloudflare nameserver IPs, but your zone is still not active and cannot be used to [proxy traffic to Cloudflare](https://developers.cloudflare.com/dns/proxy-status/limitations/#pending-domains).\n\n### Causes\n\n* [Full setup](https://developers.cloudflare.com/dns/zone-setups/full-setup/): You have either not [changed your authoritative nameservers](https://developers.cloudflare.com/dns/nameservers/update-nameservers/) or your change has not yet been authenticated by Cloudflare.\n* [Partial (CNAME) setup](https://developers.cloudflare.com/dns/zone-setups/partial-setup/): You have either not added the verification TXT record to your authoritative DNS provider or the record has not yet been authenticated by Cloudflare.\n\nAfter you add your domain, Cloudflare performs checks on a schedule to confirm you have updated your nameservers. The first check occurs after 60 seconds and the following attempts happen at gradually increased intervals. You can re-trigger the check [via API](https://developers.cloudflare.com/api/resources/zones/subresources/activation_check/methods/trigger/) or on the Dashboard, in the respective domain [Overview page](https://dash.cloudflare.com/?to=/:account/:zone/).\n\n### Expected behavior for different plans\n\nIf your domain is on the Free plan, it will be automatically deleted if it is not activated within 28 days.\n\nAny pending zone with a paid plan (Pro, Business, Enterprise) will remain pending until the plan is removed, or the domain is activated or [removed from Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/remove-domain/).\n\nDo not use pending zones in production\n\nMake sure not to use pending zones for production traffic. Cloudflare responds to DNS queries for pending zones on the assigned Cloudflare nameserver IPs but there are associated risks, especially if you do not use [zone holds](https://developers.cloudflare.com/fundamentals/account/account-security/zone-holds/).\n\nFor Enterprise zones, if you want to adjust settings before zone activation, Logpush for [DNS logs](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/zone/dns_logs/) and [DNS Zone Transfer](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/) configuration work as expected in pending state.\n\n## Active\n\nCloudflare has authenticated your [nameserver changes](https://developers.cloudflare.com/dns/nameservers/update-nameservers/) or [verification TXT record](https://developers.cloudflare.com/dns/zone-setups/partial-setup/setup/#2-verify-ownership-for-your-domain) and you can proxy domain traffic through Cloudflare. For more details refer to [How Cloudflare works](https://developers.cloudflare.com/fundamentals/concepts/how-cloudflare-works/) and [Domain configurations](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/).\n\n## Moved\n\nYour domain has failed multiple DNS checks, where either the Cloudflare nameservers are no longer present on your domain's `NS` records ([Full setup](https://developers.cloudflare.com/dns/zone-setups/full-setup/)) or no `SOA` record is returned for the zone ([Partial (CNAME) setup](https://developers.cloudflare.com/dns/zone-setups/partial-setup/)).\n\n### Expected behavior for different plans\n\nIf your domain is on the Free plan, it will be automatically deleted 7 days after it entered the moved status.\n\nFor moved zones with a paid plan (Pro, Business, Enterprise), deletion will occur after 7 days if any of the following is observed:\n\n* The paid plan is removed.\n* The domain is activated in another Cloudflare account.\n\nYou can also [manually remove](https://developers.cloudflare.com/fundamentals/manage-domains/remove-domain/) your domain from Cloudflare.\n\n## Deleted\n\nYour zone has been archived. Cloudflare still responds to DNS queries for deleted zones on the assigned Cloudflare nameserver IPs (for non-deleted DNS records) and you can re-add the domain to Cloudflare by following the [regular onboarding flow](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/).\n\nAfter being deleted for seven days, zones are automatically [purged](#purged).\n\n## Purged\n\nAfter a zone is deleted for seven days, it will be purged. Cloudflare does not respond to DNS queries for purged zones and, unlike [deleted zones](#deleted), this status cannot be reverted. In this case, even if you re-add the domain to the same Cloudflare account, none of the zone settings are expected to be restored.\n\n</page>\n\n<page>\n---\ntitle: Cannot add domain to Cloudflare  Cloudflare DNS docs\ndescription: If you encounter issues adding a domain to Cloudflare, follow these\n  troubleshooting steps.\nlastUpdated: 2025-06-30T19:06:55.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/troubleshooting/cannot-add-domain/\n  md: https://developers.cloudflare.com/dns/zone-setups/troubleshooting/cannot-add-domain/index.md\n---\n\nIf you encounter issues [adding a domain](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) to Cloudflare, follow these troubleshooting steps.\n\n## Disable DNSSEC\n\nCloudflare cannot provide authoritative DNS resolution for a domain  a [full setup domain](https://developers.cloudflare.com/dns/zone-setups/full-setup/)  when**DNSSEC**is enabled at your domain registrar.\n\nIf you do not disable**DNSSEC**before changing your nameservers, you might experience the following issues:\n\n* DNS does not resolve after switching to Cloudflares nameservers.\n* DNS query response status is `SERVFAIL`.\n* The domain remains in a [Pending status](https://developers.cloudflare.com/dns/zone-setups/reference/domain-status/).\n\nIf you experience these issues, refer to [Configuring DNSSEC](https://developers.cloudflare.com/dns/dnssec) and [Troubleshooting DNSSEC](https://developers.cloudflare.com/dns/dnssec/troubleshooting/).\n\n***\n\n## Register the domain\n\nIf the issue is with your registrar, you may receive the following error messages:\n\n* `exampledomain.com is not a registered domain (Code: 1049)`\n* `We were unable to identify bad.psl-example as a registered domain. Please ensure you are providing the root domain and not any subdomains (e.g., example.com, not subdomain.example.com) (Code: 1099)`\n* `Failed to lookup registrar and hosting information of exampledomain.com at this time. Please contact Cloudflare Support or try again later. (Code: 1110)`\n\nIf you receive these error messages, make sure that:\n\n* You are providing the apex domain (also known as \"root domain\", e.g. `example.com`) and not a subdomain (`www.example.com`).\n* You domain is fully registered and its registration data lists its nameservers.\n* Your domain uses a verified [top-level domain (TLD)](https://publicsuffix.org/list/).\n\n***\n\n## Resolve DNS for apex domain\n\nBefore a domain can be added to Cloudflare, the domain must return`NS` recordsfor valid, working nameservers. `NS` recordscan be checked via third-party online tools such as[https://www.whatsmydns.net](https://www.whatsmydns.net/)or via a command-line terminal using a dig command:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Additionally, the domain must return a valid`SOA` recordwhen queried.`SOA` recordscan be checkedvia third-party online tools such as[https://www.whatsmydns.net](https://www.whatsmydns.net/)or via a command-line terminal:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Check if the domain is restricted at Cloudflare\n\nIf Cloudflare has temporary or permanent restrictions on a domain, you will receive the following errors:\n\n* **Error 1105**\n\n  * **Message**: `Error with Cloudflare request: [1105] This zone is temporarily restricted and cannot be added to Cloudflare at this time, please contact Cloudflare Support.`\n  * **Cause**: We have seen too many attempts to add a domain to Cloudflare\n  * **Resolution**: Wait 3 hours before attempting to re-add the domain to Cloudflare. Support cannot speed up this process.\n\n* **Error 1093 or 1116**\n\n  * **Message**: `This zone cannot be added to Cloudflare at this time, please contact Cloudflare Support. (Code: 1093)`\n  * **Cause**: You may have entered a subdomain (`www.example.com`) instead of the apex domain (also known as \"root domain\", e.g. `example.com`).\n  * **Resolution**: Verify that you are entering the apex domain. If you are and still experience issues, contact [Cloudflare Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n\n* \\_**Error 1097**\n\n  * **Message**: `This web property cannot be added to Cloudflare at this time. If you are an Enterprise customer, contact your Customer Success Manager. Otherwise, email abusereply@cloudflare.com with a detailed explanation of your association with this zone. (Code: 1097)`\n  * **Resolution**: Contact <abusereply@cloudflare.com> with a detailed explanation of your association with this zone.\n\n* **Error: Cannot be found** OR **`<your domain>` is not a registered domain (code: 1049)**\n\n  * This can happen if the domain has not been registered yet. Some domains, like `.gov` domains, have special requirements that require the domain be added first.\n  * **Resolution:** Please contact [Cloudflare Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/) if you require assistance adding a `.gov` and/or other domains that require manual registration.\n\n***\n\n## Contact the zone owner in case of zone hold error\n\nEnterprise customers can use the [zone hold](https://developers.cloudflare.com/fundamentals/account/account-security/zone-holds/) feature to prevent domains to be added in any other account. If you get the following error when adding your domain, it means that a zone hold is active:",
      "language": "unknown"
    },
    {
      "code": "In this case you'll need to remove the zone hold if you own the Cloudflare account in which the zone is active, or contact the owner of the Cloudflare account which has the zone active.\n\nIf you are not the owner of the Cloudflare account that has the hold on the zone, using an online WHOIS tool might help you finding the owner of a website.\n\nSee this [external WHOIS tool](https://www.godaddy.com/whois) or this [other external tool](https://www.whois.com/whois/).\n\nThe owner might be your hosting provider, or a SaaS service provider.\n\nYou can also use the [Cloudflare Forgot Email?](https://dash.cloudflare.com/forgot-email) page, and check the documentation related to the [Forgot Email? feature](https://developers.cloudflare.com/fundamentals/user-profiles/change-password-or-email/#forgot-your-email-address).\n\n</page>\n\n<page>\n---\ntitle: Delete all DNS records  Cloudflare DNS docs\ndescription: Learn how to bulk delete DNS records in Cloudflare with a script so\n  you can start from zero instead of using the quick scan results.\nlastUpdated: 2025-05-29T18:16:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/troubleshooting/delete-all-records/\n  md: https://developers.cloudflare.com/dns/zone-setups/troubleshooting/delete-all-records/index.md\n---\n\nWhen you connect your domain to Cloudflare, the [DNS records quick scan](https://developers.cloudflare.com/dns/zone-setups/reference/dns-quick-scan/) may automatically add several records to your zone.\n\nIf you realize most of them are not applicable and want to bulk delete DNS records, follow the steps below. This method assumes you are familiar with [API calls fundamentals](https://developers.cloudflare.com/fundamentals/api/).\n\nBulk deletion available in the dashboard\n\nYou can delete records in bulk via the dashboard, which removes the need for custom scripts as the one below. Refer to [Batch record changes](https://developers.cloudflare.com/dns/manage-dns-records/how-to/batch-record-changes/#delete-records-in-bulk) for details.\n\n1. Make sure you have [an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) that allows you to edit DNS for your zone.\n2. Get your [zone ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/).\n3. Run the following script, replacing `<ZONE_ID>` and `<API_TOKEN>` with the values you got from the previous steps.\n\nWarning\n\nThis script uses [jq](https://jqlang.github.io/jq/) to format `JSON` outputs for readability. Refer to [Make API calls](https://developers.cloudflare.com/fundamentals/api/how-to/make-api-calls/) for details.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Domain deleted from Cloudflare  Cloudflare DNS docs\ndescription: \"Domain deletion commonly occurs for the following reasons:\"\nlastUpdated: 2025-10-23T07:57:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/troubleshooting/domain-deleted/\n  md: https://developers.cloudflare.com/dns/zone-setups/troubleshooting/domain-deleted/index.md\n---\n\nDomain deletion commonly occurs for the following reasons:\n\n* A user with access to the domain removed it.\n* The nameservers no longer point to Cloudflare. Cloudflare continuouslymonitors domain registration.\n* The domain was not authenticated (pending for 28 days).\n\n***\n\n## Check Audit Logs\n\nCloudflare[Audit Logs](https://developers.cloudflare.com/fundamentals/account/account-security/review-audit-logs/)contain information about domaindeletion.\n\nNote\n\n*Delete* is an **Action** that denotes domain deletion but is also commonly used for deletion of other various account settings. Therefore, ensure that **Resource** says *Zone*.\n\n***\n\n## Check registrar for Cloudflare nameservers\n\nIf your domain was using a [full setup](https://developers.cloudflare.com/dns/zone-setups/full-setup/), your registrar needs to use Cloudflare nameservers as the authoritative nameservers for your domain.\n\n1. Use either the command-line based \"whois\" application provided with your Operating System or a website such as[ICANN Lookup](https://lookup.icann.org/).\n\n   * If you are unable to find the nameserver details for your domain, reach out to your domain registrar or domain provider to provide the domain registration information.\n   * Ensure Cloudflares nameservers are the only two nameservers listed in the domain registration details.\n   * Ensure nameservers are spelled correctly in the domain registration.\n\n2. Confirm that the nameservers exactly match the nameservers provided within the **Cloudflare Nameservers** card on the [**DNS Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records) page.\n\n3. If you identify incorrect information, log in to your domain providers portal to make updates or contact your domain provider for assistance.\n\n***\n\n## Recover a deleted domain\n\nTo recover a deleted domain, [re-add it in Cloudflare](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) just like you would for a new domain.\n\nWarning\n\nCloudflare support is unable to restore DNS or settings for deleted domains.\n\n</page>\n\n<page>\n---\ntitle: Enable DNSSEC - subdomain setup  Cloudflare DNS docs\ndescription: As opposed to the normal process for enabling DNSSEC, DNSSEC with a\n  subdomain setup requires a few additional steps.\nlastUpdated: 2025-10-30T14:49:02.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/dnssec/\n  md: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/dnssec/index.md\n---\n\nAs opposed to the [normal process](https://developers.cloudflare.com/dns/dnssec/) for enabling DNSSEC, DNSSEC with a subdomain setup requires a few additional steps.\n\n## Requirements\n\nTo use DNSSEC for a subdomain setup, DNSSEC must be enabled on the parent zone. After enabling DNSSEC on the parent zone, you should wait the minimum TTL value (specified in the [SOA record](https://www.cloudflare.com/learning/dns/dns-records/dns-soa-record/) of the parent zone) to ensure DNS resolvers provide the same DNS query responses.\n\n## Setup\n\n1. [Create](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/#how-to) the child zone.\n\n2. Make sure the child zone is [active](https://developers.cloudflare.com/dns/zone-setups/reference/domain-status/) on Cloudflare and that DNS resolution is working properly for your subdomain.\n\n3. [Enable DNSSEC](https://developers.cloudflare.com/dns/dnssec/) for the child zone and save the information provided within the DS record output.\n\n4. On the [**DNS Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records) page of the parent zone, [add the DS record](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/) from the previous step.\n\n   ![Screenshot showing how to add a DS record within Cloudflare](https://developers.cloudflare.com/_astro/ds-record-example.eCudbis6_Dbmwf.webp)\n\n5. Add an A record to the child zone to validate DNS resolution.\n\n6. Wait two to six hours. Then, [test the A record](https://developers.cloudflare.com/dns/dnssec/troubleshooting/#test-dnssec-with-dig) added in the previous step using multiple DNS resolvers with DNSSEC validation (`1.1.1.1`, `8.8.8.8`, and `9.9.9.9`). For example, if the A record is for `test.child.example.com`: `dig test.child.example.com +dnssec @1.1.1.1`.\n\n</page>\n\n<page>\n---\ntitle: Migrate subdomain to a new account  Cloudflare DNS docs\ndescription: When using a subdomain setup, you can have your subdomain as a\n  separate zone within the same account as the parent domain or within a\n  different account.\nlastUpdated: 2025-05-29T18:16:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/move-to-new-account/\n  md: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/move-to-new-account/index.md\n---\n\nWhen using a [subdomain setup](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/), you can have your subdomain as a separate zone within the same account as the parent domain or within a different account.\n\nIf you have already [created a standalone subdomain zone](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/) within the same account, you can still move it to a separate account.\n\n1. [Add the subdomain](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) to a new Cloudflare account.\n2. In the original subdomain zone, [export](https://developers.cloudflare.com/dns/manage-dns-records/how-to/import-and-export/#export-records) the DNS records.\n3. Review the exported records, delete any unnecessary ones, and [import](https://developers.cloudflare.com/dns/manage-dns-records/how-to/import-and-export/#import-records) them into the new subdomain zone.\n4. Update the `NS` records in the parent zone to refer to the newly assigned nameservers of the child zone.\n\n</page>\n\n<page>\n---\ntitle: Rollback subdomain setup  Cloudflare DNS docs\ndescription: Refer to the following process to understand how you can rollback a\n  subdomain setup and recreate the corresponding subdomain DNS records in an\n  existing parent zone within Cloudflare.\nlastUpdated: 2025-10-23T07:57:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/rollback/\n  md: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/rollback/index.md\n---\n\nRefer to the following process to understand how you can rollback a [subdomain setup](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/) and recreate the corresponding subdomain DNS records in an existing parent zone within Cloudflare.\n\n## Before you begin\n\n* This guide assumes both your child domain (`blog.example.com`) and its parent domain (`example.com`) are in Cloudflare.\n* In the child zone, review and [export](https://developers.cloudflare.com/dns/manage-dns-records/how-to/import-and-export/#export-records) the DNS records.\n\nImportant\n\nThis process may incur in downtime, as it is not possible to add address records (A/AAAA) while still having [corresponding NS records at the same name](https://developers.cloudflare.com/dns/manage-dns-records/troubleshooting/existing-ns-record/) within the parent zone.\n\n## Steps\n\n1. (Optional) In the parent zone, migrate over any settings - [WAF custom rules](https://developers.cloudflare.com/waf/custom-rules/), [Rules](https://developers.cloudflare.com/rules/), [Workers](https://developers.cloudflare.com/workers/), and more - that might be needed for the child domain.\n2. (Optional) If necessary, [order an advanced SSL certificate](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/) that covers the child domain and any deeper subdomains.\n3. In the parent zone, go to the [**DNS Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records) page.\n4. Delete one of the `NS` records defined for the child domain.\n5. Edit the remaining `NS` record to create the subdomain address record.\n6. [Import](https://developers.cloudflare.com/dns/manage-dns-records/how-to/import-and-export/#import-records) the records you had obtained [before you began](#before-you-begin).\n\n</page>\n\n<page>\n---\ntitle: Subdomain delegation and available setups  Cloudflare DNS docs\ndescription: Subdomain setup relies on a process known as delegation. When, in a\n  parent domain such as example.com, an NS record is created for a subdomain\n  blog.example.com, this means that DNS management for the subdomain can be done\n  separately, in its own DNS zone.\nlastUpdated: 2025-12-03T10:55:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/\n  md: https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/index.md\n---\n\nWarning\n\nSubdomain setup is only available for Enterprise accounts. If you only want to create a subdomain for your site in Cloudflare, refer to [Create a subdomain record](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-subdomain/).\n\n[Subdomain setup](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/) relies on a process known as delegation. When, in a parent domain such as `example.com`, an [NS record](https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/) is created for a subdomain `blog.example.com`, this means that DNS management for the subdomain can be done separately, in its own [DNS zone](https://developers.cloudflare.com/dns/concepts/#zone).",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Available setups\n\nWhen configuring a subdomain setup, its availability will depend on both the parent zone setup and the setup used for the child zone. A child zone holds DNS management for a delegated subdomain.\n\n| Parent zone | Child zone | Available |\n| - | - | - |\n| [Full](https://developers.cloudflare.com/dns/zone-setups/full-setup/) or [Secondary](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/) | [Full](https://developers.cloudflare.com/dns/zone-setups/full-setup/) | Yes |\n| [Full](https://developers.cloudflare.com/dns/zone-setups/full-setup/) or [Secondary](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/) | [Secondary](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/) | Yes |\n| [Full](https://developers.cloudflare.com/dns/zone-setups/full-setup/) or [Secondary](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/) | [Partial](https://developers.cloudflare.com/dns/zone-setups/partial-setup/) | No |\n| [Partial](https://developers.cloudflare.com/dns/zone-setups/partial-setup/) | [Full](https://developers.cloudflare.com/dns/zone-setups/full-setup/) | Yes |\n| [Partial](https://developers.cloudflare.com/dns/zone-setups/partial-setup/) | [Secondary](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/) | Yes |\n| [Partial](https://developers.cloudflare.com/dns/zone-setups/partial-setup/) | [Partial](https://developers.cloudflare.com/dns/zone-setups/partial-setup/) | Yes |\n\nSubdomain zones in partial setup are not delegated\n\nSubdomains using a partial setup represent an exception in the sense that delegation does not apply in this context. As explained in the dedicated [Partial (CNAME) setup section](https://developers.cloudflare.com/dns/zone-setups/partial-setup/), this setup is intended to simply proxy individual subdomains through Cloudflare. For completeness, however, this is listed as an option in this table and the [how-to guide](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/parent-on-partial/) has detailed explanation on how to achieve a subdomain zone using partial setup.\n\nThis table assumes zones that are in an [active status](https://developers.cloudflare.com/dns/zone-setups/reference/domain-status/). For example, if you need to add the parent zone to Cloudflare when its child zone already exists in a partial setup, you can [convert the parent zone to partial](https://developers.cloudflare.com/dns/zone-setups/partial-setup/setup/#1-convert-your-zone-and-review-dns-records) while it is still in pending status.\n\n***\n\n## How to\n\nRefer to the following guides to learn how to configure a subdomain setup depending on the setup used for the parent zone:\n\n* [Parent zone on full setup](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/parent-on-full/)\n* [Parent zone on partial setup](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/setup/parent-on-partial/)\n\nAlthough the how-to guides in this documentation are focused on both parent domains and subdomains existing in Cloudflare, it is also possible to achieve a subdomain setup in Cloudflare while the parent domain exists in a different DNS provider.\n\n***\n\n## SSL/TLS certificates\n\nWhen using subdomain setup, you should consider possible interactions between parent zone and child zone configurations that could impact [SSL/TLS certificates](https://developers.cloudflare.com/ssl/) provisioning.\n\nIf a certificate is already active on the child zone for a specific hostname (`subdomain.example.com`), any certificate pack containing that exact hostname in the parent zone (`example.com`) will fail validation.\n\n## Access applications\n\nTo use subdomain setups with [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/), note that:\n\n* If the child zone is in a pending state when you create the Access application, your configuration will not automatically apply when you activate the zone. You must also re-save the Access application once your subdomain setup is active.\n\n* If you split out a subdomain which already has an Access application, you will also need to re-save the Access application to associate it with the new child zone.\n\n</page>\n\n<page>\n---\ntitle: Access Control Lists (ACLs)  Cloudflare DNS docs\ndescription: Access Control Lists (ACLs) define allowed source IP addresses from\n  where servers accept incoming data or control messages.\nlastUpdated: 2025-05-23T08:36:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/access-control-lists/\n  md: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/access-control-lists/index.md\n---\n\nAccess Control Lists (ACLs) define allowed source IP addresses from where servers accept incoming data or control messages.\n\nWhen setting up new DNS zone transfers ([incoming](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/) or [outgoing](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-primary/)), you will need to update the ACL at your other DNS provider(s) to allow Cloudflare to communicate with their server(s). You can find the Cloudflare IP addresses you need to allow at your other DNS provider(s) at [Cloudflare IP addresses](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/access-control-lists/cloudflare-ip-addresses/).\n\nFor your Cloudflare account, you only need to [create a new ACL](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/access-control-lists/create-new-list/) if you want to specify additional NOTIFY IPs that Cloudflare should listen to.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare as Primary  Cloudflare DNS docs\ndescription: With outgoing zone transfers, you can use Cloudflare as your\n  primary DNS provider and configure one or more peer DNS servers as secondary\n  DNS providers.\nlastUpdated: 2024-09-20T08:42:16.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-primary/\n  md: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-primary/index.md\n---\n\nWith outgoing zone transfers, you can use Cloudflare as your primary DNS provider and configure one or more peer DNS servers as secondary DNS providers.\n\nWhen you [make edits](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/) to Cloudflare DNS, those DNS records will be transferred from Cloudflare to your secondary provider via zone transfer using [AXFR](https://datatracker.ietf.org/doc/html/rfc5936) or [IXFR](https://datatracker.ietf.org/doc/html/rfc1995)\n\n![With Cloudflare as your primary provider in a multi-provider setup, Cloudflare periodically transfers records to your secondary DNS provider.](https://developers.cloudflare.com/_astro/cloudflare-as-primary.CS_-J48n_giOLY.webp)\n\n## How to\n\n* [Set up outgoing zone transfers](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-primary/setup/)\n\n## Availability\n\nOutgoing zone transfers are available to Enterprise customers who are currently using Cloudflare as their [authoritative DNS provider](https://developers.cloudflare.com/dns/zone-setups/full-setup/). For more details on activation and pricing, contact your account team.\n\n## Notes\n\nIf you use [Cloudflare Load Balancing](https://developers.cloudflare.com/load-balancing/), only proxied Load Balancer DNS records will be transferred.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare as Secondary  Cloudflare DNS docs\ndescription: With incoming zone transfers, you can keep your primary DNS\n  provider and use Cloudflare as a secondary DNS provider.\nlastUpdated: 2025-05-06T16:31:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/\n  md: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/index.md\n---\n\nWith incoming zone transfers, you can keep your primary DNS provider and use Cloudflare as a secondary DNS provider.\n\nWhen you make edits in your primary DNS provider, those DNS records will be transferred from your primary DNS provider to Cloudflare via zone transfer using [AXFR](https://datatracker.ietf.org/doc/html/rfc5936) or [IXFR](https://datatracker.ietf.org/doc/html/rfc1995).",
      "language": "unknown"
    },
    {
      "code": "## How to\n\n* [Set up incoming zone transfers](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/setup/)\n* Proxy traffic through Cloudflare with [Secondary DNS Override](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/proxy-traffic/)\n\n## Availability\n\nSecondary DNS is only available to Enterprise customers. For more details on activation and pricing, contact your account team.\n\n</page>\n\n<page>\n---\ntitle: Troubleshooting secondary nameservers  Cloudflare DNS docs\ndescription: Learn how to troubleshoot issues with secondary nameservers.\nlastUpdated: 2025-08-12T17:54:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/troubleshooting/\n  md: https://developers.cloudflare.com/dns/zone-setups/zone-transfers/troubleshooting/index.md\n---\n\nWhen [updating your registrar](https://developers.cloudflare.com/dns/zone-setups/zone-transfers/cloudflare-as-secondary/setup/#4-update-registrar) with the Cloudflare secondary nameservers (`nsXXXX.secondary.cloudflare.com`), you get an error.\n\nNote\n\nThe exact error message depends on the system. Some examples would be: `Entity reference not found`,` Authorization error`, `Unable to create foreign nameserver`.\n\nUpon contacting your registrar, their services confirm that the Cloudflare nameservers cannot be added at this time.\n\n***\n\n## Root Cause\n\nThis issue may arise when one of our nameservers used for secondary setup are removed from the Verisign side.\n\n***\n\n## Solution\n\nThe Cloudflare engineering team needs to be engaged [through Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/) to make sure the nameserver gets registered again manually at Verisign.\n\n</page>\n\n<page>\n---\ntitle: DELETE examples - Filters  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example deletes filters with IDs {filter_id_1} and {filter_id_2}.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/delete/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/delete/index.md\n---\n\n## Delete multiple filters\n\nThis example deletes filters with IDs `{filter_id_1}` and `{filter_id_2}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Delete a single filter\n\nThis example deletes a single filter with ID `{filter_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Endpoints - Filters  Cloudflare Firewall Rules (deprecated) docs\ndescription: \"To invoke a Cloudflare Filters API operation, append the endpoint\n  to the Cloudflare API base URL:\"\nlastUpdated: 2025-05-06T08:26:18.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/endpoints/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/endpoints/index.md\n---\n\nTo invoke a Cloudflare Filters API operation, append the endpoint to the Cloudflare API base URL:",
      "language": "unknown"
    },
    {
      "code": "For authentication instructions, refer to [Getting Started: Requests](https://developers.cloudflare.com/fundamentals/api/) in the Cloudflare API documentation.\n\nFor help with endpoints and pagination, refer to [Getting Started: Endpoints](https://developers.cloudflare.com/fundamentals/api/).\n\nNote\n\nThe Filters API endpoints require a value for `<ZONE_ID>`.\n\nTo retrieve a list of zones associated with your account, use the [List Zones](https://developers.cloudflare.com/api/resources/zones/methods/list/) operation and note the Zone ID associated with the domain for which you want to manage filters.\n\nThe Cloudflare Filters API supports the operations outlined below. Visit the pages in this section for examples.\n\n| Operation | Method & Endpoint | Notes |\n| - | - | - |\n| [Create filters](https://developers.cloudflare.com/api/resources/filters/methods/create/) | `POST zones/<ZONE_ID>/filters` | Handled as a single transaction. If there is an error, the entire operation fails. |\n| [Get filters](https://developers.cloudflare.com/api/resources/filters/methods/list/) | `GET zones/<ZONE_ID>/filters` | Lists all current filters. Results return paginated with 25 items per page by default. Use optional parameters to narrow results. |\n| [Get a filter](https://developers.cloudflare.com/api/resources/filters/methods/get/) | `GET zones/<ZONE_ID>/filters/<FILTER_ID>` | Retrieve a single filter by ID. |\n| [Update filters](https://developers.cloudflare.com/api/resources/filters/methods/bulk_update/) | `PUT zones/<ZONE_ID>/filters` | Handled as a single transaction. All filters must exist for operation to succeed. If there is an error, the entire operation fails. |\n| [Update a filter](https://developers.cloudflare.com/api/resources/filters/methods/update/) | `PUT zones/<ZONE_ID>/filters/<FILTER_ID>` | Update a single filter by ID. |\n| [Delete filters](https://developers.cloudflare.com/api/resources/filters/methods/bulk_delete/) | `DELETE zones/<ZONE_ID>/filters` | Delete existing filters. Must specify list of filter IDs.Empty requests result in no deletion. Returns HTTP status code 200 if a specified filter does not exist. |\n| [Delete a filter](https://developers.cloudflare.com/api/resources/filters/methods/delete/) | `DELETE zones/<ZONE_ID>/filters/<FILTER_ID>` | Delete a filter by ID. |\n\n</page>\n\n<page>\n---\ntitle: GET examples - Filters  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example returns all filters in zone with ID {zone_id}.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/get/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/get/index.md\n---\n\n## Get all filters\n\nThis example returns all filters in zone with ID `{zone_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Get by filter ID\n\nThis example returns the filter with ID `{filter_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Filter JSON object  Cloudflare Firewall Rules (deprecated) docs\ndescription: \"A JSON response for the Filters API has this structure:\"\nlastUpdated: 2025-05-06T08:26:18.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/json-object/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/json-object/index.md\n---\n\n## Filter object structure and properties\n\nA JSON response for the [Filters API](https://developers.cloudflare.com/api/resources/filters/methods/list/) has this structure:",
      "language": "unknown"
    },
    {
      "code": "The following table summarizes the object properties:\n\n| Property | Description | Constraints |\n| - | - | - |\n| `id` String | A UUIDv4 identifier generated by Cloudflare. | Unique, read onlyLength: 32 characters |\n| `expression` String | A Rules language expression used to evaluate requests. For more information, refer to [Expressions](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/). | |\n| `paused` Boolean | Returns `true` when the filter is not active. Use `ref` to enable/disable the filter. | Default: `false` |\n| `description` String | An informative summary of the filter. | Maximum length: 500 characters |\n| `ref` String | A short string for tagging filters. | Maximum length: 50 characters |\n\n</page>\n\n<page>\n---\ntitle: POST examples - Filters  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example creates several filters using a single API call.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/post/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/post/index.md\n---\n\nThis example creates several filters using a single API call.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: PUT examples - Filters  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example updates two filters with IDs <FILTER_ID_1> and\n  <FILTER_ID_2> using a single API call.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/put/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/put/index.md\n---\n\n## Update multiple filters\n\nThis example updates two filters with IDs `<FILTER_ID_1>` and `<FILTER_ID_2>` using a single API call.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Update a single filter\n\nThis example updates the filter with ID `{filter_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Expression validation  Cloudflare Firewall Rules (deprecated) docs\ndescription: The Cloudflare Filters API supports an endpoint for validating expressions.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/validation/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/validation/index.md\n---\n\nThe Cloudflare Filters API supports an endpoint for validating expressions.\n\n## Examples\n\n### Validate expression via query string",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Note the validation error in the response. In this example, the error is due to an invalid IP address format:",
      "language": "unknown"
    },
    {
      "code": "### Validate expression via JSON object",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Note the validation error in the response. In this example, the value for the subnet mask, `/2000`, is not a valid IPv6 CIDR mask:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: What is a filter?  Cloudflare Firewall Rules (deprecated) docs\ndescription: A filter is a way of setting up if (traffic matches certain\n  criteria), then do something.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-filters/what-is-a-filter/\n  md: https://developers.cloudflare.com/firewall/api/cf-filters/what-is-a-filter/index.md\n---\n\nA filter is a way of saying:",
      "language": "unknown"
    },
    {
      "code": "A filter contains an expression that would return `true` or `false` when evaluated against traffic passing through Cloudflare.\n\nFilter expressions are human and machine readable, and you can compose complex logic to precisely match the traffic that you are interested in detecting and acting upon.\n\nA filter object typically looks like the following:",
      "language": "unknown"
    },
    {
      "code": "The expression specified in this example filter is:",
      "language": "unknown"
    },
    {
      "code": "This filter expression has a `(this or that) and not this` structure designed to:\n\n* Capture two WordPress paths that may be subject to brute force password attacks, and\n* Exclude traffic that comes from the IP address `93.184.216.34`.\n\nImagine that this is an IP for your office. This expression demonstrates a filter that might be used (in a firewall rule) to block access to the WordPress login when accessed outside the office network.\n\nFor more information on rule expressions, refer to [Expressions](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/) in the Rules language documentation.\n\n</page>\n\n<page>\n---\ntitle: DELETE examples - Firewall rules  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example deletes firewall rules with IDs {rule_id_1} and {rule_id_2}.\nlastUpdated: 2024-09-20T11:32:34.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/delete/\n  md: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/delete/index.md\n---\n\nNote\n\nThe `DELETE` operation does not delete any filter related to the firewall rule. To delete the filter, use the [Filters API](https://developers.cloudflare.com/firewall/api/cf-filters/).\n\n## Delete multiple rules\n\nThis example deletes firewall rules with IDs `{rule_id_1}` and `{rule_id_2}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Delete a single rule\n\nThis example deletes the rule with ID `{rule_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Endpoints - Firewall rules  Cloudflare Firewall Rules (deprecated) docs\ndescription: \"To invoke a Cloudflare Firewall Rules API operation, append the\n  endpoint to the Cloudflare API base URL:\"\nlastUpdated: 2024-12-16T22:33:26.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/endpoints/\n  md: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/endpoints/index.md\n---\n\nTo invoke a Cloudflare Firewall Rules API operation, append the endpoint to the Cloudflare API base URL:",
      "language": "unknown"
    },
    {
      "code": "For authentication instructions, refer to [Getting Started: Requests](https://developers.cloudflare.com/fundamentals/api/) in the Cloudflare API documentation.\n\nFor help with endpoints and pagination, refer to [Getting Started: Endpoints](https://developers.cloudflare.com/fundamentals/api/).\n\nNote\n\nThe Firewall Rules API endpoints require a value for `<ZONE_ID>`.\n\nTo retrieve a list of zones associated with your account, use the [List Zones](https://developers.cloudflare.com/api/resources/zones/methods/list/) operation and note the zone ID associated with the domain whose firewall rules you want to manage.\n\nThe Cloudflare Firewall Rules API supports the operations outlined below. Visit the pages in this section for examples.\n\n| Operation | Method & Endpoint | Notes |\n| - | - | - |\n| [Create firewall rules](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/create/) | `POST zones/<ZONE_ID>/firewall/rules` | Handled as a single transaction. If there is an error, the entire operation fails. |\n| [List firewall rules](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/list/) | `GET zones/<ZONE_ID>/firewall/rules` | Lists all current firewall rules. Results return paginated with 25 items per page by default. Use optional parameters to narrow results. |\n| [Get a firewall rule](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/get/) | `GET zones/<ZONE_ID>/firewall/rules/<RULE_ID>` | Retrieve a single firewall rule by ID. |\n| [Update firewall rules](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/bulk_update/) | `PUT zones/<ZONE_ID>/firewall/rules` | Handled as a single transaction. All rules must exist for operation to succeed. If there is an error, the entire operation fails. |\n| [Update a firewall rule](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/update/) | `PUT zones/<ZONE_ID>/firewall/rules/<RULE_ID>` | Update a single firewall rule by ID. |\n| [Delete firewall rules](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/bulk_delete/) | `DELETE zones/<ZONE_ID>/firewall/rules` | Delete existing firewall rules. Must specify list of firewall rule IDs.Empty requests result in no deletion. Returns HTTP status code 200 if a specified rule does not exist. |\n| [Delete a firewall rule](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/delete/) | `DELETE zones/<ZONE_ID>/firewall/rules/<RULE_ID>` | Delete a firewall rule by ID. |\n\n</page>\n\n<page>\n---\ntitle: GET examples - Firewall rules  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example returns all the firewall rules in the zone with ID {zone_id}.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/get/\n  md: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/get/index.md\n---\n\n## Get all rules\n\nThis example returns all the firewall rules in the zone with ID `{zone_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Get rule by ID\n\nThis example returns the firewall rule with ID `{rule_id}`.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Firewall rules JSON object  Cloudflare Firewall Rules (deprecated) docs\ndescription: \"A JSON response for the Firewall Rules API has this structure:\"\nlastUpdated: 2025-05-06T08:26:18.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/json-object/\n  md: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/json-object/index.md\n---\n\n## Firewall rule example JSON response\n\nA JSON response for the [Firewall Rules API](https://developers.cloudflare.com/api/resources/firewall/subresources/rules/methods/list/) has this structure:",
      "language": "unknown"
    },
    {
      "code": "This table summarizes the object properties:\n\n| Name | Description | Constraints |\n| - | - | - |\n| `id` String | A UUIDv4 identifier generated by Cloudflare. | Unique, read onlyLength: 32 characters |\n| `filter` Object | A [Cloudflare Filter object](https://developers.cloudflare.com/firewall/api/cf-filters/json-object/) that contains an expression for evaluating this rule. | |\n| `action` String | The action to take when a request satisfies the filter expression for this rule. | Refer to [Firewall rules actions](https://developers.cloudflare.com/firewall/cf-firewall-rules/actions/) for a list of supported values. |\n| `priority` Number | Determines the order of evaluation for the rule relative to others. Lower values indicate greater priority. Rules without a value are evaluated last. For guidance, refer to [Avoiding priority conflicts](#avoiding-priority-conflicts). | Read onlyMaximum length: 32 |\n| `paused` Boolean | Returns `true` when the rule is not active. Use `ref` to enable/disable the rule. | Default: `false` |\n| `description` String | An informative summary of the rule. | Maximum length: 500 characters |\n| `ref` String | A short string for tagging rules. | Maximum length: 50 characters |\n\n## Avoiding priority conflicts\n\nPriority plays a key role in configuring firewall rules. With Cloudflare Filters, it is possible to construct conflicting rules such as:\n\n* Allow requests from the office IP range, and\n* Block requests with a specific user agent.\n\nRequests from the office IP range using the user agent to block would trigger both rules, but we cannot both allow and block the request. To solve this problem, firewall rules follows a strict ordering depending on action and priority.\n\nCloudflare prioritizes rules in descending order, such that priority 1 is first and rules with no priority are last. For rules of equal priority, Cloudflare orders them by action according to their [order of precedence](https://developers.cloudflare.com/firewall/cf-firewall-rules/actions/#supported-actions). In the example above, if no priority is set, the rule `allow request from the office IP range` would apply because the *allow* action has a higher precedence than *block*.\n\nTo reduce the risk of unintended behavior, it is best to explicitly specify the desired priority for potentially conflicting rules.\n\n</page>\n\n<page>\n---\ntitle: POST examples - Firewall rules  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example creates several firewall rules using a single API call.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/post/\n  md: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/post/index.md\n---\n\nThis example creates several firewall rules using a single API call.\n\nNote\n\nTo create a firewall rule you need a [filter](https://developers.cloudflare.com/firewall/api/cf-filters/what-is-a-filter/) identifier (`id`). If you have not created a filter yet, refer to the [Cloudflare Filters API documentation](https://developers.cloudflare.com/firewall/api/cf-filters/).",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: PUT examples - Firewall rules  Cloudflare Firewall Rules (deprecated) docs\ndescription: This example updates several firewall rules using a single API call.\nlastUpdated: 2024-09-20T11:32:34.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/put/\n  md: https://developers.cloudflare.com/firewall/api/cf-firewall-rules/put/index.md\n---\n\n## Update multiple rules\n\nThis example updates several firewall rules using a single API call.\n\nYou can include up to 25 rules in the JSON object array (`-d` flag) to update as a batch. The batch is handled as a transaction.",
      "language": "unknown"
    },
    {
      "code": "Note\n\n`PUT` does not update the filter specified. It only looks at the filter ID (`<FILTER_ID>`) to update the rule with a new filter.\n\nTo update the filter, use the [Filters API](https://developers.cloudflare.com/firewall/api/cf-filters/).",
      "language": "unknown"
    },
    {
      "code": "## Update a single rule\n\nThis example updates the firewall rule with ID `{rule_id}`.\n\nYou must include the following fields in the request body:\n\n* `id`\n* `action`\n* `filter.id`\n\nAll other fields are optional.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Note\n\n`PUT` overwrites fields that are not explicitly passed in the request.\n\nFor example, if the request omits `description`, any previously existing `description` value will be erased.\n\nTo preserve existing values, issue a `GET` request and based on the response, determine which fields (and respective values) to include in your `PUT` request.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Access for SaaS  Cloudflare Email security (formerly Area 1) docs\nlastUpdated: 2025-10-23T20:06:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/account-setup/sso/access/\n  md: https://developers.cloudflare.com/email-security/account-setup/sso/access/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Azure integration guide  Cloudflare Email security (formerly Area 1) docs\ndescription: This tutorial will walk you through the steps for configuring a\n  non-gallery enterprise application within Azure Active Directory to establish\n  a SAML SSO connection with Email security (formerly Area 1).\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/account-setup/sso/azure/\n  md: https://developers.cloudflare.com/email-security/account-setup/sso/azure/index.md\n---\n\nThis tutorial will walk you through the steps for configuring a non-gallery enterprise application within Azure Active Directory to establish a SAML SSO connection with Email security (formerly Area 1).\n\n## 1. Azure Active Directory configuration\n\n1. [Log in to Azure portal](https://portal.azure.com/) and open **Enterprise Applications**.\n\n2. Select **New Application**.\n\n   ![Create a new application](https://developers.cloudflare.com/_astro/step2-new-app.GbwSoYTv_ZiX1oC.webp)\n\n3. Select **Create your own application**.\n\n   ![Select create your own application](https://developers.cloudflare.com/_astro/step3-create-your-own-app.D_nI3P_9_Z1IEKh8.webp)\n\n4. Input a descriptive name for your app and select **Integrate any other application you don't find in the gallery (Non-gallery)** > **Create**.\n\n   ![Give your application a descriptive name](https://developers.cloudflare.com/_astro/step4-name.ST_JQGXc_2gWcxc.webp)\n\n5. On the application **Overview** page that opens, select **2. Set up single sign on**.\n\n   ![Select single sign-on as the type of app](https://developers.cloudflare.com/_astro/step5-sso.nYBI7rx0_Z1Gzd9c.webp)\n\n6. Select **SAML** as your single sign-on method.\n\n   ![Select SAML as the sign-on method](https://developers.cloudflare.com/_astro/step6-saml.BDfJqTFf_38jfi.webp)\n\n7. Select the pencil icon to edit the **Basic SAML Configuration**.\n\n   ![Select the pencil icon to edit Basic SAML Configuration](https://developers.cloudflare.com/_astro/step7-basic-saml.BgjLMb_o_2e2GCi.webp)\n\n8. Enter the following configuration settings:\n\n   | | |\n   | - | - |\n   | **Identifier (Entity ID)** | `https://horizon.area1security.com` |\n   | **Reply URL (Assertion Consumer Service URL)** | `https://horizon.area1security.com/api/users/saml` |\n   | **Sign-On URL** | Leave blank |\n   | **Relay State** | Leave blank |\n   | **Logout URL** | Leave blank |\n\n9. Select **Save** and the cross button to exit **Basic SAML Configuration**.\n\n10. Select the pencil icon to edit **SAML Certificates** and make the following changes:\n\n    * **Signing Option**: Select *Sign SAML response* from the drop-down menu.\n    * **Signing Algorithm**: Select *SHA-1* from the drop-down menu.\n\n    ![Select Sign SAML response and SHA-1 from the menu](https://developers.cloudflare.com/_astro/step10-saml-signing-certificate.CFnr5Wkl_1qtCJ6.webp)\n\n11. Select **Save** and the cross button to exit **SAML Certificates**.\n\n12. Still in the **SAML Certificates** section, find **Federation Metadata XML** and select **Download**. You will need this information for the SSO Configuration in the Email security dashboard.\n\n    ![Download the Metadata XML information](https://developers.cloudflare.com/_astro/step12-download.Cczu7P0M_Z2szcAC.webp)\n\nYour Azure configuration is now complete. It should look similar to this:\n\n![Your Azure configuration should be similar to this one](https://developers.cloudflare.com/_astro/config-finished.DxhgsmQg_Z1XezVM.webp)\n\nNote\n\nNow that the application configuration is complete, update **User Assignments** and **Application Properties** as needed to ensure that authorized personnel are able to access the new application from their Apps Catalog. Additionally, you may choose to update the application logo image file or the privacy policy URL.\n\n## 2. Configure Email security to connect to Azure\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. In **Users and Actions** > **Users and Permissions** add the email addresses of all your authorized administrators.\n\n   ![Fill out your authorized administrators](https://developers.cloudflare.com/_astro/step3-users-actions.ysQewtS__Z1mkxvO.webp)\n\n4. Go to **SSO Settings**, and enable **Single Sign On**.\n\n   ![Enable SSO](https://developers.cloudflare.com/_astro/step4-sso.BGGNQi5S_rNorL.webp)\n\n5. In **SSO Enforcement**, choose one of the settings according to your specific needs:\n\n   * **None**: This setting allows each user to choose SSO, or username and password plus 2FA (this is the recommended setting while testing SSO).\n   * **Admin**: This setting will force only the administrator account to use SSO. The user that enables this setting will still be able to log in using username and password plus 2FA. This is a backup, so that your organization does not get locked out of the portal in emergencies.\n   * **Non-Admin Only**: This option will require that all `Read only` and `Read & Write` users use SSO to access the portal. Admins will still have the option to use either SSO or username and password plus 2FA.\n\n6. For **SAML SSO Domain**, enter `login.microsoftonline.com`.\n\n7. In **Metadata XML** paste the XML metadata you downloaded in the previous step 11. You can open the downloaded file with a text editor to copy all the text. Make sure there are no leading carriage returns or spaces when you copy the text. Your copied text should begin with:",
      "language": "unknown"
    },
    {
      "code": "8. Select **Update Settings** to save your configuration.\n\n## 3. Test SSO configuration\n\nAfter completing both the Azure and Email security setups, you can test your SSO access. In this example, the logo for Email security has been updated.\n\nNote\n\nVerify that the User Assignments and Application Properties of your new Azure AD application have been updated accordingly to ensure that authorized personnel are able to access the new application from their Office 365/Azure Apps Catalog page. Application logos and privacy policy URL can also be updated as needed.\n\n1. Log in to your [Office 365 portal](https://portal.office.com).\n\n2. Select **All Apps**.\n\n3. Go to **Settings** > **SSO**.\n\n4. Locate the Email security Horizon application (or whichever name you gave your application), and select it to initiate your SSO login with Email security.\n\n5. If you configured everything correctly, you should be signed in to the Email security Portal and redirected to the dashboard.\n\n## Troubleshooting\n\nIf you have trouble connecting your Azure account to Email security, make sure that:\n\n* The user exists in the Email security dashboard.\n* The **Identifier** and **Reply URLs** in Azure AD are correct (refer to **Basic SAML Configuration** in step 7 of [Azure Active Directory configuration](#1-azure-active-directory-configuration)).\n* **Sign SAML response** and **SHA-1** are selected in Azure AD (refer to **SAML Certificates** in step 9 of [Azure Active Directory configuration](#1-azure-active-directory-configuration)).\n* The SAML SSO Domain is set correctly in the Email security dashboard (refer to step 6 in [Configure Email security to connect to Azure](#2-configure-email-security-to-connect-to-azure)).\n* The name ID identifier is set to **Email Address**.\n\nIf all else fails, enable Chrome browser debug logs. Then, log your activity when SSO is initiated, and contact [Cloudflare support](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n\n</page>\n\n<page>\n---\ntitle: Generic single sign-on integration guide  Cloudflare Email security\n  (formerly Area 1) docs\ndescription: Below is a generic guide to successfully set up an identity\n  provider based SAML. These options might change depending on your identity\n  provider (IDP). However, make sure you set up the options below or their\n  equivalent.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/account-setup/sso/generic-sso/\n  md: https://developers.cloudflare.com/email-security/account-setup/sso/generic-sso/index.md\n---\n\nBelow is a generic guide to successfully set up an identity provider based SAML. These options might change depending on your identity provider (IDP). However, make sure you set up the options below or their equivalent.\n\n## 1. Identity Provider SAML setup\n\n1. Log in to your SAML provider and access its setup section.\n\n2. Enter the following values to configure your IDP provider:\n\n   | | |\n   | - | - |\n   | **Single sign on URL** | `https://horizon.area1security.com/api/users/saml` |\n   | **Audience URI (SP Entity ID)** | `https://horizon.area1security.com` |\n   | **Name ID format** | *Email Address* |\n   | **Application username** | *Email* |\n   | **Response** | *Signed* |\n   | **Assertion signature** | *Unsigned* |\n   | **Signature Algorithm** | *RSA*-SHA1 |\n   | **Digest Algorithm** | *SHA1* |\n\n3. In the **Attribute Statements**, add your application users. Emails you add here should match emails users already have in the Email security dashboard.\n\n4. After finishing the setup, download the IDP metadata file. Copy and paste it into the **METADATA XML** field in the SSO section of Email securitys dashboard. Refer to **step 4** in the guide below for more details.\n\n## 2. Email security SAML setup\n\nAfter configuring settings in your SSO provider, log in to the Email security dashboard to finish setting up.\n\n1. Log in to the [Email security (formerly Area 1) dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. In **Users and Actions** > **Users and Permissions** add the email addresses of all your authorized administrators.\n\n   ![Fill out your authorized administrators](https://developers.cloudflare.com/_astro/step3-users-actions.ysQewtS__Z1mkxvO.webp)\n\n4. Go to **SSO**, and enable **Single Sign on**.\n\n   ![Enable SSO](https://developers.cloudflare.com/_astro/step4-sso.BGGNQi5S_rNorL.webp)\n\n5. In **SSO Enforcement**, choose one of the settings, according to your specific needs:\n\n   * **None**: This setting allows each user to choose SSO, or username and password plus 2FA (this is the recommended setting while testing SSO).\n   * **Admin**: This setting will force only the administrator account to use SSO. The user that enables this setting will still be able to log in using username and password plus 2FA. This is a backup, so that your organization does not get locked out of the portal in emergencies.\n   * **Non-Admin Only**: This option will require that all `Read only` and `Read & Write` users use SSO to access the portal. Admins will still have the option to use either SSO or username and password plus 2FA.\n\n6. In **SAML SSO Domain** enter the domain that points to your SSO provider.\n\n7. In **METADATA XML** paste the SAML XML metadata settings from your provider. These settings (and even their exact text descriptions) are in different locations depending on your SSO provider.\n\n8. Select **Update Settings** to save your configuration.\n\n## Troubleshooting\n\nIf you have trouble connecting your SAML provider to Email security, make sure that:\n\n* The users you have configured in your SAML provider exist in the Email security dashboard.\n* You are using email address as an attribute (in step 2, refer to **Name ID format** and **Application username**).\n* You are using the SHA-1 algorithm.\n* Your encryption is set to 2048 bits.\n\nIf all else fails, enable Chrome browser debug logs. Then, log your activity when SSO is initiated, and contact [Cloudflare support](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n\n</page>\n\n<page>\n---\ntitle: Okta integration guide  Cloudflare Email security (formerly Area 1) docs\ndescription: In this tutorial you will learn how to connect your Email security\n  (formerly Area 1) account to Okta. When single sign-on (SSO) is correctly\n  configured, your authorized employees can connect to the Email security\n  dashboard using a familiar user name and password.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/account-setup/sso/okta/\n  md: https://developers.cloudflare.com/email-security/account-setup/sso/okta/index.md\n---\n\nIn this tutorial you will learn how to connect your Email security (formerly Area 1) account to Okta. When single sign-on (SSO) is correctly configured, your authorized employees can connect to the Email security dashboard using a familiar user name and password.\n\n## 1. Create an Email security app in Okta\n\nYou will need to manually create an app for Email security in Okta.\n\n1. Log in to Okta as an administrator.\n\n2. In the Admin console, go to **Applications** > **Applications**.\n\n   ![Go to Applications in your Okta Admin console](https://developers.cloudflare.com/_astro/step2-applications.T6lbX9rp_ZdHNaW.webp)\n\n3. Select **Create App Integration** > **SAML 2.0**, and select **Next**.\n\n   ![Choose SAML 2.0 as the new app integration type](https://developers.cloudflare.com/_astro/step3-saml.C-ZfFOEP_152uO9.webp)\n\n4. Enter a descriptive name for your app, such as `Email security`, and select **Next**.\n\n5. Enter the following settings for **SAML Settings**:\n\n   | | |\n   | - | - |\n   | **Single sing on URL** | `https://horizon.area1security.com/api/users/saml` |\n   | **Audience URI (SP Entity ID)** | `https://horizon.area1security.com/api/users/saml` |\n   | **Name ID format** | Select *EmailAddress* from the drop-down menu. |\n   | **Application username** | Select *Email* from the drop-down menu. |\n   | **Response** | *Signed* |\n   | **Assertion signature** | *Unsigned* |\n   | **Signature Algorithm** | *RSA-SHA1* |\n   | **Digest Algorithm** | *SHA1* |\n   | **Attribute statements (optional)** | |\n   | **Name** | Enter email addresses for your users. Should match users already added to Email security (formerly Area 1) dashboard. |\n   | **Name format** | Select *Unspecified* from the drop-down menu. |\n   | **Value** | Select `user.email` from the drop-down menu. |\n\n   ![Input the correct settings in SAML settings](https://developers.cloudflare.com/_astro/step5-saml-settings.BAj5ddDR_1rhJ9K.webp)\n\n6. Select **Next**.\n\n7. Under **Are you a customer or a partner?**, select **I'm an Okta customer adding an internal app**.\n\n8. In **App type**, select **This is an internal app that we have created**.\n\n9. Select **Finish**.\n\n10. Okta should display the app you have just created. If not, go to **Applications** > **Applications**, and select it.\n\n11. In the **Sign On** tab, go to **View SAML setup instructions** and select it to retrieve the SAML provider information.\n\n    ![Find the View SAML setup instructions button](https://developers.cloudflare.com/_astro/step11-saml-instructions.DbEhrhiJ_1ILXEN.webp)\n\n12. Copy and save the link in **Identity Provider Single Sign-On URL**. You will need it later to use in the Email security dashboard.\n\n    ![Copy and save the SSO URL to use later in the Email security dashboard](https://developers.cloudflare.com/_astro/step12-sso-url.C4qgHtJB_ZlHSrv.webp)\n\n13. Scroll down to **Optional**. You might need to enlarge the text box to copy and save all the XML data. You will need this information to finish configuration in the Email security dashboard. The start of the metadata should be similar to the following:",
      "language": "unknown"
    },
    {
      "code": "![Copy and save the XML metadata to use later in the Email security dashboard](https://developers.cloudflare.com/_astro/step13-optional.BPDC1TmW_Z3KH4b.webp)\n\n## 2. Configure Email security to connect to Okta\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. In **Users and Actions** > **Users and Permissions** add the email addresses of all your authorized administrators.\n\n   ![Fill out your authorized administrators](https://developers.cloudflare.com/_astro/step3-users-actions.ysQewtS__Z1mkxvO.webp)\n\n4. Go to **SSO Settings** and enable **Single Sign On** switch.\n\n   ![Enable SSO](https://developers.cloudflare.com/_astro/step4-sso.BGGNQi5S_rNorL.webp)\n\n5. In **SSO Enforcement**, choose one of the settings according to your specific needs:\n\n   * **None**: This setting allows each user to choose SSO, or username and password plus 2FA (this is the recommended setting while testing SSO).\n   * **Admin**: This setting will force only the administrator account to use SSO. The user that enables this setting will still be able to log in using username and password plus 2FA. This is a backup, so that your organization does not get locked out of the portal in emergencies.\n   * **Non-Admin Only**: This option will require that all `Read only` and `Read & Write` users use SSO to access the portal. Admins will still have the option to use either SSO or username and password plus 2FA.\n\n6. In **SAML SSO Domain** enter the domain you saved from step 13. For example, `area1security-examplecorp.okta.com`.\n\n7. In **Metadata XML** paste the XML metadata you saved from step 14.\n\n8. Select **Update Settings** to save your configuration.\n\nLog out of any customer portal sessions. Your Okta account should now show a tile for Email security (formerly Area 1).\n\n</page>\n\n<page>\n---\ntitle: Setup - API deployment  Cloudflare Email security (formerly Area 1) docs\ndescription: When you first get started with Email security (formerly Area 1),\n  you will need to set up a way to connect your current mail environment with\n  Email security.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/deployment/api/setup/\n  md: https://developers.cloudflare.com/email-security/deployment/api/setup/index.md\n---\n\nArea 1 has been renamed\n\nArea 1 is now **Email Security (formerly Area 1)**.\n\nWhen you first get started with Email security (formerly Area 1), you will need to set up a way to connect your current mail environment with Email security.\n\n## BCC setup\n\nSend messages to Email security via BCC configurations within your email provider:\n\n* [Google Workspace BCC setup](https://developers.cloudflare.com/email-security/deployment/api/setup/gsuite-bcc-setup/)\n* [Microsoft Exchange BCC setup](https://developers.cloudflare.com/email-security/deployment/api/setup/exchange-bcc-setup/)\n\n## Journaling setup\n\nSend messages to Email security via a Journaling configuration within your email provider:\n\n* [Office 365 journaling setup](https://developers.cloudflare.com/email-security/deployment/api/setup/office365-journaling/)\n\n## Microsoft Graph API\n\nSend messages to Email security via a Microsoft Graph API configuration within your email provider:\n\n* [Office 365 Microsoft Graph API setup](https://developers.cloudflare.com/email-security/deployment/api/setup/office365-graph-api/)\n\n## Next steps\n\nRegardless of your setup (BCC, journaling or MS Graph API), you may also want to set up either manual or automatic [retraction](https://developers.cloudflare.com/email-security/email-configuration/retract-settings/) to take post-delivery actions against suspicious messages.\n\n</page>\n\n<page>\n---\ntitle: Reference - Inline deployment  Cloudflare Email security (formerly Area\n  1) docs\nlastUpdated: 2024-12-17T15:27:22.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/email-security/deployment/inline/reference/\n  md: https://developers.cloudflare.com/email-security/deployment/inline/reference/index.md\n---\n\n* [Egress IPs](https://developers.cloudflare.com/email-security/deployment/inline/reference/egress-ips/)\n\n</page>\n\n<page>\n---\ntitle: Setup - Inline deployment  Cloudflare Email security (formerly Area 1) docs\ndescription: \"For help getting started with an inline setup, refer to the following guides:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/deployment/inline/setup/\n  md: https://developers.cloudflare.com/email-security/deployment/inline/setup/index.md\n---\n\nFor help getting started with an [inline setup](https://developers.cloudflare.com/email-security/deployment/inline/), refer to the following guides:\n\n* [Office 365 - Email security (formerly Area 1) as MX Record](https://developers.cloudflare.com/email-security/deployment/inline/setup/office-365-area1-mx/)\n* [Google Workspace - Email security (formerly Area 1) as MX Record](https://developers.cloudflare.com/email-security/deployment/inline/setup/gsuite-area1-mx/)\n* [Cisco - Email security (formerly Area 1) as MX Record](https://developers.cloudflare.com/email-security/deployment/inline/setup/cisco-area1-mx/)\n* [Cisco - Cisco as MX record](https://developers.cloudflare.com/email-security/deployment/inline/setup/cisco-cisco-mx/)\n\n</page>\n\n<page>\n---\ntitle: Alert Webhooks  Cloudflare Email security (formerly Area 1) docs\ndescription: \"Alert Webhooks allow you to connect external services to Email\n  security, including:\"\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/domains-and-routing/alert-webhooks/\n  md: https://developers.cloudflare.com/email-security/email-configuration/domains-and-routing/alert-webhooks/index.md\n---\n\nAlert Webhooks allow you to connect external services to Email security, including:\n\n* Slack\n* Email addresses\n* [SIEM](https://developers.cloudflare.com/email-security/reporting/siem-integration/)\n* Microsoft Teams\n\n## Create an alert webhook\n\nTo create an alert webhook in Email security:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. Go to **Email Configuration** > **Domains & Routing** > **Alert Webhooks**.\n4. Select **New Webhook**.\n5. Select an **App Type**.\n6. Enter the **Target**.\n7. Select **Publish Webhook**.\n\n</page>\n\n<page>\n---\ntitle: Domains  Cloudflare Email security (formerly Area 1) docs\ndescription: Email security works through a system of domain-based routing,\n  where Cloudflare receives and evaluates incoming email from a domain.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/domains-and-routing/domains/\n  md: https://developers.cloudflare.com/email-security/email-configuration/domains-and-routing/domains/index.md\n---\n\nEmail security works through a system of domain-based routing, where Cloudflare receives and evaluates incoming email from a domain.\n\n## Create a domain\n\nTo create a new domain in Email security:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. Go to **Email Configuration** > **Domains & Routing** > **Domains**.\n\n4. Select **New Domain**.\n\n5. Enter the following information:\n\n   * **Domain**: The domain name receiving email traffic.\n   * **Configured As**: Choose **MX Records** or specify a number of **Hops** (depending on your email architecture).\n   * **Forwarding To**: Enter the hostname of your email provider.\n   * **IP Restrictions** (optional): Restrict incoming traffic to the IP addresses of your mail servers.\n   * **Inbound TLS** (only available for non-MX domains): Applies TLS to incoming traffic.\n   * **Outbound TLS**: Choose between **Forward all messages over TLS** (recommended) or **Forward all messages using opportunistic TLS**.\n   * **Quarantine Policy**: Choose the [dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) you want to send to [Admin quarantine](https://developers.cloudflare.com/email-security/email-configuration/admin-quarantine/).\n\n6. Select **Publish Domain**.\n\n***\n\n## Edit a domain\n\nTo edit an existing domain:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. Go to **Email Configuration** > **Domains & Routing** > **Domains**.\n4. On a specific domain, select **...** > **Edit**.\n5. Make changes as needed.\n6. Select **Update Domain**.\n\n***\n\n## Delete a domain\n\nTo delete a domain:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. Go to **Email Configuration** > **Domains & Routing** > **Domains**.\n4. On a specific domain, select **...** > **Delete**.\n\n</page>\n\n<page>\n---\ntitle: Partner Domains TLS  Cloudflare Email security (formerly Area 1) docs\ndescription: To add additional TLS requirements for emails coming from certain\n  domains, you can enforce higher levels of SSL/TLS inspection. If TLS is\n  required, mail without TLS from the specified domain will be dropped.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/domains-and-routing/partner-domains-tls/\n  md: https://developers.cloudflare.com/email-security/email-configuration/domains-and-routing/partner-domains-tls/index.md\n---\n\nTo add additional TLS requirements for emails coming from certain domains, you can enforce higher levels of SSL/TLS inspection. If TLS is required, mail without TLS from the specified domain will be dropped.\n\n## Add a domain\n\nTo require that email from a specific domain passes SSL/TLS inspection:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. On **Email Configuration**, go to **Domains & Routing** > **Partner Domains TLS**.\n4. Select **New Partner Domain**.\n5. Enter a **Domain** and any **Notes**.\n6. Select **Save**.\n\n## Exempt TLS inspection\n\nIf you decide to exempt a domain from TLS inspection - by toggling **Require TLS Inbound** to **Off** - this will not turn off enforcement against legacy standards like SSLv1, SSLv2, and TLSv1, which is generally considered insecure.\n\n</page>\n\n<page>\n---\ntitle: Link actions  Cloudflare Email security (formerly Area 1) docs\ndescription: Create actions for emails with specific dispositions. URL defang\n  means that every URL in an email of the selected type will be rewritten so\n  that the user cannot follow the link. For example, https://www.example.com\n  will become https[:]//www[.]example[.]com.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/email-policies/link-actions/\n  md: https://developers.cloudflare.com/email-security/email-configuration/email-policies/link-actions/index.md\n---\n\n## Disposition actions\n\nCreate actions for emails with specific [dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/). `URL defang` means that every URL in an email of the selected type will be rewritten so that the user cannot follow the link. For example, `https://www.example.com` will become `https[:]//www[.]example[.]com`.\n\nTo update or create a new disposition action:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. On **Email Configuration**, go to **Email Policies** > **Link Actions**.\n4. In **Disposition Actions** select **Edit**.\n5. For each disposition, such as `MALICIOUS`, `SPAM`, and `BULK`, choose the action you want to perform.\n\n## Email Link Isolation\n\nEmail Link Isolation rewrites links that could be exploited, alerts users when there is uncertainty around the website they are visiting, and protects against malware and vulnerabilities through [Cloudflare Browser Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/).\n\nWhen you enable Email Link Isolation, the service rewrites links in emails and opens them in a browser tab where all page contents are fetched and rendered on a remote server. When this feature is enabled, any malware that might be present in a web page or email link is isolated at the server level, and will not infect and compromise the client network at the endpoint.\n\nSuspicious hyperlinks are system-determined, and triggered by a dynamic isolation list maintained by Cloudflares security team.\n\n### Previous disposition actions\n\nWhen you enable Email Link Isolation, Cloudflare no longer takes into account [URL actions](#disposition-actions) based on the [emails dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/). URL actions are, rather, based on attributes of the link.\n\nLink rewriting applies to all email dispositions. If you have link actions set for dispositions, you will see a warning when enabling Email Link Isolation. This indicates that Email Link Isolation's rewriting will apply globally.\n\n### Enable Email Link Isolation\n\nEmail Link Isolation and Microsoft O365\n\nIf you use Microsoft Office 365, you need to allowlist the URL `https://linkdefender.cloudflare.com` before enabling Email Link Isolation. Refer to [Microsoft's documentation](https://learn.microsoft.com/en-us/microsoft-365/security/office-365-security/tenant-allow-block-list-urls-configure) to learn how to allowlist a URL.\n\nTo enable Email Link Isolation you must have an [inline deployment](https://developers.cloudflare.com/email-security/deployment/inline/) for your Email security setup. Email Link Isolation is not available if Email security is deployed through [journaling or BCC](https://developers.cloudflare.com/email-security/deployment/api/setup/) setups.\n\nEmail Link Isolation can only be used when there are no other security applications doing URL rewrites. Double link rewrites are not supported.\n\nTo enable Email Link Isolation:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. On **Email Configuration**, go to **Email Policies** > **Link Actions**.\n4. Scroll to **Email Link Isolation** and enable it.\n\nEmail Link Isolation is now enabled.\n\nNote\n\nEmail Link Isolation does not have advanced configuration options. If you need more fine-grained control over what users can do in an isolated browser session, you must have a Cloudflare Zero Trust account and make your changes on [Browser Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/).\n\n## URL rewrite ignore patterns\n\nUse this option to ignore rewrites on URLs matching specific patterns. This feature allows you to ensure that internal corporate services never have links rewritten for them.\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. On **Email Configuration**, go to **Email Policies** > **Link Actions**.\n4. Scroll to **URL Rewrite Ignore Patterns**.\n5. Add a new URL pattern to **URL pattern** and select **Add Pattern**.\n\n</page>\n\n<page>\n---\ntitle: Text add-ons  Cloudflare Email security (formerly Area 1) docs\ndescription: When a message receives a specific disposition from Email security\n  (formerly Area 1), you can add additional information to the subject and body\n  of each message.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/email-policies/text-addons/\n  md: https://developers.cloudflare.com/email-security/email-configuration/email-policies/text-addons/index.md\n---\n\nWhen a message receives a specific [disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) from Email security (formerly Area 1), you can add additional information to the subject and body of each message.\n\nThis information provides additional context to your employees, which can help them make better decisions if you choose to have a more permissive email policy:\n\n* **Subject prefixes**: Can tell recipients which category the message is in. Subject prefixes always state the final [disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) of the message.\n* **Body prefixes**: Provide more context about why the message was added to a specific category. Body prefixes include all the detections that were triggered. This information depends on the [prefixes you enable](#update-text-add-ons).\n\nFor example, an email might have the dispositions `EXTERNAL MALICIOUS` in the subject, and `EXTERNAL MALICIOUS SUSPICIOUS UCE` in its body.\n\nNote\n\nText add-ons are only applicable to customers using an [inline setup](https://developers.cloudflare.com/email-security/deployment/inline/).\n\n## Update text add-ons\n\nTo update or add a new add-on to the subject or body of a message:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. On **Email Configuration**, go to **Email Policies** > **Text Add-Ons**.\n\n4. Select **Edit**.\n\n5. For each **Disposition**, choose whether prefixes are **Enabled** and whether you want to update the **Custom Label**.\n\n6. If desired, you can also use **Subject Prefix** or **Body Prefix** to update the text added before or after the rendered disposition:\n\n   * **Subject Prefix**: Includes a dynamic value for `%LABELS` that lists the disposition and can include additional text.\n   * **Body Prefix**: Includes a dynamic value for `%LABELS` that lists the disposition and `%REASONS` that lists the reasons behind an assigned disposition. Can include additional, HTML-formatted text.\n\n7. Select **Update Text Add-Ons**.\n\n</page>\n\n<page>\n---\ntitle: Allowed patterns  Cloudflare Email security (formerly Area 1) docs\ndescription: When you set up allowed patterns, Email security email security\n  exempts messages that match certain patterns from normal detection scanning.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/lists/allowed-patterns/\n  md: https://developers.cloudflare.com/email-security/email-configuration/lists/allowed-patterns/index.md\n---\n\nWhen you set up **allowed patterns**, Email security email security exempts messages that match certain patterns from normal detection scanning.\n\n## Add an allowed pattern\n\nTo create a new allowed pattern:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. On **Email Configuration**, go to **Allow List** > **Allowed Patterns**.\n\n4. Select **+ New Pattern**.\n\n5. Enter the pattern information:\n\n   * **Allowed Pattern**: Enter one of the following types of pattern:\n\n     * **Email addresses**: Must be a valid email.\n     * **IP addresses**: Can only be IPv4. IPv6 and CIDR are invalid entries.\n     * **Regular expressions**: Must be [valid Java expressions](https://www.freeformatter.com/java-regex-tester.html).\n\n   * **Allow Type**: Choose one or more of the following types:\n\n     * **Trusted Sender**: Messages will bypass all [detections](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) and link following by Email security. Typically, only applies to phishing simulations from vendors such as KnowBe4.\n     * **Exempt Recipient**: Will exempt messages from all Email security [detections](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) intended for recipients matching this pattern (email address or regular expression only). Typically, this only applies to submission mailboxes for user reporting to security.\n     * **Acceptable Sender**: Will exempt messages from the `SPAM`, `SPOOF`, and `BULK` [dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#available-values) (but not `MALICIOUS` or `SUSPICIOUS`). Commonly used for external domains and sources that send mail on behalf of your organization, such as marketing emails or internal tools.\n\n   * **Notes**: Provide additional notes about the allowed pattern.\n\n6. If you chose *Trusted Sender* or *Acceptable Sender* in the previous step, you will be able to choose whether to verify the sender. When the **Verify Sender** option is selected, the allow list entry will only be honored if it aligns with a passing authentication by DMARC or SPF or DKIM.\n\n7. Select **Save**.\n\n### CSV uploads\n\nYou can also upload a CSV file of multiple allowed patterns. The CSV file must be smaller than 150 KB, start with a header row of all required values, and contain no additional fields.\n\nAn example file would look like this:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Block lists  Cloudflare Email security (formerly Area 1) docs\ndescription: When you add blocked senders, Email security automatically marks\n  all messages from these senders with a MALICIOUS disposition.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/lists/block-list/\n  md: https://developers.cloudflare.com/email-security/email-configuration/lists/block-list/index.md\n---\n\nWhen you add **blocked senders**, Email security automatically marks all messages from these senders with a `MALICIOUS` [disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/).\n\n## Add a blocked sender\n\nTo create a new blocked pattern:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. On **Email Configuration**, go to **Block List** > **Blocked Senders**.\n\n4. Select **+ New Sender**.\n\n5. Enter the pattern information:\n\n   * **Sender**: Enter one of the following types of pattern:\n\n     * **Email addresses**: Must be a valid email.\n     * **IP addresses**: Can only be IPv4. IPv6 and CIDR are invalid entries.\n     * **Regular expressions**: Must be [valid Java expressions](https://www.freeformatter.com/java-regex-tester.html). Regular expressions are matched with fields related to the sender email address (`envelope from`, `header from`, `reply-to`), the originating IP address, and the server name for the email.\n\n   * **Notes**: Provide additional notes about the blocked sender pattern.\n\n6. Select **Save**.\n\n### CSV uploads\n\nYou can also upload a CSV file of multiple allowed patterns. The CSV file must be smaller than 150 KB, start with a header row of all required values, and contain no additional fields.\n\nAn example file would look like this:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Trusted domains  Cloudflare Email security (formerly Area 1) docs\ndescription: Trusted domains allows you to identify domains that should be\n  exempted from Email security (formerly Area 1) detections.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/lists/trusted-domains/\n  md: https://developers.cloudflare.com/email-security/email-configuration/lists/trusted-domains/index.md\n---\n\n**Trusted domains** allows you to identify domains that should be exempted from Email security (formerly Area 1) detections.\n\n## Default behavior\n\nWhen messages come to your recipients from certain domains, Email security triggers certain [detections](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) by default:\n\n* **Proximity Domains**: Domains with similar spelling to your existing domain. Will trigger a `SPOOF` detection.\n* **Recent Domains**: Domains created recently (exact definition set in [Added Detections](https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/added-detections/)). Will trigger a `MALICIOUS` or `SUSPICIOUS` detection.\n\nHowever, sometimes those domains are legitimate. For example, your company may have registered several lookalike domains to combat domain squatters.\n\nTo exempt specific domains from these detections, you can add trusted domains.\n\n## Add a trusted domain\n\nTo add a trusted domain:\n\n1. Log in to the [Email security (formerly Area 1) dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. On **Email Configuration**, go to **Allow List** > **Trusted Domains**.\n\n4. Select **+ Add Domain**.\n\n5. The exact flow varies based on what you select for your **Pattern Type**:\n\n   * **Domain**: Allows you to specify a particular domain and then adjust triggers for *Proximity Domain* and *Recent Domain*.\n   * **Create Regex**: Allows you to create Regex rules for the domain name, top-level domain (TLDs), and subdomains and then adjust triggers for *Proximity Domain* and *Recent Domain*.\n\n6. Select **Save**.\n\n### CSV uploads\n\nYou can also upload a CSV file of multiple allowed patterns, so long as the file is smaller than 150 KB, starts with a header row of all required values, and contains no additional fields.\n\nAn example file would look like this:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Added Detections  Cloudflare Email security (formerly Area 1) docs\ndescription: With Added Detections, you can manage various configurations\n  applied at the time of analyzing email traffic.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/added-detections/\n  md: https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/added-detections/index.md\n---\n\nWith **Added Detections**, you can manage various configurations applied at the time of analyzing email traffic.\n\nThese settings apply particularly to trusted business partners that your organization may do business with (vendors, external providers, and more).\n\n## Available configurations\n\n| Feature | Description |\n| - | - |\n| Malicious Domain Age | Controls the threshold for a **Malicious** [disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#dispositions) based on domain age. Maximum of 120 days. |\n| Suspicious Domain Age | Controls the threshold for a **Suspicious** [disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#dispositions) based on domain age. Maximum of 120 days. |\n| Encrypted Attachment Scanning | Auto-scans encrypted attachments to detect sophisticated malware campaigns. |\n| Anti-Spam Engine | Detects bulk emails or unsolicited commercial emails and marks them with a **Bulk** [disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#dispositions). |\n| Active Fraud Prevention | Inspects and assesses new domain traffic that could be launched from third-party partners or similar organizations. |\n| Blank Email Detection | Detects emails with blank bodies and assigns a default disposition. You can choose between **Malicious** and **Suspicious** as [dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#dispositions). |\n| [ACH](https://en.wikipedia.org/wiki/Automated_clearing_house) change from free email detection | Detects payroll inquiries or change requests from free email domains. You can choose between **Malicious** and **Suspicious** as [dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#dispositions). |\n| HTML attachment email detection | Detects HTM and HTML attachments in emails. You can choose between **Malicious** and **Suspicious** as [dispositions](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#dispositions). |\n\n## Access Added Detections\n\nTo access **Added Detections** and potentially adjust your settings:\n\n1. Log in to the [Email security (formerly Area 1) dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. On **Email Configuration**, go to **Enhanced Detections** > **Added Detections**.\n\nFrom this view, you can adjust [various configurations](#available-configurations).\n\n</page>\n\n<page>\n---\ntitle: Business email compromise (BEC)  Cloudflare Email security (formerly\n  Area 1) docs\ndescription: Attackers often try to impersonate executives within an\n  organization when sending malicious emails (with requests about banking\n  information, trade secrets, etc.).\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/business-email-compromise/\n  md: https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/business-email-compromise/index.md\n---\n\nAttackers often try to impersonate executives within an organization when sending malicious emails (with requests about banking information, trade secrets, etc.).\n\nThe **Business email compromise (BEC)** feature protects against these attacks by adding [an attribute](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/#attributes) to any spoofed email messages matching these sensitive email addresses. Information about key users you enter in the dashboard is used by Email security to run enhanced scan techniques and find these spoofed emails.\n\n## Setup\n\nYou have several options for adding email addresses to BEC protection.\n\n### Using the dashboard\n\nUsing the dashboard, you can add email addresses individually or upload a CSV file:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. On **Email Configuration**, go to **Enhanced Detections**.\n4. Select **New Display Name**.\n5. Enter an email address manually or upload a CSV file.\n\n#### CSV uploads\n\nYou can also upload a CSV file of multiple email addresses. The CSV file must be smaller than 150 KB, start with a header row of all required values, and contain no additional fields.\n\nAn example file would look like this:",
      "language": "unknown"
    },
    {
      "code": "### Integrating a directory\n\nIf you want your BEC contacts automatically synced, Email security also supports directory integration for Microsoft and Gmail. Refer to [Office 365 directory guide](https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/business-email-compromise/o365-directory-guide/) and [Google Workspaces directory integration](https://developers.cloudflare.com/email-security/email-configuration/enhanced-detections/business-email-compromise/gworkspaces-directory-guide/) for more information.\n\n### Review threats\n\nEmail security's dashboard has at-a-glance insights regarding BEC attacks, such as top email addresses targeted. Refer to [Statistics overview](https://developers.cloudflare.com/email-security/reporting/statistics-overview/) and [Types of malicious detections](https://developers.cloudflare.com/email-security/reporting/types-malicious-detections/) for more information.\n\n</page>\n\n<page>\n---\ntitle: Phish Alert Button (PAB)  Cloudflare Email security (formerly Area 1) docs\ndescription: If you have KnowBe4 Phish Alert Button (PAB) for Microsoft Outlook,\n  Microsoft Exchange, Microsoft 365, and Google Workspace follow the steps below\n  to set it up with Email security and report suspicious emails.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/knowbe4/\n  md: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/knowbe4/index.md\n---\n\nIf you have KnowBe4 Phish Alert Button (PAB) for Microsoft Outlook, Microsoft Exchange, Microsoft 365, and Google Workspace follow the steps below to set it up with Email security and report suspicious emails.\n\n1. Log in to your KnowBe4 console.\n\n2. Select the **cog symbol** to go to your **Account Settings** screen.\n\n3. Go to **Account Integrations** > **Phish Alert**.\n\n4. In **Setting Name**, give your PAB a descriptive name.\n\n5. (Optional) If you do not want to differentiate between spam and malicious emails, enter `<ACCOUNT_NAME>+user+malicious@submission.area1reports.com` in **Send Non-Simulated Emails to** to receive spam reports.\n\n   Note\n\n   You can find the submission addresses in your Email Security (formerly Area 1) dashboard, in **Support** > [**Service Addresses**](https://horizon.area1security.com/support/service-addresses).\n\n6. If you do want to differentiate between spam and malicious emails, go to **Comments and Disposition Settings**.\n\n7. Select **Allow users to leave comments and disposition**.\n\n8. Select **Disable Unknown Email Disposition**.\n\n9. In **Send Dispositioned Emails to**, you need to enter the email addresses to forward spam and malicious emails. You can find these addresses in your **Email security dashboard** > **Support** > [**Service Addresses**](https://horizon.area1security.com/support/service-addresses):\n\n   1. **Phishing/Suspicious**: Enter your malicious email address. For example, `<ACCOUNT_NAME>+user+malicious@submission.area1reports.com`.\n   2. **Spam/Junk**: Enter your spam email address. For example, `<ACCOUNT_NAME>+user+spam@submission.area1reports.com`.\n\n10. Select **Save changes**.\n\n</page>\n\n<page>\n---\ntitle: Microsoft Report Message (not compatible)  Cloudflare Email security\n  (formerly Area 1) docs\ndescription: Due to changes in the flow of submission messages, Microsoft no\n  longer honors mail flow rules for the Microsoft Report Message button.\n  Therefore, Email security is not compatible with this tool anymore.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/microsoft-report-message/\n  md: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/microsoft-report-message/index.md\n---\n\nDue to changes in the flow of submission messages, Microsoft no longer honors mail flow rules for the Microsoft Report Message button. Therefore, Email security is not compatible with this tool anymore.\n\nTo learn more about what is happening, log in to your Microsoft account as an administrator, and [review the communication from Microsoft](https://admin.microsoft.com/AdminPortal/Home?ref=MessageCenter/:/messages/MC690173).\n\nIf you need to submit phish samples or missed phish to Email security, we recommend using the [PhishNet for Office 365](https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/phishnet-o365/) integrated app instead.\n\n</page>\n\n<page>\n---\ntitle: PhishNet for Google Workspace  Cloudflare Email security (formerly Area\n  1) docs\ndescription: PhishNet is an add-in button that helps users to submit directly to\n  Email security (formerly Area 1) phish samples missed by Area 1s detection.\n  PhishNet avoids the previous process, where users had to report phish to their\n  email admins, which then had to manually download and forward the sample to\n  Email security.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/phishnet-gworkspace/\n  md: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/phishnet-gworkspace/index.md\n---\n\nPhishNet is an add-in button that helps users to submit directly to Email security (formerly Area 1) phish samples missed by Area 1s detection. PhishNet avoids the previous process, where users had to report phish to their email admins, which then had to manually download and forward the sample to Email security.\n\n## Prerequisites\n\nTo set up PhishNet with Google Workspace you need admin access to your Google Workspace account.\n\n## Set up PhishNet for Google Workspace\n\n1. Log in to [Google Workspace Marketplace apps](https://workspace.google.com/marketplace/app/cloudflare_phishnet/11369379045) using this direct link and an administrator account.\n\n2. Select **Admin install** to install Cloudflare PhishNet. Read the warning, and select **Continue**.\n\n   ![Select Admin install to start installing Cloudflare PhishNet](https://developers.cloudflare.com/_astro/step1-phishnet-install.CfM5xhRF_1Lpxjn.webp)\n\n3. In the window that opens, choose between installing Cloudflare PhishNet for **Everyone at your organization** or **Certain groups or organizational units**. If you choose this last option, you will also have to select which users you want to install PhishNet to.\n\n   ![Select to which users you want to install PhishNet to](https://developers.cloudflare.com/_astro/step3-select-users.CCzNXpJV_1lOqP8.webp)\n\n4. After choosing the groups you want to install PhishNet for, agree with Googles terms of service, and select **Finish**.\n\n5. Google Workspace will inform you that Cloudflare PhishNet has been installed. Select **Done** to continue.\n\n   ![If everything goes well, you will need to select Done to continue.](https://developers.cloudflare.com/_astro/step5-done.BqPJg1RK_Z1RlVrL.webp)\n\nCloudflare PhishNet is now installed.\n\n## Submit phish with PhishNet\n\n1. In your Gmail web client, open the message you would like to flag as either spam or phish.\n\n2. (Optional) Open Gmails **side panel** if it is not already opened.\n\n   ![Open the side panel on Gmail's interface if you need to](https://developers.cloudflare.com/_astro/step2-side-panel.Yted0FAL_odlcg.webp)\n\n3. Select the **PhishNet logo**.\n\n   ![Select PhishNet's logo](https://developers.cloudflare.com/_astro/step3-logo.BcawBXoq_ZN2PFt.webp)\n\n4. Under **Select Submission Type**, select the type of your submission  *Spam* or *Phish*.\n\n   ![Choose the type of submission you'd like to make](https://developers.cloudflare.com/_astro/step4-submission-type.BethMG3H_ZFhg5B.webp)\n\n5. Select **Submit Report**.\n\nPhishNet will show you a **Submission Complete** message once the email has been successfully submitted to Email security (formerly Area 1) for review.\n\n</page>\n\n<page>\n---\ntitle: PhishNet for Office 365  Cloudflare Email security (formerly Area 1) docs\ndescription: PhishNet is an add-in button that helps users to submit directly to\n  Email security (formerly Area 1) phish samples missed by Email security\n  detection. PhishNet avoids the previous process, where users had to report\n  phish to their email admins, which then had to manually download and forward\n  the sample to Email security.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/phishnet-o365/\n  md: https://developers.cloudflare.com/email-security/email-configuration/phish-submissions/phishnet-o365/index.md\n---\n\nPhishNet is an add-in button that helps users to submit directly to Email security (formerly Area 1) phish samples missed by Email security detection. PhishNet avoids the previous process, where users had to report phish to their email admins, which then had to manually download and forward the sample to Email security.\n\n## Prerequisites\n\nTo set up PhishNet with Office 365, you will need:\n\n* An Email security account with admin access.\n* Admin access to Microsoft.com.\n\nNote\n\nOnly admin users can deploy PhishNet for all users in Office 365. Non-admin users can deploy PhishNet for themselves, but no other users will have access to it.\n\n## Set up PhishNet for Office 365\n\n1. Log in to [admin.microsoft.com](https://admin.microsoft.com/) with your admin account.\n\n2. Select the three-line button to open the menu.\n\n3. Go to **Settings** > **Integrated Apps**.\n\n   ![Select Integrated apps from the menu](https://developers.cloudflare.com/_astro/step3-apps.s-PS_Kr7_O982V.webp)\n\n4. Select **Upload custom apps**.\n\n   ![Select upload custom apps](https://developers.cloudflare.com/_astro/step4-custom-apps.JYA_LtiR_1B0uwr.webp)\n\n5. On a new browser tab, [log in to Email security (formerly Area 1)](https://horizon.area1security.com) with an admin account.\n\n6. Select **Settings** (gear icon).\n\n   ![Select settings (the gear icon)](https://developers.cloudflare.com/_astro/step6-settings.Cz7onxDa_1Lr9kc.webp)\n\n7. Go to **Email Configuration** > **Phish Submissions** > **PhishNet O365**.\n\n   ![The PhishNet settings will let you copy the appropriate URL to install it on Office 365](https://developers.cloudflare.com/_astro/step7-phishnet.Bvni2lnP_1oijnd.webp)\n\n8. Select **Copy** to copy the URL. This URL will let you install PhishNet in Office 365.\n\n9. Go back to the Microsoft admin browser tab.\n\n10. From **Upload Apps to deploy**, select **Provide link to manifest file**, and paste the URL you copied from your Email security dashboard.\n\n    ![Paste the URL you have copied from Email security.](https://developers.cloudflare.com/_astro/step10-upload-apps.ChSsbuAN_Z1OO0Nd.webp)\n\n11. Select **Validate**. Wait for a success message to appear below the input. Then, select **Next**.\n\n12. Under **Assign users**, select **Entire Organization**, and then select **Next**.\n\n    ![Paste the URL you have copied from Email security.](https://developers.cloudflare.com/_astro/step12.0f5KI0r__Z1schBE.webp)\n\n13. In **App Permissions and Capabilities**, make sure PhishNet has the correct permissions: `Outlook: ReadWriteMailbox, SendReceiveData`. Then, select **Next**.\n\n    ![Make sure PhishNet has the correct permissions.](https://developers.cloudflare.com/_astro/step13.BEUwxMP1_Z1BVga8.webp)\n\n14. In the next screen, make sure that in **Assigned Users** you have **Entire organization**. Then, select **Finish Deployment**.\n\n15. Once deployment is complete, you should see a message confirming it. Note that it can take up to six hours for PhishNet to appear in Office 365 (or six hours to update if previously installed.) Select **Done**.\n\n    ![PhishNet might take up to six hours to appear in Office 365.](https://developers.cloudflare.com/_astro/step15.DDnoAZQp_2829y4.webp)\n\nYou have now installed PhishNet for Office 365. After the process is complete, PhishNet will show up on the Integrated Apps screen.\n\n![Search for PhishNet in the Integrated Apps screen.](https://developers.cloudflare.com/_astro/phishnet-installed-apps.DoPw9UHj_tBw3C.webp)\n\n## Submit phish with PhishNet\n\n1. Open the message you would like to flag as either spam or phish.\n\n2. Select the PhishNet logo in the task pane, near the other action buttons - such as reply and forward.\n\nNote\n\nIf you cannot find the PhishNet icon, select the **More actions** menu (the three dots menu).\n\n1. Under **Select Submission Type**, select the type of your submission - Spam or Phish.\n\n   ![Choose the type of submission you would like to make](https://developers.cloudflare.com/_astro/step3-submit-phish.yQX4V1G3_Z1DnHOG.webp)\n\n2. Select **Submit Report**.\n\nOnce the email has been successfully submitted to Email security for review, PhishNet will show you a **Submission Complete** message.\n\n</page>\n\n<page>\n---\ntitle: Retraction guide for Microsoft Office 365  Cloudflare Email security\n  (formerly Area 1) docs\ndescription: In this tutorial you will learn how to set up email retraction for\n  Microsoft Office 365.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/email-configuration/retract-settings/office365-retraction/\n  md: https://developers.cloudflare.com/email-security/email-configuration/retract-settings/office365-retraction/index.md\n---\n\n![Email workflow for retracting emails with Microsoft Office 365](https://developers.cloudflare.com/_astro/opening_img-o365-retraction.C_LqKorB_1folhp.webp)\n\nIn this tutorial you will learn how to set up email retraction for Microsoft Office 365.\n\n## 1. Authorize Email security with Office 365 for retraction\n\nFor message retraction to successfully execute, Email security needs to be authorized to make API calls into the Office 365 Graph API architecture. The account used to authorize Email security requires the **Privileged role admin** role.\n\nWhen assigning user roles in the Office 365 console, you will find these roles in **User permissions** > **Roles configuration** > **Identity admin roles**.\n\n### How does the authorization work?\n\nThe authorization process grants Email security access to the Azure environment with the least applicable privileges required to function. The Enterprise Application that Email security registers (the Email security Synchronator) is not tied to any administrator account. Inside of the Azure Active Directory admin center you can review the permissions granted to the application in the Enterprise Application section.\n\n![Permissions required for Email security to access Office 365](https://developers.cloudflare.com/_astro/area1-synchronator.BRuH1YHI_1qr18Y.webp)\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/), and select **Settings** (the gear icon).\n\n2. Go to **Email Configuration** > **RETRACT SETTINGS**.\n\n   ![Access the retract settings in Email security](https://developers.cloudflare.com/_astro/step2-retract-settings.D82uNTRl_Z17rK1r.webp)\n\nNote\n\nIf you do not see the Retract Settings option, [contact customer support](https://developers.cloudflare.com/support/contacting-cloudflare-support/) to enable the feature.\n\n1. You need to authorize Email security to execute retractions through the Graph API of Office 365. Make sure that the account that you will be using to authenticate has the appropriate administrative roles assigned. Select **Authorize** to start the process.\n\n   ![Select Authorize to start the process of authorizing Email security to access Office 365](https://developers.cloudflare.com/_astro/step3-authorize-o365.CYT8uKj7_Z1cyeK1.webp)\n\n2. The Email security dashboard will redirect you to a Microsoft login page. Select or enter the appropriate account to initiate the authentication process.\n\n   ![Select an account or enter a new account to authorize Email security](https://developers.cloudflare.com/_astro/step4-authorize-login.B8IoM6lw_1hWIaO.webp)\n\n3. Once authenticated, the system will show a dialog box with a list of the requested permissions. Select **Accept** to authorize the change.\n\n   ![Select Accept to authorize Email security in Office 365](https://developers.cloudflare.com/_astro/step5-authorize.DPGKVf-y_ZgFE4W.webp)\n\n4. Upon authorization, you will be automatically redirected to the Email security dashboard, with a notification that the authorization completed successfully. Select **Dismiss** to clear the notification.\n\n   ![Select Dismiss to dismiss the success notification](https://developers.cloudflare.com/_astro/step6-dismiss.B5C58pXd_ZUYVxk.webp)\n\n## 2. Configure auto-retraction actions\n\nYou can set up auto-retraction to automatically move messages matching certain dispositions to specific folders within a user's mailbox.\n\nTo set up automatic retraction:\n\n1. Log in to the [Email Security (formerly Area 1) dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. On **Email Configuration**, go to **Retract Settings** > **Auto-Retract**.\n\n4. Select **Edit**.\n\n5. For each disposition, choose which folder the message should be sent to:\n\n   * **No Action**: Do not move the message.\n   * **Junk Email**: Sends the message to the junk or spam email folder.\n   * **Trash**: Sends the message to the trash or deleted items email folder.\n   * **Soft Delete  user recoverable** (Microsoft only): Sends the message to the user's **Deleted Items** folder. Messages can be recovered by the user.\n   * **Hard Delete  admin recoverable**: Completely deletes messages from a user's inbox. Office 365 messages cannot be recovered without using the eDiscovery feature or the Exchange admin center. Refer to \\[Recover hard deleted messages]\\(#recover-hard-deleted-messages) for more information.\n\n6. Select **Update Auto-retract Settings**.\n\n### Post delivery retractions for new threats\n\nEmail Security (formerly Area 1) is continuously gathering new information about phishing campaigns. Users might have email messages in their inboxes that were scanned by Email Security (formerly Area 1) but not retracted initially because, at the time of scan, these email messages had not been identified as a threat. To mitigate risk, Email Security (formerly Area 1) offers you tools to re-evaluate email messages at a fixed time interval based on knowledge Cloudflare may have acquired since initial delivery. Any email messages that fit this new threat knowledge will be retracted.\n\nYou can enable two options:\n\n* **Post Delivery Response**: Email Security (formerly Area 1) will continue to re-evaluate emails already delivered to your users' inboxes at a fixed time interval in search for phishing sites or campaigns not previously known to Cloudflare. If any email messages fitting these new criteria are found, Email Security (formerly Area 1) retracts them. Rescans occur at a five minute, 12 hour, and 24 hour intervals.\n* **Phish Submission Response**: Email Security (formerly Area 1) will retract emails already delivered that are reported by your users as phishing, and are found to be malicious by Email Security (formerly Area 1). Retraction will occur according to your configuration.\n\n## 3. Configure journaling\n\n### 1. Configure connector for delivery to Email security (formerly Area 1) (if required)\n\nNote\n\nEmail security only scans inbound emails.\n\nIf your email architecture does not include an outbound gateway, you can skip this step and [proceed to the next one](#2-configure-journal-rule).\n\nOn the other hand, if your email architecture requires outbound messages to traverse your email gateway, you may want to consider configuring a connector to send the journal messages directly to Email security.\n\n1. Log in to the [Exchange admin center](https://admin.exchange.microsoft.com), and go to **Mail flow** > **Connectors**.\n\n   ![Go to the connectors area](https://developers.cloudflare.com/_astro/step1-connector.GHhUwTxU_1f5oSg.webp)\n\n2. Select **Add a connector**.\n\n3. Configure the new connector as follows:\n\n   * **Connection From**: Office 365\n   * **Connection to**: Partner Organization\n\n   ![Configure the connector](https://developers.cloudflare.com/_astro/step3-configure-connector.RocOY8nI_Z1vCf79.webp)\n\n4. Select **Next**.\n\n5. Configure the connector as follows:\n\n   * **Name**: `Deliver journal directly to Area 1`\n   * **Description**: `Deliver journal directly to Area 1`\n   * **Turn it on**: Enabled.\n\n   ![Name the connector and give it a description](https://developers.cloudflare.com/_astro/step5-name-connector.DNWbIeO__idrD1.webp)\n\n6. Select **Next**.\n\n7. Configure the **Use of connector** setting as follows:\n\n   * Select **Only when email messages are sent to these domains**.\n   * In the text field, enter `journaling.mxrecord.io` as the host address, and select **+** to add the domain.\n\n   ![Configure use of connector](https://developers.cloudflare.com/_astro/step7-use-of-connector.PKXxl3_L_13GqTt.webp)\n\n8. Select **Next**.\n\n9. Configure the **Routing** setting as follows:\n\n   * Select **Route email through these smart hosts**.\n   * In the text field, enter `journaling.mxrecord.io` as the [smart host](https://en.wikipedia.org/wiki/Smart_host) address, and select **+** to add the domain.\n\n   ![Configure the routing setting](https://developers.cloudflare.com/_astro/step9-routing.CavgMOZT_Z261WIc.webp)\n\n10. Select **Next**.\n\n11. In **Security restrictions**, you need to keep the default TLS configuration. Review the following settings:\n\n    * Make sure the **Always use Transport Layer Security (TLS) to secure the connection (recommended)** checkbox is selected.\n    * In **Connect only if the recipients email server certificate matches this criteria** select **Issued by a trusted certificate authority (CA)**.\n\n    ![Configure security restrictions](https://developers.cloudflare.com/_astro/step11-security.DeBlzdPS_1PMLgw.webp)\n\n12. Select **Next**.\n\n13. You need to validate the connector by using your tenants specific journaling address. To find this address, go to the [Email security dashboard](https://horizon.area1security.com/support/service-addresses) > **Support** > **Service Addresses page**.\n\n    ![Validate the connector](https://developers.cloudflare.com/_astro/step13-validate-email.BJ8ELGKR_1NIABs.webp)\n\n14. Add the address and select **Validate**.\n\n15. Once the validation completes, you should receive a **Succeed** status for all the tasks. Select **Next**.\n\n    ![Validation success if all goes well](https://developers.cloudflare.com/_astro/step15-validation-success.C5eGCdwd_2kOP8t.webp)\n\n16. Review the configuration and select **Create connector**.\n\n    ![Review your connector](https://developers.cloudflare.com/_astro/step16-review-connector.BrDPEYnr_Zh1Unp.webp)\n\nYour connector is now active. You can find it in **Exchange admin center** > **Mail flow** > **Connectors**.\n\n![Connector active](https://developers.cloudflare.com/_astro/connector-active.CSWoF3B__Z1IraTj.webp)\n\n### 2. Configure journal rule\n\n1. Log in to the [Microsoft Purview compliance portal](https://compliance.microsoft.com/homepage).\n\n2. Go to **Data lifecycle management** > **Exchange (legacy)**.\n\n3. Select **Settings** (the gear icon).\n\n4. In **Send undeliverable journal reports to** enter the email address of a valid user account. Note that you cannot use a team or group address.\n\n   ![Configure undeliverable emails](https://developers.cloudflare.com/_astro/step4-undeliverable.BIHyokWn_1uokha.webp)\n\n5. Select **Save**.\n\n6. Still in the Exchange (legacy) screen, select **Journal Rules**.\n\n   ![Select journal rules](https://developers.cloudflare.com/_astro/step6-journal-rules.C9jnQb2-_2n0CP6.webp)\n\n7. Select **New rule** to configure a journaling rule, and configure it as follows:\n\n   * **Send journal reports to**: This address is specific to each customer tenant, and can be found in your [Email security dashboard](https://horizon.area1security.com/support/service-addresses). For example, `<customer_name>@journaling.mxrecord.io`.\n   * **Journal Rule Name**: `Journal Messages to CloudflareArea 1`\n   * **Journal messages sent or received from**: *Everyone*\n   * **Type of message to journal**: *External messages only*\n\n8. Select **Next**.\n\n9. Verify the information is correct, and select **Submit** > **Done**.\n\n   ![Verify the journal rule information](https://developers.cloudflare.com/_astro/step9-verify-journal-rules.CX-hBGCL_xtr37.webp)\n\nOnce saved, the rule is automatically active. However, it may take a few minutes for the configuration to propagate and start pushing messages to Cloudflare Email security. After it propagates, you can access the Cloudflare Email security dashboard to check the number of messages processed. This number will grow as journaled messages are sent to Cloudflare Email security from your Exchange server.\n\n### 3. Compliance\n\n#### Create Office 365 distribution lists\n\nFor compliance purposes, you might be required to process emails in certain geographic regions such as India or the EU. If that is your case, you should [create Office 365 distribution lists](https://learn.microsoft.com/en-us/microsoft-365/admin/setup/create-distribution-lists?view=o365-worldwide#create-a-distribution-group-list) for each geographic region where you need to process your emails, before configuring your journal rule.\n\n#### Configure journal rule\n\nAfter creating the distribution lists based on regions for your users, configure your journal rule:\n\n1. Log in to the [Microsoft Purview compliance portal](https://compliance.microsoft.com/homepage).\n\n2. Go to **Data lifecycle management** > **Exchange (legacy)**.\n\n3. Select **Settings** (the gear icon).\n\n4. In **Send undeliverable journal reports to** enter the email address of a valid user account. Note that you cannot use a team or group address.\n\n   ![Configure undeliverable emails](https://developers.cloudflare.com/_astro/step4-undeliverable.BIHyokWn_1uokha.webp)\n\n5. Select **Save**.\n\n6. Still in the Exchange (legacy) screen, select **Journal Rules**.\n\n   ![Select journal rules](https://developers.cloudflare.com/_astro/step6-journal-rules.C9jnQb2-_2n0CP6.webp)\n\n7. Select **New rule** to configure a journaling rule, and configure it as follows:\n\n   * **Send journal reports to**: This address is specific to each customer tenant, and can be found in your [Email security dashboard](https://horizon.area1security.com/support/service-addresses). If you need to process emails in certain geographic regions, refer to the [Geographic locations](#geographic-locations) table for more information on what address you should use.\n   * **Journal Rule Name**: `Journal Messages to CloudflareArea 1`\n   * **Journal messages sent or received from**: *A specific user or group* and select the user group you [created above](#3-compliance).\n   * **Type of message to journal**: *External messages only*\n\n8. Select **Next**.\n\n9. Verify the information is correct, and select **Submit** > **Done**.\n\n   ![Verify the journal rule information](https://developers.cloudflare.com/_astro/step9-verify-journal-rules.CX-hBGCL_xtr37.webp)\n\nOnce saved, the rule is automatically active. However, it may take a few minutes for the configuration to propagate and start pushing messages to Cloudflare Email security. After it propagates, you can access the Cloudflare Email security dashboard to check the number of messages processed. This number will grow as journaled messages are sent to Cloudflare Email security from your Exchange server.\n\n## 4. Manual message retraction\n\nWhen retraction is enabled, you can manually retract messages that were not automatically retracted.\n\n1. Log in to the [Email Security (formerly Area 1) dashboard](https://horizon.area1security.com/).\n\n2. Select the search bar and enter the search parameters to find the emails you are looking for.\n\n3. To retract a single message, select **Retract**. To retract multiple messages, first select the checkboxes on the messages you want to retract. Then, select **Retract**.\n\n4. Choose where you want to retract the message to, and select **Retract message**.\n\n   ![Choose your retraction destination](https://developers.cloudflare.com/_astro/step5-retract-destination.ao-rtVzS_Z1bDViy.webp)\n\n5. If the retraction was successful, there will be positive confirmation on Email Security (formerly Area 1) dashboard.\n\n## Recover hard deleted messages\n\nOffice 365 has two ways for recovering hard deleted email messages:\n\n* **[eDiscovery](https://learn.microsoft.com/en-us/purview/ediscovery?view=o365-worldwide)**\n* **[Exchange admin center](https://learn.microsoft.com/en-us/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages)**\n\nRefer to Microsoft's documentation to learn more about how to use these tools to recover deleted email messages.\n\n## Geographic locations\n\nSelect from the following BCC addresses to process email in the correct geographic location.\n\n| Host | Location | Note |\n| - | - | - |\n| `<customer_name>@journaling.mxrecord.io` | US | Best option to ensure all email traffic processing happens US data centers. |\n| `<customer_name>@journaling.mailstream-eu-primary.mxrecord.io` | EU | Best option to ensure all email traffic processing happens in Germany, with backup to US data centers. |\n| `<customer_name>@journaling.mailstream-eu1.mxrecord.io` | EU | Best option to ensure all email traffic processing happens within the EU without backup to US data centers. |\n| `<customer_name>@journaling.mailstream-bom.mxrecord.mx` | India | Best option to ensure all email traffic processing happens within India. |\n| `<customer_name>@journaling.mailstream-india-primary.mxrecord.mx` | India | Same as `mailstream-bom.mxrecord.mx`, with backup to US data centers. |\n| `<customer_name>@journaling.mailstream-asia.mxrecord.mx` | India | Best option to ensure all email traffic processing happens in India, with Australia data centers as backup. |\n| `<customer_name>@journaling.mailstream-syd.area1.cloudflare.net` | Australia / New Zealand | Best option to ensure all email traffic processing happens within Australia. |\n| `<customer_name>@journaling.mailstream-australia.area1.cloudflare.net` | Australia / New Zealand | Best option to ensure all email traffic processing happens in Australia, with India and US data centers as backup. |\n\n</page>\n\n<page>\n---\ntitle: Available parameters  Cloudflare Email security (formerly Area 1) docs\ndescription: \"You can pull information for a message in search detections using\n  the following parameters:\"\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/reporting/search/available-parameters/\n  md: https://developers.cloudflare.com/email-security/reporting/search/available-parameters/index.md\n---\n\nYou can pull information for a message in [search detections](https://developers.cloudflare.com/email-security/reporting/search/) using the following parameters:\n\n* From (`envelope_from`)\n* From Name\n* To (any) (`envelope_to`)\n* To Name (any)\n* Cc (any)\n* ReplyTo\n* Subject (any)\n* Sent DateTime (formatted as `YYYY-MM-DDTHH:MM:SS`)\n* Received DateTime (formatted as `YYYY-MM-DDTHH:MM:SS`)\n* final\\_disposition\n* alert\\_id\n* sha256 (attachments)\n* ssdeep (attachments)\n* name (attachments)\n* md5 (attachments)\n* Message-ID\n* smtp\\_helo\\_server\\_ip\n* smtp\\_previous\\_hop\\_ip\n* x\\_originating\\_ip\n* Reason(s) for Detection\n\n## Search terms\n\nIn addition to the message parameters above, you can use these additional detection search strings:\n\n* phish\\_submission\n* phish\\_submission\\_response\n* user\\_submission\n* team\\_submission\n* auto-retraction\n* browser\\_isolation\\_rewrite\n\nFor disposition-specific submission searches, refer to [Service Addresses](https://horizon.area1security.com/support/service-addresses) in the Email security dashboard.\n\n## Data retention\n\nFor Email security Horizon Enterprise customers, detections search would index for a period of 12 months and rotate over to a rolling 12-month period.\n\nFor Email security Horizon Advantage customers, detections search would index for three months and rotate over to a rolling 3-month period.\n\n## Scope of data retained\n\nFor messages that are not detected, the body of the message itself is not retained. Only the metadata such as sender, recipient, subject, message\\_id, and delivery log will be retained. It is also possible to view the messages as the preview image.\n\nFor detections, full messages are retained, including attachments, in addition to the metadata described above. The raw message including attachments can be downloaded as an `.eml` file.\n\n</page>\n\n<page>\n---\ntitle: KnowBe4  Cloudflare Email security (formerly Area 1) docs\ndescription: KnowBe4 integration guide\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/reporting/siem-integration/knowbe4-integration-guide/\n  md: https://developers.cloudflare.com/email-security/reporting/siem-integration/knowbe4-integration-guide/index.md\n---\n\nWhen Email security detects a phishing email, the metadata of the detection can be sent directly to KnowBe4. For this tutorial, you will need a working KnowBe4 account with the SecurityCoach add-on. You will also need to create an organization key to use in Email security. This organization key will let you integrate KnowBe4 with Email security. Refer to [KnowBe4 documentation](https://support.knowbe4.com/hc/articles/13129840202643) for more information on this subject.\n\nAfter creating your organization key and authorizing Email security:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Settings** (the gear icon).\n\n3. Go to **Email Configuration** > **Domains & Routing** > **Alert Webhooks**.\n\n4. Select **New Webhook**.\n\n5. In **App Type**, select **SIEM**.\n\n6. Choose *KnowBe4* from the dropdown, and paste your organization key into the **Auth Code** section.\n\n7. In **Target**, paste the URL that suits your organization. KnowBe4 has different URLs for different regions:\n\n   | KnowBe4 instance | URL |\n   | - | - |\n   | United States | `https://area1.vendor.training.knowbe4.com/v1` |\n   | European Union | `https://area1.vendor.eu.knowbe4.com/v1` |\n   | Canada | `https://area1.vendor.ca.knowbe4.com/v1` |\n   | United Kingdom | `https://area1.vendor.uk.knowbe4.com/v1` |\n   | Germany | `https://area1.vendor.da.knowbe4.com/v1` |\n\n8. Select *Expanded* from the drop-down menu for **Malicious Style**, **Suspicious Style**, and **Spoof Style**.\n\n9. Select **Publish Webhook**.\n\n</page>\n\n<page>\n---\ntitle: LogScale  Cloudflare Email security (formerly Area 1) docs\ndescription: Falcon LogScale integration guide\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/reporting/siem-integration/logscale-integration-guide/\n  md: https://developers.cloudflare.com/email-security/reporting/siem-integration/logscale-integration-guide/index.md\n---\n\nWhen Email security detects a phishing email, the metadata of the detection can be sent directly to Falcon LogScale. For this tutorial, you will need a working Falcon LogScale account. You will also need to create a new Ingest Token in your LogScale account. Ingest Tokens identify repositories and are used to configure data ingestion to your repository. Refer to [Falcon LogScale documentation](https://library.humio.com/falcon-logscale-cloud/ingesting-data-tokens.html) for more information.\n\nAfter creating your Ingest Token:\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n2. Go to **Settings** (the gear icon).\n3. Go to **Email Configuration** > **Domains & Routing** > **Alert Webhooks**.\n4. Select **New Webhook**.\n5. In **App Type**, select **SIEM**.\n6. Choose *Crowdstrike* from the dropdown, and paste your Ingest Token into the **Auth Code** section.\n7. In **Target**, paste the URL `https://cloud.community.humio.com/api/v1/ingest/hec/raw`.\n8. Select **Publish Webhook**.\n\n</page>\n\n<page>\n---\ntitle: Splunk  Cloudflare Email security (formerly Area 1) docs\ndescription: Splunk Cloud integration guide\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/reporting/siem-integration/splunk-integration-guide/\n  md: https://developers.cloudflare.com/email-security/reporting/siem-integration/splunk-integration-guide/index.md\n---\n\nWhen Email security detects a phishing email, the metadata of the detection can be sent directly to Splunk. This document outlines the steps required to integrate with Splunk Cloud.\n\n![A diagram outlining what happens when Email security detects a phishing email and sends it to Splunk.](https://developers.cloudflare.com/_astro/open-splunk.935S9ixR_ZqsQmy.webp)\n\n## 1. Configure Splunk HTTP Event Collector\n\n1. [Log in to Splunk](https://login.splunk.com/) with an administrator account.\n\n2. Go to **Settings** > **Data inputs**.\n\n   ![Go to Data inputs to configure your settings.](https://developers.cloudflare.com/_astro/step2-data-inputs.BtN_Zfq2_Z25vEp0.webp)\n\n3. In **Local inputs** > **Type**, select **HTTP Event Collector** to access this configuration and create a new collector.\n\n   ![Select HTTP Event Collectors as the type of your collector.](https://developers.cloudflare.com/_astro/step3-type.B5IaOdQX_2alzjO.webp)\n\n4. Select the **New Token** button to start the configuration.\n\n5. Provide a descriptive name for the Email security (formerly Area 1) token (for example, `Email security (formerly Area 1) Email Detections`), and leave the **Enable indexer acknowledgement** unchecked.\n\n   ![Enter a descriptive name for your new token, but leave Enable indexer acknowledgement checkbox unchecked.](https://developers.cloudflare.com/_astro/step5-token.lL6h_-Sw_Z2djIwJ.webp)\n\n6. Select **Next** to continue.\n\n7. Configure the Input Settings for the HTTP Event Collector based on your environment.\n\n   ![Configure the Input Settings based on your environment](https://developers.cloudflare.com/_astro/step7-input-settings.DtLiG7Z9_ZYkoDn.webp)\n\n8. You may also select **Create a new index** to create new settings for Email security events, with a **Max Size of Entire Index** and **Retention (days)** that fits your environment.\n\n   ![Optionally, create a new index for Email security events](https://developers.cloudflare.com/_astro/step8-new-index.C_u8fnMY_Z1hEhq6.webp)\n\n9. For this example, we created a new `area1_index` index, and added it to the configuration.\n\n   ![Example of a new index added to the configuration](https://developers.cloudflare.com/_astro/step9-new-index.P991i02s_9DGph.webp)\n\n10. Select **Review** > **Submit** to review your settings and create the collector.\n\n11. Take note of the token value in this next screen. This value is required for the Email security configuration in the next step. You can also retrieve the token from the HTTP Event Collector configuration panel, in **Settings** > **Data inputs** > **HTTP Event Collector**.\n\n    ![Example of a new index added to the configuration](https://developers.cloudflare.com/_astro/step11-token-value.DJkrGFrm_17Jz9G.webp)\n\n## 2. Test your HTTP Event Collector\n\nTo test your the HTTP Event Collector, you can manually inject an event into Splunk by using the following cURL command:",
      "language": "unknown"
    },
    {
      "code": "### Request formats\n\nWhen creating requests to Splunk, the URL and port number change according to the type of Splunk setup:\n\n* **Splunk Cloud Platform free trial**: `<protocol>://http-inputs-<host>.splunkcloud.com:8088/<endpoint>`\n* **Splunk Cloud Platform**: `<protocol>://http-inputs-<host>.splunkcloud.com:443/<endpoint>`\n* **Splunk Enterprise**: `<protocol>://<host>:8088/<endpoint>`\n\nRefer to the [Splunk documentation](https://docs.splunk.com/Documentation/Splunk/8.2.2/Data/UsetheHTTPEventCollector) for more information.\n\nIf your instance is on-premise, specify the appropriate hostname and ensure that your firewall allows the configured port through to your instance. The connections will be coming from this [Egress IP addresses](https://developers.cloudflare.com/email-security/deployment/inline/reference/egress-ips/), if you need them for your access control lists (ACLs)\n\nNote\n\nEnsure that you have a valid SSL certificate configured on your instance. The certificate cannot be expired and cannot be a self-signed certificate.\n\nIf all the requirements are met, you will receive the following response back to the cURL command:",
      "language": "unknown"
    },
    {
      "code": "Additionally, you can search your instance of Splunk for the test event with `index` or other search criteria (for example, `index=\"area1_index\"`):\n\n![Example of a new index added to the configuration](https://developers.cloudflare.com/_astro/search-instance.DPsTbvaw_Z1pgJoG.webp)\n\n## 3. Configure Email security\n\nThe next step is to configure Email security to push the Email Detection Event to the Splunk HTTP Event Collector.\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Email Configuration** > **Alert Webhooks**, and select **New Webhook**.\n\n3. In the Add Webhooks page, enter the following settings:\n\n   * **App type**: Select **SIEM** > **Splunk**, and enter the auth code you took note of the previous step.\n   * **Target**: Enter the target URI of your Splunk instance. It will typically have the `https://<host>:8088/services/collector` format. Refer to [Request formats](#request-formats) to learn more about how your Splunk subscription affects the URI.\n   * For the dispositions (`MALICIOUS`, `SUSPICIOUS`, `SPOOF`, `SPAM`, `BULK`) choose which (if any) you want to send to the webhook. Sending `SPAM` and `BULK` dispositions will generate a high number of events.\n\n4. Select **Publish Webhook**.\n\nYour Splunk integration will now show up in the All Webhooks panel.\n\n![The All Webhooks section will show your Splunk webhook](https://developers.cloudflare.com/_astro/splunk-webhook-integrations.DuWprhdK_FcjNr.webp)\n\nIt will take about ten minutes or so for the configuration to fully propagate through the infrastructure of Email security (formerly Area 1), and for events to start to appear in your searches. Once the configuration is propagated, events will start to appear in your instance of Splunk.\n\n</page>\n\n<page>\n---\ntitle: Sumo Logic  Cloudflare Email security (formerly Area 1) docs\ndescription: Sumo Logic integration guide\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/email-security/reporting/siem-integration/sumo-logic-integration-guide/\n  md: https://developers.cloudflare.com/email-security/reporting/siem-integration/sumo-logic-integration-guide/index.md\n---\n\nWhen Email security detects a phishing email, the metadata of the detection can be sent directly into your instance of Sumo Logic. This document outlines the steps required to integrate Email security with Sumo Logic.\n\n![A diagram outlining what happens when Email security detects a phishing email and sends it to Sumo Logic.](https://developers.cloudflare.com/_astro/opening-sumo-logic.D724z7XI_2oTlMz.webp)\n\n## 1. Configure the Sumologic Collector\n\n1. Log in to [Sumo Logic](https://service.sumologic.com/ui/) with an administrator account.\n\n2. Go to **Manage Data** > **Collection** to open the collector configuration pane.\n\n3. Select **Add Collector**.\n\n   ![Add collector.](https://developers.cloudflare.com/_astro/step3-collector.DV_Q-NuH_2mzClp.webp)\n\n4. In **Select Collector Type**, select **Hosted Collector**.\n\n   ![Select Hosted Collector.](https://developers.cloudflare.com/_astro/step4-hosted.BwpzBT2q_1Y68g3.webp)\n\n5. In **Add Hosted Collector**, enter the following settings:\n\n   * **Name**: `Email security Collector`\n   * **Description**: `Email security Security Collectors`\n   * **Category**: Anti-Phishing\n\n   ![Enter the settings above to configure your collector.](https://developers.cloudflare.com/_astro/step5-hosted-collector.Dfvo2eRJ_Z14plN9.webp)\n\n6. Select **Save** > **OK** to confirm the addition of the new Collector.\n\n7. In **Cloud APIs**, select **HTTP Logs and Metrics** to start the configuration of the data source.\n\n   ![Select HTTP Logs and Metrics.](https://developers.cloudflare.com/_astro/step7-http-logs.CAeyFT9s_Z2sa756.webp)\n\n8. Enter a descriptive **Name** and **Description**, and select **Save**.\n\n   ![Enter a name and description.](https://developers.cloudflare.com/_astro/step8-name.DoCVtTkn_Zevgsi.webp)\n\n9. The system will present you a dialog box with the HTTP endpoint. Save it, as this will be required to configure Email security later.\n\n   ![Take note of the endpoint to use it later.](https://developers.cloudflare.com/_astro/step9-endpoint.C6vCpzu8_Zm6IHl.webp)\n\n## 2. Configure Email security\n\nThe next step is to configure Email security to push the Email Detection Events to the Sumologic HTTP Collector.\n\n1. Log in to the [Email security dashboard](https://horizon.area1security.com/).\n\n2. Go to **Email Configuration** > **Alert Webhooks**, and select **New Webhook**.\n\n3. In the Add Webhooks page, enter the following settings:\n\n   * **App type**: Select **SIEM** > **Splunk**. In **Auth code**, enter `Sumologic`.\n   * **Target**: Enter the HTTP endpoint you saved in the previous section.\n   * For the dispositions (`MALICIOUS`, `SUSPICIOUS`, `SPOOF`, `SPAM`, `BULK`) choose which (if any) you want to send to the webhook. Sending `SPAM` and `BULK` dispositions will generate a high number of events.\n\n4. Select **Publish Webhook**.\n\nYour Sumo Logic integration will now show up in the All Webhooks panel.\n\n![Your Sumo Logic webhook will display in the All Webhooks panel.](https://developers.cloudflare.com/_astro/all-webhooks.IezPBtTD_ZdAwqn.webp)\n\nIt will take about ten minutes for the configuration to fully propagate through the infrastructure of Email security, and for events to start to appear in your searches. Once the configuration is propagated, events will start to appear in your instance of Sumo Logic.\n\nTo view logs, hover your mouse over the Email security Collector, and select **Open in Log Search**.\n\n![View logs in Sumo Logic.](https://developers.cloudflare.com/_astro/open-log.CBQyENq6_10FIMO.webp)\n\nOnce events start to flow, select **New** > **Log search** to search for the detection events with your search criteria (for example, `_collector=\"Email security Collector\"`).\n\n![Search for events.](https://developers.cloudflare.com/_astro/search-events.BTW9c3Ni_BDSBG.webp)\n\n</page>\n\n<page>\n---\ntitle: Add abuse contact  Cloudflare Fundamentals docs\ndescription: Enter an abuse contact email address to ensure you are receiving\n  communications regarding potential abuse on your websites.\nlastUpdated: 2025-07-18T12:16:23.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/abuse-contact/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/abuse-contact/index.md\n---\n\nEnter an abuse contact email address to ensure you are receiving communications regarding potential abuse on your websites.\n\nTo update your abuse contact email address:\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com) and select your account.\n2. Go to **Manage Account** > **Configurations**.\n3. For **Abuse report contact email address**, select **Change email address**.\n4. Enter and confirm your new email and select **Save**.\n\nIf you choose not to provide an abuse contact email address, communication about abuse will be directed to one of the Super Administrators on your account.\n\n</page>\n\n<page>\n---\ntitle: Audit Logs - version 2 (beta)  Cloudflare Fundamentals docs\ndescription: Cloudflare Audit Logs are account-based. All user-initiated actions\n  are recorded automatically across both the Cloudflare API and dashboard.\n  System-initiated logs are also captured to reflect actions taken automatically\n  by Cloudflare systems, such as configuration updates, background processes, or\n  internal policy enforcement.\nlastUpdated: 2025-12-09T20:55:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/audit-logs/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/audit-logs/index.md\n---\n\nCloudflare Audit Logs are account-based. All user-initiated actions are recorded automatically across both the Cloudflare API and dashboard. System-initiated logs are also captured to reflect actions taken automatically by Cloudflare systems, such as configuration updates, background processes, or internal policy enforcement.\n\nWhen a user-initiated action triggers additional automated behavior, corresponding system-initiated logs may be generated. In some cases, these system-initiated logs include additional enrichments that provide more context about what was changed, offering deeper visibility into the full lifecycle of the action.\n\nWhen an action occurs, it is streamed through Cloudflare's audit logging pipeline and stored. This ensures consistent visibility into activity across all products.\n\nFor more detailed information about how the user-initiated actions are logged automatically, refer to the [Cloudflare Blog](https://blog.cloudflare.com/introducing-automatic-audit-logs/).\n\nNote\n\nA transition plan from Audit Logs v1 to Audit Logs v2 will be communicated in due course.\n\n## Key features\n\nAudit Logs (version 2) provide a unified and standardized system for tracking and recording actions across Cloudflare products. This system enhances transparency and accountability by offering comprehensive insights into user-initiated and system-initiated activities within your Cloudflare environment.\n\n* **Standardized logging**: Audit logs are automatically generated in a consistent format across all Cloudflare services, ensuring uniformity and eliminating inconsistencies.\n* **Expanded product coverage**: Audit Logs covers 111 products, capturing actions from key endpoints, such as `/accounts`, `/zones`, `/user`, and `/memberships` APIs.\n* **Granular filtering**: Uniformly formatted logs allow for precise filtering by actions, actors, methods, and resources, facilitating efficient investigations.\n* **Enhanced context and transparency**: Each log entry includes detailed context, such as the authentication method used, the interface (API or dashboard) through which the action was performed, and mappings to Cloudflare Ray IDs for improved traceability.\n* **Comprehensive activity capture**: Beyond create, edit, and delete actions, Audit Logs records GET requests and failed attempts, ensuring no critical activity is overlooked.\n\n## Retention\n\n* Audit logs are retained for 18 months before being deleted. No additional setup is required.\n\n* In the Audit Logs v2 UI, queries are limited to the most recent 90 days for performance reasons. To access the full 18 months of data, use the API or [Logpush](https://developers.cloudflare.com/logs/logpush/).\n\n* Enterprise customers can use [Logpush](https://developers.cloudflare.com/logs/logpush/) to store audit logs beyond 18 months.\n\n## Access Audit Logs\n\nYou can retrieve audit logs using either the API or the Cloudflare dashboard.\n\n### API\n\nAudit Logs are available through the Cloudflare API. To retrieve audit logs, use the following endpoint:",
      "language": "unknown"
    },
    {
      "code": "Below is an example request to retrieve audit logs for a certain period of time along with its corresponding response. Replace the example values in the URL with your actual values:\n\n* `account_id`: Your Cloudflare account identifier.\n* `Since` (required): Start date for the audit log retrieval in the format yyyy-mm-dd.\n* `Before` (required) : End date for the audit log retrieval in the format yyyy-mm-dd.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "For more information refer to the [API documentation](https://developers.cloudflare.com/api/resources/accounts/subresources/logs/subresources/audit/methods/list/#\\(params\\)%20default%20%3E%20\\(param\\)%20since%20%3E%20\\(schema\\)).\n\n### Dashboard\n\nTo access audit logs in the Cloudflare dashboard:\n\nIn the Cloudflare dashboard, go to the **Audit Logs** page.\n\n[Go to **Audit logs**](https://dash.cloudflare.com/?to=/:account/audit-log)\n\nNote\n\nThe Audit Logs v2 is shown by default. You can switch between Audit Logs v2 and v1 as needed.\n\n## Logpush job\n\nNote\n\nFor customers who already have a Logpush job set up for Audit Logs v1, note that a separate Logpush job must be configured for [Audit Logs v2](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/account/audit_logs_v2/) (dataset). We will communicate the timeline for when Logpush Audit Logs v1 will be deprecated and turned off.\n\nTo create a Logpush job:\n\n1. In the Cloudflare dashboard, go to the **Logpush** page.\n\n   [Go to **Logpush**](https://dash.cloudflare.com/?to=/:account/logs)\n\n2. Select **Create a Logpush job**.\n\n3. In **Select a destination**, select the destination of your choice and add the destination details.\n\n4. In the datasets section, select the [Audit Logs v2 dataset](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/account/audit_logs_v2/). Audit Logs v2 is an account-based dataset.\n\n5. Once you are done configuring your logpush job, select **Submit**.\n\n## Audit Log structure\n\nCloudflare's audit logs offer a detailed view of activity across your environment by capturing both the source of actions and the context in which they occur. These logs are categorized by who initiated the action (user or system) and whether the activity occurred within a specific account or spanned multiple accounts under the same user profile. This structure enables flexible filtering, investigation, and compliance monitoring.\n\n### Initiation type\n\nAudit logs can be initiated either by users or the system. Understanding the type of actor involved helps in identifying the source and intent of actions.\n\n#### User initiated Audit Logs\n\nTrack actions performed directly by users through Cloudflare interfaces (dashboard or API). These logs capture who performed the action, when it occurred, and what resource was affected. User initiated actions can be performed by three actors:\n\n* `actor_type=\"user\"`: Action was performed by an individual user.\n* `actor_type=\"Cloudflare_admin\"`: Action was performed by Cloudflare.\n* `actor_type=\"account\"`: Action was performed using an account API token. Refer to the [Account API tokens](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/) documentation for more information.\n\n#### System initiated Audit Logs\n\nRecord changes made automatically by Cloudflare systems, without direct user input. These logs provide visibility into internal processes, automated tasks, and security events. Some entries may include associated user context for traceability (`actor_type=\"system\"`).\n\n### Activity Scope\n\n#### Account Activity Logs\n\nContain events scoped to a single Cloudflare account. These logs are filterable by `account ID` and reflect actions within that account only. You can optionally filter events further using the `resource_scope` field, which specifies whether the resource is associated with a user, an account, or a zone (`resource_scope =\"user\"`, `resource_scope =\"accounts\"`, or `resource_scope =\"zones\"`).\n\n#### User Profile Activity Logs\n\nReflect actions associated with a user's login (email) across multiple accounts. These logs enable cross-account tracking and can be filtered by `user ID` or `email`. They are visible on any account the user had access to at the time of the activity. User Profile Activity Logs can be filtered using `resource_scope =\"user\"`.\n\nThe `GET /memberships` endpoint supports cross-account access. To query memberships, use the parameter `resource_scope=memberships`.\n\n## Example how to query Audit Logs\n\nUse the following example to get a list of audit logs for a user account.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Account Settings Write`\n* `Account Settings Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Common terms and definitions\n\n### Actor\n\nThe actor represents who performed the action. It includes identity attributes like user ID, email address, IP address, and the type of actor (`user`, `account`, `Cloudflare_admin`, or `system`). It also includes the context used to initiate the action, such as API or dashboard (`dash`).\n\n### Action\n\nThe action field captures the nature of the event and whether it was successful. It includes a high-level type (e.g., `view`, `create`, `update`, `delete`), a specific description (such as `SSO_LOGIN`), the timestamp of when the action occurred, and the result (`success` or `failure`).\n\nAll `GET` requests are captured as `view` actions in Audit Logs.\n\n### Account\n\nThis field refers to the Cloudflare account under which the action was executed. It includes a unique account ID and a human-readable account name to help associate activity with a customer environment.\n\n### Resource\n\nThe resource identifies the object impacted by the action. It includes the resource type, the unique resource ID, the scope (`user`, `account`, or `zone`), and optionally the product associated with the change.\n\n### Audit Log ID\n\nThis is a unique identifier for the log record itself. It can be used for deduplication, correlation, or referencing specific actions during investigations.\n\n</page>\n\n<page>\n---\ntitle: Provide edit access to Cloudflare  Cloudflare Fundamentals docs\ndescription: Occasionally, you may want to allow edit access to your Account\n  Team. A typical use case might be migrating a complex or sensitive domain over\n  to Cloudflare.\nlastUpdated: 2025-11-05T21:10:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/cloudflare-access/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/cloudflare-access/index.md\n---\n\nOccasionally, you may want to allow edit access to your Account Team. A typical use case might be migrating a complex or sensitive domain over to Cloudflare.\n\nBy default, Cloudflare does not have edit access to your account.\n\nTo enable editing access by your Account Team:\n\n1. In the Cloudflare dashboard, go to the **Configurations** page. (You must be logged in as a **Super Administrator**).\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/configurations)\n\n2. For **Editing Permission**, switch the toggle to **On**.\n\n3. Select a duration.\n\n4. Click **Approve**.\n\nNote\n\nIn an emergency, Cloudflare Support can override your **Editing Permissions** and make updates to your account, but your Super Administrator will receive an email and the action will be recorded in your [Audit Logs](https://developers.cloudflare.com/fundamentals/account/account-security/review-audit-logs/) with an **Action** of **Break glass**.\n\n</page>\n\n<page>\n---\ntitle: Set up SSO  Cloudflare Fundamentals docs\nlastUpdated: 2025-10-14T16:41:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/dashboard-sso/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/dashboard-sso/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Leaked Password Notifications  Cloudflare Fundamentals docs\ndescription: Cloudflare automatically checks if your password has been\n  compromised when you log in to the Cloudflare dashboard. Every time you log in\n  to your account, we will securely verify through threat intelligence sources\n  to confirm if your password has been leaked in a past data breach.\nlastUpdated: 2025-10-14T16:41:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/leaked-password-notifications/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/leaked-password-notifications/index.md\n---\n\nCloudflare automatically checks if your password has been compromised when you log in to the Cloudflare dashboard. Every time you log in to your account, we will securely verify through threat intelligence sources to confirm if your password has been leaked in a past data breach.\n\nRefer to the [blog post](https://blog.cloudflare.com/helping-keep-customers-safe-with-leaked-password-notification/) for more information on how Cloudflare checks for leaked credentials.\n\nNote\n\nCloudflare does not have additional information about the specific breach or Internet service that potentially lost your password.\n\nPopular online tools such as [Have I Been Pwned](https://haveibeenpwned.com/) can help you better understand where your external accounts were attacked. If you reused this password in other systems, it is recommended that you reset it in those as well.\n\nIf your password is found in a data breach, we will email you information on how to reset your password and prompt you to do so in the Cloudflare dashboard.\n\nYour first three login attempts will warn you of the need to reset your password. After three attempts, you will be required to reset your password to log in to Cloudflare.\n\nUsers leveraging [Single Sign-On (SSO)](https://developers.cloudflare.com/fundamentals/manage-members/dashboard-sso/) or [two-factor authentication (2FA)](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/) will not be subject to these requirements given the higher level of security provided by those features.\n\nWe encourage you to enable two-factor authentication to secure your account.\n\nCloudflare account Super Administrators can also require that [all members enable 2FA](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/#enable-two-factor-authentication-for-your-cloudflare-account). This functionality can be enabled by going to **Manage Account** > **Members** in the Cloudflare dashboard.\n\n</page>\n\n<page>\n---\ntitle: Manage active sessions  Cloudflare Fundamentals docs\ndescription: In the Cloudflare dashboard, you can view a list of active sessions\n  associated with your email address.\nlastUpdated: 2025-09-15T14:53:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/manage-active-sessions/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/manage-active-sessions/index.md\n---\n\nIn the Cloudflare dashboard, you can view a list of active sessions associated with your email address.\n\nEach time your email is used to log in to your Cloudflare account, a session begins. The Cloudflare dashboard provides session information including if the device is currently viewing the dashboard, the IP address, location, device type, browser type, and last active login.\n\nIf you notice any suspicious activity, you can also revoke any active sessions.\n\nNote\n\nBy default, the session timeout for the Cloudflare dashboard is 72 hours without any activity.\n\nSome customers can also enforce single-sign on (SSO) by [adding a Dashboard SSO application](https://developers.cloudflare.com/fundamentals/manage-members/dashboard-sso/).\n\n## View active sessions\n\nTo view the active sessions associated with your email address:\n\n1. In the Cloudflare dashboard, go to the **Account home** page.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **Sessions**.\n\n## Revoke active sessions\n\nWhen there is more than one active session associated with your email account, you can revoke any session that is not the current session.\n\nTo revoke a session:\n\n1. Log in to the Cloudflare dashboard.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **Sessions**.\n\n3. On a specific section, click **Revoke**.\n\n4. You will be prompted to enter your password before revoking the session.\n\n</page>\n\n<page>\n---\ntitle: Review audit logs - v1  Cloudflare Fundamentals docs\ndescription: Audit logs summarize the history of changes made within your\n  Cloudflare account. Audit logs include account level actions like login, as\n  well as zone configuration changes.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/review-audit-logs/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/review-audit-logs/index.md\n---\n\nNote\n\nAudit Logs version 2 is available in beta. Refer to the [Audit Logs v2 documentation](https://developers.cloudflare.com/fundamentals/account/account-security/audit-logs/) for more details.\n\nAudit logs summarize the history of changes made within your Cloudflare account. Audit logs include account level actions like login, as well as zone configuration changes.\n\nAudit Logs are available on all plan types and are captured for both individual users and for multi-user organizations.\n\nNote\n\nMost beta features will not appear in audit logs until they are out of beta.\n\n## Access audit logs\n\n### Using the dashboard\n\nTo access audit logs in the Cloudflare dashboard:\n\nIn the Cloudflare dashboard, go to the **Audit Logs** page.\n\n[Go to **Audit logs**](https://dash.cloudflare.com/?to=/:account/audit-log)\n\nYou can search these audit logs by user email or domain and filter by date range. To download audit logs, click **Download CSV**.\n\nNote\n\nDepending on the volume of data, the export of large amounts of events from Audit Logs might fail with errors. We always recommend using Cloudflare [Logpush](https://developers.cloudflare.com/logs/logpush/) to make sure Audit Logs are always available and stored externally.\n\n### Using the API\n\nTo get audit logs from the Cloudflare API, send a [GET request](https://developers.cloudflare.com/api/resources/audit_logs/methods/list/).\n\nWe recommending using the API for downloading historical audit log data.\n\nTo maintain Audit Logs query performance, the Audit Logs API was modified on 2019-06-30 to return records with a maximum age of 18 months.\n\n## Retention\n\nAudit Logs are retained for 18 months before being deleted. Enterprise customers can use [Logpush](https://developers.cloudflare.com/logs/logpush/) to store Audit Logs for longer periods of time.\n\n</page>\n\n<page>\n---\ntitle: SCIM provisioning  Cloudflare Fundamentals docs\ndescription: Cloudflare supports bulk provisioning of users into the Cloudflare\n  dashboard by using the System for Cross-domain Identity Management (SCIM)\n  protocol. This allows you to connect an external identity provider (IdP) to\n  Cloudflare, quickly onboard and manage user permissions. Currently, SCIM\n  provisioning has been integrated with Okta and Microsoft Entra.\nlastUpdated: 2025-11-04T17:32:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/scim-setup/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/scim-setup/index.md\n---\n\nCloudflare supports bulk provisioning of users into the Cloudflare dashboard by using the System for Cross-domain Identity Management (SCIM) protocol. This allows you to connect an external identity provider (IdP) to Cloudflare, quickly onboard and manage user permissions. Currently, SCIM provisioning has been integrated with Okta and Microsoft Entra.\n\nNote\n\nThis section covers SCIM provisioning for the Cloudflare dashboard. If you need to provision SCIM for Cloudflare Zero Trust, refer to [Zero Trust SCIM provisioning](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/scim/).\n\n## Objectives\n\nOnce the SCIM provisioning is enabled:\n\n* A Cloudflare account can receive user group provisioning from the identity provider.\n* Members of each user group can be assigned one or more [policies](https://developers.cloudflare.com/fundamentals/manage-members/policies/). Each policy defines one or more [roles](https://developers.cloudflare.com/fundamentals/manage-members/roles/) applied to all group members thereof.\n* Members can belong to multiple user groups, and each group can also be configured with different policies.\n* Policies provisioned via SCIM can coexist with policies configured via the [traditional setup](https://developers.cloudflare.com/fundamentals/manage-members/manage/#edit-member-permissions).\n\n## Expected behaviors\n\nExpectations for user lifecycle management with SCIM:\n\n| Expected Cloudflare dash behavior | Identity provider action |\n| - | - |\n| User is added to account as member | Assign the user to a SCIM application. They will be assigned the Minimal Account Access role so that their dash experience is not broken. |\n| User is removed from account as member | Unassign the user from the SCIM application. |\n| Add role to user | Add the user to a group in the IdP which is pushed via SCIM. They must also be assigned to the SCIM application and exist as an account member. |\n| Remove role from user | Remove the user from the corresponding group in the IdP. |\n| Retain user in account but with no permissions | Remove the user from all role groups but leave them assigned to the SCIM application. They will be an account member with only the role Minimal Account Access. |\n\n## Limitations\n\n* If a user is the only Super Administrator on an Enterprise account, they will not be deprovisioned.\n* It is possible to unintentionally remove all account Super Administrators by misconfiguring SCIM groups. Refer to [SCIM troubleshooting](https://developers.cloudflare.com/fundamentals/account/account-security/scim-setup/troubleshooting/) for more information.\n\n## Prerequisites\n\n* Cloudflare dashboard SCIM provisioning is only available to Enterprise customers using Okta or Microsoft Entra.\n* You must be a Super Administrator for the initial setup.\n* In the identity provider, you must have the ability to create applications and groups.\n\n***\n\n## Gather the required data\n\nTo start, you will need to collect a couple of pieces of data from Cloudflare and set these aside for later use.\n\n### Get the Account ID\n\nThe account ID can be found via dashboard or API. For more information, refer to [Find account and zone IDs](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/).\n\n### Create an API token\n\n1. [Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with the following permissions:\n\n   | Type | Item | Permission |\n   | - | - | - |\n   | Account | SCIM Provisioning | Edit |\n\n   Note\n\n   Account API tokens are recommended for SCIM Provisioning. User owned API tokens, while supported, may result in a broken SCIM connection in the event when the user's policies are revoked from the SCIM integration, or the [API access](https://developers.cloudflare.com/fundamentals/api/how-to/control-api-access/) is unexpectedly disabled. Learn more about [Account API tokens](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/).\n\n2. Under **Account Resources**, select the specific account to include or exclude from the dropdown menu, if applicable.\n\n3. Select **Continue to summary**.\n\n4. Validate the permissions and select **Create Token**.\n\n5. Copy the token value.\n\n</page>\n\n<page>\n---\ntitle: Secure compromised account  Cloudflare Fundamentals docs\ndescription: If you observe suspicious activity within your Cloudflare account,\n  secure your account with these steps.\nlastUpdated: 2025-10-09T15:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/secure-a-compromised-account/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/secure-a-compromised-account/index.md\n---\n\nIf you observe suspicious activity within your Cloudflare account, secure your account with these steps.\n\n## Step 1 - Change your password\n\nFor more guidance on changing your password, refer to [Change email address or password](https://developers.cloudflare.com/fundamentals/user-profiles/change-password-or-email/).\n\n## Step 2 - Revoke active account sessions\n\nWhen there is more than one active session associated with your email account, you can revoke any session that is not the current session.\n\nTo revoke a session:\n\n1. Log in to the Cloudflare dashboard.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **Sessions**.\n\n3. On a specific section, click **Revoke**.\n\n4. You will be prompted to enter your password before revoking the session.\n\n## Step 3 - Enable Two-Factor Authentication (2FA)\n\nTo prevent future compromises, make sure that you have [Two-Factor Authentication (2FA)](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/) enabled on your account.\n\n## Step 4 - Change API keys and tokens\n\n### API keys\n\nIf your API key might be compromised, change your API key:\n\n1. Log in to the Cloudflare dashboard.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **API Tokens**.\n\n3. In the **API Keys** section, find your key.\n\n4. Select **Change**.\n\n### API tokens\n\nIf your token is lost or compromised, you can either create a new token or roll your token to generate a new secret. Rolling your API token into a new one will invalidate the previous token, but the access and permissions will be the same as the previous API token.\n\nTo roll your API token:\n\n1. Log in to the Cloudflare dashboard.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **API Tokens**.\n\n3. Next to the API token you want to roll, select the **three dot icon** >**Roll**.\n\n4. Select **Confirm** to generate a new API token.\n\n## Step 5 - Review the audit log\n\nTo access audit logs in the Cloudflare dashboard:\n\nIn the Cloudflare dashboard, go to the **Audit Logs** page.\n\n[Go to **Audit logs**](https://dash.cloudflare.com/?to=/:account/audit-log)\n\nYou can search these audit logs by user email or domain and filter by date range. To download audit logs, click **Download CSV**.\n\nNote\n\nDepending on the volume of data, the export of large amounts of events from Audit Logs might fail with errors. We always recommend using Cloudflare [Logpush](https://developers.cloudflare.com/logs/logpush/) to make sure Audit Logs are always available and stored externally.\n\nIf you notice any settings were changed, you should undo those changes.\n\n</page>\n\n<page>\n---\ntitle: Zone holds  Cloudflare Fundamentals docs\ndescription: Zone holds prevent other teams in your organization from adding\n  zones that are already active in another account.\nlastUpdated: 2025-05-29T18:16:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/account/account-security/zone-holds/\n  md: https://developers.cloudflare.com/fundamentals/account/account-security/zone-holds/index.md\n---\n\nZone holds prevent other teams in your organization from adding zones that are already active in another account.\n\nFor example, you might already have an active Cloudflare zone for `example.com`. If another team does not realize this, they could add and activate `example.com` in another Cloudflare account, which may cause downtimes or security issues until the original zone could be re-activated.\n\n## Availability\n\n| | Free | Pro | Business | Enterprise |\n| - | - | - | - | - |\n| Availability | No | No | No | Yes |\n\n## Enable zone holds\n\nWhen you enable a zone hold, no one else can [add your zone](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) to their Cloudflare account. If they attempt to, they will receive the following message:\n\n*The zone name provided is subject to a hold which disallows the creation of this zone. Please contact the domain owner to have this hold removed.*\n\nTo enable a zone hold:\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com).\n2. Select your account and zone.\n3. On the zone homepage, go to **Quick Actions**.\n4. For **Zone Hold**, switch the toggle to **On**.\n\nYou also have the option to **Also prevent subdomains**, which prevents anyone in your organization from creating subdomains or custom hostnames related to your zone.\n\n## Release zone holds\n\nYou may want to temporarily release a zone hold to allow another team to [register a subdomain](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/) in a separate Cloudflare account, such as `docs.example.com`.\n\nTo release a zone hold:\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com).\n2. Select your account and zone.\n3. On the zone homepage, go to **Quick Actions**.\n4. For **Zone Hold**, switch the toggle to **Off**.\n5. Choose the length of your release.\n6. Select **Release hold**.\n\n</page>\n\n<page>\n---\ntitle: Account API tokens  Cloudflare Fundamentals docs\ndescription: Learn what account API tokens are, when to use them, and what they\n  currently work with\nlastUpdated: 2025-10-20T10:08:59.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/\n  md: https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/index.md\n---\n\nWhile user tokens act on behalf of a particular user and inherit a subset of that user's permissions, account API tokens allow you to set up durable integrations that can act as service principals with their own specific set of permissions. This approach is ideal for scenarios like CI/CD, or building integrations with external services like SEIMs where it is important that the integration continues working, even long after the user who configured the integration may have left your organization altogether. User tokens are better for ad hoc tasks like scripting, where acting as the user is ideal and durability is less of a concern.\n\n## Create an account owned token\n\nNote\n\nCreating an account owned token requires Super Administrator permission on the account\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com).\n2. Go to **Manage Account** > **Account API Tokens**.\n3. Select **Create Token** and fill in the token name, permissions, and the optional expiration date for the token.\n4. Select **Continue to summary** and review the details.\n5. Select **Create Token**.\n\nAlternatively, you can create a token using the [account API token creation API](https://developers.cloudflare.com/api/resources/accounts/subresources/tokens/methods/create/).\n\nRefer to the [blog post](https://blog.cloudflare.com/account-owned-tokens-automated-actions-zaraz/) for more information.\n\n## Compatibility matrix\n\nAccount API tokens are generally available for all accounts. Some services may not support account API tokens yet. Refer to the compatibility matrix below for the latest status.\n\n| Product | Compatibility |\n| - | - |\n| Access |  |\n| Account Analytics |  |\n| Account Management |  |\n| AI Gateway |  |\n| API Shield |  |\n| Argo |  |\n| Billing |  |\n| Cache |  |\n| Tiered Cache |  |\n| Cloud Connector |  |\n| Configuration Rules |  |\n| Custom Lists |  |\n| Custom Pages |  |\n| D1 |  |\n| Data Loss Prevention |  |\n| Digital Experience Monitoring |  |\n| Distributed Web |  |\n| DNS |  |\n| Durable Objects |  |\n| Email Relay |  |\n| Secure Web Gateway |  |\n| Healthchecks |  |\n| Hyperdrive |  |\n| Images |  |\n| Intel Data Platform |  |\n| Load Balancing |  |\n| Log Explorer |  |\n| Magic Network Monitoring |  |\n| Magic Transit |  |\n| Magic WAN |  |\n| Managed Rules |  |\n| Network Error Logging |  |\n| Page Rules |  |\n| Page Shield |  |\n| Pages |  |\n| Pub/Sub |  |\n| R2 |  |\n| Radar |  |\n| Registrar |  |\n| Rulesets |  |\n| Spectrum |  |\n| Speed |  |\n| SSL/TLS |  |\n| Stream |  |\n| Super Bot Fight Mode |  |\n| Trace |  |\n| Tunnels |  |\n| Turnstile |  |\n| Vectorize |  |\n| Waiting Room |  |\n| Workers |  |\n| Workers AI |  |\n| Workers KV |  |\n| Workers Observability |  |\n| Workers Queues |  |\n| Workflows |  |\n| Zaraz |  |\n| Zero Trust Client Platform |  |\n| Zero Trust Devices and Services |  |\n| Zone/Domain Management |  |\n\n</page>\n\n<page>\n---\ntitle: Get Origin CA keys  Cloudflare Fundamentals docs\ndescription: Origin CA keys are often used as the value of header\n  X-AUTH-USER-SERVICE-KEY when interacting with Origin CA certificates API. It\n  is also used by Keyless SSL key server.\nlastUpdated: 2025-09-15T14:53:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/get-started/ca-keys/\n  md: https://developers.cloudflare.com/fundamentals/api/get-started/ca-keys/index.md\n---\n\nOrigin CA keys are often used as the value of header `X-AUTH-USER-SERVICE-KEY` when interacting with [Origin CA certificates](https://developers.cloudflare.com/ssl/origin-configuration/origin-ca/) API. It is also used by [Keyless SSL](https://developers.cloudflare.com/ssl/keyless-ssl/) key server.\n\nNote\n\nYou can also interact with the [Origin CA certificates API](https://developers.cloudflare.com/ssl/origin-configuration/origin-ca/#api-calls) using an [API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with **Permissions** that include `Zone`-`SSL and Certificates`-`Edit`.\n\nThe key value always starts with `v1.0-`.\n\n## Limitations\n\n* Changing the Origin CA key is not recorded by [Audit Logs](https://developers.cloudflare.com/fundamentals/account/account-security/review-audit-logs/).\n* Each time you view the Origin CA key, it will be presented as a different value. All these different values are **simultaneously valid** until you click the `Change` button, which immediately invalidates all previously generated values.\n* Origin CA keys have access to every account the user has access to.\n\n## View/Change your Origin CA keys\n\nTo retrieve your Origin CA keys:\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com).\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **User Profile** > **API Tokens**.\n\n3. In the **API Keys** section, select `Origin CA Key`.\n\n</page>\n\n<page>\n---\ntitle: Create API token  Cloudflare Fundamentals docs\ndescription: Learn how to create a token to perform actions using the Cloudflare API.\nlastUpdated: 2025-09-25T18:24:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/get-started/create-token/\n  md: https://developers.cloudflare.com/fundamentals/api/get-started/create-token/index.md\n---\n\nPrerequisite\n\nBefore you begin, [find your zone and account IDs](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/).\n\n1. Determine if you want a user token or an [Account API token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/). Use Account API tokens if you prefer service tokens that are not associated with users and your [desired API endpoints are compatible](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/#compatibility-matrix).\n\n2. From the [Cloudflare dashboard](https://dash.cloudflare.com/profile/api-tokens/), go to **My Profile** > **API Tokens** for user tokens. For Account Tokens, go to **Manage Account** > **API Tokens**.\n\n3. Select **Create Token**.\n\n4. Select a template from the available [API token templates](https://developers.cloudflare.com/fundamentals/api/reference/template/) or create a custom token. The following example uses the **Edit zone DNS** template.\n\n5. Add or edit the token name to describe why or how the token is used. Templates are prefilled with a token name and permissions.\n\n   ![Token template overview screen](https://developers.cloudflare.com/_astro/template-customize.DcB2c3lZ_ser64.webp)\n\n6. Modify the token's permissions. After selecting a permissions group (*Account*, *User*, or *Zone*), choose what level of access to grant the token. Most groups offer `Edit` or `Read` options. `Edit` is full CRUDL (create, read, update, delete, list) access, while `Read` is the read permission and list where appropriate. Refer to the [available token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) for more information.\n\n7. Select which resources the token is authorized to access. For example, granting `Zone DNS Read` access to a zone `example.com` will allow the token to read DNS records only for that specific zone. Any other zone will return an error for DNS record reads operations. Any other operation on that zone will also return an error.\n\n8. (Optional) Restrict how a token is used in the **Client IP Address Filtering** and **TTL (time to live)** fields.\n\n9. Select **Continue to summary**.\n\n10. Review the token summary. Select **Edit token** to make adjustments. You can also edit a token after creation.\n\n![Token summary screen displaying the resources and permissions selected](https://developers.cloudflare.com/_astro/token-summary.C1HKh5XB_1hd3J1.webp)\n\n1. Select **Create Token** to generate the token's secret.\n2. Copy the secret to a secure place.\n\nWarning\n\nThe token secret is **only shown once**. Do not store the secret in plaintext where others can access it. Anyone with this token can perform the authorized actions against the resources that the token has access to.\n\n![Token creation completion screen displaying your API token and the curl command to test your token](https://developers.cloudflare.com/_astro/token-complete.T8mB8qZ5_Z1lxcqT.webp)\n\nThe token secret page also includes an example command to test the token. Use the `/user/tokens/verify` endpoint to fetch the current status of the given token.",
      "language": "unknown"
    },
    {
      "code": "The result:",
      "language": "unknown"
    },
    {
      "code": "With this you have successfully created an API token and can start working with the Cloudflare API. After creating your first API token, you can create additional API tokens [via the API](https://developers.cloudflare.com/fundamentals/api/how-to/create-via-api/).\n\n</page>\n\n<page>\n---\ntitle: Get Global API key (legacy)  Cloudflare Fundamentals docs\ndescription: Global API key is the previous authorization scheme for interacting\n  with the Cloudflare API. When possible, use API tokens instead of Global API\n  key.\nlastUpdated: 2025-09-15T14:53:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/get-started/keys/\n  md: https://developers.cloudflare.com/fundamentals/api/get-started/keys/index.md\n---\n\nGlobal API key is the previous authorization scheme for interacting with the Cloudflare API. When possible, use [API tokens](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) instead of Global API key.\n\nNote\n\nGlobal API key is only available after the [account email address is verified](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n## Limitations\n\nGlobal API key has multiple limitations when compared to API tokens:\n\n* **Access to all Cloudflare resources** - Global API key has access to all of a user's resources. This makes it impossible to safely use Global API key to access non-production resources when a user also has access to production resources.\n\n* **Full permissions** - Similarly, Global API key has the exact same permissions as the user, which means if the user can delete zones or change DNS records, so can the Global API key.\n\n* **Limited to one per user** - Only one Global API key can be provisioned per user. This complicates using Cloudflare's API in production systems where maintaining two secrets for accessing the API is important in the case one needs to be rolled.\n\n* **Lack of advanced limits on usage** - API tokens can be limited to specific time windows and expire or be limited to use from specific IP ranges.\n\nFor these reasons, Global API key is not recommended for new customers. Current customers using Global API key are encouraged to migrate and use API tokens instead.\n\n## View your Global API key\n\nTo retrieve your Global API key:\n\n1. In the Cloudflare dashboard and select **User Profile** > **API Tokens**.\n\n   [Go to **Account API tokens**](https://dash.cloudflare.com/?to=/:account/api-tokens)\n\n2. In the **API Keys** section, click `View` button of **Global API Key**.\n\n## Change your Global API key\n\nIf your API key might be compromised, change your API key:\n\n1. Log in to the Cloudflare dashboard.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **API Tokens**.\n\n3. In the **API Keys** section, find your key.\n\n4. Select **Change**.\n\n</page>\n\n<page>\n---\ntitle: Control API Access  Cloudflare Fundamentals docs\ndescription: Super administrators of an Enterprise account are capable of\n  selectively scoping the API access. API access can be restricted for the\n  entire account or only for specified account members.\nlastUpdated: 2025-09-15T14:53:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/how-to/control-api-access/\n  md: https://developers.cloudflare.com/fundamentals/api/how-to/control-api-access/index.md\n---\n\nSuper administrators of an Enterprise account are capable of selectively scoping the API access. API access can be restricted for the entire account or only for specified account members.\n\nNote that the feature does not disable API calls not related to the Enterprise account.\n\n## Account-level access control\n\nTo restrict the API access for the entire account:\n\n1. In the Cloudflare dashboard, go to the **Members** page.\n\n   [Go to **Members**](https://dash.cloudflare.com/?to=/:account/members)\n\n2. Locate the **Enable API Access** section and then update the setting.\n\n## Member-level access control\n\nNote\n\nMember-level settings will override the account-level setting. If a specific member has API access enabled whereas the account has the access disabled, that member can still call APIs related to the Enterprise account.\n\nTo restrict the API access for a specific member:\n\n1. In the Cloudflare dashboard, go to the **Members** page.\n\n   [Go to **Members**](https://dash.cloudflare.com/?to=/:account/members)\n\n2. Click on the member to expand and choose the intended **API Access**. If `Account Default`, then it follows the account level setting.\n\n</page>\n\n<page>\n---\ntitle: Create tokens via API  Cloudflare Fundamentals docs\ndescription: Learn how to create API tokens via Cloudflare's API. Follow steps\n  to define access policies, set restrictions, and generate tokens securely.\nlastUpdated: 2025-09-11T16:11:23.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/how-to/create-via-api/\n  md: https://developers.cloudflare.com/fundamentals/api/how-to/create-via-api/index.md\n---\n\nGenerate new API tokens on the fly via the API. Before you can do this, you must create an API token in the Cloudflare dashboard that can create subsequent tokens.\n\nNote\n\nThe API Token Template [**Create additional tokens**](https://developers.cloudflare.com/fundamentals/api/reference/template/) must be used to generate the token. The option for **API Tokens::Edit** is not available in any other template or in the Custom Token builder.\n\n## Generating the initial token\n\nBefore you can create tokens via the API, you need to [generate the initial token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) via the Cloudflare dashboard.\n\nWarning\n\nThe token secret is **only shown once**. Do not store the secret in plaintext where others can access it. Anyone with this token can perform the authorized actions against the resources that the token has access to.\n\n### Recommendations\n\nCloudflare highly recommends that you do not grant other permissions to the token when using this template. Make sure you safeguard the new token because it can create tokens with access to any of a user's resources.\n\nCloudflare also recommends limiting the use of the token via client IP address filtering or TTL to reduce the potential for abuse in the event that the token is compromised. Refer to [Restrict token use](https://developers.cloudflare.com/fundamentals/api/how-to/restrict-tokens/) for more information.\n\n## Creating API tokens with the API\n\nYou can create a user owned token or account owned token to use with the API. Refer to the [user owned token](https://developers.cloudflare.com/api/resources/user/subresources/tokens/methods/create/) or the [account owned token](https://developers.cloudflare.com/api/resources/accounts/subresources/tokens/methods/create/) API schema docs for more information.\n\nTo create a token:\n\n1. Define the policy.\n2. Define the restrictions.\n3. Create the token.\n\n### 1. Define the Access Policy\n\nAn Access Policy defines what resources the token can act on and what permissions the token has to those resources. This process is similar to how you [create tokens in the Cloudflare dashboard](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/).\n\nEach token can contain multiple policies.",
      "language": "unknown"
    },
    {
      "code": "| Field | Description |\n| - | - |\n| `id` | Unique read-only identifier for the policy generated after creation. |\n| `effect` | Defines whether this policy is allowing or denying access. If only creating one policy, use `allow`. The evaluation order for policies is as follows: 1. Explicit `DENY` Policies; 2. Explicit `ALLOW` Policies; 3. Implicit `DENY ALL`. |\n| `resources` | Defines what resources are allowed to be configured. |\n| `permission_groups` | Defines what permissions the policy grants to the included resources. |\n\n#### Resources\n\nAPI token policies support three resource types: `User`, `Account`, and `Zone`.\n\nNote\n\nFetch each object's ID by calling the appropriate `GET <object>` API. Refer to [User](https://developers.cloudflare.com/api/resources/user/methods/get/), [Account](https://developers.cloudflare.com/api/resources/accounts/methods/list/), and [Zone](https://developers.cloudflare.com/api/resources/zones/methods/list/) documentation for more details.\n\n##### Account\n\nInclude a single account or all accounts in a token policy.\n\n* A **single account** is denoted as:`\"com.cloudflare.api.account.<ACCOUNT_ID>\": \"*\"`.\n* **All accounts** is denoted as:`\"com.cloudflare.api.account.*\": \"*\"`\n\n##### Zone\n\nInclude a **single zone**, **all zones in an account**, or **all zones in all accounts** in a token policy.\n\n* A **single zone** is denoted as:`\"com.cloudflare.api.account.zone.<ZONE_ID>\": \"*\"`\n* **All Zones in an account** are denoted as:`\"com.cloudflare.api.account.<ACCOUNT_ID>\": {\"com.cloudflare.api.account.zone.*\": \"*\"}`\n* **All zones in all accounts** is denoted as:`\"com.cloudflare.api.account.zone.*\": \"*\"`\n\n##### User\n\nFor user resources, you can only reference yourself, which is denoted as:`\"com.cloudflare.api.user.<USER_TAG>\": \"*\"`\n\n#### Permission groups\n\nAdd permission groups to the API token by specifying their `id` values. We recommend using `id` as the key for interacting with Cloudflare APIs; the permission `name` is cosmetic and subject to change. Permission groups are scoped to specific resources (user, account, or zone), so a permission group in a policy will only apply to the resource type it is scoped for.\n\nTo fetch all available permission groups and their IDs, use the [List permission groups](https://developers.cloudflare.com/api/resources/user/subresources/tokens/subresources/permission_groups/methods/list/) endpoint:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `API Tokens Write`\n* `API Tokens Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### 2. Define the restrictions\n\nSet up any limitations on how the token can be used. API tokens allow restrictions for client IP address filtering and TTLs. Refer to [Restrict token use](https://developers.cloudflare.com/fundamentals/api/how-to/restrict-tokens/) for more information.\n\nWhen defining TTLs, you can set the time at which a token becomes active with `not_before` and the time when it expires with `expires_on`. Both of these fields take UTC timestamps in the following format: `\"2018-07-01T05:20:00Z\"`.\n\nLimit usage of a token by client IP address filters with the following object:",
      "language": "unknown"
    },
    {
      "code": "Each parameter in the `in` and `not_in` objects must be in CIDR notation. For example, use `192.168.0.1/32` to specify a single IP address.\n\n### 3. Create the token\n\nCombine the previous information to create a token as in the following example:\n\n* Account token",
      "language": "unknown"
    },
    {
      "code": "* User token",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Make API calls  Cloudflare Fundamentals docs\ndescription: Learn how to make API calls using Cloudflare's API with\n  step-by-step instructions for Windows, including using curl and PowerShell,\n  and handling JSON.\nlastUpdated: 2025-08-15T13:12:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/how-to/make-api-calls/\n  md: https://developers.cloudflare.com/fundamentals/api/how-to/make-api-calls/index.md\n---\n\nOnce you [create your API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/), all API requests are authorized in the same way. Cloudflare uses the [RFC standard](https://tools.ietf.org/html/rfc6750#section-2.1) `Authorization: Bearer <API_TOKEN>` interface. An example request is shown below.",
      "language": "unknown"
    },
    {
      "code": "Never send or store your API token secret in plaintext. Also be sure not to check it into code repositories, especially public ones.\n\nConsider defining [environment variables](#environment-variables) for the zone or account ID, as well as for authentication credentials (for example, the API token).\n\nTo format JSON output for readability in the command line, you can use a tool like `jq`, a command-line JSON processor. For more information on obtaining and installing `jq`, refer to [Download jq](https://stedolan.github.io/jq/download/).\n\nThe following example will format the curl JSON output using `jq`:",
      "language": "unknown"
    },
    {
      "code": "## Using Cloudflare's APIs\n\nEvery Cloudflare API element is fixed to a version number. The latest version is Version 4. The stable base URL for all Version 4 HTTPS endpoints is: `https://api.cloudflare.com/client/v4/`\n\nFor specific guidance on making API calls, refer to the following resources:\n\n* The product's [Developer Docs section](https://developers.cloudflare.com/directory/) for how-to guides.\n* [API schema docs](https://developers.cloudflare.com/api/) for request and response payloads for each endpoint.\n* The first-party libraries for [Go](https://github.com/cloudflare/cloudflare-go), [TypeScript](https://github.com/cloudflare/cloudflare-typescript), [Python](https://github.com/cloudflare/cloudflare-python), or [HashiCorp's Terraform](https://github.com/cloudflare/terraform-provider-cloudflare).\n\n## Query parameters\n\nSeveral Cloudflare endpoints have optional query parameters to filter incoming results, such as [List Zones](https://developers.cloudflare.com/api/resources/zones/methods/list/).\n\nWhen adding those query parameters, make sure you enclose the URL in double quotes `\"\"` (just like the header values), or the API call might error.",
      "language": "unknown"
    },
    {
      "code": "You can enclose strings using either single quotes (`''`) or double quotes (`\"\"`). However, using single quotes prevents variable substitution in shells like `bash`. In the previous example, this would mean that the `$ACCOUNT_ID` and `$CLOUDFLARE_API_TOKEN` [environment variables](#environment-variables) would not be replaced with their values.\n\n### Pagination\n\nSometimes there will be too many results to display via the default page size, for example you might receive the following:",
      "language": "unknown"
    },
    {
      "code": "Two query parameter options exist, which can be combined to paginate across the results.\n\n* `page=x` enables you to select a specific page.\n* `per_page=xx` enables you to adjust the number of results displayed on a page. If you select too many, you may get a timeout.\n\nAn example might be `https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records?per_page=100&page=2`.\n\nOther options are:\n\n* `order`: Select the attribute to order by.\n* `direction`: Either `ASC` (ascending order) or `DESC` (descending order).\n\nThe available options will be listed at the end of the `result_info` of all endpoints in the [API documentation](https://developers.cloudflare.com/api/).\n\n## Making API calls on Windows\n\nRecent versions of Windows 10 and 11 [already include the curl tool](https://curl.se/windows/microsoft.html) used in the developer documentation's API examples. If you are using a different Windows version, refer to [Windows downloads](https://curl.se/windows/) in the curl website for more information on obtaining and installing this tool.\n\n### Using a Command Prompt window\n\nTo use the Cloudflare API with curl on a Command Prompt window, you must use double quotes (`\"`) as string delimiters.\n\nA typical `PATCH` request will be similar to the following:",
      "language": "unknown"
    },
    {
      "code": "To escape a double quote character in a request body (for example, a body specified with `-d` or `--data` in a `POST`/`PATCH` request), prepend it with another double quote (`\"`) or a backslash (`\\`) character.\n\nTo break a single command in two or more lines, use `^` as the line continuation character at the end of a line:",
      "language": "unknown"
    },
    {
      "code": "### Using PowerShell\n\nNote\n\nCloudflare recommends that you use the most recent stable or preview version of PowerShell. For more information, refer to [Installing PowerShell on Windows](https://learn.microsoft.com/en-us/powershell/scripting/install/installing-powershell-on-windows).\n\nPowerShell has specific cmdlets (`Invoke-RestMethod` and `ConvertFrom-Json`) for making REST API calls and handling JSON responses. The syntax for these cmdlets is different from the curl examples provided in the developer documentation.\n\nThe following example uses the `Invoke-RestMethod` cmdlet:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "The command assumes that the environment variables `ZONE_ID`, `CLOUDFLARE_EMAIL`, and `CLOUDFLARE_API_KEY` have been previously defined. For more information, refer to [Environment variables](#environment-variables).\n\nBy default, the output will only contain the first level of the JSON object hierarchy (in the above example, the content of objects such as `hosts` and `certificates` is not shown). To show additional levels and format the output like the `jq` tool, you can use the `ConvertFrom-Json` cmdlet specifying the desired maximum depth (by default, `2`):",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "ConvertFrom-Json handling of DateTime values\n\nThe `ConvertTo-Json` cmdlet tries to convert strings formatted as timestamps to DateTime values, according to the exact format in the string. For details on this behavior, refer to the notes in the [ConvertFrom-Json](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/convertfrom-json#notes) documentation.\n\nYou can also use the curl tool in PowerShell. However, in PowerShell `curl` is an alias to the `Invoke-WebRequest` cmdlet, which supports a different syntax from the usual curl tool. To use curl, enter `curl.exe` instead.\n\nA typical `PATCH` request with curl will be similar to the following:",
      "language": "unknown"
    },
    {
      "code": "To escape a double quote (`\"`) character in a request body (specified with `-d` or `--data`), prepend it with another double quote (`\"`) or a backslash (`\\`). You must escape double quotes even when using single quotes (`'`) as string delimiters.\n\nTo break a single command in two or more lines, use a backtick (`` ` ``) character as the line continuation character at the end of a line:",
      "language": "unknown"
    },
    {
      "code": "## Environment variables\n\nYou can define environment variables for values that repeat between commands, such as the zone or account ID. The lifetime of an environment variable can be the current shell session, all future sessions of the current user, or even all future sessions of all users on the machine you are defining them.\n\nYou can also use environment variables for keeping authentication credentials (API token, API key, and email) and reusing them in different commands. However, make sure you define these values in the smallest possible scope (either the current shell session only or all new sessions for the current user).\n\nThe procedure for setting and referencing environment variables depends on your platform and shell.\n\n### Define an environment variable\n\n* Linux and macOS\n\n  To define a `ZONE_ID` environment variable for the current shell session, run the following command:",
      "language": "unknown"
    },
    {
      "code": "To define the variable for all new shell sessions for the current user, add the command above at the end of your shell configuration file (for example, `~/.bashrc` for the `bash` shell and `~/.zshrc` for the `zsh` shell).\n\n* PowerShell\n\n  To define a `ZONE_ID` environment variable for the current PowerShell session, run the following command:",
      "language": "unknown"
    },
    {
      "code": "To define the environment variable for all new PowerShell sessions of the current user, set the variable in your PowerShell profile. You can get the path to your PowerShell profile by running `echo $PROFILE`.\n\n  Alternatively, set the variable for all new PowerShell sessions of the current user using the `SetEnvironmentVariable()` method of the `System.Environment` class. For example:",
      "language": "unknown"
    },
    {
      "code": "Running this command will not affect the current session. You will need to close and start a new PowerShell session.\n\n* Windows Command Prompt\n\n  To define a `ZONE_ID` environment variable for the current Command Prompt session, run the following command:",
      "language": "unknown"
    },
    {
      "code": "To define an environment variable for all future Command Prompt sessions of the current user, run the following command:",
      "language": "unknown"
    },
    {
      "code": "Running this command will not affect the current window. You will need to either run the `set` command or close and start a new Command Prompt window.\n\n### Reference an environment variable\n\n* Linux and macOS\n\n  When referencing an environment variable in a command, add a `$` prefix to the variable name (for example, `$ZONE_ID`). Make sure that the full string referencing the variable is either unquoted (if it does not contain spaces) or enclosed in double quotes (`\"\"`).\n\n  For example:",
      "language": "unknown"
    },
    {
      "code": "* PowerShell\n\n  When referencing an environment variable in a command, add an `$Env:` prefix to the variable name (for example, `$Env:ZONE_ID`). Make sure that the full string referencing the variable is either unquoted or enclosed in double quotes (`\"\"`).\n\n  For example:",
      "language": "unknown"
    },
    {
      "code": "* Windows Command Prompt\n\n  When referencing an environment variable in a command, enclose the variable name in `%` characters (for example, `%ZONE_ID%`).\n\n  For example:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Restrict tokens  Cloudflare Fundamentals docs\ndescription: \"API tokens can be restricted at runtime in two ways:\"\nlastUpdated: 2024-12-16T22:33:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/how-to/restrict-tokens/\n  md: https://developers.cloudflare.com/fundamentals/api/how-to/restrict-tokens/index.md\n---\n\nAPI tokens can be restricted at runtime in two ways:\n\n* [Client IP address range filtering](#client-ip-address-range-filtering)\n* [Time To Live (TTL) constraints](#time-to-live-ttl-constraints)\n\n## Client IP address range filtering\n\nClient IP address restrictions control which IP addresses can make API requests with this token. By default, if no filtering is applied, all IP addresses can use the token. Once an `Is in` rule is applied, the token can only be used from the defined IP addresses. Define ranges with [CIDR notation](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#CIDR_notation). To allow an IP range with exceptions, define `Is not in` to exempt specific IPs or smaller ranges.\n\n![IP Address filtering options](https://developers.cloudflare.com/_astro/ip-filter.DbEuurVj_Z29roa9.webp)\n\nNote\n\nClient IP address range filtering is not applied to the [Verify Token](https://developers.cloudflare.com/api/resources/user/subresources/tokens/methods/verify/) endpoint.\n\n## Time to live (TTL) constraints\n\nBy default, tokens do not expire and are long lived. Defining a TTL sets when a token starts being valid and when a token is no longer valid. This is often referred to as `notBefore` and `notAfter`. Setting these timestamps limits the lifetime of the token to the defined period. Not setting the start date or `notBefore` means the token is active as soon as it is created. Not setting the end date or `notAfter` means the token does not expire.\n\nNote\n\nDates selected are defined as 00:00 UTC of that day. For finer grained time selection, use the [API](https://developers.cloudflare.com/fundamentals/api/).\n\n![Time to Live selection calendar](https://developers.cloudflare.com/_astro/ttl.6XWjuAt__1EwCH.webp)\n\n</page>\n\n<page>\n---\ntitle: Roll tokens  Cloudflare Fundamentals docs\ndescription: If your token is lost or compromised, you can either create a new\n  token or roll your token to generate a new secret. Rolling your API token into\n  a new one will invalidate the previous token, but the access and permissions\n  will be the same as the previous API token.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/how-to/roll-token/\n  md: https://developers.cloudflare.com/fundamentals/api/how-to/roll-token/index.md\n---\n\nIf your token is lost or compromised, you can either create a new token or roll your token to generate a new secret. Rolling your API token into a new one will invalidate the previous token, but the access and permissions will be the same as the previous API token.\n\nTo roll your API token:\n\n1. Log in to the Cloudflare dashboard.\n\n   [Go to **Account home**](https://dash.cloudflare.com/?to=/:account/home)\n\n2. Go to **My Profile** > **API Tokens**.\n\n3. Next to the API token you want to roll, select the **three dot icon** >**Roll**.\n\n4. Select **Confirm** to generate a new API token.\n\n</page>\n\n<page>\n---\ntitle: API deprecations  Cloudflare Fundamentals docs\ndescription: Cloudflare occasionally makes updates to our APIs that result in\n  behavior changes or deprecations. When this happens, we will communicate when\n  the API will no longer be available and whether there will be a replacement.\nlastUpdated: 2025-05-05T16:36:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/deprecations/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/deprecations/index.md\n---\n\nCloudflare occasionally makes updates to our APIs that result in behavior changes or deprecations. When this happens, we will communicate when the API will no longer be available and whether there will be a replacement.\n\nNote\n\nSubscribe to all API deprecation posts via [RSS](https://developers.cloudflare.com/fundamentals/api/reference/deprecations/index.xml).\n\n[Subscribe to RSS](https://developers.cloudflare.com/fundamentals/api/reference/deprecations/index.xml)\n\n## 2025-12-09\n\n**Authoritative DNS and DNS Firewall Legacy Analytics**\n\nDeprecation date: December 9, 2025\n\nEnd of life date: December 1, 2026\n\nThe following REST APIs are deprecated and will reach their end of life on December 1, 2026.\n\n* [DNS Analytics API](https://developers.cloudflare.com/api/resources/dns/subresources/analytics/)\n* [DNS Firewall Analytics API](https://developers.cloudflare.com/api/resources/dns_firewall/subresources/analytics/)\n\nAll existing functionality is fully supported by Cloudflare's GraphQL Analytics API, which provides improved performance, flexibility, and long-term support. Integrations using the REST API need to be migrated to the new GraphQL API before December 1, 2026 in order to ensure uninterrupted service.\n\nDeprecated APIs:\n\n* `GET/zones/{zone_id}/dns_analytics/` (DNS Analytics API)\n* `GET/accounts/{account_id}/dns_firewall/{dns_firewall_id}/dns_analytics/report` (DNS Firewall Analytics API)\n\nReplacements:\n\n* [GraphQL API for DNS Analytics](https://developers.cloudflare.com/dns/additional-options/analytics/#explore-with-the-api)\n* [GraphQL API for DNS Firewall Analytics](https://developers.cloudflare.com/dns/dns-firewall/analytics/#graphql)\n\n## 2025-11-11\n\n**Zero Trust Devices**\n\nEnd of life date: November 11, 2025\n\nWe are changing the definition of Devices. Devices are going to represent the real-world machines while the relation between Users and Devices will be represented by a new concept - Registrations.\n\nAs a result multiple fields are moving from Devices to Registrations and we are deprecating the endpoints listed below.\n\nThe deprecated endpoints are not supported on accounts with [multi-user mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/windows-multiuser/) enabled.\n\nDeprecated API:\n\n* `GET /accounts/{account_id}/devices`\n* `GET /accounts/{account_id}/devices/{device_id}`\n* `GET /accounts/{account_id}/devices/{device_id}/override_codes`\n* `POST /accounts/{account_id}/devices/revoke`\n* `POST /accounts/{account_id}/devices/unrevoke`\n\nReplacement:\n\n* `GET /accounts/{account_id}/devices/physical-devices`\n* `GET /accounts/{account_id}/devices/physical-devices/{device_id}`\n* `GET /accounts/{account_id}/devices/registrations`\n* `GET /accounts/{account_id}/devices/registrations/{registration_id}`\n* `GET /accounts/{account_id}/devices/registrations/{registration_id}/override_codes`\n* `POST /accounts/{account_id}/devices/registrations/revoke`\n* `POST /accounts/{account_id}/devices/registrations/unrevoke`\n\n## 2025-11-03\n\n**Cloudflare Mirage**\n\nDeprecation date: November 2025\n\nEnd of life date: January 2026\n\nFollowing on from the [deprecation of Cloudflare Mirage](https://developers.cloudflare.com/speed/optimization/images/mirage/), the following API endpoints that manage Mirage settings are now deprecated and will be sunsetted in January 2026.\n\nDeprecated APIs:\n\n* `GET /zones/{zone_id}/settings/mirage`\n* `PATCH /zones/{zone_id}/settings/mirage`\n\nAffected APIs:\n\n* `GET /zones/{zone_id}/pagerules/settings` - Mirage will be removed from available settings.\n* `POST /zones/{zone_id}/pagerules` - Mirage parameter will be removed.\n* `PATCH /zones/{zone_id}/pagerules/{rule_id}` - Mirage parameter will be removed.\n* `PUT /zones/{zone_id}/pagerules/{rule_id}` - Mirage parameter will be removed.\n* `GET /zones/{zone_id}/rulesets/{ruleset_id}` - Mirage parameter in `set_config` action will be removed.\n* `GET /zones/{zone_id}/rulesets/{ruleset_id}/versions/{version_id}` - Mirage parameter in `set_config` action will be removed.\n* `POST /zones/{zone_id}/rulesets` - Mirage parameter in `set_config` action will be removed.\n* `PUT /zones/{zone_id}/rulesets/{ruleset_id}` - Mirage parameter in `set_config` action will be removed.\n* `POST /zones/{zone_id}/rulesets/{ruleset_id}/rules` - Mirage parameter in `set_config` action will be removed.\n* `PATCH /zones/{zone_id}/rulesets/{ruleset_id}/rules/{rule_id}` - Mirage parameter in `set_config` action will be removed.\n* `GET /accounts/{account_id}/rulesets/{ruleset_id}` - Mirage parameter in `set_config` action will be removed.\n* `GET /accounts/{account_id}/rulesets/{ruleset_id}/versions/{version_id}` - Mirage parameter in `set_config` action will be removed.\n* `POST /accounts/{account_id}/rulesets` - Mirage parameter in `set_config` action will be removed.\n* `PUT /accounts/{account_id}/rulesets/{ruleset_id}` - Mirage parameter in `set_config` action will be removed.\n* `POST /accounts/{account_id}/rulesets/{ruleset_id}/rules` - Mirage parameter in `set_config` action will be removed.\n* `PATCH /accounts/{account_id}/rulesets/{ruleset_id}/rules/{rule_id}` - Mirage parameter in `set_config` action will be removed.\n\n## 2025-10-15\n\n**Cloudflare Radar: Summary and Timeseries Groups Endpoints**\n\nDeprecation date: October 15, 2025\n\nEnd of life date: April 15, 2026\n\nThe Radar API currently has multiple summary and timeseries groups endpoints per dataset (for example, `/radar/http/summary/device_type` and `/radar/http/timeseries_groups/device_type`), which share nearly identical parameters and schema. To simplify the API and improve maintainability, these endpoints will be replaced with parameterized endpoints using a `{dimension}` path parameter.\n\nDeprecated APIs:\n\n* `GET /radar/http/summary/device_type`\n* `GET /radar/http/summary/bot_class`\n* `GET /radar/http/timeseries_groups/device_type`\n* `GET /radar/http/timeseries_groups/bot_class`\n* Other similar summary and timeseries groups endpoints for the following datasets: AI Bots, AI Inference, AS112, DNS, Email Routing, Email security, HTTP, Layer 3 Attacks, Layer 7 Attacks, Leaked Credential Checks\n\nReplacements:\n\n* `GET /radar/http/summary/{dimension}`\n* `GET /radar/http/timeseries_groups/{dimension}`\n* ...\n\nHere, `{dimension}` is a required path parameter listing all available dimensions for the dataset.\n\nFor users calling the API directly (not via the Cloudflare SDK), no action is required. For users using the SDK, we recommend updating to the new operations to ensure compatibility after the operations are removed.\n\n## 2025-07-01\n\n**Cloudflare Radar: Verified Bots APIs**\n\nDeprecation date: July 1, 2025\n\nEnd of life date: January 1, 2026\n\nThe Radar Verified Bots API is now deprecated and will be replaced by the new Bots API.\n\nDeprecated APIs:\n\n* `GET /radar/verified_bots/top/bots`\n* `GET /radar/verified_bots/top/categories`\n\nReplacements:\n\n* `GET /radar/bots/summary/bot`\n* `GET /radar/bots/summary/category`\n\n## 2025-07-01\n\n**Cloudflare DWeb Resolver**\n\nDeprecation date: July 1, 2025\n\nThe Cloudflare DWeb Resolver experiment is ending.\n\nDeprecated APIs:\n\n* DoH resolver on resolver.cloudflare-eth.com\n\n## 2025-06-15\n\n**Firewall Rules API and Filters API**\n\nDeprecation date: June 15, 2025\n\nThe Firewall Rules API and the Filters API are deprecated, since Firewall Rules was deprecated in favor of [WAF custom rules](https://developers.cloudflare.com/waf/custom-rules/). Refer to [Firewall Rules upgrade](https://developers.cloudflare.com/waf/reference/legacy/firewall-rules-upgrade/) for more information about this change.\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/firewall/rules`\n* `POST /zones/:zone_id/firewall/rules`\n* `PATCH /zones/:zone_id/firewall/rules`\n* `PUT /zones/:zone_id/firewall/rules`\n* `DELETE /zones/:zone_id/firewall/rules`\n* `GET /zones/:zone_id/firewall/rules/:rule_id`\n* `PATCH /zones/:zone_id/firewall/rules/:rule_id`\n* `PUT /zones/:zone_id/firewall/rules/:rule_id`\n* `DELETE /zones/:zone_id/firewall/rules/:rule_id`\n* `GET /zones/:zone_id/filters`\n* `POST /zones/:zone_id/filters`\n* `PUT /zones/:zone_id/filters`\n* `DELETE /zones/:zone_id/filters`\n* `GET /zones/:zone_id/filters/:filter_id`\n* `PUT /zones/:zone_id/filters/:filter_id`\n* `DELETE /zones/:zone_id/filters/:filter_id`\n\nReplacement: [WAF custom rules](https://developers.cloudflare.com/waf/custom-rules/)\n\n## 2025-06-15\n\n**WAF managed rules APIs (previous version)**\n\nDeprecation date: June 15, 2025\n\nThe APIs for managing WAF managed rules (previous version)  namely for managing packages, rule groups, rules, and overrides  are deprecated in favor of using the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) for managing the new version of [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/). Refer to [WAF Managed Rules upgrade](https://developers.cloudflare.com/waf/reference/legacy/old-waf-managed-rules/upgrade/) for more information about this change.\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/firewall/waf/packages`\n* `GET /zones/:zone_id/firewall/waf/packages/:package_id`\n* `PATCH /zones/:zone_id/firewall/waf/packages/:package_id`\n* `GET /zones/:zone_id/firewall/waf/packages/:package_id/groups`\n* `GET /zones/:zone_id/firewall/waf/packages/:package_id/groups/:group_id`\n* `PATCH /zones/:zone_id/firewall/waf/packages/:package_id/groups/:group_id`\n* `GET /zones/:zone_id/firewall/waf/packages/:package_id/rules`\n* `GET /zones/:zone_id/firewall/waf/packages/:package_id/rules/:rule_id`\n* `PATCH /zones/:zone_id/firewall/waf/packages/:package_id/rules/:rule_id`\n* `GET /zones/:zone_id/firewall/waf/overrides`\n* `POST /zones/:zone_id/firewall/waf/overrides`\n* `GET /zones/:zone_id/firewall/waf/overrides/:override_id`\n* `PUT /zones/:zone_id/firewall/waf/overrides/:override_id`\n* `DELETE /zones/:zone_id/firewall/waf/overrides/:override_id`\n\nReplacement: [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/) (new version)\n\n## 2025-06-15\n\n**Rate Limiting API (previous version)**\n\nDeprecation date: June 15, 2025\n\nThe Rate Limiting API is deprecated, in favor of using the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) for managing the new [rate limiting rules](https://developers.cloudflare.com/waf/rate-limiting-rules/). Refer to [Rate limiting (previous version) upgrade](https://developers.cloudflare.com/waf/reference/legacy/old-rate-limiting/upgrade/) for more information about this change.\n\nDeprecated API:\n\n* `GET /zones/:zone_id/rate_limits`\n* `POST /zones/:zone_id/rate_limits`\n* `GET /zones/:zone_id/rate_limits/:rate_limit_id`\n* `PUT /zones/:zone_id/rate_limits/:rate_limit_id`\n* `DELETE /zones/:zone_id/rate_limits/:rate_limit_id`\n\nReplacement: [Rate limiting rules](https://developers.cloudflare.com/waf/rate-limiting-rules/) (new version)\n\n## 2025-06-08\n\n**Zone Setting: cname\\_flattening**\n\nDeprecation date: June 8, 2025\n\nThe Zone Settings API endpoints for managing zone-level CNAME flattening are deprecated. Instead, use the [Show DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/zone/methods/get/) and [Update DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/zone/methods/edit/) endpoints to manage this setting.\n\nChanges via the old endpoints will be reflected in the new ones, and vice versa, so there is no need to migrate existing zones. However, future API calls must use DNS Settings instead of the Zone Settings endpoints.\n\nNote that, with the deprecated zone setting, values `\"off\"` and `\"apex\"` have the same behavior. These are represented as `{\"flatten_all_cnames\": false}` in the new API. The zone setting `\"on\"` corresponds to `{\"flatten_all_cnames\": true}` in the new API.\n\nAffected APIs:\n\n* `GET /zones/:zone_id/settings`\n* `PATCH /zones/:zone_id/settings`\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/settings/cname_flattening`\n* `PATCH /zones/:zone_id/settings/cname_flattening`\n\n## 2025-03-23\n\n**Eligible Zones For Account Custom Nameservers**\n\nDeprecation date: March 23, 2025\n\nUsers can now add custom nameservers that are not part of a zone managed within their account. As a result, any zone is eligible for custom nameservers, regardless of whether it is managed by Cloudflare. Given this change, an endpoint to check for eligible zones is no longer relevant and is therefore being deprecated.\n\nDeprecated APIs:\n\n* `GET /accounts/:account_id/custom_ns/availability`\n\n## 2025-03-20\n\n**Cloudflare Radar: Attack top industry and vertical endpoints**\n\nDeprecation date: March 20, 2025\n\nEnd of life date: September 20, 2025\n\nThe `/top/industry` and `/top/vertical` attack endpoints are now deprecated and will be replaced by the corresponding summary endpoints.\n\nAffected APIs:\n\n* `GET /radar/attacks/layer3/top/industry`\n* `GET /radar/attacks/layer3/top/vertical`\n* `GET /radar/attacks/layer7/top/industry`\n* `GET /radar/attacks/layer7/top/vertical`\n\nReplacements:\n\n* `GET /radar/attacks/layer3/summary/industry`\n* `GET /radar/attacks/layer3/summary/vertical`\n* `GET /radar/attacks/layer7/summary/industry`\n* `GET /radar/attacks/layer7/summary/vertical`\n\n## 2025-03-17\n\n**Security Center: Security level and Threat Score are now automated**\n\nChange date: March 17, 2025\n\nCloudflare now combines the IP address threat signal with threshold and botnet data, no longer requiring you to set a sensitivity level. Users will no longer be able to set Security level via the Cloudflare dashboard. However, users can still rely on the existing API or Terraform configuration to set a Security level.\n\nIf you are using threat score in rule expressions, you should review those expressions to make sure the rule still triggers when appropriate. Cloudflare will audit and migrate your configuration in the future to update any references to threat score. If you are using the Rulesets API or Terraform to push your configuration, you should review your scripts and pipelines before the end of Q1 2026 to prevent issues.\n\n## 2025-03-14\n\n**Account Settings: default\\_nameservers and use\\_account\\_custom\\_ns\\_by\\_default**\n\nDeprecation date: March 14, 2025\n\nThe fields `\"default_nameservers\"` and `\"use_account_custom_ns_by_default\"` within the `\"settings\"` object of accounts are deprecated. Instead, use the [Show DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/account/methods/get/) and [Update DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/account/methods/edit/) endpoints to manage this setting. This setting is available in the new API as `.zone_defaults.nameservers.type`, with allowed values `\"cloudflare.standard\"`, `\"cloudflare.standard.random\"`, `\"custom.account\"` and `\"custom.tenant\"`.\n\nChanges via the old endpoints will be reflected in the new ones, and vice versa, so there is no need to migrate existing zones. However, future API calls must use DNS Settings instead of the Accounts endpoints.\n\nAffected APIs:\n\n* `GET /accounts`\n* `POST /accounts`\n* `GET /accounts/:account_id`\n* `PUT /accounts/:account_id`\n\n## 2025-03-11\n\n**Cloudflare Radar: Layer 7 attack magnitude parameter**\n\nDeprecation date: March 11, 2025\n\nEnd of life date: June 11, 2025\n\nThe layer 7 attack `magnitude` query parameter, which allows you to define attack magnitude by total requests mitigated (`MITIGATED_REQUESTS`) or total zones attacked (`AFFECTED_ZONES`), is deprecated. Moving forward, Cloudflare Radar will only support defining layer 7 attack magnitude based on the total number of mitigated requests.\n\nAffected API:\n\n`GET /radar/attacks/layer7/top/attacks`\n\nReplacement:\n\nUsers should stop using the `magnitude` parameter, as the default behavior already uses `MITIGATED_REQUESTS`.\n\n## 2025-02-21\n\n**DNS Records API: Changes to Filter Parameters**\n\nDeprecation date: February 21, 2025\n\nThe following URL parameters for filtering DNS records are deprecated:\n\n* `name=contains:value` Instead, use the supported `name.contains=value` syntax.\n* `name=starts_with:value` Instead, use the supported `name.startswith=value` syntax.\n* `name=ends_with:value` Instead, use the supported `name.endswith=value` syntax.\n* `name=one,two,three` (searching for one of multiple possible names, separated by commas) Instead, make multiple requests, one for each possible `name`. Alternatively, if only querying the `name` field, the `?match=any&name=one&name=two&name=three` syntax can be used instead. This syntax has an extended deprecation date of May 23, 2025.\n* `content=contains:value` Instead, use the supported `content.contains=value` syntax.\n* `content=starts_with:value` Instead, use the supported `content.startswith=value` syntax.\n* `content=ends_with:value` Instead, use the supported `content.endswith=value` syntax.\n* `content=one,two,three` (searching for one of multiple possible contents, separated by commas) Instead, make multiple requests, one for each possible `content`. Alternatively, if only querying the `content` field, the `?match=any&content=one&content=two&content=three` syntax can be used instead. This syntax has an extended deprecation date of May 23, 2025.\n* `type=contains:value` Searching for substrings of a type name will no longer be supported. Instead, please search for an exact type name, such as `type=CNAME`. If the input value is a free-text search from a human user, consider using the `search` parameter instead.\n\nNone of the parameters being deprecated were ever officially supported per our API documentation.\n\nAffected APIs:\n\n* `GET /zones/:zone_id/dns_records`\n\n## 2024-12-09\n\n**Access applications: self\\_hosted\\_domains**\n\nDeprecation date: November 21, 2025\n\nThe `self_hosted_domains` field for [Access applications](https://developers.cloudflare.com/api/resources/zero_trust/subresources/access/subresources/applications/methods/update/) is deprecated in favor of `destinations` to allow for more flexibility in defining different types of domains.\n\nBefore:",
      "language": "unknown"
    },
    {
      "code": "After:",
      "language": "unknown"
    },
    {
      "code": "The API will accept both fields until the deprecation date. If `self_hosted_domains` are provided, then they will be interpreted as `public` destinations. However, if `destinations` are provided, then `self_hosted_domains` will be ignored even if provided.\n\nAdditionally, the API will continue to return `self_hosted_domains` until the deprecation date. The field will contain the URIs of the subset of destinations that have type `public`.\n\nAffected APIs:\n\n* `GET /accounts/:account_id/access/apps`\n* `POST /accounts/:account_id/access/apps`\n* `GET /accounts/:account_id/access/apps/:app_id`\n* `PUT /accounts/:account_id/access/apps/:app_id`\n* `GET /zones/:zone_id/access/apps`\n* `POST /zones/:zone_id/access/apps`\n* `GET /zones/:zone_id/access/apps/:app_id`\n* `PUT /zones/:zone_id/access/apps/:app_id`\n\n## 2024-11-30\n\n**Zone information in individual DNS records**\n\nDeprecation date: November 30, 2024\n\nCurrently, each individual DNS record returned by the API contains information about the zone it is on, specifically the zone ID and name.",
      "language": "unknown"
    },
    {
      "code": "This information is redundant because both affected API routes are already within the zone scope. In particular, the zone ID will already be known to any user of these routes because it appears in the URL. The zone name can be retrieved by making a `GET` request to `/zones/:zone_id` if it is necessary.\n\nAfter November 30th, 2024, Cloudflare will stop including the `zone_id` and `zone_name` fields on individual DNS records in API responses. These fields are currently ignored when sent to the API as part of a request body, so no changes to request bodies are required.\n\nModified API:\n\n* `GET /zones/:zone_id/dns_records`\n* `POST /zones/:zone_id/dns_records`\n* `GET /zones/:zone_id/dns_records/:dns_record_id`\n* `PATCH /zones/:zone_id/dns_records/:dns_record_id`\n* `PUT /zones/:zone_id/dns_records/:dns_record_id`\n\n## 2024-10-01\n\n**DNS Records: Error chains for DNS validation errors**\n\nDeprecation date: October 1, 2024\n\nCloudflare is making a minor change to the representation of certain errors when creating DNS records. Currently, when the DNS record to be created is invalid, an error similar to the following may be returned:",
      "language": "unknown"
    },
    {
      "code": "After October 1st, 2024, the `error_chain` will be omitted, returning the root cause directly without wrapping it in another \"DNS Validation Error\" error:",
      "language": "unknown"
    },
    {
      "code": "## 2024-09-13\n\n**Legacy DNS Settings Endpoints**\n\nDeprecation date: September 13, 2024\n\nThe dedicated endpoints for DNS settings `use_apex_ns` and `secondary_overrides` are being deprecated.\n\nInstead, use the [Show DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/zone/methods/get/) and [Update DNS Settings](https://developers.cloudflare.com/api/resources/dns/subresources/settings/subresources/zone/methods/edit/) endpoints to manage these settings.\n\n* Instead of the `.../use_apex_ns` endpoint, use the `multi_provider` field.\n* Instead of the `.../secondary_overrides` endpoint, use the `secondary_overrides` field.\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/dns_settings/use_apex_ns`\n* `PATCH /zones/:zone_id/dns_settings/use_apex_ns`\n* `GET /zones/:zone_id/dns_settings/secondary_overrides`\n* `PATCH /zones/:zone_id/dns_settings/secondary_overrides`\n\n## 2024-08-15\n\n**Brotli**\n\nDeprecation date: August 15, 2024\n\nThe Brotli setting and its API endpoints are deprecated. Brotli compression is available for all non-Enterprise zones, and it will be extended to Enterprise zones in the coming year.\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/settings/brotli`\n* `PATCH /zones/:zone_id/settings/brotli`\n\nEnterprise customers can override Cloudflare's default compression behavior using [Compression Rules](https://developers.cloudflare.com/rules/compression-rules/).\n\n## 2024-08-05\n\n**Auto Minify**\n\nDeprecation date: August 5, 2024\n\nThe Auto Minify API endpoints are deprecated since the Auto Minify feature was deprecated.\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/settings/minify`\n* `PATCH /zones/:zone_id/settings/minify`\n\n## 2024-07-14\n\n**DNS Records: 'locked' Field**\n\nDeprecation date: July 14, 2024\n\nThe `\"locked\"` field of DNS records in API responses is unused and has been guaranteed to always be `false` for more than a year. This deprecation means that the field will be omitted from API responses entirely. If received from a client, the field will continue to be ignored, just as it is today.\n\nModified API:\n\n* `GET /zones/:zone_id/dns_records`\n* `POST /zones/:zone_id/dns_records`\n* `GET /zones/:zone_id/dns_records/:dns_record_id`\n* `PATCH /zones/:zone_id/dns_records/:dns_record_id`\n* `PUT /zones/:zone_id/dns_records/:dns_record_id`\n\n## 2024-06-30\n\n**Mobile redirect**\n\nDeprecation date: June 30, 2024\n\nThis endpoint and its related APIs are deprecated in favor of [Single Redirects](https://developers.cloudflare.com/rules/url-forwarding/single-redirects/). Refer to [Perform mobile redirects](https://developers.cloudflare.com/rules/url-forwarding/examples/perform-mobile-redirects/) to migrate Mobile Redirect to Redirect Rules.\n\nDeprecated API:\n\n* `GET /zones/:zone_identifier/settings/mobile_redirect`\n* `PATCH /zones/:zone_identifier/settings/mobile_redirect`\n\nReplacement: [Single Redirects](https://developers.cloudflare.com/rules/url-forwarding/single-redirects/)\n\n## 2024-06-14\n\n**Server-side Excludes**\n\nDeprecation date: June 14, 2024\n\nThe Server-side Excludes feature and its API endpoints are deprecated.\n\nDeprecated APIs:\n\n* `GET /zones/:zone_id/settings/server_side_exclude`\n* `PATCH /zones/:zone_id/settings/server_side_exclude`\n\n## 2024-05-31\n\n**Name-Related Data Fields on SRV (DNS) Records**\n\nDeprecation date: May 31, 2024\n\nThe name of an SRV record normally consists of three parts: the service (e.g., `_xmpp`), the protocol (e.g., `_tcp`), and the base name (`example.com`).\n\nThe complete name would then be, e.g., `_xmpp._tcp.example.com`.\n\nWhen interacting with DNS records through the [API](https://developers.cloudflare.com/api/resources/dns/subresources/records/methods/create/), SRV records contain both a full `name` as well as a `data` map containing the individual components of the name:",
      "language": "unknown"
    },
    {
      "code": "We are deprecating the `service`, `proto` and `name` fields *within* the `data` map in favor of the `name` field *outside* the data map, which is the same name field that's used by all other record types.\n\nBefore the end of life date, please ensure that:\n\n* when reading SRV records, you use only the `name` outside of the data map and ignore `service`, `proto` and `name` within the data map if they exist; and\n* when writing SRV records, you set the `name` outside of the data map and **do not set** `service`, `proto` or `name` within the data map.\n\nAfter the end of life date, the API will stop producing the `service`, `proto` and `name` data fields, and if any of them are received from a client, an error will be returned.\n\nThis deprecation does not affect other SRV data fields not mentioned above (`priority`, `weight`, `port`, `target`) or data fields for any other record type other than SRV.\n\nModified API:\n\n* `GET /zones/:zone_id/dns_records`\n* `POST /zones/:zone_id/dns_records`\n* `GET /zones/:zone_id/dns_records/:dns_record_id`\n* `PATCH /zones/:zone_id/dns_records/:dns_record_id`\n* `PUT /zones/:zone_id/dns_records/:dns_record_id`\n\n## 2024-03-31\n\n**Privacy Pass API Removal**\n\nDeprecation date: March 31, 2024\n\nIn 2017, Cloudflare [announced support](https://blog.cloudflare.com/cloudflare-supports-privacy-pass/) for Privacy Pass, a recent protocol to let users prove their identity across multiple sites anonymously without enabling tracking. The initial use case was to provide untraceable tokens to sites to vouch for users who might otherwise have been presented with a CAPTCHA challenge. In the time since this release, Privacy Pass has evolved both at the [IETF](https://datatracker.ietf.org/wg/privacypass/documents/) and within Cloudflare. The version announced in 2017 is now considered legacy, and these legacy Privacy Pass tokens are no longer supported as an alternative to Cloudflare challenges. As has been discussed on our blog [The end road for CAPTCHA](https://blog.cloudflare.com/end-cloudflare-captcha/), Cloudflare uses a variety of signals to infer if incoming traffic is likely automated. The (legacy) Privacy Pass zone setting is no longer meaningful to Cloudflare customers as Cloudflare now operates [CAPTCHA free](https://blog.cloudflare.com/turnstile-ga/), and supports the latest [Privacy Pass draft](https://blog.cloudflare.com/eliminating-captchas-on-iphones-and-macs-using-new-standard/).\n\nIn September 2023, support for legacy Privacy Pass tokens as an alternative to Cloudflare Managed Challenge was removed. By the end of March 2024, the current public-facing API will be removed as well.\n\nDeprecated API:\n\n* `GET zones/:zone_identifier/settings/privacy_pass`\n* `POST zones/:zone_identifier/settings/privacy_pass`\n\n## 2024-02-04\n\n**Argo Tunnel**\n\nDeprecation date: February 4, 2024\n\nThis endpoint and its related APIs are deprecated in favor of the Cloudflare Tunnels equivalent APIs.\n\nDeprecated API:\n\n* `GET accounts/:account_identifier/tunnels`\n* `POST accounts/:account_identifier/tunnels`\n* `GET accounts/:account_identifier/tunnels/:tunnel_id`\n* `DELETE accounts/:account_identifier/tunnels/:tunnel_id`\n\nReplacement: Cloudflare Tunnel API\n\n## 2023-07-01\n\n**ChaCha20 TLS Cipher Removal**\n\nDeprecation date: July 1, 2023\n\nBack in 2016, Cloudflare [introduced support](https://blog.cloudflare.com/it-takes-two-to-chacha-poly/) for `ChaCha20-Poly1305` cipher suites for TLS 1.2. At the time, we introduced two variants of these new suites, the \"standard\" suites as defined by the IETF RFC 7905, and \"draft\" suites that followed an earlier draft of said specification. The draft suites were added for compatibility with some older Android devices that at the time did not yet support the proper `ChaCha20-Poly1305` standard versions. This was in 2016, and in the meantime the standard `ChaCha20-Poly1305` cipher suites have gained much wider adoption, to the point were traffic using the old suites has dropped significantly. Due to the current low usage and the non-standard nature of these cipher suites, we are now deprecating their support on the Cloudflare network.\n\nThis should not affect customer zones in any way, as clients that might currently use these cipher suites will be able to fallback to different ones. In addition, unlike the standard variants, these legacy cipher suites are not exposed directly through our API (e.g. through the TLS cipher suites preferences endpoint), and their deprecation will not affect customer configurations in any way.\n\nAs of July 1st, 2023, the ChaCha20-Poly1305 ciphers have been deprecated and are deemed End of Life by Cloudflare. If you have clients that currently rely on these ciphers, it is strongly recommended to upgrade them to newer, more secure ciphers. Be aware that these deprecated ciphers will be completely removed in the first quarter of 2024, and requests using them will start to fail. Take proactive measures to ensure a smooth transition and maintain the security of your systems.\n\n## 2023-07-01\n\n**Transfer-Encoding and Content-Length headers**\n\nDeprecation date: July 1, 2023\n\nPreviously, RFC 2616 allowed the use of `Transfer-Encoding` and `Content-Length` HTTP headers in the same request. RFC 7230 supersedes RFC 2616 and prohibits the use of `Transfer-Encoding` and `Content-Length` headers in the same request because they can cause HTTP request smuggling vulnerabilities.\n\nStarting on July 1st, 2023, Cloudflare will decline requests with both `Transfer-Encoding` and `Content-Length` HTTP headers.\n\n## 2023-06-06\n\n**Account Billing Profile, User Billing Profile, and User Billing History**\n\nDeprecation date: June 6, 2023\n\nThere is no API replacement for these endpoints. As an alternative, please log in to your Cloudflare account to view your:\n\n* [Invoices & Billing Email](https://dash.cloudflare.com/?to=/:account/billing)\n* [Billing subscriptions](https://dash.cloudflare.com/?to=/:account/billing/subscriptions)\n* [Billing profile payment info](https://dash.cloudflare.com/?to=/:account/billing/payment-info)\n\nDeprecated API:\n\n* `GET accounts/{account_identifier}/billing/profile`\n* `GET user/billing/profile`\n* `GET user/billing/history`\n\n## 2023-04-03\n\n**Load Balancing - notification\\_email**\n\nDeprecation date: April 3, 2023\n\nThis field is deprecated and has been moved to [Cloudflare centralized notification service](https://developers.cloudflare.com/notifications/).\n\n`notification_email` is the email address to send health status notifications to. This can be an individual mailbox or a mailing list. Multiple emails can be supplied as a comma delimited list.\n\n## 2023-03-19\n\n**Access Bookmark applications**\n\nDeprecation date: March 19, 2023\n\nThis endpoint is deprecated in favor of using a specialized Access Application App Type API.\n\nDeprecated API:\n\n* `GET accounts/:identifier/access/bookmarks`\n* `GET accounts/:identifier/access/bookmarks/:uuid`\n* `POST accounts/:identifier/access/bookmarks/:uuid`\n* `PUT accounts/:identifier/access/bookmarks/:uuid`\n* `DELETE accounts/:identifier/access/bookmarks/:uuid`\n\nReplacement: Access applications app type API\n\n## 2022-10-11\n\n**Page Shield**\n\nDeprecation date: October 11, 2022\n\nReplace `script_monitor` in Page Shield API routes with `page_shield`.\n\n## 2022-07-01\n\n**Cloudflare Images - Create authenticated direct upload URL v1**\n\nDeprecation date: July 1, 2022\n\nThis endpoint is deprecated in favor of using v2, which allows you to control metadata, define an access policy, and get the image ID.\n\nDeprecated API: `POST accounts/:account_identifier/images/v1/direct_upload`\n\nReplacement: `POST accounts/:account_identifier/images/v2/direct_upload`\n\n## 2021-03-01\n\n**Zone Analytics API**\n\nDeprecation date: March 1, 2021\n\nThis API is deprecated in favor of the [GraphQL Analytics API](https://developers.cloudflare.com/analytics/graphql-api/), which provides equivalent data and more features, including the ability to select only the metrics that you need. For more information, refer to the [Zone analytics to GraphQL analytics migration guide](https://developers.cloudflare.com/analytics/graphql-api/migration-guides/zone-analytics/).\n\nDeprecated API:\n\n* `GET zones/:zone_identifier/analytics/dashboard`\n* `GET zones/:zone_identifier/analytics/colos`\n\nReplacement: GraphQL Analytics API\n\n## 2020-04-02\n\n**Organizations**\n\nDeprecation date: April 2, 2020\n\nThis endpoint and its related APIs are deprecated in favor of the `/accounts` equivalent API, which has a broader range of features and is backwards compatible with the `/organizations` API.\n\nDeprecated API:\n\n* `GET organizations/:identifier`\n* `PATCH organizations/:identifier`\n* `GET organizations/:organization_identifier/invites`\n* `POST organizations/:organization_identifier/invites`\n* `GET organizations/:organization_identifier/invites/:identifier`\n* `PATCH organizations/:organization_identifier/invites/:identifier`\n* `DELETE organizations/:organization_identifier/invites/:identifier`\n* `GET organizations/:organization_identifier/members`\n* `GET organizations/:organization_identifier/members/:identifier`\n* `PATCH organizations/:organization_identifier/members/:identifier`\n* `DELETE organizations/:organization_identifier/members/:identifier`\n* `GET organizations/:organization_identifier/roles`\n* `GET organizations/:organization_identifier/roles/:identifier`\n* `GET organizations/:organization_identifier/audit_logs`\n* `GET organizations/:organization_identifier/railguns`\n* `POST organizations/:organization_identifier/railguns`\n* `GET organizations/:organization_identifier/railguns/:identifier`\n* `PATCH organizations/:organization_identifier/railguns/:identifier`\n* `DELETE organizations/:organization_identifier/railguns/:identifier`\n* `GET organizations/:organization_identifier/railguns/:identifier/zones`\n\nReplacement: Accounts API\n\n## Related resources\n\n* [Available RSS feeds](https://developers.cloudflare.com/fundamentals/new-features/available-rss-feeds/) (for the [Cloudflare changelog](https://developers.cloudflare.com/changelog/))\n* [Subscribe to Cloudflare Status](https://developers.cloudflare.com/support/cloudflare-status/)\n* [Planned maintenance windows](https://developers.cloudflare.com/support/disruptive-maintenance/)\n\n</page>\n\n<page>\n---\ntitle: GraphQL API  Cloudflare Fundamentals docs\nlastUpdated: 2025-05-05T16:36:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/graphql-api/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/graphql-api/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Rate limits  Cloudflare Fundamentals docs\ndescription: \"Some specific API calls have their own limits and are documented\n  separately, such as the following:\"\nlastUpdated: 2025-09-18T17:43:35.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/limits/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/limits/index.md\n---\n\n## API token limits\n\n| Type | Limit |\n| - | - |\n| Client API per user/account token | 1200/5 minutes |\n| Client API per IP | 200/second |\n| GraphQL | Varies by query cost. Max 320/5 min |\n| User API token quota | 50 |\n| Account API token quota | 500 |\n\nNote\n\nThe global rate limit for the Cloudflare API is 1,200 requests per five minute period per user, and applies cumulatively regardless of whether the request is made via the dashboard, API key, or API token.\n\nIf you exceed this limit, all API calls for the next five minutes will be blocked, receiving a `HTTP 429 - Too Many Requests` response.\n\nSome specific API calls have their own limits and are documented separately, such as the following:\n\n* [Cache Purge APIs](https://developers.cloudflare.com/cache/how-to/purge-cache/#availability-and-limits)\n* [GraphQL APIs](https://developers.cloudflare.com/analytics/graphql-api/limits/)\n* [Rulesets APIs](https://developers.cloudflare.com/ruleset-engine/rulesets-api/#limits)\n* [Lists API](https://developers.cloudflare.com/waf/tools/lists/lists-api/#rate-limiting-for-lists-api-requests)\n* [Gateway Lists API](https://developers.cloudflare.com/cloudflare-one/reusable-components/lists/#api-rate-limit)\n\nEnterprise customers can also [contact Cloudflare Support](https://developers.cloudflare.com/support/contacting-cloudflare-support/) to raise the Client API per user, GraphQL, or API token limits to a higher value.\n\n## Rate limiting headers\n\nThe following headers are returned when calling REST APIs:\n\n* `Ratelimit`: List of service limit items, composed of the limit name, the remaining quota (`r`) and the time next window resets (`t`). For example: `\"default\";r=50;t=30`\n* `Ratelimit-Policy`: List of quota policy items, composed of the policy name, the total quota (`q`) and the time window the quota applies to (`w`). For example: `\"burst\";q=100;w=60`\n* `retry-after`: The number of seconds, rounded up, until more capacity is available. Note, this header is only returned when the request has exceeded the rate limit.\n\nCloudflare's SDKs will also automatically work with the headers and back off in response to rate limits.\n\n</page>\n\n<page>\n---\ntitle: API token permissions  Cloudflare Fundamentals docs\ndescription: \"Permissions are segmented into three categories based on resource:\"\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/permissions/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/permissions/index.md\n---\n\nPermissions are segmented into three categories based on resource:\n\n* Zone permissions\n* Account permissions\n* User permissions\n\nEach category contains permission groups related to those resources. DNS permissions belong to the Zone category, while Billing permissions belong to the Account category. Below is a list of the available token permissions.\n\nTo obtain an updated list of token permissions, including the permission ID and the scope of each permission, use the [List permission groups](https://developers.cloudflare.com/api/resources/user/subresources/tokens/subresources/permission_groups/methods/list/) endpoint.\n\n## User permissions\n\nThe applicable scope of user permissions is `com.cloudflare.api.user`.\n\n* Dashboard\n\n  | Name | Description |\n  | - | - |\n  | API Tokens Read | Grants read access to user's [API tokens](https://developers.cloudflare.com/fundamentals/api/reference/permissions/). |\n  | API Tokens Edit | Grants write access to user's [API tokens](https://developers.cloudflare.com/fundamentals/api/reference/permissions/). |\n  | Memberships Read | Grants read access to a user's [account memberships](https://developers.cloudflare.com/fundamentals/manage-members/manage/). |\n  | Memberships Edit | Grants write access to a user's [account memberships](https://developers.cloudflare.com/fundamentals/manage-members/manage/). |\n  | User Details Read | Grants read access to user details. |\n  | User Details Edit | Grants write access to user details. |\n\n* API\n\n  | Name | Description |\n  | - | - |\n  | API Tokens Read | Grants read access to user's [API tokens](https://developers.cloudflare.com/fundamentals/api/reference/permissions/). |\n  | API Tokens Write | Grants write access to user's [API tokens](https://developers.cloudflare.com/fundamentals/api/reference/permissions/). |\n  | Memberships Read | Grants read access to a user's [account memberships](https://developers.cloudflare.com/fundamentals/manage-members/manage/). |\n  | Memberships Write | Grants write access to a user's [account memberships](https://developers.cloudflare.com/fundamentals/manage-members/manage/). |\n  | User Details Read | Grants read access to user details. |\n  | User Details Write | Grants write access to user details. |\n\n## Account permissions\n\nThe applicable scope of account permissions is `com.cloudflare.api.account`.\n\n* Dashboard\n\n  | Name | Description |\n  | - | - |\n  | Access: Apps and Policies Read | Grants read access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) applications and policies |\n  | Access: Apps and Policies Revoke | Grants ability to revoke [Cloudflare Access application tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/session-management/) |\n  | Access: Apps and Policies Edit | Grants write access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) applications and policies |\n  | Access: Audit Logs Read | Grants read access to [Cloudflare Access audit logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/audit-logs/). |\n  | Access: Custom Pages Read | Grants read access to [Cloudflare Access custom block pages](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/). |\n  | Access: Custom Pages Edit | Grants write access to [Cloudflare Access custom block pages](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/). |\n  | Access: Device Posture Read | Grants read access to [Cloudflare Access device posture](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/). |\n  | Access: Device Posture Edit | Grants write access to [Cloudflare Access device posture](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/). |\n  | Access: Mutual TLS Certificates Read | Grants read access to [Cloudflare Access mTLS certificates](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/). |\n  | Access: Mutual TLS Certificates Edit | Grants write access to [Cloudflare Access mTLS certificates](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/). |\n  | Access: Organizations, Identity Providers, and Groups Read | Grants read access to [Cloudflare Access account resources](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/). |\n  | Access: Organizations, Identity Providers, and Groups Revoke | Grants ability to revoke user sessions to [Cloudflare Access account resources](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/). |\n  | Access: Organizations, Identity Providers, and Groups Edit | Grants write access to [Cloudflare Access account resources](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/). |\n  | Access: Service Tokens Read | Grants read access to [Cloudflare Access service tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/). |\n  | Access: Service Tokens Edit | Grants write access to [Cloudflare Access service tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/). |\n  | Access: SSH Auditing Read | Grants read access to [Cloudflare Access SSH CAs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/). |\n  | Access: SSH Auditing Edit | Grants write access to [Cloudflare Access SSH CAs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/). |\n  | Account Analytics Read | Grants read access to [account analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/account-analytics/). |\n  | Account Custom Pages Read | Grants read access to account-level [Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Account Custom Pages Edit | Grants write access to account-level [Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Account Filter Lists Read | Grants read access to Account Filter Lists. |\n  | Account Filter Lists Edit | Grants write access to Account Filter Lists. |\n  | Account Firewall Access Rules Read | Grants read access to account firewall access rules. |\n  | Account Firewall Access Rules Edit | Grants write access to account firewall access rules. |\n  | Account Rulesets Read | Grants read access to [Account Rulesets](https://developers.cloudflare.com/ruleset-engine/about/rulesets/). |\n  | Account Rulesets Edit | Grants write access to [Account Rulesets](https://developers.cloudflare.com/ruleset-engine/about/rulesets/). |\n  | Account Security Center Insights | Grants read access to [Security Center Insights](https://developers.cloudflare.com/security-center/security-insights/). |\n  | Account Security Center Insights Edit | Grants write access to [Security Center Insights](https://developers.cloudflare.com/security-center/security-insights/). |\n  | Account Settings Read | Grants read access to [Account resources, account membership, and account level features](https://developers.cloudflare.com/fundamentals/account/). |\n  | Account Settings Edit | Grants write access to [Account resources, account membership, and account level features](https://developers.cloudflare.com/fundamentals/account/). |\n  | Account: SSL and Certificates Read | Grants read access to [SSL and Certificates](https://developers.cloudflare.com/ssl/). |\n  | Account: SSL and Certificates Edit | Grants write access to [SSL and Certificates](https://developers.cloudflare.com/ssl/). |\n  | Account WAF Read | Grants read access to [Account WAF](https://developers.cloudflare.com/waf/). |\n  | Account WAF Edit | Grants write access to [Account WAF](https://developers.cloudflare.com/waf/). |\n  | Address Maps Edit | Grants write access to [Address Maps](https://developers.cloudflare.com/byoip/address-maps/) |\n  | Address Maps Read | Grants read access to [Address Maps](https://developers.cloudflare.com/byoip/address-maps/) |\n  | Allow Request Tracer Read | Grants read access to Request Tracer. |\n  | API Gateway Read | Grants read access to [API Gateway (including API Shield)](https://developers.cloudflare.com/api-shield/) for all domains in an account. |\n  | API Gateway Edit | Grants write access to [API Gateway (including API Shield)](https://developers.cloudflare.com/api-shield/) for all domains in an account. |\n  | Billing Read | Grants read access to [billing profile, subscriptions, and access to fetch invoices](https://developers.cloudflare.com/billing/) and entitlements. |\n  | Billing Edit | Grants write access to [billing profile, subscriptions, and access to fetch invoices and entitlements](https://developers.cloudflare.com/billing/). |\n  | Bulk URL Redirects Read | Grants read access to [Bulk Redirects](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/). |\n  | Bulk URL Redirects Edit | Grants write access to [Bulk Redirects](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/). |\n  | China Network Steering Read | Grants read access to [China Network Steering](https://developers.cloudflare.com/china-network/). |\n  | China Network Steering Edit | Grants write access to [China Network Steering](https://developers.cloudflare.com/china-network/). |\n  | Cloudchamber Read | Grants read access to Cloudchamber deployments. |\n  | Cloudchamber Edit | Grants write access to Cloudchamber deployments. |\n  | Cloudflare Realtime Read | Grants read access to Cloudflare Realtime. |\n  | Cloudflare Realtime Edit | Grants write access to Cloudflare Realtime. |\n  | Cloudflare CASB Read | Grants read access to [Cloud Access Security Broker](https://developers.cloudflare.com/cloudflare-one/cloud-and-saas-findings/). |\n  | Cloudflare CASB Edit | Grants write access to [Cloud Access Security Broker](https://developers.cloudflare.com/cloudflare-one/cloud-and-saas-findings/). |\n  | Cloudflare DEX Read | Grants read access to [Digital Experience Monitoring](https://developers.cloudflare.com/cloudflare-one/insights/dex/). |\n  | Cloudflare DEX Edit | Grants write access to [Digital Experience Monitoring](https://developers.cloudflare.com/cloudflare-one/insights/dex/). |\n  | Cloudflare Images Read | Grants read access to [Cloudflare Images](https://developers.cloudflare.com/images/). |\n  | Cloudflare Images Edit | Grants write access to [Cloudflare Images](https://developers.cloudflare.com/images/). |\n  | Cloudflare One Connector: cloudflared Read | Grants read access to [`cloudflared` connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) |\n  | Cloudflare One Connector: cloudflared Edit | Grants write access to [`cloudflared` connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) |\n  | Cloudflare One Connector: WARP Read | Grants read access to [WARP Connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) |\n  | Cloudflare One Connector: WARP Edit | Grants write access to [WARP Connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) |\n  | Cloudflare One Connectors Read | Grants read access to Cloudflare One connectors |\n  | Cloudflare One Connectors Edit | Grants write access to Cloudflare One connectors |\n  | Cloudflare One Networks Read | Grants read access to Cloudflare One routes and virtual networks |\n  | Cloudflare One Networks Edit | Grants write access to Cloudflare One routes and virtual networks |\n  | Cloudflare Pages Read | Grants access to view [Cloudflare Pages](https://developers.cloudflare.com/pages/) projects. |\n  | Cloudflare Pages Edit | Grants access to create, edit and delete [Cloudflare Pages](https://developers.cloudflare.com/pages/) projects. |\n  | Cloudflare Tunnel Read | Grants access to view [Cloudflare Tunnels](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/). |\n  | Cloudflare Tunnel Edit | Grants access to create and delete [Cloudflare Tunnels](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/). |\n  | Cloudforce One Read | Grants read access to Cloudforce One. |\n  | Cloudforce One Edit | Grants write access to Cloudforce One. |\n  | Email Security Read | Grants read access to [Cloud Email Security](https://developers.cloudflare.com/email-security/). |\n  | Email Security Edit | Grants write access to [Email Security](https://developers.cloudflare.com/email-security/). |\n  | Constellation Read | Grants read access to [Constellation](https://developers.cloudflare.com/constellation/). |\n  | Constellation Edit | Grants write access to [Constellation](https://developers.cloudflare.com/constellation/). |\n  | Containers Read | Grants read access to [Containers](https://developers.cloudflare.com/containers/). |\n  | Containers Edit | Grants write access to [Containers](https://developers.cloudflare.com/containers/). |\n  | D1 Read | Grants read access to [D1](https://developers.cloudflare.com/d1/). |\n  | D1 Edit | Grants write access to [D1](https://developers.cloudflare.com/d1/). |\n  | DDoS Botnet Feed Read | Grants read access to Botnet Feed reports. |\n  | DDoS Botnet Feed Edit | Grants write access to Botnet Feed configuration. |\n  | DDoS Protection Read | Grants read access to [DDoS protection](https://developers.cloudflare.com/ddos-protection/). |\n  | DDoS Protection Edit | Grants write access to [DDoS protection](https://developers.cloudflare.com/ddos-protection/). |\n  | DNS Firewall Read | Grants read access to [DNS Firewall](https://developers.cloudflare.com/dns/dns-firewall/). |\n  | DNS Firewall Edit | Grants write access to [DNS Firewall](https://developers.cloudflare.com/dns/dns-firewall/). |\n  | Email Routing Addresses Read | Grants read access to [Email Routing Addresses](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Email Routing Addresses Edit | Grants write access to [Email Routing Addresses](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Hyperdrive Read | Grants read access to [Hyperdrive](https://developers.cloudflare.com/hyperdrive/). |\n  | Hyperdrive Edit | Grants write access to [Hyperdrive](https://developers.cloudflare.com/hyperdrive/). |\n  | Intel Read | Grants read access to [Intel](https://developers.cloudflare.com/security-center/intel-apis/). |\n  | Intel Edit | Grants write access to [Intel](https://developers.cloudflare.com/security-center/intel-apis/). |\n  | Integration Edit | Grants write access to integrations. |\n  | IOT Read | Grants read access to [IOT](https://blog.cloudflare.com/rethinking-internet-of-things-security/). |\n  | IOT Edit | Grants write access to [IOT](https://blog.cloudflare.com/rethinking-internet-of-things-security/). |\n  | IP Prefixes: Read | Grants access to read IP prefix settings. |\n  | IP Prefixes: Edit | Grants access to read/write IP prefix settings. |\n  | IP Prefixes: BGP On Demand Read | Grants access to read IP prefix BGP configuration. |\n  | IP Prefixes: BGP On Demand Edit | Grants access to read and change IP prefix BGP configuration. |\n  | L3/4 DDoS Managed Ruleset Read | Grants read access to [L3/4 DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/). |\n  | L3/4 DDoS Managed Ruleset Edit | Grants write access to [L3/4 DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/). |\n  | Load Balancing: Monitors and Pools Read | Grants read access to account level [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Load Balancing: Monitors and Pools Edit | Grants write access to account level [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Logs Read | Grants read access to logs using [Logpull or Instant Logs](https://developers.cloudflare.com/logs/). |\n  | Logs Edit | Grants read and write access to [Logpull, Logpush, and Instant Logs](https://developers.cloudflare.com/logs/). |\n  | Magic Firewall Read | Grants read access to [Magic Firewall](https://developers.cloudflare.com/magic-firewall/). |\n  | Magic Firewall Edit | Grants write access to [Magic Firewall](https://developers.cloudflare.com/magic-firewall/). |\n  | Magic Firewall Packet Captures Read | Grants read access to [Packet Captures](https://developers.cloudflare.com/magic-firewall/packet-captures/collect-pcaps/). |\n  | Magic Firewall Packet Captures Edit | Grants write access to [Packet Captures](https://developers.cloudflare.com/magic-firewall/packet-captures/collect-pcaps/). |\n  | Magic Network Monitoring Read | Grants read access to [Magic Network Monitoring](https://developers.cloudflare.com/magic-network-monitoring/). |\n  | Magic Network Monitoring Edit | Grants write access to [Magic Network Monitoring](https://developers.cloudflare.com/magic-network-monitoring/). |\n  | Magic Transit Read | Grants read access to manage a user's [Magic Transit prefixes](https://developers.cloudflare.com/magic-transit/how-to/advertise-prefixes/). |\n  | Magic Transit Edit | Grants write access to manage a user's [Magic Transit prefixes](https://developers.cloudflare.com/magic-transit/how-to/advertise-prefixes/). |\n  | Notifications Read | Grants read access to [Notifications](https://developers.cloudflare.com/notifications/). |\n  | Notifications Edit | Grants write access to [Notifications](https://developers.cloudflare.com/notifications/). |\n  | Page Shield Read | Grants read access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Page Shield Edit | Grants write access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Workers Pipelines Read | Grants read access to Cloudflare Pipelines. |\n  | Workers Pipelines Edit | Grants write access to Cloudflare Pipelines. |\n  | Queues Read | Grants read access to [Queues](https://developers.cloudflare.com/queues/). |\n  | Queues Edit | Grants write access to [Queues](https://developers.cloudflare.com/queues/). |\n  | Rule Policies Read | Grants read access to Rule Policies. |\n  | Rule Policies Edit | Grants write access to Rule Policies. |\n  | Stream Read | Grants read access to [Cloudflare Stream](https://developers.cloudflare.com/stream/). |\n  | Stream Edit | Grants write access to [Cloudflare Stream](https://developers.cloudflare.com/stream/). |\n  | Transform Rules Read | Grants read access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Transform Rules Edit | Grants write access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Turnstile Read | Grants read access to [Turnstile](https://developers.cloudflare.com/turnstile/). |\n  | Turnstile Edit | Grants write access to [Turnstile](https://developers.cloudflare.com/turnstile/). |\n  | URL Scanner Read | Grants read access to [URL Scanner](https://developers.cloudflare.com/radar/investigate/url-scanner/). |\n  | URL Scanner Edit | Grants write access to [URL Scanner](https://developers.cloudflare.com/radar/investigate/url-scanner/). |\n  | Vectorize Read | Grants read access to [Vectorize](https://developers.cloudflare.com/vectorize/). |\n  | Vectorize Edit | Grants write access to [Vectorize](https://developers.cloudflare.com/vectorize/). |\n  | Workers AI Read | Grants read access to [Workers AI](https://developers.cloudflare.com/workers-ai/). |\n  | Workers AI Edit | Grants write access to [Workers AI](https://developers.cloudflare.com/workers-ai/). |\n  | Workers CI Read | Grants read access to [Workers CI](https://developers.cloudflare.com/workers/). |\n  | Workers CI Edit | Grants write access to [Workers CI](https://developers.cloudflare.com/workers). |\n  | Workers KV Storage Read | Grants read access to [Cloudflare Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Workers KV Storage Edit | Grants write access to [Cloudflare Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Workers R2 Storage Read | Grants read access to [Cloudflare R2 Storage](https://developers.cloudflare.com/r2/). |\n  | Workers R2 Storage Edit | Grants write access to [Cloudflare R2 Storage](https://developers.cloudflare.com/r2/). |\n  | Workers Scripts Read | Grants read access to [Cloudflare Workers scripts](https://developers.cloudflare.com/workers/). |\n  | Workers Scripts Edit | Grants write access to [Cloudflare Workers scripts](https://developers.cloudflare.com/workers/). |\n  | Workers Tail Read | Grants [`wrangler tail`](https://developers.cloudflare.com/workers/wrangler/commands/#tail) read permissions. |\n  | Zero Trust Read | Grants read access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) resources. |\n  | Zero Trust Report | Grants reporting access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/). |\n  | Zero Trust Edit | Grants write access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) resources. |\n  | Zero Trust: PII Read | Grants read access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) PII. |\n  | Zero Trust: Seats Edit | Grants write access to the number of [Zero Trust seats](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/seat-management/) your organization can use (and be billed for). |\n\n* API\n\n  | Name | Description |\n  | - | - |\n  | Access: Apps and Policies Read | Grants read access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) applications and policies |\n  | Access: Apps and Policies Revoke | Grants ability to revoke [Cloudflare Access application tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/session-management/) |\n  | Access: Apps and Policies Write | Grants write access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) applications and policies |\n  | Access: Audit Logs Read | Grants read access to [Cloudflare Access audit logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/audit-logs/). |\n  | Access: Custom Pages Read | Grants read access to [Cloudflare Access custom block pages](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/). |\n  | Access: Custom Pages Write | Grants write access to [Cloudflare Access custom block pages](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/). |\n  | Access: Device Posture Read | Grants read access to [Cloudflare Access device posture](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/). |\n  | Access: Device Posture Write | Grants write access to [Cloudflare Access device posture](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/). |\n  | Access: Mutual TLS Certificates Read | Grants read access to [Cloudflare Access mTLS certificates](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/). |\n  | Access: Mutual TLS Certificates Write | Grants write access to [Cloudflare Access mTLS certificates](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/). |\n  | Access: Organizations, Identity Providers, and Groups Read | Grants read access to [Cloudflare Access account resources](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/). |\n  | Access: Organizations, Identity Providers, and Groups Revoke | Grants ability to revoke user sessions to [Cloudflare Access account resources](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/). |\n  | Access: Organizations, Identity Providers, and Groups Write | Grants write access to [Cloudflare Access account resources](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/). |\n  | Access: Service Tokens Read | Grants read access to [Cloudflare Access service tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/). |\n  | Access: Service Tokens Write | Grants write access to [Cloudflare Access service tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/). |\n  | Access: SSH Auditing Read | Grants read access to [Cloudflare Access SSH CAs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/). |\n  | Access: SSH Auditing Write | Grants write access to [Cloudflare Access SSH CAs](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/). |\n  | Account Analytics Read | Grants read access to [account analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/account-analytics/). |\n  | Account Custom Pages Read | Grants read access to account-level [Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Account Custom Pages Write | Grants write access to account-level [Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Account Rule Lists Read | Grants read access to Account Filter Lists. |\n  | Account Rule Lists Write | Grants write access to Account Filter Lists. |\n  | Account Firewall Access Rules Read | Grants read access to account firewall access rules. |\n  | Account Firewall Access Rules Write | Grants write access to account firewall access rules. |\n  | Account Rulesets Read | Grants read access to [Account Rulesets](https://developers.cloudflare.com/ruleset-engine/about/rulesets/). |\n  | Account Rulesets Write | Grants write access to [Account Rulesets](https://developers.cloudflare.com/ruleset-engine/about/rulesets/). |\n  | Account Security Center Insights | Grants read access to [Security Center Insights](https://developers.cloudflare.com/security-center/security-insights/). |\n  | Account Security Center Insights Write | Grants write access to [Security Center Insights](https://developers.cloudflare.com/security-center/security-insights/). |\n  | Account Settings Read | Grants read access to [Account resources, account membership, and account level features](https://developers.cloudflare.com/fundamentals/account/). |\n  | Account Settings Write | Grants write access to [Account resources, account membership, and account level features](https://developers.cloudflare.com/fundamentals/account/). |\n  | Account: SSL and Certificates Read | Grants read access to [SSL and Certificates](https://developers.cloudflare.com/ssl/). |\n  | Account: SSL and Certificates Write | Grants write access to [SSL and Certificates](https://developers.cloudflare.com/ssl/). |\n  | Account WAF Read | Grants read access to [Account WAF](https://developers.cloudflare.com/waf/). |\n  | Account WAF Write | Grants write access to [Account WAF](https://developers.cloudflare.com/waf/). |\n  | Address Maps Write | Grants write access to [Address Maps](https://developers.cloudflare.com/byoip/address-maps/) |\n  | Address Maps Read | Grants read access to [Address Maps](https://developers.cloudflare.com/byoip/address-maps/) |\n  | Allow Request Tracer Read | Grants read access to Request Tracer. |\n  | Account API Gateway Read | Grants read access to [API Gateway (including API Shield)](https://developers.cloudflare.com/api-shield/) for all domains in an account. |\n  | Account API Gateway Write | Grants write access to [API Gateway (including API Shield)](https://developers.cloudflare.com/api-shield/) for all domains in an account. |\n  | Billing Read | Grants read access to [billing profile, subscriptions, and access to fetch invoices](https://developers.cloudflare.com/billing/) and entitlements. |\n  | Billing Write | Grants write access to [billing profile, subscriptions, and access to fetch invoices and entitlements](https://developers.cloudflare.com/billing/). |\n  | Mass URL Redirects Read | Grants read access to [Bulk Redirects](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/). |\n  | Mass URL Redirects Write | Grants write access to [Bulk Redirects](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/). |\n  | China Network Steering Read | Grants read access to [China Network Steering](https://developers.cloudflare.com/china-network/). |\n  | China Network Steering Write | Grants write access to [China Network Steering](https://developers.cloudflare.com/china-network/). |\n  | Cloudchamber Read | Grants read access to Cloudchamber deployments. |\n  | Cloudchamber Write | Grants write access to Cloudchamber deployments. |\n  | Realtime Read | Grants read access to Cloudflare Realtime. |\n  | Realtime Write | Grants write access to Cloudflare Realtime. |\n  | Cloudflare CASB Read | Grants read access to [Cloud Access Security Broker](https://developers.cloudflare.com/cloudflare-one/cloud-and-saas-findings/). |\n  | Cloudflare CASB Write | Grants write access to [Cloud Access Security Broker](https://developers.cloudflare.com/cloudflare-one/cloud-and-saas-findings/). |\n  | Cloudflare DEX Read | Grants read access to [Digital Experience Monitoring](https://developers.cloudflare.com/cloudflare-one/insights/dex/). |\n  | Cloudflare DEX Write | Grants write access to [Digital Experience Monitoring](https://developers.cloudflare.com/cloudflare-one/insights/dex/). |\n  | Images Read | Grants read access to [Cloudflare Images](https://developers.cloudflare.com/images/). |\n  | Images Write | Grants write access to [Cloudflare Images](https://developers.cloudflare.com/images/). |\n  | Cloudflare One Connector: cloudflared Read | Grants read access to [`cloudflared` connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) |\n  | Cloudflare One Connector: cloudflared Write | Grants write access to [`cloudflared` connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) |\n  | Cloudflare One Connector: WARP Read | Grants read access to [WARP Connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) |\n  | Cloudflare One Connector: WARP Write | Grants write access to [WARP Connectors](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) |\n  | Cloudflare One Connectors Read | Grants read access to Cloudflare One connectors |\n  | Cloudflare One Connectors Write | Grants write access to Cloudflare One connectors |\n  | Cloudflare One Networks Read | Grants read access to Cloudflare One routes and virtual networks |\n  | Cloudflare One Networks Write | Grants write access to Cloudflare One routes and virtual networks |\n  | Pages Read | Grants access to view [Cloudflare Pages](https://developers.cloudflare.com/pages/) projects. |\n  | Pages Write | Grants access to create, edit and delete [Cloudflare Pages](https://developers.cloudflare.com/pages/) projects. |\n  | Cloudflare Tunnel Read | Grants access to view [Cloudflare Tunnels](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/). |\n  | Cloudflare Tunnel Write | Grants access to create and delete [Cloudflare Tunnels](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/). |\n  | Cloudforce One Read | Grants read access to Cloudforce One. |\n  | Cloudforce One Write | Grants write access to Cloudforce One. |\n  | Cloud Email Security: Read | Grants read access to [Cloud Email Security](https://developers.cloudflare.com/email-security/). |\n  | Cloud Email Security: Write | Grants write access to [Email Security](https://developers.cloudflare.com/email-security/). |\n  | Constellation Read | Grants read access to [Constellation](https://developers.cloudflare.com/constellation/). |\n  | Constellation Write | Grants write access to [Constellation](https://developers.cloudflare.com/constellation/). |\n  | Containers Read | Grants read access to [Containers](https://developers.cloudflare.com/containers/). |\n  | Containers Write | Grants write access to [Containers](https://developers.cloudflare.com/containers/). |\n  | D1 Read | Grants read access to [D1](https://developers.cloudflare.com/d1/). |\n  | D1 Write | Grants write access to [D1](https://developers.cloudflare.com/d1/). |\n  | DDoS Botnet Feed Read | Grants read access to Botnet Feed reports. |\n  | DDoS Botnet Feed Write | Grants write access to Botnet Feed configuration. |\n  | DDoS Protection Read | Grants read access to [DDoS protection](https://developers.cloudflare.com/ddos-protection/). |\n  | DDoS Protection Write | Grants write access to [DDoS protection](https://developers.cloudflare.com/ddos-protection/). |\n  | DNS Firewall Read | Grants read access to [DNS Firewall](https://developers.cloudflare.com/dns/dns-firewall/). |\n  | DNS Firewall Write | Grants write access to [DNS Firewall](https://developers.cloudflare.com/dns/dns-firewall/). |\n  | Email Routing Addresses Read | Grants read access to [Email Routing Addresses](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Email Routing Addresses Write | Grants write access to [Email Routing Addresses](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Hyperdrive Read | Grants read access to [Hyperdrive](https://developers.cloudflare.com/hyperdrive/). |\n  | Hyperdrive Write | Grants write access to [Hyperdrive](https://developers.cloudflare.com/hyperdrive/). |\n  | Intel Read | Grants read access to [Intel](https://developers.cloudflare.com/security-center/intel-apis/). |\n  | Intel Write | Grants write access to [Intel](https://developers.cloudflare.com/security-center/intel-apis/). |\n  | Integration Write | Grants write access to integrations. |\n  | IOT Read | Grants read access to [IOT](https://blog.cloudflare.com/rethinking-internet-of-things-security/). |\n  | IOT Write | Grants write access to [IOT](https://blog.cloudflare.com/rethinking-internet-of-things-security/). |\n  | IP Prefixes: Read | Grants access to read IP prefix settings. |\n  | IP Prefixes: Write | Grants access to read/write IP prefix settings. |\n  | IP Prefixes: BGP On Demand Read | Grants access to read IP prefix BGP configuration. |\n  | IP Prefixes: BGP On Demand Write | Grants access to read and change IP prefix BGP configuration. |\n  | L4 DDoS Managed Ruleset Read | Grants read access to [L3/4 DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/). |\n  | L4 DDoS Managed Ruleset Write | Grants write access to [L3/4 DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/). |\n  | Load Balancing: Monitors and Pools Read | Grants read access to account level [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Load Balancing: Monitors and Pools Write | Grants write access to account level [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Logs Read | Grants read access to logs using [Logpull or Instant Logs](https://developers.cloudflare.com/logs/). |\n  | Logs Write | Grants read and write access to [Logpull, Logpush, and Instant Logs](https://developers.cloudflare.com/logs/). |\n  | Magic Firewall Read | Grants read access to [Magic Firewall](https://developers.cloudflare.com/magic-firewall/). |\n  | Magic Firewall Write | Grants write access to [Magic Firewall](https://developers.cloudflare.com/magic-firewall/). |\n  | Magic Firewall Packet Captures - Read PCAPs API | Grants read access to [Packet Captures](https://developers.cloudflare.com/magic-firewall/packet-captures/collect-pcaps/). |\n  | Magic Firewall Packet Captures - Write PCAPs API | Grants write access to [Packet Captures](https://developers.cloudflare.com/magic-firewall/packet-captures/collect-pcaps/). |\n  | Magic Network Monitoring Read | Grants read access to [Magic Network Monitoring](https://developers.cloudflare.com/magic-network-monitoring/). |\n  | Magic Network Monitoring Write | Grants write access to [Magic Network Monitoring](https://developers.cloudflare.com/magic-network-monitoring/). |\n  | Magic Transit Read | Grants read access to manage a user's [Magic Transit prefixes](https://developers.cloudflare.com/magic-transit/how-to/advertise-prefixes/). |\n  | Magic Transit Write | Grants write access to manage a user's [Magic Transit prefixes](https://developers.cloudflare.com/magic-transit/how-to/advertise-prefixes/). |\n  | Notifications Read | Grants read access to [Notifications](https://developers.cloudflare.com/notifications/). |\n  | Notifications Write | Grants write access to [Notifications](https://developers.cloudflare.com/notifications/). |\n  | Page Shield Read | Grants read access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Page Shield Write | Grants write access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Pipelines Read | Grants read access to Cloudflare Pipelines. |\n  | Pipelines Write | Grants write access to Cloudflare Pipelines. |\n  | Queues Read | Grants read access to [Queues](https://developers.cloudflare.com/queues/). |\n  | Queues Write | Grants write access to [Queues](https://developers.cloudflare.com/queues/). |\n  | Rule Policies Read | Grants read access to Rule Policies. |\n  | Rule Policies Write | Grants write access to Rule Policies. |\n  | Stream Read | Grants read access to [Cloudflare Stream](https://developers.cloudflare.com/stream/). |\n  | Stream Write | Grants write access to [Cloudflare Stream](https://developers.cloudflare.com/stream/). |\n  | Transform Rules Read | Grants read access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Transform Rules Write | Grants write access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Turnstile Sites Read | Grants read access to [Turnstile](https://developers.cloudflare.com/turnstile/). |\n  | Turnstile Sites Write | Grants write access to [Turnstile](https://developers.cloudflare.com/turnstile/). |\n  | URL Scanner Read | Grants read access to [URL Scanner](https://developers.cloudflare.com/radar/investigate/url-scanner/). |\n  | URL Scanner Write | Grants write access to [URL Scanner](https://developers.cloudflare.com/radar/investigate/url-scanner/). |\n  | Vectorize Read | Grants read access to [Vectorize](https://developers.cloudflare.com/vectorize/). |\n  | Vectorize Write | Grants write access to [Vectorize](https://developers.cloudflare.com/vectorize/). |\n  | Workers AI Read | Grants read access to [Workers AI](https://developers.cloudflare.com/workers-ai/). |\n  | Workers AI Write | Grants write access to [Workers AI](https://developers.cloudflare.com/workers-ai/). |\n  | Workers CI Read | Grants read access to [Workers CI](https://developers.cloudflare.com/workers/). |\n  | Workers CI Write | Grants write access to [Workers CI](https://developers.cloudflare.com/workers). |\n  | Workers KV Storage Read | Grants read access to [Cloudflare Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Workers KV Storage Write | Grants write access to [Cloudflare Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Workers R2 Storage Read | Grants read access to [Cloudflare R2 Storage](https://developers.cloudflare.com/r2/). |\n  | Workers R2 Storage Write | Grants write access to [Cloudflare R2 Storage](https://developers.cloudflare.com/r2/). |\n  | Workers Scripts Read | Grants read access to [Cloudflare Workers scripts](https://developers.cloudflare.com/workers/). |\n  | Workers Scripts Write | Grants write access to [Cloudflare Workers scripts](https://developers.cloudflare.com/workers/). |\n  | Workers Tail Read | Grants [`wrangler tail`](https://developers.cloudflare.com/workers/wrangler/commands/#tail) read permissions. |\n  | Zero Trust Read | Grants read access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) resources. |\n  | Zero Trust Report | Grants reporting access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/). |\n  | Zero Trust Write | Grants write access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) resources. |\n  | Zero Trust: PII Read | Grants read access to [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) PII. |\n  | Zero Trust: Seats Write | Grants write access to the number of [Zero Trust seats](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/seat-management/) your organization can use (and be billed for). |\n\n## Zone permissions\n\nThe applicable scope of zone permissions is `com.cloudflare.api.account.zone`.\n\n* Dashboard\n\n  | Name | Description |\n  | - | - |\n  | Access: Apps and Policies Read | Grants read access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) zone resources. |\n  | Access: Apps and Policies Revoke | Grants ability to revoke all tokens to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) zone resources. |\n  | Access: Apps and Policies Edit | Grants write access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) zone resources. |\n  | Analytics Read | Grants read access to [analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/zone-analytics/). |\n  | API Gateway Read | Grants read access to [API Gateway](https://developers.cloudflare.com/api-shield/) zone resources. |\n  | API Gateway Edit | Grants write access to [API Gateway](https://developers.cloudflare.com/api-shield/) zone resources. |\n  | Apps Edit | Grants full access to Cloudflare Apps (deprecated, refer to [Workers](https://developers.cloudflare.com/workers/) instead). |\n  | Bot Management Read | Grants read access to [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/). |\n  | Bot Management Edit | Grants write access to [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/). |\n  | Bot Management Feedback Read | Grants read access to [Bot Management feedback](https://developers.cloudflare.com/bots/concepts/feedback-loop/). |\n  | Bot Management Feedback Edit | Grants write access to [Bot Management feedback](https://developers.cloudflare.com/bots/concepts/feedback-loop/). |\n  | Cache Purge | Grants access to [purge cache](https://developers.cloudflare.com/cache/how-to/purge-cache/). |\n  | Cache Rules Read | Grants read access to [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/). |\n  | Cache Rules Edit | Grants write access to [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/). |\n  | Cloud Connector Read | Grants read access to [Cloud Connector rules](https://developers.cloudflare.com/rules/cloud-connector/). |\n  | Cloud Connector Edit | Grants write access to [Cloud Connector rules](https://developers.cloudflare.com/rules/cloud-connector/). |\n  | Config Rules Read | Grants read access to [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/). |\n  | Config Rules Edit | Grants write access to [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/). |\n  | Custom Error Rules Read | Grants read access to [Custom Error Rules](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Custom Error Rules Edit | Grants write access to [Custom Error Rules](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Custom Pages Read | Grants read access to [Custom Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Custom Pages Edit | Grants write access to [Custom Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Dmarc Management Read | Grants read access to [DMARC Management](https://developers.cloudflare.com/dmarc-management/). |\n  | Dmarc Management Edit | Grants write access to [DMARC Management](https://developers.cloudflare.com/dmarc-management/). |\n  | DNS Read | Grants read access to [DNS](https://developers.cloudflare.com/dns/). |\n  | DNS Write | Grants write access to [DNS](https://developers.cloudflare.com/dns/). |\n  | Email Routing Rules Read | Grants read access to [Email Routing Rules](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Email Routing Rules Edit | Grants write access to [Email Routing Rules](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Firewall Services Read | Grants read access to Firewall resources. |\n  | Firewall Services Edit | Grants write access to Firewall resources. |\n  | Health Checks Read | Grants read access to [Health Checks](https://developers.cloudflare.com/health-checks/). |\n  | Health Checks Edit | Grants write access to [Health Checks](https://developers.cloudflare.com/health-checks/). |\n  | HTTP DDoS Managed Ruleset Read | Grants read access to [HTTP DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/http/). |\n  | HTTP DDoS Managed Ruleset Edit | Grants write access to [HTTP DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/http/). |\n  | Load Balancers Read | Grants read access to [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Load Balancers Edit | Grants write access to [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Logs Read | Grants read access to logs using [Logpull](https://developers.cloudflare.com/logs/). |\n  | Logs Edit | Grants write access to [Logpull and Logpush](https://developers.cloudflare.com/logs/). |\n  | Managed Headers Read | Grants read access to [Managed Headers](https://developers.cloudflare.com/rules/transform/managed-transforms/). |\n  | Managed Headers Edit | Grants write access to [Managed Headers](https://developers.cloudflare.com/rules/transform/managed-transforms/). |\n  | Origin Rules Read | Grants read access to [Origin Rules](https://developers.cloudflare.com/rules/origin-rules/). |\n  | Origin Rules Edit | Grants write access to [Origin Rules](https://developers.cloudflare.com/rules/origin-rules/). |\n  | Page Rules Read | Grants read access to [Page Rules](https://developers.cloudflare.com/rules/page-rules/). |\n  | Page Rules Edit | Grants write access to [Page Rules](https://developers.cloudflare.com/rules/page-rules/). |\n  | Page Shield Read | Grants read access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Page Shield Edit | Grants write access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Response Compression Read | Grants read access to [Response Compression](https://developers.cloudflare.com/rules/compression-rules/). |\n  | Response Compression Edit | Grants write access to [Response Compression](https://developers.cloudflare.com/rules/compression-rules/). |\n  | Sanitize Read | Grants read access to sanitization. |\n  | Sanitize Edit | Grants write access to sanitization. |\n  | Single Redirect Read | Grants read access to zone-level [Single Redirects](https://developers.cloudflare.com/rules/url-forwarding/single-redirects/). |\n  | Single Redirect Edit | Grants write access to zone-level [Single Redirects](https://developers.cloudflare.com/rules/url-forwarding/single-redirects/). |\n  | SSL and Certificates Read | Grants read access to [SSL configuration and certificate management](https://developers.cloudflare.com/ssl/). |\n  | SSL and Certificates Edit | Grants write access to [SSL configuration and certificate management](https://developers.cloudflare.com/ssl/). |\n  | Transform Rules Read | Grants read access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Transform Rules Edit | Grants write access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Waiting Room Read | Grants read access to [Waiting Room](https://developers.cloudflare.com/waiting-room/). |\n  | Waiting Room Edit | Grants write access to [Waiting Room](https://developers.cloudflare.com/waiting-room/). |\n  | Web3 Hostnames Read | Grants read access to [Web3 Hostnames](https://developers.cloudflare.com/web3/). |\n  | Web3 Hostnames Edit | Grants write access to [Web3 Hostnames](https://developers.cloudflare.com/web3/). |\n  | Workers Routes Read | Grants read access to [Cloudflare Workers](https://developers.cloudflare.com/workers/) and [Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Workers Routes Edit | Grants write access to [Cloudflare Workers](https://developers.cloudflare.com/workers/) and [Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Zaraz Read | Grants read access to [Zaraz](https://developers.cloudflare.com/zaraz/) zone level settings. |\n  | Zaraz Edit | Grants write access to [Zaraz](https://developers.cloudflare.com/zaraz/) zone level settings. |\n  | Zone Read | Grants read access to zone management. |\n  | Zone Edit | Grants write access to zone management. |\n  | Zone Settings Read | Grants read access to zone settings. |\n  | Zone Settings Edit | Grants write access to zone settings. |\n  | Zone Versioning Read | Grants read access to [Zone Versioning](https://developers.cloudflare.com/version-management/) at zone level. |\n  | Zone Versioning Edit | Grants write access to [Zone Versioning](https://developers.cloudflare.com/version-management/) at zone level. |\n  | Zone WAF Read | Grants read access to [Zone WAF](https://developers.cloudflare.com/waf/). |\n  | Zone WAF Edit | Grants write access to [Zone WAF](https://developers.cloudflare.com/waf/). |\n\n* API\n\n  | Name | Description |\n  | - | - |\n  | Access: Apps and Policies Read | Grants read access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) zone resources. |\n  | Access: Apps and Policies Revoke | Grants ability to revoke all tokens to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) zone resources. |\n  | Access: Apps and Policies Write | Grants write access to [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) zone resources. |\n  | Analytics Read | Grants read access to [analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/zone-analytics/). |\n  | Domain API Gateway Read | Grants read access to [API Gateway](https://developers.cloudflare.com/api-shield/) zone resources. |\n  | Domain API Gateway Write | Grants write access to [API Gateway](https://developers.cloudflare.com/api-shield/) zone resources. |\n  | Apps Write | Grants full access to Cloudflare Apps (deprecated, refer to [Workers](https://developers.cloudflare.com/workers/) instead). |\n  | Bot Management Read | Grants read access to [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/). |\n  | Bot Management Write | Grants write access to [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/). |\n  | Bot Management Feedback Read | Grants read access to [Bot Management feedback](https://developers.cloudflare.com/bots/concepts/feedback-loop/). |\n  | Bot Management Feedback Write | Grants write access to [Bot Management feedback](https://developers.cloudflare.com/bots/concepts/feedback-loop/). |\n  | Cache Purge | Grants access to [purge cache](https://developers.cloudflare.com/cache/how-to/purge-cache/). |\n  | Cache Settings Read | Grants read access to [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/). |\n  | Cache Settings Write | Grants write access to [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/). |\n  | Cloud Connector Read | Grants read access to [Cloud Connector rules](https://developers.cloudflare.com/rules/cloud-connector/). |\n  | Cloud Connector Write | Grants write access to [Cloud Connector rules](https://developers.cloudflare.com/rules/cloud-connector/). |\n  | Config Settings Read | Grants read access to [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/). |\n  | Config Settings Write | Grants write access to [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/). |\n  | Custom Errors Read | Grants read access to [Custom Error Rules](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Custom Errors Write | Grants write access to [Custom Error Rules](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Custom Pages Read | Grants read access to [Custom Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Custom Pages Write | Grants write access to [Custom Error Pages](https://developers.cloudflare.com/rules/custom-errors/). |\n  | Email Security DMARC Reports Read | Grants read access to [DMARC Management](https://developers.cloudflare.com/dmarc-management/). |\n  | Email Security DMARC Reports Write | Grants write access to [DMARC Management](https://developers.cloudflare.com/dmarc-management/). |\n  | DNS Read | Grants read access to [DNS](https://developers.cloudflare.com/dns/). |\n  | DNS Write | Grants write access to [DNS](https://developers.cloudflare.com/dns/). |\n  | Email Routing Rules Read | Grants read access to [Email Routing Rules](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Email Routing Rules Write | Grants write access to [Email Routing Rules](https://developers.cloudflare.com/email-routing/setup/email-routing-addresses/). |\n  | Firewall Services Read | Grants read access to Firewall resources. |\n  | Firewall Services Write | Grants write access to Firewall resources. |\n  | Health Checks Read | Grants read access to [Health Checks](https://developers.cloudflare.com/health-checks/). |\n  | Health Checks Write | Grants write access to [Health Checks](https://developers.cloudflare.com/health-checks/). |\n  | HTTP DDoS Managed Ruleset Read | Grants read access to [HTTP DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/http/). |\n  | HTTP DDoS Managed Ruleset Write | Grants write access to [HTTP DDoS managed ruleset](https://developers.cloudflare.com/ddos-protection/managed-rulesets/http/). |\n  | Load Balancers Read | Grants read access to [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Load Balancers Write | Grants write access to [load balancer resources](https://developers.cloudflare.com/load-balancing/). |\n  | Logs Read | Grants read access to logs using [Logpull](https://developers.cloudflare.com/logs/). |\n  | Logs Write | Grants write access to [Logpull and Logpush](https://developers.cloudflare.com/logs/). |\n  | Managed headers Read | Grants read access to [Managed Headers](https://developers.cloudflare.com/rules/transform/managed-transforms/). |\n  | Managed headers Write | Grants write access to [Managed Headers](https://developers.cloudflare.com/rules/transform/managed-transforms/). |\n  | Origin Read | Grants read access to [Origin Rules](https://developers.cloudflare.com/rules/origin-rules/). |\n  | Origin Write | Grants write access to [Origin Rules](https://developers.cloudflare.com/rules/origin-rules/). |\n  | Page Rules Read | Grants read access to [Page Rules](https://developers.cloudflare.com/rules/page-rules/). |\n  | Page Rules Write | Grants write access to [Page Rules](https://developers.cloudflare.com/rules/page-rules/). |\n  | Domain Page Shield Read | Grants read access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Domain Page Shield Write | Grants write access to [Page Shield](https://developers.cloudflare.com/page-shield/). |\n  | Response Compression Read | Grants read access to [Response Compression](https://developers.cloudflare.com/rules/compression-rules/). |\n  | Response Compression Write | Grants write access to [Response Compression](https://developers.cloudflare.com/rules/compression-rules/). |\n  | Sanitize Read | Grants read access to sanitization. |\n  | Sanitize Write | Grants write access to sanitization. |\n  | Dynamic URL Redirects Read | Grants read access to zone-level [Single Redirects](https://developers.cloudflare.com/rules/url-forwarding/single-redirects/). |\n  | Dynamic URL Redirects Write | Grants write access to zone-level [Single Redirects](https://developers.cloudflare.com/rules/url-forwarding/single-redirects/). |\n  | SSL and Certificates Read | Grants read access to [SSL configuration and certificate management](https://developers.cloudflare.com/ssl/). |\n  | SSL and Certificates Write | Grants write access to [SSL configuration and certificate management](https://developers.cloudflare.com/ssl/). |\n  | Zone Transform Rules Read | Grants read access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Zone Transform Rules Write | Grants write access to [Transform Rules](https://developers.cloudflare.com/rules/transform/). |\n  | Waiting Rooms Read | Grants read access to [Waiting Room](https://developers.cloudflare.com/waiting-room/). |\n  | Waiting Rooms Write | Grants write access to [Waiting Room](https://developers.cloudflare.com/waiting-room/). |\n  | Web3 Hostnames Read | Grants read access to [Web3 Hostnames](https://developers.cloudflare.com/web3/). |\n  | Web3 Hostnames Write | Grants write access to [Web3 Hostnames](https://developers.cloudflare.com/web3/). |\n  | Workers Routes Read | Grants read access to [Cloudflare Workers](https://developers.cloudflare.com/workers/) and [Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Workers Routes Write | Grants write access to [Cloudflare Workers](https://developers.cloudflare.com/workers/) and [Workers KV Storage](https://developers.cloudflare.com/kv/api/). |\n  | Zaraz Read | Grants read access to [Zaraz](https://developers.cloudflare.com/zaraz/) zone level settings. |\n  | Zaraz Write | Grants write access to [Zaraz](https://developers.cloudflare.com/zaraz/) zone level settings. |\n  | Zone Read | Grants read access to zone management. |\n  | Zone Write | Grants write access to zone management. |\n  | Zone Settings Read | Grants read access to zone settings. |\n  | Zone Settings Write | Grants write access to zone settings. |\n  | Zone Versioning Read | Grants read access to [Zone Versioning](https://developers.cloudflare.com/version-management/) at zone level. |\n  | Zone Versioning Write | Grants write access to [Zone Versioning](https://developers.cloudflare.com/version-management/) at zone level. |\n  | Zone WAF Read | Grants read access to [Zone WAF](https://developers.cloudflare.com/waf/). |\n  | Zone WAF Write | Grants write access to [Zone WAF](https://developers.cloudflare.com/waf/). |\n\n</page>\n\n<page>\n---\ntitle: REST API  Cloudflare Fundamentals docs\nlastUpdated: 2025-05-05T16:36:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/rest-api/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/rest-api/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: SDKs  Cloudflare Fundamentals docs\ndescription: Cloudflare offers language software development kits (SDKs) as well\n  as curl examples to demonstrate how to use the Cloudflare API. The SDK\n  libraries allow you to interact with the Cloudflare API in language-specific\n  syntax and more easily integrate with your existing applications.\nlastUpdated: 2025-05-05T16:36:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/sdks/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/sdks/index.md\n---\n\nCloudflare offers language software development kits (SDKs) as well as `curl` examples to demonstrate how to use the Cloudflare API. The SDK libraries allow you to interact with the Cloudflare API in language-specific syntax and more easily integrate with your existing applications.\n\nCloudflare currently offers the following SDKs:\n\n* [Go](https://github.com/cloudflare/cloudflare-go)\n* [TypeScript](https://github.com/cloudflare/cloudflare-typescript)\n* [Python](https://github.com/cloudflare/cloudflare-python)\n\n## When to use cURL vs SDK\n\nThere is no definite answer on which you should use. Instead, consider your use case and determine whether cURL or an SDK is the best fit.\n\n| Use case | cURL | SDK |\n| - | - | - |\n| Quick testing within the CLI |  |  |\n| Use within bash scripts or CI |  | \\* |\n| Usage from within an existing application or framework |  |  |\n| More complex usage where you need to chain together outputs |  |  |\n\n\\* It is possible, although not straight forward, to use the SDKs within bash scripts or CI environments with additional runtime dependencies and setup.\n\n## Example\n\nThe following are examples of how you would query all of the Cloudflare zones you have access to.\n\n### With cURL:",
      "language": "unknown"
    },
    {
      "code": "### With the TypeScript SDK:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: API token templates  Cloudflare Fundamentals docs\ndescription: Explore Cloudflare's API token templates to efficiently manage\n  permissions. Start with a template and customize token permissions and\n  resources as needed.\nlastUpdated: 2025-05-05T16:36:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/template/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/template/index.md\n---\n\nBelow is a table of the currently available API token templates and the default [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) they grant. You can start creating a token with one of these templates and modify the permissions and resources from there.\n\n| Template Name | Permission | Resource |\n| - | - | - |\n| Edit Zone DNS | DNS Write | Zone |\n| Read billing info | Billing Read | Account |\n| Account resources: Include all accounts | | |\n| Read analytics and logs | Analytics Read | Zone |\n| Logs Read | Zone | |\n| Edit Cloudflare Workers | Workers Routes Write | Zone |\n| Workers Scripts Write | Account | |\n| Workers KV Storage Write | Account | |\n| Workers Tail Read | Account | |\n| Workers R2 Storage Write | Account | |\n| Account Settings Read | Account | |\n| User Details Read | User | |\n| User Memberships Read | User | |\n| Edit load balancing configuration | Load Balancing: Monitors and Pools Write | Account |\n| Load Balancers Write | Zone | |\n| WordPress | Analytics Read | Zone |\n| Zone Read | Zone | |\n| Zone Settings Write | Zone | |\n| Account Settings Read | Account | |\n| DNS Read | Zone | |\n| Cache Purge | Zone | |\n| Account resources: Include all accounts | | |\n| Zone resources: Include all zones | | |\n| Create Additional Tokens | API Tokens Write | User |\n| Read All Resources | *(All read permissions)* | Account, Zone, User |\n| Account resources: Include all accounts | | |\n| Zone resources: Include all zones | | |\n\n</page>\n\n<page>\n---\ntitle: Wrangler API  Cloudflare Fundamentals docs\nlastUpdated: 2025-05-05T16:36:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/api/reference/wrangler-api/\n  md: https://developers.cloudflare.com/fundamentals/api/reference/wrangler-api/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: SCIM v1 to v2 Migration  Cloudflare Fundamentals docs\ndescription: Migrate from SCIM v1 Virtual Groups to Cloudflares GA SCIM User Groups\nlastUpdated: 2025-10-09T13:58:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/migration-guides/scim-virtual-groups-migration/\n  md: https://developers.cloudflare.com/fundamentals/reference/migration-guides/scim-virtual-groups-migration/index.md\n---\n\nCloudflare's first iteration of SCIM integration introduced a concept called *Virtual Groups*, typically identified by the pattern `CF-<accountID>-<Role Name>` in your IdP. Virtual Groups were an early implementation of group-based access control: they acted as placeholders created automatically by SCIM to map IdP groups to account memberships.\n\nWhile customers could add or remove members from these groups within their IdP, Virtual Groups had important limitations:\n\n* They could not be renamed or deleted in the IdP.\n* They could not be managed within Cloudflare.\n* Functionally, managing a Virtual Group was equivalent to syncing users and editing each members policies individually.\n\nWith the GA of [User Groups](https://developers.cloudflare.com/changelog/2025-06-23-user-groups-ga/), Virtual Groups are now deprecated. Customers should migrate to [User Groups](https://developers.cloudflare.com/fundamentals/manage-members/user-groups/), which provide a more flexible and scalable way to assign and manage policies. To maintain SCIM synchronization with the Cloudflare Dashboard, we strongly recommend migrating to **SCIM User Groups**.\n\nIf you have never synced a group linked to a `CF-<accountID>-<Role Name>` Virtual Group from your IdP to Cloudflare, no action is needed.\n\n## Migration steps\n\n1. **Create a new SCIM integration** in your IdP using an [Account Owned Token](https://developers.cloudflare.com/fundamentals/account/account-security/scim-setup/) provisioned in Cloudflare.\n2. **Assign users & groups to your new Application** in your IdP, following a naming convention that aligns with your internal processes.\n3. **Sync groups to Cloudflare** and verify they appear in the **User Groups** pane of the Cloudflare Dashboard.\n4. **Attach permission policies** to the new User Groups so members inherit the correct access upon assignment to the group.\n5. **Migrate users** into the new groups incrementally, testing synchronization of users & groups into the Cloudflare Dashboard.\n6. **Clean up legacy resources** by removing SCIM v1 Virtual Groups and IdP mappings that follow the `CF-<accountID>-<Role Name>` pattern.\n\n## More resources\n\n* [User Groups changelog](https://developers.cloudflare.com/changelog/2025-06-02-user-groups-beta/)\n* [User Groups documentation](https://developers.cloudflare.com/fundamentals/manage-members/user-groups/)\n* [Create an Account Owned Token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/#create-an-account-owned-token)\n* [SCIM provisioning setup guide](https://developers.cloudflare.com/fundamentals/account/account-security/scim-setup/)\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Cookies  Cloudflare Fundamentals docs\ndescription: Cloudflare uses various cookies to maximize network resources,\n  manage traffic, and protect our customers sites from malicious traffic.\nlastUpdated: 2025-10-24T20:47:24.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/cloudflare-cookies/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/cloudflare-cookies/index.md\n---\n\nCloudflare uses various cookies to maximize network resources, manage traffic, and protect our customers sites from malicious traffic.\n\n## Understanding the Cloudflare Cookies\n\nAs defined in our [Privacy Policy](https://www.cloudflare.com/privacypolicy/), all the cookies listed below are strictly necessary to provide the services requested by our customers, unless otherwise stated.\n\nAs mentioned in our Privacy Policy, Cloudflare encourages our customers to disclose the use of these cookies to their end users. In some jurisdictions, customers may be required by law to disclose these cookies to their end users.\n\nBy default, cookie data may be processed in Cloudflare's data center in the United States and is subject to the cross-border data transfer section 7 of the Cloudflare [Privacy Policy](https://www.cloudflare.com/privacypolicy/). Customers who use the [Data Localization Suite](https://developers.cloudflare.com/data-localization/) can control where cookie data is processed (with [Regional Services](https://developers.cloudflare.com/data-localization/regional-services/)) and logged (using the [Customer Metadata Boundary](https://developers.cloudflare.com/data-localization/metadata-boundary/)).\n\n### \\_\\_cflb cookie for Cloudflare Load Balancer session affinity\n\nWhen enabling session affinity with [Cloudflare Load Balancer](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/), Cloudflare sets a `__cflb` cookie with a unique value on the first response to the requesting client. Cloudflare routes future requests to the same origin, optimizing network resource usage. In the event of a failover, Cloudflare sets a new `__cflb` cookie to direct future requests to the failover pool.\n\nThe `__cflb` cookie allows Cloudflare to return an end user to the same customer origin for a specific period of time configured by the customer. This allows the end user to have a seamless experience (for example, this cookie is used for keeping an end users items in a shopping cart while they continue to navigate around the website). This cookie is a session cookie that lasts from several seconds up to 24 hours.\n\nNote\n\nCurrently Cloudflare only supports Session Affinity in \"orange-cloud\" (proxied) mode.\n\n### \\_\\_cf\\_bm cookie for Cloudflare bot products\n\nCloudflare's [bot products](https://developers.cloudflare.com/bots/) identify and mitigate automated traffic to protect your site from bad bots. Cloudflare places the `__cf_bm` cookie on end-user devices that access customer sites protected by Bot Management or Bot Fight Mode. The `__cf_bm` cookie is necessary for these bot solutions to function properly.\n\nThis cookie expires after 30 minutes of continuous inactivity by the end user. The cookie contains information related to the calculation of Cloudflare's proprietary bot score and, when Anomaly Detection is enabled on Bot Management, a session identifier. The information in the cookie (other than time-related information) is encrypted and can only be decrypted by Cloudflare.\n\nA separate `__cf_bm` cookie is generated for each site that an end user visits, as Cloudflare does not track users from site to site or from session to session. The `__cf_bm` cookie is generated independently by Cloudflare, and does not correspond to any user ID or other identifiers in a customer's web application.\n\nNote\n\nBot Management is available to Enterprise customers as an add-on service. Contact your Cloudflare account team to enable Bot Management for your site. Non-Enterprise customers can enable [Bot Fight Mode or Super Bot Fight Mode](https://developers.cloudflare.com/bots/).\n\nYou can disable the `__cf_bm` cookie using the `bm_cookie_enabled` field [via the API](https://developers.cloudflare.com/api/resources/bot_management/methods/update/).\n\n### \\_\\_cfseq cookie for Cloudflare bot products\n\n[Sequence rules](https://developers.cloudflare.com/bots/additional-configurations/sequence-rules/) uses cookies to track the order of requests a user has made and the time between requests and makes them available via [Cloudflare Rules](https://developers.cloudflare.com/rules/). This allows you to write rules that match valid or invalid sequences. The specific cookies used to validate sequences are called sequence cookies.\n\n### cf\\_clearance cookie for Cloudflare bot products\n\nThe `cf_clearance` cookie is required for [JavaScript detections](https://developers.cloudflare.com/bots/additional-configurations/javascript-detections/). JavaScript detections are stored in the `cf_clearance` cookie.\n\n### cf\\_ob\\_info and cf\\_use\\_ob cookie for Cloudflare Always Online\n\nThe `cf_ob_info` cookie provides information on:\n\n* The HTTP Status Code returned by the origin web server\n* The Ray ID of the original failed request\n* The data center serving the traffic\n\nThe `cf_use_ob` cookie informs Cloudflare to fetch the requested resource from the Always Online cache on the designated port. Applicable values are: 0, 80, and 443. The `cf_ob_info` and `cf_use_ob` cookies are persistent cookies that expire after 30 seconds.\n\n### \\_\\_cfwaitingroom for Cloudflare Waiting Room\n\n[Cloudflare's Waiting Room](https://developers.cloudflare.com/waiting-room/) product enables a waiting room for a particular host and path combination within a zone. Visitors are put in the waiting room and provided an estimate of when they will be allowed to access the application, if not immediately available.\n\nThe `__cfwaitingroom` cookie is only used to track visitors that access a waiting room enabled host and path combination for a zone. Visitors using a browser that does not accept cookies cannot visit the host and path combination while the waiting room is active. For more details, refer to [Waiting Room cookies](https://developers.cloudflare.com/waiting-room/reference/waiting-room-cookie/).\n\n### \\_\\_cfruid to support Cloudflare Rate Limiting (previous version)\n\nThe `__cfruid` cookie is strictly necessary to support Cloudflare Rate Limiting products. As part of our Rate Limiting solution, this cookie is required to manage incoming traffic and to have better visibility on the origin of a particular request.\n\n### \\_cfuvid for Rate Limiting Rules\n\nThe Rate Limiting Rules product uses a number of techniques for applying rate limits to traffic where multiple unique visitors share the same IP address, such as traffic from behind a NAT. These techniques can be enabled by using the `cf.unique_visitor_id` field in the rate limiting configuration.\n\nThe `_cfuvid` cookie is only set when a site uses this option in a Rate Limiting Rule, and is only used to allow the Cloudflare WAF to distinguish individual users who share the same IP address. Visitors who do not provide the cookie are likely to be grouped together and may not be able to access the site if there are many other visitors from the same IP address.\n\n### Additional cookies used by the Challenge Platform\n\nThe table below shows additional cookies used by the Challenge Platform.\n\n| Cookie Name | Description |\n| - | - |\n| `cf_clearance` | Clearance Cookie stores the proof of challenge passed. It is used to no longer issue a challenge if present. It is required to reach an origin server. |\n| `cf_chl_rc_i`; `cf_chl_rc_ni`; `cf_chl_rc_m` | These cookies are for internal use which allows Cloudflare to identify production issues on clients. |\n\nWarning\n\nIf your website is not [using HTTPS](https://developers.cloudflare.com/ssl/edge-certificates/encrypt-visitor-traffic/), you may experience issues with the [`cf_clearance` cookie](https://developers.cloudflare.com/waf/troubleshooting/samesite-cookie-interaction/#known-issues-with-samesite-and-cf_clearance-cookies).\n\n### Cloudflare Access cookies\n\nTo review Cloudflare Access cookies and their behavior, refer to [Access cookies](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/#access-cookies).\n\n</page>\n\n<page>\n---\ntitle: Compliance documentation  Cloudflare Fundamentals docs\ndescription: Super Administrators can access common compliance documentation,\n  such as PCI, SOC 2, ISO, and more, through the Cloudflare dashboard.\nlastUpdated: 2025-08-22T16:55:55.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/compliance-docs/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/compliance-docs/index.md\n---\n\nSuper Administrators can access common compliance documentation, such as PCI, SOC 2, ISO, and more, through the Cloudflare dashboard.\n\nTo access compliance documentation:\n\n1. Visit [Compliance Documents](https://dash.cloudflare.com/?to=/:account/compliance-docs) and select your account where you are a **Super Administrator**.\n2. If you have not accessed this page before, read the confidentiality statement and select **I Agree**.\n3. Choose the document you need and select **Download**.\n\nNote\n\nFor confidentiality purposes, only **Super Administrators** for an account can access compliance documentation.\n\n## Public data protection and compliance documentation\n\nInformation and documents about Cloudflare's privacy & data protection are available on our public website at [cloudflare.com/trust-hub/](https://www.cloudflare.com/trust-hub/).\n\nOn the [Trust Hub](https://www.cloudflare.com/trust-hub/), you will find information & documents related to:\n\n* Privacy Policy\n* Data Processing Addendum (DPA)\n* Europe General Data Protection Regulation (GDPR)\n* Brazil General Data Protection Law (LGPD)\n* Japan Act on the Protection of Personal Information (APPI)\n* Singapore Personal Data Protection Act (PDPA)\n* South Korea Personal Information Protection Act (PIPA)\n* India Digital Personal Data Protection Bill (DPDP)\n* Australia Privacy Act\n* United States California Consumer Privacy Act (CCPA) & Consumer Privacy Rights Act (CPRA)\n* EU Digital Operational Resilience Act (DORA)\n* ISO 27001:2022\n* ISO 27701:2019\n* ISO 27018:2019\n* FedRAMP Moderate\n* SOC 2 Type II\n* PCI DSS 4.0\n* Global CBPR\n* Global PRP\n* EU Cloud Code of Conduct\n* Cyber Essentials\n* C5:2020\n* ENS\n* IRAP\n* BSI Qualification\n* WCAG 2.1 AA and Section 508\n\n## Tax documentation\n\nSuper Administrators, Billing Administrators, and Administrators can access tax documentation, such W-9 and Tax Certificates, through the Cloudflare dashboard.\n\nTo access tax documentation:\n\n1. Visit [Tax Documents](https://dash.cloudflare.com/?to=/:account/tax-docs) and select your account where you are a **Super Administrator**, **Billing Administrator** or **Administrator**.\n2. Choose the document you need and select **Download**.\n\n</page>\n\n<page>\n---\ntitle: Content Security Policies (CSPs) and Cloudflare  Cloudflare Fundamentals docs\ndescription: \"A Content Security Policy (CSP) is an added layer of security that\n  helps detect and mitigate certain types of attacks, including:\"\nlastUpdated: 2025-07-11T17:09:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/content-security-policies/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/content-security-policies/index.md\n---\n\nA **Content Security Policy (CSP)** is an added layer of security that helps detect and mitigate certain types of attacks, including:\n\n* Content/code injection\n* Cross-site scripting (XSS)\n* Embedding malicious resources\n* Malicious iframes (clickjacking)\n\nTo learn more about configuring a CSP in general, refer to the [Mozilla documentation](https://developer.mozilla.org/docs/web/http/csp).\n\n## Using a CSP with Cloudflare\n\nCloudflare's [CDN](https://developers.cloudflare.com/cache/) is compatible with CSP.\n\nCloudflare does not:\n\n* Modify CSP headers from the origin web server (except when using Zaraz, to ensure the [Zaraz script is always running](https://blog.cloudflare.com/cloudflare-zaraz-supports-csp/)).\n* Require changes to acceptable sources for first or third-party content.\n* Modify URLs (besides adding the [`/cdn-cgi/` endpoint](https://developers.cloudflare.com/fundamentals/reference/cdn-cgi-endpoint/) and [Cloudflare Fonts](https://developers.cloudflare.com/speed/optimization/content/fonts/) that rewrites Google Fonts urls).\n* Interfere with locations specified in your CSP.\n\nIf you require the CSP headers to be changed or added, you can change them using some Cloudflare products:\n\n* If your website is [proxied](https://developers.cloudflare.com/dns/proxy-status/) through Cloudflare, you can use a [response header transform rule](https://developers.cloudflare.com/rules/transform/response-header-modification/) to replace or add CSP headers.\n* If your website is hosted using [Cloudflare Pages](https://developers.cloudflare.com/pages/), you can set a [`_headers file`](https://developers.cloudflare.com/pages/configuration/headers/) to modify or add CSP headers.\n\n### Product requirements\n\nTo use certain Cloudflare features, however, you may need to update the headers in your CSP:\n\n| Feature(s) | Updated headers |\n| - | - |\n| [Rocket Loader](https://developers.cloudflare.com/speed/optimization/content/rocket-loader/), [Mirage](https://developers.cloudflare.com/speed/optimization/images/mirage/) | `script-src 'self' ajax.cloudflare.com;` |\n| [Scrape Shield](https://developers.cloudflare.com/waf/tools/scrape-shield/) | `script-src 'self' 'unsafe-inline'` |\n| [Web Analytics](https://developers.cloudflare.com/web-analytics/) | `script-src static.cloudflareinsights.com; connect-src cloudflareinsights.com` |\n| [Bot products](https://developers.cloudflare.com/bots/) | Refer to [JavaScript detections and CSPs](https://developers.cloudflare.com/cloudflare-challenges/challenge-types/javascript-detections/#if-you-have-a-content-security-policy-csp). |\n| [Page Shield](https://developers.cloudflare.com/page-shield/) | Refer to [Page Shield CSP Header format](https://developers.cloudflare.com/page-shield/reference/csp-header/). |\n| [Zaraz](https://developers.cloudflare.com/zaraz/) | No updates required ([details](https://blog.cloudflare.com/cloudflare-zaraz-supports-csp/)). |\n| [Turnstile](https://developers.cloudflare.com/turnstile/) | Refer to [Turnstile CSP](https://developers.cloudflare.com/turnstile/reference/content-security-policy/). |\n\n</page>\n\n<page>\n---\ntitle: Project Cybersafe Schools  Cloudflare Fundamentals docs\ndescription: Project Cybersafe Schools grants eligible schools with free access\n  to Cloudflare's Email security and Gateway products.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/cybersafe/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/cybersafe/index.md\n---\n\nProject Cybersafe Schools grants eligible schools with free access to Cloudflare's [Email security](https://developers.cloudflare.com/email-security/) and [Gateway](https://developers.cloudflare.com/cloudflare-one/traffic-policies/) products.\n\n## School Eligibility\n\nThis program is only available to eligible school districts. To be eligible, Project Cybersafe School participants must be:\n\n* K-12 public school districts located in the United States.\n* Up to 2,500 students in the district.\n\n## Childrens Internet Protection Act (CIPA)\n\nThe [Children's Internet Protection Act (CIPA)](https://www.fcc.gov/sites/default/files/childrens_internet_protection_act_cipa.pdf) is a federal law enacted by the United States Congress to address concerns about children's access to inappropriate or harmful content over the Internet. CIPA requires K-12 schools and libraries that receive certain federal funding to implement Internet safety measures to protect minors from harmful online content.\n\nThe law aims to prevent students from accessing explicit, obscene, or otherwise harmful material. It also emphasizes the use of technology protection measures, including DNS filtering, to safeguard against Internet threats such as ransomware, phishing sites, and other potentially harmful content.\n\n### CIPA Requirements\n\nCIPA mandates that K-12 schools and libraries adopt Internet safety policies that include measures to block or filter access to specific categories of content. These categories encompass a wide range of topics that could be harmful or inappropriate for minors. Compliance with these requirements helps ensure that students' online experiences are safer and more secure.\n\n### Configuration\n\nTo facilitate compliance with CIPA requirements, administrators can [enable a single filtering policy option](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/common-policies/#turn-on-cipa-filter). This includes applying the required filter categories to block access to unwanted or harmful online content.\n\nNote\n\nIt is important to note that while our recommended CIPA compliance rule covers the essential filter categories, CIPA is designed to be flexible, allowing administrators to adjust filtering policies based on local standards and requirements.\n\nAdministrators should carefully assess their specific location and userbase to determine if additional categories may need to be added or modified to ensure comprehensive protection.\n\nCloudflares recommended CIPA rule blocks the following content subcategories:\n\n* Adult Themes\n* Alcohol\n* Anonymizer\n* Brand Embedding\n* Child Abuse\n* Command and Control & Botnet\n* Cryptomining\n* DGA Domains\n* DNS Tunneling\n* Drugs\n* Gambling\n* Hacking\n* Malware\n* Militancy, Hate & Extremism\n* Nudity\n* P2P\n* Phishing\n* Pornography\n* Private IP Address\n* Profanity\n* Questionable Activities\n* School Cheating\n* Spam\n* Spyware\n* Tobacco\n* Violence\n* Weapons\n\nReview the [domain categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/) for more information.\n\n### Onboarding Guide\n\nFor a comprehensive guide, refer to the [Project Cybersafe Schools Learning Path](https://developers.cloudflare.com/learning-paths/cybersafe/concepts/), which takes you step by step through the technical concepts, creating an account, onboarding your traffic, and enabling the CIPA filters.\n\n</page>\n\n<page>\n---\ntitle: Delivering Videos with Cloudflare  Cloudflare Fundamentals docs\ndescription: Cloudflare launched in 2010 believing everyone deserves a secure,\n  fast, reliable web presence. We did not think you should have to pay more when\n  you came under cyber attack, so we offered free and fixed-rate pricing for\n  websites. That worked because most websites do not consume much bandwidth, and\n  so we could provide our services in an affordable way to everyone. From the\n  beginning, we prohibited streaming video content using our bandwidth. While\n  you could embed a video from another provider, we limited your ability to use\n  our services to deliver video bits from our network to your visitors. This\n  restriction exists because every second of a typical video requires as much\n  bandwidth as loading a full web page.\nlastUpdated: 2025-05-08T19:32:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/delivering-videos-with-cloudflare/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/delivering-videos-with-cloudflare/index.md\n---\n\n## Using Cloudflare's Services\n\nCloudflare launched in 2010 believing everyone deserves a secure, fast, reliable web presence. We did not think you should have to pay more when you came under cyber attack, so we offered free and fixed-rate pricing for websites. That worked because most websites do not consume much bandwidth, and so we could provide our services in an affordable way to everyone. From the beginning, we prohibited streaming video content using our bandwidth. While you could embed a video from another provider, we limited your ability to use our services to deliver video bits from our network to your visitors. This restriction exists because every second of a typical video requires as much bandwidth as loading a full web page.\n\nOver time we recognized that some of our customers wanted to stream video using our network. To accommodate them, we developed our [Stream](https://www.cloudflare.com/products/cloudflare-stream/) product. Stream delivers great performance at an affordable rate charged based on how much load you place on our network.\n\nUnfortunately, while most people respect these limitations and understand they exist to ensure high quality of service for all Cloudflare customers, some users attempt to misconfigure our service to stream video in violation of our [Terms of Service](https://www.cloudflare.com/en-gb/website-terms/). We want to make sure our service is great for everyone, including public service initiatives we run like [Project Galileo](https://www.cloudflare.com/galileo/), [The Athenian Project](https://www.cloudflare.com/athenian/), and [Project Fair Shot](https://www.cloudflare.com/fair-shot/). A handful of people misusing our service limits our ability to run these initiatives.\n\nThe following are some recommendations for using Cloudflare's services based on what may have brought you to this page.\n\n***\n\n## I'm a website operator and my content was redirected for Terms of Service violations\n\nIf you are on a Free, Pro, or Business Plan and your application appears to be serving videos or a disproportionate amount of large files without using the appropriate paid service as described below, Cloudflare may redirect your content or take other actions to protect quality of service. When this happens, you will receive an email notification regarding Cloudflare's actions and your options.\n\n## Options for web admins to remove redirects\n\n* **Serve redirected content from a grey-clouded sub-domain**\n\n* **Serve redirected content from a paid service as outlined below**\n\n## Delivering videos with Cloudflare using paid products\n\nCloudflare permits the delivery of video content with specific paid services. If you are interested in serving video content, there are two recommended options.\n\n### Option 1: Cloudflare Stream\n\n[Stream](https://www.cloudflare.com/products/cloudflare-stream/) is a video-on-demand platform for building video applications. Stream encodes, stores, and delivers optimized video formatted for different devices and network connections.\n\nTo get started with Stream, visit **Stream** from your Dashboard or [sign up](https://dash.cloudflare.com/sign-up/stream). Your Stream videos are not attached to a domain in your Cloudflare account, and you do not need a domain on Cloudflare to use Stream.\n\n### Option 2: Stream Delivery (Enterprise only)\n\n[Stream Delivery](https://www.cloudflare.com/products/stream-delivery/) offers caching and delivery of video content through Cloudflare data centers around the globe. This CDN feature is only available on the Cloudflare Enterprise Plan. Please [contact sales](https://www.cloudflare.com/products/stream-delivery/#) if you'd like to explore this option.\n\n***\n\n## Getting information on the content you are delivering\n\nIf you need more information about the content your zone is serving (for example, content type), you can use the following tools:\n\n* Cache Analytics users: Open the **Caching tab** on the Dashboard to filter by content type and identify the type of traffic you are transferring.\n* Users without Cache Analytics: Open the **Analytics tab** on the Dashboard and select the **Performance** section for information about the content you are serving.\n\n![Cache Analytics - Identify type of traffic being transferred](https://developers.cloudflare.com/_astro/traffic-types.DW2gSjnB_SUbPy.webp)\n\n## Still have questions? Contact support\n\nIf you have additional questions about redirection (e.g. if you believe your content was redirected in error and have supporting evidence), file a [support ticket](https://dash.cloudflare.com/redirect?account=support) and include the following information:\n\n* Name of your domain\n* Description of the problem\n* Description of the content you're serving through Cloudflare's network\n\n</page>\n\n<page>\n---\ntitle: Incident Management Policy  Cloudflare Fundamentals docs\nlastUpdated: 2025-05-02T15:25:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/incident-management-policy/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/incident-management-policy/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Licenses  Cloudflare Fundamentals docs\ndescription: \"All documentation in the Cloudflare Workers documentation website,\n  including reference documentation and tutorials, are licensed under the\n  CC-BY-SA 4.0 license. Any contributions to the GitHub repository for this\n  project will be licensed under CC-BY-SA 4.0: thanks for your contributions!\"\nlastUpdated: 2025-07-21T13:19:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/licenses/\n  md: https://developers.cloudflare.com/fundamentals/reference/policies-compliances/licenses/index.md\n---\n\nAll documentation in the Cloudflare Workers documentation website, including reference documentation and tutorials, are licensed under the [CC-BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/) license. Any contributions to the [GitHub repository](https://github.com/cloudflare/cloudflare-docs) for this project will be licensed under CC-BY-SA 4.0: thanks for your contributions!\n\nCode contributions, such as snippets in the [Template Gallery](https://developers.cloudflare.com/workers/examples/) and the code that serves this website via Cloudflare Workers, are licensed under the [Apache License, Version 2.0](https://www.apache.org/licenses/LICENSE-2.0) and [The MIT License](https://opensource.org/licenses/MIT).\n\n</page>\n\n<page>\n---\ntitle: Customer abuse report obligations  Cloudflare Fundamentals docs\ndescription: Cloudflare permits any interested party to submit abuse reports\n  directly to Cloudflare via abuse.cloudflare.com.\nlastUpdated: 2025-05-29T18:16:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/report-abuse/abuse-report-obligations/\n  md: https://developers.cloudflare.com/fundamentals/reference/report-abuse/abuse-report-obligations/index.md\n---\n\nCloudflare permits any interested party to submit abuse reports directly to Cloudflare via [abuse.cloudflare.com](https://abuse.cloudflare.com/).\n\nAbuse reports may be submitted for suspected copyright or trademark infringement, illegal, or harmful content (for example, child sex abuse materials), technical abuse (for example, phishing or malware), or other reasons.\n\nYou may receive an abuse report from our Trust & Safety team if an abuse report identifies a URL for a domain associated with your Cloudflare account. If you do not provide or monitor an abuse contact, Cloudflare will send abuse reports to your hosting provider.\n\nOur Trust & Safety team sends abuse reports to the domain owner or the abuse point of contact on your account.\n\nTo assist with timely resolution and avoid potential service interruptions:\n\n* Confirm that the [abuse contact email address](https://developers.cloudflare.com/fundamentals/account/account-security/abuse-contact/) associated with your account is actively managed and monitored for potential abuse report notifications.\n* Consider using a mailing list email address that goes to multiple people or teams within your organization instead of the email address for an individual person.\n* Respond to any abuse report notification within 24 hours. In your response, include any information that you believe will be relevant to Cloudflare in its assessment of the abuse report. Failure to respond in a timely manner or to address the concerns in the abuse report may result in the removal or blocking of reported content, websites, or apps and suspension or termination of Cloudflare services for the associated account.\n\n</page>\n\n<page>\n---\ntitle: Complaint types - Report abuse  Cloudflare Fundamentals docs\ndescription: Use Cloudflare's online abuse form to report different types of abuse.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/report-abuse/complaint-types/\n  md: https://developers.cloudflare.com/fundamentals/reference/report-abuse/complaint-types/index.md\n---\n\nUse Cloudflare's [online abuse form](https://abuse.cloudflare.com/) to report different types of abuse.\n\n***\n\n## DMCA complaints\n\nValid [Digital Millennium Copyright Act (DMCA)](https://www.copyright.gov/dmca/) complaints must provide all of the following details:\n\n* A physical or electronic signature (typing your full name is valid) of the copyright owner or a person authorized to act on their behalf.\n* Identification of the infringed copyright (for example, a link to your original work or clear description of the materials allegedly infringed upon).\n* Identification of the infringing material and information reasonably sufficient to allow Cloudflare to locate the material on the infringing website (for example, a [link to the site](https://developers.cloudflare.com/fundamentals/reference/report-abuse/provide-specific-urls/) where the infringed copyrighted material appears).\n* Your contact information, including your address, telephone number, and email address.\n* A statement that you believe, in good faith, that the use of the material in the manner asserted is not authorized by the copyright owner, its agent, or the law.\n* A statement that the information in the notification is accurate, and, under penalty of perjury, that you are authorized to act on behalf of the copyright owner.\n\n***\n\n## Phishing\n\nValid phishing reports must provide all of the following details:\n\n* The domain in question.\n* The specific link to the phishing page.\n\nAfter Cloudflare confirms existence of the phishing page, Cloudflare provides a warning page to visitors accessing the phishing link. Cloudflare also notifies the site owner to clean the malicious files from their origin web server.\n\n***\n\n## Trademark infringement\n\nCloudflare only acknowledges abuse reports from trademark holders or their legally authorized representatives.\n\nFor more details about what information is required, refer to [our abuse form](https://abuse.cloudflare.com/).\n\n***\n\n## Malware sites\n\nLegitimate reports of malware URLs are blocked from loading via Cloudflare.\n\nFor more details about what information is required, refer to [our abuse form](https://abuse.cloudflare.com/).\n\n***\n\n## Child exploitation material\n\nCloudflare promptly responds to all valid reports of child exploitation material. When Cloudflare is made aware of a website solely dedicated to the sharing or promotion of child exploitation material, the offending website is immediately removed from our network without notice.\n\nFor an expedited review, report child exploitation material via our [abuse form](https://abuse.cloudflare.com/).\n\nOur Trust & Safety team files a complaint with the [National Center for Missing and Exploited Children](http://www.missingkids.com/gethelpnow#onlinechildexploitation) but suggest that you also file a complaint.\n\n</page>\n\n<page>\n---\ntitle: Providing specific URLs - Report abuse  Cloudflare Fundamentals docs\ndescription: Learn how to provide specific asset URLs when submitting an abuse report.\nlastUpdated: 2025-05-05T19:30:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/report-abuse/provide-specific-urls/\n  md: https://developers.cloudflare.com/fundamentals/reference/report-abuse/provide-specific-urls/index.md\n---\n\nIf you are [submitting an abuse report](https://abuse.cloudflare.com) to Cloudflare because our IP address appears in the WHOIS and DNS records for a website, it is very likely that the website is one of millions of websites that use our pass-through security and content distribution network (CDN) services. Because assets on the same website may be hosted by different providers, it is important that you submit the URL for that specific asset to enable appropriate action. This guide will teach you how to identify URLs for specific video or images on a webpage.\n\n## Get the URL for specific content\n\nTo get the URL for a specific piece of content on a webpage:\n\n1. Open your web browser (Google Chrome, Safari, Firefox, Edge).\n\n2. Go to the web page you want to report.\n\n3. Right click on the content you wish to report (often a video or image).\n\n4. Select **Inspect Element**.\n\n5. In the **DevTools** panel, look for the **src** attribute in the selected the image, video, or iFrame. ![Look for the URL in the src attribute of the video or image](https://developers.cloudflare.com/_astro/identify-url.o_PP6jZ2_Z4OzAh.webp)\n\n6. Copy the URL.\n\nProviding the most specific and helpful URL enables Cloudflare to correctly identify any services it may be providing with respect to that content.\n\n## Submitting the abuse report\n\nOnce you have identified the URL for the specific asset, you can [submit an abuse report](https://abuse.cloudflare.com) through Cloudflare's online abuse reporting process.\n\nYou can learn more about the process, and what you can expect from Cloudflare in response to such abuse reports, from [our abuse policy](https://www.cloudflare.com/trust-hub/reporting-abuse/).\n\n</page>\n\n<page>\n---\ntitle: Review abuse policies  Cloudflare Fundamentals docs\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/report-abuse/review-policies/\n  md: https://developers.cloudflare.com/fundamentals/reference/report-abuse/review-policies/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: View and submit reports  Cloudflare Fundamentals docs\ndescription: Cloudflare helps you prevent online abuse and make your website\n  more secure. If abuse is identified on your website, Cloudflare gives you a\n  mechanism to present your grievances to the party best positioned to address\n  them.\nlastUpdated: 2025-11-28T14:53:13.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/fundamentals/reference/report-abuse/submit-report/\n  md: https://developers.cloudflare.com/fundamentals/reference/report-abuse/submit-report/index.md\n---\n\n## Submit reports\n\nCloudflare helps you prevent online abuse and make your website more secure. If abuse is identified on your website, Cloudflare gives you a mechanism to present your grievances to the party best positioned to address them.\n\nCloudflare offers three ways for you to submit an abuse report:\n\n* Public form: Refer to [Submit an Abuse Report](https://abuse.cloudflare.com/) to learn more.\n\n* The Cloudflare dashboard, on the **Abuse reports** page.\n\n  [Go to **Abuse reports**](https://dash.cloudflare.com/?to=/:account/abuse-reports)\n\n  Optionally, filter the reports based on date, report status, report type, and domain.\n\n* The Cloudflare API: Use the [Abuse Reports API](https://developers.cloudflare.com/api/resources/abuse_reports/) to submit an abuse report.\n\n## View submitted reports\n\nUsers with Admin, Super Admin, or Trust & Safety roles can view any abuse reports submitted and accepted against the content associated with their account.\n\n1. In the Cloudflare dashboard, go to the **Abuse reports** page.\n\n   [Go to **Abuse reports**](https://dash.cloudflare.com/?to=/:account/abuse-reports)\n\n2. Optionally, filter the reports based on date, report status, report type, and domain.\n\n## Receive notifications\n\nYou can enable abuse notifications for your account to configure email, webhook, or PagerDuty alerts about new abuse reports against your websites.\n\nFor help setting up alerts, refer to [Configure Cloudflare notifications](https://developers.cloudflare.com/notifications/get-started/).\n\n</page>\n\n<page>\n---\ntitle: Database Providers  Cloudflare Hyperdrive docs\nlastUpdated: 2025-08-18T14:27:42.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-database-providers/\n  md: https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-database-providers/index.md\n---\n\n* [PlanetScale](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-database-providers/planetscale/)\n* [Azure Database](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-database-providers/azure/)\n* [Google Cloud SQL](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-database-providers/google-cloud-sql/)\n* [AWS RDS and Aurora](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-database-providers/aws-rds-aurora/)\n\n</page>\n\n<page>\n---\ntitle: Libraries and Drivers  Cloudflare Hyperdrive docs\nlastUpdated: 2025-05-12T14:16:48.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-drivers-and-libraries/\n  md: https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-drivers-and-libraries/index.md\n---\n\n* [mysql2](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-drivers-and-libraries/mysql2/)\n* [mysql](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-drivers-and-libraries/mysql/)\n* [Drizzle ORM](https://developers.cloudflare.com/hyperdrive/examples/connect-to-mysql/mysql-drivers-and-libraries/drizzle-orm/)\n\n</page>\n\n<page>\n---\ntitle: Database Providers  Cloudflare Hyperdrive docs\nlastUpdated: 2025-08-18T14:27:42.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/\n  md: https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/index.md\n---\n\n* [Fly](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/fly/)\n* [Xata](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/xata/)\n* [Nile](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/nile/)\n* [Neon](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/neon/)\n* [Supabase](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/supabase/)\n* [Timescale](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/timescale/)\n* [Materialize](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/materialize/)\n* [PlanetScale](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/planetscale-postgres/)\n* [Digital Ocean](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/digital-ocean/)\n* [pgEdge Cloud](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/pgedge/)\n* [CockroachDB](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/cockroachdb/)\n* [Azure Database](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/azure/)\n* [Prisma Postgres](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/prisma-postgres/)\n* [Google Cloud SQL](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/google-cloud-sql/)\n* [AWS RDS and Aurora](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-database-providers/aws-rds-aurora/)\n\n</page>\n\n<page>\n---\ntitle: Libraries and Drivers  Cloudflare Hyperdrive docs\nlastUpdated: 2025-05-12T14:16:48.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/\n  md: https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/index.md\n---\n\n* [node-postgres (pg)](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/node-postgres/)\n* [Postgres.js](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/postgres-js/)\n* [Drizzle ORM](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/drizzle-orm/)\n* [Prisma ORM](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/prisma-orm/)\n\n</page>\n\n<page>\n---\ntitle: Serve images from custom domains  Cloudflare Images docs\ndescription: \"Image delivery is supported from all customer domains under the\n  same Cloudflare account. To serve images through custom domains, an image URL\n  should be adjusted to the following format:\"\nlastUpdated: 2025-09-11T13:39:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/images/manage-images/serve-images/serve-from-custom-domains/\n  md: https://developers.cloudflare.com/images/manage-images/serve-images/serve-from-custom-domains/index.md\n---\n\nImage delivery is supported from all customer domains under the same Cloudflare account. To serve images through custom domains, an image URL should be adjusted to the following format:",
      "language": "unknown"
    },
    {
      "code": "Example with a custom domain:",
      "language": "unknown"
    },
    {
      "code": "In this example, `<ACCOUNT_HASH>`, `<IMAGE_ID>` and `<VARIANT_NAME>` are the same, but the hostname and prefix path is different:\n\n* `example.com`: Cloudflare proxied domain under the same account as the Cloudflare Images.\n* `/cdn-cgi/imagedelivery`: Path to trigger `cdn-cgi` image proxy.\n* `ZWd9g1K7eljCn_KDTu_MWA`: The Images account hash. This can be found in the Cloudflare Images Dashboard.\n* `083eb7b2-5392-4565-b69e-aff66acddd00`: The image ID.\n* `public`: The variant name.\n\n## Custom paths\n\nBy default, Images are served from the `/cdn-cgi/imagedelivery/` path. You can use Transform Rules to rewrite URLs and serve images from custom paths.\n\n### Basic version\n\nFree and Pro plans support string matching rules (including wildcard operations) that do not require regular expressions.\n\nThis example lets you rewrite a request from `example.com/images` to `example.com/cdn-cgi/imagedelivery/<ACCOUNT_HASH>`.\n\nTo create a rule:\n\n1. In the Cloudflare dashboard, go to the **Rules Overview** page.\n\n   [Go to **Overview**](https://dash.cloudflare.com/?to=/:account/:zone/rules/overview)\n\n2. Next to **URL Rewrite Rules**, select **Create rule**.\n\n3. Under **If incoming requests match**, select **Wildcard pattern** and enter the following **Request URL** (update with your own domain):",
      "language": "unknown"
    },
    {
      "code": "4. Under **Then rewrite the path and/or query** > **Path**, enter the following values (using your account hash):\n\n   * **Target path**: \\[`/`] `images/*`\n   * **Rewrite to**: \\[`/`] `cdn-cgi/imagedelivery/<ACCOUNT_HASH>/${1}`\n\n5. Select **Deploy** when you are done.\n\n### Advanced version\n\nNote\n\nThis feature requires a Business or Enterprise plan to enable regular expressions in Transform Rules. Refer to Cloudflare [Transform Rules Availability](https://developers.cloudflare.com/rules/transform/#availability) for more information.\n\nThis example lets you rewrite a request from `example.com/images/some-image-id/w100,h300` to `example.com/cdn-cgi/imagedelivery/<ACCOUNT_HASH>/some-image-id/width=100,height=300` and assumes Flexible variants feature is turned on.\n\nTo create a rule:\n\n1. In the Cloudflare dashboard, go to the **Rules Overview** page.\n\n   [Go to **Overview**](https://dash.cloudflare.com/?to=/:account/:zone/rules/overview)\n\n2. Next to **URL Rewrite Rules**, select **Create rule**.\n\n3. Under **If incoming requests match**, select **Custom filter expression** and then select **Edit expression**.\n\n4. In the text field, enter `(http.request.uri.path matches \"^/images/.*$\")`.\n\n5. Under **Path**, select **Rewrite to**.\n\n6. Select *Dynamic* and enter the following in the text field.",
      "language": "unknown"
    },
    {
      "code": "## Limitations\n\nWhen using a custom domain, it is not possible to directly set up WAF rules that act on requests hitting the `/cdn-cgi/imagedelivery/` path. If you need to set up WAF rules, you can use a Cloudflare Worker to access your images and a Route using your domain to execute the worker. For an example worker, refer to [Serve private images using signed URL tokens](https://developers.cloudflare.com/images/manage-images/serve-images/serve-private-images/).\n\n</page>\n\n<page>\n---\ntitle: Serve private images  Cloudflare Images docs\ndescription: You can serve private images by using signed URL tokens. When an\n  image requires a signed URL, the image cannot be accessed without a token\n  unless it is being requested for a variant set to always allow public access.\nlastUpdated: 2025-11-17T14:08:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/images/manage-images/serve-images/serve-private-images/\n  md: https://developers.cloudflare.com/images/manage-images/serve-images/serve-private-images/index.md\n---\n\nYou can serve private images by using signed URL tokens. When an image requires a signed URL, the image cannot be accessed without a token unless it is being requested for a variant set to always allow public access.\n\n1. In the Cloudflare dashboard, go to the **Hosted Images** page.\n\n   [Go to **Hosted images**](https://dash.cloudflare.com/?to=/:account/images/hosted)\n\n2. Select **Keys**.\n\n3. Copy your key and use it to generate an expiring tokenized URL.\n\nNote\n\nPrivate images do not currently support custom paths.\n\nThe example below uses a Worker that takes in a regular URL without a signed token and returns a tokenized URL that expires after one day. You can, however, set this expiration period to whatever you need, by changing the const `EXPIRATION` value.\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Serve uploaded images  Cloudflare Images docs\ndescription: \"To serve images uploaded to Cloudflare Images, you must have:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/images/manage-images/serve-images/serve-uploaded-images/\n  md: https://developers.cloudflare.com/images/manage-images/serve-images/serve-uploaded-images/index.md\n---\n\nTo serve images uploaded to Cloudflare Images, you must have:\n\n* Your Images account hash\n* Image ID\n* Variant or flexible variant name\n\nAssuming you have at least one image uploaded to Images, you will find the basic URL format from the Images dashboard under Developer Resources.\n\n![Developer Resources section within the Images product form the Cloudflare Dashboard.](https://developers.cloudflare.com/_astro/image-delivery-url.D7G6zX-5_Z1UAouX.webp)\n\nA typical image delivery URL looks similar to the example below.\n\n`https://imagedelivery.net/<ACCOUNT_HASH>/<IMAGE_ID>/<VARIANT_NAME>`\n\nIn the example, you need to replace `<ACCOUNT_HASH>` with your Images account hash, along with the `<IMAGE_ID>` and `<VARIANT_NAME>`, to begin serving images.\n\nYou can select **Preview** next to the image you want to serve to preview the image with an Image URL you can copy. The link will have a fully formed **Images URL** and will look similar to the example below.\n\nIn this example:\n\n* `ZWd9g1K7eljCn_KDTu_MWA` is the Images account hash.\n* `083eb7b2-5392-4565-b69e-aff66acddd00` is the image ID. You can also use Custom IDs instead of the generated ID.\n* `public` is the variant name.\n\nWhen a user requests an image, Cloudflare Images chooses the optimal format, which is determined by client headers and the image type.\n\n## Optimize format\n\nCloudflare Images automatically transcodes uploaded PNG, JPEG and GIF files to the more efficient AVIF and WebP formats. This happens whenever the customer browser supports them. If the browser does not support AVIF, Cloudflare Images will fall back to WebP. If there is no support for WebP, then Cloudflare Images will serve compressed files in the original format.\n\nUploaded SVG files are served as [sanitized SVGs](https://developers.cloudflare.com/images/upload-images/).\n\n</page>\n\n<page>\n---\ntitle: Credentials  Cloudflare Images docs\ndescription: To migrate images from Amazon S3, Sourcing Kit requires access\n  permissions to your bucket. While you can use any AWS Identity and Access\n  Management (IAM) user credentials with the correct permissions to create a\n  Sourcing Kit source, Cloudflare recommends that you create a user with a\n  narrow set of permissions.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/images/upload-images/sourcing-kit/credentials/\n  md: https://developers.cloudflare.com/images/upload-images/sourcing-kit/credentials/index.md\n---\n\nTo migrate images from Amazon S3, Sourcing Kit requires access permissions to your bucket. While you can use any AWS Identity and Access Management (IAM) user credentials with the correct permissions to create a Sourcing Kit source, Cloudflare recommends that you create a user with a narrow set of permissions.\n\nTo create the correct Sourcing Kit permissions:\n\n1. Log in to your AWS IAM account.\n\n2. Create a policy with the following format (replace `<BUCKET_NAME>` with the bucket you want to grant access to):",
      "language": "unknown"
    },
    {
      "code": "3. Next, create a new user and attach the created policy to that user.\n\nYou can now use both the Access Key ID and Secret Access Key to create a new source in Sourcing Kit. Refer to [Enable Sourcing Kit](https://developers.cloudflare.com/images/upload-images/sourcing-kit/enable/) to learn more.\n\n</page>\n\n<page>\n---\ntitle: Edit sources  Cloudflare Images docs\ndescription: The Sourcing Kit main page has a list of all the import jobs and\n  sources you have defined. This is where you can edit details for your sources\n  or abort running import jobs.\nlastUpdated: 2025-11-17T14:08:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/images/upload-images/sourcing-kit/edit/\n  md: https://developers.cloudflare.com/images/upload-images/sourcing-kit/edit/index.md\n---\n\nThe Sourcing Kit main page has a list of all the import jobs and sources you have defined. This is where you can edit details for your sources or abort running import jobs.\n\n## Source details\n\nYou can learn more about your sources by selecting the **Sources** tab on the Sourcing Kit dashboard. Use this option to rename or delete your sources.\n\n1. In the Cloudflare dashboard, go to the **Hosted Images** page.\n\n   [Go to **Hosted images**](https://dash.cloudflare.com/?to=/:account/images/hosted)\n\n2. Select **Sourcing Kit**.\n\n3. Select **Sources** and choose the source you want to change.\n\n4. In this page you have the option to rename or delete your source. Select **Rename source** or **Delete source** depending on what you want to do.\n\n## Abort import jobs\n\nWhile Cloudflare Images is still running a job to import images into your account, you can abort it before it finishes.\n\n1. In the Cloudflare dashboard, go to the **Hosted Images** page.\n\n   [Go to **Hosted images**](https://dash.cloudflare.com/?to=/:account/images/hosted)\n\n2. Select **Sourcing Kit**.\n\n3. In **Imports** select the import job you want to abort.\n\n4. The next page shows you a summary of the import. Select **Abort**.\n\n5. Confirm that you want to abort your import job by selecting **Abort** on the dialog box.\n\n</page>\n\n<page>\n---\ntitle: Enable Sourcing Kit  Cloudflare Images docs\ndescription: Enabling Sourcing Kit will set it up with the necessary information\n  to start importing images from your Amazon S3 account.\nlastUpdated: 2025-11-17T14:08:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/images/upload-images/sourcing-kit/enable/\n  md: https://developers.cloudflare.com/images/upload-images/sourcing-kit/enable/index.md\n---\n\nEnabling Sourcing Kit will set it up with the necessary information to start importing images from your Amazon S3 account.\n\n## Create your first import job\n\n1. In the Cloudflare dashboard, go to the **Hosted Images** page.\n\n   [Go to **Hosted images**](https://dash.cloudflare.com/?to=/:account/images/hosted)\n\n2. Select **Sourcing Kit**.\n\n3. Select **Import images** to create an import job.\n\n4. In **Source name** give your source an appropriate name.\n\n5. In **Amazon S3 bucket information** enter the S3's bucket name where your images are stored.\n\n6. In **Required credentials**, enter your Amazon S3 credentials. This is required to connect Cloudflare Images to your source and import your images. Refer to [Credentials](https://developers.cloudflare.com/images/upload-images/sourcing-kit/credentials/) to learn more about how to set up credentials.\n\n7. Select **Next**.\n\n8. In **Basic rules** define the Amazon S3 path to import your images from, and the path you want to copy your images to in your Cloudflare Images account. This is optional, and you can leave these fields blank.\n\n9. On the same page, in **Overwrite images**, you need to choose what happens when the files in your source change. The recommended action is to copy the new images and overwrite the old ones on your Cloudflare Images account. You can also choose to skip the import, and keep what you already have on your Cloudflare Images account.\n\n10. Select **Next**.\n\n11. Review and confirm the information regarding the import job you created. Select **Import images** to start importing images from your source.\n\nYour import job is now created. You can review the job status on the Sourcing Kit main page. It will show you information such as how many objects it found, how many images were imported, and any errors that might have occurred.\n\nNote\n\nSourcing Kit will warn you when you are about to reach the limit for your plan space quota. When you exhaust the space available in your plan, the importing jobs will be aborted. If you see this warning on Sourcing Kits main page, select **View plan** to change your plans limits.\n\n## Define a new source\n\n1. In the Cloudflare dashboard, go to the **Hosted Images** page.\n\n   [Go to **Hosted images**](https://dash.cloudflare.com/?to=/:account/images/hosted)\n\n2. Select **Sourcing Kit**.\n\n3. Select **Import images** > **Define a new source**.\n\nRepeat steps 4-11 in [Create your first import job](#create-your-first-import-job) to finish setting up your new source.\n\n## Define additional import jobs\n\nYou can have many import jobs from the same or different sources. If you select an existing source to create a new import job, you will not need to enter your credentials again.\n\n1. In the Cloudflare dashboard, go to the **Hosted Images** page.\n\n   [Go to **Hosted images**](https://dash.cloudflare.com/?to=/:account/images/hosted)\n\n2. Select **Sourcing Kit**.\n\n3. Select **Import images**.\n\n4. Choose from one of the sources already configured.\n\nRepeat steps 8-11 in [Create your first import job](#create-your-first-import-job) to finish setting up your new import job.\n\n## Next steps\n\nRefer to [Edit source details](https://developers.cloudflare.com/images/upload-images/sourcing-kit/edit/) to learn more about editing details for import jobs you have already created, or to learn how to abort running import jobs.\n\n</page>\n\n<page>\n---\ntitle: How to accelerate dynamic traffic outside of mainland China  Cloudflare\n  Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-express-overview-2/\n  md: https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-express-overview-2/index.md\n---\n\n* Watch this episode\n\n  In this video, Jess Liu discusses Cloudflare's CDN Global Acceleration (formerly China Express), including solutions for high latency on dynamic content, accelerating API calls, accessing Cloudflare One services like WARP and Magic WAN from within mainland China, and securely connecting private enterprise networks.\n\n  **Related content**\n\n  For additional resources on the China Network, refer to the following resources:\n\n  * [Cloudflare China Network](https://developers.cloudflare.com/china-network/)\n  * [CDN Global Acceleration (formerly China Express)](https://developers.cloudflare.com/china-network/concepts/global-acceleration/)\n  * [Internet Content Provider (ICP)](https://developers.cloudflare.com/china-network/concepts/icp/)\n  * [Authoritative DNS in mainland China](https://developers.cloudflare.com/china-network/concepts/china-dns/)\n\n* Series overview\n\n  [Watch Episode 1: How to speed up your web traffic inside mainland China ](https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-network-main-features-1/)This video discusses the main features of Cloudflare's China Network, including how the China Network works, improving availability and response times with caching, in-country China name servers, and compliance with ICP regulations.\n\n  [Watch Episode 2: How to accelerate dynamic traffic outside of mainland China ](https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-express-overview-2/)This video discusses Cloudflare's CDN Global Acceleration (formerly China Express), including solutions for high latency on dynamic content, accelerating API calls, accessing Cloudflare One services like WARP and Magic WAN from within mainland China, and securely connecting private enterprise networks.\n\n</page>\n\n<page>\n---\ntitle: How to speed up your web traffic inside mainland China  Cloudflare\n  Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-network-main-features-1/\n  md: https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-network-main-features-1/index.md\n---\n\n* Watch this episode\n\n  In this video, Jess Liu walks us through the main features of Cloudflare's China Network. They cover how the China Network works, including integrated caching, in-country China name servers, and compliance with ICP regulations. They also briefly discuss Cloudflares CDN Global Acceleration (formerly China Express), an option for accelerating dynamic content that cannot be cached.\n\n  **Related content**\n\n  For additional resources on the China Network, refer to the following resources:\n\n  * [Cloudflare China Network](https://developers.cloudflare.com/china-network/)\n  * [CDN Global Acceleration (formerly China Express)](https://developers.cloudflare.com/china-network/concepts/global-acceleration/)\n  * [Internet Content Provider (ICP)](https://developers.cloudflare.com/china-network/concepts/icp/)\n  * [Authoritative DNS in mainland China](https://developers.cloudflare.com/china-network/concepts/china-dns/)\n\n* Series overview\n\n  [Watch Episode 1: How to speed up your web traffic inside mainland China ](https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-network-main-features-1/)This video discusses the main features of Cloudflare's China Network, including how the China Network works, improving availability and response times with caching, in-country China name servers, and compliance with ICP regulations.\n\n  [Watch Episode 2: How to accelerate dynamic traffic outside of mainland China ](https://developers.cloudflare.com/learning-paths/china-network-overview/series/china-express-overview-2/)This video discusses Cloudflare's CDN Global Acceleration (formerly China Express), including solutions for high latency on dynamic content, accelerating API calls, accessing Cloudflare One services like WARP and Magic WAN from within mainland China, and securely connecting private enterprise networks.\n\n</page>\n\n<page>\n---\ntitle: Add and manage other members  Cloudflare Learning Paths\ndescription: Learn how to add new account members, edit or revoke their\n  permissions and access, and resend verifications emails.\nlastUpdated: 2024-10-21T10:04:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/account-security/add-other-members/\n  md: https://developers.cloudflare.com/learning-paths/application-security/account-security/add-other-members/index.md\n---\n\nLearn how to add new account members, edit or revoke their permissions and access, and resend verifications emails.\n\nNote\n\nTo manage account members, you must have a role of **Super Administrator** and have a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n## View account members\n\nTo manage account members, you must have a role of **Super Administrator** and have a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n* Dashboard\n\n  To view members using the dashboard:\n\n  In the \\[Cloudflare dashboard, go to the **Members** page.\n\n  [Go to **Members**](https://dash.cloudflare.com/?to=/:account/members)\n\n* API\n\n  To view members using the API, send a [`GET` request](https://developers.cloudflare.com/api/resources/accounts/subresources/members/methods/list/).\n\n## Add account members\n\nTo manage account members, you must have a role of **Super Administrator** and have a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n* Dashboard\n\n  To add a member to your account:\n\n  1. In the Cloudflare dashboard, go to the **Members** page.\n\n     [Go to **Members**](https://dash.cloudflare.com/?to=/:account/members)\n\n  2. Select **Invite**.\n\n  3. Fill out the following information:\n\n     * **Invite members**: Enter one or more email addresses (if multiple, separate addresses with commas).\n     * **Scope**: Use a variety of fields to adjust the [scope](https://developers.cloudflare.com/fundamentals/manage-members/roles/) of your roles.\n     * **Roles**: Choose one or more [roles](https://developers.cloudflare.com/fundamentals/manage-members/roles/) to assign your members.\n\n  4. Select **Continue to summary**.\n\n  5. Review the information, then select **Invite**.\n\n  Note\n\n  If a user already has an account with Cloudflare and you have an Enterprise account, you can also select **Direct Add** to add them to your account without sending an email invitation.\n\n* API\n\n  To add a member using the API, send a [`POST` request](https://developers.cloudflare.com/api/resources/accounts/subresources/members/methods/create/).\n\n## Edit member permissions\n\nTo manage account members, you must have a role of **Super Administrator** and have a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n* Dashboard\n\n  To edit member permissions using the dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Members** page.\n\n     [Go to **Members**](https://dash.cloudflare.com/?to=/:account/members)\n\n  2. Select a member record, then select **Edit**.\n\n  3. Update the scope and roles of their permissions.\n\n  4. Select **Continue to summary**.\n\n  5. Review the information, then select **Update**.\n\n* API\n\n  To edit member permissions using the API, get a [list of roles](https://developers.cloudflare.com/api/resources/accounts/subresources/roles/methods/list/) available for an account.\n\n  Then, send a [`PUT` request](https://developers.cloudflare.com/api/resources/accounts/subresources/members/methods/update/) to edit their permissions.",
      "language": "unknown"
    },
    {
      "code": "## Resend an invitation\n\nIf you invited a member to your account but they cannot find the invitation or the invitation expires, you can resend the invitation through the Cloudflare dashboard:\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/login) and select your account[1](#user-content-fn-1).\n2. Go to **Manage Account** > **Members**.\n3. Select a member record where their **Status** is **Invite Pending**.\n4. Select **Resend invite**.\n\n## Footnotes\n\n1. To manage account members, you must have a role of **Super Administrator** and have a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n   [](#user-content-fnref-1)\n\n## Remove account members\n\nTo manage account members, you must have a role of **Super Administrator** and have a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/).\n\n* Dashboard\n\n  To revoke a member's access to your account:\n\n  1. In the Cloudflare dashboard, go to the **Members** page.\n\n     [Go to **Members**](https://dash.cloudflare.com/?to=/:account/members)\n\n  2. Locate an account member and expand their record.\n\n  3. Click **Revoke**.\n\n  4. Click **Yes, revoke access**.\n\n* API\n\n  To revoke a member's access to your account using the API, send a [`DELETE` request](https://developers.cloudflare.com/api/resources/accounts/subresources/members/methods/delete/).\n\n</page>\n\n<page>\n---\ntitle: Audit Logs - version 2 (beta)  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T12:15:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/account-security/audit-logs/\n  md: https://developers.cloudflare.com/learning-paths/application-security/account-security/audit-logs/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Review active sessions  Cloudflare Learning Paths\ndescription: In the Cloudflare dashboard, you can view a list of active sessions\n  associated with your email address.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/account-security/review-active-sessions/\n  md: https://developers.cloudflare.com/learning-paths/application-security/account-security/review-active-sessions/index.md\n---\n\nIn the Cloudflare dashboard, you can view a list of active sessions associated with your email address.\n\nEach time your email is used to log in to your Cloudflare account, a session begins. The Cloudflare dashboard provides session information including if the device is currently viewing the dashboard, the IP address, location, device type, browser type, and last active login.\n\nIf you notice any suspicious activity, you can also revoke any active sessions.\n\nNote\n\nBy default, the session timeout for the Cloudflare dashboard is 72 hours without any activity.\n\nSome customers can also enforce single-sign on (SSO) by [adding a Dashboard SSO application](https://developers.cloudflare.com/fundamentals/manage-members/dashboard-sso/).\n\nIf you navigate to **My Profile** > **Sessions**, you can view active sessions and revoke any session that you do not recognize.\n\n</page>\n\n<page>\n---\ntitle: Review audit logs - v1  Cloudflare Learning Paths\ndescription: Audit logs summarize the history of changes made within your\n  Cloudflare account. Audit logs include account level actions like login, as\n  well as zone configuration changes.\nlastUpdated: 2025-08-20T12:15:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/account-security/review-audit-logs/\n  md: https://developers.cloudflare.com/learning-paths/application-security/account-security/review-audit-logs/index.md\n---\n\nNote\n\nAudit Logs version 2 is available in beta. Refer to the [Audit Logs v2 documentation](https://developers.cloudflare.com/fundamentals/account/account-security/audit-logs/) for more details.\n\nAudit logs summarize the history of changes made within your Cloudflare account. Audit logs include account level actions like login, as well as zone configuration changes.\n\nAudit Logs are available on all plan types and are captured for both individual users and for multi-user organizations.\n\nNote\n\nMost beta features will not appear in audit logs until they are out of beta.\n\nAudit logs are available in the dashboard as well as the API.\n\n### Using the dashboard\n\nTo access audit logs in the Cloudflare dashboard:\n\nIn the Cloudflare dashboard, go to the **Audit Logs** page.\n\n[Go to **Audit logs**](https://dash.cloudflare.com/?to=/:account/audit-log)\n\nYou can search these audit logs by user email or domain and filter by date range. To download audit logs, click **Download CSV**.\n\nNote\n\nDepending on the volume of data, the export of large amounts of events from Audit Logs might fail with errors. We always recommend using Cloudflare [Logpush](https://developers.cloudflare.com/logs/logpush/) to make sure Audit Logs are always available and stored externally.\n\n### Using the API\n\nTo get audit logs from the Cloudflare API, send a [GET request](https://developers.cloudflare.com/api/resources/audit_logs/methods/list/).\n\nWe recommending using the API for downloading historical audit log data.\n\nTo maintain Audit Logs query performance, the Audit Logs API was modified on 2019-06-30 to return records with a maximum age of 18 months.\n\n</page>\n\n<page>\n---\ntitle: Set-up 2FA  Cloudflare Learning Paths\ndescription: Two-factor authentication (2FA) allows user account owners to add\n  an additional layer of login security to Cloudflare accounts. This additional\n  authentication step requires you to provide both something you know, such as a\n  Cloudflare password, and something you have, such as an authentication code\n  from a mobile device.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/account-security/set-up-2fa/\n  md: https://developers.cloudflare.com/learning-paths/application-security/account-security/set-up-2fa/index.md\n---\n\nTwo-factor authentication (2FA) allows user account owners to add an additional layer of login security to Cloudflare accounts. This additional authentication step requires you to provide both something you know, such as a Cloudflare password, and something you have, such as an authentication code from a mobile device.\n\nNote\n\nCloudflare user accounts configured to use single sign-on (SSO) cannot configure 2FA.\n\nCloudflare offers the option to use either a phishing-resistant security key, like a YubiKey, or a Time-Based One-Time password (TOTP) mobile app for authentication, like Google Authenticator, or both. If you add both of these authentication methods to your account, you are initially prompted to log in with the security key, but can opt-out and use TOTP instead.\n\nTo ensure that you can securely access your account even without your mobile device or security keys, Cloudflare also provides backup codes for download.\n\nTip\n\nAfter downloading your backup codes, we recommend saving them in a secure location.\n\nAs the user account owner, you are automatically assigned the [Super Administrator](https://developers.cloudflare.com/fundamentals/manage-members/) role. Once 2FA is enabled, all Cloudflare account members are required to configure 2FA on their mobile devices.\n\n***\n\n## Enable 2FA\n\nWe recommend that all Cloudflare user account holders enable two-factor authentication (2FA) to keep your accounts secure.\n\n2FA can only be enabled successfully on an account with a [verified email address](https://developers.cloudflare.com/fundamentals/user-profiles/verify-email-address/). If you do not verify your email address first, you may lock yourself out of your account.\n\nWarning\n\nSuper Administrators can turn on **2FA Enforcement** to require all members to enable 2FA. If you are not a Super Administrator, you will be forced to turn on 2FA prior to accepting the invitation to join a Cloudflare account as a member.\n\nTo enable two-factor authentication for your Cloudflare login:\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/login).\n2. Under the **My Profile** dropdown, select **My Profile**.\n3. Select **Authentication**.\n4. Select **Manage** in the Two-Factor Authentication card.\n5. Configure either a [TOTP mobile app](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/#configure-totp-mobile-application-authentication), [security key](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/#configure-security-key-authentication-for-two-factor-cloudflare-login), or [email 2FA](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/#configure-email-two-factor-authentication).\n\nNote\n\nCloudflare recommends that users enable at least two different 2FA factors, as well as safely store [backup codes](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/#regenerate-backup-codes)) to prevent lockouts.\n\n## Additional configurations\n\nCloudflare also supports 2FA with device built-in authenticators (Apple Touch ID, Android fingerprint, or Windows Hello), Yubikeys and TOTP mobile applications.\n\n</page>\n\n<page>\n---\ntitle: Browser Integrity  Cloudflare Learning Paths\ndescription: Cloudflare's Browser Integrity Check (BIC) looks for common HTTP\n  headers abused most commonly by spammers and denies access to your page.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/browser-integrity/\n  md: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/browser-integrity/index.md\n---\n\nCloudflare's Browser Integrity Check (BIC) looks for common HTTP headers abused most commonly by spammers and denies access to your page.\n\nIt also challenges visitors without a user agent or with a non-standard user agent such as commonly used by abusive bots, crawlers, or visitors.\n\n[BIC is enabled by default](https://developers.cloudflare.com/waf/tools/browser-integrity-check/).\n\n</page>\n\n<page>\n---\ntitle: DDoS Protection  Cloudflare Learning Paths\ndescription: Cloudflare automatically detects and mitigates DDoS attacks using\n  its Autonomous Edge, which is always-on. Advanced protections are reserved for\n  Magic Transit customers.\nlastUpdated: 2025-06-16T19:13:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/ddos/\n  md: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/ddos/index.md\n---\n\nCloudflare automatically detects and mitigates DDoS attacks using its [Autonomous Edge](https://developers.cloudflare.com/ddos-protection/about/components/#autonomous-edge), which is always-on. `Advanced` protections are reserved for Magic Transit customers.\n\n| OSI Layer | Ruleset / Feature | Example of covered DDoS attack vectors |\n| - | - | - |\n| L3/4 | [Network-layer DDoS Attack Protection](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/) | ACK floods BitTorrent reflection attack Carpet Bombing attacks CHARGEN reflection attacks DNS amplification attack DNS Garbage Flood DNS NXDOMAIN flood DNS Query flood DTLS amplification attacks ESP flood GRE floods ICMP flood attack Jenkins amplification attacks Lantronix reflection attacks mDNS DDoS attacks Memcached amplification attacks Mirai and Mirai-variant L3/4 attacks MSSQL reflection attacks NetBios DDoS attacks Out of state TCP attacks Protocol violation attacks QUIC flood attack Quote of the Day (QOTD) reflection attacks RST flood SIP attacks SNMP flood attack SPSS reflection attacks SSDP reflection attacks SYN floods SYN-ACK reflection attack TeamSpeak 3 floods Ubiquity reflection attacks UDP flood attack VxWorks DDoS attacks For more DNS protection options, refer to [Getting additional DNS protection](https://developers.cloudflare.com/ddos-protection/about/attack-coverage/#getting-additional-dns-protection). |\n| L3/4 | [Advanced TCP Protection](https://developers.cloudflare.com/ddos-protection/advanced-ddos-systems/overview/advanced-tcp-protection/) [1](#user-content-fn-1) | Fully randomized and spoofed ACK floods, SYN floods, SYN-ACK reflection attacks, and other sophisticated TCP-based DDoS attacks |\n| L7 (DNS) | [Advanced DNS Protection](https://developers.cloudflare.com/ddos-protection/advanced-ddos-systems/overview/advanced-dns-protection/) [1](#user-content-fn-1) | Sophisticated and fully randomized DNS attacks, including Water Torture attacks, Random-prefix attacks, and DNS laundering attacks. |\n| L7 (HTTP/S) | [HTTP DDoS Attack Protection](https://developers.cloudflare.com/ddos-protection/managed-rulesets/http/) | Cache busting attacks Carpet Bombing attacks HTTP Continuation flood HTTP flood attack HTTP/2 MadeYouReset HTTP/2 Rapid Reset HULK attack Known DDoS botnets LOIC attack Mirai and Mirai-variant HTTP attacks Slowloris attack TLS/SSL exhaustion attacks TLS/SSL negotiation attacks WordPress pingback attack  |\n\n## Footnotes\n\n1. Available to Magic Transit customers. [](#user-content-fnref-1) [2](#user-content-fnref-1-2)\n\nRefer to the learning path [Prevent DDoS attacks](https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/concepts/) to dive deeper into this subject.\n\n</page>\n\n<page>\n---\ntitle: DNSSEC  Cloudflare Learning Paths\ndescription: DNS Security Extensions (DNSSEC) adds an extra layer of\n  authentication to DNS, ensuring requests are not routed to a spoofed domain.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/dnssec/\n  md: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/dnssec/index.md\n---\n\nDNS Security Extensions (DNSSEC) adds an extra layer of authentication to DNS, ensuring requests are not routed to a spoofed domain.\n\nFor additional background on DNSSEC, visit the [Cloudflare Learning Center](https://www.cloudflare.com/learning/dns/dns-security/).\n\nWhen you [enable DNSSEC](https://developers.cloudflare.com/dns/zone-setups/subdomain-setup/dnssec/), Cloudflare signs your zone, publishes your public signing keys, and generates your **DS** record.\n\nNote:\n\nCloudflare automatically adds **DS** records for domains using Cloudflare Registrar or those using `.ch` and `.cz` top-level domains.\n\n</page>\n\n<page>\n---\ntitle: Mutual TLS (mTLS)  Cloudflare Learning Paths\ndescription: Mutual TLS (mTLS) authentication uses client certificates to ensure\n  traffic between client and server is bidirectionally secure and trusted. mTLS\n  also allows requests that do not authenticate via an identity provider  such\n  as Internet-of-things (IoT) devices  to demonstrate they can reach a given\n  resource.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/mtls/\n  md: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/mtls/index.md\n---\n\nMutual TLS (mTLS) authentication uses client certificates to ensure traffic between client and server is bidirectionally secure and trusted. mTLS also allows requests that do not authenticate via an identity provider  such as Internet-of-things (IoT) devices  to demonstrate they can reach a given resource.\n\n![mTLS sequence diagram](https://developers.cloudflare.com/_astro/api-shield-call-sequence.DjXyNgan_ZJ06pk.webp)\n\nSupport includes [gRPC](https://grpc.io/docs/what-is-grpc/introduction/)-based APIs, which use binary formats such as protocol buffers rather than JSON.\n\n## Creating a mTLS rule\n\n1. In the Cloudflare dashboard, go to **Client Certificates** page.\n\n   [Go to **Client Certificates**](https://dash.cloudflare.com/?to=/:account/:zone/ssl-tls/client-certificates)\n\n2. Select **Create a mTLS rule**.\n\n3. In **Custom rules**, several rule parameters have already been filled in. Enter the URI path you want to protect in **Value**.\n\n4. (Optional) Add a `Hostname` field and enter the mTLS-enabled hostnames you wish to protect in **Value**.\n\n5. In **Choose action**, select `Block`.\n\n6. Select **Deploy** to make the rule active.\n\nOnce you have deployed your mTLS rule, any requests without a [valid client certificate](https://developers.cloudflare.com/ssl/client-certificates/) will be blocked.\n\n</page>\n\n<page>\n---\ntitle: SSL / TLS  Cloudflare Learning Paths\ndescription: Cloudflare offers a range of SSL/TLS options. By default,\n  Cloudflare offers Universal SSL to all domains, but there are many other\n  options available. Cloudflare offers SSL/TLS for free because we believe it is\n  the right thing to do. Encryption is foundational to the Internet because it\n  prevents data from being manipulated.\nlastUpdated: 2025-10-14T09:05:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/ssl/\n  md: https://developers.cloudflare.com/learning-paths/application-security/default-traffic-security/ssl/index.md\n---\n\nCloudflare offers a range of SSL/TLS options. By default, Cloudflare offers Universal SSL to all domains, but there are many other options available. Cloudflare offers SSL/TLS for free because we believe it is the [right thing to do](https://blog.cloudflare.com/introducing-universal-ssl). Encryption is foundational to the Internet because it prevents data from being manipulated.\n\n1. [**Universal SSL**](https://developers.cloudflare.com/ssl/edge-certificates/universal-ssl/): This option covers basic encryption requirements and certificate management needs.\n\n2. [**Total TLS**](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/total-tls/): Automatically issues certificates for all subdomain levels, extending the protection offered by Universal SSL.\n\n3. [**Advanced Certificates**](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/): Offers customizable certificate issuance and management, including options like choosing the certificate authority, certificate validity period, and removing Cloudflare branding from certificates.\n\n4. [**Custom Certificates**](https://developers.cloudflare.com/ssl/edge-certificates/custom-certificates/): For eligible plans, customers can upload their own certificates, with the user managing issuance and renewal.\n\n5. [**mTLS Client Certificates**](https://developers.cloudflare.com/ssl/client-certificates/): Cloudflare offers a PKI system, used to create client certificates, which can enforce mutual Transport Layer Security (mTLS) encryption.\n\n6. [**Cloudflare for SaaS Custom Hostnames**](https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/): This feature enables SaaS providers to offer their clients the ability to use their own domains while benefiting from Cloudflare's network.\n\n7. [**Keyless SSL Certificates**](https://developers.cloudflare.com/ssl/keyless-ssl/): Keyless SSL allows security-conscious clients to upload their own custom certificates and benefit from Cloudflare, but without exposing their TLS private keys.\n\n8. [**Origin Certificates**](https://developers.cloudflare.com/ssl/origin-configuration/origin-ca/): Origin CA certificates from Cloudflare are used to encrypt traffic between Cloudflare and your origin web server. These certificates are created through the Cloudflare dashboard and can be configured with a choice of RSA or ECC private keys and support for various server types.\n\n</page>\n\n<page>\n---\ntitle: Custom rules  Cloudflare Learning Paths\ndescription: Custom rules allow you to control incoming traffic by filtering\n  requests to a zone. They work as customized web application firewall (WAF)\n  rules that you can use to perform actions like Block or Managed Challenge on\n  incoming requests. You can also use the Skip action in a custom rule to skip\n  one or more Cloudflare security features.\nlastUpdated: 2024-10-25T11:11:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/firewall/custom-rules/\n  md: https://developers.cloudflare.com/learning-paths/application-security/firewall/custom-rules/index.md\n---\n\nCustom rules allow you to control incoming traffic by filtering requests to a zone. They work as customized web application firewall (WAF) rules that you can use to perform actions like *Block* or *Managed Challenge* on incoming requests. You can also use the *Skip* action in a custom rule to [skip one or more Cloudflare security features](https://developers.cloudflare.com/waf/custom-rules/skip/).\n\nIn the [new security dashboard](https://developers.cloudflare.com/security/), custom rules are one of the available types of [security rules](https://developers.cloudflare.com/security/rules/). Security rules perform security-related actions on incoming requests that match specified filters.\n\nLike other rules evaluated by Cloudflare's [Ruleset Engine](https://developers.cloudflare.com/ruleset-engine/), custom rules have the following basic parameters:\n\n* An [expression](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/) that specifies the criteria you are matching traffic on using the [Rules language](https://developers.cloudflare.com/ruleset-engine/rules-language/).\n* An [action](https://developers.cloudflare.com/ruleset-engine/rules-language/actions/) that specifies what to perform when there is a match for the rule.\n\nThe [custom rules documentation](https://developers.cloudflare.com/waf/custom-rules/) includes examples for common use cases.\n\n## Skip rules\n\nYou can skip one or more Cloudflare security features using a custom rule [configured with the *Skip* action](https://developers.cloudflare.com/waf/custom-rules/skip/). These rules are also known as skip rules. Refer to [Skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/) for more information on the features you can skip.\n\n</page>\n\n<page>\n---\ntitle: Managed Rules  Cloudflare Learning Paths\ndescription: \"Cloudflare provides pre-configured managed rulesets that protect\n  against web application exploits such as the following:\"\nlastUpdated: 2025-08-20T13:33:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/firewall/managed-rules/\n  md: https://developers.cloudflare.com/learning-paths/application-security/firewall/managed-rules/index.md\n---\n\nCloudflare provides pre-configured managed rulesets that protect against web application exploits such as the following:\n\n* Zero-day vulnerabilities\n* Top-10 attack techniques\n* Use of stolen/leaked credentials\n* Extraction of sensitive data\n\nManaged rulesets are [regularly updated](https://developers.cloudflare.com/waf/change-log/). Each rule has a default action that varies according to the severity of the rule. You can adjust the behavior of specific rules, choosing from several possible actions.\n\nRules of managed rulesets have associated tags (such as `wordpress`) that allow you to search for a specific group of rules and configure them in bulk.\n\n## Rulesets\n\nBy default, Cloudflare offers the following rulesets:\n\n* [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/)\n* [Cloudflare OWASP Core Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/)\n* [Cloudflare Exposed Credentials Check Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/exposed-credentials-check/)\n\n</page>\n\n<page>\n---\ntitle: Configurations  Cloudflare Learning Paths\ndescription: Both Custom and Managed Lists are located in the account settings.\n  Refer to Features by plan type for more information on plan eligibility.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/lists/configuration/\n  md: https://developers.cloudflare.com/learning-paths/application-security/lists/configuration/index.md\n---\n\nBoth Custom and Managed Lists are located in the account settings. Refer to [Features by plan type](https://developers.cloudflare.com/learning-paths/application-security/lists/features/) for more information on plan eligibility.\n\n## Custom Lists\n\nUsing a Custom List is an alternative to creating individual Firewall rules with long lists of IP addresses or other types of identifiers. They are easier to read and update, especially when they are used across many security rules. Lists are often used in conjunction with in-house or third party security feeds.\n\n## Managed Lists\n\nThe following lists are managed by the Cloudflare team and are regularly updated.\n\n| Display name | Name in expressions | Description |\n| - | - | - |\n| Cloudflare Open Proxies | `cf.open_proxies` | IP addresses of known open HTTP and SOCKS proxy endpoints, which are frequently used to launch attacks and hide attackers identity. |\n| Cloudflare Anonymizers | `cf.anonymizer` | IP addresses of known anonymizers (Open SOCKS Proxies, VPNs, and TOR nodes). |\n| Cloudflare VPNs | `cf.vpn` | IP addresses of known VPN servers. |\n| Cloudflare Malware | `cf.malware` | IP addresses of known sources of malware. |\n| Cloudflare Botnets, Command and Control Servers | `cf.botnetcc` | IP addresses of known botnet command-and-control servers. |\n\n\n\n## Creating a rule\n\nRefer to [Use lists in expressions](https://developers.cloudflare.com/waf/tools/lists/use-in-expressions/) to learn how to invoke a Managed List.\n\n</page>\n\n<page>\n---\ntitle: Features  Cloudflare Learning Paths\ndescription: List availability varies according to the list type and your\n  Cloudflare plan and subscriptions.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/lists/features/\n  md: https://developers.cloudflare.com/learning-paths/application-security/lists/features/index.md\n---\n\nList availability varies according to the list type and your Cloudflare plan and subscriptions.\n\n| | Free | Pro | Business | Enterprise |\n| - | - | - | - | - |\n| Availability | Yes | Yes | Yes | Yes |\n| Number of custom lists (any type) | 1 | 10 | 10 | 1,000 |\n| Max. number of list items (across all custom lists) | 10,000 | 10,000 | 10,000 | 500,000 |\n| IP lists | Yes | Yes | Yes | Yes |\n| Other custom lists (hostnames, ASNs) | No | No | No | Yes |\n| Managed IP List: Cloudflare Open Proxies | No | No | No | Yes |\n| All Managed IP Lists | No | No | No | With separate add-on |\n\nNotes:\n\n* The number of available custom lists depends on the highest plan in your account. Any account with at least one paid plan will get the highest quota.\n\n* Customers on Enterprise plans can create a maximum of 1,000 custom lists in total across different list types. The following additional limits apply:\n\n  * Up to 40 hostname lists, with a maximum of 10,000 list items across all hostname lists.\n  * Up to 40 ASN lists, with a maximum of 30,000 list items across all ASN lists.\n\n* The Cloudflare Enterprise plan provides access to the Cloudflare Open Proxies Managed IP List. Other Managed IP Lists are available as part of Enterprise Security Bundles. For more information, contact your account team.\n\n* Customers on Enterprise plans may contact their account team if they need more custom lists or a larger maximum number of items across lists.\n\n* For details on the availability of Bulk Redirect Lists, refer to the [Rules](https://developers.cloudflare.com/rules/url-forwarding/#availability) documentation.\n\n</page>\n\n<page>\n---\ntitle: Use cases  Cloudflare Learning Paths\ndescription: \"The most common uses cases are:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/lists/use-cases/\n  md: https://developers.cloudflare.com/learning-paths/application-security/lists/use-cases/index.md\n---\n\nThe most common uses cases are:\n\n* When creating a rule, using a list is easier and less error-prone than adding a long list of items such as IP addresses to a rule expression.\n* When updating a set of rules that target the same group of IP addresses (or hostnames), using an IP list (or a hostname list) is easier and less error prone than editing multiple rules.\n* Lists are easier to read and more informative, particularly when you use descriptive names for your lists.\n\nWhen you update the content of a list, any rules that use the list are automatically updated, so you can make a single change to your list rather than modify rules individually.\n\nCloudflare stores your lists at the account level. You can use the same list in rules of different zones in your Cloudflare account.\n\n</page>\n\n<page>\n---\ntitle: Configurations  Cloudflare Learning Paths\ndescription: Let's step through an example. If your /create-account page is\n  being attacked, you will create a rule to limit the amount of requests, per\n  counting characteristic, that you feel comfortable permitting through to your\n  origin.\nlastUpdated: 2025-05-08T15:28:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/rate-limiting/configurations/\n  md: https://developers.cloudflare.com/learning-paths/application-security/rate-limiting/configurations/index.md\n---\n\nLet's step through an example. If your `/create-account` page is being attacked, you will create a rule to limit the amount of requests, per `counting characteristic`, that you feel comfortable permitting through to your origin.\n\nThe rule below is being created on the `free` plan, which limits configuration options. The rule will trigger if the URI path matches `/create-account`, from the same IP address, *after* 5 requests and within a 10 second window, [within each Cloudflare datacenter](https://developers.cloudflare.com/waf/rate-limiting-rules/request-rate/), globally.\n\n***\n\n![rate-limiting-create-account-endpoint](https://developers.cloudflare.com/_astro/rl-create-account-endpoint.BFxHF746_2mhyHc.webp)![rate-limiting-create-account-endpoint-block](https://developers.cloudflare.com/_astro/rl-create-account-endpoint-block.DOOFhKll_Z1CSTl3.webp)\n\n***\n\n## Advanced configuration\n\nIn the previous module, we reviewed the various configurations available per plan. Using the same endpoint as an example, let us walk through another example, but with the additional advanced configurations.\n\nThe rule below is being created on the `enterprise` plan, so we are no longer limited to default configurations.\n\n* The rule will also limit the number of requests to `/create-account`, but will only trigger against `POST` requests. In the basic example, even requests with the `GET` method will increment the counter.\n* Requests that do not have a [client certificate (mTLS)](https://developers.cloudflare.com/ssl/client-certificates/), will increment the counter.\n* Requests will be counted using the [IP with NAT support](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/#use-cases-of-ip-with-nat-support) characteristic.\n* Within a 1 minute period, for each counted entity, if the number of requests exceeds 10, then the user will be presented with a [Managed Challenge](https://developers.cloudflare.com/cloudflare-challenges/challenge-types/challenge-pages/#managed-challenge-recommended) for a custom duration of 1 day.\n\n![rate-limiting-advanced-config-1](https://developers.cloudflare.com/_astro/rl-advanced-config.CWcevnzk_1u3bRz.webp)\n\n***\n\n## Best practices\n\nRules that match identical criteria can be stacked together. For example, instead of creating just a single rule for `/create-account`, you can create multiple rules that match the same path but have different `counting characteristics` or `request limits` to protect against a threat that might behave dynamically.\n\n</page>\n\n<page>\n---\ntitle: Features  Cloudflare Learning Paths\ndescription: \"Rate limiting is composed of the following parameters:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/rate-limiting/features/\n  md: https://developers.cloudflare.com/learning-paths/application-security/rate-limiting/features/index.md\n---\n\nRate limiting is composed of the following parameters:\n\n* An [expression](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/) that specifies the criteria you are matching traffic on using the [Rules language](https://developers.cloudflare.com/ruleset-engine/rules-language/).\n* An [action](https://developers.cloudflare.com/ruleset-engine/rules-language/actions/) that specifies what to perform when there is a match for the rule and any additional conditions are met. In the case of rate limiting rules, the action occurs when the rate reaches the specified limit.\n\nBesides these two parameters, rate limiting rules require the following additional parameters:\n\n* **Characteristics**: The set of parameters that define how Cloudflare tracks the rate for this rule.\n* **Period**: The period of time to consider (in seconds) when evaluating the rate.\n* **Requests per period**: The number of requests over the period of time that will trigger the rate limiting rule.\n* **Duration** (or mitigation timeout): Once the rate is reached, the rate limiting rule blocks further requests for the period of time defined in this field.\n* **Action behavior**: By default, Cloudflare will apply the rule action for the configured duration (or mitigation timeout), regardless of the request rate during this period. Some Enterprise customers can configure the rule to [throttle requests](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/#with-the-following-behavior) over the maximum rate, allowing incoming requests when the rate is lower than the configured limit.\n\n## Features by plan type\n\nFeatures vary by plan type.\n\n| Feature | Free | Pro | Business | Enterprise with app security | Enterprise with Advanced Rate Limiting |\n| - | - | - | - | - | - |\n| Available fields in rule expression | Path, [Verified Bot](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.verified_bot/) | Host, URI, Path, Full URI, Query, Verified Bot | Host, URI, Path, Full URI, Query, Method, Source IP, User Agent, Verified Bot | General request fields, request header fields, Verified Bot, Bot Management fields[1](#user-content-fn-1) | General request fields, request header fields, Verified Bot, Bot Management fields[1](#user-content-fn-1), request body fields[2](#user-content-fn-2) |\n| Counting characteristics | IP | IP | IP, IP with NAT support | IP, IP with NAT support | IP, IP with NAT support, Query, Host, Headers, Cookie, ASN, Country, Path, JA3/JA4 Fingerprint[1](#user-content-fn-1), JSON field value[2](#user-content-fn-2), Body[2](#user-content-fn-2), Form input value[2](#user-content-fn-2), Custom |\n| Custom counting expression | No | No | Yes | Yes | Yes |\n| Available fields in counting expression | N/A | N/A | All rule expression fields, Response code, Response headers | All rule expression fields, Response code, Response headers | All rule expression fields, Response code, Response headers |\n| Counting model | Number of requests | Number of requests | Number of requests | Number of requests | Number of requests, [complexity score](https://developers.cloudflare.com/waf/rate-limiting-rules/request-rate/#complexity-based-rate-limiting) |\n| Rate limiting action behavior | Perform action during mitigation period | Perform action during mitigation period | Perform action during mitigation period | Perform action during mitigation period, Throttle requests above rate with block action | Perform action during mitigation period, Throttle requests above rate with block action |\n| Counting periods | 10 s | All supported values up to 1min[3](#user-content-fn-3) | All supported values up to 10min[3](#user-content-fn-3) | All supported values up to 65,535s[3](#user-content-fn-3) | All supported values up to 65,535s[3](#user-content-fn-3) |\n| Mitigation timeout periods | 10 s | All supported values up to 1h[3](#user-content-fn-3) | All supported values up to 1day[3](#user-content-fn-3) | All supported values up to 1day[3](#user-content-fn-3)[4](#user-content-fn-4) | All supported values up to 1day[3](#user-content-fn-3)[4](#user-content-fn-4) |\n| Number of rules | 1 | 2 | 5 | 5 or more[5](#user-content-fn-5) | 100 |\n\nFootnotes\n\n1: Only available to Enterprise customers who have purchased [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/).\n\n2: Availability depends on your WAF plan.\n\n3: List of supported counting/mitigation period values in seconds:\\\n10, 15, 20, 30, 40, 45, 60 (1 min), 90, 120 (2 min), 180 (3 min), 240 (4 min), 300 (5 min), 480, 600 (10 min), 900, 1200 (20 min), 1800, 2400, 3600 (1 h), 65535, 86400 (1 day).\\\nNot all values are available on all plans.\n\n4: Enterprise customers can specify a custom mitigation timeout period via API.\n\n5: Enterprise customers must have application security on their contract to get access to rate limiting rules. The number of rules depends on the exact contract terms.\n\n## Footnotes\n\n1. Only available to Enterprise customers who have purchased [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/). [](#user-content-fnref-1) [2](#user-content-fnref-1-2) [3](#user-content-fnref-1-3)\n\n2. Availability depends on your WAF plan. [](#user-content-fnref-2) [2](#user-content-fnref-2-2) [3](#user-content-fnref-2-3) [4](#user-content-fnref-2-4)\n\n3. Supported period values in seconds:\\\n   10, 15, 20, 30, 40, 45, 60 (1 min), 90, 120 (2 min), 180 (3 min), 240 (4 min), 300 (5 min), 480, 600 (10 min), 900, 1200 (20 min), 1800, 2400, 3600 (1 h), 65535, 86400 (1 day). [](#user-content-fnref-3) [2](#user-content-fnref-3-2) [3](#user-content-fnref-3-3) [4](#user-content-fnref-3-4) [5](#user-content-fnref-3-5) [6](#user-content-fnref-3-6) [7](#user-content-fnref-3-7) [8](#user-content-fnref-3-8)\n\n4. Enterprise customers can specify a custom mitigation timeout period via API. [](#user-content-fnref-4) [2](#user-content-fnref-4-2)\n\n5. Enterprise customers must have application security on their contract to get access to rate limiting rules. The number of rules depends on the exact contract terms. [](#user-content-fnref-5)\n\n</page>\n\n<page>\n---\ntitle: Use cases  Cloudflare Learning Paths\ndescription: \"The most common uses cases are:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/rate-limiting/use-cases/\n  md: https://developers.cloudflare.com/learning-paths/application-security/rate-limiting/use-cases/index.md\n---\n\nThe most common uses cases are:\n\n* [Enforce granular access control](https://developers.cloudflare.com/waf/rate-limiting-rules/best-practices/#enforcing-granular-access-control) to resources. Includes access control based on criteria such as user agent, IP address, referrer, host, country, and world region.\n* [Protect against credential stuffing](https://developers.cloudflare.com/waf/rate-limiting-rules/best-practices/#protecting-against-credential-stuffing) and account takeover attacks.\n* [Limit the number of operations](https://developers.cloudflare.com/waf/rate-limiting-rules/best-practices/#limiting-the-number-of-operations) performed by individual clients. Includes preventing scraping by bots, accessing sensitive data, bulk creation of new accounts, and programmatic buying in ecommerce platforms.\n* [Protect REST APIs](https://developers.cloudflare.com/waf/rate-limiting-rules/best-practices/#protecting-rest-apis) from resource exhaustion (targeted DDoS attacks) and resources from abuse in general.\n* [Protect GraphQL APIs](https://developers.cloudflare.com/waf/rate-limiting-rules/best-practices/#protecting-graphql-apis) by preventing server overload and limiting the number of operations.\n\n</page>\n\n<page>\n---\ntitle: Brand Protection  Cloudflare Learning Paths\ndescription: Brand Protection gives you the ability to search for new domains\n  that may be attempting to impersonate your brand. Common misspellings\n  (cloudfalre.com) and concatenation of services (cloudflare-okta.com) are often\n  registered by attackers to trick unsuspecting victims into submitting private\n  information such as passwords. Our system allows you to save search queries\n  that run continuously and alert you if any new domains match those queries.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/security-center/brand-protection/\n  md: https://developers.cloudflare.com/learning-paths/application-security/security-center/brand-protection/index.md\n---\n\nBrand Protection gives you the ability to search for new domains that may be attempting to impersonate your brand. Common misspellings (`cloudfalre.com`) and concatenation of services (`cloudflare-okta.com`) are often registered by attackers to trick unsuspecting victims into submitting private information such as passwords. Our system allows you to save search queries that run continuously and alert you if any new domains match those queries.\n\n## Types of queries\n\n1. [Domain search](https://developers.cloudflare.com/security-center/brand-protection/#domain-search): allows you to search for domains that might be trying to impersonate your brand.\n\n2. [Logo search](https://developers.cloudflare.com/security-center/brand-protection/#logo-queries): allows you to search for logos that might look and feel like your brand's logo.\n\n## Alerts\n\nBrand Protection works with Cloudflares ANS (Alerts Notification Service) to provide configurable alerts when new domains are detected.\n\nAny matches that are found during the new domain search are then inserted into an internal alerts table which triggers an alert for the user. This allows you to receive real-time notifications and take immediate action to investigate and potentially block any suspicious domains that may be attempting to impersonate your brand.\n\n</page>\n\n<page>\n---\ntitle: Security Insights  Cloudflare Learning Paths\ndescription: \"Security Insights provides you with a list of insights, covering\n  different areas of your Cloudflare environment, such as: Cloudflare account\n  settings, DNS record configurations, SSL/TLS certificates configurations,\n  Cloudflare Access configurations and Cloudflare WAF configurations.\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/application-security/security-center/insights/\n  md: https://developers.cloudflare.com/learning-paths/application-security/security-center/insights/index.md\n---\n\nSecurity Insights provides you with a list of insights, covering different areas of your Cloudflare environment, such as: Cloudflare account settings, DNS record configurations, SSL/TLS certificates configurations, Cloudflare Access configurations and Cloudflare WAF configurations.\n\n## Dashboard analytics\n\nSecurity Insights focuses on your Cloudflare environment by running [security scans](https://developers.cloudflare.com/security-center/security-insights/how-it-works/#scan-frequency) at regular intervals. Instead of navigating through each of your domains to review their security issues, the Security Center aggregates all of them into a single dashboard.\n\n![Security Insights Overview](https://developers.cloudflare.com/_astro/security-insights-overview.lQDBpBkp_ZOnfR3.webp)\n\nThe list of insights may include potential security threats, vulnerabilities, compliance risks, insecure configurations, or any other identified risks.\n\n## Severity properties\n\nEach insight that is discovered by the Security Insights scan will have the following properties assigned to them:\n\n* **Severity**: The security risk of the insight. The severity values are: *Moderate*, *High*, and *Critical*. The higher the severity level, the higher the risk of threat to your environment.\n* **Insight**: The insight description detailing the current configuration that is causing the risk or vulnerability.\n* **Risk**: A description of the risk associated with not addressing the issue.\n* **Type**: The insight category.\n\n</page>\n\n<page>\n---\ntitle: Create a Cloudflare account  Cloudflare Learning Paths\ndescription: \"To create a new Cloudflare account:\"\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-cloudflare-account/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-cloudflare-account/index.md\n---\n\nTo create a new Cloudflare account:\n\n1. [Sign up](https://dash.cloudflare.com/sign-up) on the Cloudflare dashboard.\n\n2. To secure your account, enable [two-factor authentication](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/).\n\n3. After your account is accepted into the Cybersafe Schools program, you can to reach out to your Cloudflare contact and ask them to set up your account as a multi-user organization. This will allow you to define [role based access](https://developers.cloudflare.com/fundamentals/manage-members/roles/) controls. For this project, account members will need:\n\n   * [**Gateway** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit DNS policies.\n   * [**PII** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/#cloudflare-zero-trust-pii) to view user information in DNS logs.\n   * [**Configuration** permissions](https://developers.cloudflare.com/email-security/account-setup/permissions/) for Area 1 Email security.\n\n</page>\n\n<page>\n---\ntitle: Create an Email security account  Cloudflare Learning Paths\ndescription: To create your Email security account, you will need the\n  alphanumeric string on the URL when logged in to the Cloudflare dashboard.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-email-security-account/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-email-security-account/index.md\n---\n\nTo create your Email security account, you will need the alphanumeric string on the URL when logged in to the Cloudflare dashboard.\n\nOnce you have created your [Cloudflare account](https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-cloudflare-account/), your account team will create an Email security account for you.\n\nTo establish your tenant, you will need the following information:\n\n* Average monthly inbound message volume\n* Number of active email users\n* At least one domain\n* Admin email address\n\n</page>\n\n<page>\n---\ntitle: Create a Zero Trust organization  Cloudflare Learning Paths\ndescription: \"To set up a Zero Trust organization:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-zero-trust-org/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/account-creation/create-zero-trust-org/index.md\n---\n\nTo set up a Zero Trust organization:\n\n1. In the [Cloudflare dashboard](https://dash.cloudflare.com/), select **Zero Trust**.\n\n   [Go to **Zero Trust**](https://one.dash.cloudflare.com/)\n\n2. On the onboarding screen, choose a team name. The team name is a unique, internal identifier for your Zero Trust organization. Users will enter this team name when they enroll their device manually, and it will be the subdomain for your App Launcher (as relevant). Your business name is the typical entry.\n\n   You can find your team name in [Cloudflare One](https://one.dash.cloudflare.com) by going to **Settings**.\n\n3. Complete your onboarding by selecting a subscription plan and entering your payment details. If you chose the **Zero Trust Free plan**, this step is still needed but you will not be charged.\n\n</page>\n\n<page>\n---\ntitle: Project Cybersafe Schools and CIPA  Cloudflare Learning Paths\ndescription: Project Cybersafe Schools (PCS) grants eligible schools free access\n  to Cloudflares Email security and Gateway products.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/cipa-overview/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/cipa-overview/index.md\n---\n\nProject Cybersafe Schools (PCS) grants eligible schools free access to Cloudflares Email security and Gateway products.\n\nLike other under-resourced organizations, schools face cyber attacks from malicious actors that can impact schools ability to safely perform a basic function  teach children. Schools face email, phishing, and ransomware attacks that slow access and threaten leaks of confidential student data.\n\nPCS will help support small K-12 public school districts, for free, by providing cloud email security to protect against a broad spectrum of threats including malware-less business email compromise, multichannel phishing, credential harvesting, and other targeted attacks. PCS will also protect against Internet threats with DNS filtering by preventing users from reaching unwanted or harmful online content like ransomware or phishing sites and can be deployed to comply with the Childrens Internet Protection Act (CIPA).\n\n## Project Cybersafe Schools Eligibility\n\nThis program is only available to eligible school districts. To be eligible, Project Cybersafe School participants must be:\n\n* K-12 public school districts located in the United States.\n* Up to 2,500 students in the district.\n\nApply to [Project Cybersafe Schools](https://www.cloudflare.com/lp/cybersafe-schools/).\n\n## Childrens Internet Protection Act (CIPA)\n\nThe [Children's Internet Protection Act (CIPA)](https://www.fcc.gov/sites/default/files/childrens_internet_protection_act_cipa.pdf) is a federal law enacted by the United States Congress to address concerns about children's access to inappropriate or harmful content over the Internet. CIPA requires K-12 schools and libraries that receive certain federal funding to implement Internet safety measures to protect minors from harmful online content.\n\nThe law aims to prevent students from accessing explicit, obscene, or otherwise harmful material. It also emphasizes the use of technology protection measures, including DNS filtering, to safeguard against Internet threats such as ransomware, phishing sites, and other potentially harmful content.\n\n### Requirements\n\nCIPA mandates that K-12 schools and libraries adopt Internet safety policies that include measures to block or filter access to specific categories of content. These categories encompass a wide range of topics that could be harmful or inappropriate for minors. Compliance with these requirements helps ensure that students' online experiences are safer and more secure.\n\n### Configuration\n\nTo facilitate compliance with CIPA requirements, administrators can [enable a single filtering policy option](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/common-policies/#turn-on-cipa-filter). This includes applying the required filter categories to block access to unwanted or harmful online content.\n\nNote\n\nIt is important to note that while our recommended CIPA compliance rule covers the essential filter categories, CIPA is designed to be flexible, allowing administrators to adjust filtering policies based on local standards and requirements.\n\nAdministrators should carefully assess their specific location and userbase to determine if additional categories may need to be added or modified to ensure comprehensive protection.\n\nCloudflares recommended CIPA rule blocks the following content subcategories:\n\n* Adult Themes\n* Alcohol\n* Anonymizer\n* Brand Embedding\n* Child Abuse\n* Command and Control & Botnet\n* Cryptomining\n* DGA Domains\n* DNS Tunneling\n* Drugs\n* Gambling\n* Hacking\n* Malware\n* Militancy, Hate & Extremism\n* Nudity\n* P2P\n* Phishing\n* Pornography\n* Private IP Address\n* Profanity\n* Questionable Activities\n* School Cheating\n* Spam\n* Spyware\n* Tobacco\n* Violence\n* Weapons\n\nReview the [domain categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/) for more information.\n\n</page>\n\n<page>\n---\ntitle: What is DNS?  Cloudflare Learning Paths\ndescription: The Domain Name System (DNS) is the phonebook of the Internet. DNS\n  translates the domain name that you type in the browser (such as\n  www.example.com) to a computer-friendly IP address (93.184.216.34), similar to\n  how a phonebook translates a person's name to a phone number. The IP address\n  identifies the server where the website data is stored, allowing the browser\n  to contact the server and load the page.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/what-is-dns/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/what-is-dns/index.md\n---\n\nThe Domain Name System (DNS) is the phonebook of the Internet. DNS translates the domain name that you type in the browser (such as `www.example.com`) to a computer-friendly IP address (`93.184.216.34`), similar to how a phonebook translates a person's name to a phone number. The IP address identifies the server where the website data is stored, allowing the browser to contact the server and load the page.\n\n## Life of a DNS query\n\nThe process of translating a domain to an IP address is known as a DNS lookup. DNS lookups are performed by dedicated servers called DNS resolvers. Your Wi-Fi router is typically preconfigured to send DNS queries to the resolver owned by your ISP. However, you can choose to configure your router, operating system, or browser to use a different resolver. Some examples of free, public DNS resolvers include Cloudflare 1.1.1.1, Google 8.8.8.8, and OpenDNS.\n\nAs shown in the diagram below, the DNS resolver contacts a series of nameservers (where DNS records are stored) to track down the requested IP address. The resolver analyzes the domain in reverse, starting from the top-level domain (`.com`) and ending with the subdomain (`www`). The final nameserver in the DNS lookup, called the authoritative nameserver, contains the desired IP address. The concept is similar to how the post office delivers a package  first routing it to the correct country, then to the correct state, city, street and so forth until it arrives at your home address.",
      "language": "unknown"
    },
    {
      "code": "## Related resources\n\nFor more background information on DNS, refer to our [Learning Center](https://www.cloudflare.com/learning/dns/what-is-dns/).\n\n</page>\n\n<page>\n---\ntitle: What is DNS filtering?  Cloudflare Learning Paths\ndescription: DNS filtering is a technique to block access to websites or online\n  content. DNS filtering is implemented by specialized DNS resolvers (such as\n  Cloudflare Gateway) that allow you to define a blocklist of domains or content\n  categories. The DNS resolver acts as a filter by refusing to resolve queries\n  for domains on the blocklist, thus preventing users from loading those\n  websites.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/what-is-dns-filtering/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/what-is-dns-filtering/index.md\n---\n\nDNS filtering is a technique to block access to websites or online content. DNS filtering is implemented by specialized DNS resolvers (such as Cloudflare Gateway) that allow you to define a blocklist of domains or content categories. The DNS resolver acts as a filter by refusing to resolve queries for domains on the blocklist, thus preventing users from loading those websites.\n\n## Purpose of DNS filtering\n\nDNS filtering is commonly used to:\n\n* Protect school data from phishing, ransomware, and malware.\n* Block websites that go against school acceptable use policy, such as adult content, gambling, and piracy.\n* Restrict access to websites that may impact student productivity, such as gaming, social media, and video streaming.\n\n## How DNS filtering works\n\nDNS filtering involves configuring your browser, device, or router to send all DNS requests to a DNS filtering service. The DNS filtering service checks the domain or IP against your DNS policies. If the domain or IP matches a block policy, the DNS filtering service can redirect the request to an alternative IP address or block it altogether. The diagram below shows the logic for Cloudflare Gateway's DNS filtering service.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## DNS filtering vs. Secure Web Gateway\n\nA URL assumes the form: `protocol://subdomain.domain.tld:port/path?query`\n\nDNS filtering only applies to the hostname  `subdomain.domain.tld`. You cannot block specific protocols, ports, paths, or query types. Additionally, users can bypass DNS policies if they already know the IP address of the website, or by connecting through a Virtual Private Network (VPN) or proxy server.\n\nSecure Web Gateways (SWGs) offer a greater set of capabilities, including:\n\n* [URL filtering](https://www.cloudflare.com/learning/access-management/what-is-url-filtering/) to block specific paths and queries\n* L4 firewalls to block ports and protocols\n* Antivirus scanning\n* [Data loss prevention](https://www.cloudflare.com/learning/access-management/what-is-dlp/)\n* [Browser isolation](https://www.cloudflare.com/learning/access-management/what-is-browser-isolation/)\n\nHowever, this can make SWGs more complex to deploy. Therefore, many organizations will start with DNS filtering as an initial layer of defense against Internet threats.\n\n## Related resources\n\n* For more background information on DNS filtering, refer to our [Learning Center](https://www.cloudflare.com/learning/access-management/what-is-dns-filtering/).\n\n## Next steps\n\nIn the remaining modules, you will learn how to set up DNS filtering on your devices using Cloudflare Gateway.\n\n</page>\n\n<page>\n---\ntitle: What is Email security?  Cloudflare Learning Paths\ndescription: Despite email's importance as a communication method, security and\n  privacy were not built into the The Simple Mail Transfer Protocol (SMTP)\n  protocol. As a result, email is a major attack vector.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/what-is-email-security/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/concepts/what-is-email-security/index.md\n---\n\nDespite email's importance as a communication method, security and privacy were not built into the [The Simple Mail Transfer Protocol (SMTP) protocol](https://www.cloudflare.com/learning/email-security/what-is-smtp/). As a result, email is a major attack vector.\n\nEmail security is the process of preventing [email-based](https://www.cloudflare.com/learning/email-security/what-is-email/) cyber attacks and unwanted communications. It spans protecting inboxes from takeover, protecting domains from [spoofing](https://www.cloudflare.com/learning/ssl/what-is-domain-spoofing/), stopping [phishing attacks](https://www.cloudflare.com/learning/access-management/phishing-attack/), preventing fraud, blocking [malware](https://www.cloudflare.com/learning/ddos/glossary/malware/) delivery, and filtering [spam](https://www.cloudflare.com/learning/email-security/how-to-stop-spam-emails/).\n\n</page>\n\n<page>\n---\ntitle: Deploy via Microsoft Graph API  Cloudflare Learning Paths\ndescription: An API deployment model with Email security has multiple benefits\n  for Microsoft 365 Customers.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/email-security-onboarding/api-deployment/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/email-security-onboarding/api-deployment/index.md\n---\n\nAn API deployment model with Email security has multiple benefits for Microsoft 365 Customers.\n\nThe API deployment with Email security offers:\n\n* Easy protection for complex email architectures, without requiring any change to mail flow operations.\n* Agentless deployment for Microsoft 365.\n* Office 365 directory integration to retrieve user and group information and prevent user impersonation.\n\n![Microsoft 365 API deployment diagram](https://developers.cloudflare.com/_astro/ms365-api-deployment.1XiiRyde_ZkHHdj.webp)\n\n</page>\n\n<page>\n---\ntitle: Next steps  Cloudflare Learning Paths\ndescription: \"Now that you have learned how Email security can protect your\n  inbox from phishing attacks, refer to the following resources to onboard and\n  enhance your email security posture:\"\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/email-security-onboarding/email-security-next-steps/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/email-security-onboarding/email-security-next-steps/index.md\n---\n\nNow that you have learned how Email security can protect your inbox from phishing attacks, refer to the following resources to onboard and enhance your email security posture:\n\n| Resource | Description |\n| - | - |\n| [Phish submissions](https://developers.cloudflare.com/cloudflare-one/email-security/settings/phish-submissions/) | As part of your continuous email security posture, administrators and security analysts need to submit missed phish samples so Cloudflare can process them and take necessary action. |\n| [API integration](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/api/) | Onboard your domain via API deployment. |\n| [Impersonation registry](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/impersonation-registry/) | The impersonation registry contains combinations of emails of users who are likely to be impersonated. |\n| [Trusted domains](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/trusted-domains/) | Trusted domains allows you to identify domains that should be exempted from Email security detections. |\n| [Allow policies](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/allow-policies/) | Allow policies exempt messages that match certain patterns from normal detection scanning. |\n| [Blocked senders](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/blocked-senders/) | Blocked senders can mark all messages from specific senders with a `MALICIOUS` disposition. |\n| [PhishGuard](https://developers.cloudflare.com/cloudflare-one/email-security/phishguard/) | PhishGuard is a managed email security service that provides resources for end-to-end phish and targeted attack management and response. |\n\n</page>\n\n<page>\n---\ntitle: Block pages  Cloudflare Learning Paths\ndescription: For DNS policies, you will need to enable the block page on a per-policy basis.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-block-pages/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-block-pages/index.md\n---\n\n## Enable the block page for DNS policies\n\nFor DNS policies, you will need to enable the block page on a per-policy basis.\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Traffic policies** > **Firewall policies** > **DNS**.\n\n2. Select **Add a policy** to create a new policy, or choose the policy you want to customize and select **Edit**. You can only edit the block page for policies with a Block action.\n\n3. Under **Configure policy settings**, turn on **Modify Gateway block behavior**.\n\n4. Choose your block behavior:\n\n   * **Use account-level block setting**: Use the global block page setting configured in your account settings. The global setting can be the default Gateway block page, an [HTTP redirect](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#redirect-to-a-block-page), or a [custom Gateway block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#customize-the-block-page).\n   * **Override account setting with URL redirect**: Redirect users with a `307` HTTP redirect to a URL you specify on a policy level.\n\n5. (Optional) If your account-level block page setting uses a custom Gateway block page, you can turn on **Add an additional message to your custom block page when traffic matches this policy** to add a custom message to your custom block page when traffic is blocked by this policy. This option will replace the **Message** field.\n\n6. Select **Save policy**.\n\nDepending on your settings, Gateway will display a block page in your users' browsers or redirect them to a specified URL when they are blocked by this policy.\n\n## Customize the block page\n\nYou can customize the Cloudflare-hosted block page by making global changes that Gateway will display every time a user reaches your block page. Customizations will apply regardless of the type of policy (DNS or HTTP) that blocks the traffic.\n\nTo customize your block page:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Reusable components** > **Custom pages**.\n\n  2. Under **Account Gateway block page**, select **Customize**.\n\n  3. Choose **Custom Gateway block page**. Gateway will display a preview of your custom block page. Available customizations include:\n\n     * Your organization's name\n     * [Logo](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#add-a-logo-image)\n     * Header text\n     * Global block message, which will be displayed above the policy-specific block message\n     * [Mailto link](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#allow-users-to-email-an-administrator)\n     * Background color\n\n  4. Select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. In [`cloudflare_zero_trust_gateway_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_settings), configure the `block_page` argument with your customizations:",
      "language": "unknown"
    },
    {
      "code": "Gateway will now display a custom Gateway block page when your users visit a blocked website.\n\n### Add a logo image\n\nYou can include an external logo image to display on your custom block page. The block page resizes all images to 146x146 pixels. The URL must be valid and no longer than 2048 characters. Accepted file types include SVG, PNG, JPEG, and GIF.\n\n</page>\n\n<page>\n---\ntitle: Gateway connection methods  Cloudflare Learning Paths\ndescription: There are various methods to onboard your traffic and your method\n  will be determined based on your individual or organizational requirements. In\n  this learning path, we will focus on an Agentless (DNS only) deployment\n  method.\nlastUpdated: 2025-11-21T18:29:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-connection-methods/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-connection-methods/index.md\n---\n\nThere are various methods to onboard your traffic and your method will be determined based on your individual or organizational requirements. In this learning path, we will focus on an [**Agentless (DNS only) deployment method**](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/).\n\nProtecting more than DNS, such as network packets, HTTP requests, or egress traffic is possible, but requires a more advanced deployment method such as [WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/) or [Magic WAN](https://developers.cloudflare.com/magic-wan/zero-trust/cloudflare-gateway/).\n\n</page>\n\n<page>\n---\ntitle: Create CIPA policy  Cloudflare Learning Paths\ndescription: Your environment is now protected against all of the subcategories\n  listed in Configuration.\nlastUpdated: 2025-08-11T19:12:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-create-cipa-policy/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-create-cipa-policy/index.md\n---\n\n## Create CIPA policy\n\n1. Go to **Gateway** > **Firewall policies**.\n\n2. Create a policy to block using the CIPA filter:\n\n   | Selector | Operator | Value | Action |\n   | - | - | - | - |\n   | Content Categories | in | *CIPA Filter* | Block |\n\n3. In **Logs** > **Gateway** > **DNS**, verify that you see the blocked domain.\n\nYour environment is now protected against all of the subcategories listed in [Configuration](https://developers.cloudflare.com/fundamentals/reference/policies-compliances/cybersafe/#configuration).\n\n</page>\n\n<page>\n---\ntitle: Create a test policy  Cloudflare Learning Paths\ndescription: To ensure a smooth deployment, we recommend testing a simple policy\n  before deploying DNS filtering to your organization.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-create-test-policy/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-create-test-policy/index.md\n---\n\nTo ensure a smooth deployment, we recommend testing a simple policy before deploying DNS filtering to your organization.\n\n## Test a policy in the browser\n\n1. Go to **Gateway** > **Firewall policies**.\n\n2. Create a policy to block all security categories:\n\n   | Selector | Operator | Value | Action |\n   | - | - | - | - |\n   | Security Categories | in | *All security risks* | Block |\n\n3. In the browser, go to `malware.testcategory.com`. You should see a generic Gateway block page.\n\n4. In **Logs** > **Gateway** > **DNS**, verify that you see the blocked domain.\n\nNote\n\nWhen testing against frequently-visited sites, you may need to [clear the DNS cache](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/test-dns-filtering/#clear-dns-cache) in your browser or OS. Otherwise, the DNS lookup will return the locally-cached IP address and bypass your DNS policies.\n\nYou have now validated DNS filtering!\n\n</page>\n\n<page>\n---\ntitle: Gateway locations  Cloudflare Learning Paths\ndescription: DNS locations are a collection of DNS endpoints which can be mapped\n  to physical entities such as offices, homes, or data centers.\nlastUpdated: 2024-10-23T15:53:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-locations/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-locations/index.md\n---\n\nDNS locations are a collection of DNS endpoints which can be mapped to physical entities such as offices, homes, or data centers.\n\nThe fastest way to start filtering DNS queries from a location is by changing the DNS resolvers at the router.\n\n## Add a DNS location\n\nTo add a DNS location to Gateway:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Networks** > **Resolvers & Proxies** > **DNS locations**.\n\n2. Select **Add a location**.\n\n3. Choose a name for your DNS location.\n\n4. Choose at least one [DNS endpoint](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/locations/#dns-endpoints) to resolve your organization's DNS queries.\n\n5. (Optional) Toggle the following settings:\n\n   * **Enable EDNS client subnet** sends a user's IP geolocation to authoritative DNS nameservers. [EDNS Client Subnet (ECS)](https://developers.cloudflare.com/cloudflare-one/glossary/?term=ecs) helps reduce latency by routing the user to the closest origin server. Cloudflare enables EDNS in a privacy preserving way by not sending the user's exact IP address but rather the first `/24` range of the larger range that contains their IP address. This `/24` range will share the same geographic location as the user's exact IP address.\n   * **Set as Default DNS Location** sets this location as the default DoH endpoint for DNS queries.\n\n6. Select **Continue**.\n\n7. (Optional) Turn on source IP filtering for your configured endpoints, then add any source IPv4/IPv6 addresses to validate.\n\n   * Endpoint authentication is required for standard IPv4 addresses and optional for dedicated IPv4 addresses.\n   * **DoH endpoint filtering & authentication** lets you restrict DNS resolution to only valid identities or user tokens in addition to IPv4/IPv6 addresses.\n\n8. Select **Continue**.\n\n9. Review the settings for your DNS location, then choose **Done**.\n\nCaptive portal limitation\n\nDeploying Gateway DNS filtering using static IP addresses may prevent users from connecting to public Wi-Fi networks through captive portals. If users are experiencing connectivity issues related to captive portals, they should:\n\n1. Remove the static IP addresses from the device.\n2. Connect to the Wi-Fi network.\n3. Once the connection has been established, add the static IP addresses back.\n\nTo avoid this issue, use the [WARP client](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/) to connect your devices to Cloudflare One.\n\n</page>\n\n<page>\n---\ntitle: Update local DNS resolver  Cloudflare Learning Paths\ndescription: With a Gateway location created, you have the ability to send\n  traffic to your environment. You can test without risk by changing your DNS\n  resolvers in your browser or network settings.\nlastUpdated: 2025-11-21T18:29:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-update-local-resolver/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-update-local-resolver/index.md\n---\n\nWith a Gateway location created, you have the ability to send traffic to your environment. You can test without risk by changing your DNS resolvers in your browser or network settings.\n\n## Change DNS resolver at the network level\n\nTo configure your device to send traffic to Gateway:\n\nmacOS\n\n![macOS DNS Resolver Options](https://developers.cloudflare.com/_astro/dns-resolvers-macosx.B1GnFXfW_Z1JRXTp.webp)\n\nWindows\n\n![Windows DNS Resolver Options](https://developers.cloudflare.com/_astro/dns-resolvers-windows.3Ns9LR4f_Z2fwiWX.webp)\n\nLinux",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "iPhone\n\n![iPhone DNS Resolver Options](https://developers.cloudflare.com/_astro/dns-resolvers-iphone.BNl5oq1v_Z2vwM4y.webp)\n\nAndroid\n\n![Android DNS Resolver Options](https://developers.cloudflare.com/_astro/dns-resolvers-android.JkoCH2BP_yhTku.webp)\n\n## Change DNS resolver in the browser\n\nTo configure your browser to send traffic to Gateway:\n\n1. Obtain your DNS over HTTPS (DoH) address:\n\n   1. Go to **Gateway** > **DNS locations**.\n   2. Select the default location.\n   3. Copy your **DNS over HTTPS** hostname: `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`\n\n2. Follow the configuration instructions for your browser:\n\n   Mozilla Firefox\n\n   1. In Firefox, go to **Settings**.\n   2. In **Privacy & Security**, go to **DNS over HTTPS**.\n   3. Under **Enable secure DNS using**, select *Max Protection*.\n   4. In **Choose provider**, choose *Custom*.\n   5. In the field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Firefox is now configured to use your DoH endpoint. For more information on configuring DoH settings in Firefox, refer to [Mozilla's documentation](https://support.mozilla.org/kb/dns-over-https).\n\n   Note\n\n   If you want to enforce DNS policies through WARP instead of over DoH, you can disable DoH for your organization by blocking the [Firefox DoH canary domain](https://support.mozilla.org/kb/canary-domain-use-application-dnsnet).\n\n   Google Chrome\n\n   1. In Chrome, go to **Settings** > **Privacy and security** > **Security**.\n   2. Scroll down and turn on **Use secure DNS**.\n   3. Select **With Custom**.\n   4. In the **Enter custom provider** field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Read more about [enabling DNS over HTTPS](https://www.chromium.org/developers/dns-over-https) on Chrome.\n\n   Microsoft Edge\n\n   1. In Microsoft Edge, go to **Settings**.\n   2. Select **Privacy, Search, and Services**, and scroll down to **Security**.\n   3. Turn on **Use secure DNS**.\n   4. Select **Choose a service provider**.\n   5. In the **Enter custom provider** field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Brave\n\n   1. In Brave, go to **Settings** > **Security and Privacy** > **Security**.\n   2. Turn on **Use secure DNS**.\n   3. Select **With Custom**.\n   4. In the **Enter custom provider** field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Safari\n\n   Currently, Safari does not support DNS over HTTPS.\n\n3. Verify that third-party firewall or TLS decryption software does not inspect or block traffic to the DoH endpoint: `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n## More locations\n\nTo configure your router or OS, or to add additional DNS endpoints, refer to [DNS locations](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/locations/).\n\n</page>\n\n<page>\n---\ntitle: Verify local connectivity  Cloudflare Learning Paths\ndescription: \"To verify that your DNS traffic is sent to Gateway:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-verify-local-connectivity/\n  md: https://developers.cloudflare.com/learning-paths/cybersafe/gateway-onboarding/gateway-verify-local-connectivity/index.md\n---\n\nTo verify that your DNS traffic is sent to Gateway:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Traffic policies** > **Traffic settings**.\n2. Under **Log traffic activity**, enable activity logging for all DNS logs.\n3. On your device, open a browser and go to any website.\n4. In Cloudflare One, go to **Insights** > **Logs** > **DNS**.\n5. Make sure DNS queries from your device appear.\n\n</page>\n\n<page>\n---\ntitle: Best practices  Cloudflare Learning Paths\ndescription: Learn best practices for building scalable Access applications and policies.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/access-application/best-practices/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/access-application/best-practices/index.md\n---\n\nLearn best practices for building scalable Access applications and policies.\n\n## Create reusable policy components\n\nIf you have many policies that contain duplicate rules, we recommend [building a rule group](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/groups/) and referencing it across multiple policies. For example, you could define a rule group for \"corporate users\", which has both device posture check requirements and specific emails, or just developers, which references a group in your identity provider.\n\n## Define your domain structure\n\nAccess applications have an inherently flexible and powerful domain structure capability. Your domain structure should achieve your application security goals without being overly permissive or overly restrictive. Before designing applications for production, review the [Application paths documentation](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/app-paths/) to understand how path definitions work and how to use wildcards.\n\n### Multiple domains in an application\n\nMany customers who have workflows designed around internal web applications, especially those that were built internally, often see challenges related to interdependencies on multiple internal services. Separately, there can be challenges related to SPAs (Single-Page Applications) that make deploying clientless access difficult. For example, an application may have iFrames or other embedded systems that rely on different internal and/or external addresses.\n\nIf your internal service operates in this way, we recommend specifying multiple top-level domains in a single Access application. Otherwise, if the goal of using multiple domains is to streamline or simplify policy creation, we recommend making one primary domain per application, and automating the rest of your deployment [using Terraform](https://developers.cloudflare.com/learning-paths/clientless-access/terraform/) or another Infrastructure as Code (IaC) service.\n\n</page>\n\n<page>\n---\ntitle: Create an Access application  Cloudflare Learning Paths\ndescription: Cloudflare Access allows you to securely publish internal tools and\n  applications to the Internet by providing an authentication layer between the\n  end user and your origin server. You can use signals from your existing\n  identity providers (IdPs), device posture providers, and other rules to\n  control who can access your application.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/access-application/create-access-app/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/access-application/create-access-app/index.md\n---\n\nCloudflare Access allows you to securely publish internal tools and applications to the Internet by providing an authentication layer between the end user and your origin server. You can use signals from your existing identity providers (IdPs), device posture providers, and [other rules](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/#selectors) to control who can access your application.\n\nEach application can have multiple policies with different constraints depending on what user group is accessing the application. For example, you can create one policy that requires corporate users to present specific device posture checks or mutual TLS authentication events, and a second policy for contractors which does not require these attributes.\n\n## Add your application to Access\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application**.\n\n3. Select **Self-hosted**.\n\n4. Enter any name for the application.\n\n5. In **Session Duration**, choose how often the user's [application token](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/application-token/) should expire.\n\n   Cloudflare checks every HTTP request to your application for a valid application token. If the user's application token (and global token) has expired, they will be prompted to reauthenticate with the IdP. For more information, refer to [Session management](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/session-management/).\n\n1) Select **Add public hostname**.\n\n2) In the **Domain** dropdown, select the domain that will represent the application. Domains must belong to an active zone in your Cloudflare account. You can use [wildcards](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/app-paths/) to protect multiple parts of an application that share a root path.\n\n   Alternatively, to use a [Cloudflare for SaaS custom hostname](https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/security/secure-with-access/), set **Input method** to *Custom* and enter your custom hostname.\n\n3) (Optional) Configure **Browser rendering settings**:\n\n   * [Automatic `cloudflared` authentication](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/cloudflared-authentication/automatic-cloudflared-authentication/)\n   * [Browser rendering for SSH, VNC, or RDP](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/non-http/browser-rendering/)\n\n4) Add [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to control who can connect to your application. All Access applications are deny by default -- a user must match an Allow policy before they are granted access.\n\n5) Configure how users will authenticate:\n\n   1. Select the [**Identity providers**](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) you want to enable for your application.\n\n   2. (Recommended) If you plan to only allow access via a single IdP, turn on **Instant Auth**. End users will not be shown the [Cloudflare Access login page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-login-page/). Instead, Cloudflare will redirect users directly to your SSO login event.\n\n   3. (Optional) Under **WARP authentication identity**, allow users to authenticate to the application using their [WARP session identity](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-sessions/).\n\n6) Select **Next**.\n\n7) (Optional) Configure [App Launcher settings](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) for the application.\n\n8) Under **Block page**, choose what end users will see when they are denied access to the application:\n\n   * **Cloudflare default**: Reload the [login page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-login-page/) and display a block message below the Cloudflare Access logo. The default message is `That account does not have access`, or you can enter a custom message.\n   * **Redirect URL**: Redirect to the specified website.\n   * **Custom page template**: Display a [custom block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/) hosted in Cloudflare One.\n\n9) Select **Next**.\n\n10) (Optional) Configure advanced settings:\n\n    * [**Cross-Origin Resource Sharing (CORS) settings**](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/cors/)\n    * [**Cookie settings**](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/#cookie-settings)\n    * **401 Response for Service Auth policies**: Return a `401` response code when a user (or machine) makes a request to the application without the correct [service token](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/).\n\n11) Select **Save**.\n\nWhen users go to the application, they will be prompted to login with your identity provider.\n\n</page>\n\n<page>\n---\ntitle: External Evaluation rules  Cloudflare Learning Paths\ndescription: \"With Cloudflare Access, you can build infinitely customizable\n  policies using External Evaluation rules. External Evaluation rules allow you\n  to call any API during the evaluation of an Access policy and authenticate\n  users based on custom business logic. Example use cases include:\"\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/advanced-workflows/external-evaluation/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/advanced-workflows/external-evaluation/index.md\n---\n\nWith Cloudflare Access, you can build infinitely customizable policies using External Evaluation rules. External Evaluation rules allow you to call any API during the evaluation of an Access policy and authenticate users based on custom business logic. Example use cases include:\n\n* Customize policies based on time of day.\n* Check IP addresses against external threat feeds.\n* Call industry-specific user registries.\n\nThe External Evaluation rule requires two values: an API endpoint to call and a key to verify that any request response is coming from a trusted source. After the user authenticates with your identity provider, all information about the user, device and location is passed to your external API. The API returns a pass or fail response to Access which will then either allow or deny access to the user.\n\n## Set up External Evaluation rule\n\nFor detailed setup instructions, refer to [External Evaluation rules](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/external-evaluation/).\n\nExample code for the API is available in our [open-source repository](https://github.com/cloudflare/workers-access-external-auth-example).\n\n</page>\n\n<page>\n---\ntitle: Isolate Access applications  Cloudflare Learning Paths\ndescription: Cloudflare Browser Isolation integrates with your web-delivered\n  Access applications to protect sensitive applications from data loss. You can\n  build Access policies that require certain users to access your application\n  exclusively through Browser Isolation, while other users matching different\n  policies continue to access the application directly. For example, you may\n  wish to layer on additional security measures for third-party contractors or\n  other users without a corporate device.\nlastUpdated: 2025-10-23T22:25:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/advanced-workflows/isolate-application/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/advanced-workflows/isolate-application/index.md\n---\n\nNote\n\nRequires the Browser Isolation add-on.\n\n[Cloudflare Browser Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/) integrates with your web-delivered Access applications to protect sensitive applications from data loss. You can build Access policies that require certain users to access your application exclusively through Browser Isolation, while other users matching different policies continue to access the application directly. For example, you may wish to layer on additional security measures for third-party contractors or other users without a corporate device.\n\nCloudflare sends all isolated traffic through our Secure Web Gateway inspection engine, which allows you to apply [Gateway HTTP policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/) such as:\n\n* Restrict specific actions and HTTP request methods.\n* Inspect the request body to match against [Data Loss Prevention](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/) (DLP) profiles with as much specificity and control as if the user had deployed an endpoint agent.\n* Control users ability to cut and paste, upload and download files, or print while in an isolated session.\n\n## Prerequisites\n\nYour browser must [allow third-party cookies](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/#allow-third-party-cookies-in-the-browser) on the application domain.\n\n## Enable Browser Isolation\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Browser isolation** > **Browser isolation settings**.\n2. Under **Manage remote browser permissions**, select **Manage**.\n3. Enable **Clientless Web Isolation**.\n\n1) Go to **Access controls** > **Applications**.\n2) Choose a [self-hosted application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/) and select **Configure**.\n3) Go to **Policies**.\n4) Choose an [Allow policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) and select **Configure**.\n5) Under **Additional settings**, turn on **Isolate application**.\n6) Save the policy.\n\nBrowser Isolation is now enabled for users who match this policy. After the user logs into Access, the application will launch in a remote browser. To confirm that the application is isolated, refer to [Check if a web page is isolated](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/setup/#3-check-if-a-web-page-is-isolated).\n\nYou can optionally add another Allow policy for users on managed devices who do not require isolation.\n\n## Example Access policies\n\nIn the following example, Policy 1 allows employees on corporate devices to access the application directly. Users who do not match Policy 1, such as employees and contractors on unmanaged devices, will load the application in an isolated browser.",
      "language": "unknown"
    },
    {
      "code": "**Policy 1: Allow employees who pass device posture checks**\n\n* Dashboard\n\n  | Action | Rule type | Selector | Value |\n  | - | - | - | - |\n  | Allow | Include | Emails ending in | `@team.com` |\n  | | Require | [Device Posture - Serial Number List](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/corp-device/) | `Corporate serial numbers` |\n\n  | Additional settings | Status |\n  | - | - |\n  | Isolate application | Disabled |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "To create a list of serial numbers, refer to [Create Zero Trust list](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/lists/methods/create/).\n\n**Policy 2: Allow and isolate contractors**\n\n* Dashboard\n\n  | Action | Rule type | Selector | Value |\n  | - | - | - | - |\n  | Allow | Include | Emails ending in | `@team.com`, `@contractors.com` |\n\n  | Additional settings | Status |\n  | - | - |\n  | Isolate application | Enabled |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "## Example HTTP policies\n\n### Disable file downloads in isolated browser\n\nPrevents users on unmanaged devices from downloading any files from your private application.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Host | in | `internal.site.com` | And | Isolate |\n  | Passed Device Posture Checks | not in | `Corporate serial numbers` | | |\n\n  | Policy settings | Status |\n  | - | - |\n  | Disable file downloads | Enabled |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "To create a list of serial numbers, refer to [Create Zero Trust list](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/lists/methods/create/).\n\n### Block file downloads of sensitive data\n\nNote\n\nRequires Data Loss Prevention add-on.\n\nBlock users on unmanaged devices from downloading files that contain credit card numbers. This logic requires two policies:\n\n* **Policy 1: [Disable file downloads in isolated browser](https://developers.cloudflare.com/learning-paths/clientless-access/advanced-workflows/isolate-application/#disable-file-downloads-in-isolated-browser)**\n\n* **Policy 2: Block credit card numbers**\n\n- Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Host | in | `internal.site.com` | And | Block |\n  | [DLP Profile](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/) | in | *Financial Information* | And | |\n  | Passed Device Posture Checks | not in | *Corporate serial numbers* | | |\n\n- API",
      "language": "unknown"
    },
    {
      "code": "To configure a DLP profile, refer to [Update predefined profile](https://developers.cloudflare.com/api/resources/zero_trust/subresources/dlp/subresources/profiles/subresources/predefined/methods/update/) or [Create custom profile](https://developers.cloudflare.com/api/resources/zero_trust/subresources/dlp/subresources/profiles/subresources/custom/methods/create/).\n\n</page>\n\n<page>\n---\ntitle: Clientless Web Isolation  Cloudflare Learning Paths\ndescription: \"Clientless Web Isolation allows you to on-ramp user traffic to\n  your private network without needing to install the WARP client. Users access\n  private applications by going to a prefixed URL:\"\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/alternative-onramps/clientless-rbi/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/alternative-onramps/clientless-rbi/index.md\n---\n\nNote\n\nRequires the Browser Isolation add-on.\n\n[Clientless Web Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/setup/clientless-browser-isolation/) allows you to on-ramp user traffic to your private network without needing to install the WARP client. Users access private applications by going to a prefixed URL:\n\n`https://<your-team-name>.cloudflareaccess.com/browser/<URL>`\n\nAfter the user authenticates to your IdP, Cloudflare will load the application in a secure remote browser and apply your Gateway firewall policies to user traffic.\n\n## Setup\n\nTo configure Clientless Web Isolation to augment clientless access, refer to [this tutorial](https://developers.cloudflare.com/cloudflare-one/tutorials/clientless-access-private-dns/).\n\n## Best practices\n\n* For guidance on building Gateway policies for private network applications, refer to [Secure your first application](https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/create-policy/).\n* If you already deployed the WARP client to some devices as part of a mixed-access methodology, ensure that your Gateway firewall policies do not rely on device posture checks. Because Clientless Web Isolation is not a machine in your fleet, it will not return any values for device posture checks.\n* You can standardize the user experience by making specific applications available in your App Launcher as [bookmarks](https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/bookmarks/). In this case, you would create a new bookmark for `https://<team-name>.cloudflareaccess.com/browser/https://internalresource.com`, which would take users directly to an isolated session with your application.\n\n</page>\n\n<page>\n---\ntitle: What is clientless access?  Cloudflare Learning Paths\ndescription: Clientless access is a deployment option of a Zero Trust Network\n  Access (ZTNA) service that provides secure access to internal applications\n  without requiring end users to install any software. Users access corporate\n  resources like intranet web apps, SSH terminals, and Windows servers through\n  RDP from their web browser. Clientless access is commonly used to provide\n  internal, least-privilege access to users on unmanaged devices. Users may\n  include third-party contractors, suppliers, and partners, or employees using\n  personal mobile phones as part of an organization's bring-your-own-device\n  (BYOD) policy.\nlastUpdated: 2025-04-10T21:16:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/concepts/what-is-clientless-access/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/concepts/what-is-clientless-access/index.md\n---\n\nClientless access is a deployment option of a [Zero Trust Network Access (ZTNA)](https://www.cloudflare.com/learning/access-management/what-is-ztna/) service that provides secure access to internal applications without requiring end users to install any software. Users access corporate resources like intranet web apps, SSH terminals, and Windows servers through RDP from their web browser. Clientless access is commonly used to provide internal, [least-privilege access](https://www.cloudflare.com/learning/access-management/principle-of-least-privilege/) to users on unmanaged devices. Users may include third-party contractors, suppliers, and partners, or employees using personal mobile phones as part of an organization's bring-your-own-device (BYOD) policy.\n\nIT/security admins can decide how users authenticate, whether through their corporate identity provider, social media accounts, a PIN sent to their email, strong MFA, or a combination of options. Admins can also add inline services like Remote Browser Isolation (RBI) and Data Loss Prevention (DLP) to help prevent data exfiltration from unmanaged devices, still through a clientless implementation. Isolated apps can enforce broad data controls through the browser, such as preventing uploads/downloads or copy/paste, or incorporating DLP policies.\n\n## Alternatives to clientless access\n\n### Device client\n\nA device client enables additional capabilities for a ZTNA deployment, like adding full device posture checks to policy evaluations or providing access to private network resources on private hostnames. However, when extending access to third-party or temporary workers, some organizations are reluctant to buy and ship company-managed devices or onboard clients to users' personal devices. Some IT or security teams may have rigorous device compatibility, interoperability, or other software audit processes that could delay user onboarding for a ZTNA rollout. Contractors may also not allow external company software to be installed on their personal devices, whether a legacy VPN or a more modern software client.\n\n### Identity provider workarounds\n\nSome organizations historically have created corporate identities for third-party users within their internal identity provider, or they have spent the time to integrate a third-party's external identity provider with their own. Time and complexity for this work aside, not all resources integrate directly with traditional identity and access management (IAM) products, so a tool like ZTNA can still be needed to aggregate access logistics more broadly across an organization's internal resources.\n\n### Enterprise browsers\n\nEnterprise browsers are another tool sparking interest in the industry for hybrid work and internal access use cases. They aim to consolidate security features and provide similar unified access and data protection to resources, all through a managed browser. However, some users may not want to disrupt their preferred workflows through their existing browser(s), and some third parties may still not wish to install any external software including the managed browser.\n\n## Why Cloudflare for clientless access\n\nOne of the biggest challenges in delivering clientless, secure remote access is making it feel native for your end users. Solutions have existed for decades which operate in a way that breaks TLS on a firewall or creates a picture-in-a-picture to access an internal web service. These legacy solutions make it very difficult to apply traditional web security concepts to private apps.\n\nIn contrast, Cloudflare is a leading [reverse proxy](https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/) provider for public-facing web assets, proxying approximately [20% of all websites](https://w3techs.com/technologies/overview/proxy). Together with our [SASE platform](https://developers.cloudflare.com/reference-architecture/architectures/sase/), this establishes a unique position for Cloudflare to deliver performant browser-based security for both public and private resources. There is no additional overhead in implementation, management, ongoing updates, or routing.\n\nClientless access accelerates user onboarding for your admins, and it makes private apps feel just like SaaS apps for your end users. Many organizations roll out clientless access use cases toward the start of their larger SASE architecture journey as a quick win to develop momentum for a longer [VPN replacement](https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/) project or security modernization initiative.\n\n</page>\n\n<page>\n---\ntitle: App Launcher  Cloudflare Learning Paths\ndescription: With the Access App Launcher, users can open all applications that\n  they have access to from a single dashboard.\nlastUpdated: 2025-04-10T21:16:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/app-launcher/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/app-launcher/index.md\n---\n\nWith the Access App Launcher, users can open all applications that they have access to from a single dashboard.\n\nThe App Launcher is available at a team domain unique to your Cloudflare Zero Trust account, for example `mycompany.cloudflareaccess.com`.\n\nUsers log in using one of the identity providers configured for the account. Once Access authenticates the user, the App Launcher displays applications they are authorized to use, in the form of application tiles. Selecting an application tile launches the application's hostname, sending the user to that tool as part of their SSO flow.\n\n![App Launcher portal](https://developers.cloudflare.com/_astro/app-launcher.BA8TF5r4_Z1EpRVo.webp)\n\n## Enable the App Launcher\n\nBy default, the App Launcher is disabled. To enable it, you must configure a policy that defines which users can access the App Launcher.\n\nTo enable the App Launcher:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Access settings**.\n\n2. Under the **Manage your App Launcher** card, select **Manage**.\n\n3. On the **Policies** tab, [build a policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to define who can access your App Launcher portal. These rules do not impact permissions for the applications secured behind Access.\n\n4. On the **Authentication** tab, choose the identity providers users can authenticate with.\n\n5. Select **Save**.\n\nThe App Launcher is now available at `<your-team-name>.cloudflareaccess.com`. You can always edit your App Launcher rules by going to **Access controls** > **Access settings**.\n\n## Add a tile to the App Launcher\n\nTiles have a one-to-one relationship with each application you create in Access. The tile names displayed in the Access App Launcher portal correspond to the application names listed under **Access controls** > **Applications**. For example, if you create one application for general access to your Jira deployment and a separate application that restricts requests to a particular Jira path, a user authorized for both will see separate tiles for each. If you add multiple hostnames to a single application, the user will only see the domain selected in the application's **App Launcher** settings.\n\nTo show an Access application in the App Launcher:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Access controls** > **Applications**.\n\n2. Select an application and select **Configure**.\n\n3. Go to **Experience settings**.\n\n4. Select **Show application in App Launcher**. The App Launcher link will only appear for users who are allowed by your Access policies. Blocked users will not see the app in their App Launcher.\n\n   Note\n\n   This toggle does not impact the user's ability to reach the application. Allowed users can always reach the application via a direct link, regardless of whether the toggle is enabled. Blocked users will never have access to the application.\n\n5. (Optional) To use a custom logo for the application tile, select **Use custom logo** and enter a link to your desired image.\n\n   Note\n\n   If you are having issues specifying a custom logo, check that the image is served from an HTTPS endpoint. For example, `http://www.example.com/upload/logo.png` will not work. However, `https://www.example.com/upload/logo.png` will.\n\n6. In **Application domains**, choose a domain to use for the App Launcher link.\n\n7. (Optional) In **Tags**, add [custom tags](https://developers.cloudflare.com/cloudflare-one/reusable-components/tags/) so that users can more easily find the application in their App Launcher.\n\n## Customize App Launcher appearance\n\nTo customize the App Launcher with your own branding, messages, and links, refer to the [Custom pages documentation](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/app-launcher-customization/).\n\n</page>\n\n<page>\n---\ntitle: Block page  Cloudflare Learning Paths\ndescription: You can customize the block page that displays when users fail to\n  authenticate to an Access application. Each application can have a different\n  block page.\nlastUpdated: 2025-04-10T21:16:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/block-page/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/block-page/index.md\n---\n\nYou can customize the block page that displays when users fail to authenticate to an Access application. Each application can have a different block page.\n\nGateway block page\n\nTo customize the page that users see when they are blocked by a Gateway firewall policy, refer to [Gateway block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/).\n\n## Types of block pages\n\nCloudflare Access offers three different block page options:\n\n* **Default**: Displays a Cloudflare branded block page.\n* **Custom Redirect URL** - Redirects blocked requests to the specified URL. For example, you could redirect the user to a [dynamic Access Denied page](https://github.com/cloudflare/cf-identity-dynamic) that fetches their identity and shows the exact reason they were blocked.\n* **Custom Page Template** - (Only available on Pay-as-you-go and Enterprise plans) Displays a [custom HTML page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/#create-a-custom-block-page) hosted by Cloudflare.\n\n### Identity versus non-identity\n\nYou can display a different [type of block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/#types-of-block-pages) to users who fail an identity-based policy versus a non-identity policy.\n\n* **Identity failure block page**: Displays when the user is blocked by an identity-based Access policy (such as email, user group, or external evaluation rule), after logging in to their identity provider.\n* **Non-identity failure block page**: Displays when the user is blocked by a non-identity Access policy (such as country, IP, or device posture). Cloudflare checks non-identity attributes before prompting the user to login.\n\n## Create a custom block page\n\nNote\n\nOnly available on Pay-as-you-go and Enterprise plans.\n\nTo create a custom block page for Access:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Reusable components** > **Custom pages**.\n\n2. Find the **Access Custom Pages** setting and select **Manage**.\n\n3. Select **Add a page template**.\n\n4. Enter a unique name for the block page.\n\n5. In **Type**, select whether this is an [identity or non-identity block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/#identity-versus-non-identity).\n\n6. In **Custom HTML**, enter the HTML code for your custom page. For example,",
      "language": "unknown"
    },
    {
      "code": "7. To check the appearance of your custom page, select **Download** and open the HTML file in a browser.\n\n8. Once you are satisfied with your custom page, select **Save**.\n\nYou can now select this block page when you [configure an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/).\n\n</page>\n\n<page>\n---\ntitle: Bookmarks  Cloudflare Learning Paths\ndescription: With Cloudflare One, you can show applications on the App Launcher\n  even if those applications are not secured behind Access. This way, users can\n  access all the applications they need to work, all in one place  regardless\n  of whether those applications are protected by Access.\nlastUpdated: 2025-04-10T21:16:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/bookmarks/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/bookmarks/index.md\n---\n\nWith Cloudflare One, you can show applications on the [App Launcher](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) even if those applications are not secured behind Access. This way, users can access all the applications they need to work, all in one place  regardless of whether those applications are protected by Access.\n\nLinks to applications not protected by Access can be added as bookmarks. To add a bookmark:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Access controls** > **Applications**.\n\n2. Select **Add an application** > **Bookmark**.\n\n3. Name your application.\n\n4. Enter your **Application URL**, for example `https://mybookmark.com`.\n\n5. Turn on **App Launcher visibility** if you want the application to be visible in the App Launcher. The toggle does not impact the ability for users to reach the application.\n\n6. (Optional) To add a custom logo for your application, select **Custom** and enter the image URL.\n\n   Note\n\n   If you are having issues specifying a custom logo, check that the image is served from an HTTPS endpoint. For example, `http://www.example.com/upload/logo.png` will not work. However, `https://www.example.com/upload/logo.png` will.\n\n7. Select **Add application** to save and exit.\n\nThe application will show up on the Applications page labeled as `BOOKMARK`. You can always edit or delete your bookmarks, as you would any other application.\n\n</page>\n\n<page>\n---\ntitle: Login page  Cloudflare Learning Paths\ndescription: The Access login page is where users select their identity provider\n  (IdP) or One-Time PIN prior to accessing the application. Customers who only\n  use one IdP usually enable Instant Auth for their applications, which\n  redirects end users directly to the SSO login page. If you are using multiple\n  IdPs, we recommend customizing the Access login page to match your branding\n  and minimize user confusion.\nlastUpdated: 2025-04-10T21:16:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/login-page/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/login-page/index.md\n---\n\nThe Access login page is where users select their identity provider (IdP) or One-Time PIN prior to accessing the application. Customers who only use one IdP usually enable **Instant Auth** for their applications, which redirects end users directly to the SSO login page. If you are using multiple IdPs, we recommend customizing the Access login page to match your branding and minimize user confusion.\n\n## Customize the login page\n\nTo change the appearance of your login page:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Reusable components** > **Custom pages**.\n\n2. Find the **Access login page** setting and select **Manage**.\n\n3. Give the login page the look and feel of your organization by adding:\n\n   * Your organization's name\n   * A logo\n   * A custom header and footer\n   * A preferred background color\n\n   Any changes you make will be reflected in real time in the **Preview** card.\n\n4. Once you are satisfied with your customization, select **Save**.\n\nThe login page is now updated for all of your Access applications.\n\n</page>\n\n<page>\n---\ntitle: Tags  Cloudflare Learning Paths\ndescription: You can label an Access application with up to 25 custom tags. End\n  users can then filter the applications in their App Launcher by their tags.\nlastUpdated: 2025-04-10T21:16:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/tags/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/customize-ux/tags/index.md\n---\n\nYou can label an Access application with up to 25 custom tags. End users can then filter the applications in their [App Launcher](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) by their tags.\n\n### Create a tag\n\nTo create a new tag:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Reusable components** > **Tags**.\n2. Select **Add a tag**.\n3. Enter up to 35 alphanumeric characters for the tag (for example, `Human Resources`) and select it in the dropdown menu.\n4. Select **Save**.\n\nYou can now [add this tag](#tag-an-access-application) to an Access application.\n\n### Tag an Access application\n\nTo add a tag to an existing Access application:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Access controls** > **Applications**.\n2. Select an application and select **Configure**.\n3. Go to **Experience settings**.\n4. In the **Tags** dropdown, select the tags that you would like to assign to this application. The tag must be [created](#create-a-tag) before you can select it in the dropdown.\n5. Select **Save application**.\n\nThe tag will now appear on the application's App Launcher tile.\n\n</page>\n\n<page>\n---\ntitle: Best practices  Cloudflare Learning Paths\ndescription: We recommend following these best practices when you deploy\n  Cloudflare Tunnel for clientless access.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/connect-private-applications/best-practices/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/connect-private-applications/best-practices/index.md\n---\n\nWe recommend following these best practices when you deploy Cloudflare Tunnel for clientless access.\n\n## Deploy another instance of cloudflared\n\nFor an additional point of availability, add a [`cloudflared` replica](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) to another host machine in your network.\n\n## Standardize public hostnames\n\nTo make your applications easier to manage, standardize the public hostnames that you publish your applications on. Here are a few examples of how customers manage their public hostnames:\n\n* Delegate a subdomain of your primary public website to use for internal applications (for example, `tools.dev.customer.com`).\n* If your internal DNS infrastructure is available for public use, register your internal primary DNS record on Cloudflare and use this domain for your public hostname routes. This allows you to present applications on identical private and public hostnames.\n* Specify some sort of internal logic that generates hostnames based on the type of tool you are connecting. For example, if you have a set of applications in a US-East datacenter allocated explicitly for production resources, you could create subdomains of `tools.us-east.prod.ztproject.com`.\n\n## Disable TLS verification\n\nIf your public hostname route serves an `HTTPS` application, we recommend enabling [**No TLS Verify**](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#notlsverify) to reduce connectivity issues caused by mismatched certificates. **No TLS Verify** disables TLS verification between `cloudflared` and the origin service, meaning that `cloudflared` will accept any certificate that the origin service provides. This setting has no impact on traffic between the user's browser and the `cloudflared` host, which will always be encrypted.\n\n## (Optional) Add `Host` header to accommodate local traffic management tools\n\nIf your target application sits behind a load balancer or similar, you may need to set [**HTTP Host Header**](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#httphostheader) to the service hostname. Load balancers in between the origin service and `cloudflared` can be difficult to troubleshoot, and you can typically resolve the issue by adding a request header to match the way that the load balancer typically identifies traffic.\n\n## Enable tunnel notifications\n\n[Enable notifications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/notifications/) in the Cloudflare dashboard to monitor tunnel health.\n\n## Update cloudflared\n\n[Update `cloudflared`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/) regularly to get the latest features and bug fixes.\n\n</page>\n\n<page>\n---\ntitle: Create a Cloudflare Tunnel  Cloudflare Learning Paths\ndescription: To enable clientless access to your applications, you will need to\n  create a Cloudflare Tunnel that publishes applications to a domain on\n  Cloudflare. A published application creates a public DNS record that routes\n  traffic to a specific address, protocol, and port associated with a private\n  application. For example, you can define a public hostname\n  (mywebapp.example.com) to provide access to a web server running on\n  https://localhost:8080. When a user goes to mywebapp.example.com in their\n  browser, their request will first route to a Cloudflare data center where it\n  is inspected against your configured security policies. Cloudflare will then\n  forward validated requests down your tunnel to the web server.\nlastUpdated: 2025-12-23T16:56:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/connect-private-applications/create-tunnel/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/connect-private-applications/create-tunnel/index.md\n---\n\nTo enable clientless access to your applications, you will need to create a Cloudflare Tunnel that publishes applications to a domain on Cloudflare. A published application creates a public DNS record that routes traffic to a specific address, protocol, and port associated with a private application. For example, you can define a public hostname (`mywebapp.example.com`) to provide access to a web server running on `https://localhost:8080`. When a user goes to `mywebapp.example.com` in their browser, their request will first route to a Cloudflare data center where it is inspected against your configured security policies. Cloudflare will then forward validated requests down your tunnel to the web server.\n\n![How an HTTP request reaches a private application connected with Cloudflare Tunnel](https://developers.cloudflare.com/_astro/handshake.eh3a-Ml1_1IcAgC.webp)\n\n## Create a tunnel\n\nTo create a Cloudflare Tunnel:\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com) and go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n2. Select **Create a tunnel**.\n\n3. Choose **Cloudflared** for the connector type and select **Next**.\n\n4. Enter a name for your tunnel. We suggest choosing a name that reflects the type of resources you want to connect through this tunnel (for example, `enterprise-VPC-01`).\n\n5. Select **Save tunnel**.\n\n6. Next, you will need to install `cloudflared` and run it. To do so, check that the environment under **Choose an environment** reflects the operating system on your machine, then copy the command in the box below and paste it into a terminal window. Run the command.\n\n7. Once the command has finished running, your connector will appear in Cloudflare One.\n\n   ![Connector appearing in the UI after cloudflared has run](https://developers.cloudflare.com/_astro/connector.BnVS4T_M_ZUMQ9r.webp)\n\n8. Select **Next**.\n\n## Publish an application\n\nTo add a published application when creating a new tunnel:\n\n1. Go to the **Published applications** tab.\n\n2. Enter a subdomain and select a **Domain** from the drop-down menu. Specify any subdomain or path information.\n\n   Note\n\n   If you add a multi-level subdomain (more than one level of subdomain), you must [order an Advanced Certificate for the hostname](https://developers.cloudflare.com/cloudflare-one/faq/troubleshooting/#i-see-this-site-cant-provide-a-secure-connection).\n\n3. Under **Service**, choose a [service type](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/protocols/) and specify its URL. For example,\n\n   * **Type**: *HTTP*\n   * **URL**: `localhost:8000`\n\n4. Under **Additional application settings**, specify any [parameters](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/) you would like to add to your tunnel configuration.\n\n   ![Example of a published application route in the Cloudflare One dashboard](https://developers.cloudflare.com/_astro/published-app.CZQbD1Bb_Z2hcwo6.webp)\n\n5. Select **Save**.\n\nAll users on the Internet can now connect to this application via its public hostname. In [Module 4: Secure your applications](https://developers.cloudflare.com/learning-paths/clientless-access/access-application/), we will discuss how to restrict access to authorized users.\n\nNote\n\nIf the tunnel is disconnected:\n\n* Ensure that your on-premise or cloud firewall allows egress traffic on the [required ports](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/#required-for-tunnel-operation).\n* Ensure that the `cloudflared` host machine can connect to your internal applications and services. Verify that the host has the proper security group memberships and that no firewalls will block traffic between the host and the target services.\n\n## Additional resources\n\nFor more control over how traffic routes through your tunnel, refer to the following links:\n\n* [DNS records](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/dns/)\n* [Load balancer](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/public-load-balancers/)\n\n</page>\n\n<page>\n---\ntitle: Add a site  Cloudflare Learning Paths\ndescription: In clientless access deployments, users connect to internal\n  applications via public hostnames. You will need to own a domain, add it to\n  Cloudflare, and configure Cloudflare as the authoritative DNS provider for\n  that domain. Enterprise customers who cannot change their authoritative DNS\n  provider have the option to configure a partial (CNAME) setup.\nlastUpdated: 2025-09-05T20:18:28.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/add-site/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/add-site/index.md\n---\n\nIn clientless access deployments, users connect to internal applications via public hostnames. You will need to own a domain, add it to Cloudflare, and configure Cloudflare as the [authoritative DNS provider](https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/#update-your-nameservers) for that domain. Enterprise customers who cannot change their authoritative DNS provider have the option to configure a [partial (`CNAME`) setup](https://developers.cloudflare.com/dns/zone-setups/partial-setup/).\n\nYou only need to add one domain to Cloudflare, since you can create an infinite number of subdomains to manage all of your private applications.\n\n## Add a site to Cloudflare\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/login).\n2. Select **Onboard a domain**.\n3. Enter your website's apex domain (`example.com`).\n4. Select a [plan](https://www.cloudflare.com/plans/#compare-features) for this website. Everything you need to do with the domain in Cloudflare Zero Trust is available on the **Free** plan.\n5. Select **Continue**. Cloudflare will scan your website for any configured DNS records.\n\nNote\n\nIf Cloudflare is unable to identify your domain as a registered domain, make sure you are using an existing [top-level domain](https://www.cloudflare.com/learning/dns/top-level-domain/) (`.com`, `.net`, `.biz`, or others).\n\nAdditionally, Cloudflare requires your `apex domain` to be one level below a valid TLD defined in the [Public Suffix List (PSL)](https://github.com/publicsuffix/list/blob/master/public_suffix_list.dat).\n\n1. Review your DNS records and select **Continue**.\n\n2. Before your domain can begin using Cloudflare for DNS resolution, you need to [add these nameservers](https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/#update-your-nameservers) at your registrar. DNSSEC should still be **disabled** at this point.\n\n   If you cannot [change your domain nameservers](https://developers.cloudflare.com/dns/zone-setups/full-setup/), you can still use Cloudflare on your website by activating Cloudflare through a [certified hosting partner](https://www.cloudflare.com/hosting-partners) using a [partial (CNAME) setup](https://developers.cloudflare.com/dns/zone-setups/partial-setup/).\n\n3. (Optional) Follow the **Quick Start Guide** to configure security and performance settings.\n\nRegistrars can take up to 24 hours to process nameserver changes. Your domain must be in an **Active** status before you can use it for clientless access.\n\n</page>\n\n<page>\n---\ntitle: Configure an identity provider (recommended)  Cloudflare Learning Paths\ndescription: An identity provider (IdP) stores and manages users' digital\n  identities. You can integrate your existing identity provider with Cloudflare\n  Zero Trust in order to manage user access to your private network. This\n  requires configuration both in Cloudflare and with the identity provider\n  itself.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/configure-idp/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/configure-idp/index.md\n---\n\nAn [identity provider (IdP)](https://www.cloudflare.com/learning/access-management/what-is-an-identity-provider/) stores and manages users' digital identities. You can integrate your existing identity provider with Cloudflare Zero Trust in order to manage user access to your private network. This requires configuration both in Cloudflare and with the identity provider itself.\n\nNote\n\nSome admins choose to test by authenticating with a [one-time PIN (OTP)](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/) instead of an IdP. OTP can also be used as an alternative login method for contractors or other guests that are not part of your IdP.\n\nTo add an identity provider:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Integrations** > **Identity providers**.\n\n  2. In the **Your identity providers** card, select **Add new identity provider**.\n\n  3. Select the identity provider you want to add.\n\n     If you do not see your identity provider listed, these providers can typically still be enabled. If they support OIDC or OAuth, select the [generic OIDC](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/) option. If they support SAML, select the [generic SAML](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/) option. Cloudflare supports all SAML and OIDC providers and can integrate with the majority of OAuth providers. If your provider supports both SAML and OIDC, we recommend OIDC for ease of configuration.\n\n  4. Fill in the necessary fields to set up your identity provider.\n\n     Each identity provider will have different required fields for you to fill in. Step-by-step instructions are shown in the dashboard side panel. Alternatively, refer to the [IdP-specific documentation](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/).\n\n  5. Once you have filled in the necessary fields, select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Organizations, Identity Providers, and Groups Write`\n\n  2. Add an identity provider to Cloudflare One using the [`cloudflare_zero_trust_access_identity_provider`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_identity_provider) resource. For example, to add a Microsoft Entra ID integration:",
      "language": "unknown"
    },
    {
      "code": "Each identity provider integration has different required attributes. You will need to obtain these attribute values from your identity provider. For more information, refer to the [IdP-specific documentation](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/).\n\n     If you do not see your identity provider listed, these providers can typically still be enabled. If they support OIDC or OAuth, use the [generic OIDC](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/) option. If they support SAML, use the [generic SAML](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/) option. Cloudflare supports all SAML and OIDC providers and can integrate with the majority of OAuth providers. If your provider supports both SAML and OIDC, we recommend OIDC for ease of configuration.\n\nUsers will now be able to select this IdP when they are prompted to authenticate.\n\n</page>\n\n<page>\n---\ntitle: Create a Cloudflare account  Cloudflare Learning Paths\ndescription: \"To create a new Cloudflare account:\"\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/create-cloudflare-account/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/create-cloudflare-account/index.md\n---\n\nTo create a new Cloudflare account:\n\n1. [Sign up](https://dash.cloudflare.com/sign-up) on the Cloudflare dashboard.\n\n2. To secure your account, enable [two-factor authentication](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/).\n\n3. If you have a Cloudflare contact (Enterprise only), ask them to set up your account as a multi-user organization. Account members will need:\n\n   * [**Access** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit applications and Access policies.\n   * [**Gateway** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit Gateway policies.\n   * [**PII** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/#cloudflare-zero-trust-pii) to view user information in Gateway activity logs.\n\n## Best practices\n\nIf you are creating an account for your team or a business, we recommend choosing an email alias or distribution list for your **Email**, such as `cloudflare@example.com`.\n\nThis email address is the main point of contact for your Cloudflare billing, usage notifications, and account recovery.\n\n</page>\n\n<page>\n---\ntitle: Create a Zero Trust organization  Cloudflare Learning Paths\ndescription: To start using Zero Trust features, create a Zero Trust\n  organization in your Cloudflare account.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/create-zero-trust-org/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/create-zero-trust-org/index.md\n---\n\nTo start using Zero Trust features, create a Zero Trust organization in your Cloudflare account.\n\n## Sign up for Zero Trust\n\nTo create a Zero Trust organization:\n\n1. In the [Cloudflare dashboard](https://dash.cloudflare.com/), select **Zero Trust**.\n\n   [Go to **Zero Trust**](https://one.dash.cloudflare.com/)\n\n2. On the onboarding screen, choose a team name. The team name is a unique, internal identifier for your Zero Trust organization. Users will enter this team name when they enroll their device manually, and it will be the subdomain for your App Launcher (as relevant). Your business name is the typical entry.\n\n   You can find your team name in [Cloudflare One](https://one.dash.cloudflare.com) by going to **Settings**.\n\n3. Complete your onboarding by selecting a subscription plan and entering your payment details. If you chose the **Zero Trust Free plan**, this step is still needed but you will not be charged.\n\n## (Optional) Manage Zero Trust in Terraform\n\nYou can use the [Cloudflare Terraform provider](https://registry.terraform.io/providers/cloudflare/cloudflare/latest) to manage your Zero Trust organization alongside your other IT infrastructure. To get started with Terraform, refer to our [Terraform tutorial series](https://developers.cloudflare.com/terraform/tutorial/).\n\nTo add Zero Trust to your Terraform configuration:\n\n1. [Sign up for Zero Trust](#sign-up-for-zero-trust) on the Cloudflare dashboard.\n\n2. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n   * `Access: Organizations, Identity Providers, and Groups Write`\n\n3. Add the [`cloudflare_zero_trust_organization`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_organization) resource:",
      "language": "unknown"
    },
    {
      "code": "Replace `<your-team-name` with the Zero Trust organization name selected during [onboarding](#sign-up-for-zero-trust). You can also view your team name on [Cloudflare One](https://one.dash.cloudflare.com) under **Settings** > **Team name and domain**.\n\nYou can now update Zero Trust organization settings using Terraform.\n\nTip\n\nIf you plan to manage all Zero Trust settings in Terraform, set the dashboard to [API/Terraform read-only mode](https://developers.cloudflare.com/cloudflare-one/api-terraform/#set-dashboard-to-read-only).\n\n</page>\n\n<page>\n---\ntitle: Best practices  Cloudflare Learning Paths\ndescription: Most customers have a heterogeneous private application portfolio;\n  some are home-built, some are internal managed services, some have SSO\n  integrations available, and some rely on HTML or other forms of\n  authentication. With that in mind, we recommend that you mix-and-match\n  onboarding solutions to fit the needs of each individual application. As shown\n  in the table below, you can bucket applications into a series of stack-ranked\n  categories that prioritize ease of implementation and total organizational\n  impact.\nlastUpdated: 2025-10-24T20:47:24.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/best-practices/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/best-practices/index.md\n---\n\nMost customers have a heterogeneous private application portfolio; some are home-built, some are internal managed services, some have SSO integrations available, and some rely on HTML or other forms of authentication. With that in mind, we recommend that you mix-and-match [onboarding solutions](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/#potential-solutions) to fit the needs of each individual application. As shown in the table below, you can bucket applications into a series of stack-ranked categories that prioritize ease of implementation and total organizational impact.\n\n| Application type | Recommendation | Outcome |\n| - | - | - |\n| Private web apps without integrated SSO | [Present applications exclusively on Cloudflare domains.](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/#recommended-solution) | Users access applications on new domains delegated to Cloudflare and instantly apply SSO through Cloudflare integration. |\n| Private web apps with integrated SSO | **If SSO configuration is possible:** [Present applications exclusively on Cloudflare domains.](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/#recommended-solution) **If SSO configuration is not possible:** Present applications on existing internal domains with identical external domains delegated to Cloudflare | Users access internal web services on the same or new domains from Cloudflare. If configured, the SSO provider transparently redirects users from internal domains to Cloudflare authoritative external domains. |\n| New critical internal applications being developed | [Present applications exclusively on Cloudflare domains.](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/#recommended-solution) | Developers can programmatically generate (or be given) new public hostnames on Cloudflare to represent the redirects for their application in SAML or OIDC integrations. |\n| New microservices being developed | [Present applications exclusively on Cloudflare domains.](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/#recommended-solution) Optionally, [consume the Access JWT](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/consume-jwt/#consume-the-cloudflare-jwt) as authentication in internal applications. | Developers can inject the JWT authorization mechanism directly into the codebase of their application and [use Terraform](https://developers.cloudflare.com/learning-paths/clientless-access/terraform/) to automatically build Cloudflare hostnames and policies for their applications. |\n| Internal API endpoints (including internal applications with dependencies on external/internal APIs) | Present internal APIs on Cloudflare domains, and build Access policies that accept [service tokens](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/) alongside user-oriented policies. | Automated systems can authenticate via a [service token in the request header](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/#connect-your-service-to-access), while end users continue to login through their IdP. |\n\n</page>\n\n<page>\n---\ntitle: Authenticate without integrated SSO  Cloudflare Learning Paths\ndescription: A common goal for many security organizations is to implement\n  continuous authentication and authorization. With Cloudflare Access JWT\n  validation, you can achieve this goal without introducing significant user\n  interruption or requiring behavioral changes for your end users.\nlastUpdated: 2025-10-24T20:47:24.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/consume-jwt/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/consume-jwt/index.md\n---\n\nA common goal for many security organizations is to implement continuous authentication and authorization. With Cloudflare Access JWT validation, you can achieve this goal without introducing significant user interruption or requiring behavioral changes for your end users.\n\nAs discussed on the [previous page](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/), some of your applications may currently rely on a direct SSO integration to authenticate requests. However, if you were to put this type of application behind Cloudflare to enable remote access, your user would need to authenticate twice. First, they must authenticate to your identity provider via Cloudflare Access. Once they have authenticated to Access, your user will reach the front door of your internal application, where they must complete a second authentication event via the direct SSO integration.\n\nInstead of [managing a direct SSO integration](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/) in your application, we recommend using the JSON Web Token (JWT) issued by Cloudflare Access to authenticate requests. Cloudflare becomes the primary responsible party for validating the token returned from your SSO provider. By allowing your applications to consume the Cloudflare JWT, users will only have a single authentication event required to access the application, and you can better manage authorization to your internal services with lower overhead.\n\n## Consume the Cloudflare JWT\n\nWhen Cloudflare sends a request to your application, the request will include a JWT signed with a key pair unique to your account. You can build a workflow in your application to [validate the Cloudflare Access JWT](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/validating-json/). This will give you stronger-than-HTML security for users who have authenticated to Cloudflare and will make your user login experience seamless.\n\nThe authorization flow is illustrated in the following diagram:\n\n![ZTWA authorization flow with JWT validation](https://developers.cloudflare.com/_astro/access-jwt-flow.D4gusMDK_CjcjM.webp)\n\n## Send authorization headers with Workers\n\nWhen applications do not have integrated SSO, or any other method to deliver just-in-time (JIT) user provisioning or management, it is common to look for a way within Cloudflare to automatically pass user information into the private application. To best accomplish this, we recommend using Cloudflare Workers to send custom HTTP headers. As requests route through Cloudflare's network to your application, the Worker can insert headers into the request which contain the user's identity, device posture attributes, and other custom SAML/OIDC claims from the [Cloudflare Access JWT](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/application-token/).\n\nRefer to [this tutorial](https://developers.cloudflare.com/cloudflare-one/tutorials/access-workers/) for setup details.\n\n</page>\n\n<page>\n---\ntitle: Applications with integrated SSO  Cloudflare Learning Paths\ndescription: \"Many organizations in the past few years have recognized the\n  importance of source-of-truth identity and have directly integrated their SSO\n  provider with their internal applications. The SSO provider is only aware of\n  the internal domain on which the application exists (via the configured ACS\n  URL), which means the user must be connected to the local network in order to\n  access the application. This security architecture makes sense for a\n  traditional network perimeter, but it presents challenges for Zero Trust\n  adoption. In the clientless access model, the user's device has no concept of\n  an internal corporate network, only the specific, scoped applications to which\n  they have access. The problem is summarized in the following diagram:\"\nlastUpdated: 2025-10-23T20:06:36.000Z\nchatbotDeprioritize: false\ntags: SSO\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/integrated-sso/index.md\n---\n\nMany organizations in the past few years have recognized the importance of source-of-truth identity and have directly integrated their SSO provider with their internal applications. The SSO provider is only aware of the internal domain on which the application exists (via the configured ACS URL), which means the user must be connected to the local network in order to access the application. This security architecture makes sense for a traditional network perimeter, but it presents challenges for Zero Trust adoption. In the clientless access model, the user's device has no concept of an internal corporate network, only the specific, scoped applications to which they have access. The problem is summarized in the following diagram:",
      "language": "unknown"
    },
    {
      "code": "## Potential solutions\n\nIf your applications use integrated SSO, there are a number of different paths you can take to onboard your applications to Cloudflare Access.\n\n| Solution | Steps required | Pros | Cons |\n| - | - | - | - |\n| [Present applications exclusively on Cloudflare domains](#recommended-solution) | Change SSO ACS URL to the Cloudflare Tunnel public hostname | * Increased security posture* No changes to application code* No changes to internal DNS design | Hard cutover event when ACS URL changes from internal to external domain |\n| Present applications on existing internal domains with identical external domains delegated to Cloudflare | Add domains to Cloudflare that match internal domains | * No changes to SSO ACS URL* No change for end users | * Requires careful management of internal and external domains* Requires changing internal DNS design |\n| [Consume the Cloudflare JWT in internal applications](https://developers.cloudflare.com/learning-paths/clientless-access/migrate-applications/consume-jwt/) | * Remove integrated SSO* Update application to accept the Cloudflare JWT for user authorization | * Reduced authentication burden for end users* No changes to internal DNS design* Instantly secure applications without direct SSO integration | * Requires changing application code* Hard cutover event when application updates |\n| Use Cloudflare as the direct SSO integration, which then calls your IdP of choice (Okta, OneLogin, etc.) | Swap existing SSO provider for [Access for SaaS](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/) | * Increased flexibility for changing IdPs* Ability to use multiple IdPs simultaneously | * Hard cutover event for IdP changes* No SCIM provisioning for application |\n\n## Recommended solution\n\nIf you are able to configure your SSO provider, we recommend presenting all internal web services exclusively on Cloudflare domains. This is the model that Cloudflare takes for web application access internally and the most common method of resolution for customers in this scenario.\n\nWith this approach, you do not need to make any changes to your existing DNS infrastructure. Cloudflare Tunnel in your network will manage the translation from external (Cloudflare public) DNS to internal DNS, which is how the system is designed to function. After you update the ACS URL in your SSO provider to the Cloudflare public hostname, the outcome will look like this:",
      "language": "unknown"
    },
    {
      "code": "All users - whether in the office, remote, using or not using the VPN client - will always route through the Cloudflare Access authentication flow at `app.public.com` to access a private application. This provides a single control plane for policy application and security audits, and no additional user training is necessary.\n\n</page>\n\n<page>\n---\ntitle: Publish applications with Terraform  Cloudflare Learning Paths\ndescription: This guide covers how to use the Cloudflare Terraform provider to\n  quickly publish and secure a private application. In the following example, we\n  will add a new published application to an existing Cloudflare Tunnel,\n  configure how cloudflared proxies traffic to the application, and secure the\n  application with Cloudflare Access.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/clientless-access/terraform/publish-apps-with-terraform/\n  md: https://developers.cloudflare.com/learning-paths/clientless-access/terraform/publish-apps-with-terraform/index.md\n---\n\nThis guide covers how to use the [Cloudflare Terraform provider](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs) to quickly publish and secure a private application. In the following example, we will add a new published application to an existing Cloudflare Tunnel, configure how `cloudflared` proxies traffic to the application, and secure the application with Cloudflare Access.\n\n## Prerequisites\n\n* [Add your domain to Cloudflare](https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/add-site/)\n* [Configure an IdP integration](https://developers.cloudflare.com/learning-paths/clientless-access/initial-setup/configure-idp/)\n* [Create a Cloudflare Tunnel](https://developers.cloudflare.com/learning-paths/clientless-access/connect-private-applications/create-tunnel/#create-a-tunnel) via the Zero Trust dashboard\n* Install the [Terraform client](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli)\n* [Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) (refer to the [minimum required permissions](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/terraform/#3-create-a-cloudflare-api-token))\n\n## 1. Create a Terraform configuration directory\n\nTerraform functions through a working directory that contains configuration files. You can store your configuration in multiple files or just one  Terraform will evaluate all of the configuration files in the directory as if they were in a single document.\n\n1. Create a folder for your Terraform configuration:",
      "language": "unknown"
    },
    {
      "code": "2. Change into the directory:",
      "language": "unknown"
    },
    {
      "code": "## 2. Declare providers and variables\n\nCreate a `.tf` file and copy-paste the following example. Fill in your API token, account and zone information, and Tunnel ID.\n\nFind the Tunnel ID\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n2. Select the tunnel name.\n3. Copy the **Tunnel ID**.",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nTo prevent accidentally exposing your Cloudflare credentials, do not save this file in your version control system. Learn more about [tracking a Terraform configuration](https://developers.cloudflare.com/terraform/tutorial/track-history/).\n\n## 3. Configure Cloudflare resources\n\nAdd the following resources to your Terraform configuration.\n\n### Add published application to Cloudflare Tunnel\n\nUsing the [`cloudflare_tunnel_config`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/tunnel_config) resource, create an ingress rule that maps your application to a public DNS record. This example makes `localhost:8080` available on `app.mycompany.com`, sets the [Connect Timeout](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#connecttimeout), and enables [Access JWT validation](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#access).",
      "language": "unknown"
    },
    {
      "code": "Note\n\nPublished application configurations must include a catch-all ingress rule at the bottom of the file.\n\n### Create an Access application\n\nUsing the [`cloudflare_access_application`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/access_application) resource, add the application to Cloudflare Access.",
      "language": "unknown"
    },
    {
      "code": "### Create an Access policy\n\nUsing the [`cloudflare_access_policy`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/access_application) resource, create a policy to secure the application. The following policy will only allow access to users who authenticate through your identity provider.",
      "language": "unknown"
    },
    {
      "code": "## 4. Deploy Terraform\n\nTo deploy the configuration files:\n\n1. Initialize your configuration directory:",
      "language": "unknown"
    },
    {
      "code": "2. Preview everything that will be created:",
      "language": "unknown"
    },
    {
      "code": "3. Apply the configuration:",
      "language": "unknown"
    },
    {
      "code": "Users can now access the private application by going to the public URL and authenticating with Cloudflare Access. You can view your new tunnel route, Access application, and Access policy in [Cloudflare One](https://one.dash.cloudflare.com). The new DNS record is shown in the [Cloudflare dashboard](https://dash.cloudflare.com).\n\nNote\n\nIf you need to modify the Access application, Access policy or DNS record, you must make the changes via Terraform. Changes made via the dashboard will break Terraform's state. To prevent this from happening, [set the dashboard to read-only](https://developers.cloudflare.com/cloudflare-one/api-terraform/#set-dashboard-to-read-only).\n\n</page>\n\n<page>\n---\ntitle: Benefits of using Magic Transit  Cloudflare Learning Paths\ndescription: Magic Transit leverages Cloudflare's global anycast network. As of\n  writing this guide, Cloudflare's global network spans over 330 cities, and has\n  over 405 Tbps network capacity. This bandwidth allows it to absorb all manners\n  of attack that otherwise would overwhelm a typical data center or on-premise\n  hardware Distributed Denial-of-Service (DDoS) appliances.\nlastUpdated: 2025-05-16T09:55:07.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/data-center-protection/concepts/benefits-magic-transit/\n  md: https://developers.cloudflare.com/learning-paths/data-center-protection/concepts/benefits-magic-transit/index.md\n---\n\nMagic Transit leverages Cloudflare's global anycast network. As of writing this guide, Cloudflare's global network spans over 330 cities, and has over 405 Tbps network capacity. This bandwidth allows it to absorb all manners of attack that otherwise would overwhelm a typical data center or on-premise hardware Distributed Denial-of-Service (DDoS) appliances.\n\nThe number of DDoS attacks has been steadily increasing in recent years. In the first quarter of 2025, Cloudflare [mitigated 16.8 million network-layer DDoS attacks](https://blog.cloudflare.com/ddos-threat-report-for-2025-q1/#ddos-attacks-in-numbers). This represents a 397% increase quarter over quarter and a 509% increase year over year.\n\nOther advantages of choosing Magic Transit:\n\n* **Scalability**: As Cloudflare's global network expands, so does Magic Transit ability to absorb ever bigger DDoS attacks.\n* **Ease of management**: Magic Transit offers centralized, cloud-based management tools that simplify configuration and monitoring of your network security.\n* **Improvement of network performance**: Magic Transit steers traffic along tunnel routes based on priorities you define and uses equal-cost multi-path routing to provide load-balancing across tunnels with the same prefix and priority.\n* **Integration with zero-trust services**: Magic Transit integrates with other Cloudflare products, including Cloudflare One's SASE offerings, Magic Firewall, and more.\n* **Integration with CNI**: Directly connect your infrastructure to Cloudflare with CNI and bypass the Internet. Beyond a more reliable and secure experience, using CNI is an alternative to anycast GRE tunnels for getting traffic delivered to your infrastructure with a 1500-byte maximum transmission unit (MTU) handoff.\n* **Real-time traffic visibility and alerting**: Monitor and analyze traffic patterns, threat activity, and mitigation actions in real time through Cloudflare's analytics and logging tools. Set up customized alerts to notify you of potential threats, enabling faster incident response and better-informed network decisions.\n\n</page>\n\n<page>\n---\ntitle: What is Magic Transit?  Cloudflare Learning Paths\ndescription: Magic Transit is a network security and performance solution that\n  offers Distributed Denial-of-Service (DDoS) protection, traffic acceleration,\n  and more for on-premise, cloud-hosted, and hybrid networks.\nlastUpdated: 2025-07-18T10:46:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/data-center-protection/concepts/what-is-magic-transit/\n  md: https://developers.cloudflare.com/learning-paths/data-center-protection/concepts/what-is-magic-transit/index.md\n---\n\nMagic Transit is a network security and performance solution that offers Distributed Denial-of-Service (DDoS) protection, traffic acceleration, and more for on-premise, cloud-hosted, and hybrid networks.\n\nMagic Transit works at Layer 3 of the [OSI model](https://www.cloudflare.com/en-gb/learning/ddos/glossary/open-systems-interconnection-model-osi/), protecting entire IP networks from DDoS attacks. Instead of relying on local infrastructure that can be overwhelmed by large DDoS attacks, Magic Transit uses the [global Cloudflare Network](https://www.cloudflare.com/network/) to ingest and mitigate attacks close to their source.\n\nMagic Transit delivers its connectivity, security, and performance benefits by serving as the front door to your IP network. This means it accepts IP packets destined for your network, processes them, and then forwards them to your origin infrastructure.\n\nThe Cloudflare network uses Border Gateway Protocol (BGP) to announce your company's IP address space, extending your network presence globally, and [anycast](https://developers.cloudflare.com/magic-transit/reference/gre-ipsec-tunnels/#anycast) to absorb and distribute attack traffic.\n\nOnce packets hit Cloudflare's network, traffic is inspected for attacks, filtered, steered, accelerated, and sent onward to your origin. Magic Transit users have two options for their implementation: ingress traffic or ingress and egress traffic. Users with an egress implementation will need to set up policy-based routing (PBR) or ensure default routing on their end forwards traffic to Cloudflare via tunnels.\n\nFor an in-depth explanation of Magic Transit, refer to [Magic Transit Reference Architecture](https://developers.cloudflare.com/reference-architecture/architectures/magic-transit/).\n\n</page>\n\n<page>\n---\ntitle: Configure routes  Cloudflare Learning Paths\ndescription: Magic Networking uses a routing table to steer your traffic from\n  Cloudflare's global network to your connected networks via next-hop. You can\n  add entries to the Magic routing table through static route configuration or\n  routes learned from BGP peering (only available over CNI with Dataplane v2\n  (beta)).\nlastUpdated: 2025-09-08T09:58:37.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/data-center-protection/configure-tunnels-routes/configure-routes/\n  md: https://developers.cloudflare.com/learning-paths/data-center-protection/configure-tunnels-routes/configure-routes/index.md\n---\n\nMagic Networking uses a routing table to steer your traffic from Cloudflare's global network to your connected networks via next-hop. You can add entries to the Magic routing table through static route configuration or routes learned from BGP peering (only available over CNI with Dataplane v2 (beta)).\n\nRefer to [Traffic Steering](https://developers.cloudflare.com/magic-transit/reference/traffic-steering/) for more information about all the technical aspects related to:\n\n* Routes' priorities and weights\n* Regional scoping of traffic to reduce latency\n* BGP peering\n\nAnycast routing\n\nCloudflare uses anycast to route traffic. Anycast is a network addressing and routing method that routes incoming requests to different locations. Traffic can arrive at a different geographic location than expected. Not all requests go to the closest data center because Internet routing and peering relationships are complex, and Cloudflare optimizes for performance and reliability.\n\n## Configure static routes\n\n### Create a static route\n\n* Dashboard\n\n  1. Go to Magic Transit's **Configuration** page.\n\n  [Go to **Configuration**](https://dash.cloudflare.com/?to=/:account/magic-transit/configuration)\n\n  1. From the **Routes** tab, select **Create** to add a new route.\n\n  1) Enter a descriptive name for your route in **Description**.\n\n  2) In **Prefix**, enter your range of IP addresses. For example, `10.10.10.100/24`.\n\n  3) In **Tunnel/Next hop**, select a tunnel for your route from the tunnels you created in [Configure tunnel endpoints](https://developers.cloudflare.com/magic-transit/how-to/configure-tunnel-endpoints/).\n\n  4) Choose the **Priority** for your route. Lower numbers have higher priorities.\n\n     Note\n\n     Cloudflare routing applies longest-prefix match. A more specific static route (like `/30`) always takes precedence over a less specific one (like `/29`), regardless of tunnel priority  unless you remove the more specific route.\n\n     Keep this in mind when configuring priorities for your routes. Refer to [Route prioritization](https://developers.cloudflare.com/magic-transit/reference/traffic-steering/#route-prioritization) for more information.\n\n  5) (Optional) Choose a **Weight** for your route. Refer to [Set priority and weights for static routes](https://developers.cloudflare.com/magic-transit/reference/traffic-steering/#set-priority-and-weights-for-static-routes) for examples.\n\n  6) (Optional) If you need to scope your route to a specific region, you can do it in **Region code**.\n\n  7) (Optional) We highly recommend testing your route before adding it by selecting **Test routes**.\n\n  8) Select **Add routes**.\n\n* API\n\n  Note\n\n  You will need your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and [API token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/) to use the API.\n\n  Create a `POST` request [using the API](https://developers.cloudflare.com/api/resources/magic_transit/subresources/routes/methods/create/) to create one or more static routes.\n\n  Example:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Magic WAN Write`\n  * `Magic Transit Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Edit a static route\n\n* Dashboard\n\n  1. In **Routes**, locate the route to modify.\n  2. Select the three dots next to it > **Edit**.\n\n  1) Enter the updated route information.\n  2) (Optional) We highly recommend testing your route before adding it by selecting **Test routes**.\n  3) Select **Edit routes**.\n\n* API\n\n  Note\n\n  You will need your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and [API token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/) to use the API.\n\n  Create a `PUT` request [using the API](https://developers.cloudflare.com/api/resources/magic_transit/subresources/routes/methods/update/) to update one or more static routes.\n\n  Example:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Magic WAN Write`\n  * `Magic Transit Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Delete static route\n\n* Dashboard\n\n  1. In **Routes**, locate the static route to delete.\n  2. Select the three dots next to it > **Delete**.\n\n  1) Confirm the action by selecting the checkbox and select **Delete**.\n\n* API\n\n  Note\n\n  You will need your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and [API token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/) to use the API.\n\n  Create a `DELETE` request [using the API](https://developers.cloudflare.com/api/resources/magic_transit/subresources/routes/methods/delete/) to delete a static route.\n\n  Example:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Magic WAN Write`\n  * `Magic Transit Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Configure BGP routes\n\nBGP peering is available when using [CNI with Dataplane v2 (beta)](https://developers.cloudflare.com/network-interconnect/) as an on-ramp.\n\n### Choose an ASN for BGP peering\n\nThe Magic routing table is managed by the customer. You can select both the Cloudflare-side ASN (Autonomous System Number) and the ASN for your customer device. The customer device ASN can be 2-byte or 4-byte. [Public ASNs used for Magic Transit](https://developers.cloudflare.com/magic-transit/how-to/advertise-prefixes/#cloudflare-asn-vs-your-own-asn) are verified during the onboarding process.\n\nBy default, each BGP peering session uses the same Cloudflare-side ASN to represent peering with the Magic Transit routing table. This ASN is called the **CF Account ASN** and is set to `13335`. You can configure this to a private 2-byte ASN (any value between `64512` and `65534`, such as `65000`).\n\nTo set this ASN:\n\n1. Go to Magic Transit's **Configuration** page.\n\n[Go to **Configuration**](https://dash.cloudflare.com/?to=/:account/magic-transit/configuration)\n\n1. Go to **BGP configuration**.\n2. In **CF Account ASN**, enter Cloudflare's ASN.\n3. Select **Update**.\n\nMagic Transit customers should also be aware of the following:\n\n* The Cloudflare side ASN will never be exposed in `AS_PATH` of anycast announcements from the Cloudflare edge. In those announcements, Cloudflare will always use the Cloudflare ASN of `13335` optionally prepended with a bring-your-own ASN as described in [Cloudflare ASN vs. your own ASN](https://developers.cloudflare.com/magic-transit/how-to/advertise-prefixes/#cloudflare-asn-vs-your-own-asn).\n* The customer device ASN can be a private ASN or the ASN they are using for Magic Transit anycast announcements at the edge: this has no impact on the ASN for the anycast announced prefix at the edge of the Cloudflare global network.\n\n### Set up BGP peering\n\nWarning\n\nBGP peering is only available to Magic Transit customers with CNI with Dataplane v2 (beta) as an on-ramp. If your network is set up with GRE or IPsec tunnels, you cannot use BGP peering.\n\nYou need to configure two ASNs:\n\n* The Cloudflare [account-scoped ASN](#choose-an-asn-for-bgp-peering) named **CF Account ASN**.\n* One ASN for each interconnect you want to configure with BGP.\n\nIf you have already set up your Cloudflare account ASN, skip steps two and three below.\n\n1. In the Cloudflare dashboard, go to Magic Transit's **Configuration** page.\n\n[Go to **Configuration**](https://dash.cloudflare.com/?to=/:account/magic-transit/configuration)\n\n1. Go to **BGP configuration**.\n2. In **CF Account ASN**, enter Cloudflare's ASN.\n3. Go to **Interconnects**.\n\n1) Locate the CNI interconnect with Dataplane v2 (beta) to configure with BGP > select the **three dots** next to it > **Configure BGP**.\n\n2) In **Customer device ASN**, enter the ASN for your network.\n\n3) In **MD5 key**, you can optionally enter the key for your network. Note that this is meant to prevent accidental misconfigurations, and is not a security mechanism.\n\n4) (Optional) In **Advertised prefix list**, input the additional prefixes automatically assigned by Cloudflare during the creation of the CNI interconnect. These prefixes advertise alongside your existing routes. Leave this blank if you do not want to advertise extra routes.\\\n   Typical prefixes to configure here include:\n\n   * A route to `0.0.0.0/0`, the default route  to attract all Internet-bound traffic if using Magic Transit with Egress.\n   * A route to `100.96.0.0/12`, the portion of CGNAT space [used by default with WARP clients](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/user-to-site/#add-ip-route-to-router).\n\n5) Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Configure tunnels  Cloudflare Learning Paths\ndescription: Cloudflare recommends two tunnels for each ISP and network location\n  router combination, one per Cloudflare endpoint. Shortly after your onboarding\n  kickoff call, Cloudflare will assign two Cloudflare endpoint addresses  that\n  you can use as the tunnel destinations on your network location's\n  routers/endpoints.\nlastUpdated: 2025-11-19T16:38:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/data-center-protection/configure-tunnels-routes/configure-tunnels/\n  md: https://developers.cloudflare.com/learning-paths/data-center-protection/configure-tunnels-routes/configure-tunnels/index.md\n---\n\nCloudflare recommends two tunnels for each ISP and network location router combination, one per Cloudflare endpoint. Shortly after your onboarding kickoff call, Cloudflare will assign two Cloudflare endpoint addresses that you can use as the tunnel destinations on your network location's routers/endpoints.\n\nTo configure the tunnels between Cloudflare and your locations, you must provide the following data for each tunnel:\n\n* **Tunnel name**: For both GRE and IPsec tunnels, the name cannot contain spaces or special characters, and cannot be shared with other tunnels.\n\n* **Cloudflare endpoint address**: The public IP address of the Cloudflare side of the tunnel. Refer to [Check your Cloudflare IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/#check-your-cloudflare-ips) for more information on where to find your Cloudflare IP addresses.\n\n* **Customer endpoint**: A public Internet routable IP address which is outside of the prefixes that Cloudflare will advertise on your behalf. These are generally IP addresses provided by your ISP. If you intend to use a physical or virtual connection like [Cloudflare Network Interconnect](https://developers.cloudflare.com/network-interconnect/), you do not need to provide endpoints because Cloudflare will provide them.\\\n  This value is not required for IPsec tunnels, unless your router is using an Internet Key Exchange (IKE) ID of type `ID_IPV4_ADDR`.\n\n* **Interface address**: A 31-bit (recommended) or 30-bit subnet (`/31` or `/30` in CIDR notation) supporting two hosts, one for each side of the tunnel. Select the subnet from the following private IP space:\n\n  * `10.0.0.0/8`\n\n  * `172.16.0.0/12`\n\n  * `192.168.0.0/16`\n\n  * `169.254.240.0/20`\n\n    Warning\n\n    Make sure the prefixes are always within the allowed Cloudflare ranges, especially for cloud service providers that might automatically generate prefixes for you. Otherwise, the tunnel will not work.\n\n* **TTL**: Time to Live (TTL) in number of hops for the GRE tunnel. The default value is 64.\n\n* **MTU**: Maximum transmission unit (MTU) in bytes for the GRE tunnel. The default value is 1476.\n\n## Ways to onboard traffic to Cloudflare\n\n### GRE and IPsec tunnels\n\nYou can use GRE or IPsec tunnels to onboard your traffic to Magic Transit, and set them up through the Cloudflare dashboard or the API. If you use the API, you need your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and [API key](https://developers.cloudflare.com/fundamentals/api/get-started/keys/#view-your-global-api-key).\n\nAnycast routing\n\nCloudflare uses anycast to route traffic. Anycast is a network addressing and routing method that routes incoming requests to different locations. Traffic can arrive at a different geographic location than expected. Not all requests go to the closest data center because Internet routing and peering relationships are complex, and Cloudflare optimizes for performance and reliability.\n\n#### IPsec supported ciphers\n\nRefer to [Tunnels and encapsulation](https://developers.cloudflare.com/magic-transit/reference/gre-ipsec-tunnels/) to learn more about the technical requirements for GRE and IPsec tunnels used in Magic Transit. In that page, you can also find the [supported ciphers for IPsec](https://developers.cloudflare.com/magic-transit/reference/gre-ipsec-tunnels/#supported-configuration-parameters).\n\nNote\n\nIPsec tunnels only support Internet Key Exchange version 2 (IKEv2).\n\n#### Anti-replay protection\n\nIf you use Magic Transit and anycast IPsec tunnels, we recommend disabling anti-replay protection. Cloudflare disables this setting by default. However, you can enable it through the API or the Cloudflare dashboard for devices that do not support disabling it, including Cisco Meraki, Velocloud, and AWS VPN Gateway.\n\nRefer to [Anti-replay protection](https://developers.cloudflare.com/magic-transit/reference/anti-replay-protection/) for more information on this topic, or [Add IPsec tunnels](#add-tunnels) to learn how to enable this feature.\n\n### Network Interconnect (CNI)\n\nBeyond GRE and IPsec tunnels, you can also use Network Interconnect (CNI) to onboard your traffic to Magic Transit. Refer to [Network Interconnect (CNI)](https://developers.cloudflare.com/magic-transit/network-interconnect/) for more information.\n\n## Add tunnels\n\nWarning\n\nMagic Firewall rules apply to Internet Control Message Protocol (ICMP) traffic. If you enable Magic Firewall, ensure your rules allow ICMP traffic sourced from Cloudflare public IPs. Otherwise, health checks will fail. Refer to [Magic Firewall rules](https://developers.cloudflare.com/magic-firewall/about/ruleset-logic/#magic-firewall-rules-and-magic-transit-endpoint-health-checks) for more information.\n\n* Dashboard\n\n  1. Go to Magic Transit's **Configuration** page.\n\n  [Go to **Configuration**](https://dash.cloudflare.com/?to=/:account/magic-transit/configuration)\n\n  1. From the **Tunnels** tab, select **Create**.\n  2. On the **Add tunnels** page, choose either a **GRE tunnel** or **IPsec tunnel**.\n\n  GRE tunnel\n\n  1. In **Name**, give your tunnel a descriptive name. This name must be unique, and must not contain spaces or special characters. Hover over `i` in the dashboard for more information.\n  2. Give your tunnel a description in **Description**. You do not have character restrictions here.\n  3. In **IPv4 Interface address**, enter the internal IP address for your tunnel along with the interface's prefix length (either `/31` or `/30`). This is used to route traffic through the tunnel on the Cloudflare side. We recommend using an RFC1918 address scheme with a `/31` netmask, as it provides the most efficient use of IP address space.\n  4. In **Customer GRE endpoint**, enter your router's public IP address. You do not need this value if you use a physical or virtual connection like Cloudflare Network Interconnect because Cloudflare provides it.\n  5. In **Cloudflare GRE endpoint**, enter the anycast address you received from your account team. Refer to [Check your Cloudflare IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/#check-your-cloudflare-ips) for more information on where to find your Cloudflare IP addresses.\n  6. Leave the default values for **TTL** and **MTU**.\n  7. *(Optional)* **Tunnel health checks** are enabled by default. If you disable Tunnel health checks, your tunnels appear 100% down in your [tunnel health dashboard](https://developers.cloudflare.com/magic-transit/network-health/check-tunnel-health-dashboard/) even when working. Cloudflare keeps sending traffic through the tunnel without the means to detect if the tunnel goes down. You must set up your own system to detect down tunnels, as Cloudflare cannot warn you about down tunnels. Refer to [Tunnel health checks](https://developers.cloudflare.com/magic-transit/reference/tunnel-health-checks/) for more information.\n  8. *(Optional)* If you keep **Tunnel health checks** enabled, choose a [health check rate](https://developers.cloudflare.com/magic-transit/network-health/update-tunnel-health-checks-frequency/) for your tunnel. Available options are *Low*, *Medium*, and *High*.\n  9. The **Health check type** defaults to *Reply* and to creating an ICMP (Internet Control Message Protocol) reply. If your firewall drops this type of packet because it assumes the packet is an attack, change this option to *Request* which creates an ICMP request. Refer to [Tunnel health checks](https://developers.cloudflare.com/magic-transit/reference/tunnel-health-checks/) for more information.\n  10. The **Health check direction** defaults to **unidirectional** for Magic Transit. Refer to [Bidirectional vs unidirectional health checks](#bidirectional-vs-unidirectional-health-checks) for more details.\n  11. *(Optional)* **Health check target** is the customer end of the tunnel. This field is only visible when the **Health check direction** is set to *Unidirectional*.\n  12. *(Optional)* We recommend you test your tunnel before officially adding it. To test the tunnel, select **Test tunnels**.\n\n  1) To add multiple tunnels, select **Add GRE tunnel** for each new tunnel.\n\n  1. After adding your tunnel information, select **Add tunnels**.\n\n  IPsec tunnel\n\n  1. In **Name**, give your tunnel a descriptive name. This name must be unique, and must not contain spaces or special characters. Hover over `i` in the dashboard for more information.\n\n  2. Give your tunnel a description in **Description**. You do not have character restrictions here.\n\n  3. In **IPv4 Interface address**, enter the internal IP address for your tunnel along with the interface's prefix length (either `/31` or `/30`). This is used to route traffic through the tunnel on the Cloudflare side. We recommend using an RFC1918 address scheme with a `/31` netmask, as it provides the most efficient use of IP address space.\n\n  4. In **Customer endpoint**, enter your router's public IP address. This value is only required if your router uses an IKE (Internet Key Exchange) ID of type `ID_IPV4_ADDR`.\n\n  5. In **Cloudflare endpoint**, enter the anycast address you received from your account team. Refer to [Check your Cloudflare IPs](https://developers.cloudflare.com/magic-transit/cloudflare-ips/#check-your-cloudflare-ips) for more information on where to find your Cloudflare IP addresses.\n\n  6. *(Optional)* **Tunnel health checks** are enabled by default. If you disable Tunnel health checks, your tunnels appear 100% down in your [tunnel health dashboard](https://developers.cloudflare.com/magic-transit/network-health/check-tunnel-health-dashboard/) even when working. Cloudflare keeps sending traffic through the tunnel without the means to detect if the tunnel goes down. You must set up your own system to detect down tunnels, as Cloudflare cannot warn you about down tunnels. Refer to [Tunnel health checks](https://developers.cloudflare.com/magic-transit/reference/tunnel-health-checks/) for more information.\n\n  7. *(Optional)* If you keep **Tunnel health checks** enabled, choose a [health check rate](https://developers.cloudflare.com/magic-transit/network-health/update-tunnel-health-checks-frequency/) for your tunnel. Available options are *Low*, *Medium* and *High*.\n\n  8. *(Optional)* The **Health check type** defaults to *Reply* and to creating an ICMP reply. If your firewall drops this type of packet because it assumes the packet is an attack, change this option to *Request* which creates an ICMP request. Refer to [Tunnel health checks](https://developers.cloudflare.com/magic-transit/reference/tunnel-health-checks/) for more information.\n\n  9. *(Optional)* The **Health check direction** defaults to **unidirectional** for Magic Transit. Refer to [Bidirectional vs unidirectional health checks](#bidirectional-vs-unidirectional-health-checks) for more details.\n\n  10. *(Optional)* **Health check target** is the customer end of the tunnel. This field is only visible when the **Health check direction** is set to *Unidirectional*.\n\n      Note\n\n      IPsec tunnels will not function without a pre-shared key (PSK).\n\n  11. If you do not have a pre-shared key yet:\n\n      1. Select **Add pre-shared key later**.\n      2. *(Optional)* We recommend you test your tunnel configuration before officially adding it. To test the tunnel, select **Test tunnels**.\n      3. Select **Add tunnels**.\n      4. The Cloudflare dashboard loads the list of tunnels you have configured. The IPsec tunnel you just created displays a warning triangle icon to indicate it is not yet functional. Select **Edit**.\n      5. Choose **Generate a new pre-shared key** > **Update and generate a pre-shared key**. Save the key to a safe place, and select **Done**.\n\n  12. If you already have a pre-shared key:\n\n      1. Select **Use my own pre-shared key**.\n      2. Paste your key in **Your pre-shared key**.\n      3. *(Optional)* We recommend you test your tunnel before officially adding it. To test the tunnel, select **Test tunnels**.\n      4. Select **Add tunnels**.\n\n  13. (Optional) Enable **Replay protection** if you have devices that do not support disabling it. Refer to [Anti-replay protection](https://developers.cloudflare.com/magic-transit/reference/anti-replay-protection/) for more information.\n\n  1) To add multiple tunnels, select **Add IPsec tunnel** for each new tunnel.\n\n  1. After adding your tunnel information, select **Add tunnels**.\n\n* API\n\n  Note\n\n  You will need your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and [API token](https://developers.cloudflare.com/fundamentals/api/get-started/account-owned-tokens/) to use the API.\n\n  GRE tunnel\n\n  Create a `POST` request [using the API](https://developers.cloudflare.com/api/resources/magic_transit/subresources/gre_tunnels/methods/create/) to create a GRE tunnel.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Magic WAN Write`\n  * `Magic Transit Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "IPsec tunnel\n\n  1. Create a `POST` request [using the API](https://developers.cloudflare.com/api/resources/magic_transit/subresources/ipsec_tunnels/methods/create/) to create an IPsec tunnel.\n\n     Note that in the example, replay protection is disabled by default. You can enable it with the flag `\"replay_protection\": true` for each IPsec tunnel, if the devices you use do not support disabling this feature. If you have already created IPsec tunnels, update them with a [`PUT` request](https://developers.cloudflare.com/api/resources/magic_transit/subresources/ipsec_tunnels/methods/update/). Refer to [Anti-replay protection](https://developers.cloudflare.com/magic-transit/reference/anti-replay-protection/) for more information on this topic.\n\n     Required API token permissions\n\n     At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n     * `Magic WAN Write`\n     * `Magic Transit Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Take note of the tunnel `id` value. We will use it to generate a pre-shared key (PSK).\n\n  2. Create a `POST` [request](https://developers.cloudflare.com/api/resources/magic_transit/subresources/ipsec_tunnels/methods/psk_generate/) to generate a PSK. Use the tunnel `id` value you received from the previous command.\n\n     Required API token permissions\n\n     At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n     * `Magic WAN Write`\n     * `Magic Transit Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Take note of your `psk` value.\n\n  3. Create a `PUT` [request](https://developers.cloudflare.com/api/resources/magic_transit/subresources/ipsec_tunnels/methods/update/) to update your IPsec tunnel with the PSK.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "1. Use the `psk` value from step 3 to configure the IPsec tunnel on your equipment as well.\n\n  Configure bidirectional health checks\n\n  Bidirectional health checks are available for GRE and IPsec tunnels. For Magic Transit this option defaults to unidirectional.\n\n  You can change this setting via the API with `\"bidirectional\"` or `\"unidirectional\"`:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Bidirectional vs unidirectional health checks\n\nTo check for tunnel health, Cloudflare sends a [health check probe](https://developers.cloudflare.com/magic-transit/reference/tunnel-health-checks/) consisting of ICMP (Internet Control Message Protocol) reply [packets](https://www.cloudflare.com/learning/network-layer/what-is-a-packet/) to your network. Cloudflare needs to receive these probes to know if your tunnel is healthy.\n\nCloudflare defaults to unidirectional health checks for Magic Transit (direct server return), and bidirectional health checks for Magic WAN. However, routing unidirectional ICMP reply packets over the Internet to Cloudflare is sometimes subject to drops by intermediate network devices, such as stateful firewalls. Magic Transit customers with egress traffic can modify this setting to bidirectional.\n\nIf you are a Magic Transit customer with egress traffic, refer to [Magic Transit egress traffic](https://developers.cloudflare.com/magic-transit/reference/egress/) for more information on the technical aspects you need to consider to create a successful connection to Cloudflare.\n\n### Legacy bidirectional health checks\n\nFor customers using the legacy health check system with a public IP range, Cloudflare recommends:\n\n* Configuring the tunnel health check target IP address to one within the `172.64.240.252/30` prefix range.\n* Applying a policy-based route that matches [packets](https://www.cloudflare.com/learning/network-layer/what-is-a-packet/) with a source IP address equal to the configured tunnel health check target (for example `172.64.240.253/32`), and route them over the tunnel back to Cloudflare.\n\n</page>\n\n<page>\n---\ntitle: Build the app frontend and UI  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/index.md\n---\n\n* Watch this episode\n\n  In this video, we set up the frontend starter code (the starter code is located in the Veet GitHub repository), connect to Durable Objects using a call room ID, and display a local video preview.\n\n  **Related content**\n\n  For additional resources on learning Durable Objects with Cloudflare, refer to the following resources:\n\n  * [Veet Github repository code](https://github.com/megaconfidence/veet)\n  * [Cloudflare Durable Objects documentation](https://developers.cloudflare.com/durable-objects/)\n  * [Cloudflare TURN service documentation](https://developers.cloudflare.com/realtime/turn/)\n  * [CLI command for creating new Workers and Pages projects](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [Hopscotch.io for local WebSocket testing](https://hoppscotch.io/)\n  * [Sign up for a Cloudflare account](https://dash.cloudflare.com/sign-up)\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: Deploy your video call app  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/index.md\n---\n\n* Watch this episode\n\n  We are almost done with the project, and in this final episode, we add the finishing touches, such as learning how to handle call disconnections, wiring up essential media controls like muting/unmuting and video toggling, and integrating a TURN server to ensure reliable connections even behind firewalls. By the end of this video, your app will be fully functional and ready for deployment.\n\n  **Related content**\n\n  For additional resources on learning Durable Objects with Cloudflare, refer to the following resources:\n\n  * [Veet Github repository code](https://github.com/megaconfidence/veet)\n  * [Cloudflare Durable Objects documentation](https://developers.cloudflare.com/durable-objects/)\n  * [Cloudflare TURN service documentation](https://developers.cloudflare.com/realtime/turn/)\n  * [CLI command for creating new Workers and Pages projects](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [Hopscotch.io for local WebSocket testing](https://hoppscotch.io/)\n  * [Sign up for a Cloudflare account](https://dash.cloudflare.com/sign-up)\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: Introduction to the series  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/index.md\n---\n\n* Watch this episode\n\n  In this episode, we present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: Make and answer WebRTC calls  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/index.md\n---\n\n* Watch this episode\n\n  In this video, we build on the frontend we set up earlier by adding functionality for making and answering WebRTC video calls. You will learn how to create peer-to-peer connections, handle ICE candidates, and seamlessly send and receive video streams between users.\n\n  **Related content**\n\n  For additional resources on learning Durable Objects with Cloudflare, refer to the following resources:\n\n  * [Veet Github repository code](https://github.com/megaconfidence/veet)\n  * [Cloudflare Durable Objects documentation](https://developers.cloudflare.com/durable-objects/)\n  * [Cloudflare TURN service documentation](https://developers.cloudflare.com/realtime/turn/)\n  * [CLI command for creating new Workers and Pages projects](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [Hopscotch.io for local WebSocket testing](https://hoppscotch.io/)\n  * [Sign up for a Cloudflare account](https://dash.cloudflare.com/sign-up)\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: Real-time messaging with WebSockets  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/index.md\n---\n\n* Watch this episode\n\n  Now, we'll take it a step further by enabling our server to receive and broadcast messages. In this video, you'll learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections. By the end, you will have completed the backend for our video call app.\n\n  **Related content**\n\n  For additional resources on learning Durable Objects with Cloudflare, refer to the following resources:\n\n  * [Veet Github repository code](https://github.com/megaconfidence/veet)\n  * [Cloudflare Durable Objects documentation](https://developers.cloudflare.com/durable-objects/)\n  * [Cloudflare TURN service documentation](https://developers.cloudflare.com/realtime/turn/)\n  * [CLI command for creating new Workers and Pages projects](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [Hopscotch.io for local WebSocket testing](https://hoppscotch.io/)\n  * [Sign up for a Cloudflare account](https://dash.cloudflare.com/sign-up)\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: Create a serverless websocket 'backend'  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/index.md\n---\n\n* Watch this episode\n\n  In this video, we'll create a WebSocket backend using serverless technology, making the process simpler than ever before. You'll learn how to create your first Durable Object, set up a WebSocket server to coordinate connections, and keep track of connected clients.\n\n  **Related content**\n\n  For additional resources on learning Durable Objects with Cloudflare, refer to the following resources:\n\n  * [Veet Github repository code](https://github.com/megaconfidence/veet)\n  * [Cloudflare Durable Objects documentation](https://developers.cloudflare.com/durable-objects/)\n  * [Cloudflare TURN service documentation](https://developers.cloudflare.com/realtime/turn/)\n  * [CLI command for creating new Workers and Pages projects](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [Hopscotch.io for local WebSocket testing](https://hoppscotch.io/)\n  * [Sign up for a Cloudflare account](https://dash.cloudflare.com/sign-up)\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: What are Durable Objects?  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/\n  md: https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/index.md\n---\n\n* Watch this episode\n\n  In this video, we show how Durable Objects work and start building a video call app together.\n\n  **Related content**\n\n  For additional resources on learning Durable Objects with Cloudflare, refer to the following resources:\n\n  * [Veet Github repository code](https://github.com/megaconfidence/veet)\n  * [Cloudflare Durable Objects documentation](https://developers.cloudflare.com/durable-objects/)\n  * [Cloudflare TURN service documentation](https://developers.cloudflare.com/realtime/turn/)\n  * [CLI command for creating new Workers and Pages projects](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [Hopscotch.io for local WebSocket testing](https://hoppscotch.io/)\n  * [Sign up for a Cloudflare account](https://dash.cloudflare.com/sign-up)\n\n* Series overview\n\n  [Watch Episode 1: Introduction to the series ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/introduction-to-series-1/)We present an overview of the series, discuss its underlying architecture, and access resources to set up the project locally.\n\n  [Watch Episode 2: What are Durable Objects? ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/what-are-durable-objects-2/)We show how Durable Objects work and start building a video call app together.\n\n  [Watch Episode 3: Create a serverless websocket 'backend' ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/serverless-websocket-backend-3/)We create a WebSocket backend using serverless technology, making the process simpler than ever before.\n\n  [Watch Episode 4: Real-time messaging with WebSockets ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/real-time-messaging-with-websockets-4/)We learn how to route and broadcast incoming messages from WebSocket connections and implement error handling such as closed WebSocket connections.\n\n  [Watch Episode 5: Build the app frontend and UI ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/build-the-app-frontend-5/)We configure the frontend starter code, connect to Durable Objects using a call room ID, and display a local video preview.\n\n  [Watch Episode 6: Make and answer WebRTC calls ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/make-answer-webrtc-calls-6/)We expand the frontend functionality by adding functionality for making and answering WebRTC video calls.\n\n  [Watch Episode 7: Deploy your video call app ](https://developers.cloudflare.com/learning-paths/durable-objects-course/series/deploy-your-video-call-app-7/)In this final episode, we configure the remaining functionalities. By the end, your app will be fully functional and ready for deployment.\n\n</page>\n\n<page>\n---\ntitle: Set policy based on approval status  Cloudflare Learning Paths\ndescription: If you use specific AI tools within your organization, you may want\n  to create policies to explicitly allow the usage of those tools while\n  continuing to evaluate additional usage within your organization.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/build-security-policies/set-policy-approval/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/build-security-policies/set-policy-approval/index.md\n---\n\nIf you use specific AI tools within your organization, you may want to create policies to explicitly allow the usage of those tools while continuing to evaluate additional usage within your organization.\n\n## Create a Gateway policy for monitoring and evaluating all AI tool usage\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Gateway** > **Firewall policies**.\n\n2. In the **HTTP** tab, select **Add a policy**.\n\n3. Name the policy.\n\n4. Under **Traffic**, build a logical expression that defines the traffic you want to allow for AI at your organization.\n\n   | Selector | Operator | Value |\n   | - | - | - |\n   | Application | in | *Artificial Intelligence* |\n\n5. For **Action**, select **Allow**.\n\n6. Select **Create policy**.\n\nFor more information, refer to [Block unauthorized applications](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/common-policies/#block-unauthorized-applications).\n\n## Create a Gateway policy to redirect users towards approved AI tools\n\nConversely, you can build policies that take specific actions based on an AI tool's approval status. For example, if you want to redirect users from unapproved applications to approved applications, you can create custom status pages to provide user coaching.\n\nUser coaching is a valuable tool for encouraging employees to change their behavior. By redirecting users to a status page, you can help them understand the risks of using unsanctioned AI tools and educate them on the dangers of inputting sensitive data.\n\nCloudflare Workers are an easy method to stand up custom user coaching pages. The customs status pages can be handled dynamically based on the information that Gateway sends about a blocked request. In the appendix of this document, you can find sample code for a Cloudflare Worker built for this purpose that you can test and adopt if desired.\n\n## Redirect users towards approved AI tools\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n\n2. In the **HTTP** tab, select **Add a policy**.\n\n3. Name the policy.\n\n4. Under **Traffic**, build a logical expression that defines the traffic you want to allow for AI at your organization.\n\n   | Selector | Operator | Value |\n   | - | - | - |\n   | Application | in | *Artificial Intelligence* |\n\n5. For **Action**, select **Block**.\n\n6. To **Modify the Gateway block behavior**, determine how you want to redirect your users.\n\n   * Redirect users to a custom block page to coach the user:\n\n     1. Select **Use account-level block setting**.\n     2. Check **Add an additional message to your custom block page when traffic matches** this policy and enter your custom message.\n\n   * Redirect users to an approved AI tool automatically:\n\n     1. Select **Override account setting with URL redirect**.\n     2. Enter the URL to the approved application you want to redirect the user to use instead.\n\n7. Select **Create policy**.\n\nFor more information, refer to [Configure policy block behavior](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#configure-policy-block-behavior).\n\n## Capture prompts to prevent data loss\n\nYou can build policies that enable Prompt Capture for AI applications in specific, complex scenarios. This gives you the flexibility to apply advanced functionality to certain applications, tool types, or user groups, such as contractors or new employees, especially if they pose a higher risk for using unsanctioned applications due to lack of awareness or training.\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n\n2. In the **HTTP** tab, select **Add a policy**.\n\n3. Name the policy.\n\n4. Under **Traffic**, build a logical expression that defines the traffic you want to allow for AI at your organization.\n\n   | Selector | Operator | Value |\n   | - | - | - |\n   | Application | in | *Artificial Intelligence* |\n\n5. Under **Identity**, build a logical express that defines the user identity you want to capture and log their prompts to review for data loss prevention.\n\n   | Selector | Operator | API Value |\n   | - | - | - |\n   | Application | in | `any(identity.groups.name[*] in {\\\"contractors\\\" \\\"cohort-224\\\"})` |\n\n6. For **Action**, select **Allow**.\n\n7. Select **Create policy**.\n\n## Configure Gateway to use ChatGPT workspace header\n\nIf your organization uses [ChatGPT Business](https://chatgpt.com/business/), you can configure a Gateway policy to enforce the use of your organization's workspace ID, ensuring all traffic to ChatGPT is correctly associated with your account. This will implement Gateway [tenant control](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tenant-control/), which lets you manage how users interact with specific applications.\n\nTo create this policy, you will add a custom HTTP header to your Gateway policy. This header, `Chatgpt-Allowed-Workspace-Id`, ensures that only requests with your organization's unique workspace ID are permitted.\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Traffic policies** > **Firewall policies**.\n\n2. In the **HTTP** tab, select **Add a policy**.\n\n3. Name the policy.\n\n4. Under **Traffic**, build a logical expression that defines the traffic you want to allow.\n\n   | Selector | Operator | Value |\n   | - | - | - |\n   | Application | in | *ChatGPT* |\n\n5. In **Action**, choose *Allow*.\n\n6. In **Untrusted certificate action**, choose *Block*.\n\n7. Under **Add headers to matched requests**, select **Add a header**.\n\n8. Add the following values to each field:\n\n   * **Custom header name**: `Chatgpt-Allowed-Workspace-Id`\n   * **Custom header value**: Your organization's workspace ID\n\n9. Select **Create policy**.\n\nFor more information, refer to the [OpenAI documentation](https://help.openai.com/articles/8798594-what-is-a-workspace-how-do-i-access-my-chatgpt-business-workspace).\n\n## Order your policies for specific inspection and enforcement\n\nIn most scenarios, Gateway evaluates HTTP policies in [top-down order](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/order-of-enforcement/). Therefore, you can capture prompts in specific scenarios to gain visibility without disrupting your users' work, all while holistically protecting against sensitive data loss.\n\nFor example, if you want to prevent sensitive data being shared with AI but want to allow all users to use AI but capture the prompts for specific identity-defined user groups, you would need to order your policies in the following way.\n\n1. The policy that blocks sensitive data being shared would need to be ordered first in this policy group. This will allow it to be enforced before the next policy in the policy group.\n\n   | Operator | Selector | Operator | Value | Action |\n   | - | - | - | - | - |\n   | | Application | in | *Artificial Intelligence* | |\n   | And | DLP Profile | in | *my-sensitive-data* | Block |\n\n2. Next, create the policy that allows the use of AI and specifies the prompt capture for specific user groups.\n\n   | Selector | Operator | Value |\n   | - | - | - |\n   | Application | in | *Artificial Intelligence* |\n\n3. Under **Traffic**:\n\n   | Selector | Operator | Value |\n   | - | - | - |\n   | Application | in | *Artificial Intelligence* |\n\n4. Under **Identity**:\n\n   | Selector | Operator | API Value | Action |\n   | - | - | - | - |\n   | User Group Names | in | `any(identity.groups.name[*] in {\\\"contractors\\\" \\\"cohort-224\\\"})` | Allow |\n\nBy structuring your policies in this way, you ensure that any instance of sensitive data is blocked from AI applications, no matter which user group is involved. If Cloudflare does not detect sensitive data, it will allow the prompt while capturing it for the targeted user groups  in this case, users belonging to the `contractors` and `cohort-224` groups. If that same user group were to then use sensitive data in a prompt, it would be detected and blocked.\n\n</page>\n\n<page>\n---\ntitle: Use Cloudflare Workers to create custom user coaching pages  Cloudflare\n  Learning Paths\ndescription: Cloudflare Workers are an easy method to stand up custom user\n  coaching pages. The customs status pages can be handled dynamically based on\n  the information that Gateway sends about a blocked request.\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/appendix/workers-create-custom-coaching-pages/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/appendix/workers-create-custom-coaching-pages/index.md\n---\n\nCloudflare Workers are an easy method to stand up custom user coaching pages. The customs status pages can be handled dynamically based on the information that Gateway sends about a blocked request.\n\n## Example",
      "language": "unknown"
    },
    {
      "code": "If successful, your custom user coaching page will look like the image below. It will appear anytime a user attempts to access an unapproved AI tool.\n\n![Example of a custom coaching page utilizing the code example above.](https://developers.cloudflare.com/_astro/custom-coaching-page.BN8XQVn6_205IeI.webp)\n\n</page>\n\n<page>\n---\ntitle: What is Model Context Protocol (MCP)?  Cloudflare Learning Paths\ndescription: Model Context Protocol (MCP) is a standardized way for AI agents to\n  get the information and tools they need to operate. Similar to how an API\n  works, it is a protocol that allows AI programs to connect to external sources\n  of information and take actions in the real world, going beyond the limits of\n  their original training data.\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/concepts/mcp/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/concepts/mcp/index.md\n---\n\n[Model Context Protocol (MCP)](https://www.cloudflare.com/learning/ai/what-is-model-context-protocol-mcp/) is a standardized way for AI agents to get the information and tools they need to operate. Similar to how an API works, it is a protocol that allows AI programs to connect to external sources of information and take actions in the real world, going beyond the limits of their original training data.\n\n## How does MCP work?\n\nMCP uses a client-server architecture where an AI agent acts as the client and sends requests to a server. This allows the AI agent to connect to multiple servers at once to get the information it needs. An MCP server is a program that exposes capabilities to AI agents, giving them access to new datasets or tools  like an email service to send messages on behalf of a user.\n\n## What are the security concerns with MCP?\n\nMCP doesn't have native authentication, authorization, or encryption. Because it functions similarly to an API, many of the same security considerations apply. If developers do not proactively implement security measures like Transport Layer Security (TLS) and rate limiting, MCP servers can be vulnerable to attacks, data leaks, and unauthorized access. Organizations must ensure that they validate inputs and protect confidential data to secure their MCP implementations.\n\n</page>\n\n<page>\n---\ntitle: What is Shadow AI?  Cloudflare Learning Paths\ndescription: Shadow AI is the use of any AI tool or application by employees\n  without the formal approval or oversight of the IT department. A common\n  example is an employee using a generative AI application like ChatGPT to draft\n  a report or analyze data, unknowingly exposing the company to significant\n  risks. While employees often turn to these tools to increase productivity,\n  their use can lead to major issues with data security, compliance, and even a\n  company's reputation. For IT and security leaders, the key to managing these\n  risks is to create a robust AI strategy that includes clear policies and\n  governance.\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/concepts/shadow-ai/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/concepts/shadow-ai/index.md\n---\n\nShadow AI is the use of any AI tool or application by employees without the formal approval or oversight of the IT department. A common example is an employee using a generative AI application like ChatGPT to draft a report or analyze data, unknowingly exposing the company to significant risks. While employees often turn to these tools to increase productivity, their use can lead to major issues with data security, compliance, and even a company's reputation. For IT and security leaders, the key to managing these risks is to create a robust AI strategy that includes clear policies and governance.\n\n## Manage the risks of shadow AI\n\nSince it may not be feasible to eliminate all instances of shadow AI, organizations can manage the risks by taking a balanced approach. First, it is essential to foster collaboration and open communication between IT and other departments to understand why employees are using these tools. Next, implement guardrails by developing a flexible governance framework with clear guidelines on which types of AI systems can be used and how sensitive information should be handled. Finally, monitor AI usage with network tools to track what is being used and educate employees on the risks of unauthorized AI.\n\nTo combat the risks associated with shadow AI, Cloudflare's API-driven CASB integrates with SaaS applications and cloud environments to scan for misconfigurations, unauthorized user activity, shadow IT, and other data security issues that can occur after a user has successfully logged in.\n\n</page>\n\n<page>\n---\ntitle: What is Shadow IT?  Cloudflare Learning Paths\ndescription: Shadow IT is the use of IT hardware, software, or services by\n  employees or departments without the knowledge or approval of the company's IT\n  and security teams. This can include anything from cloud services and apps to\n  hardware, like personal laptops or servers.\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/concepts/shadow-it/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/concepts/shadow-it/index.md\n---\n\nShadow IT is the use of IT hardware, software, or services by employees or departments without the knowledge or approval of the company's IT and security teams. This can include anything from cloud services and apps to hardware, like personal laptops or servers.\n\nThe biggest driver of shadow IT today is the widespread adoption of cloud services, especially software-as-a-service (SaaS). Employees are accustomed to downloading and using apps to boost productivity, but this behavior often bypasses traditional IT oversight, creating a significant security blind spot.\n\n</page>\n\n<page>\n---\ntitle: Additional setup for AI security solutions in Zero Trust  Cloudflare\n  Learning Paths\ndescription: To use the recommended AI security solutions in this learning path,\n  you will need to complete some additional setup for your Zero Trust\n  deployment, such as turning on Shadow IT Discovery.\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/get-started/additional-setup/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/get-started/additional-setup/index.md\n---\n\nTo use the recommended AI security solutions in this learning path, you will need to complete some additional setup for your Zero Trust deployment, such as turning on [Shadow IT Discovery](https://developers.cloudflare.com/cloudflare-one/insights/analytics/shadow-it-discovery/#turn-on-shadow-it-discovery).\n\nNote\n\nIf you are new to securing your Internet traffic, refer to [Secure your internet traffic and SaaS apps](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/concepts/) to get started and then return to this learning path to continue securing your organizations.\n\n</page>\n\n<page>\n---\ntitle: Define your company's AI risk tolerance and strategy  Cloudflare\n  Learning Paths\ndescription: Before you can secure AI, you need to understand your\n  organization's goals and concerns for your users and data. This first step is\n  crucial for anyone new to AI security because it helps you align on your\n  overall risk tolerance for generative AI.\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/get-started/define-ai-risk-tolerance/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/get-started/define-ai-risk-tolerance/index.md\n---\n\nBefore you can secure AI, you need to understand your organization's goals and concerns for your users and data. This first step is crucial for anyone new to AI security because it helps you align on your overall risk tolerance for generative AI.\n\nThe level of risk you are willing to accept will determine how quickly you need to act and how deeply you need to implement security measures. Your specific concerns will then guide the exact security approaches you take to monitor and control AI usage.\n\nTo begin, consider these questions to help shape your strategy:\n\n* Sanctioned versus shadow AI: Are your employees already using approved AI services, or are you primarily concerned with shadow AI  unapproved applications that may pose a risk? Note: Some approved vendors may offer embedded AI functionality. Consider whether those AI services are a risk, too.\n* Data sensitivity: What types of sensitive data do you currently monitor, classify, and protect? This will help you identify what you need to safeguard when employees interact with AI. If you have not determined this yet, refer to [Define your sensitive data](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/data-loss-prevention/#define-your-sensitive-data) to learn more.\n* Encouraging user behavior: Do you want to encourage or limit user engagement with AI? How much do you expect your employees to use AI in a controlled, sanctioned way?\n\n</page>\n\n<page>\n---\ntitle: Monitor prompts and responses  Cloudflare Learning Paths\ndescription: \"When you enable TLS decryption, you can review the prompts and\n  responses for supported AI applications. This allows you to understand three\n  key things about AI application usage:\"\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/monitor-ai-use/monitor-prompts-responses/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/monitor-ai-use/monitor-prompts-responses/index.md\n---\n\nWhen you enable [TLS decryption](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#turn-on-tls-decryption), you can review the prompts and responses for supported AI applications. This allows you to understand three key things about AI application usage:\n\n* The sanctioned and unsanctioned AI tools your users are engaging with.\n* How they are interacting with them.\n* What information they are sharing.\n\n![Log entry for a prompt detected using AI prompt protection.](https://developers.cloudflare.com/_astro/gateway-prompt-log.CZ61RAFw_Z1V88LB.webp)\n\nYou can use this in conjunction with [DLP profiles](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/) to detect sensitive data potentially being used in prompts, with or without explicitly blocking the action. You can use DLP to log AI prompt topics by turning on [Capture generative AI prompt content in logs](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-policies/logging-options/#turn-on-ai-prompt-content-logging-for-a-dlp-policy) for the policy.\n\n</page>\n\n<page>\n---\ntitle: Review inline AI use  Cloudflare Learning Paths\ndescription: \"To review how your organization uses AI apps, start with the\n  Cloudflare Shadow IT dashboard. You can filter the dashboard by application\n  type and sort by Artificial Intelligence, which allows you to take several\n  valuable actions, such as:\"\nlastUpdated: 2025-08-26T10:01:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/monitor-ai-use/review-inline-ai-use/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/monitor-ai-use/review-inline-ai-use/index.md\n---\n\nTo review how your organization uses AI apps, start with the Cloudflare [Shadow IT dashboard](https://developers.cloudflare.com/cloudflare-one/insights/analytics/shadow-it-discovery/). You can filter the dashboard by application type and sort by Artificial Intelligence, which allows you to take several valuable actions, such as:\n\n* Reviewing application usage: See which applications your users are engaging with and how often, based on traffic from connected devices or sites.\n* Accessing application details: Learn more about the applications in use by reviewing their entries in the App Library.\n* Designating application status: Use a [status marker](https://developers.cloudflare.com/cloudflare-one/insights/analytics/shadow-it-discovery/#approval-status) to categorize applications, so you can apply specific security policies to them.\n\n![Shadow IT dashboard showing utilization of application statuses (Approved, Unapproved, In Review, Unreviewed).](https://developers.cloudflare.com/_astro/shadowit-dashboard-ai-apps.Dbzn4dka_CHA6p.webp)\n\nThis approach is most relevant for applications that your organization has not yet sanctioned. For example, if your business uses Google Workspace and its primary AI tool is Gemini, you would likely mark Gemini as *Approved*. While you can configure more specific data loss policies later, you can also target approved applications with greater specificity to detect risks unique to your organization.\n\n![The App Library filtered to show some of the supported Artificial Intelligence applications.](https://developers.cloudflare.com/_astro/ai-app-type-app-library.C5AB815M_Z2dzOwT.webp)\n\n</page>\n\n<page>\n---\ntitle: Review out-of-band AI use  Cloudflare Learning Paths\ndescription: If your organization does not use the Cloudflare device client, or\n  does not proxy HTTP traffic, you can still get valuable data about shadow AI\n  usage if you use the Google Workspace, Microsoft 365, or GitHub integrations\n  for the Cloudflare Cloud Access Security Broker (CASB).\nlastUpdated: 2025-10-24T15:44:40.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/holistic-ai-security/monitor-ai-use/review-out-of-band-ai/\n  md: https://developers.cloudflare.com/learning-paths/holistic-ai-security/monitor-ai-use/review-out-of-band-ai/index.md\n---\n\nIf your organization does not use the Cloudflare device client, or does not proxy HTTP traffic, you can still get valuable data about shadow AI usage if you use the [Google Workspace](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/google-workspace/), [Microsoft 365](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/microsoft-365/), or [GitHub](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/github/) integrations for the Cloudflare Cloud Access Security Broker (CASB).\n\nThe CASB provides detailed information about your SaaS environment, including changes to sensitive data, content, and application settings. It works even if your users do not have the Cloudflare device client installed. By using CASB integrations with your core Single Sign-On (SSO) provider, you can see if users have authenticated to any third-party applications. This offers a clear, non-invasive way to understand tool usage across your organization without needing to deploy a client.\n\n</page>\n\n<page>\n---\ntitle: Monitors and health checks  Cloudflare Learning Paths\ndescription: There's more to a load balancer than just distributing traffic, however.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/health-checks/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/health-checks/index.md\n---\n\nThere's more to a load balancer than just distributing traffic, however.\n\nAfter all, what good would it be if your load balancer and pools send a request to a server that's offline? Or one that's already overloaded with traffic? Ideally, your load balancer should only forward requests that a server can take care of.\n\nThat's where another part of the load balancing equation comes in: monitors and health checks.",
      "language": "unknown"
    },
    {
      "code": "## How it works\n\nA monitor issues health checks periodically to evaluate the health of a each server within a pool.\n\nRequests issued by a monitor at regular interval and  depending on the monitor settings  return a **pass** or **fail** value to make sure an endpoint is still able to receive traffic.\n\nEach health monitor request is trying to answer two questions:\n\n1. **Is the endpoint offline?**: Does the endpoint respond to the health monitor request at all? If so, does it respond quickly enough (as specified in the monitor's **Timeout** field)?\n2. **Is the endpoint working as expected?**: Does the endpoint respond with the expected HTTP response codes? Does it include specific information in the response body?\n\nIf the answer to either of these questions is \"No\", then the endpoint fails the health monitor request.\n\nThis system of request and response ensures that a load balancer knows which servers can handle incoming requests.\n\n</page>\n\n<page>\n---\ntitle: Components of a load balancer  Cloudflare Learning Paths\ndescription: \"At it's most basic, load balancing is made up of three components:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/load-balancer-components/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/load-balancer-components/index.md\n---\n\nAt it's most basic, load balancing is made up of three components:\n\n* **Pools**: Which contain one or more endpoints.\n* **Endpoints**: Which respond to individual requests.\n* **A load balancer**: Which decides which traffic goes to each pool.\n\n## How it works\n\nNormally, requests to your application would go to individual servers directly.\n\nWith a load balancer, requests first go through the load balancer. Your load balancer then routes requests to specific pools.",
      "language": "unknown"
    },
    {
      "code": "Within each pool, requests then go to individual endpoints. And that endpoint is what responds to the request.",
      "language": "unknown"
    },
    {
      "code": "This progression of load balancer --> pool --> endpoint is the core part of how a load balancer works.\n\n</page>\n\n<page>\n---\ntitle: What is load balancing?  Cloudflare Learning Paths\ndescription: On the Internet, load balancing is where you spread traffic across\n  many servers.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/load-balancing/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/load-balancing/index.md\n---\n\nOn the Internet, load balancing is where you spread traffic across many servers.\n\nThis process reduces the strain on each server, making it more efficient and faster to respond to requests.\n\n## How it works\n\nImagine a checkout line at the grocery store.\n\nIf only one register is open, the line is going to be long and move slowly. Additionally, the employee at the register is going to be stressed. They have a lot of work to do, likely without any breaks and with increasingly frustrated customers.\n\nAs the store manager, you could solve the problem by opening more checkout lines. Customers can spread out to different lines and move faster. And your employees can do their job without as much stress.\n\nMuch in the same way, a load balancer distributes traffic across many servers. Without load balancing, too many requests might hit the same server and make it work too hard.\n\n![Too much traffic can overload one of your servers](https://developers.cloudflare.com/_astro/without-load-balancing-diagram.CA4vGt0s_YmWo5.webp)\n\nA load balancer spreads requests across your servers, which prevents any one server from working too hard. Load balancing also makes your servers more efficient and lets them respond faster to incoming requests.\n\n![A load balancer distributes traffic across your servers](https://developers.cloudflare.com/_astro/with-load-balancing-diagram.J1vO69li_qidJH.webp)\n\n## Related resources\n\nFor more background information on load balancers, refer to our [Learning Center](https://www.cloudflare.com/learning/performance/what-is-load-balancing/).\n\n</page>\n\n<page>\n---\ntitle: Routing traffic  Cloudflare Learning Paths\ndescription: Before, we covered how requests move from load balancers to pools\n  and then from pools to individual servers.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/routing/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/concepts/routing/index.md\n---\n\nBefore, we covered how requests move from load balancers to pools and then from pools to individual servers.\n\nWhat we did not mention, however, was *how* the load balancer and pools make those decisions.\n\nThis is a concept known as routing.\n\n## How it works\n\nGenerally, there are five questions involved with routing:\n\n1. By default, how does the load balancer distribute requests to pools?\n2. By default, how do pools distribute requests to individual servers?\n3. Within a pool, which servers are healthy?\n4. Within a load balancer, which pools are healthy?\n5. Are there any specialized routing rules?\n\n### Distributing requests to pools\n\nA load balancer's [traffic steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) controls how the load balancer distributes requests to pools.\n\nRouting decisions can be based on proximity, pool performance, geography, and more.\n\n### Distributing requests within pools\n\nOnce the request reaches a pool, that pool's [endpoint steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/) controls how each pool distributes requests to the servers in the pool.\n\nThese decisions can be based on default percentages of traffic sent to individual servers (also known as the **Weight**), aspects of the request (such as source IP address), or both.\n\n### Endpoint health\n\nIf an endpoint fails a health check - which would mark it as unhealthy - its pool will adjust routing according to its endpoint steering policy.\n\nBoth new and existing requests will go to healthy endpoints in the pool, ignoring the unhealthy endpoint.\n\n### Pool health\n\nWith enough unhealthy endpoints, the pool itself may be considered unhealthy as well.\n\nWhen a pool reaches **Critical** health, your load balancer will begin diverting traffic according to its [Traffic steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/):\n\n* **Off**:\n\n  * If the active pool becomes unhealthy, traffic goes to the next pool in order.\n  * If an inactive pool becomes unhealthy, traffic continues to go to the active pool (but would skip over the unhealthy pool in the failover order).\n\n* **All other methods**: Traffic is distributed across all remaining pools according to the traffic steering policy.\n\n#### Fallback pools\n\nOften, load balancers have a special pool known as the **Fallback Pool**, which receives traffic no matter what.\n\nThis pool is meant to be the pool of last resort, meaning that its health is not taken into account when directing traffic.\n\nFallback pools are important because traffic still might be coming to your load balancer even when all the pools are unreachable (disabled or unhealthy). Your load balancer needs somewhere to route this traffic, so it will send it to the fallback pool.\n\n### Specialized routing\n\nFinally, specific settings can also affect the ways a load balancer distributes traffic, such as:\n\n* Routing based on [specific aspects](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/) of the request.\n* Sending all requests from a [specific end user](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/) to the same server, preserving information about their user session like items in a shopping cart.\n\n</page>\n\n<page>\n---\ntitle: Check pool health  Cloudflare Learning Paths\ndescription: Before directing any traffic to your pools, make sure that your\n  pools and monitors are set up correctly. The status of your health check will\n  be unknown until the results of the first check are available.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/check-pool-health/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/check-pool-health/index.md\n---\n\nBefore directing any traffic to your pools, make sure that your pools and monitors are set up correctly. The status of your health check will be *unknown* until the results of the first check are available.\n\n* Dashboard\n\n  To confirm pool health using the dashboard:\n\n  1. Go to **Load Balancing**.\n  2. Select the **Pools** tab.\n  3. For pools and individual endpoints, review the values in the **Health** and **Endpoint Health** columns.\n\n  For more information on pool and endpoint health statuses, refer to [How a pool becomes unhealthy](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/#how-a-pool-becomes-unhealthy).\n\n* API\n\n  To fetch the latest health status of all pools, use the [List Pools](https://developers.cloudflare.com/api/resources/load_balancers/subresources/pools/methods/list/) command, paying attention to the `healthy` value for pools and origins (endpoints).\n\n  For troubleshooting a specific pool's health, use the [Pool Health Details](https://developers.cloudflare.com/api/resources/load_balancers/subresources/pools/subresources/health/methods/get/) command.\n\n## Unexpected health status\n\nIf you notice that healthy pools are being marked unhealthy:\n\n* Review [how endpoints and pools become unhealthy](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/).\n* Refer to the [Troubleshooting section](https://developers.cloudflare.com/load-balancing/troubleshooting/).\n\n</page>\n\n<page>\n---\ntitle: Create monitor  Cloudflare Learning Paths\ndescription: Instead of starting on your production domain, you likely should\n  create a load balancer on a test or staging domain. This may involve temporary\n  changes to your monitors and pools, depending on your infrastructure setup.\nlastUpdated: 2024-08-19T19:08:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/create-monitor/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/create-monitor/index.md\n---\n\nInstead of starting on your production domain, you likely should create a load balancer on a test or staging domain. This may involve temporary changes to your monitors and pools, depending on your infrastructure setup.\n\nStarting with a test domain allows you to verify everything is working correctly before routing production traffic.\n\n* Dashboard\n\n  **Set up the monitor**\n\n  You can create a monitor within the [load balancer workflow](https://developers.cloudflare.com/load-balancing/load-balancers/create-load-balancer/) or in the **Monitors** tab:\n\n  1. Go to **Load Balancing**.\n\n  2. Select the **Monitors** tab.\n\n  3. Select **Create monitor**.\n\n  4. Add the following information:\n\n     * **Type**: The protocol to use for health monitors\n\n       * *Non-enterprise customers*: Choose **HTTP**, **HTTPS**, or **TCP**.\n       * *Enterprise customers*: Choose **HTTP**, **HTTPS**, **TCP**, **UDP ICMP**, **ICMP Ping**, or **SMTP**.\n\n     * **Path**: The endpoint path to run health monitor requests against\n\n     * **Port**: The destination port for health monitors\n\n  5. For additional settings, select **Advanced health monitor settings**:\n\n     * **Interval**:\n\n       * By increasing the default, you can improve failover time, but you may also increase load on your endpoints.\n       * Minimum time in seconds is 60 (Pro), 15 (Business), and 10 (Enterprise).\n\n     * **Timeout** and **Retries**:\n       * The health monitor request will return unhealthy if it exceeds the duration specified in **Timeout** (and exceeds this duration more times than the specified number of **Retries**).\n\n     * **Expected Code(s)**: The expected HTTP response codes listed individually (`200`, `302`) or as a range (for example, entering `2xx` would cover all response codes in the `200` range).\n\n     * **Response Body**:\n\n       * Looks for a case-insensitive substring in the response body.\n       * Make sure that the value is relatively static and within the first 10 KB of the HTML page.\n\n     * **Simulate Zone**:\n\n       * It is recommended to use the same zone in which the Load Balancer exists.\n       * Changes the egress zone settings of a health monitor request to ensure compatibility with features like [authenticated origin pulls](https://developers.cloudflare.com/ssl/origin-configuration/authenticated-origin-pull/), [Argo Smart Routing](https://developers.cloudflare.com/argo-smart-routing/), and [Dedicated CDN Egress IPs](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/).\n\n     * **Follow Redirects**:\n       * Instead of reporting a `301` or `302` code as unhealthy, the health monitor request follows redirects to the final endpoint.\n\n     * **Configure Request Header(s)**:\n       * Useful if your endpoints are expecting specific incoming headers.\n\n     * **Header**:\n       * The HTTP request headers to send in the health monitor. It is recommended that you set a Host header by default. The User-Agent header cannot be overridden. This parameter is only valid for HTTP and HTTPS monitors.\n\n  6. Select **Save**.\n\n  Note\n\n  To increase confidence in pool status, you can also increase the `consecutive_up` and `consecutive_down` fields when [creating a monitor with the API](https://developers.cloudflare.com/api/resources/load_balancers/subresources/monitors/methods/create/).\n\n  To become healthy or unhealthy, monitored endpoints must pass this health monitor request the consecutive number of times specified in these parameters.\n\n  **Prepare your servers**\n\n  Make sure that your firewall or web server does not block or rate limit your configured health monitors or requests associated with [Cloudflare IP addresses](https://www.cloudflare.com/ips).\n\n  Each health monitor has the HTTP user-agent of `\"Mozilla/5.0 (compatible; Cloudflare-Traffic-Manager/1.0; +https://www.cloudflare.com/traffic-manager/; pool-id: $poolid)\"`, where the `$poolid` is the first 16 characters of the [associated pool](https://developers.cloudflare.com/load-balancing/pools/).\n\n  Warning\n\n  If you know that your endpoint is healthy but Load Balancing is reporting it as unhealthy, refer to our [Monitor troubleshooting guide](https://developers.cloudflare.com/load-balancing/troubleshooting/load-balancing-faq/#why-is-my-endpoint-or-pool-considered-unhealthy).\n\n* API\n\n  **Set up the monitor**\n\n  For a full list of monitor properties, refer to [Create Monitor](https://developers.cloudflare.com/api/resources/load_balancers/subresources/monitors/methods/create/). If you need help with API authentication, refer to [Cloudflare API documentation](https://developers.cloudflare.com/fundamentals/api/).\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Load Balancing: Monitors and Pools Write`",
      "language": "unknown"
    },
    {
      "code": "The response contains the complete definition of the new monitor.",
      "language": "unknown"
    },
    {
      "code": "**Prepare your servers**\n\n  Make sure that your firewall or web server does not block or rate limit your configured health monitors or requests associated with [Cloudflare IP addresses](https://www.cloudflare.com/ips).\n\n  Each health monitor has the HTTP user-agent of `\"Mozilla/5.0 (compatible; Cloudflare-Traffic-Manager/1.0; +https://www.cloudflare.com/traffic-manager/; pool-id: $poolid)\"`, where the `$poolid` is the first 16 characters of the [associated pool](https://developers.cloudflare.com/load-balancing/pools/).\n\n  Warning\n\n  If you know that your endpoint is healthy but Load Balancing is reporting it as unhealthy, refer to our [Monitor troubleshooting guide](https://developers.cloudflare.com/load-balancing/troubleshooting/load-balancing-faq/#why-is-my-endpoint-or-pool-considered-unhealthy).\n\nExample monitor configuration\n\n| Field | Value |\n| - | - |\n| Type | HTTP |\n| Path | / |\n| Port | 80 |\n| Interval | 60 |\n| Method | GET |\n| Timeout | 5 seconds |\n| Retries | 2 |\n| Expected Code(s) | 200 |\n\n</page>\n\n<page>\n---\ntitle: Create pools  Cloudflare Learning Paths\ndescription: Instead of starting on your production domain, you likely should\n  create a load balancer on a test or staging domain. This may involve temporary\n  changes to your monitors and pools, depending on your infrastructure setup.\nlastUpdated: 2024-08-19T19:08:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/create-pools/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/create-pools/index.md\n---\n\nInstead of starting on your production domain, you likely should create a load balancer on a test or staging domain. This may involve temporary changes to your monitors and pools, depending on your infrastructure setup.\n\nStarting with a test domain allows you to verify everything is working correctly before routing production traffic.\n\n* Dashboard\n\n  You can create a pool within the [load balancer workflow](https://developers.cloudflare.com/load-balancing/load-balancers/create-load-balancer/) or in the **Pools** tab:\n\n  1. Go to **Load Balancing**.\n\n  2. Select the **Pools** tab and then **Create pool**.\n\n  3. For your pool, enter the following information:\n\n     * A name (must be unique)\n     * A description to provide more detail on the name\n     * A choice for [**Endpoint Steering**](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/), which affects how your pool routes traffic to each endpoint\n\n  4. For each endpoint, enter the following information:\n\n     * A name (must be unique)\n     * The endpoint address or associated hostname\n     * (Optional) A [**Virtual Network**](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/tunnel-virtual-networks/). Required when the endpoint has a private IP address.\n     * A [**Weight**](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/#weights)\n     * (Optional) A [hostname](https://developers.cloudflare.com/load-balancing/additional-options/override-http-host-headers/) by clicking **Add host header**\n     * (Optional) The destination port to which the traffic will be served.\n\n  Note\n\n  If your endpoint is a website or application hosted on [Cloudflare Pages](https://developers.cloudflare.com/pages/), you will need to fill in the host header field with the project domain for it to resolve correctly.\n\n  1. Repeat this process for additional endpoints in the pool.\n\n  2. (Optional) Set up coordinates for [Proximity Steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/proximity-steering/) on the pool.\n\n  3. On the pool, update the following information:\n\n     * **Health Threshold**:\n\n       The Health Threshold is the number of healthy endpoints for the pool as a whole to be considered *Healthy* and receive traffic based on pool order in a load balancer. Increasing this number makes the pool more reliable, but also more likely to become unhealthy.\n\n     * **Monitor**: Attach a [monitor](https://developers.cloudflare.com/load-balancing/monitors/create-monitor/)\n\n     * **Health Monitor Regions**: Choose whether to check pool health from [multiple locations](https://developers.cloudflare.com/load-balancing/monitors/#health-monitor-regions), which increases accuracy but can lead to probe traffic to your endpoint\n\n     * **Pool Notifications**: You can set up new alerts - and view existing alerts - to be notified when pools are enabled or disabled, or pools or endpoints have changes in their [health status](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/).\n\n  4. When finished, select **Save**.\n\n* API\n\n  For a full list of properties, refer to [Create Pool](https://developers.cloudflare.com/api/resources/load_balancers/subresources/pools/methods/create/). If you need help with API authentication, refer to [Cloudflare API documentation](https://developers.cloudflare.com/fundamentals/api/).\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Load Balancing: Monitors and Pools Write`",
      "language": "unknown"
    },
    {
      "code": "The response contains the complete definition of the new pool.",
      "language": "unknown"
    },
    {
      "code": "After creating the pool, you would also want to [create a new notification](https://developers.cloudflare.com/api/resources/alerting/subresources/policies/methods/create/) with the following parameters specified:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Hostname preparation  Cloudflare Learning Paths\ndescription: \"Before setting up anything related to your load balancer, make\n  sure you test that production hostnames meet the following criteria:\"\nlastUpdated: 2024-10-15T01:23:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/hostname-preparation/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/hostname-preparation/index.md\n---\n\nBefore setting up anything related to your load balancer, make sure you test that production hostnames meet the following criteria:\n\n* Based on the [priority order](https://developers.cloudflare.com/load-balancing/load-balancers/dns-records/#priority-order) of DNS records, they will receive the intended amount of traffic.\n* Each hostname is covered by an [SSL/TLS certificate](https://developers.cloudflare.com/load-balancing/load-balancers/dns-records/#ssltls-coverage).\n\nAfter confirming each of these conditions are met, you can proceed with setting up your load balancer.\n\n## Routing strategy\n\nDepending on your preferences and infrastructure, you might route traffic to your load balancer in different ways:\n\n* For most customers, it's simpler to create the load balancer on the hostname directly (`www.example.com`).\n* However, you could also create the load balancer on another hostname (`lb.example.com`) and then route traffic using a `CNAME` record on `test.example.com` that points to `lb.example.com`.\n\n</page>\n\n<page>\n---\ntitle: Next steps  Cloudflare Learning Paths\ndescription: Your load balancer should be receiving production traffic (and you\n  can confirm this by reviewing the analytics).\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/next-steps/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/next-steps/index.md\n---\n\nYour load balancer should be receiving production traffic (and you can confirm this by reviewing the [analytics](https://developers.cloudflare.com/load-balancing/reference/load-balancing-analytics/)).\n\nThough your product is officially set up, you may want to consider the following suggestions.\n\n## Usage-based notifications\n\nSince this is a service with [usage-based billing](https://developers.cloudflare.com/billing/usage-based-billing/), Cloudflare recommends that you set up usage-based billing notifications to avoid unexpected bills.\n\nTo set up those notifications:\n\n1. In the Cloudflare dashboard, go to the **Notifications** page.\n\n   [Go to **Notifications**](https://dash.cloudflare.com/?to=/:account/notifications)\n\n2. On **Alert Type** of **Usage Based Billing**, click **Select**.\n\n3. Fill out the following information:\n\n   * **Name**\n   * **Product**\n   * **Notification limit** (exact metric will vary based on product)\n   * **Notification email**\n\n   Note\n\n   Some plans also have access to alerts through [PagerDuty](https://developers.cloudflare.com/notifications/get-started/configure-pagerduty/) and [Webhooks](https://developers.cloudflare.com/notifications/get-started/configure-webhooks/).\n\n4. Select **Save**.\n\n## Additional configuration options\n\nYou may want to further customize how your load balancer routes traffic or integrate your load balancer with other Cloudflare products:\n\n* [Additional DNS records](https://developers.cloudflare.com/load-balancing/additional-options/additional-dns-records/)\n* [Cloudflare Tunnel (published applications)](https://developers.cloudflare.com/load-balancing/additional-options/cloudflare-tunnel/)\n* [Spectrum](https://developers.cloudflare.com/load-balancing/additional-options/spectrum/)\n* [Perform planned maintenance](https://developers.cloudflare.com/load-balancing/additional-options/planned-maintenance/)\n* [Load Balancing with the China Network](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-china/)\n* [Load shedding](https://developers.cloudflare.com/load-balancing/additional-options/load-shedding/)\n* [Override HTTP Host headers](https://developers.cloudflare.com/load-balancing/additional-options/override-http-host-headers/)\n* [Custom load balancing rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/)\n* [Integrate with PagerDuty](https://developers.cloudflare.com/load-balancing/additional-options/pagerduty-integration/)\n\n</page>\n\n<page>\n---\ntitle: Route production traffic  Cloudflare Learning Paths\ndescription: \"Now that you have set up your load balancer and verified\n  everything is working correctly, you can put the load balancer on a live\n  domain or subdomain:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/production-traffic/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/production-traffic/index.md\n---\n\nNow that you have set up your load balancer and verified everything is working correctly, you can put the load balancer on a live domain or subdomain:\n\n1. If you update your pools and monitors, review the pool health again to make sure everything is working as expected.\n\n2. Confirm that your production hostname has the correct [priority order](https://developers.cloudflare.com/load-balancing/load-balancers/dns-records/#priority-order) of DNS records and is covered by an [SSL/TLS certificate](https://developers.cloudflare.com/load-balancing/load-balancers/dns-records/#ssltls-coverage).\n\n3. Configure your load balancer to receive production traffic, which could involve either:\n\n   * Editing the **Hostname** of your existing load balancer.\n   * Updating the `CNAME` record sending traffic to your load balancer.\n\nNote\n\nIf you have an Enterprise account, also evaluate your application for any excluded paths. For example, you might not want the load balancer to distribute requests directed at your `/admin` path. For any exceptions, set up an [origin rule](https://developers.cloudflare.com/rules/origin-rules/features/#dns-record).\n\n</page>\n\n<page>\n---\ntitle: Create load balancer on test domain  Cloudflare Learning Paths\ndescription: Instead of starting on your production domain, you likely should\n  create a load balancer on a test or staging domain. This may involve temporary\n  changes to your monitors and pools, depending on your infrastructure setup.\nlastUpdated: 2024-08-19T19:08:50.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/test-load-balancer/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/test-load-balancer/index.md\n---\n\nInstead of starting on your production domain, you likely should create a load balancer on a test or staging domain. This may involve temporary changes to your monitors and pools, depending on your infrastructure setup.\n\nStarting with a test domain allows you to verify everything is working correctly before routing production traffic.\n\n## Create a load balancer\n\n* Dashboard\n\n  To create a Public or a Private load balancer in the dashboard:\n\n  ### Create a Public load balancer\n\n  1. Go to **Load Balancing** and select **Create load balancer**.\n\n  2. On the **Load Balancer Setup**, select **Public load balancer**\n\n  3. Choose the website to which you want to add this load balancer.\n\n  4. On the **Hostname** page:\n\n     * Enter a **Hostname**, which is the DNS name at which the load balancer is available. For more details on record priority, refer to [DNS records for load balancing](https://developers.cloudflare.com/load-balancing/load-balancers/dns-records/).\n     * From the **Data Localization** dropdown, select the [region](https://developers.cloudflare.com/data-localization/how-to/load-balancing/#regional-services) you would like to use on your domain.\n     * Toggle the orange cloud icon to update the [proxy mode](https://developers.cloudflare.com/load-balancing/understand-basics/proxy-modes/), which affects how traffic is routed and which IP addresses are advertised.\n     * Add a description for your load balancer.\n     * If you want [session-based load balancing](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/), toggle the **Session Affinity** switch.\n     * If you want [Adaptive Routing](https://developers.cloudflare.com/load-balancing/understand-basics/adaptive-routing/), toggle the **Adaptive Routing** switch.\n\n  5. Select **Next**.\n\n  6. On the **Add a Pool** page:\n\n     * Select one or more existing pools or [create a new pool](https://developers.cloudflare.com/load-balancing/pools/create-pool/#create-a-pool).\n     * If you are going to set [traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/) to **Off**, re-order the pools in your load balancer to adjust the fallback order.\n     * If needed, update the [**Fallback Pool**](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/#fallback-pools).\n     * If you choose to set traffic steering to **Random**, you can set [Weights](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/#random-steering) (via the API) to your pools to determine the percentage of traffic sent to each pool.\n\n  7. Select **Next**.\n\n  8. On the **Monitors** page:\n\n     * Review the monitors attached to your pools.\n     * If needed, you can attach an existing monitor or [create a new monitor](https://developers.cloudflare.com/load-balancing/monitors/create-monitor/#create-a-monitor).\n\n  9. Select **Next**.\n\n  10. On the **Traffic Steering** page, choose an option for [Traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) and select **Next**.\n\n  11. On the **Custom Rules** page, select an existing rule or [create a new rule](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/).\n\n  12. Select **Next**.\n\n  13. On the **Review** page:\n\n      * Review your configuration and make any changes.\n      * Choose whether to **Save as Draft** or **Save and Deploy**.\n\n  ### Create a Private load balancer\n\n  1. Go to **Load Balancing** and select **Create load balancer**.\n\n  2. On the **Load Balancer Setup**, select **Private load balancer**\n\n  3. Associate your load balancer with either a Cloudflare private IP or a specified IP address and create a description for your load balancer.\n\n  4. On the **Add a Pool** page:\n\n     * Select one or more existing pools or [create a new pool](https://developers.cloudflare.com/load-balancing/pools/create-pool/#create-a-pool).\n     * If you are going to set [traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/) to **Off**, re-order the pools in your load balancer to adjust the fallback order.\n     * If needed, update the [**Fallback Pool**](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/#fallback-pools).\n     * If you choose to set traffic steering to **Random**, you can set [Weights](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/#random-steering) (via the API) to your pools to determine the percentage of traffic sent to each pool.\n\n  5. Select **Next**.\n\n  6. On the **Monitors** page:\n\n     * Review the monitors attached to your pools.\n     * If needed, you can attach an existing monitor or [create a new monitor](https://developers.cloudflare.com/load-balancing/monitors/create-monitor/#create-a-monitor).\n\n  7. Select **Next**.\n\n  8. On the **Traffic Steering** page, choose an option for [Traffic steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) and select **Next**.\n\n  9. Select **Next**.\n\n  10. On the **Review** page:\n\n      * Review your configuration and make any changes.\n      * Choose whether to **Save as Draft** or **Save and Deploy**.\n\n* API\n\n  For a full list of properties, refer to [Create Load Balancer](https://developers.cloudflare.com/api/resources/load_balancers/methods/create/). If you need help with API authentication, refer to [Cloudflare API documentation](https://developers.cloudflare.com/fundamentals/api/).\n\n  Note\n\n  Since load balancers only exist on a zone  and not an account  you may need to get the zone `id` with the [List Zones](https://developers.cloudflare.com/api/resources/zones/methods/list/) command.\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Load Balancers Write`",
      "language": "unknown"
    },
    {
      "code": "The response contains the complete definition of the new load balancer.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Send traffic and review analytics  Cloudflare Learning Paths\ndescription: As you send sample requests to your test domain, review the load\n  balancing analytics page to make sure your load balancer is distributing\n  requests like you were expecting.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/setup/traffic-analytics/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/setup/traffic-analytics/index.md\n---\n\nAs you send sample requests to your test domain, review the [load balancing analytics](https://developers.cloudflare.com/load-balancing/reference/load-balancing-analytics/) page to make sure your load balancer is distributing requests like you were expecting.\n\n</page>\n\n<page>\n---\ntitle: Custom load balancing rules  Cloudflare Learning Paths\ndescription: Custom load balancing rules let you customize the behavior of your\n  load balancer based on the characteristics of a request.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/custom-rules/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/custom-rules/index.md\n---\n\nCustom load balancing rules let you customize the behavior of your load balancer based on the characteristics of a request.\n\nFor example, you can use URL-based routing, or create a rule that selects a pool based on the URI path of an HTTP request.\n\nFor more details, refer to [Custom load balancing rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/).\n\n</page>\n\n<page>\n---\ntitle: Account-level load balancing  Cloudflare Learning Paths\ndescription: If you want to set up load balancing for multiple hostnames or\n  domains within your account, your approach would depend on the requirements\n  for each hostname.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/multiple-zones/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/multiple-zones/index.md\n---\n\nIf you want to set up load balancing for multiple hostnames or domains within your account, your approach would depend on the requirements for each hostname.\n\n## Shared configurations\n\nIf you want to share a load balancing configuration across multiple hostnames, you can use the same load balancer through `CNAME` routing.\n\n1. When you [set up](https://developers.cloudflare.com/learning-paths/load-balancing/setup/) the load balancer, create the load balancer on a new hostname (`lb.example.com`).\n2. When you are ready to [route production traffic](https://developers.cloudflare.com/learning-paths/load-balancing/setup/production-traffic/), [create](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/#create-dns-records) a `CNAME` record on a hostname that points to the load balancer created in step 1 (`lb.example.com`).\n3. Repeat steps 1 and 2 with all other hostnames.\n\nNote\n\nYou could also achieve the same goal or create more advanced routing decisions by setting up DNS Overrides within [Origin Rules](https://developers.cloudflare.com/rules/origin-rules/) on each hostname that override the hostname to `lb.example.com`.\n\n## Unique configurations\n\nIf each zone needs unique load balancer configurations (failover order, routing), you should create separate load balancers. Since pools and monitors are configured at the account level, even different load balancers can share the same pools and monitors.\n\nFor simpler routing, create a load balancer on each hostname.\n\nFor more advanced routing, create multiple load balancers and then set up [Origin Rules](https://developers.cloudflare.com/rules/origin-rules/) to route traffic to each load balancer based on specific characteristics of the request.\n\n</page>\n\n<page>\n---\ntitle: Endpoint steering policies  Cloudflare Learning Paths\ndescription: Endpoint steering customizes how each pool distributes requests to\n  its associated endpoints.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/origin-steering-policies/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/origin-steering-policies/index.md\n---\n\nEndpoint steering customizes how each [pool](https://developers.cloudflare.com/load-balancing/pools/) distributes requests to its associated endpoints.\n\nThese distributions are a combination of two properties:\n\n* The endpoint steering [policy](#policies) chosen for your pool.\n* The [weights](#weights) assigned to each endpoint.\n\nNote\n\nIf an endpoint [becomes unhealthy](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/), your pool will also re-balance traffic according to its endpoint steering policy.\n\n***\n\n## Policies\n\nWhen you [create a pool](https://developers.cloudflare.com/load-balancing/pools/create-pool/), you have to choose an option for **Endpoint Steering**.\n\n***\n\n## Weights\n\nThe weight assigned to an endpoint controls the percentage of pool traffic sent to that endpoint. By default, all endpoints within a pool have a weight of **1**.\n\nIf you leave each endpoint with the default setting and choose a **Random** endpoint steering policy, each endpoint will receive the same percentage of traffic. If you use a **Hash** policy, that percentage will vary based on the IP distribution of your requests.\n\n### Customize weights\n\nTo customize weights when you [create or edit a pool](https://developers.cloudflare.com/load-balancing/pools/create-pool/), set the **Weight** to a number between 0 and 1 (expressed in increments of .01). Cloudflare will then send traffic to that pool based on a combination of your endpoint steering policy and the following formula.",
      "language": "unknown"
    },
    {
      "code": "Endpoint weight example\n\nHeres an example applying weights to three endpoints with a **Random** endpoint steering policy:\n\n* **Weights:** Endpoint A = 0.25; Endpoint B = 0.25; Endpoint C = 0.50\n* **When all endpoints are healthy**, each endpoint will receive the following proportion of total traffic: A = 25%; B = 25%; C = 50%.\n* **When one endpoint is unhealthy** (such as endpoint C), each healthy endpoint will receive the following proportion of total traffic: A = 50%; B=50%.\n\nA significant amount of traffic is required for the distribution to converge on the expected values.\n\nAn endpoint with a weight of **0** should not receive any traffic sent to that pool (though the endpoint will still receive health monitor requests).\n\nYou can also see this value in the **Percent** field when creating or editing a pool in the dashboard.\n\nNote:\n\nIf an endpoint is used in multiple pools and has multiple weights assigned, the total traffic sent to that pool will differ from the percentage specified in each individual pool.\n\n### Limitations\n\nIf you choose **Hash** for your **Endpoint Steering** or enable [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/), these options can affect traffic distribution.\n\nAdditionally, session affinity takes precedence over any selected weight or endpoint steering policy.\n\nWhen using [DNS-only load balancing](https://developers.cloudflare.com/load-balancing/understand-basics/proxy-modes/#dns-only-load-balancing), DNS resolvers may cache resolved IPs for clients and affect traffic distribution.\n\n</page>\n\n<page>\n---\ntitle: Server and pool health  Cloudflare Learning Paths\ndescription: As discussed before, a monitor issues health checks periodically to\n  evaluate the health of a each server within a pool.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/server-pool-health/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/server-pool-health/index.md\n---\n\nAs discussed before, a monitor issues health checks periodically to evaluate the health of a each server within a pool.",
      "language": "unknown"
    },
    {
      "code": "Requests issued by a monitor at regular interval and  depending on the monitor settings  return a **pass** or **fail** value to make sure an endpoint is still able to receive traffic.\n\nEach health monitor request is trying to answer two questions:\n\n1. **Is the endpoint offline?**: Does the endpoint respond to the health monitor request at all? If so, does it respond quickly enough (as specified in the monitor's **Timeout** field)?\n2. **Is the endpoint working as expected?**: Does the endpoint respond with the expected HTTP response codes? Does it include specific information in the response body?\n\nIf the answer to either of these questions is \"No\", then the endpoint fails the health monitor request.\n\n***\n\n## Customizations\n\nBased on the characteristics of your server pools, you have several customization options that affect how and whether a server is considered unhealthy.\n\n### Pool-level settings\n\n#### Health threshold\n\nThe Health Threshold is the number of healthy endpoints for the pool as a whole to be considered *Healthy* and receive traffic based on pool order in a load balancer. Increasing this number makes the pool more reliable, but also more likely to become unhealthy.\n\n\n\n#### Health monitor regions\n\nFor each option selected in a pool's **Health Monitor Regions**, Cloudflare sends health monitor requests from three separate data centers in that region.\n\n![Health monitor requests come from three data centers within each selected region.](https://developers.cloudflare.com/_astro/health-check-component.wo0_f7k-_Z1yCMhR.webp)\n\nIf the majority of data centers for that region pass the health monitor requests, that region is considered healthy. If the majority of regions is healthy, then the endpoint itself will be considered healthy.\n\n##### Configurations\n\n**All Data Centers (Enterprise only)**\n\nHealth monitor probes are sent from every single data center in Cloudflares network to the endpoints within the associated pool. This allows probes to hit each endpoint during intervals set by the customer.\n\n**All Regions**\n\nThree health monitor probes per region are sent to each endpoint in the associated pool. There are a total of 13 regions, resulting in 39 probes.\n\n**Regional**\n\nThree health monitor probes are sent from each specified region within the pool configuration.\n\nWarning\n\nBecause of how Cloudflare checks health from [multiple regions](#health-monitor-regions), adding multiple regions  or choosing to check health from **All Data Centers**  can send a lot of traffic to your endpoint.\n\nThe same problem can occur when setting low values for a monitor's **Interval**.\n\n***\n\n### Monitor-level settings\n\nWhen you [create a monitor](https://developers.cloudflare.com/load-balancing/monitors/create-monitor/), there are several configuration settings you can adjust based on the characteristics of the attached pools:\n\nBasic settings\n\n* **Type**: The protocol to use for health monitors\n\n  * *Non-enterprise customers*: Choose **HTTP**, **HTTPS**, or **TCP**.\n  * *Enterprise customers*: Choose **HTTP**, **HTTPS**, **TCP**, **UDP ICMP**, **ICMP Ping**, or **SMTP**.\n\n* **Path**: The endpoint path to run health monitor requests against\n\n* **Port**: The destination port for health monitors\n\nAdvanced settings\n\n* **Interval**:\n\n  * By increasing the default, you can improve failover time, but you may also increase load on your endpoints.\n  * Minimum time in seconds is 60 (Pro), 15 (Business), and 10 (Enterprise).\n\n* **Timeout** and **Retries**:\n  * The health monitor request will return unhealthy if it exceeds the duration specified in **Timeout** (and exceeds this duration more times than the specified number of **Retries**).\n\n* **Expected Code(s)**: The expected HTTP response codes listed individually (`200`, `302`) or as a range (for example, entering `2xx` would cover all response codes in the `200` range).\n\n* **Response Body**:\n\n  * Looks for a case-insensitive substring in the response body.\n  * Make sure that the value is relatively static and within the first 10 KB of the HTML page.\n\n* **Simulate Zone**:\n\n  * It is recommended to use the same zone in which the Load Balancer exists.\n  * Changes the egress zone settings of a health monitor request to ensure compatibility with features like [authenticated origin pulls](https://developers.cloudflare.com/ssl/origin-configuration/authenticated-origin-pull/), [Argo Smart Routing](https://developers.cloudflare.com/argo-smart-routing/), and [Dedicated CDN Egress IPs](https://developers.cloudflare.com/smart-shield/configuration/dedicated-egress-ips/).\n\n* **Follow Redirects**:\n  * Instead of reporting a `301` or `302` code as unhealthy, the health monitor request follows redirects to the final endpoint.\n\n* **Configure Request Header(s)**:\n  * Useful if your endpoints are expecting specific incoming headers.\n\n* **Header**:\n  * The HTTP request headers to send in the health monitor. It is recommended that you set a Host header by default. The User-Agent header cannot be overridden. This parameter is only valid for HTTP and HTTPS monitors.\n\nNote\n\nTo increase confidence in pool status, you can also increase the `consecutive_up` and `consecutive_down` fields when [creating a monitor with the API](https://developers.cloudflare.com/api/resources/load_balancers/subresources/monitors/methods/create/).\n\nTo become healthy or unhealthy, monitored endpoints must pass this health monitor request the consecutive number of times specified in these parameters.\n\n***\n\n### Fallback pool\n\nYou also need to decide which of the associated pools in a load balancer should be the fallback pool.\n\nThis pool is meant to be the pool of last resort, meaning that its health is not taken into account when directing traffic.\n\nFallback pools are important because traffic still might be coming to your load balancer even when all the pools are unreachable (disabled or unhealthy). Your load balancer needs somewhere to route this traffic, so it will send it to the fallback pool.\n\n</page>\n\n<page>\n---\ntitle: Session affinity  Cloudflare Learning Paths\ndescription: When you enable session affinity, your load balancer directs all\n  requests from a particular end user to a specific endpoint. This continuity\n  preserves information about the user session  such as items in their shopping\n  cart  that might otherwise be lost if requests were spread out among multiple\n  servers.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/session-affinity/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/session-affinity/index.md\n---\n\nWhen you enable session affinity, your load balancer directs all requests from a particular end user to a specific endpoint. This continuity preserves information about the user session  such as items in their shopping cart  that might otherwise be lost if requests were spread out among multiple servers.\n\nSession affinity can also help reduce network requests, leading to savings for customers with usage-based billing.\n\nNote\n\nSession Affinity is only supported by Public Load Balancers.\n\n## How it works\n\nSession affinity automatically directs requests from the same client to the same endpoint:\n\n1. When a client makes its first request, Cloudflare sets a `__cflb` cookie on the client (to track the associated endpoint).\n2. Subsequent requests by the same client are forwarded to that endpoint for the duration of the cookie and as long as the endpoint remains healthy.\n3. If the cookie expires or the endpoint becomes unhealthy, Cloudflare sets a new cookie tracking the new failover endpoint.",
      "language": "unknown"
    },
    {
      "code": "All cookie-based sessions default to 23 hours unless you set a custom session *Time to live* (TTL).\n\nThe session cookie is secure when [Always Use HTTPS](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/always-use-https/) is enabled. Additionally, HttpOnly is always enabled for the cookie to prevent cross-site scripting attacks.\n\n</page>\n\n<page>\n---\ntitle: Traffic steering  Cloudflare Learning Paths\ndescription: Global traffic steering policies decide how a load balancer routes\n  traffic to attached and healthy pools.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/traffic-steering/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/traffic-steering/index.md\n---\n\nGlobal traffic steering policies decide how a load balancer routes traffic to attached and healthy pools.\n\n\n\n* [Standard](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/)\n* [Geo](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/geo-steering/)\n* [Dynamic](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/dynamic-steering/)\n* [Proximity](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/proximity-steering/)\n* [Least Outstanding Requests](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/least-outstanding-requests/)\n\n</page>\n\n<page>\n---\ntitle: Types of load balancers  Cloudflare Learning Paths\ndescription: \"With Cloudflare, you can choose between three types of load balancers:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/load-balancing/planning/types-load-balancers/\n  md: https://developers.cloudflare.com/learning-paths/load-balancing/planning/types-load-balancers/index.md\n---\n\nWith Cloudflare, you can choose between three types of load balancers:\n\n* [Layer 7 (HTTP/HTTPS)](#layer-7-load-balancing) (most common)\n* [DNS-only](#dns-only-load-balancing)\n* [Layer 4 (TCP)](#layer-4-load-balancing)\n\n***\n\n## Layer 7 load balancing\n\nLayer 7 load balancers direct traffic to specific endpoints based on information present in each HTTP/HTTPS request (HTTP headers, URI, cookies, type of data, etc.).\n\nWhen a client visits your application, Cloudflare directs their request to a healthy endpoint (determined by your [traffic steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) and [endpoint weights](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/#weights)).\n\nCloudflare performs layer 7 load balancing when traffic to your hostname is **proxied** through Cloudflare. In the **Load Balancing** dashboard, these load balancers are marked with an orange cloud.\n\n![DNS-only load balancers are marked with an orange cloud](https://developers.cloudflare.com/_astro/proxied-load-balancer.BMq3VCyA_Z1HBB2f.webp)\n\nNote that if a [DNS-only (grey cloud)](https://developers.cloudflare.com/dns/proxy-status/) CNAME record points to a proxied load balancer, the IP returned for it would be endpoint IP and a HTTP request sent to it would not be proxied.\n\n### Benefits\n\nIn comparison to DNS-only load balancing, layer 7 load balancing:\n\n* Protects endpoints from DDoS attacks by hiding their IP addresses.\n* Offers faster failover and more accurate routing, which can otherwise be affected by DNS caching.\n* Integrates with other Cloudflare features such as caching, Workers, and the WAF.\n* Reduces authoritative queries against Cloudflare, which can potentially save money for customers with usage-based billing.\n* Supports customized [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/) and [endpoint drain](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/#endpoint-drain).\n* More accurately geo-locates traffic, using the data center associated with the user making the request instead of the data center associated with a user's recursive resolver.\n* Supports private IP addresses with [Private Network Load Balancing](https://developers.cloudflare.com/load-balancing/private-network/).\n\n***\n\n## DNS-only load balancing\n\nDNS-only load balancers route traffic by returning specific IP addresses in response to a client's DNS query.\n\nWhen a client visits your application, Cloudflare provides the address for a healthy endpoint (determined by your [traffic steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) and [endpoint-level steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/)). However, Cloudflare relies on DNS resolvers respecting the short TTL to re-query Cloudflare's DNS for an updated list of healthy addresses. If a client has a cached DNS response, they will go to their previous destination, potentially ignoring your load balancer.\n\nCloudflare performs DNS-only load balancing when traffic to your hostname is **not proxied** through Cloudflare. In the **Load Balancing** dashboard, these load balancers are marked with a gray cloud.\n\n![DNS-only load balancers are marked with a gray cloud](https://developers.cloudflare.com/_astro/dns-only-load-balancer.DI9EgD6m_qKL.webp)\n\nNote\n\nNote that if a load balancer endpoint is a [proxied (orange-cloud)](https://developers.cloudflare.com/dns/proxy-status/) CNAME record on Cloudflare, the IP returned for it would be Cloudflare's and a HTTP request sent to it would be proxied accordingly.\n\n### Benefits\n\nIf your load balancer is attached to a hostname used for an [`MX` or `SRV` record](https://developers.cloudflare.com/load-balancing/additional-options/additional-dns-records/)  and not an `A`, `AAAA`, or `CNAME` record  its proxy mode should be **DNS-only**.\n\n\n\n### Limitations\n\nIn comparison to proxied, layer 7 load balancing, DNS-only load balancing:\n\n* Does not hide the IP addresses of your endpoints, leaving them vulnerable to DDoS attacks.\n* Performs slower failover and less accurate routing, because it has to rely on DNS resolvers and cache settings.\n* Cannot integrate with other Cloudflare features such as caching, Workers, and the WAF.\n* Increases authoritative queries against Cloudflare, which can potentially cost more for customers with usage-based billing.\n* Does not support [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/).\n* Geo-locates traffic based on the data center associated with the ECS source address, if available. If not available, geo-locates based on a user's recursive resolver, which can sometimes cause issues with [latency-based steering](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/dynamic-steering/).\n* Does not support [Private Network Load Balancing](https://developers.cloudflare.com/load-balancing/private-network/).\n\n***\n\n## Layer 4 load balancing\n\nLayer 4 load balancers route traffic by forwarding traffic to certain ports or IP addresses.\n\nCloudflare currently only supports layer 4 load balancing as part of [Cloudflare Spectrum](https://developers.cloudflare.com/spectrum/about/load-balancer/).\n\nNote\n\nSince Spectrum operates at the TCP level, it does not have the information to support features like [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/), [custom rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/), or caching.\n\n</page>\n\n<page>\n---\ntitle: Benefits of mTLS  Cloudflare Learning Paths\nlastUpdated: 2024-11-21T17:51:43.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/mtls/concepts/benefits/\n  md: https://developers.cloudflare.com/learning-paths/mtls/concepts/benefits/index.md\n---\n\n* **Stronger authentication**: mTLS ensures mutual verification between the client and server, confirming that both parties are who they claim to be. This two-way authentication mechanism prevents impersonation and man-in-the-middle attacks, significantly enhancing the overall security.\n\n* **End-to-end encryption**: All communication between the client and server is encrypted, providing robust protection against eavesdropping and interception. Even if the data is captured by unauthorized parties, it remains secure and unreadable due to encryption.\n\n* **Preserved data integrity**: mTLS ensures that data remains unaltered during transit. The protocol verifies the integrity of transmitted information, protecting it from tampering or manipulation by malicious actors, ensuring the data's authenticity.\n\n* **Defense against insider threats**: mTLS strengthens internal network security by adding protection against insider threats. Unlike traditional \"castle-and-moat\" networking, which trusts anything inside the perimeter, mTLS enforces mutual authentication, ensuring all internal communications are verified and secure.\n\n</page>\n\n<page>\n---\ntitle: Use mTLS with Cloudflare protected resources  Cloudflare Learning Paths\ndescription: In this implementation guide we will be focusing on the L7 /\n  Application Layer security for HTTP/S requests targeting proxied hostnames,\n  including the first connection between client and Cloudflare.\nlastUpdated: 2025-10-28T21:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/mtls/concepts/mtls-cloudflare/\n  md: https://developers.cloudflare.com/learning-paths/mtls/concepts/mtls-cloudflare/index.md\n---\n\nIn this implementation guide we will be focusing on the L7 / Application Layer security for HTTP/S requests targeting [proxied](https://developers.cloudflare.com/dns/proxy-status/) hostnames, including the [first connection](https://developers.cloudflare.com/ssl/origin-configuration/ssl-modes/) between client and Cloudflare.\n\nSome common mTLS use cases are:\n\n* Protect and verify legitimate API traffic by verifying Client Certificates provided during TLS/SSL handshakes.\n* Check IoT devices' identity by verifying Client Certificates they provide during TLS/SSL handshakes.\n\nThere are two main ways to use mTLS at Cloudflare, either by using the Application Security offering (optionally including [API Shield](https://developers.cloudflare.com/api-shield/)) or [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/). Below is a non-exhaustive overview table of their differences:\n\n| Feature | Application Security (Client Certificate + WAF) | Cloudflare Access (mTLS) |\n| - | - | - |\n| Mainly used for | External Authentication (that is, APIs) | Internal Authentication (that is, employees) |\n| Availability | By default, 100 Client Certificates per Zone are included for free. For more certificates or [API Shield features](https://developers.cloudflare.com/api-shield/), contact your account team. | Zero Trust Enterprise only feature. |\n| [Certificate Authority (CA)](https://developers.cloudflare.com/ssl/concepts/#certificate-authority-ca) | Cloudflare-managed or customer-uploaded (BYO CA). There's a soft-limit of up to [five customer-uploaded CAs](https://developers.cloudflare.com/ssl/client-certificates/byo-ca/#availability). | Customer-uploaded only (BYO CA). There's a soft-limit of up to [50 CAs](https://developers.cloudflare.com/cloudflare-one/account-limits/#access). |\n| Client Certificate Details | Forwarded to the origin server via [Cloudflare API](https://developers.cloudflare.com/ssl/client-certificates/forward-a-client-certificate/#cloudflare-api), [Cloudflare Workers](https://developers.cloudflare.com/ssl/client-certificates/forward-a-client-certificate/#cloudflare-workers), and [Managed Transforms](https://developers.cloudflare.com/ssl/client-certificates/forward-a-client-certificate/#managed-transforms). | Forwarded to the origin server via [Cloudflare API](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#cloudflare-api), [Cloudflare Workers](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#cloudflare-workers), and [Managed Transforms](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#managed-transforms). Client Certificate headers and [Cf-Access-Jwt-Assertion](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/validating-json/) JWT header can be forwarded to the origin server. |\n| Client Certificates Revocation | Use the WAF [Custom Rules](https://developers.cloudflare.com/waf/custom-rules/) to check for [*cf.tls\\_client\\_auth.cert\\_revoked*](https://developers.cloudflare.com/ssl/client-certificates/revoke-client-certificate/), which only applies to Cloudflare-managed CA. For BYO CAs, it would be the same approach as with Cloudflare Access. | Generate a [Certificate Revocation List (CRL)](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#create-a-crl) and enforce the revocation in a Cloudflare Worker. |\n\n</page>\n\n<page>\n---\ntitle: mTLS related features  Cloudflare Learning Paths\ndescription: To make it easier to differentiate between Client Certificates, you\n  can generate your own private key and CSR, and enter information that will be\n  incorporated into your certificate request, essentially labeling your Client\n  Certificates.\nlastUpdated: 2025-07-21T16:17:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/mtls/mtls-app-security/related-features/\n  md: https://developers.cloudflare.com/learning-paths/mtls/mtls-app-security/related-features/index.md\n---\n\n## Label Client Certificates\n\nTo make it easier to differentiate between Client Certificates, you can generate your own private key and CSR, and enter information that will be incorporated into your certificate request, essentially [labeling your Client Certificates](https://developers.cloudflare.com/ssl/client-certificates/label-client-certificate/).\n\n## Certificate Revocation\n\nIn cases of noticing excessive traffic, anomalous traffic (strange sequences of requests), or generally too many attack attempts registered from specific devices using your Client Certificates, it is best to [revoke](https://developers.cloudflare.com/ssl/client-certificates/revoke-client-certificate/) those.\n\nAdditionally, ensure to have a WAF [Custom Rule](https://developers.cloudflare.com/waf/custom-rules/) in place to block [revoked](https://developers.cloudflare.com/api-shield/security/mtls/configure/#check-for-revoked-certificates) Client Certificates. Review the available [`cf.tls_*`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/?field-category=mTLS\\&field-category=SSL/TLS) fields.\n\nExample WAF Custom Rule with action block:\n\n![Example expression for certification revocation using a WAF custom rule in the Cloudflare dashboard](https://developers.cloudflare.com/_astro/certification-revocation-custom-rule.Dl80dwDN_ZHknDG.webp)",
      "language": "unknown"
    },
    {
      "code": "A better approach may be to check for unverified or revoked client certificates:",
      "language": "unknown"
    },
    {
      "code": "Generally, ensure client certificates are rotated regularly and safely to reduce the risk of compromise.\n\n## Forward a client certificate\n\nThere are multiple ways to [forward a client certificate](https://developers.cloudflare.com/ssl/client-certificates/forward-a-client-certificate/) to your origin server.\n\n## Bring your own CA for mTLS\n\nIf you already have mTLS implemented, client certificates are already installed on devices, and therefore you would like to use your own Certificate Authority (CA), this is possible by [bringing your own CA for mTLS](https://developers.cloudflare.com/ssl/client-certificates/byo-ca/).\n\nHere you can use the [Replace Hostname Associations API endpoint](https://developers.cloudflare.com/api/resources/certificate_authorities/subresources/hostname_associations/methods/update/) to enable mTLS in each hostname that should use the CA for mTLS validation, essentially associating your CAs specific with hostnames.\n\nNote\n\nEach Enterprise account can upload up to five CAs, though this can be increased. Contact your account team if you require more.\n\n## Client Certificate Deployment\n\nThere are different ways to safely and securely deploy Client Certificates across devices.\n\nSome of the most used methods are [embedding](https://developers.cloudflare.com/ssl/client-certificates/configure-your-mobile-app-or-iot-device/#3-embed-the-client-certificate-in-your-mobile-app) the Client Certificate into an application and allowing user devices to download and install that app, or use mobile device management (MDM) to distribute certificates across devices, or to allow user devices to directly download and install the Client Certificate into a device's Certificate Store.\n\nIssuing a certificate is an important step, so if possible, perform thorough client verification.\n\nIn complex microservices environments, you can leverage Service Mesh to automate and enforce mTLS at scale. For example, Cloudflare services can handle external traffic security, while Service Mesh technologies enforce mTLS for east-west traffic within your network. This ensures that external traffic is secured by Cloudflare, while internal microservice communication is protected using mTLS via the Service Mesh.\n\n## Customize Cipher Suites\n\nIt is generally recommended to [customize the cipher suites](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/cipher-suites/customize-cipher-suites/) of your Cloudflare [Edge Certificates](https://developers.cloudflare.com/ssl/edge-certificates/). This only applies to the Edge Certificates, not Client Certificates.\n\nThe recommended TLS versions for mTLS are:\n\n* TLS 1.2: still broadly compatible and secure.\n* TLS 1.3: preferred for new implementations due to its enhanced security and efficiency.\n\nUsing outdated versions like TLS 1.0 or 1.1 is not recommended due to known vulnerabilities.\n\nNote\n\nFor modern mTLS implementations, Elliptic Curve Cryptography (EC) and [modern cipher suites](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/cipher-suites/supported-cipher-suites/) are recommended because it offers faster handshakes and better performance, uses smaller key sizes which result in reduced computational overhead while maintaining strong security, and EC is more scalable for large-scale deployments, such as in cloud-native applications, microservices, and mobile networks. RSA is only recommended if you have legacy systems that cannot support EC or if you require compatibility with systems that only work with RSA.\n\n## TLS Session Resumption\n\nBrowsers connecting to a domain with a [wildcard](https://developers.cloudflare.com/dns/manage-dns-records/reference/wildcard-dns-records/) [Edge Certificate](https://developers.cloudflare.com/ssl/edge-certificates/) in place, connecting to the same domain's mTLS subdomain could cause a non-authentication event, due to TLS Session Resumption, or also called [Connection Resumption](https://developers.cloudflare.com/speed/optimization/protocol/0-rtt-connection-resumption/).\n\nIt is generally not recommended to use wildcard certificates.\n\nReview the [troubleshooting documentation](https://developers.cloudflare.com/ssl/client-certificates/troubleshooting/) for more info.\n\n## TLS Session Renegotiation\n\nNote\n\nResumption and renegotiation are essentially opposites. Resumption re-establishes a previous TLS session over a new TCP connection, keeping the same TLS parameters. In contrast, renegotiation updates certain TLS parameters within an existing session, continuing over the same TCP connection.\n\nIf you need to use Client Certificates after the TLS handshake via renegotiation, you will need to use a prior TLS version than 1.3. This is because TLS 1.3 does not support renegotiation.\n\nFor example, if you are using mTLS and you are restricting requests to certain folders, based on a URL path in the request, rather than all content on your origin server, a TLS renegotiation may be triggered. Connections using TLS 1.3 do not support renegotiation.\n\n## Chain of Trust\n\nCustomers create Client Certificates and select the option to *use my private key and CSR*. The customer provides the CSR supplied by end-customers to generate the client certificates shared with end-customers. However, if your end-customers request the Certificate Chain, this can potentially be shared by the Cloudflare account team.\n\nContact your account team for more information.\n\n## WAF for Client Certificates\n\nNote\n\n[Revoked](https://developers.cloudflare.com/api-shield/security/mtls/configure/#check-for-revoked-certificates) Client Certificates are not automatically blocked unless you have an active WAF Custom Rule specifically checking for and blocking them. This check only applies to Client Certificates issued by the Cloudflare-managed CA. Cloudflare currently does not check certificate revocation lists (CRL) for CAs that have been uploaded by the customer ([BYO CA](https://developers.cloudflare.com/ssl/client-certificates/byo-ca/)). One can opt for Workers to manage a custom business logic and block revoked Client Certificates. See the [Workers section](https://developers.cloudflare.com/learning-paths/mtls/mtls-workers/) for more information.\n\nIn order to effectively implement mTLS with Cloudflare, it is strongly recommended to properly configure the [Cloudflare WAF](https://developers.cloudflare.com/waf/). Review the available [`cf.tls_*`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/?field-category=mTLS\\&field-category=SSL/TLS) fields.\n\nExample WAF Custom Rule with action block:\n\n![Example expression for configure a WAF Custom Rule with action block ](https://developers.cloudflare.com/_astro/configure-waf-custom-rule.BGsSBYj1_Z12VyIp.webp)",
      "language": "unknown"
    },
    {
      "code": "This expression will check if the request is coming from one of the hostnames and will block the request if the Client Certificate is either not verified or revoked.\n\nAnother example WAF Custom Rule with action block, using the [`cf.tls_client_auth.cert_fingerprint_sha256`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.tls_client_auth.cert_fingerprint_sha256/) field, for a specific Client Certificate (replace `ADD_STRING_OF_CLIENT_CERT_SHA256_FINGERPRINT`):\n\n![Example expression of a WAF Custom Rule with action block using the cf.tls\\_client\\_auth.cert\\_fingerprint\\_sha256 field](https://developers.cloudflare.com/_astro/waf-client-certificates-fingerprint.BqsBG7GT_ZpAywg.webp)",
      "language": "unknown"
    },
    {
      "code": "Here is another example of a WAF custom rule to associate a serial number with a hostname:\n\n![Example expression of a WAF Custom Rule to associate a serial number with a hostname](https://developers.cloudflare.com/_astro/waf-custom-rule.BVo7j0Y-_2mkwSn.webp)",
      "language": "unknown"
    },
    {
      "code": "This expression will check for a specific [Client Certificate serial number](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.tls_client_auth.cert_serial/) linked to specific hostnames, allowing for more granular control.\n\n## Rate Limiting by Client Certificates\n\nBy enabling [forwarding a certificate](https://developers.cloudflare.com/ssl/client-certificates/forward-a-client-certificate/#cloudflare-api) via the Cloudflare API, every request of an mTLS connection will include the following headers:\n\n* `Cf-Client-Cert-Der-Base64` (raw certificate in DER format, encoded as base64)\n* `Cf-Client-Cert-Sha256` (SHA256 fingerprint of the certificate)\n\nThe header `Cf-Client-Cert-Sha256` can be used within the [Rate Limiting characteristics](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/#with-the-same-characteristics) \"Header value of\".\n\nExample [Rate Limiting Rule](https://developers.cloudflare.com/waf/rate-limiting-rules/):\n\n![Example exmpression of a rate limiting rule from the Cloudflare dashboard](https://developers.cloudflare.com/_astro/rate-limiting-rule.DDXdodgO_ZNOsHG.webp)",
      "language": "unknown"
    },
    {
      "code": "## Cloudflare API Shield\n\nIn addition to mTLS, customers can purchase [API Shield](https://developers.cloudflare.com/api-shield/) features, such as API Discovery, API Routing, Volumetric Abuse Detection, Sequence Mitigation, JWT Validation, Schema Validation, and more.\n\n## Cloudflare Workers\n\nCloudflare Workers can provide details around the Client Certificate, such as returning information via headers to the client or to the origin server. Learn more in the [mTLS with Workers section](https://developers.cloudflare.com/learning-paths/mtls/mtls-workers/) below.\n\nNote\n\nSnippets do not support any [Bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/) and do not work with mTLS. However, you can [validate JSON web tokens (JWT)](https://developers.cloudflare.com/rules/snippets/examples/jwt-validation/).\n\n</page>\n\n<page>\n---\ntitle: Enable WAF  Cloudflare Learning Paths\ndescription: Once you proxy your DNS records, you should enable rulesets for\n  Cloudflare's Web Application Firewall (WAF).\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/enable-waf/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/enable-waf/index.md\n---\n\nOnce you [proxy your DNS records](https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/proxy-dns-records/), you should enable rulesets for Cloudflare's [Web Application Firewall (WAF)](https://developers.cloudflare.com/waf/).\n\nThe available rulesets depend on your zone's plan, but all customers have access at least to the Cloudflare Free Managed Ruleset, which provides mitigations against high and wide-impacting vulnerabilities.\n\nFor more details and potential customizations, refer to [Managed rulesets](https://developers.cloudflare.com/waf/managed-rules/).\n\n</page>\n\n<page>\n---\ntitle: Proxy DNS records  Cloudflare Learning Paths\ndescription: The first - and often easiest - step of DDoS protection is making\n  sure your DNS records are proxied through Cloudflare.\nlastUpdated: 2025-07-18T14:20:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/proxy-dns-records/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/proxy-dns-records/index.md\n---\n\nThe first - and often easiest - step of DDoS protection is making sure your DNS records are [proxied](https://developers.cloudflare.com/dns/proxy-status/) through Cloudflare.\n\n## How it works\n\n### Without Cloudflare\n\nWithout Cloudflare, DNS lookups for your application's URL return the IP address of your [origin server](https://www.cloudflare.com/learning/cdn/glossary/origin-server/).\n\n| URL | Returned IP address |\n| - | - |\n| `example.com` | `192.0.2.1` |\n\nWhen using Cloudflare with [unproxied DNS records](https://developers.cloudflare.com/dns/proxy-status/), DNS lookups for unproxied domains or subdomains also return your origin's IP address.\n\nAnother way of thinking about this concept is that visitors directly connect with your origin server.",
      "language": "unknown"
    },
    {
      "code": "### With Cloudflare\n\nWith Cloudflare  meaning your domain or subdomain is using [proxied DNS records](https://developers.cloudflare.com/dns/proxy-status/)  DNS lookups for your application's URL will resolve to [Cloudflare anycast IPs](https://www.cloudflare.com/ips/) instead of their original DNS target.\n\n| URL | Returned IP address |\n| - | - |\n| `example.com` | `104.16.77.250` |\n\nAll requests intended for proxied hostnames are directed to Cloudflare first and then forwarded to your origin server.",
      "language": "unknown"
    },
    {
      "code": "Cloudflare assigns specific anycast IPs to your domain dynamically and these IPs may change at any time. This is an expected part of the operation of our anycast network and does not affect the proxy behavior described above.\n\n## How it helps\n\n### DDoS protection\n\nWhen your traffic is proxied through Cloudflare, Cloudflare can automatically stop [DDoS attacks](https://developers.cloudflare.com/ddos-protection/about/) from ever reaching your application (and your origin server).\n\n### Caching\n\nProxied traffic also benefits from the default optimizations of the Cloudflare [cache](https://developers.cloudflare.com/cache/). Cloudflare caches [certain types of resources](https://developers.cloudflare.com/cache/concepts/default-cache-behavior/#default-cached-file-extensions) automatically, which both speeds up your application's performance and reduces the overall number of requests.\n\n### Hides origin IP address\n\nProxying your DNS records in Cloudflare also hides the IP address of your origin server (because requests to your application resolve to Cloudflare anycast IP addresses instead).\n\nThis obscurity makes it harder for someone to connect directly to your origin, which - by extension - also makes it harder to target your origin with a DDoS attack.\n\n## How to do it\n\nBefore proxying your records, you should likely [allow Cloudflare IP addresses](https://developers.cloudflare.com/fundamentals/concepts/cloudflare-ip-addresses/) at your origin to prevent requests from being blocked.\n\nThen, [update your Cloudflare DNS records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/#edit-dns-records) so their **Proxy status** is **Proxied**.\n\n![Proxy status affects how Cloudflare treats traffic intended for specific DNS records](https://developers.cloudflare.com/_astro/proxy-status-screenshot.uxgurbGi_7u4eA.webp)\n\n</page>\n\n<page>\n---\ntitle: Set up alerts  Cloudflare Learning Paths\ndescription: Another part of preparing for DDoS attacks is knowing when your\n  application is being attacked.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/set-up-alerts/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/set-up-alerts/index.md\n---\n\nAnother part of preparing for DDoS attacks is knowing when your application is being attacked.\n\nCloudflare offers notifications for DDoS attacks, which you can set up on your account.\n\nTo set up a notification:\n\n1. In the Cloudflare dashboard, go to the **Notifications** page.\n\n   [Go to **Notifications**](https://dash.cloudflare.com/?to=/:account/notifications)\n\n2. Select **Add**.\n\n3. Select one of the [available DDoS alerts](https://developers.cloudflare.com/ddos-protection/reference/alerts/#alert-types) depending on your plan and services:\n\n   * HTTP DDoS Attack Alert\n   * Layer 3/4 DDoS Attack Alert\n   * Advanced HTTP DDoS Attack Alert\n   * Advanced Layer 3/4 DDoS Attack Alert\n\n4. Enter a notification name and (optionally) a description.\n\n5. Configure a delivery method for the notification. The available delivery methods depend on your Cloudflare plan. For more information, refer to [Cloudflare Notifications](https://developers.cloudflare.com/notifications/).\n\n6. If you are creating a notification for one of the advanced DDoS attack alerts, select **Next** and define the parameters that will filter the notifications you will receive.\n\n7. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Update TLS versions  Cloudflare Learning Paths\ndescription: In some circumstances - specifically when an application allows\n  client-initiated SSL/TLS renegotiation - previous versions of SSL/TLS can be\n  more vulnerable to DDoS attacks.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/tls-versions/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/tls-versions/index.md\n---\n\nIn some circumstances - specifically when an application allows client-initiated SSL/TLS renegotiation - previous versions of SSL/TLS can be more vulnerable to DDoS attacks.\n\nWhen you use an SSL/TLS certificate issued by Cloudflare[1](#user-content-fn-1), you can reduce the impact of this vulnerability by:\n\n* Updating the [Minimum TLS Version](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/minimum-tls/) accepted by your application.\n* Allowing [TLS 1.3](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/tls-13/).\n\n## Additional resources\n\nFor more details on this vulnerability, refer to [Secure Server- and Client-Initiated SSL Renegotiation](https://crashtest-security.com/secure-client-initiated-ssl-renegotiation/).\n\n## Footnotes\n\n1. Meaning either [Universal](https://developers.cloudflare.com/ssl/edge-certificates/universal-ssl/) or [Advanced](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/) certificates. [](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: Customize Cloudflare security  Cloudflare Learning Paths\ndescription: Another way of reducing origin traffic is customizing the\n  Cloudflare WAF and other security features. The fewer malicious requests that\n  reach your application, the fewer that could reach (and overwhelm) your\n  origin.\nlastUpdated: 2025-06-30T19:31:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/customize-security/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/customize-security/index.md\n---\n\nAnother way of reducing origin traffic is customizing the Cloudflare WAF and other security features. The fewer malicious requests that reach your application, the fewer that could reach (and overwhelm) your origin.\n\nTo reduce incoming malicious requests, you could:\n\n* Create [WAF custom rules](https://developers.cloudflare.com/waf/custom-rules/) for protection based on specific aspects of incoming requests.\n* Adjust DDoS rules to handle [false negatives and false positives](https://developers.cloudflare.com/ddos-protection/managed-rulesets/http/http-overrides/override-examples/).\n* Build [rate limiting rules](https://developers.cloudflare.com/waf/rate-limiting-rules/) to protect against specific patterns of requests.\n* Enable [bot protection](https://developers.cloudflare.com/bots/get-started/) or set up [Bot Management for Enterprise](https://developers.cloudflare.com/bots/get-started/bot-management/) to protect against automated abuse.\n* Explore [network-layer DDoS attack protection](https://developers.cloudflare.com/ddos-protection/managed-rulesets/network/).\n* Review the rest of Cloudflare's [security options](https://developers.cloudflare.com/learning-paths/application-security/account-security/).\n\n</page>\n\n<page>\n---\ntitle: Augment default analytics  Cloudflare Learning Paths\ndescription: Cloudflare provides analytics for security events, traffic\n  patterns, and more according to the level of your zone's plan.\nlastUpdated: 2025-07-16T14:37:31.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/improve-analytics/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/improve-analytics/index.md\n---\n\nCloudflare provides analytics for [security events](https://developers.cloudflare.com/waf/analytics/security-events/), [traffic patterns](https://developers.cloudflare.com/analytics/account-and-zone-analytics/zone-analytics/), and more according to the level of your zone's plan.\n\nTo augment these default analytics and gather more information about potential DDoS attacks, explore the following options.\n\n## Restore visitor IP addresses\n\nWhen traffic [proxied through Cloudflare](https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/proxy-dns-records/) reaches your origin server, it will come from Cloudflare's IP addresses.\n\nIf needed, you can [restore the original visitor's IP address](https://developers.cloudflare.com/support/troubleshooting/restoring-visitor-ips/restoring-original-visitor-ips/) so you can have that information in your server logs.\n\n## Cloudflare Logs\n\nEnterprise customers can set up [Logpush](https://developers.cloudflare.com/logs/logpush/) jobs to regularly send Cloudflare logs to the SIEM system of their choice.\n\nThis data can help when looking at long-term DDoS attack trends or when you need custom visualizations.\n\n## Bot Management\n\nFor more detailed analytics about potential bot attacks, Enterprise customers can also purchase [Bot Management](https://developers.cloudflare.com/bots/get-started/bot-management/).\n\nFor a full tour of Bot Analytics, see [our blog post](https://blog.cloudflare.com/introducing-bot-analytics/). At a high level, the tool includes:\n\n* **Requests by bot score**: View your total domain traffic and segment it vertically by traffic type. Keep an eye on *automated* and *likely automated* traffic.\n* **Bot score distribution**: View the number of requests assigned a bot score 1 through 99.\n* **Bot score source**: Identify the most common detection engines used to score your traffic. Hover over a tooltip to learn more about each engine.\n* **Top requests by attribute**: View more detailed information on specific IP addresses and other characteristics.\n\nBot Analytics shows up to one week of data at a time and can display data up to 30 days old. Bot Analytics displays data in real time in most cases.\n\n</page>\n\n<page>\n---\ntitle: Optimize caching  Cloudflare Learning Paths\ndescription: The more content is cached, the fewer requests go back to your\n  origin server (whether due to legitimate or illegitimate traffic).\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/optimize-caching/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/optimize-caching/index.md\n---\n\nThe more content is cached, the fewer requests go back to your origin server (whether due to legitimate or illegitimate traffic).\n\nA few ways to optimize Cloudflare caching include:\n\n* Creating [cache rules](https://developers.cloudflare.com/cache/how-to/cache-rules/) to customize the cache properties of specific HTTP requests.\n* Enabling the [Tiered Cache](https://developers.cloudflare.com/cache/how-to/tiered-cache/) feature, which dramatically increases cache hit ratios.\n* Reviewing our other various [configuration options](https://developers.cloudflare.com/cache/get-started/), which may vary based on your plan and application setup.\n\n</page>\n\n<page>\n---\ntitle: Restrict external connections  Cloudflare Learning Paths\ndescription: To fully secure your origin, you should limit or restrict external\n  connections to your origin server. These suggestions vary in their level of\n  completeness and complexity and depend on your application and origin setup.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/prevent-external-connections/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/prevent-external-connections/index.md\n---\n\nTo fully secure your origin, you should limit or restrict external connections to your origin server. These suggestions vary in their level of completeness and complexity and depend on your application and origin setup.\n\n## Application layer\n\nCloudflare Tunnel (HTTP / WebSockets)\n\n[Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) connects your resources to Cloudflare without a publicly routable IP address, by creating an outbound-only connections to Cloudflares global network.\n\n* **Security**: Very secure.\n* **Availability**: All customers.\n* **Challenges**: Requires installing the `cloudflared` daemon on origin server or virtual machine.\n\nHTTP Header Validation\n\nOnly allow traffic with specific (and secret) HTTP headers.\n\n* **Security**: Moderately secure.\n\n* **Availability**: All customers.\n\n* **Challenges**:\n\n  * Requires more configuration efforts on application- and server-side to accept those headers.\n  * Basic authentication is vulnerable to replay attacks. Because basic authentication does not encrypt user credentials, it is important that traffic always be sent over an encrypted SSL session.\n  * There might be valid use cases for a mismatch in SNI / Host headers such as through [Origin or Page Rules](https://developers.cloudflare.com/rules/origin-rules/features/), [Load Balancing](https://developers.cloudflare.com/load-balancing/additional-options/override-http-host-headers/), or [Workers](https://developers.cloudflare.com/workers/runtime-apis/request/), which all offer HTTP Host Header overrides.\n\n* **Process**:\n\n  1. Use [Transform rules](https://developers.cloudflare.com/rules/transform/request-header-modification/) or [Workers](https://developers.cloudflare.com/workers/examples/alter-headers/) to add an HTTP Auth Header.\n  2. Configure your origin server to restrict access based on the [HTTP Auth Header](https://developers.cloudflare.com/workers/examples/auth-with-headers/) (or perform [HTTP Basic Authentication](https://developers.cloudflare.com/workers/examples/basic-auth/)).\n  3. Configure your origin server to restrict access based on the [HTTP Host Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Host). Specifically, only allow requests which contain expected HTTP Host Header values, and reject all other requests.\n\nJSON Web Tokens (JWT) Validation\n\nOnly allow traffic with the appropriate JWT.\n\n* **Security**: Very secure.\n\n* **Availability**: Some customers.\n\n* **Challenges**:\n\n  * Requires either installing incremental software or modifying application code.\n  * Lots of manual work.\n\n* **Resources**:\n\n  * [Validate JWTs for an Access application](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/validating-json/)\n  * [Validate JWTs for an API](https://developers.cloudflare.com/api-shield/security/jwt-validation/)\n\n## Transport Layer\n\nAuthenticated Origin Pulls\n\n[Authenticated Origin Pulls](https://developers.cloudflare.com/ssl/origin-configuration/authenticated-origin-pull/) helps ensure requests to your origin server come from the Cloudflare network.\n\n* **Security**: Very secure.\n\n* **Availability**: All customers.\n\n* **Challenges**:\n\n  * Requires [Full](https://developers.cloudflare.com/ssl/origin-configuration/ssl-modes/full/) or [Full (strict)](https://developers.cloudflare.com/ssl/origin-configuration/ssl-modes/full-strict/) encryption modes.\n  * Requires more configuration efforts for application and server, such as uploading a certificate and configuring the server to use it.\n  * For more strict security, you should upload your own certificate. Although Cloudflare provides you a certificate for easy configuration, this certificate only guarantees that a request is coming from the Cloudflare network.\n  * Not scalable for large numbers of origin servers.\n\nCloudflare Tunnel (SSH / RDP)\n\n[Cloudflare Tunnel](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) connects your resources to Cloudflare without a publicly routable IP address, by creating an outbound-only connections to Cloudflares global network.\n\n* **Security**: Very secure.\n* **Availability**: All customers.\n* **Challenges**: Requires installing the `cloudflared` daemon on origin server or virtual machine.\n\n## Network Layer\n\nAllowlist Cloudflare IP addresses\n\nExplicitly block all traffic that does not come from [Cloudflare IP addresses](https://developers.cloudflare.com/fundamentals/concepts/cloudflare-ip-addresses/) (or the IP addresses of your trusted partners, vendors, or applications).\n\n* **Security**: Moderately secure.\n\n* **Availability**: All customers.\n\n* **Challenges**:\n\n  * Requires allowlisting Cloudflare IP ranges at your origin server.\n  * Vulnerable to IP spoofing.\n\nCloudflare Magic Transit\n\n[Cloudflare Magic Transit](https://developers.cloudflare.com/magic-transit/) is a network security and performance solution that offers DDoS protection, traffic acceleration, and more for on-premise, cloud-hosted, and hybrid networks.\n\n* **Security**: Very secure.\n\n* **Availability**: Enterprise-only.\n\n* **Challenges**\n\n  * Client's routers must:\n\n    * Support anycast tunneling.\n    * Allow configuration of at least one tunnel per Internet service provider (ISP).\n    * Support maximum segment size (MSS) clamping.\n\nCloudflare Network Interconnect\n\n[Cloudflare Network Interconnect](https://developers.cloudflare.com/network-interconnect/) allows you to connect your network infrastructure directly with Cloudflare  rather than using the public Internet  for a more reliable and secure experience.\n\n* **Security**: Very secure.\n\n* **Availability**: Enterprise-only.\n\n* **Challenges**\n\n  * Requires some networking knowledge.\n  * Only applies to some customer use cases.\n\nDedicated CDN Egress IPs\n\n[Smart Shield Advanced](https://developers.cloudflare.com/smart-shield/get-started/#packages-and-availability) provides dedicated egress IPs (from Cloudflare to your origin) for your layer 7 [WAF](https://developers.cloudflare.com/waf/) and CDN services, as well as [Spectrum](https://developers.cloudflare.com/spectrum/). The egress IPs are reserved exclusively for your account so that you can increase your origin security by only allowing a small list of IP addresses through your layer 3 firewall.\n\n* **Security**: Very secure.\n* **Availability**: Enterprise-only.\n* **Challenges**: Requires network-level firewall policies.\n\n</page>\n\n<page>\n---\ntitle: Protect origin IP address  Cloudflare Learning Paths\ndescription: Though Cloudflare automatically hides your origin server IP address\n  when you proxy your DNS records, there are other ways to discover an IP\n  address.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/protect-origin-ip/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/advanced/protect-origin-ip/index.md\n---\n\nThough Cloudflare automatically hides your origin server IP address when you [proxy your DNS records](https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/baseline/proxy-dns-records/), there are other ways to discover an IP address.\n\nTo prevent attackers from discovering your origin's IP address, review the following suggestions.\n\n## Rotate IP addresses\n\nDNS records are in the public domain, meaning that - even though your IP addresses are hidden once you proxy your DNS records - someone could uncover historical records of your addresses.\n\nFor additional security, you could rotate the IP addresses of your origin server, which would also require [updating your DNS records](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/#edit-dns-records) within Cloudflare.\n\n## Review unproxied DNS records\n\nUnproxied DNS records - also known as **DNS-only** records - can sometimes contain origin IP information, especially those used for FTP or SSH.\n\nReview these records to make sure they do not contain origin IP information or use [Cloudflare Spectrum](https://developers.cloudflare.com/spectrum/) to proxy these records.\n\n## Conceal unproxied DNS records\n\nIf you need to have **DNS-only** records that contain origin IP information, use non-standard names for these records. This action makes dictionary scans of your DNS less likely to expose your origin IP address.\n\nFor example, instead of `ftp.example.com`, you could use `827450184590183489.example.com` or `cloudflare-docs-are-great.example.com`.\n\n## Evaluate mail infrastructure\n\nIf possible, do not host a mail service on the same server as the web resource you want to protect, since emails sent to non-existent addresses get bounced back to the attacker and reveal the mail server IP address.\n\nCloudflare recommends using non-contiguous IPs from different IP ranges.\n\n</page>\n\n<page>\n---\ntitle: What is a DDoS attack?  Cloudflare Learning Paths\ndescription: A distributed denial-of-service (DDoS) attack is where a large\n  number of computers or devices, usually controlled by a single attacker,\n  attempt to access a website or online service all at once. This flood of\n  traffic can overwhelm the website's origin servers, causing the site to slow\n  down or even crash.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/concepts/ddos-attacks/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/concepts/ddos-attacks/index.md\n---\n\nA distributed denial-of-service (DDoS) attack is where a large number of computers or devices, usually controlled by a single attacker, attempt to access a website or online service all at once. This flood of traffic can overwhelm the website's origin servers, causing the site to slow down or even crash.",
      "language": "unknown"
    },
    {
      "code": "To understand this, imagine a candy store with only a few employees. Normally, the employees can handle a steady stream of customers coming in to buy candy. However, if a large crowd of kids rush in all at once, it would be chaos. The employees may struggle to keep up with the demand and the store could become disorganized and overwhelmed.\n\nSimilarly, a website's origin servers are designed to handle a certain amount of traffic at any given time, but a DDoS attack can cause an abnormally high amount of traffic to flood the servers all at once. This can cause the website to become unresponsive, leaving legitimate users unable to access the site.\n\nDDoS attacks can be devastating for businesses and organizations that rely on their websites or online services to operate. It can lead to lost revenue, damage to reputation, and potential security risks if the attack is used as a cover for more nefarious activity.\n\n## Additional resources\n\nFor more resources on DDoS attacks and how they work, refer to our [Learning Center](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/).\n\n</page>\n\n<page>\n---\ntitle: How to prevent DDoS attacks  Cloudflare Learning Paths\ndescription: Since DDoS attacks target your web servers, the way to prevent them\n  is to reduce requests reaching those servers.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/concepts/ddos-prevention/\n  md: https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/concepts/ddos-prevention/index.md\n---\n\nSince DDoS attacks target your web servers, the way to prevent them is to reduce requests reaching those servers.",
      "language": "unknown"
    },
    {
      "code": "Requests can come to your origin server in two ways, from your web application and from direct connections to the server itself.\n\n***\n\n## Reduce application requests to the origin\n\n### Caching\n\nA cache stores copies of frequently accessed resources (images, CSS files).\n\nWhen a resource is cached - either on a user's browser or Content Delivery Network (CDN) server - requests for that resource do not have to go to your origin server. Instead, these resources are served directly by the cache.",
      "language": "unknown"
    },
    {
      "code": "In the context of DDoS attacks, caching reduces the number of requests going to your origin server, which makes it harder for your server to get overwhelmed by traffic.\n\n### Web Application Firewall (WAF)\n\nA Web Application Firewall (WAF) creates a shield between a web app and the Internet. This shield checks incoming web requests and filters undesired traffic to help mitigate many common attacks.",
      "language": "unknown"
    },
    {
      "code": "## Prevent external connections\n\nGenerally, your origin server should only accept requests coming from your web application.\n\nThis is a general best practice for security, but especially important in the context of DDoS attacks. Any traffic that bypasses your web application will also bypass any WAF or caching and has a stronger chance of overwhelming your origin.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Getting started with R2  Cloudflare Learning Paths\ndescription: >\n  Cloudflare R2 is an object storage solution designed to handle your data and\n  files efficiently. It is ideal for various use cases, such as storing large\n  media files, creating data lakes, or delivering web assets. R2 offers a\n  flexible architecture to suit your needs, all with zero egress fees, meaning\n  you don't have to worry about unexpected costs when moving your data.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/\n  md: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/index.md\n---\n\n* Watch this episode\n\n  Cloudflare R2 is an object storage solution designed to handle your data and files efficiently. It is ideal for various use cases, such as storing large media files, creating data lakes, or delivering web assets. R2 offers a flexible architecture to suit your needs, all with zero egress fees, meaning you don't have to worry about unexpected costs when moving your data.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [Create new buckets](https://developers.cloudflare.com/r2/buckets/create-buckets/)\n  * [Bucket-level operations](https://developers.cloudflare.com/r2/buckets/create-buckets/#bucket-level-operations)\n\n* Series overview\n\n  [Watch Episode 1: Getting started with R2 ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/)In this video, you'll learn how to use Cloudflare R2 to store and manage data with no egress fees, supporting use cases like media, web assets, backups, and static site hosting.\n\n  [Watch Episode 2: Public buckets ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/)This video outlines how to configure public buckets in R2, which are private by default, to enable public Internet access. It presents two methods for setting up public access: using a custom domain or a Cloudflare managed subdomain.\n\n  [Watch Episode 3: S3 API compatibility ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/)In this video, you'll learn how to use S3 API commands and tools with R2, set up and configure R2 for S3 API compatibility, and integrate R2 into your existing workflows with minimal changes.\n\n  [Watch Episode 4: Migrating your bucket data ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/)In this video, you will learn how to use Cloudflare R2's data migration tools to transfer data from other cloud providers such as Amazon S3 and Google Cloud Storage to R2.\n\n  [Watch Episode 5: Accessing your bucket from Cloudflare Workers ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/)In this video, you will build a serverless file API using Cloudflare Workers and R2 by setting up a project, securing uploads, enabling caching, and deploying the application.\n\n</page>\n\n<page>\n---\ntitle: Public buckets  Cloudflare Learning Paths\ndescription: >\n  This video outlines how to configure public buckets in R2, which are private\n  by default, to enable public Internet access. It presents two methods for\n  setting up public access: using a custom domain for greater control over\n  content management and security, or using a Cloudflare-managed subdomain for a\n  simpler configuration.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/\n  md: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/index.md\n---\n\n* Watch this episode\n\n  This video outlines how to configure public buckets in R2, which are private by default, to enable public Internet access. It presents two methods for setting up public access: using a custom domain for greater control over content management and security, or a Cloudflare managed subdomain for a simpler configuration.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [Public buckets](https://developers.cloudflare.com/r2/buckets/public-buckets/)\n  * [Custom domains](https://developers.cloudflare.com/r2/buckets/public-buckets/#connect-a-bucket-to-a-custom-domain)\n\n* Series overview\n\n  [Watch Episode 1: Getting started with R2 ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/)In this video, you'll learn how to use Cloudflare R2 to store and manage data with no egress fees, supporting use cases like media, web assets, backups, and static site hosting.\n\n  [Watch Episode 2: Public buckets ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/)This video outlines how to configure public buckets in R2, which are private by default, to enable public Internet access. It presents two methods for setting up public access: using a custom domain or a Cloudflare managed subdomain.\n\n  [Watch Episode 3: S3 API compatibility ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/)In this video, you'll learn how to use S3 API commands and tools with R2, set up and configure R2 for S3 API compatibility, and integrate R2 into your existing workflows with minimal changes.\n\n  [Watch Episode 4: Migrating your bucket data ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/)In this video, you will learn how to use Cloudflare R2's data migration tools to transfer data from other cloud providers such as Amazon S3 and Google Cloud Storage to R2.\n\n  [Watch Episode 5: Accessing your bucket from Cloudflare Workers ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/)In this video, you will build a serverless file API using Cloudflare Workers and R2 by setting up a project, securing uploads, enabling caching, and deploying the application.\n\n</page>\n\n<page>\n---\ntitle: S3 API compatibility  Cloudflare Learning Paths\ndescription: >\n  In this video, you'll learn how to use S3 API commands and tools with R2, set\n  up and configure R2 for S3 API compatibility, and integrate R2 into your\n  existing workflows with minimal changes.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/\n  md: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/index.md\n---\n\n* Watch this episode\n\n  In this video, you'll learn how to use S3 API commands and tools with R2, set up and configure R2 for S3 API compatibility, and integrate R2 into your existing workflows with minimal changes.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [S3 API compatibility](https://developers.cloudflare.com/r2/api/s3/api/)\n  * [Authenticate against R2 API using auth tokens](https://developers.cloudflare.com/r2/examples/authenticate-r2-auth-tokens/)\n  * [Pre-signed URLs](https://developers.cloudflare.com/r2/api/s3/presigned-urls/)\n\n* Series overview\n\n  [Watch Episode 1: Getting started with R2 ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/)In this video, you'll learn how to use Cloudflare R2 to store and manage data with no egress fees, supporting use cases like media, web assets, backups, and static site hosting.\n\n  [Watch Episode 2: Public buckets ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/)This video outlines how to configure public buckets in R2, which are private by default, to enable public Internet access. It presents two methods for setting up public access: using a custom domain or a Cloudflare managed subdomain.\n\n  [Watch Episode 3: S3 API compatibility ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/)In this video, you'll learn how to use S3 API commands and tools with R2, set up and configure R2 for S3 API compatibility, and integrate R2 into your existing workflows with minimal changes.\n\n  [Watch Episode 4: Migrating your bucket data ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/)In this video, you will learn how to use Cloudflare R2's data migration tools to transfer data from other cloud providers such as Amazon S3 and Google Cloud Storage to R2.\n\n  [Watch Episode 5: Accessing your bucket from Cloudflare Workers ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/)In this video, you will build a serverless file API using Cloudflare Workers and R2 by setting up a project, securing uploads, enabling caching, and deploying the application.\n\n</page>\n\n<page>\n---\ntitle: Migrating your bucket data  Cloudflare Learning Paths\ndescription: >\n  In this video, you will learn how to use Cloudflare R2's data migration tools\n  to transfer data from other cloud providers such as Amazon S3 and Google Cloud\n  Storage to R2. The video will demonstrate the step-by-step process of setting\n  up and executing a data migration.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/\n  md: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/index.md\n---\n\n* Watch this episode\n\n  In this video, you will learn how to use Cloudflare R2's data migration tools to transfer data from other cloud providers such as Amazon S3 and Google Cloud Storage to R2. The video will demonstrate the step-by-step process of setting up and executing a data migration.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [Data migration overview](https://developers.cloudflare.com/r2/data-migration/)\n  * [Migration strategies](https://developers.cloudflare.com/r2/data-migration/migration-strategies/)\n  * [Super Slurper](https://developers.cloudflare.com/r2/data-migration/super-slurper/)\n  * [Sippy](https://developers.cloudflare.com/r2/data-migration/sippy/)\n\n* Series overview\n\n  [Watch Episode 1: Getting started with R2 ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/)In this video, you'll learn how to use Cloudflare R2 to store and manage data with no egress fees, supporting use cases like media, web assets, backups, and static site hosting.\n\n  [Watch Episode 2: Public buckets ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/)This video outlines how to configure public buckets in R2, which are private by default, to enable public Internet access. It presents two methods for setting up public access: using a custom domain or a Cloudflare managed subdomain.\n\n  [Watch Episode 3: S3 API compatibility ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/)In this video, you'll learn how to use S3 API commands and tools with R2, set up and configure R2 for S3 API compatibility, and integrate R2 into your existing workflows with minimal changes.\n\n  [Watch Episode 4: Migrating your bucket data ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/)In this video, you will learn how to use Cloudflare R2's data migration tools to transfer data from other cloud providers such as Amazon S3 and Google Cloud Storage to R2.\n\n  [Watch Episode 5: Accessing your bucket from Cloudflare Workers ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/)In this video, you will build a serverless file API using Cloudflare Workers and R2 by setting up a project, securing uploads, enabling caching, and deploying the application.\n\n</page>\n\n<page>\n---\ntitle: Accessing your bucket from Cloudflare Workers  Cloudflare Learning Paths\ndescription: >\n  In this video, you will set up a Cloudflare Workers project and connect it to\n  an existing or new R2 bucket. You will secure file uploads using\n  authentication tokens, configure the Wrangler settings, and enable Smart\n  Tiered Cache for optimal performance. Finally, you will deploy and test your\n  serverless API to upload and retrieve files such as podcast episodes.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/\n  md: https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/index.md\n---\n\n* Watch this episode\n\n  In this video, you will set up a Cloudflare Workers project and connect it to an existing or new R2 bucket. You will secure file uploads using authentication tokens, configure the Wrangler settings, and enable Smart Tiered Cache for optimal performance. Finally, you will deploy and test your serverless API to upload and retrieve files such as podcast episodes.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [C3 CLI](https://developers.cloudflare.com/pages/get-started/c3/)\n  * [AWS CLI example](https://developers.cloudflare.com/r2/examples/aws/aws-cli/)\n  * [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/)\n\n* Series overview\n\n  [Watch Episode 1: Getting started with R2 ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-1/)In this video, you'll learn how to use Cloudflare R2 to store and manage data with no egress fees, supporting use cases like media, web assets, backups, and static site hosting.\n\n  [Watch Episode 2: Public buckets ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-2/)This video outlines how to configure public buckets in R2, which are private by default, to enable public Internet access. It presents two methods for setting up public access: using a custom domain or a Cloudflare managed subdomain.\n\n  [Watch Episode 3: S3 API compatibility ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-3/)In this video, you'll learn how to use S3 API commands and tools with R2, set up and configure R2 for S3 API compatibility, and integrate R2 into your existing workflows with minimal changes.\n\n  [Watch Episode 4: Migrating your bucket data ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-4/)In this video, you will learn how to use Cloudflare R2's data migration tools to transfer data from other cloud providers such as Amazon S3 and Google Cloud Storage to R2.\n\n  [Watch Episode 5: Accessing your bucket from Cloudflare Workers ](https://developers.cloudflare.com/learning-paths/r2-intro/series/r2-5/)In this video, you will build a serverless file API using Cloudflare Workers and R2 by setting up a project, securing uploads, enabling caching, and deploying the application.\n\n</page>\n\n<page>\n---\ntitle: Gateway block page  Cloudflare Learning Paths\ndescription: With Cloudflare Zero Trust, you can deliver actionable feedback to\n  users when they are blocked by a Gateway policy. Custom block messages can\n  reduce user confusion and decrease your IT ticket load.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/block-page/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/block-page/index.md\n---\n\nWith Cloudflare Zero Trust, you can deliver actionable feedback to users when they are blocked by a Gateway policy. Custom block messages can reduce user confusion and decrease your IT ticket load.\n\nThere are two different ways to surface block messages:\n\n* [Custom block page](#custom-block-page)\n* [WARP client block notifications](#warp-client-block-notifications)\n\n## Custom block page\n\nYou can display a custom block page in the browser when users are blocked by a Gateway DNS or HTTP policy. This is a static page that educates users on why they were blocked and how to contact IT.\n\nThe custom block page has a few drawbacks:\n\n* To display the block page, you must install a [user-side certificate](https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/enable-tls-decryption/#configure-user-side-certificates) on the end user device.\n* The block page does not appear when users are blocked by a Gateway network policy.\n* The custom block page only displays when the user loads a site in a browser. If, for instance, the user is allowed to visit a site but not allowed to upload a file, the file upload would fail silently and the user would not get a block page.\n\nTo work around these limitations, we recommend using [WARP client block notifications](#warp-client-block-notifications).\n\nNote\n\nThe Gateway custom block page is a different concept from [Access custom block pages](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/access-block-page/), which are used in conjunction with Cloudflare Access policies.\n\n### Enable the block page for DNS policies\n\nFor DNS policies, you will need to enable the block page on a per-policy basis.\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Traffic policies** > **Firewall policies** > **DNS**.\n\n  2. Select **Add a policy** to create a new policy, or choose the policy you want to customize and select **Edit**. You can only edit the block page for policies with a Block action.\n\n  3. Under **Configure policy settings**, turn on **Modify Gateway block behavior**.\n\n  4. Choose your block behavior:\n\n     * **Use account-level block setting**: Use the global block page setting configured in your account settings. The global setting can be the default Gateway block page, an [HTTP redirect](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#redirect-to-a-block-page), or a [custom Gateway block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#customize-the-block-page).\n     * **Override account setting with URL redirect**: Redirect users with a `307` HTTP redirect to a URL you specify on a policy level.\n\n  5. (Optional) If your account-level block page setting uses a custom Gateway block page, you can turn on **Add an additional message to your custom block page when traffic matches this policy** to add a custom message to your custom block page when traffic is blocked by this policy. This option will replace the **Message** field.\n\n  6. Select **Save policy**.\n\n  Depending on your settings, Gateway will display a block page in your users' browsers or redirect them to a specified URL when they are blocked by this policy.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a DNS policy with a Block action.\n\n  3. In the policy's [`rule_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_policy), turn on `block_page_enabled`. If you have configured a [custom Gateway block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#customize-the-block-page), you can optionally show an additional `block_reason` when traffic is blocked by this policy.",
      "language": "unknown"
    },
    {
      "code": "### Customize the block page\n\nYou can customize the Cloudflare-hosted block page by making global changes that Gateway will display every time a user reaches your block page. Customizations will apply regardless of the type of policy (DNS or HTTP) that blocks the traffic.\n\nTo customize your block page:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Reusable components** > **Custom pages**.\n\n  2. Under **Account Gateway block page**, select **Customize**.\n\n  3. Choose **Custom Gateway block page**. Gateway will display a preview of your custom block page. Available customizations include:\n\n     * Your organization's name\n     * [Logo](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#add-a-logo-image)\n     * Header text\n     * Global block message, which will be displayed above the policy-specific block message\n     * [Mailto link](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/#allow-users-to-email-an-administrator)\n     * Background color\n\n  4. Select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. In [`cloudflare_zero_trust_gateway_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_settings), configure the `block_page` argument with your customizations:",
      "language": "unknown"
    },
    {
      "code": "Gateway will now display a custom Gateway block page when your users visit a blocked website.\n\n## WARP client block notifications\n\nNote\n\nOnly available on Enterprise plans.\n\nFor more granular user feedback, you can enable WARP client block notifications on any Gateway DNS or Network *Block* policy. Blocked users will receive an operating system notification from the WARP client with a custom message you set.\n\nClient notifications provide additional functionality over the [custom block page](#custom-block-page):\n\n* Client notifications work with network policies, which means you can surface feedback for all partial actions on user traffic including blocking a specific port, file upload, or protocol.\n\n* Client notifications allow you to direct users to a unique link per individual policy. For example, you could link users to your organization's acceptable use policy, data protection policy, or any existing IT troubleshooting infrastructure. If no infrastructure for this exists within your organization, you can quickly deploy an HTML site on [Cloudflare Pages](https://developers.cloudflare.com/pages/), put the site behind a [Cloudflare Access policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/), and provide dynamic feedback based on the identity and device posture values found in the user's [Access JWT](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/application-token/).\n\n</page>\n\n<page>\n---\ntitle: Create a list of IPs or domains  Cloudflare Learning Paths\ndescription: Gateway supports creating lists of IPs, hostnames, or other entries\n  to reference in your policies.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/create-list/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/create-list/index.md\n---\n\nGateway supports creating [lists](https://developers.cloudflare.com/cloudflare-one/reusable-components/lists/) of IPs, hostnames, or other entries to reference in your policies.\n\nIt is likely that you will be onboarding to the Cloudflare platform with some predetermined series of security policies. Maybe you have explicit deny lists based on hostnames, IPs, or another measure that tie to individual users. Maybe some networks can access certain apex records while others cannot.\n\nThe best way to migrate to Cloudflare in a way that will simplify ongoing maintenance is to build as many reusable objects as possible. Not only because that makes policy building simpler, but because as those applications, networks, and services organically change and grow, updates to the lists automatically update everywhere that the lists are applied.\n\n## Create a list from a CSV file\n\nTo test uploading CSV lists, you can download a [sample CSV file](https://developers.cloudflare.com/cloudflare-one/static/list-test.csv) of IP address ranges or copy the following into a file:",
      "language": "unknown"
    },
    {
      "code": "When you format a CSV file for upload:\n\n* Each line should be a single entry that includes a value and an optional description.\n* A header row must be present for Zero Trust to recognize descriptions.\n* Trailing whitespace characters are not allowed.\n* CRLF (Windows) and LF (Unix) line endings are valid.\n\nTo upload the list to Cloudflare One:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Reusable components** > **Lists**.\n  2. Select **Upload CSV**.\n  3. Next, specify a **List name**, enter an optional description, and choose a **List type**.\n  4. Drag and drop a file into the **CSV file** window, or select a file.\n  5. Select **Create**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Decode the contents of the CSV file and store it as a local value:",
      "language": "unknown"
    },
    {
      "code": "3. Create a list using the [`cloudflare_zero_trust_list`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_list) resource:",
      "language": "unknown"
    },
    {
      "code": "You can now use this list in the policy builder by choosing the *in list* operator.\n\n## Create a list manually\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Lists**.\n  2. Select **Create manual list**.\n  3. Next, specify a **List name**, enter an optional description, and choose a **List type**.\n  4. Enter your list element manually into the **Add entry** field and select **Add**.\n  5. Select **Save**.\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Create a list using the [`cloudflare_zero_trust_list`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_list) resource.\n\n     Example list of IPs:",
      "language": "unknown"
    },
    {
      "code": "Example list of domains:",
      "language": "unknown"
    },
    {
      "code": "You can now use this list in the policy builder by choosing the *in list* operator.\n\n</page>\n\n<page>\n---\ntitle: Secure your first application  Cloudflare Learning Paths\ndescription: \"To ensure holistic security precautions, we recommend securing\n  each distinct private application with at least two policies:\"\nlastUpdated: 2025-12-02T17:49:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/create-policy/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/create-policy/index.md\n---\n\nTo ensure holistic security precautions, we recommend securing each distinct private application with at least two policies:\n\n* A [Gateway DNS policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/) with the appropriate identity and device posture values, targeting the domain list that defines your application. Policy enforcement happens at the request resolution event, before the users device makes a connection request to the application itself; if denied here, no traffic will reach your private network.\n\n* A [Gateway network policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/) with the same identity and device posture values as the DNS policy, targeting the IP list that defines your application. You can optionally include the domain list by matching the SNI header. Then, you can include any combinations of ports or protocols that are relevant for application access. Network policy enforcement happens after the user passes the DNS policy, when the user's device attempts to connect to the target application.\n\n## Create a Gateway policy\n\nTo create a new policy, open [Cloudflare One](https://one.dash.cloudflare.com/) and go to **Gateway** > **Firewall policies**.\n\n## Example DNS policy\n\n* Dashboard\n\n  | Traffic Selector | Operator | Value |\n  | - | - | - |\n  | Domain | in list | `Company Wiki domains` |\n\n  | Identity Selector | Operator | Value |\n  | - | - | - |\n  | User email | matches regex | `.*@example.com` |\n\n  | Action |\n  | - |\n  | Allow |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "## Example network policy\n\n* Dashboard\n\n  | Traffic Selector | Operator | Value |\n  | - | - | - |\n  | Destination IP | in list | `Company Wiki IPs` |\n\n  | Identity Selector | Operator | Value |\n  | - | - | - |\n  | User Email | matches regex | `.*@example.com` |\n\n  | Action |\n  | - |\n  | Allow |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "### Catch-all policy\n\nWe recommend adding a catch-all policy to the bottom of your network policy list. An effective Zero Trust model should prioritize default-deny actions to avoid any overly permissive policy building. For example,\n\n* Dashboard\n\n  | Traffic Selector | Operator | Value | Logic |\n  | - | - | - | - |\n  | Destination IP | in list | `All private network ranges` | Or |\n  | SNI Domain | in list | `All private apex domains` | |\n\n  | Action |\n  | - |\n  | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)",
      "language": "unknown"
    },
    {
      "code": "Network policies are evaluated in [top-down order](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/#order-of-precedence), so if a user does not match an explicitly defined policy for an application, they will be blocked. To learn how multiple policies interact, refer to [Order of enforcement](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/).\n\nNote\n\nIt is not recommended to employ a default-deny model while testing. Instead, build your explicit application policies and [monitor your logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/gateway-logs/) to determine if your policies are working as expected. If you do not see the policies triggering in your logs, you may need to tune your policies and review what kind of information (identity groups, device posture values, etc.) is being sent with your traffic.\n\n</page>\n\n<page>\n---\ntitle: Policy design  Cloudflare Learning Paths\ndescription: Most policy building for private network access happens within the\n  Gateway DNS and Gateway Network policy builders. For the most part, customers\n  use a mixture of DNS resolution, SNI hostname values, and IP address groupings\n  as the baseline for defining policies that pertain to specific applications.\nlastUpdated: 2025-10-29T14:53:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/policy-design/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/policy-design/index.md\n---\n\nMost policy building for private network access happens within the Gateway DNS and Gateway Network policy builders. For the most part, customers use a mixture of DNS resolution, SNI hostname values, and IP address groupings as the baseline for defining policies that pertain to specific applications.\n\n## Considerations\n\nBefore building your policies, it is helpful to ask yourself a few questions:\n\n* Should all users and services be able to reach all connected subnets? Are there explicit exceptions?\n* Do all applications live within a primary network range, and are they defined by static or dynamic hosts and IP addresses?\n* Are there DevOps workflows that rely on completely ephemeral IPs or subdomains?\n* Do you have sources of truth for identity and device posture that will be used in policies?\n* Do you plan to immediately implement a default-deny model? In other words, will you block all users except for those who match an explicit Allow policy?\n\n## Prepare to build policies\n\nWe recommend the following approach when planning your Zero Trust Network Access policies.\n\n### 1. Determine your sources of truth\n\n#### Identity\n\nDetermine which identity provider you will use as the source of truth for user email, user groups, and other [identity-based attributes](https://developers.cloudflare.com/cloudflare-one/traffic-policies/identity-selectors/).\n\nNote\n\nEnsure that the [identity provider is connected to Cloudflare](https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/configure-idp/) and available to users in your [device enrollment permissions](https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-enrollment-permissions/).\n\nIf you plan to grant access to services based on group membership, [view the user registry](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/users/) and verify that the target users have that group value in their User Registry.\n\n#### Device posture\n\nMost customers will also build policies that are contingent on the use of a corporate device. For example, all users on corporate devices can access `*.jira.internal.com`, but users on personal devices can only access `dev.internal.jira.com`. In order for this to be effective, we recommend defining a source of truth for your corporate devices. This is sometimes the presence of a specific [issued certificate](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/client-certificate/), the presence of a [process with a matched hash](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/application-check/), or an API integration with a supported [thirty-party endpoint security provider](https://developers.cloudflare.com/cloudflare-one/integrations/service-providers/) like Crowdstrike or SentinelOne.\n\nNote\n\nBe sure to [enable the device posture checks](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/) that you want to use in your policies.\n\n### 2. Define your networks\n\nAlmost all businesses have a series of interconnected networks, either physical or virtual. Prepare a list of all relevant networks, subnets, or segments within your network that users currently access, either locally or when using the VPN. For example,\n\n| Network name | Location | IP range | Accessible by VPN? |\n| - | - | - | - |\n| Corporate DC | AWS US East - VA, USA | `10.0.0.0/8` | Yes |\n\n### 3. Define your applications\n\nNext, prepare a list of all relevant internal applications on your networks that will have distinct policy requirements (for example, different user identity or device posture requirements). Each application should be defined by an IP list, a hostname/domain list, or sometimes both.\n\n| Application name | Local IPs | Hostnames | Accessible via IP? | Static or dynamic IP? |\n| - | - | - | - | - |\n| Company Wiki | `10.128.0.10` | `wiki.internal.com` | Yes | Static |\n\nFor example, you may have an application at `a.internal.com` which points to a load balancer with a static IP address, balancing a series of dynamic hosts serving the application on `a.internal.com`. Because the IPs of the application hosts are dynamic, the best practice would be to build two policies: a network policy for the load balancer IP, and a DNS policy for the application hostnames.\n\nOn the other hand, if the IPs behind the load balancer are static or only semi-dynamic, it may make sense to directly use the application IPs in your network policy. You can build a workflow to update the application IP list via a Cloudflare API call whenever host changes are made in your infrastructure provider.\n\n### 4. List existing policies\n\nGather any existing security policies or block lists that you wish to migrate from your VPN provider to Zero Trust.\n\nDescaler program\n\nIf you are an Enterprise organization migrating from Zscaler, you can use our [Descaler toolkit](https://blog.cloudflare.com/descaler-program/) to export policies from Zscaler Internet Access (ZIA) and import them into Cloudflare Gateway.\n\n</page>\n\n<page>\n---\ntitle: Session timeouts  Cloudflare Learning Paths\ndescription: Most legacy VPNs have a global timeout setting that requires end\n  users to log in every X hours or resets VPN profiles at a certain frequency.\n  By doing continuous identity evaluation, a Zero Trust security model\n  eliminates the need for most of the user-interrupting workflows triggered by\n  session timeouts. However, there can still be valid reasons to want users to\n  reauthenticate, either on a recurring basis or to access specific,\n  highly-sensitive or regulated internal services.\nlastUpdated: 2025-02-21T10:05:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/session-timeouts/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/session-timeouts/index.md\n---\n\nMost legacy VPNs have a global timeout setting that requires end users to log in every X hours or resets VPN profiles at a certain frequency. By doing continuous identity evaluation, a Zero Trust security model eliminates the need for most of the user-interrupting workflows triggered by session timeouts. However, there can still be valid reasons to want users to reauthenticate, either on a recurring basis or to access specific, highly-sensitive or regulated internal services.\n\nTo enforce WARP client reauthentication, you can configure WARP session timeouts on a per-application basis in your Gateway network policies.\n\nWhen a user goes to a protected application or website, Cloudflare checks their WARP session duration against the configured session timeout. If the session has expired, the user will be prompted to re-authenticate with the identity provider (IdP) used to enroll in the WARP client.\n\n![WARP client prompts user to re-authenticate session.](https://developers.cloudflare.com/_astro/warp-reauthenticate-session.BjGtdKWz_ZIudhz.webp)\n\nA user's WARP session duration resets to zero whenever they re-authenticate with the IdP, regardless of what triggered the authentication event.\n\n## Configure WARP session timeout\n\nYou can enforce WARP session timeouts on any Gateway Network and HTTP policy that has an Allow action. If you do not specify a session timeout, the WARP session will be unlimited by default.\n\nSession timeouts have no impact on Gateway DNS policies. DNS policies remain active even when a user needs to re-authenticate.\n\nTo configure a session timeout for a Gateway policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to either **Traffic policies** > **Firewall policies**. Choose either **Network** or **HTTP**.\n  2. Add a policy and select the *Allow* action. Alternatively, choose any existing *Allow* policy.\n  3. Under **Step 4 - Configure policy settings**, select **Edit** next to **Enforce WARP client session duration**.\n  4. Enter a session expiration time in `1h30m0s` format and save.\n  5. Save the policy.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a Network (`l4`) or HTTP (`http`) policy with an Allow action.\n\n  3. In the policy's [`rule_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_policy), use the `check_session` argument to enable and configure a session timeout:",
      "language": "unknown"
    },
    {
      "code": "Session checks are now enabled for the application protected by this policy. Users can continue to reach applications outside of the policy definition.\n\n## Global timeouts\n\nTo set a global reauthentication event, similar to a global timeout on a traditional VPN, we recommend setting all of your Gateway Network Allow policies to the same baseline WARP session duration (typically between 3-7 days). This will ensure that whenever your user tries to access any application on the private network within that window, they will be forced to reauthenticate with your identity provider when they have not logged in for your chosen number of days.\n\nIf a specific application requires a more stringent reauthentication timeline, users accessing that application will not have to complete the baseline reauthentication event because they are already in compliance with the baseline policy.\n\nNote\n\nA global timeout does not necessarily fit all customer needs. With the increased interrogation of traffic offered by ZTNA compared to traditional remote access, many customers choose not to use a global reauthentication event and instead only use reauthentication for specific applications.\n\n### Common mistake\n\nWhen configuring a global WARP session duration, a common mistake is to build a single policy that covers your entire private network range. An example would be an Allow policy that requires reauthentication every 7 days for all users with traffic to a destination IP in `10.0.0.0/8`. This type of global policy may result in a suboptimal user experience because an expired session blocks the user from the entire internal network (including private DNS functionality) instead of specific applications. If a user misses the one-time reauth notification, they may not know that they need to manually go into their WARP client settings to reauthenticate.\n\n</page>\n\n<page>\n---\ntitle: Shadow IT discovery  Cloudflare Learning Paths\ndescription: Shadow IT refers to the unsanctioned use of software, hardware, or\n  other systems and services within an organization, often without the knowledge\n  of that organization's information technology (IT) department.\nlastUpdated: 2025-01-08T22:36:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/shadow-it/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/build-policies/shadow-it/index.md\n---\n\n[Shadow IT](https://www.cloudflare.com/learning/access-management/what-is-shadow-it/) refers to the unsanctioned use of software, hardware, or other systems and services within an organization, often without the knowledge of that organization's information technology (IT) department.\n\nAfter you have built your initial set of application policies and have users using Cloudflare Zero Trust as a replacement for your VPN, review your [Shadow IT discovery report](https://developers.cloudflare.com/cloudflare-one/insights/analytics/shadow-it-discovery/#private-network-origins) to determine what kind of services are seeing the most traffic on your network. In almost all cases, businesses very quickly find unknown, usually widely accessed resources. As you find new (and sometimes surprising) services within that list, modify your Gateway policies to allow or block these services.\n\n</page>\n\n<page>\n---\ntitle: What is a VPN?  Cloudflare Learning Paths\ndescription: A virtual private network (VPN) is an Internet security service\n  that allows users to access the Internet as though they were connected to a\n  private network. This encrypts Internet communications and provides a strong\n  degree of anonymity. Some of the most common reasons people use VPNs are to\n  protect against snooping on public WiFi, to circumvent Internet censorship, or\n  to connect to a businesss internal network for the purpose of remote work.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/vpn-overview/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/vpn-overview/index.md\n---\n\nA virtual private network (VPN) is an Internet security service that allows users to access the Internet as though they were connected to a private network. This encrypts Internet communications and provides a strong degree of anonymity. Some of the most common reasons people use VPNs are to protect against snooping on public WiFi, to circumvent Internet censorship, or to connect to a businesss internal network for the purpose of remote work.\n\n## Why use a VPN\n\nOrdinarily, most Internet traffic is unencrypted and very public. When a user creates an Internet connection, such as visiting a website in a browser, the users device will connect to their Internet Service Provider (ISP). The ISP will then connect to the Internet to find the appropriate web server to communicate with to fetch the request website.\n\nInformation about the user is exposed in every step of the website request. Since the users IP address is exposed throughout the process, the ISP and any other intermediary can keep logs of the users browsing habits. Additionally, the data flowing between the users device and the web server is unencrypted; this creates opportunities for malicious actors to spy on the data or perpetrate attacks on the user, such as an [on-path attack](https://www.cloudflare.com/learning/security/threats/on-path-attack/).\n\n## How a VPN works\n\nA user connecting to the Internet using a VPN service has a higher level of security and privacy.",
      "language": "unknown"
    },
    {
      "code": "A VPN connection involves the following four steps:\n\n1. The VPN client connects to the ISP using an encrypted connection.\n2. The ISP connects the VPN client to the VPN server, maintaining the encrypted connection.\n3. The VPN server decrypts the data from the users device and then connects to the Internet to access the web server in an unencrypted communication.\n4. The VPN server creates an encrypted connection with the client, known as a VPN tunnel.\n\nThe VPN tunnel between the VPN client and VPN server passes through the ISP, but since all the data is encrypted, the ISP cannot see the users activity. The VPN servers communications with the Internet are unencrypted, but the web servers will only log the IP address of the VPN server, which gives them no information about the user.\n\n</page>\n\n<page>\n---\ntitle: What is Cloudflare?  Cloudflare Learning Paths\ndescription: Cloudflare is one of the world's largest connectivity cloud\n  networks. Today, anyone with an Internet presence can have faster and more\n  secure websites and applications thanks to Cloudflare. This includes bloggers,\n  businesses, and even non-profits.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/what-is-cloudflare/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/what-is-cloudflare/index.md\n---\n\nCloudflare is one of the world's largest [connectivity cloud networks](https://blog.cloudflare.com/welcome-to-connectivity-cloud). Today, anyone with an Internet presence can have faster and more secure websites and applications thanks to Cloudflare. This includes bloggers, businesses, and even non-profits.\n\nMillions of Internet properties are on Cloudflare, and our network is growing by tens of thousands each day. Cloudflare powers Internet requests for millions of websites and serves 55 million HTTP requests per second on average.\n\n</page>\n\n<page>\n---\ntitle: Why should you replace your VPN?  Cloudflare Learning Paths\ndescription: Many organizations rely on VPNs to protect their data, but for many\n  reasons, VPNs are often not ideal for defending against today's risks.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/why-vpn/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/concepts/why-vpn/index.md\n---\n\nMany organizations rely on VPNs to protect their data, but for many reasons, VPNs are often not ideal for defending against today's risks.\n\n## Downsides of a VPN\n\nVPNs invoke a perimeter-based security model (often called the [castle-and-moat model](https://www.cloudflare.com/learning/access-management/castle-and-moat-network-security/)), which grant users access to the entire internal network once they login to the VPN client. In castle-and-moat security, it is hard to obtain access from outside the network, but everyone inside the network is trusted by default. The problem with this approach is that once an attacker gains access to the network, they have free rein over everything inside. In the modern digital landscape, where users can access resources from various locations and devices, this concept of a fixed perimeter is no longer effective.\n\n## ZTNA vs. VPNs\n\n[Zero Trust Network Access (ZTNA)](https://www.cloudflare.com/learning/access-management/what-is-ztna/) is the main technology that enables organizations to transition from a traditional VPN configuration to a more secure and modern approach.\n\n**Insider threats**  ZTNA enhances security by assuming that threats may exist both inside and outside the network. Whereas a VPN implicitly trusts all logged-in users, ZTNA emphasizes the [principle of least privilege](https://www.cloudflare.com/learning/access-management/principle-of-least-privilege/) and enforces continuous verification of user identity.\n\n**Network security**  A ZTNA architecture reduces the blast radius of potential threats by facilitating network [micro-segmentation](https://www.cloudflare.com/learning/access-management/what-is-microsegmentation/). Unlike VPNs, which grant users access to the entire corporate network, ZTNA only grants access to a specific application and denies access to all other resources by default.\n\n**Performance**  ZTNA connects users to corporate networks via [the cloud](https://www.cloudflare.com/learning/cloud/what-is-the-cloud/) instead of via on-premise VPN servers. This enables users to connect from anywhere without experiencing performance degradation and integrates more easily with cloud-based infrastructure.\n\n</page>\n\n<page>\n---\ntitle: Define device enrollment permissions  Cloudflare Learning Paths\ndescription: Device enrollment permissions determine which users can connect new\n  devices to your organization's Cloudflare Zero Trust instance. Once the user\n  registers their device, the WARP client will store their identity token and\n  use it to authenticate to services in your private network.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-enrollment-permissions/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-enrollment-permissions/index.md\n---\n\nDevice enrollment permissions determine which users can connect new devices to your organization's Cloudflare Zero Trust instance. Once the user registers their device, the WARP client will store their identity token and use it to authenticate to services in your private network.\n\n## Set device enrollment permissions\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles** > **Management**.\n\n  2. In **Device enrollment** > **Device enrollment permissions**, select **Manage**.\n\n  3. In the **Policies** tab, configure one or more [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to define who can join their device. For example, you could allow all users with a company email address:\n\n     | Rule type | Selector | Value |\n     | - | - | - |\n     | Include | Emails ending in | `@company.com` |\n\n  Note\n\n  Device posture checks are not supported in device enrollment policies. WARP can only perform posture checks after the device is enrolled.\n\n  1. In the **Login methods** tab:\n\n     a. Select the [identity providers](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) users can authenticate with. If you have not integrated an identity provider, you can use the [one-time PIN](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/).\n\n     b. (Optional) If you plan to only allow access via a single IdP, turn on **Instant Auth**. End users will not be shown the Cloudflare Access login page. Instead, Cloudflare will redirect users directly to your SSO login event.\n\n  2. Select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Apps and Policies Write`\n\n  2. Create a reusable Access policy using the [`cloudflare_zero_trust_access_policy`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_policy) resource:",
      "language": "unknown"
    },
    {
      "code": "3. Use the [`cloudflare_zero_trust_access_application`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_application) resource to create an application with type `warp`.",
      "language": "unknown"
    },
    {
      "code": "## Only allow corporate devices\n\nDevice posture evaluation happens after a device has already enrolled in your Zero Trust organization. If you want only specific devices to be able to enroll, we recommend adding a [mutual TLS authentication](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/) rule to your device enrollment policy. This rule will check for the presence of a specific client certificate on the enrolling devices.\n\nNote\n\nMutual TLS authentication is only available on Enterprise plans.\n\nCertificate requirements\n\n* The CA certificate can be from a publicly trusted CA or self-signed.\n\n* In the certificate `Basic Constraints`, the attribute `CA` must be set to `TRUE`.\n\n* The certificate must use one of the signature algorithms listed below:\n\n  Allowed signature algorithms\n\n  `x509.SHA1WithRSA`\n\n  `x509.SHA256WithRSA`\n\n  `x509.SHA384WithRSA`\n\n  `x509.SHA512WithRSA`\n\n  `x509.ECDSAWithSHA1`\n\n  `x509.ECDSAWithSHA256`\n\n  `x509.ECDSAWithSHA384`\n\n  `x509.ECDSAWithSHA512`\n\nTo check for an mTLS certificate:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Access controls** > **Service credentials** > **Mutual TLS**.\n\n  2. Select **Add mTLS Certificate**.\n\n  3. Enter any name for the root CA.\n\n  4. In **Certificate content**, paste the contents of your root CA.\n\n     If the client certificate is directly signed by the root CA, you only need to upload the root. If the client certificate is signed by an intermediate certificate, you must upload the entire CA chain (intermediate and root). For example:",
      "language": "unknown"
    },
    {
      "code": "1) In **Associated hostnames**, enter your Zero Trust team domain: `<team-name>.cloudflareaccess.com`\n\n  2) In your [device enrollment permissions](#set-device-enrollment-permissions), add a *Common Name* or *Valid Certificate* rule. For example, the following policy requires a client certificate with a specific common name:\n\n     | Action | Rule type | Selector | Value |\n     | - | - | - | - |\n     | Allow | Require | Common Name | `<CERT-COMMON-NAME>` |\n\n  3) On your device, add the client certificate to the [system keychain](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#test-in-the-browser).\n\n* Terraform (v5)\n\n  1. Add the following permissions to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Mutual TLS Certificates Write`\n     * `Access: Apps and Policies Write`\n\n  2. Use the [`cloudflare_zero_trust_access_mtls_certificate`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_mtls_certificate) resource to add an mTLS certificate to your account:",
      "language": "unknown"
    },
    {
      "code": "3. Create the following Access policy:",
      "language": "unknown"
    },
    {
      "code": "4. Add the policy to your [`cloudflared_zero_trust_access_application` for WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#set-device-enrollment-permissions).\n\n  5. On your device, add the client certificate to the [system keychain](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#test-in-the-browser).\n\n## Best practices\n\nMost businesses use a single identity provider as the source of truth for their user directory. You should use this source of truth to onboard your corporate users to Zero Trust, for example by requiring company email addresses to login with your primary identity provider. Later on, you can add other login methods or identity providers as necessary for any contractors, vendors, or acquired corporations who may need access to your network.\n\n</page>\n\n<page>\n---\ntitle: Customize device profiles  Cloudflare Learning Paths\ndescription: A device profile defines WARP client settings for a specific set of\n  devices in your organization. You can create multiple profiles and apply\n  different settings based on the user's identity, the device's location, and\n  other criteria.\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-profiles/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/device-profiles/index.md\n---\n\nA device profile defines [WARP client settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) for a specific set of devices in your organization. You can create multiple profiles and apply different settings based on the user's identity, the device's location, and other criteria.\n\nFor example, users in one identity provider group (signifying a specific office location) might have different routes that need to be excluded from their WARP tunnel, or some device types (like Linux) might need different DNS settings to accommodate local development services.\n\n## Configure the default profile\n\nSet your default device profile to be applicable to a majority of your userbase, or any user without known explicit considerations.\n\nTo customize the default settings:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Select the **Default** profile and select \\**Edit*.\n\n  3. Many users running Cloudflare Zero Trust as a VPN replacement have a default profile that resembles the following. Refer to [WARP client settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) for a description of each setting.\n\n     | Setting | State | Notes |\n     | - | - | - |\n     | Captive portal detection | Enabled | |\n     | Mode switch | Disabled | If enabled, users have the option to switch to a DNS-only security mode and lose access to your private network. Usually disabled for a VPN replacement use case. |\n     | Lock WARP switch | Enabled | Should be enabled unless users have an explicit reason to disable WARP, such as a conflicting VPN client on the device or other extenuating circumstances. If disabled for concerns about user experience, **Auto Connect** should be enabled and set on a short interval, like 10-15 minutes. |\n     | Allow device to leave organization | Disabled | |\n     | Allow updates | Disabled | Usually disabled on managed devices. If enabled, users who are local administrators on their device can update the WARP client on their own  this can introduce version consistency control issues if WARP versions are centrally managed by IT. |\n     | Auto connect | Enabled | Timeout is usually set between 10min - 30min. |\n     | Support URL | Enabled | |\n     | Service mode | Gateway with WARP | Proxies device traffic to Cloudflare according to your Split Tunnel rules. |\n     | Local Domain Fallback | | Refer to [Resolve Private DNS](https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/private-dns/). |\n     | Split Tunnels | Exclude IPs and domains | Refer to [Define Split Tunnels settings](https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/split-tunnel-settings/). |\n     | Directly route Microsoft 365 traffic | Disabled | Usually disabled to allow inspection of Microsoft 365 traffic. |\n\n  4. Save the profile.\n\n  5. Configure [global settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#global-settings) for all device profiles:\n\n     1. (Recommended) Enable **Admin override code** if you turned on **Lock WARP switch**.\n     2. Enable **Install CA to system certificate store** if you want users to see a [custom block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/).\n\n* API\n\n  1. Update the default device settings profile:",
      "language": "unknown"
    },
    {
      "code": "1. Update global settings:",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Configure default profile settings using the [`cloudflare_zero_trust_device_default_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile) resource:",
      "language": "unknown"
    },
    {
      "code": "3. Configure [global settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#global-settings) using the [`cloudflare_zero_trust_device_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_settings) resource:",
      "language": "unknown"
    },
    {
      "code": "## (Optional) Create an office profile\n\nYou can configure a device settings profile to take effect when the device is connected to a trusted network such as an office. For example, you may wish to allow users in the office to access applications directly rather than route traffic through Cloudflare.\n\nFor setup instructions, refer to [Add a managed network](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/).\n\n</page>\n\n<page>\n---\ntitle: Proxy traffic through Gateway  Cloudflare Learning Paths\ndescription: With Cloudflare Gateway, you can log and filter DNS, network, and\n  HTTP traffic from devices running the WARP client. This includes traffic to\n  the public Internet and traffic directed to your private network. DNS\n  filtering is enabled by default since the WARP client sends DNS queries to\n  Cloudflare's public DNS resolver, 1.1.1.1. To enable network and HTTP\n  filtering, you will need to allow Cloudflare Gateway to proxy that traffic.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/enable-proxy/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/enable-proxy/index.md\n---\n\nWith Cloudflare Gateway, you can log and filter DNS, network, and HTTP traffic from devices running the WARP client. This includes traffic to the public Internet and traffic directed to your private network. DNS filtering is enabled by default since the WARP client sends DNS queries to Cloudflare's public DNS resolver, [1.1.1.1](https://developers.cloudflare.com/1.1.1.1/). To enable network and HTTP filtering, you will need to allow Cloudflare Gateway to proxy that traffic.\n\n## Enable the proxy\n\nTo start logging and filtering network traffic, turn on the Gateway proxy:\n\n* Dashboard\n\n  1. Go to **Traffic policies** > **Traffic settings**.\n  2. In **Proxy and inspection**, turn on **Allow Secure Web Gateway to proxy traffic**.\n  3. Select **TCP**.\n  4. (Recommended) To proxy traffic to internal DNS resolvers, select **UDP**.\n  5. (Recommended) To proxy traffic for diagnostic tools such as `ping` and `traceroute`, select **ICMP**. You may also need to [update your system](https://developers.cloudflare.com/cloudflare-one/traffic-policies/proxy/#icmp) to allow ICMP traffic through `cloudflared`.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Turn on the TCP and/or UDP proxy using the [`cloudflare_zero_trust_device_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_settings) resource:",
      "language": "unknown"
    },
    {
      "code": "Cloudflare will now proxy traffic from enrolled devices, except for the traffic excluded in your [split tunnel settings](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#3-route-private-network-ips-through-warp). For more information on how Gateway forwards traffic, refer to [Gateway proxy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/proxy/).\n\n</page>\n\n<page>\n---\ntitle: Enable TLS decryption (optional)  Cloudflare Learning Paths\ndescription: TLS decryption allows Cloudflare Gateway to inspect HTTPS requests\n  to your private network applications.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/enable-tls-decryption/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/enable-tls-decryption/index.md\n---\n\n[TLS decryption](https://www.cloudflare.com/learning/security/what-is-https-inspection/) allows Cloudflare Gateway to inspect HTTPS requests to your private network applications.\n\n## Should I enable TLS decryption?\n\nWith TLS decryption turned on, you can apply advanced Gateway policies, such as:\n\n* Filtering based on the complete URL and path of requests\n* Scanning for sensitive data with [Cloudflare Data Loss Prevention (DLP)](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/)\n* Starting a remote browser isolation session with [Cloudflare Browser Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/)\n\nThese features can increase the security posture of sensitive systems, but TLS decryption can also break your users' access to certain resources. For instance, if your internal applications use self-signed certificates, you will need to either configure a [Do Not Inspect](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#do-not-inspect) policy or an [Untrusted certificate *Pass through*](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#untrusted-certificates) policy to allow users to connect. To learn more, refer to [TLS decryption limitations](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#inspection-limitations).\n\nWith TLS decryption turned off, Gateway can only inspect and apply HTTP policies to unencrypted HTTP requests. However, you can still apply network policies to HTTPS traffic based on user identity, device posture, IP, resolved domain, SNI, and other attributes that support a Zero Trust security implementation. For more information, refer to [Gateway network policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/).\n\n## Enable TLS decryption\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Traffic settings**.\n  2. In **Proxy and inspection**, turn on **Inspect HTTPS requests with TLS decryption**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Configure the `tls_decrypt` argument in [`cloudflare_zero_trust_gateway_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_settings):",
      "language": "unknown"
    },
    {
      "code": "Next, choose a [user-side certificate](#configure-user-side-certificates) to use for inspection.\n\n## Configure user-side certificates\n\nWhen you enable TLS decryption, Gateway will decrypt all traffic sent over HTTPS, apply your HTTP policies, and then re-encrypt the request with a certificate on the user device. You can either [install the certificate provided by Cloudflare](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/automated-deployment/) (default option) or [upload a custom root certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/custom-certificate/) to Cloudflare (Enterprise-only option).\n\n### Best practices\n\nDeploying the Cloudflare root certificate is the simplest way to get started with TLS decryption and is usually appropriate for testing or proof of concept conditions.\n\nIf you already have a certificate that you use for other inspection or trust purposes, we recommend uploading your own root certificate for the following reasons:\n\n* Using a single certificate streamlines IT management.\n* If other services (such as `git` workflows, other CLI tools, or thick client applications) rely on an existing certificate store, presenting the same certificate in inspection is far less likely to interrupt their traffic flow.\n* If you are using WARP Connector to connect devices to Cloudflare, those devices will not be able to leverage HTTP policies that require decrypting TLS unless they have a certificate that matches either your uploaded certificate or the Cloudflare root certificate. It is more likely that your network infrastructure already has your own device certificates deployed, so using the existing PKI infrastructure for inspection will reduce the number of steps needed to deploy Zero Trust.\n\nMDM deployments\n\nMany customers [deploy WARP](https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/) onto devices in production using an MDM tool like JAMF or Intune. Cloudflare has the ability to deploy a root certificate along with the device, but this could be more consistently and holistically configured within the MDM, where other certificates are presumably managed, trusted, and stored.\n\n</page>\n\n<page>\n---\ntitle: Resolve private DNS  Cloudflare Learning Paths\ndescription: \"By default, all DNS requests on the user device are resolved by\n  Cloudflare's public DNS resolver except for common top level domains used for\n  local resolution (such as localhost). To allow users to connect to internal\n  server names or domains that do not resolve on the public Internet, you have\n  two options:\"\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/private-dns/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/private-dns/index.md\n---\n\nBy default, all DNS requests on the user device are resolved by Cloudflare's [public DNS resolver](https://developers.cloudflare.com/1.1.1.1/) except for common top level domains used for local resolution (such as `localhost`). To allow users to connect to internal server names or domains that do not resolve on the public Internet, you have two options:\n\n* [Add internal domains to Local Domain Fallback](#local-domain-fallback)\n* [Build custom resolver policies](#resolver-policies)\n\n## Local Domain Fallback\n\nLocal Domain Fallback tells the WARP client to send specific DNS requests to your private DNS resolver instead of to Cloudflare's public DNS resolver. This method was the primary delivery mechanism for private DNS for a long time, and is the simplest option, but it has two shortcomings: you cannot deterministically route private DNS queries to different resolvers based on specific attributes, and you cannot apply Gateway DNS policies to this traffic because Cloudflare is not resolving it.\n\nTo learn more about how Local Domain Fallback works, refer to [How the WARP client handles DNS requests](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/#how-the-warp-client-handles-dns-requests).\n\n### Add a domain\n\nTo add a domain to the Local Domain Fallback list:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Device profiles**.\n  2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to view or modify and select **Configure**.\n  3. Scroll down to **Local Domain Fallback** and select **Manage**.\n\n  1) In **Domain**, enter the apex domain (`example.com`) that you want to resolve using your private DNS server. All prefixes under the apex domain are subject to Local Domain Fallback (in other words, `example.com` is interpreted as `*.example.com`).\n\n  2) In **DNS Servers**, enter the IP address of the DNS servers that should resolve that domain name.\n\n  3) Enter an optional description and select **Save domain**.\n\n* Terraform (v5)\n\n  A Local Domain Fallback list is scoped to a specific [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/). If a device profile does not have a corresponding Local Domain Fallback resource, those devices will use the default local domains shown in Step 2.\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. (Optional) Create a list of domains that you can reuse across multiple device profiles. For example, you can declare a local value in the same module as your device profiles:",
      "language": "unknown"
    },
    {
      "code": "3. To configure Local Domain Fallback for the default device profile, use the [`cloudflare_zero_trust_device_default_profile_local_domain_fallback`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile_local_domain_fallback) resource. To configure Local Domain Fallback for a custom device profile, use[`cloudflare_zero_trust_device_custom_profile_local_domain_fallback`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile_local_domain_fallback). For example:",
      "language": "unknown"
    },
    {
      "code": "For `suffix`, specify the apex domain (`example.com`) that you want to resolve using your private DNS server. All prefixes under the apex domain are subject to Local Domain Fallback (in other words, `example.com` is interpreted as `*.example.com`). For `dns_server`, enter the IP address of the DNS servers that should resolve that domain name.\n\nWARP tries all servers and always uses the fastest response, even if that response is `no records found`. We recommend specifying at least one DNS server for each domain. If a value is not specified, the WARP client will try to identify the DNS server (or servers) used on the device before it started, and use that server for each domain in the Local Domain Fallback list.\n\n### Route traffic to fallback server\n\nThe WARP client routes DNS traffic to your [Local Domain Fallback server](#add-a-domain) according to your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/). To ensure that queries can reach your private DNS server:\n\n* If your DNS server is only reachable inside of the WARP tunnel (for example, via `cloudflared` or Magic WAN):\n\n  1. Go to **Networks** > **Routes** and verify that the DNS server is connected to Cloudflare. To connect a DNS server, refer to [Private networks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/).\n\n  2. In your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/), verify that the DNS server IP routes through the WARP tunnel.\n\n* If your DNS server is only reachable outside of the WARP tunnel (for example, via a third-party VPN), verify that the DNS server IP is [excluded from the WARP tunnel](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/).\n\nFor more information, refer to [How the WARP client handles DNS requests](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/#how-the-warp-client-handles-dns-requests).\n\n## Resolver policies\n\nNote\n\nOnly available on Enterprise plans.\n\n[Resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) provide similar functionality to Local Domain Fallback but occur in Cloudflare Gateway rather than on the local device. This option is recommended if you want more granular control over private DNS resolution. For example, you can ensure that all users in a specific geography use the private DNS server closest to them, ensure that specific conditions are met before resolving private DNS traffic, and apply [Gateway DNS policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/) to private DNS traffic.\n\n### Create a resolver policy\n\nVirtual network limitation\n\nResolver policies do not automatically update when you change the virtual networks associated with a route. If you move a route from one virtual network to another, the resolver policy will still reference the old virtual network. You will need to manually remove and recreate the resolver policy to update the route.\n\nTo create a resolver policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Resolver policies**.\n\n  2. Select **Add a policy**.\n\n  3. Create an expression for your desired traffic. For example, you can resolve a hostname for an internal service:\n\n     | Selector | Operator | Value |\n     | - | - | - |\n     | Host | in | `internal.example.com` |\n\n     Make sure your destination is not subject to [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/#manage-local-domains).\n\n  4. In **Select DNS resolver**, choose *Configure custom DNS resolvers*.\n\n  5. Enter the IP addresses of your custom DNS resolver. As you enter an IP address, Gateway will search through your [virtual networks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/tunnel-virtual-networks/) configured in Zero Trust.\n\n  6. In **Network**, choose whether to route queries publicly (to the Internet) or privately (to a private network service).\n\n  7. (Optional) Enter a custom port for each IP address.\n\n  8. Select **Create policy**.\n\n  Custom resolvers are saved to your account for future use. You can add up to 10 IPv4 and 10 IPv6 addresses to a policy.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Create a resolver policy using the [`cloudflare_zero_trust_gateway_policy`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_policy) resource:",
      "language": "unknown"
    },
    {
      "code": "When a user's query matches a resolver policy, Gateway will send the query to your listed resolvers in the following order:\n\n1. Public resolvers\n2. Private resolvers behind the default virtual network for your account\n3. Private resolvers behind a custom virtual network\n\nGateway will cache the fastest resolver for use in subsequent queries. Resolver priority is cached on a per user basis for each data center.\n\n</page>\n\n<page>\n---\ntitle: Download and install WARP  Cloudflare Learning Paths\ndescription: Most admins test by manually downloading the WARP client and\n  enrolling in your organization's Cloudflare Zero Trust instance.\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/install-agent/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/install-agent/index.md\n---\n\nMost admins test by manually downloading the WARP client and enrolling in your organization's Cloudflare Zero Trust instance.\n\n## Install WARP\n\n1. First, uninstall any existing third-party VPN software if possible. Sometimes products placed in a disconnected or disabled state will still interfere with the WARP client.\n\n2. If you are running third-party firewall or TLS decryption software, verify that it does not inspect or block traffic to the following destinations:\n\n   * IPv4 API endpoints: `162.159.137.105` and `162.159.138.105`\n   * IPv6 API endpoints: `2606:4700:7::a29f:8969` and `2606:4700:7::a29f:8a69`\n   * SNIs: `zero-trust-client.cloudflareclient.com` and `notifications.cloudflareclient.com`\n\n   For more information, refer to [WARP with firewall](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n\n3. Manually install WARP on the device.\n\n   Window, macOS, and Linux\n\n   To enroll your device using the WARP GUI:\n\n   1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the WARP client.\n\n   2. Launch the WARP client.\n\n   3. Select the Cloudflare logo in the menu bar.\n\n   4. Select the gear icon.\n\n   5. Go to **Preferences** > **Account**.\n\n   6. Select **Login with Cloudflare Zero Trust**.\n\n   7. Enter your team name.\n\n   8. Complete the authentication steps required by your organization.\n\n      Once authenticated, you will see a Success page and a dialog prompting you to open WARP.\n\n   9. Select **Open Cloudflare WARP.app** to complete the registration.\n\n   iOS, Android, and ChromeOS\n\n   1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the Cloudflare One Agent app.\n   2. Launch the Cloudflare One Agent app.\n   3. Select **Next**.\n   4. Review the privacy policy and select **Accept**.\n   5. Enter your team name.\n   6. Complete the authentication steps required by your organization.\n   7. After authenticating, select **Install VPN Profile**.\n   8. In the **Connection request** popup window, select **OK**.\n   9. If you did not enable [auto-connect](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#auto-connect), manually turn on the switch to **Connected**.\n\nThe WARP client should show as **Connected**. The device can now access private network resources that you have made available via Cloudflare Tunnel.\n\n</page>\n\n<page>\n---\ntitle: Define Split Tunnel settings  Cloudflare Learning Paths\ndescription: Split tunnel settings determine which traffic WARP does and does not proxy.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/split-tunnel-settings/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/split-tunnel-settings/index.md\n---\n\nSplit tunnel settings determine which traffic WARP does and does not proxy.\n\nWARP offers two different split tunnel modes:\n\n* If you intend to send all internal and external destination traffic through Cloudflare's global network, opt for **Exclude IPs and domains** mode. This mode will proxy everything through the WARP tunnel with the exception of IPs and hosts defined explicitly within the Split Tunnel list.\n* If you intend to only use WARP to proxy private destination traffic, you can operate in **Include IPs and domains** mode, in which you explicitly define which IP ranges and domains should be included in the WARP routing table.\n\n## Update Split Tunnels mode\n\nTo change your Split Tunnels mode:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to modify and select **Configure**.\n\n  3. Scroll down to **Split Tunnels**.\n\n  4. (Optional) To view your existing Split Tunnel configuration, select **Manage**. You will see a list of the IPs and domains Cloudflare Zero Trust excludes or includes, depending on the mode you have selected. We recommend making a copy of your Split Tunnel entries, as they will revert to the default upon switching modes.\n\n  5. Under **Split Tunnels**, choose a mode:\n\n     * **Exclude IPs and domains**  (Default) All traffic will be sent to Cloudflare Gateway except for the IPs and domains you specify.\n     * **Include IPs and Domains**  Only traffic destined to the IPs or domains you specify will be sent to Cloudflare Gateway. All other traffic will bypass Gateway and will no longer be filtered by your network or HTTP policies. In order to use certain features, you will need to manually add [Zero Trust domains](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-domains).\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a [`cloudflare_zero_trust_device_default_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile) or [`cloudflare_zero_trust_device_custom_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile) resource to modify, or [create a new device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/#create-a-new-profile).\n\n  3. In your device profile, configure either the `exclude` or `include` argument. You cannot set both `exclude` and `include` in a given device profile.\n\n     a. To manage Split Tunnel routes in **Exclude** mode, use the `exclude` argument:",
      "language": "unknown"
    },
    {
      "code": "In this example, all traffic will be sent to Cloudflare Gateway except for traffic destined to `10.0.0.0/8`. To exclude the default IPs and domains recommended by Cloudflare, refer to [Add a route](#add-a-route).\n\n     b. To manage Split Tunnel routes in **Include** mode, use the `include` argument:",
      "language": "unknown"
    },
    {
      "code": "In this example, only traffic destined to `10.0.0.0/8` will be sent to Cloudflare Gateway.\n\nAll clients with this device profile will now switch to the new mode and its default route configuration. Next, [add](#add-a-route) or [remove](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#remove-a-route) routes from your Split Tunnel configuration.\n\n## Add a route\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to modify and select **Configure**.\n\n  3. Under **Split Tunnels**, check whether your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) is set to **Exclude** or **Include**.\n\n  4. Select **Manage**.\n\n  5. You can exclude or include routes based on either their IP address or domain. When possible we recommend adding an IP address instead of a domain. To learn about the consequences of adding a domain, refer to [Domain-based Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#domain-based-split-tunnels).\n\n     * Add an IP\n\n       To add an IP address to Split Tunnels:\n\n       1. Select *IP Address*.\n       2. Enter the IP address or CIDR you want to exclude or include.\n       3. Select **Save destination**.\n\n       Traffic to this IP address is now excluded or included from the WARP tunnel.\n\n       Note\n\n       If you would like to exclude a specific IP range from a larger IP range, you can use this calculator:\n\n     * Add a domain\n\n       To add a domain to Split Tunnels:\n\n       1. Select *Domain*.\n       2. Enter a [valid domain](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#valid-domains) to exclude or include.\n       3. Select **Save destination**.\n       4. (Optional) If your domain does not have a public DNS record, create a [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) entry to allow a private DNS server to handle domain resolution.\n\n       When a user goes to the domain, the domain gets resolved according to your Local Domain Fallback configuration (either by Gateway or by your private DNS server). WARP Split Tunnels will then dynamically include or exclude the IP address returned in the DNS lookup.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a [`cloudflare_zero_trust_device_default_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile) or [`cloudflare_zero_trust_device_custom_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile) resource to modify, or [create a new device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/#create-a-new-profile).\n\n  3. (Optional) Create a list of split tunnel routes that you can reuse across multiple device profiles. For example, you can declare a local value in the same module as your device profiles:",
      "language": "unknown"
    },
    {
      "code": "4. In the device profile, exclude or include routes based on either their IP address or domain:",
      "language": "unknown"
    },
    {
      "code": "When possible we recommend adding an IP address instead of a domain. To learn about the consequences of adding a domain, refer to [Domain-based Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#domain-based-split-tunnels).\n\n* Add an IP\n\n  To add an IP address to Split Tunnels:\n\n  1. Select *IP Address*.\n  2. Enter the IP address or CIDR you want to exclude or include.\n  3. Select **Save destination**.\n\n  Traffic to this IP address is now excluded or included from the WARP tunnel.\n\n  Note\n\n  If you would like to exclude a specific IP range from a larger IP range, you can use this calculator:\n\n* Add a domain\n\n  To add a domain to Split Tunnels:\n\n  1. Select *Domain*.\n  2. Enter a [valid domain](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#valid-domains) to exclude or include.\n  3. Select **Save destination**.\n  4. (Optional) If your domain does not have a public DNS record, create a [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) entry to allow a private DNS server to handle domain resolution.\n\n  When a user goes to the domain, the domain gets resolved according to your Local Domain Fallback configuration (either by Gateway or by your private DNS server). WARP Split Tunnels will then dynamically include or exclude the IP address returned in the DNS lookup.\n\nIt may take up to 10 minutes for newly updated settings to propagate to devices.\n\nWe recommend keeping the Split Tunnels list short, as each entry takes time for the client to parse. In particular, domains are slower to action than IP addresses because they require on-the-fly IP lookups and routing table / local firewall changes. A shorter list will also make it easier to understand and debug your configuration. For information on device profile limits, refer to [Account limits](https://developers.cloudflare.com/cloudflare-one/account-limits/#warp).\n\n## Configure Split Tunnels for private network access\n\nBy default, WARP excludes traffic bound for [RFC 1918 space](https://datatracker.ietf.org/doc/html/rfc1918), which are IP addresses typically used in private networks and not reachable from the Internet. In order for WARP to send traffic to your private network, you must configure [Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/) so that the IP/CIDR of your private network routes through WARP.\n\n1. First, check whether your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) is set to **Exclude** or **Include** mode.\n\n2. Edit your Split Tunnel routes depending on the mode:\n\n   * Exclude IPs and domains\n\n     If you are using **Exclude** mode:\n\n     a. [Delete the route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#remove-a-route) containing your private network's IP/CIDR range. For example, if your network uses the default AWS range of `172.31.0.0/16`, delete `172.16.0.0/12`.\n\n     b. [Re-add IP/CIDR ranges](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) that are not explicitly used by your private network. For the AWS example above, you would add new entries for `172.16.0.0/13`, `172.24.0.0/14`, `172.28.0.0/15`, and `172.30.0.0/16`. This ensures that only traffic to `172.31.0.0/16` routes through WARP.\n\n     You can use the following calculator to determine which IP addresses to re-add:\n\n     Calculator instructions\n\n     1. In **Base CIDR**, enter the RFC 1918 range that you deleted from Split Tunnels.\n     2. In **Excluded CIDRs**, enter the IP/CIDR range used by your private network.\n     3. Re-add the calculator results to your Split Tunnel Exclude mode list.\n\n     By tightening the private IP range included in WARP, you reduce the risk of breaking a user's [access to local resources](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#allow-users-to-enable-local-network-exclusion).\n\n   * Include IPs and domains\n\n     If you are using **Include** mode:\n\n     1. Add the required [Zero Trust domains](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-domains) or [IP addresses](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-ip-addresses) to your Split Tunnel include list.\n     2. [Add a route](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#add-a-route) to include your private network's IP/CIDR range.\n\n</page>\n\n<page>\n---\ntitle: MDM deployment  Cloudflare Learning Paths\ndescription: Organizations can deploy WARP automatically to their fleet of\n  devices in a single operation. The WARP client is compatible with the vast\n  majority of managed deployment workflows, including mobility management\n  solutions such as Intune or JAMF, or by executing an .msi file on desktop\n  machines.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/mdm/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/mdm/index.md\n---\n\nOrganizations can deploy WARP automatically to their fleet of devices in a single operation. The WARP client is compatible with the vast majority of managed deployment workflows, including [mobility management solutions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/partners/) such as Intune or JAMF, or by executing an `.msi` file on desktop machines.\n\n## MDM policy file\n\nRefer to our [managed deployment instructions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/) and create a `.plist`, `mdm.xml`, or `.msi` policy file based on your organization's software management tool.\n\n[MDM parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) that you specify in a local policy file will overrule any [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) configured in the dashboard.\n\nTherefore, we recommend that your policy file only contain the organization name and potentially the onboarding flag, [relying on the dashboard](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/device-profiles/) to configure the remaining device settings.",
      "language": "unknown"
    },
    {
      "code": "1. In the [Cloudflare dashboard](https://dash.cloudflare.com/), select **Zero Trust**.\n\n   [Go to **Zero Trust**](https://one.dash.cloudflare.com/)\n\n2. On the onboarding screen, choose a team name. The team name is a unique, internal identifier for your Zero Trust organization. Users will enter this team name when they enroll their device manually, and it will be the subdomain for your App Launcher (as relevant). Your business name is the typical entry.\n\n   You can find your team name in [Cloudflare One](https://one.dash.cloudflare.com) by going to **Settings**.\n\n3. Complete your onboarding by selecting a subscription plan and entering your payment details. If you chose the **Zero Trust Free plan**, this step is still needed but you will not be charged.\n\n</page>\n\n<page>\n---\ntitle: Verify device connectivity  Cloudflare Learning Paths\ndescription: \"To validate that Cloudflare is receiving traffic from a user device:\"\nlastUpdated: 2025-11-20T01:18:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/validate-traffic-in-gateway/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/validate-traffic-in-gateway/index.md\n---\n\nTo validate that Cloudflare is receiving traffic from a user device:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Traffic policies** > **Traffic settings**.\n2. Under **Log traffic activity**, enable activity logging for all DNS logs.\n3. On your device, open a browser and go to any website.\n4. In Cloudflare One, go to **Insights** > **Logs** > **DNS**.\n5. Make sure DNS queries from your device appear.\n\n## Best practices\n\nSecuring your organization with a Zero Trust Network Access solution usually happens in two phases: the first phase is establishing connectivity, and the second phase is building policies for distinct applications. We recommend verifying that all connectivity is working as expected before moving on to build complex security policies. This will reduce the amount of troubleshooting and challenges that arise from managing complex systems.\n\nTroubleshoot WARP\n\nFor step-by-step guidance on diagnosing and resolving WARP client issues, refer to the [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/). The guide covers:\n\n* How to collect diagnostic logs via the Cloudflare dashboard or CLI\n* How to review key configuration files\n* Common misconfigurations and their fixes\n* Best practices for filing support tickets\n\n</page>\n\n<page>\n---\ntitle: Connect with cloudflared  Cloudflare Learning Paths\ndescription: Cloudflare Tunnel is an outbound-only daemon service that can run\n  on nearly any host machine and proxies local traffic once validated from the\n  Cloudflare network. User traffic initiated from the WARP endpoint client\n  onramps to Cloudflare, passes down your Cloudflare Tunnel connections, and\n  terminates automatically in your local network. Traffic reaching your internal\n  applications or services will carry the local source IP address of the host\n  machine running the cloudflared daemon.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/cloudflared/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/cloudflared/index.md\n---\n\nCloudflare Tunnel is an outbound-only daemon service that can run on nearly any host machine and proxies local traffic once validated from the Cloudflare network. User traffic initiated from the WARP endpoint client onramps to Cloudflare, passes down your Cloudflare Tunnel connections, and terminates automatically in your local network. Traffic reaching your internal applications or services will carry the local source IP address of the host machine running the `cloudflared` daemon.\n\n## Create a tunnel\n\nTo connect your private network:\n\n* Dashboard\n\n  1. Log in to [Cloudflare One](https://one.dash.cloudflare.com) and go to **Networks** > **Connectors** > **Cloudflare Tunnels**.\n\n  2. Select **Create a tunnel**.\n\n  3. Choose **Cloudflared** for the connector type and select **Next**.\n\n  4. Enter a name for your tunnel. We suggest choosing a name that reflects the type of resources you want to connect through this tunnel (for example, `enterprise-VPC-01`).\n\n  5. Select **Save tunnel**.\n\n  6. Next, you will need to install `cloudflared` and run it. To do so, check that the environment under **Choose an environment** reflects the operating system on your machine, then copy the command in the box below and paste it into a terminal window. Run the command.\n\n  7. Once the command has finished running, your connector will appear in Cloudflare One.\n\n     ![Connector appearing in the UI after cloudflared has run](https://developers.cloudflare.com/_astro/connector.BnVS4T_M_ZUMQ9r.webp)\n\n  8. Select **Next**.\n\n  1) In the **CIDR** tab, enter the CIDR of your private network (for example, `10.0.0.0/8`).\n\n  2) Select **Save tunnel**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Cloudflare Tunnel Write`\n\n  2. Create a tunnel using the [`cloudflare_zero_trust_tunnel_cloudflare`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_tunnel_cloudflared) resource.",
      "language": "unknown"
    },
    {
      "code": "3. Route the CIDR of your private network through the tunnel using the [`cloudflare_zero_trust_tunnel_cloudflared_route`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_tunnel_cloudflared_route) resource:",
      "language": "unknown"
    },
    {
      "code": "4. Get the [token](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/remote-tunnel-permissions/) used to run the tunnel:",
      "language": "unknown"
    },
    {
      "code": "If your host machine is not managed in Terraform or you want to install the tunnel manually, you can output the token value to the CLI.\n\n     Example: Output to CLI\n\n     1. Output the tunnel token to the Terraform state file:",
      "language": "unknown"
    },
    {
      "code": "2. Apply the configuration:",
      "language": "unknown"
    },
    {
      "code": "3. Read the tunnel token:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Alternatively, pass `data.cloudflare_zero_trust_tunnel_cloudflared_token.tunnel_token.token` directly into your host's Terraform configuration or store the token in your secret management tool.\n\n     Example: Store in HashiCorp Vault",
      "language": "unknown"
    },
    {
      "code": "5. Install `cloudflared` on a host machine in your private network and run the tunnel:\n\n     * Linux\n\n       1. [Download and install](https://pkg.cloudflare.com/index.html) `cloudflared`.\n\n       2. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Windows\n\n       1. [Download and install](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/#windows) `cloudflared`.\n\n       2. Open Command Prompt as administrator.\n\n       3. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* macOS\n\n       1. [Download and install](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/#macos) `cloudflared`.\n\n       2. Open a terminal window and run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Docker\n\n       1. Open a terminal window.\n\n       2. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Linux\n\n  1. [Download and install](https://pkg.cloudflare.com/index.html) `cloudflared`.\n\n  2. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Windows\n\n  1. [Download and install](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/#windows) `cloudflared`.\n\n  2. Open Command Prompt as administrator.\n\n  3. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "* macOS\n\n  1. [Download and install](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/#macos) `cloudflared`.\n\n  2. Open a terminal window and run the following command:",
      "language": "unknown"
    },
    {
      "code": "* Docker\n\n  1. Open a terminal window.\n\n  2. Run the following command:",
      "language": "unknown"
    },
    {
      "code": "All internal applications and services in this IP range are now connected to Cloudflare.\n\nNote\n\nIf the tunnel is disconnected:\n\n* Ensure that your on-premise or cloud firewall allows egress traffic on the [required ports](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-with-firewall/#required-for-tunnel-operation).\n* Ensure that the `cloudflared` host machine can connect to your internal applications and services. Verify that the host has the proper security group memberships and that no firewalls will block traffic between the host and the target services.\n\n## Best practices\n\n* Segregate production and staging traffic among different Cloudflare tunnels.\n* Add a [`cloudflared` replica](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/) to another host machine for an additional point of availability.\n* Distribute access to critical services (for example, private DNS, Active Directory, and other critical systems) across different tunnels for blast-radius reduction in the event of a server-side outage.\n* [Enable notifications](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/notifications/) in the Cloudflare dashboard to monitor tunnel health.\n* [Monitor performance metrics](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/metrics/) to identify potential bottlenecks.\n* [Update `cloudflared`](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/update-cloudflared/) regularly.\n\n</page>\n\n<page>\n---\ntitle: Choose a connection method  Cloudflare Learning Paths\ndescription: \"There are multiple ways to onramp traffic from your private\n  networks to Cloudflare. This page will focus on the two software-based methods\n  that are commonly used for a VPN replacement use case: Cloudflare Tunnel via\n  cloudflared and Cloudflare Tunnel via WARP Connector. Both of these methods\n  involve installing lightweight software  either cloudflared or Cloudflare\n  WARP  on a host machine in your network. The software creates a secure\n  tunnel, called a Cloudflare Tunnel, to connect services and applications to\n  Cloudflares global network.\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/connection-methods/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/connection-methods/index.md\n---\n\nThere are [multiple ways](https://developers.cloudflare.com/reference-architecture/architectures/sase/#connecting-networks) to onramp traffic from your private networks to Cloudflare. This page will focus on the two software-based methods that are commonly used for a VPN replacement use case: Cloudflare Tunnel via cloudflared and Cloudflare Tunnel via WARP Connector. Both of these methods involve installing lightweight software  either `cloudflared` or Cloudflare WARP  on a host machine in your network. The software creates a secure tunnel, called a Cloudflare Tunnel, to connect services and applications to Cloudflares global network.\n\n## Cloudflare Tunnel via cloudflared\n\n`cloudflared` is a daemon service that proxies traffic to internal applications or an entire private network. It only makes outbound connections, can be run on almost any infrastructure, and has a number of available options for server-side redundancy and steering.\n\n## Cloudflare Tunnel via WARP Connector\n\nWARP Connector is a more flexible and advanced option to connect your network traffic to Cloudflare. It operates a L3 proxy service on any Linux AMD64 machine that builds a Wireguard-encrypted tunnel to proxy traffic to Cloudflare. It is bidirectional and can be used to send traffic from user devices to your private network, to send traffic from your private networks to your user devices, or to proxy traffic between two or more private networks.\n\n## Comparison table\n\n| | cloudflared | WARP Connector |\n| - | - | - |\n| High availability and failover |  | Coming soon |\n| Bidirectional traffic |  |  |\n| Source IP of request | `cloudflared` host machine | Virtual IP of requesting device |\n| Host machine | Linux, macOS, Windows | AMD Linux |\n| IPv4 |  |  |\n| IPv6 |  |  |\n| OSI layer | L4 | L3 |\n| Protocol | QUIC or HTTP/2 | WireGuard |\n\n## Best practices\n\nFor VPN replacement and ZTNA use cases, [Cloudflared Tunnel via cloudflared](https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/cloudflared/) is our primary and recommended network on-ramp.\n\nThere are times when WARP Connector may be used as a secondary on-ramp. Consider [deploying WARP Connector](https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/warp-connector/) supplementally to deliver any sort of SIP or bidirectional connectivity relevant to your end users. This could include AD Group Policy updates, SCCM, SIP traffic, VoIP traffic, and any other bidirectional workflows such as DevOps pipeline updates.\n\n</page>\n\n<page>\n---\ntitle: Tunnel capacity for cloudflared  Cloudflare Learning Paths\ndescription: Now that you have a Cloudflare Tunnel up and running, evaluate\n  whether cloudflared has enough system resources to handle the expected volume\n  of requests from end users.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/tunnel-capacity/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/tunnel-capacity/index.md\n---\n\nNow that you have a Cloudflare Tunnel up and running, evaluate whether `cloudflared` has enough system resources to handle the expected volume of requests from end users.\n\nUnlike legacy VPNs where throughput is determined by the server's memory, CPU and other hardware specifications, Cloudflare Tunnel throughput is primarily limited by the number of ports configured in system software. Therefore, when sizing your `cloudflared` server, the most important element is sizing the available ports on the machine to reflect the expected throughput of TCP and UDP traffic.\n\nIf you have exhausted the ports on a single machine, you will need to add additional servers running `cloudflared`.\n\n## Size the tunnel\n\nTo determine how many `cloudflared` host servers you need:\n\n1. Start with our baseline recommendations:\n\n   * Run a [`cloudflared` replica](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/#cloudflared-replicas) on two dedicated host machines per network location. Using two hosts enables server-side redundancy and traffic balancing.\n   * Size each host with minimum 4GB of RAM and 4 CPU cores.\n   * Allocate 50,000 [ports](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/system-requirements/#number-of-ports) to the `cloudflared` process on each host.\n\n   This setup is usually sufficient to handle traffic from 8,000 users (4,000 per host).\n\n2. After you have completed this learning path and have users actively engaging with the network, [calculate](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/system-requirements/#calculate-your-tunnel-capacity) your actual tunnel usage.\n\n3. Decide how much headroom you want to include and [resize the tunnel](#scale-the-tunnel) if needed.\n\n## Scale the tunnel\n\nThere are two ways to scale Cloudflare Tunnel: you could either add additional replicas of the existing tunnel (Figure 1), or you could divide your network's IP space across multiple tunnels (Figure 2).",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### When to add replicas\n\nAdding additional [replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/#cloudflared-replicas) of an existing Cloudflare Tunnel (two is the baseline recommendation) should only be done to support additional traffic to the IP routes in the tunnel. Replicas should always be added in the same physical location as one another so that they can operate in a pooled mode. If you are considering adding a replica in a different geographic location, reevaluate the network proxy design for your Cloudflare Tunnel and refer to [When to add tunnels](#when-to-add-tunnels).\n\n### When to add tunnels\n\n#### Servers in different locations\n\nConsider creating brand new tunnels when your network is dispersed across different geographic locations. For example, assume that the network represented by `10.0.0.0/8` is almost entirely contiguous in Eastern United States, with one non-overlapping exception for `10.0.50.0/24` served out of the Pacific Northwest. Rather than serve an additional replica from the Pacific Northwest, we recommend breaking out `10.0.50.0/24` into a separate Cloudflare Tunnel. Serve this new tunnel from a host machine near the Pacific Northwest with its own balanced replica implementation.\n\nNote\n\nIf you add the `10.0.50.0/24` range to a new tunnel without removing it from your existing `10.0.0.0/8` tunnel, Cloudflare will automatically default to the most specific path for user traffic. In other words, all traffic to `10.0.50/0/24` will flow through the newly created tunnel even though both tunnels technically include that route.\n\n#### Servers in same location\n\nEven if all routes in your network are served from the same physical location, it may eventually make sense from a control-plane redundancy perspective to split up the network into separate tunnels rather than add replicas.\n\nFor instance, if you proxy the ranges `10.0.0.0/8`, `172.0.0.0/8`, and `192.0.0.0/8` from a single tunnel with multiple replicas, you may reach a point of port exhaustion with respect to the traffic flowing through the multitude of networks. It may make sense to break out `10.0.0.0/8`, `172.0.0.0/8`, and `192.0.0.0/8` into their own independent tunnels, each with their own replica. Alternatively, you could find specific applications or functions (like DNS servers or other functions that generate a high volume of independent traffic) and break them out into standalone tunnels with properly rated throughput and replica volume.\n\n</page>\n\n<page>\n---\ntitle: Manage overlapping IPs  Cloudflare Learning Paths\ndescription: Virtual networks allow you to connect private networks that have\n  overlapping IP ranges without creating conflicts for users or services. For\n  example, an organization may want to expose two distinct virtual private cloud\n  (VPC) networks which they consider to be \"production\" and \"staging\". However,\n  if the two private networks happened to receive the same RFC 1918 IP\n  assignment, there may be two different resources with the same IP address. By\n  creating two separate virtual networks, you can deterministically route\n  traffic to duplicative private addresses like 10.128.0.1/32 staging and\n  10.128.0.1/32 production. These virtual networks will appear as\n  user-selectable options within the WARP client GUI.\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/overlapping-ips/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/overlapping-ips/index.md\n---\n\nVirtual networks allow you to connect private networks that have overlapping IP ranges without creating conflicts for users or services. For example, an organization may want to expose two distinct virtual private cloud (VPC) networks which they consider to be \"production\" and \"staging\". However, if the two private networks happened to receive the same RFC 1918 IP assignment, there may be two different resources with the same IP address. By creating two separate virtual networks, you can deterministically route traffic to duplicative private addresses like `10.128.0.1/32` staging and `10.128.0.1/32` production. These virtual networks will appear as user-selectable options within the WARP client GUI.\n\n## Example\n\nThis example illustrates best practices for managing overlapping subnets. For this example, assume that you are connecting two different private networks: a production VPC that uses the `10.0.0.0/8` space holistically and a staging VPC that uses the `10.0.1.0/24` space. These networks are served by Tunnel-A and Tunnel-B respectively.\n\nThe following table shows the default configuration without a virtual network assigned:\n\n| Routes in Tunnel-A | Virtual network |\n| - | - |\n| `10.0.0.0/8` | default |\n\n| Routes in Tunnel-B | Virtual network |\n| - | - |\n| `10.0.1.0/24` | default |\n\nIn the above configuration, all user traffic to `10.0.1.0/24` takes the most specific path and routes to the staging VPC (Tunnel-B). All other `10.0.0.0/8` traffic routes to the production VPC (Tunnel-A). Users would not be able to reach the `10.0.1.0/24` subnet for the network served by Tunnel-A.\n\nTo solve this problem, add a `10.0.1.0/24` route to Tunnel-A and assign it the `production` virtual network. Next, assign the `staging` virtual network to `10.0.1.0/24` in Tunnel-B.\n\n| Routes in Tunnel-A | Virtual network |\n| - | - |\n| `10.0.0.0/8` | default |\n| `10.0.1.0/24` | production |\n\n| Routes in Tunnel-B | Virtual network |\n| - | - |\n| `10.0.1.0/24` | staging |\n\nThe user can now [toggle between the two virtual networks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/tunnel-virtual-networks/#connect-to-a-virtual-network) in their WARP client, similar to the concept of switching VPN profiles in a VPN client. When a user selects `production`, they can connect to the entire `10.0.0.0/8` range served by Tunnel-A. When they select `staging`, they can connect to all of `10.0.0.0/8` in Tunnel-A except for `10.0.1.0/24`, which will be served by Tunnel-B.\n\n## Set up virtual networks\n\nFor setup instructions, refer to [Create a virtual network](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/tunnel-virtual-networks/#create-a-virtual-network).\n\n</page>\n\n<page>\n---\ntitle: Connect with WARP Connector (optional)  Cloudflare Learning Paths\ndescription: \"WARP Connector uses the same underlying technology as our WARP\n  endpoint client. The software is installed on a Linux server or virtual\n  machine in your private network and requires you to make routing updates to\n  machines or networks behind WARP Connector. WARP Connector supports\n  bidirectional proxy of traffic: it can proxy traffic initiated from a user\n  running WARP into a private network (same as cloudflared), but it can also\n  enable traffic from a network to be on-ramped to Cloudflare for either public\n  or private destinations. You can also use WARP Connector to create mesh\n  network connectivity so that any device either running the WARP client, or\n  behind a WARP Connector, can communicate using the CGNat virtual IP addresses\n  assigned to each device.\"\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/warp-connector/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/warp-connector/index.md\n---\n\nWARP Connector uses the same underlying technology as our WARP endpoint client. The software is installed on a Linux server or virtual machine in your private network and requires you to make routing updates to machines or networks behind WARP Connector. WARP Connector supports bidirectional proxy of traffic: it can proxy traffic initiated from a user running WARP into a private network (same as `cloudflared`), but it can also enable traffic from a network to be on-ramped to Cloudflare for either public or private destinations. You can also use WARP Connector to create mesh network connectivity so that any device either running the WARP client, or behind a WARP Connector, can communicate using the CGNat virtual IP addresses assigned to each device.\n\nFor most customers, [`cloudflared`](https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/cloudflared/) should be the primary connectivity method for end-users to connect to services in your private network. WARP Connector is the preferred method for mesh or other software-defined networking  most of which require bidirectional connectivity  or when organizations do not want to make changes to their underlying network routing infrastructure.\n\n## Set up WARP Connector\n\nTo connect your private network using WARP Connector, refer to [Set up WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/).\n\n</page>\n\n<page>\n---\ntitle: Configure an identity provider  Cloudflare Learning Paths\ndescription: An identity provider (IdP) stores and manages users' digital\n  identities. You can integrate your existing identity provider with Cloudflare\n  Zero Trust in order to manage user access to your private network. This\n  requires configuration both in Cloudflare and with the identity provider\n  itself.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/configure-idp/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/configure-idp/index.md\n---\n\nAn [identity provider (IdP)](https://www.cloudflare.com/learning/access-management/what-is-an-identity-provider/) stores and manages users' digital identities. You can integrate your existing identity provider with Cloudflare Zero Trust in order to manage user access to your private network. This requires configuration both in Cloudflare and with the identity provider itself.\n\nNote\n\nSome admins choose to test by authenticating with a [one-time PIN (OTP)](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/) instead of an IdP. OTP can also be used as an alternative login method for contractors or other guests that are not part of your IdP.\n\nTo add an identity provider:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Integrations** > **Identity providers**.\n\n  2. In the **Your identity providers** card, select **Add new identity provider**.\n\n  3. Select the identity provider you want to add.\n\n     If you do not see your identity provider listed, these providers can typically still be enabled. If they support OIDC or OAuth, select the [generic OIDC](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/) option. If they support SAML, select the [generic SAML](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/) option. Cloudflare supports all SAML and OIDC providers and can integrate with the majority of OAuth providers. If your provider supports both SAML and OIDC, we recommend OIDC for ease of configuration.\n\n  4. Fill in the necessary fields to set up your identity provider.\n\n     Each identity provider will have different required fields for you to fill in. Step-by-step instructions are shown in the dashboard side panel. Alternatively, refer to the [IdP-specific documentation](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/).\n\n  5. Once you have filled in the necessary fields, select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Organizations, Identity Providers, and Groups Write`\n\n  2. Add an identity provider to Cloudflare One using the [`cloudflare_zero_trust_access_identity_provider`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_identity_provider) resource. For example, to add a Microsoft Entra ID integration:",
      "language": "unknown"
    },
    {
      "code": "Each identity provider integration has different required attributes. You will need to obtain these attribute values from your identity provider. For more information, refer to the [IdP-specific documentation](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/).\n\n     If you do not see your identity provider listed, these providers can typically still be enabled. If they support OIDC or OAuth, use the [generic OIDC](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/) option. If they support SAML, use the [generic SAML](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/) option. Cloudflare supports all SAML and OIDC providers and can integrate with the majority of OAuth providers. If your provider supports both SAML and OIDC, we recommend OIDC for ease of configuration.\n\nUsers will now be able to select this IdP when they are prompted to authenticate.\n\n</page>\n\n<page>\n---\ntitle: Create a Zero Trust organization  Cloudflare Learning Paths\ndescription: To start using Zero Trust features, create a Zero Trust\n  organization in your Cloudflare account.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/create-zero-trust-org/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/create-zero-trust-org/index.md\n---\n\nTo start using Zero Trust features, create a Zero Trust organization in your Cloudflare account.\n\n## Sign up for Zero Trust\n\nTo create a Zero Trust organization:\n\n1. In the [Cloudflare dashboard](https://dash.cloudflare.com/), select **Zero Trust**.\n\n   [Go to **Zero Trust**](https://one.dash.cloudflare.com/)\n\n2. On the onboarding screen, choose a team name. The team name is a unique, internal identifier for your Zero Trust organization. Users will enter this team name when they enroll their device manually, and it will be the subdomain for your App Launcher (as relevant). Your business name is the typical entry.\n\n   You can find your team name in [Cloudflare One](https://one.dash.cloudflare.com) by going to **Settings**.\n\n3. Complete your onboarding by selecting a subscription plan and entering your payment details. If you chose the **Zero Trust Free plan**, this step is still needed but you will not be charged.\n\n## (Optional) Manage Zero Trust in Terraform\n\nYou can use the [Cloudflare Terraform provider](https://registry.terraform.io/providers/cloudflare/cloudflare/latest) to manage your Zero Trust organization alongside your other IT infrastructure. To get started with Terraform, refer to our [Terraform tutorial series](https://developers.cloudflare.com/terraform/tutorial/).\n\nTo add Zero Trust to your Terraform configuration:\n\n1. [Sign up for Zero Trust](#sign-up-for-zero-trust) on the Cloudflare dashboard.\n\n2. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n   * `Access: Organizations, Identity Providers, and Groups Write`\n\n3. Add the [`cloudflare_zero_trust_organization`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_organization) resource:",
      "language": "unknown"
    },
    {
      "code": "Replace `<your-team-name` with the Zero Trust organization name selected during [onboarding](#sign-up-for-zero-trust). You can also view your team name on [Cloudflare One](https://one.dash.cloudflare.com) under **Settings** > **Team name and domain**.\n\nYou can now update Zero Trust organization settings using Terraform.\n\nTip\n\nIf you plan to manage all Zero Trust settings in Terraform, set the dashboard to [API/Terraform read-only mode](https://developers.cloudflare.com/cloudflare-one/api-terraform/#set-dashboard-to-read-only).\n\n</page>\n\n<page>\n---\ntitle: Create a Cloudflare account  Cloudflare Learning Paths\ndescription: \"To create a new Cloudflare account:\"\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/create-cloudflare-account/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/create-cloudflare-account/index.md\n---\n\nTo create a new Cloudflare account:\n\n1. [Sign up](https://dash.cloudflare.com/sign-up) on the Cloudflare dashboard.\n\n2. To secure your account, enable [two-factor authentication](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/).\n\n3. If you have a Cloudflare contact (Enterprise only), ask them to set up your account as a multi-user organization. Account members will need:\n\n   * [**Access** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit applications and Access policies.\n   * [**Gateway** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit Gateway policies.\n   * [**PII** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/#cloudflare-zero-trust-pii) to view user information in Gateway activity logs.\n\n## Best practices\n\nIf you are creating an account for your team or a business, we recommend choosing an email alias or distribution list for your **Email**, such as `cloudflare@example.com`.\n\nThis email address is the main point of contact for your Cloudflare billing, usage notifications, and account recovery.\n\n</page>\n\n<page>\n---\ntitle: Prerequisites  Cloudflare Learning Paths\ndescription: \"To make the most of this learning path, make sure that you have\n  the following:\"\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/prerequisites/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/get-started/prerequisites/index.md\n---\n\nTo make the most of this learning path, make sure that you have the following:\n\n* A device that can run [WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/), Cloudflare's endpoint agent.\n* A private network with applications or services that are available locally or via a VPN.\n* A [host server](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/system-requirements/#recommendations) on the private network that can run the lightweight Cloudflare Tunnel daemon process.\n* (Optional) A [Linux host server](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/#linux) on the private network that can run the Cloudflare WARP Connector. This is only needed for server-initiated traffic flows such as Microsoft SCCM, Active Directory (AD) updates, and DevOps workflows that require server-initiated connections.\n\n</page>\n\n<page>\n---\ntitle: Troubleshoot private networks  Cloudflare Learning Paths\ndescription: Follow this troubleshooting procedure when end users running\n  Cloudflare WARP have issues connecting to a private network behind Cloudflare\n  Tunnel.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/replace-vpn/troubleshooting/troubleshoot-private-networks/\n  md: https://developers.cloudflare.com/learning-paths/replace-vpn/troubleshooting/troubleshoot-private-networks/index.md\n---\n\nFollow this troubleshooting procedure when end users running Cloudflare WARP have issues connecting to a private network behind Cloudflare Tunnel.\n\n## 1. Is the WARP client connected to a Cloudflare data center?\n\nThe WARP client GUI should display `Connected` and `Your Internet is protected`.\n\n![WARP client GUI when connected to Cloudflare](https://developers.cloudflare.com/_astro/warp-connected.OHWKwu9t_Z1aOY3o.webp)\n\nIf WARP is stuck in the `Disconnected` state or frequently changes between `Connected` and `Disconnected`, refer to [Unable to connect WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/common-issues/#unable-to-connect-warp).\n\n## 2. Is the WARP client connecting to your private DNS server?\n\nThis step is only needed if users access your application via a private hostname (for example, `wiki.internal.local`).\n\n* If you are using [custom resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) to handle private DNS, go to your Gateway DNS logs (**Insights** > **Logs** > **DNS query logs**) and search for DNS queries to the hostname.\n\n* If you are using [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) to handle private DNS, go to your Gateway Network logs (**Insights** > **Logs** > **Network logs**) and search for port `53` traffic to your DNS server IP.\n\nIf there are no relevant Gateway logs, it means that WARP was unable to forward the query to your private DNS server. Check your resolver policies or Local Domain Fallback configuration and refer to [How WARP handles DNS requests](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/#how-the-warp-client-handles-dns-requests).\n\n## 3. Is network traffic to the application going through WARP?\n\nNext, check if your Gateway Network logs (**Insights** > **Logs** > **Network logs**) show any traffic to the destination IP.\n\nIf WARP is connected but there are no network logs, it means that your private network IPs are not routing through WARP. You can confirm this by [searching the routing table](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/warp-architecture/#routing-table) on the device for the IP address of your application. Traffic to your application should route through the Cloudflare WARP interface. If another interface is used, [check your Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#3-route-private-network-ips-through-warp).\n\n## 4. Is the user blocked by a Gateway policy?\n\nTo check if a Gateway block event occurred:\n\n1. Go to **Insights** > **Logs** and select the **DNS query logs**, **Network logs**, or **HTTP request logs**.\n\n2. Apply the following filters:\n\n   * **Email**: User's email address\n   * **Event**: *Blocked*\n   * **Date Time Range**: Time period when the user accessed the application\n\n## 5. Is the user matching the correct Gateway policy?\n\nDetermine whether the user is matching any policy, or if they are matching a policy that has a higher priority than the expected policy.\n\n1. To determine the actual policy that was applied:\n\n   1. Go to **Insights** > **Logs** and select the **DNS query logs**, **Network logs**, or **HTTP request logs**.\n\n   2. Apply the following filters:\n\n      * **Email**: User's email address\n      * **Date Time Range**: Time period when the user accessed the application\n\n   3. In the search box, filter by the destination IP or FQDN.\n\n   4. In the results, select a log and note its **Policy Name** value.\n\n2. Go to **Traffic policies** > **Firewall policies** and compare the [order of enforcement](https://developers.cloudflare.com/cloudflare-one/traffic-policies/order-of-enforcement/) of the matched policy versus the expected policy.\n\n3. Compare the Gateway log values with the expected policy criteria.\n\n   * If the mismatched value is related to identity, [check the user registry](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/users/) and verify the values that are passed to Gateway from your IdP. Cloudflare updates the registry when the user enrolls in the WARP client. If the user's identity is outdated, ask the user to re-authenticate WARP (**Preferences** > **Account** > **Re-Authenticate Session**).\n\n   * If the mismatched value is related to device posture, [view posture check results](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/#2-verify-device-posture-checks) for the user's device. Verify that the device passes the posture checks configured in the policy.\n\n## 6. Are the correct Gateway proxy settings enabled?\n\nUnder **Traffic policies** > **Traffic settings**, ensure that **Allow Secure Web Gateway to proxy traffic** is enabled for TCP, UDP, and ICMP traffic. UDP is required for proxying DNS traffic and other UDP packets, while ICMP is required for `ping` and other administrative functions.\n\n## 7. Is the user's traffic reaching the tunnel?\n\n[Review your tunnel log stream](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/monitor-tunnels/logs/#view-logs-on-your-local-machine). If you do not see any requests to your application, ensure that you have added the appropriate static routes to your Cloudflare Tunnel.\n\n## 8. Is the tunnel forwarding requests to your application?\n\nVerify that you can connect to the application directly from the `cloudflared` host machine:\n\n* macOS and Linux\n\n  Open Terminal and run the following command:",
      "language": "unknown"
    },
    {
      "code": "If `telnet` fails to open the connection, check your infrastructure for firewalls, load balancers, or other network devices that may be interfering with the connection between `cloudflared` and the application server.\n\n* Windows\n\n  Open PowerShell and run the following command:",
      "language": "unknown"
    },
    {
      "code": "If the output shows `TcpTestSucceeded : False`, check your infrastructure for firewalls, load balancers, or other network devices that may be interfering with the connection between `cloudflared` and the application server.\n\nYou can also use a packet capture tool such as `tcpdump` or Wireshark to trace whether traffic from the user device successfully reaches `cloudflared` and routes to your application. Traffic to your application will carry the source IP of the `cloudflared` host.\n\n## 9. How is your application handling requests?\n\n1. Check if the application server has a local firewall in place that is blocking requests from the `cloudflared` host machine.\n\n2. Check if the application server needs to initiate any connection towards the user's device. If so, this is a limitation of `cloudflared` and you should instead [deploy WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) to enable bidirectional traffic.\n\n## 10. Is TLS inspection affecting the connection to your application?\n\nIf there is a problem with [TLS inspection](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/), the user will get an `Insecure Upstream` error when they access the application in a browser. They will probably not get an error if they access the application outside of a browser.\n\nCustomers who have [Logpush](https://developers.cloudflare.com/cloudflare-one/insights/logs/logpush/) enabled can check the [Gateway HTTP dataset](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/account/gateway_http/) for any hostnames which have an elevated rate of `526` HTTP status codes.\n\nTo troubleshoot TLS inspection:\n\n1. Create a temporary Gateway HTTP policy that disables TLS inspection for all traffic to the application. For example:\n\n   | Selector | Operator | Value | Action |\n   | - | - | - | - |\n   | Destination IP | in | `10.2.3.4/32` | Do Not Inspect |\n\n2. If the `Do Not Inspect` policy enables the user to connect, verify that the TLS certificate used by your application is trusted by a public CA and not self-signed. Cloudflare Gateway is unable to negotiate TLS with applications that use self-signed certificates. For more information, refer to [TLS inspection limitations](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#inspection-limitations).\n\n   To work around the issue:\n\n   * **Option 1:** Create a permanent [`Do Not Inspect` HTTP policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#do-not-inspect) for this application.\n   * **Option 2:** Customers who use their [own certificate infrastructure](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/custom-certificate/) for inspection can opt to create an [Allow *Pass Through* policy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#untrusted-certificates) which enables our proxy to accept the TLS negotiation from your application. This will allow requests to flow correctly without the need for a `Do Not Inspect` policy.\n   * **Option 3:** If your application uses `HTTPS` or other common protocols, you can add a [published application](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/routing-to-tunnel/) to your Cloudflare Tunnel and set [noTLSVerify](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/origin-parameters/#notlsverify) to `true`. This will allow `cloudflared` to trust your self-signed certificate.\n\n</page>\n\n<page>\n---\ntitle: Connect and secure from any network to anywhere  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/\n  md: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/index.md\n---\n\n* Watch this episode\n\n  Build your new corporate network with Cloudflare, connecting any network into our modern SASE platform and secure applications, users, devices and your company data. In this video you will learn all the different methods of connecting networks to Cloudflare and what services can be used to improve security and performance.\n\n  **Related content**\n\n  If you want to dive into detail about using Cloudflare to modernize your corporate network, refer to the following pages:\n\n  * [Evolving to a SASE architecture with Cloudflare](https://developers.cloudflare.com/reference-architecture/architectures/sase/)\n  * [Magic Transit Reference Architecture](https://developers.cloudflare.com/reference-architecture/architectures/magic-transit/)\n  * [Protect data center networks](https://developers.cloudflare.com/reference-architecture/diagrams/network/protect-data-center-networks/)\n  * [Protect hybrid cloud networks](https://developers.cloudflare.com/reference-architecture/diagrams/network/protect-hybrid-cloud-networks-with-cloudflare-magic-transit/)\n\n* Series overview\n\n  [Watch Episode 1: The evolution of corporate networks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/)In this video, we provide a Cloudflare SASE platform overview and how it has been designed to revolutionize the corporate network.\n\n  [Watch Episode 2: Stop hosting your own VPN service ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/)In this video, we discuss the Cloudflare SASE platform and how it can replace your traditional VPN appliances.\n\n  [Watch Episode 3: Secure remote access to your critical infrastructure ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/)In this video, learn how Cloudflare's SASE platform leverages a modern ZTNA service to implement zero trust principles for accessing your critical infrastructure.\n\n  [Watch Episode 4: Connect and secure from any network to anywhere ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/)In this video, we discuss how to connect any network to Cloudflare to any other network and the Internet. Learn how this improves security and performance for your networks and applications.\n\n  [Watch Episode 5: Protect your users from Internet risks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/)In this video, we will explore how Cloudflare's Secure Web Gateway (SWG) helps keep users and devices safe by filtering and inspecting Internet traffic in real time.\n\n</page>\n\n<page>\n---\ntitle: The evolution of corporate networks  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/\n  md: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/index.md\n---\n\n* Watch this episode\n\n  In this video, we discuss Cloudflare One, our Secure Access Service Edge (SASE) platform and how it has been designed to revolutionize the corporate network and enable companies with their Zero Trust strategy. Legacy network design is struggling to address today's challenges of security, performance and monitoring needs. Many IT teams are trying to evolve their corporate network with point solutions and finding the lack of integration and performance an issue.\n\n  **Related content**\n\n  If you want to dive into detail about modernizing your corporate network with Cloudflare, refer to the following pages:\n\n  * [Evolving to a SASE architecture with Cloudflare](https://developers.cloudflare.com/reference-architecture/architectures/sase/)\n  * [Network-focused migration from VPN concentrators to Zero Trust Network Access](https://developers.cloudflare.com/reference-architecture/design-guides/network-vpn-migration/)\n  * [Using a Zero Trust framework to secure SaaS applications](https://developers.cloudflare.com/reference-architecture/design-guides/zero-trust-for-saas/)\n  * [Building Zero Trust architecture into your startup](https://developers.cloudflare.com/reference-architecture/design-guides/zero-trust-for-startups/)\n\n* Series overview\n\n  [Watch Episode 1: The evolution of corporate networks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/)In this video, we provide a Cloudflare SASE platform overview and how it has been designed to revolutionize the corporate network.\n\n  [Watch Episode 2: Stop hosting your own VPN service ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/)In this video, we discuss the Cloudflare SASE platform and how it can replace your traditional VPN appliances.\n\n  [Watch Episode 3: Secure remote access to your critical infrastructure ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/)In this video, learn how Cloudflare's SASE platform leverages a modern ZTNA service to implement zero trust principles for accessing your critical infrastructure.\n\n  [Watch Episode 4: Connect and secure from any network to anywhere ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/)In this video, we discuss how to connect any network to Cloudflare to any other network and the Internet. Learn how this improves security and performance for your networks and applications.\n\n  [Watch Episode 5: Protect your users from Internet risks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/)In this video, we will explore how Cloudflare's Secure Web Gateway (SWG) helps keep users and devices safe by filtering and inspecting Internet traffic in real time.\n\n</page>\n\n<page>\n---\ntitle: Protect your users from Internet risks  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/\n  md: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/index.md\n---\n\n* Watch this episode\n\n  The Internet has become part of your corporate network, however browsing the web comes with hidden risks including malware, phishing attacks, and malicious websites. In this video, we will explore how Cloudflare's Secure Web Gateway (SWG) helps keep users safe by filtering and inspecting Internet traffic in real time. Whether you are protecting a remote workforce or securing an entire organization, Cloudflare ensures that users can access the web securely  without sacrificing speed or productivity.\n\n  **Related content**\n\n  If you want to dive into detail about modernizing your corporate network with Cloudflare, refer to the following pages:\n\n  * [Evolving to a SASE architecture with Cloudflare](https://developers.cloudflare.com/reference-architecture/architectures/sase/)\n  * [Network-focused migration from VPN concentrators to Zero Trust Network Access](https://developers.cloudflare.com/reference-architecture/design-guides/network-vpn-migration/)\n  * [Using a Zero Trust framework to secure SaaS applications](https://developers.cloudflare.com/reference-architecture/design-guides/zero-trust-for-saas/)\n  * [Building Zero Trust architecture into your startup](https://developers.cloudflare.com/reference-architecture/design-guides/zero-trust-for-startups/)\n\n* Series overview\n\n  [Watch Episode 1: The evolution of corporate networks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/)In this video, we provide a Cloudflare SASE platform overview and how it has been designed to revolutionize the corporate network.\n\n  [Watch Episode 2: Stop hosting your own VPN service ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/)In this video, we discuss the Cloudflare SASE platform and how it can replace your traditional VPN appliances.\n\n  [Watch Episode 3: Secure remote access to your critical infrastructure ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/)In this video, learn how Cloudflare's SASE platform leverages a modern ZTNA service to implement zero trust principles for accessing your critical infrastructure.\n\n  [Watch Episode 4: Connect and secure from any network to anywhere ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/)In this video, we discuss how to connect any network to Cloudflare to any other network and the Internet. Learn how this improves security and performance for your networks and applications.\n\n  [Watch Episode 5: Protect your users from Internet risks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/)In this video, we will explore how Cloudflare's Secure Web Gateway (SWG) helps keep users and devices safe by filtering and inspecting Internet traffic in real time.\n\n</page>\n\n<page>\n---\ntitle: Secure remote access to your critical infrastructure  Cloudflare\n  Learning Paths\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/\n  md: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/index.md\n---\n\n* Watch this episode\n\n  In this video learn how Cloudflare's SASE platform can provide highly secure access to your critical infrastructure by leveraging a modern ZTNA service to implement Zero Trust principles. Applications, databases and their servers are running in a variety of locations from on-premises data centers to cloud hyperscalers, making the need to secure administrative access more important than ever.\n\n  **Related content**\n\n  If you want to dive into detail about using Cloudflare to access critical infrastructure, refer to the following pages:\n\n  * [Evolving to a SASE architecture with Cloudflare](https://developers.cloudflare.com/reference-architecture/architectures/sase/)\n  * [SSH with Access for Infrastructure](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/use-cases/ssh/ssh-infrastructure-access/)\n  * [Using a Zero Trust framework to secure SaaS applications](https://developers.cloudflare.com/reference-architecture/design-guides/zero-trust-for-saas/)\n  * [Building Zero Trust architecture into your startup](https://developers.cloudflare.com/reference-architecture/design-guides/zero-trust-for-startups/)\n\n* Series overview\n\n  [Watch Episode 1: The evolution of corporate networks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/)In this video, we provide a Cloudflare SASE platform overview and how it has been designed to revolutionize the corporate network.\n\n  [Watch Episode 2: Stop hosting your own VPN service ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/)In this video, we discuss the Cloudflare SASE platform and how it can replace your traditional VPN appliances.\n\n  [Watch Episode 3: Secure remote access to your critical infrastructure ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/)In this video, learn how Cloudflare's SASE platform leverages a modern ZTNA service to implement zero trust principles for accessing your critical infrastructure.\n\n  [Watch Episode 4: Connect and secure from any network to anywhere ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/)In this video, we discuss how to connect any network to Cloudflare to any other network and the Internet. Learn how this improves security and performance for your networks and applications.\n\n  [Watch Episode 5: Protect your users from Internet risks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/)In this video, we will explore how Cloudflare's Secure Web Gateway (SWG) helps keep users and devices safe by filtering and inspecting Internet traffic in real time.\n\n</page>\n\n<page>\n---\ntitle: Stop hosting your own VPN service  Cloudflare Learning Paths\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/\n  md: https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/index.md\n---\n\n* Watch this episode\n\n  Cloudflare's SASE platform can replace your traditional, expensive VPN appliances which deliver poor performance for users and create more security risks than solve them. Cloudflare's Zero Trust Network Access (ZTNA) service is a more secure, highly scalable cloud solution. In this video we look at how easily you can deploy Cloudflare to secure access to internal resources.\n\n  **Related content**\n\n  If you want to dive into detail about using Cloudflare to replace your existing VPN solution, refer to the following pages:\n\n  * [Evolving to a SASE architecture with Cloudflare](https://developers.cloudflare.com/reference-architecture/architectures/sase/)\n  * [Network-focused migration from VPN concentrators to Zero Trust Network Access](https://developers.cloudflare.com/reference-architecture/design-guides/network-vpn-migration/)\n  * [Access to private apps without having to deploy client agents](https://developers.cloudflare.com/reference-architecture/diagrams/sase/sase-clientless-access-private-dns/)\n  * [Zero Trust and Virtual Desktop Infrastructure](https://developers.cloudflare.com/reference-architecture/diagrams/sase/zero-trust-and-virtual-desktop-infrastructure/)\n\n* Series overview\n\n  [Watch Episode 1: The evolution of corporate networks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/evolution-corporate-networks-1/)In this video, we provide a Cloudflare SASE platform overview and how it has been designed to revolutionize the corporate network.\n\n  [Watch Episode 2: Stop hosting your own VPN service ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/stop-hosting-own-vpn-service-2/)In this video, we discuss the Cloudflare SASE platform and how it can replace your traditional VPN appliances.\n\n  [Watch Episode 3: Secure remote access to your critical infrastructure ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/secure-remote-access-to-critical-infrastructure-3/)In this video, learn how Cloudflare's SASE platform leverages a modern ZTNA service to implement zero trust principles for accessing your critical infrastructure.\n\n  [Watch Episode 4: Connect and secure from any network to anywhere ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/connect-secure-from-any-network-to-anywhere-4/)In this video, we discuss how to connect any network to Cloudflare to any other network and the Internet. Learn how this improves security and performance for your networks and applications.\n\n  [Watch Episode 5: Protect your users from Internet risks ](https://developers.cloudflare.com/learning-paths/sase-overview-course/series/protect-users-from-internet-risks-5/)In this video, we will explore how Cloudflare's Secure Web Gateway (SWG) helps keep users and devices safe by filtering and inspecting Internet traffic in real time.\n\n</page>\n\n<page>\n---\ntitle: Create an allowlist or blocklist  Cloudflare Learning Paths\ndescription: In the context of DNS filtering, a blocklist is a list of known\n  harmful domains or IP addresses. An allowlist is a list of allowed domains or\n  IP addresses, such as the domains of essential corporate applications.\nlastUpdated: 2025-10-24T15:59:40.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/create-list/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/create-list/index.md\n---\n\nIn the context of DNS filtering, a blocklist is a list of known harmful domains or IP addresses. An allowlist is a list of allowed domains or IP addresses, such as the domains of essential corporate applications.\n\nGateway supports creating [lists](https://developers.cloudflare.com/cloudflare-one/reusable-components/lists/) of URLs, hostnames, or other entries to use in your policies.\n\n## Example list policy\n\n* Dashboard\n\n  The following DNS policy will allow access to all approved corporate domains included in a list called **Corporate Domains**.\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Domain | in list | *Corporate Domains* | Allow |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform\n\n  To create a new DNS policy using **Terraform** to allow access to all approved corporate domains included in a list called **Corporate Domains**.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Create your first DNS policy  Cloudflare Learning Paths\ndescription: DNS policies determine how Gateway should handle a DNS request.\n  When a user sends a DNS request, Gateway matches the request against your\n  filters and either allows the query to resolve, blocks the query, or responds\n  to the query with a different IP.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/create-policy/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/create-policy/index.md\n---\n\nDNS policies determine how Gateway should handle a DNS request. When a user sends a DNS request, Gateway matches the request against your filters and either allows the query to resolve, blocks the query, or responds to the query with a different IP.\n\nYou can filter DNS traffic based on query or response parameters (such as domain, source IP, or geolocation). You can also filter by user identity if you connect your devices to Gateway with the [WARP client or Cloudflare One Agent](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/install-agent/).\n\nTo create a new DNS policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n\n  2. In the **DNS** tab, select **Add a policy**.\n\n  3. Name the policy.\n\n  4. Under **Traffic**, build a logical expression that defines the traffic you want to allow or block.\n\n  5. Choose an **Action** to take when traffic matches the logical expression. For example, we recommend adding a policy to block all [security categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-categories):\n\n     | Selector | Operator | Value | Action |\n     | - | - | - | - |\n     | Security Categories | in | *All security risks* | Block |\n\n  6. Select **Create policy**.\n\n  For more information, refer to [DNS policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/).\n\n* API\n\n  To create a new DNS policy using cURL:",
      "language": "unknown"
    },
    {
      "code": "* Terraform\n\n  To create a new DNS policy using **Terraform**:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Onboard DNS for a network  Cloudflare Learning Paths\ndescription: The fastest way to start filtering DNS queries is to change your\n  DNS resolver to use a specific Gateway endpoint. You can make this change at\n  the browser, OS, or router level.\nlastUpdated: 2025-11-21T18:29:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/onboard-dns/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/onboard-dns/index.md\n---\n\nThe fastest way to start filtering DNS queries is to change your DNS resolver to use a specific Gateway endpoint. You can make this change at the browser, OS, or router level.\n\nChoose this option if:\n\n* You want to try out DNS filtering without installing software.\n* You do not need to filter by user identity.\n* You want to apply blanket DNS policies to all devices in a physical location, such as a retail store or office.\n\n## Change DNS resolver in browser\n\nTo configure your browser to send traffic to Gateway:\n\n1. Obtain your DNS over HTTPS (DoH) address:\n\n   1. Go to **Gateway** > **DNS locations**.\n   2. Select **Add a location**.\n   3. Enter a name for the location.\n   4. Turn on **Set as Default DNS Location**.\n   5. Select **Add location**.\n   6. Copy your **DNS over HTTPS** hostname: `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`\n\n2. Follow the configuration instructions for your browser:\n\n   Mozilla Firefox\n\n   1. In Firefox, go to **Settings**.\n   2. In **Privacy & Security**, go to **DNS over HTTPS**.\n   3. Under **Enable secure DNS using**, select *Max Protection*.\n   4. In **Choose provider**, choose *Custom*.\n   5. In the field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Firefox is now configured to use your DoH endpoint. For more information on configuring DoH settings in Firefox, refer to [Mozilla's documentation](https://support.mozilla.org/kb/dns-over-https).\n\n   Note\n\n   If you want to enforce DNS policies through WARP instead of over DoH, you can disable DoH for your organization by blocking the [Firefox DoH canary domain](https://support.mozilla.org/kb/canary-domain-use-application-dnsnet).\n\n   Google Chrome\n\n   1. In Chrome, go to **Settings** > **Privacy and security** > **Security**.\n   2. Scroll down and turn on **Use secure DNS**.\n   3. Select **With Custom**.\n   4. In the **Enter custom provider** field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Read more about [enabling DNS over HTTPS](https://www.chromium.org/developers/dns-over-https) on Chrome.\n\n   Microsoft Edge\n\n   1. In Microsoft Edge, go to **Settings**.\n   2. Select **Privacy, Search, and Services**, and scroll down to **Security**.\n   3. Turn on **Use secure DNS**.\n   4. Select **Choose a service provider**.\n   5. In the **Enter custom provider** field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Brave\n\n   1. In Brave, go to **Settings** > **Security and Privacy** > **Security**.\n   2. Turn on **Use secure DNS**.\n   3. Select **With Custom**.\n   4. In the **Enter custom provider** field, enter `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\n   Safari\n\n   Currently, Safari does not support DNS over HTTPS.\n\n3. Verify that third-party firewall or TLS decryption software does not inspect or block traffic to the DoH endpoint: `https://<YOUR_DOH_SUBDOMAIN>.cloudflare-gateway.com/dns-query`.\n\nDNS filtering is now turned on for this browser.\n\nTo configure your router or OS, or to add additional DNS endpoints, refer to [DNS locations](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/locations/).\n\n</page>\n\n<page>\n---\ntitle: Recommended DNS policies  Cloudflare Learning Paths\ndescription: We recommend you add the following DNS policies to build an\n  Internet and SaaS app security strategy for your organization.\nlastUpdated: 2025-12-10T23:21:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/recommended-dns-policies/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/recommended-dns-policies/index.md\n---\n\nWe recommend you add the following DNS policies to build an Internet and SaaS app security strategy for your organization.\n\nFor additional commonly used DNS policy examples, refer to [Common DNS policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/common-policies/). For more information on building DNS policies, refer to [DNS policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/).\n\n## All-DNS-Domain-Allowlist\n\nAllowlist any known domains and hostnames. With this policy, you ensure that your users can access your organization's domains even if the domains fall under a blocked category, such as **Newly Seen Domains** or **Login Screens**.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Domain | in list | *Known Domains* | Or | Allow |\n  | Host | in list | *Known Domains* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## Quarantined-Users-DNS-Restricted-Access\n\nRestrict access for users included in an identity provider (IdP) user group for risky users. This policy ensures your security team can restrict traffic for users of whom malicious or suspicious activity was detected.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Domain | not in list | *Allowed Remediation Domains* | Or | Block |\n  | Host | not in list | *Allowed Remediation Domains* | And | |\n  | User Group Names | in | *Quarantined Users* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-SecurityCategories-Blocklist\n\nBlock [security categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-categories), such as **Command and Control & Botnet** and **Malware**, based on Cloudflare's threat intelligence.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Security Categories | in | *All security risks* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-ContentCategories-Blocklist\n\nEntries in the [security risk content subcategory](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-risk-subcategories), such as **New Domains**, do not always pose a security threat. We recommend you first create an Allow policy to track policy matching and identify any false positives. You can add false positives to your **Trusted Domains** list used in **All-DNS-Domain-Allowlist**.\n\nAfter your test is complete, we recommend you change the action to Block to minimize risk to your organization.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Content Categories | in | *Questionable Content*, *Security Risks*, *Miscellaneous* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-Application-Blocklist\n\nBlock unauthorized applications to limit your users' access to certain web-based tools and minimize the risk of [shadow IT](https://www.cloudflare.com/learning/access-management/what-is-shadow-it/). For example, the following policy blocks known AI tools:\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Application | in | *Artificial Intelligence* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-GeoCountryIP-Blocklist\n\nBlock websites hosted in countries categorized as high risk. The designation of such countries may result from your organization's users or through the implementation of regulations including [EAR](https://www.tradecompliance.pitt.edu/embargoed-and-sanctioned-countries), [OFAC](https://orpa.princeton.edu/export-controls/sanctioned-countries), and [ITAR](https://www.tradecompliance.pitt.edu/embargoed-and-sanctioned-countries).\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Resolved Country IP Geolocation | in | *Afghanistan*, *Belarus*, *Congo (Kinshasa)*, *Cuba*, *Iran*, *Iraq*, *Korea (North)*, *Myanmar*, *Russian Federation*, *Sudan*, *Syria*, *Ukraine*, *Zimbabwe* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-DomainTopLevel-Blocklist\n\nBlock frequently misused top-level domains (TLDs) to reduce security risks, especially when there is no discernible advantage to be gained from allowing access. Similarly, restricting access to specific country-level TLDs may be necessary to comply with regulations such as [OFAC](https://orpa.princeton.edu/export-controls/sanctioned-countries) and [ITAR](https://www.tradecompliance.pitt.edu/embargoed-and-sanctioned-countries).\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Domain | matches regex | `[.](cn\\|ru)$ or [.](rest\\|hair\\|top\\|live\\|cfd\\|boats\\|beauty\\|mom\\|skin\\|okinawa)$ or [.](zip\\|mobi)$` | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-DomainPhishing-Blocklist\n\nBlock misused domains to protect your users against sophisticated phishing attacks, such as domains that specifically target your organization. For example, the following policy blocks specific keywords associated with an organization or its authentication services (such as `okta`, `2fa`, `cloudflare` and `sso`) while still allowing access to known domains.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Domain | not in list | *Known Domains* | And | Block |\n  | Domain | matches regex | `.*okta.*\\|.*cloudflare.*\\|.*mfa.*\\|.sso.*` | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-ResolvedIP-Blocklist\n\nBlock specific IP addresses that are malicious or pose a threat to your organization.\n\nYou can implement this policy by either creating custom blocklists or by using blocklists provided by threat intelligence partners or regional Computer Emergency and Response Teams (CERTs). Ideally, your CERTs can update the blocklist with an [API automation](https://developers.cloudflare.com/security-center/intel-apis/) to provide real-time threat protection.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Resolved IP | in list | *IP Blocklist* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-DNS-DomainHost-Blocklist\n\nBlock specific domains or hosts that are malicious or pose a threat to your organization. Like **All-DNS-ResolvedIP-Blocklist**, this blocklist can be updated manually or via API automation.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Domain | in list | *Domain Blocklist* | Or | Block |\n  | Host | in list | *Host Blocklist* | Or | |\n  | Host | matches regex | `.*example\\.com` | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Test a policy  Cloudflare Learning Paths\ndescription: It is common for a misconfigured Gateway policy to accidentally\n  block traffic to benign sites. To ensure a smooth deployment, we recommend\n  testing a simple policy before deploying DNS filtering to your organization.\nlastUpdated: 2025-10-28T21:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/test-policy/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-dns-policies/test-policy/index.md\n---\n\nIt is common for a misconfigured Gateway policy to accidentally block traffic to benign sites. To ensure a smooth deployment, we recommend testing a simple policy before deploying DNS filtering to your organization.\n\n## Test a policy in the browser\n\n1. Go to **Gateway** > **Firewall policies**.\n\n2. Turn off all existing DNS policies.\n\n3. Turn on any existing security policies or create a policy to block all security categories:\n\n   | Selector | Operator | Value | Action |\n   | - | - | - | - |\n   | Security Categories | in | *All security risks* | Block |\n\n4. Ensure that your browser is not configured to use an alternate DNS resolver. For example, Chrome has a **Use secure DNS** setting that will cause the browser to send requests to 1.1.1.1 and bypass your DNS policies.\n\n5. In the browser, go to `malware.testcategory.com`. Your browser will display:\n\n   * The Gateway block page, if your device is connected through the WARP client in Gateway with WARP mode.\n   * A generic error page, if your device is connected through another method, such as Gateway with DoH mode.\n\nNote\n\n[Custom block pages](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/) require you to install a root certificate on the device.\n\n1. In **Logs** > **Gateway** > **DNS**, verify that you see the blocked domain.\n2. Slowly turn on or add other policies to your configuration.\n3. When testing against frequently-visited sites, you may need to [clear the DNS cache](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/test-dns-filtering/#clear-dns-cache) in your browser or OS. Otherwise, the DNS lookup will return the locally-cached IP address and bypass your DNS policies.\n\nYou have now validated DNS filtering on a test device.\n\n</page>\n\n<page>\n---\ntitle: Configure Browser Isolation  Cloudflare Learning Paths\ndescription: Cloudflare Browser Isolation seamlessly executes active webpage\n  content in a secure isolated browser to protect users from zero-day attacks,\n  malware, and phishing.\nlastUpdated: 2025-12-15T23:07:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/browser-isolation/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/browser-isolation/index.md\n---\n\nCloudflare Browser Isolation seamlessly executes active webpage content in a secure isolated browser to protect users from zero-day attacks, malware, and phishing.\n\nBrowser Isolation provides unique and transparent protection for your users using methods that surpass the capabilities of a traditional secure web gateway. This section focuses primarily on Browser Isolation for external services, assuming that most traffic from a device or a network is being forwarded to Cloudflare. For other applications of Browser Isolation, refer to the [Deploy clientless access](https://developers.cloudflare.com/learning-paths/clientless-access/concepts/) guide.\n\nAs a note, Cloudflare's Browser Isolation technology was built to be used for 100% of your user's daily browsing. These recommendations do not suggest that you should limit or be cautious with your use of Browser Isolation, but instead help identify practical outcomes that balance technology with actualized security benefits.\n\n## Get the most out of Browser Isolation\n\nIf your organization is interested in implementing Browser Isolation, there are a few methods that Cloudflare recommends exploring.\n\n### Block copy, paste, and upload/download for shadow IT\n\nAs you have begun deploying Cloudflare Zero Trust, you may have started to visualize user traffic patterns using [Shadow IT Discovery](https://developers.cloudflare.com/cloudflare-one/insights/analytics/shadow-it-discovery/). This feature gives you visibility into detected SaaS applications that your users use. Administrators can categorize applications and services on the basis of proper organizational use. If you do not use Shadow IT Discovery and instead maintain a similar list manually or with other tools, you can port that data into a [Zero Trust list](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/create-list/), update it via the API, and achieve the same outcomes.\n\nYou can control potential risk and shape user behavior without applying heavy-handed block policies by applying policies to isolate user traffic to applications that match your defined categories. You can then set additional parameters in the policy, such as the ability to restrict copy/paste and upload/download. Users can still access information in the tools -- if not use the tools to a lesser extent -- while you minimize the risk of data loss.\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n\n  2. In the **HTTP** tab, select **Add a policy**.\n\n  3. Name the policy.\n\n  4. In **Traffic**, add the following expression:\n\n     | Selector | Operator | Value | Action |\n     | - | - | - | - |\n     | Host | in list | *Shadow IT* | Isolate |\n\n  5. In **Configure policy settings**, turn on the following options:\n\n     * *Disable copy / paste*\n     * *Disable file downloads*\n     * *Disable file uploads*\n\n  6. Select **Create policy**.\n\n* API",
      "language": "unknown"
    },
    {
      "code": "### Isolate all \"gray-listed\" traffic\n\nA common method for using Browser Isolation to protect against unknown or zero-day threats can dramatically enhance your security posture: Separate all HTTP traffic into known acceptable, known malicious, and unknown buckets. Once your sort your traffic, isolate everything in the unknown bucket.\n\nYou can accomplish this by creating the following policies:\n\n* Explicit allow policies for all of your known applications and trusted websites using either Cloudflare application definitions or a list\n* Explicit block policies for all security risks, known malicious traffic, and against-acceptable-use intentional denies\n* A policy to isolate all other traffic in this middle\n\nIn this context, if some traffic is unknown to your organization, Cloudflare will isolate it by default. Cloudflare will also prevent any malicious code from being executed client side, with additional controls available.\n\n* Dashboard\n\n  * Allow known applications and websites:\n\n    | Selector | Operator | Value | Action |\n    | - | - | - | - |\n    | Domain | in list | *Known Domains* | Allow |\n\n  * Block security risks:\n\n    | Selector | Operator | Value | Action |\n    | - | - | - | - |\n    | Security Categories | in | *All Security Risks* | Block |\n\n  * Isolate all other traffic:\n\n    | Selector | Operator | Value | Action |\n    | - | - | - | - |\n    | Host | matches regex | `.*` | Isolate |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Vendor-chain using link-based isolation\n\nMany vendors that may exist within your security framework support URL manipulation. You can use URL manipulation as an on-ramp for Browser Isolation to add additional security controls.\n\nFor example, vendors like Zscaler and Proofpoint allow you to prepend links to URLs in a static or dynamic format. You can prepend the clientless isolation link generated for your Cloudflare account to derive additional security benefits for potentially risky clicks. This means that if you have traffic not sent through Cloudflare today (such as through another proxy), you can potentially prepend specific filtered requests with a link to automatically send the traffic to a Cloudflare isolated browser session without an endpoint agent installed.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Create your first HTTP policy  Cloudflare Learning Paths\ndescription: Now that you have considered which devices and applications TLS\n  inspection should and should not apply to, it is time to create your first\n  HTTP policy.\nlastUpdated: 2024-12-12T16:10:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/create-policy/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/create-policy/index.md\n---\n\nNow that you have considered which devices and applications TLS inspection should and should not apply to, it is time to create your first HTTP policy.\n\n## Create your first policy\n\nUse a standard naming convention when building all policies. Policy names should be unique across the Cloudflare account, follow the same structure, and be as descriptive as possible.\n\nTo create a new HTTP policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n\n  2. In the **HTTP** tab, select **Add a policy**.\n\n  3. Name the policy.\n\n  4. Under **Traffic**, build a logical expression that defines the traffic you want to allow or block.\n\n  5. Choose an **Action** to take when traffic matches the logical expression. For example, if you have configured TLS decryption, some applications that use [embedded certificates](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#inspection-limitations) may not support HTTP inspection, such as some Google products. You can create a policy to bypass inspection for these applications:\n\n     | Selector | Operator | Value | Action |\n     | - | - | - | - |\n     | Application | in | *Do Not Inspect* | Do Not Inspect |\n\n     Cloudflare also recommends adding a policy to block [known threats](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-categories) such as Command & Control, Botnet and Malware based on Cloudflare's threat intelligence:\n\n     | Selector | Operator | Value | Action |\n     | - | - | - | - |\n     | Security Categories | in | *All security risks* | Block |\n\n  6. Select **Create policy**.\n\n* API\n\n  1. [Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with the following permissions:\n\n     | Type | Item | Permission |\n     | - | - | - |\n     | Account | Zero Trust | Edit |\n\n  2. (Optional) Configure your API environment variables to include your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and API token.\n\n  3. Send a `POST` request to the [Create a Zero Trust Gateway rule](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/rules/methods/create/) endpoint. For example, if you have configured TLS decryption, some applications that use [embedded certificates](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#inspection-limitations) may not support HTTP inspection, such as some Google products. You can create a policy to bypass inspection for these applications:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "The API will respond with a summary of the policy and the result of your request.\n\n     Cloudflare also recommends adding a policy to block [known threats](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-categories) such as Command & Control, Botnet and Malware based on Cloudflare's threat intelligence:",
      "language": "unknown"
    },
    {
      "code": "For more information, refer to [HTTP policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/).\n\n## Order your policies\n\nIn most scenarios, Gateway evaluates HTTP policies in [top-down order](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/order-of-enforcement/) (like DNS policies). Because Do Not Inspect action policies are terminal actions, we recommend grouping them in logical order above all of your other policies because they will always functionally fire first regardless of where they are placed.\n\nOnce the Do Not Inspect policies are ordered correctly, Allow policies should follow, and the Allow policy descriptions should include any special considerations for Allow actions (such as header IDs, certificate mismatch handling, and non-isolate traffic).\n\nNext, list your isolate and block policies. There may be scenarios in which you want to intermingle your block policies within your other policy outcomes. That is an acceptable approach, but you will need to ensure that you do not have overly permissive allows or overly restrictive block policies that will cause unintended effects.\n\n## Test your policies\n\nBefore instituting blocks or other actions that would impact your users, first measure impact by setting the policy as an Allow action. Monitor your users' actions and look in your logs, sorting by that explicit policy, to see what traffic actions matched against it. If the activity is exactly what you would expect for the policy, you are probably safe to implement it as its intended action.\n\nIf your policy matches unexpected traffic flows or destinations (such as unintended users or device groups), review your policy to ensure it is not overly permissive or restrictive. If the policy design looks correct, determine whether other policies are matching before the intended policy. You can review the [order of enforcement](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/order-of-enforcement/) for Gateway policies to ensure all of your policies are working together as intended.\n\n</page>\n\n<page>\n---\ntitle: Build Data Loss Prevention (DLP) policies  Cloudflare Learning Paths\ndescription: In order to use Data Loss Prevention (DLP) tools within Cloudflare\n  Zero Trust, you first need to define your DLP profiles. DLP profiles are\n  complex objects with dictionaries, pre-built detections, and custom logic that\n  you can reference as selectors within your Gateway policies.\nlastUpdated: 2025-12-15T23:07:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/data-loss-prevention/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/data-loss-prevention/index.md\n---\n\nIn order to use Data Loss Prevention (DLP) tools within Cloudflare Zero Trust, you first need to define your DLP profiles. [DLP profiles](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/) are complex objects with dictionaries, pre-built detections, and custom logic that you can reference as selectors within your Gateway policies.\n\n## Configure a DLP profile\n\nYou may either use DLP profiles predefined by Cloudflare, or create your own custom profiles based on regular expressions (regex), predefined detection entries, and DLP datasets.\n\n### Configure a predefined profile\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Data loss prevention** > **Profiles**.\n2. Choose a [predefined profile](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/predefined-profiles/) and select **Edit**.\n3. Enable one or more **Detection entries** according to your preferences. The DLP Profile matches using the OR logical operator  if multiple entries are enabled, your data needs to match only one of the entries.\n4. Select **Save profile**.\n\n### Build a custom profile\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Data loss prevention** > **Profiles**.\n\n2. Select **Create profile**.\n\n3. Enter a name and optional description for the profile.\n\n4. Add custom or existing detection entries.\n\n   Add a custom entry\n\n   1. Select **Add custom entry** and give it a name.\n\n   2. In **Value**, enter a regular expression (or regex) that defines the text pattern you want to detect. For example, `test\\d\\d` will detect the word `test` followed by two digits.\n\n      * Regular expressions are written in Rust. We recommend validating your regex with [Rustexp](https://rustexp.lpil.uk/).\n      * DLP detects UTF-8 characters, which can be up to 4 bytes each. Custom text pattern detections are limited to 1024 bytes in length.\n      * DLP does not support regular expressions with `+` or `*` operators because they are prone to exceeding the length limit. For example, the regex pattern `a+` can detect an infinite number of `a` characters. We recommend using `a{min,max}` instead, such as `a{1,1024}`.\n\n   3. To save the detection entry, select **Done**.\n\n   Add existing entries\n\n   Existing entries include [predefined](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/predefined-profiles/) and [user-defined](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/detection-entries/) detection entries.\n\n   1. Select **Add existing entries**.\n   2. Choose which entries you want to add, then select **Confirm**.\n   3. To save the detection entry, select **Done**.\n\n5. (Optional) Configure [**profile settings**](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/advanced-settings/) for the profile.\n\n6. Select **Save profile**.\n\n## Build effective DLP profiles\n\nFor many Cloudflare users, Zero Trust is often one of the only measures for preventing the loss of sensitive data. For other users, Zero Trust may be the one of the early in-line measures of a complex Internet and SaaS app security strategy. No matter which model you most resemble, developing effective and appropriate DLP policies and practices starts with first-principles definitions.\n\n### Define your sensitive data\n\n#### Existing data patterns\n\nIf your organization is most concerned about general data patterns that fit existing classifications such as personal identifiable information (PII), protected health information (PHI), financial information, or source code, we recommend using the [default predefined profiles](#configure-a-predefined-profile).\n\nTo help this better match the needs of your organization, you can also build a complex profile that matches data to both an existing library and a custom string detection or database. For example:\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | DLP Profile | in | *Credentials and Secrets* | Or | Block |\n  | DLP Profile | in | *AWS Key Dataset* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "#### Assorted data patterns\n\nIf your data patterns take many different forms and contexts, consider building a custom profile using one or multiple regexes.\n\nRust regular expressions\n\nCloudflare implements regular expressions with Rust. Make sure you account for this difference when writing expressions or using regular expression builders and generative AI.\n\nTo validate your regex, use [Rustexp](https://rustexp.lpil.uk/).\n\nFor example, you can use a custom expression to detect when your users share product SKUs in the format `CF1234-56789`:\n\n* Dashboard\n\n  1. [Build a custom profile](#build-a-custom-profile) with the following custom entry:\n\n     | Detection entry name | Value |\n     | - | - |\n     | Product SKUs | `CF[0-9]{1,4}-[0-9]{5}` |\n\n  2. Create an HTTP policy with the following expressions:\n\n     | Selector | Operator | Value | Logic | Action |\n     | - | - | - | - | - |\n     | DLP Profile | in | *Product SKUs* | And | Block |\n     | User Email | matches regex | `[a-z0-9]{0,15}@example.com` | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "#### DLP datasets\n\nIf your data is a distinct [dataset](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/detection-entries/#datasets) you have defined, you can build a profile by uploading a database to use in an Exact Data Match or Custom Wordlist function. Exact Data Match and Custom Wordlist feature some key differences:\n\n| | Exact Data Match | Custom Wordlist |\n| - | - | - |\n| **Encryption** | Hashed and compared to encrypted traffic | Stored as plaintext |\n| **Payload logging** | Matches redacted in logs | Matches appear in logs |\n| **Usage** | PII (such as names, addresses, and credit card numbers) | Non-sensitive data (such as intellectual property and SKU numbers) |\n\nWe recommend using Exact Data Match for highly sensitive datasets and Custom Wordlists for lists of keywords.\n\nAs your datasets change and grow, we recommend building a pipeline to update the data source in Cloudflare Zero Trust. For more information, contact your account team.\n\n#### Microsoft Information Protection (MIP) labels\n\nIf your data already contains Microsoft Information Protection (MIP) labeling schema, Cloudflare can detect those values in-transit automatically. To get started, connect your Microsoft 365 account with a [CASB integration](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/microsoft-365/). Cloudflare will automatically pull in your existing MIP definitions into Zero Trust. You can then use the MIP definitions to build DLP profiles for use in Gateway policies.\n\nFor more information, refer to [Integration profiles](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/integration-profiles/).\n\n## Build DLP policies\n\nThe best way to start applying data loss prevention to your traffic, minimize the chance of false positives, and collect actionable data is to start with the known knowns in your sensitive data policies. Rather than building policies to detect sensitive data like SSNs or financial information across all of your traffic, you should start by building policies that target both sensitive data types and destinations that are known data sources or points of high risk. These sources can be inside or outside your organization.\n\n### Example\n\nMany organizations want to detect and log financial information egressing from user devices to critical SaaS applications. To limit the risk of false positives and to filter out logging noise, Cloudflare recommends building your first series of policies to specify both target data and target destination. For example, you can block financial information from being sent to AI chatbots, such as ChatGPT and Gemini:\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | DLP Profile | in | *Financial Information* | And | Block |\n  | Content Categories | in | *Artificial Intelligence* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "Once you have analyzed the flow and magnitude of data from the known sources, you can begin focusing on more specialized or explicit datasets for more generalized sources. You may want to allow sources that are known internal locations where sensitive data is intentionally transferred.\n\nAfter developing a level of confidence from reviewing the logs and evaluating a rate of false positives for both types of policies, you can feel more confident in experimenting more broadly with data loss prevention policies.\n\n</page>\n\n<page>\n---\ntitle: Recommended HTTP policies  Cloudflare Learning Paths\ndescription: We recommend you add the following HTTP policies to build an\n  Internet and SaaS app security strategy for your organization.\nlastUpdated: 2025-12-15T23:07:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/recommended-http-policies/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/recommended-http-policies/index.md\n---\n\nWe recommend you add the following HTTP policies to build an Internet and SaaS app security strategy for your organization.\n\nFor additional commonly used HTTP policy examples, refer to [Common HTTP policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/common-policies/). For more information on building HTTP policies, refer to [HTTP policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/).\n\n## All-HTTP-Application-InspectBypass\n\nBypass HTTP inspection for applications that use embedded certificates. This will help avoid any certificate pinning errors that may arise from an initial rollout.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Application | in | *Do Not Inspect* | Do Not Inspect |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## Android-HTTP-Application-InspectionBypass\n\nBypass HTTPS inspection for Android applications (such as Google Drive) that use certificate pinning, which is incompatible with Gateway inspection.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Application | in | *Google Drive* | And | Do Not Inspect |\n  | Passed Device Posture Checks | in | *OS Version Android (OS version)* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-HTTP-Domain-Inspection-Bypass\n\nBypass HTTP inspection for a custom list of domains identified as incompatible with TLS inspection.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Domain | in list | *DomainInspectionBypass* | Or | Do Not Inspect |\n  | Domain | in list | *Known Domains* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-HTTP-SecurityRisks-Blocklist\n\nBlock [security categories](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-categories), such as **Command and Control & Botnet** and **Malware**, based on Cloudflare's threat intelligence.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Security Categories | in | *All security risks* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-HTTP-ContentCategories-Blocklist\n\nEntries in the [security risk content subcategory](https://developers.cloudflare.com/cloudflare-one/traffic-policies/domain-categories/#security-risk-subcategories), such as **New Domains**, do not always pose a security threat. We recommend you first create an Allow policy to track policy matching and identify any false positives. You can add false positives to your **Trusted Domains** list used in **All-HTTP-Domain-Allowlist**.\n\nAfter your test is complete, we recommend you change the action to Block to minimize risk to your organization.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Content Categories | in | *Questionable Content*, *Security Risks*, *Miscellaneous*, *Adult Themes*, *Gambling* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-HTTP-DomainHost-Blocklist\n\nBlock specific domains or hosts that are malicious or pose a threat to your organization. Like **All-HTTP-ResolvedIP-Blocklist**, this blocklist can be updated manually or via API automation.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Domain | in list | *Domain Blocklist* | Or | Block |\n  | Host | in list | *Host Blocklist* | Or | |\n  | Host | matches regex | `.*example\\.com` | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-HTTP-Application-Blocklist\n\nBlock unauthorized applications to limit your users' access to certain web-based tools and minimize the risk of [shadow IT](https://www.cloudflare.com/learning/access-management/what-is-shadow-it/). For example, the following policy blocks known AI tools:\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Application | in | *Artificial Intelligence* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## PrivilegedUsers-HTTP-Any-Isolate\n\nIsolate traffic for privileged users who regularly access critical systems or execute actions such as threat analysis and malware testing.\n\nSecurity teams often need to perform threat analysis or malware testing that could trigger malware detection. Likewise, privileged users could be the target of attackers trying to gain access to critical systems.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | User Group Names | in | *Privileged Users* | Isolate |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## Quarantined-Users-HTTP-Restricted-Access\n\nRestrict access for users included in an identity provider (IdP) user group for risky users. This policy ensures your security team can restrict traffic for users of whom malicious or suspicious activity was detected.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | not in list | *Quarantined-Users-IPAllowlist* | And | Block |\n  | User Group Names | in | *Quarantined Users* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-HTTP-Domain-Isolate\n\nIsolate high risk domains or create a custom list of known risky domains to avoid data exfiltration or malware infection. Ideally, your incident response teams can update the blocklist with an [API automation](https://developers.cloudflare.com/security-center/intel-apis/) to provide real-time threat protection.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Content Categories | in | *New Domains*, *Newly Seen Domains* | Or | Isolate |\n  | Domain | in list | *Domain Isolation* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Use TLS inspection  Cloudflare Learning Paths\ndescription: TLS inspection (also known as TLS decryption or HTTPS inspection)\n  allows Cloudflare Gateway to perform deeper traffic analysis and take actions\n  like scanning request bodies for sensitive data, upgrading to a remote browser\n  isolation session, and redirecting based on the complete URL and path of\n  requests.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/tls-inspection/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-http-policies/tls-inspection/index.md\n---\n\nTLS inspection (also known as TLS decryption or HTTPS inspection) allows Cloudflare Gateway to perform deeper traffic analysis and take actions like scanning request bodies for sensitive data, upgrading to a remote browser isolation session, and redirecting based on the complete URL and path of requests.\n\nTLS inspection is desirable for security policy involving users accessing sensitive systems, but it can also present challenges. Without TLS inspection turned on, policies can still use user identity, device posture, IP address, resolved domain, SNI, and a number of other attributes that support a Zero Trust security implementation.\n\nOrganizations are often hesitant to adopt TLS inspection practices due to concerns about interoperability with existing systems due to past experiences with legacy systems that conceptually worked in the same way. However, Cloudflare's approach to TLS inspection is capable, performant, modern, and above all, flexible. We understand that it is never possible to inspect absolutely all traffic  something will always break. Our recommendations keep this practical reality in mind.\n\n## Get started\n\nTo decide why and how you should turn on TLS inspection, we recommend you start with the following steps:\n\n### 1. Identify your goals\n\nCloudflare Zero Trust requires TLS inspection for most advanced security and [data loss prevention (DLP)](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/) features.\n\nSome security organizations choose to avoid TLS inspection due to concerns about user privacy and acceptable use. This is an important and sometimes complicated organization decision, but you can simplify it by establishing goals related to your security practices. Questions to consider:\n\n* Is your organizational use of TLS inspection designed to protect from the \"known\" (such as sensitive data in corporate-sanctioned SaaS applications) or the \"unknown\" (such as users downloading or uploading files to brand-new blob storage buckets)?\n* Do you intend to primarily block by domain or hostname or by building policies for complete URLs?\n* Do you plan to scan the body of requests or files against DLP profiles or scan downloaded files with an antivirus or anti-malware engine?\n* Do you intend to use inline [Remote Browser Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/) to take advantage of data security capabilities like copy/paste blocking, keyboard blocking, and print blocking?\n\nIf the answer to a majority of these questions is no and your organization relies mostly on hostname or DNS-based security controls, then you may not need to inspect most, if not all TLS traffic. Because Cloudflare operates both as a secure web gateway and as a secure DNS resolver for your connected users, you can apply policy control that may increase your security posture without the need to broadly inspect TLS traffic.\n\n### 2. Turn on TLS inspection\n\nTo turn on TLS inspection for your Zero Trust organization:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Traffic settings**.\n  2. In **Proxy and inspection**, turn on **Inspect HTTPS requests with TLS decryption**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Configure the `tls_decrypt` argument in [`cloudflare_zero_trust_gateway_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_settings):",
      "language": "unknown"
    },
    {
      "code": "#### Inspect on all ports Beta\n\nBy default, Gateway will only inspect HTTP traffic through port `80`. Additionally, if you [turn on TLS decryption](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/#turn-on-tls-decryption), Gateway will inspect HTTPS traffic through port `443`.\n\nTo detect and inspect HTTP and HTTPS traffic on ports in addition to `80` and `443`, you can turn on [protocol detection](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/protocol-detection/) and configure Gateway to [inspect traffic on all ports](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/protocol-detection/#inspect-on-all-ports).\n\n### 3. Determine the certificate used for inspection\n\nTLS inspection requires a trusted private root certificate to be able to inspect and filter encrypted traffic. A [Cloudflare root certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/automated-deployment/) is a simple and common solution that is usually appropriate for testing or proof-of-concept conditions when deployed to your devices. You can [generate a Cloudflare certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/#generate-a-cloudflare-root-certificate) in Zero Trust.\n\nAlternatively, if you already have a root CA that you use for other inspection or trust applications, we recommend [using your own certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/custom-certificate/). A few reasons for this include:\n\n* Assuming the root certificate is already deployed on the relevant fleet of devices, using a single certificate streamlines your IT management.\n* If external services like Git workflows or CLI tools rely on an existing certificate store, presenting the same certificate in inspection is far less likely to interrupt their traffic flow, although these are things that you may wish to exempt from inspection.\n* If you are using [WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/) or a [Magic WAN](https://developers.cloudflare.com/magic-wan/) IPsec/GRE tunnel to on-ramp traffic to Cloudflare, devices behind those tunnels will not be able to use HTTP policies that require TLS inspection unless they have a certificate that matches your organization's certificate of choice. Your network infrastructure most likely already has your own device certificates deployed, so using your own existing public key infrastructure for inspection will simplify protection.\n\nOnce you generate a Cloudflare certificate or upload a custom certificate, you will need to set it as **Available** to deploy it across the Cloudflare network and as **In-Use** to use it for inspection. For more information, refer to [Activate a root certificate](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/user-side-certificates/#activate-a-root-certificate).\n\n### 4. Build a baseline Do Not Inspect policy\n\nDo you want to inspect all traffic by default, or do you only want to inspect explicit destinations? We recommend that you build a Gateway list of applications and endpoints to exclude from inspection and add the list as an OR operator in addition to our existing Do Not Inspect application group. For example:\n\n| Selector | Operator | Value | Logic | Action |\n| - | - | - | - | - |\n| Application | in | *Do Not Inspect* | Or | Do Not Inspect |\n| Host | in list | *Trusted Hostnames* | | |\n\nIf your organization is newly adopting the security framework that requires TLS inspection, we recommend starting minimally. In fact, it may even be appropriate to choose to only explicitly inspect a predetermined list of hostnames, IPs, or specific user groups or device types and forego inspection for everything else during the initial deployment stage. Cloudflare has a unique and flexible approach to where and when you can deploy inspection, meaning it can be as limited and granular as your organization needs without impacting device routing tables or other memory-sensitive local constructs.\n\n### 5. Build the necessary pass-through rules\n\nYou can build pass-through rules to accommodate any type of device or user group that should not be subject to inspection.\n\nFor example, if users are issued a corporate-managed iPhone with limited permissions, set an additional Do Not Inspect policy for all traffic matching the device posture value. That could include the OS type, OS version, or a list of serial numbers (updated via the API with hooks from your MDM tool) for those iPhones:\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Passed Device Posture | in | *iOS 17 or higher (OS version)* | And | Do Not Inspect |\n  | Passed Device Posture | in | *iPhone Serial Numbers (Serial number)* | | |\n\n* API\n\n  1. Create a list of device serial numbers that you do not want to inspect.",
      "language": "unknown"
    },
    {
      "code": "2. Create a Do Not Inspect policy that checks the device against the list of serial numbers.",
      "language": "unknown"
    },
    {
      "code": "If you filter your network-connected devices with Magic WAN tunnels, the WARP Connector, or other devices that do not have a Cloudflare certificate installed, you will need to accommodate by creating pass-through policies. For these devices, you should explicitly exempt TLS inspection for the source network IP range from which that traffic will be originating. For example:\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Source Internal IP | in | `203.0.113.0/24` | Do Not Inspect |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Egress IP best practices  Cloudflare Learning Paths\ndescription: \"When you turn on dedicated egress IPs for your account, Cloudflare\n  will automatically balance all of your user traffic between your IPs depending\n  on a few factors, including your user's physical location and the location of\n  the resource that they are currently requesting. For example, if you have\n  egress IP locations in Amsterdam, London, and Washington, D.C. and have not\n  configured any policies, Cloudflare will assign the following egress IPs to\n  your users:\"\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-egress-policies/deploy-egress-ips/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-egress-policies/deploy-egress-ips/index.md\n---\n\nWhen you turn on dedicated egress IPs for your account, Cloudflare will automatically balance all of your user traffic between your IPs depending on a few factors, including your user's physical location and the location of the resource that they are currently requesting. For example, if you have egress IP locations in Amsterdam, London, and Washington, D.C. and have not configured any policies, Cloudflare will assign the following egress IPs to your users:\n\n* Amsterdam egress IP to users near the Netherlands\n* London egress IP to users near England\n* Washington, D.C. egress IP to users in North America\n\nBecause of Cloudflare's network design, your users will still take the fastest possible route on the Cloudflare network to reach their destination. The addition of an egress IP will add minimal latency in most scenarios.\n\n## Geographic distribution\n\nCloudflare recommends reserving distributed IPs in areas that most accurately match your users' physical locations. For example, if all of your users are in North America, you should consider a series of IPs in various North American data centers to ensure redundancy and performance for all of your users.\n\nYou should also reserve multiple egress IPs if you have locations that need explicit egress. For example, if you have users who need to egress out of London and cannot fall back to Dublin, you will need to deploy multiple IPs in various London locations to ensure redundancy. Separately, you would need to build a policy relevant to all users with this requirement to ensure all of their traffic egresses with one of your London egress IPs.\n\n## Access allowlisted sources\n\nOne of the most common use cases for egress policies is to ensure a consistent egress IP for users accessing SaaS applications that may not support SAML (or vendor services that can only use IP-level controls). If given the option -- or if your business controls the application -- Cloudflare strongly recommends using [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to move from IP-level authentication to identity-aware authentication that uses continuous evaluation.\n\nWe recommend building baseline egress policies that can cover a majority of your use cases without making policy management overly complex. If all of your users need to access a series of applications that all require a specific egress IP, you should build a policy explicit to those users (or to all of your users) to ensure that all of their traffic egresses using those egress IPs. For example, you can define specific egress IPs for users with access to financial data:\n\n* Dashboard\n\n  | Selector | Operator | Value | Egress method |\n  | - | - | - | - |\n  | User Group Email | in | *Finance Users* | Use dedicated Cloudflare egress IPs |\n\n  | Primary IPv4 address | IPv6 address |\n  | - | - |\n  | `203.0.113.0` | `2001:db8::/32` |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "## User-selectable egress locations\n\nYou may have use cases in which specific groups of your users may need to change the location from which they egress. Cloudflare observes this frequently with quality assurance (QA) teams for applications or sites that need to test resources as if they are accessing from different, predetermined locales. You can manage this when necessary via an egress policy, but most Cloudflare users prefer to manage this without ongoing changes to the administrative panel and existing policies. To accommodate this, you can build virtual networks for use as selectors in egress policies. This will allow your users to change their attached virtual network and subsequently change their egress IP as they choose.\n\n![Users can choose virtual networks to change their egress IP within the WARP client](https://developers.cloudflare.com/_astro/change-user-egress-warp.DDcZMPDC_1FHmUx.webp)\n\nFor more information, refer to our [tutorial for user selectable egress IPs](https://developers.cloudflare.com/cloudflare-one/tutorials/user-selectable-egress-ips/).\n\n</page>\n\n<page>\n---\ntitle: Use egress policies to deliver consistent egress IPs  Cloudflare\n  Learning Paths\ndescription: Egress policies allow you to determine whether your organization's\n  traffic egresses via the default Cloudflare IP or via a dedicated egress IP\n  assigned to your account.\nlastUpdated: 2025-11-20T23:13:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-egress-policies/egress-policies/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-egress-policies/egress-policies/index.md\n---\n\nNote\n\nOnly available on Enterprise plans.\n\nEgress policies allow you to determine whether your organization's traffic egresses via the default Cloudflare IP or via a [dedicated egress IP](https://developers.cloudflare.com/cloudflare-one/traffic-policies/egress-policies/dedicated-egress-ips/) assigned to your account.\n\nTo create a new egress policy:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Gateway** > **Egress policies**.\n\n2. Select **Add a policy**.\n\n3. Name the policy.\n\n4. Build a logical expression that defines the traffic you want to control egress for. For example, you can add a policy to configure all traffic destined for a thrid-party network to use a static source IP:\n\n   | Policy name | Selector | Operator | Value | Egress method |\n   | - | - | - | - | - |\n   | Access third-party provider | Destination IP | is | `198.51.100.158` | Dedicated Cloudflare egress IPs |\n\n   | Primary IPv4 address | IPv6 address |\n   | - | - |\n   | `203.0.113.88` | `2001:db8::/32` |\n\n5. Select **Create policy**.\n\nFor more information, refer to [Egress policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/egress-policies/).\n\n</page>\n\n<page>\n---\ntitle: Source IP anchoring  Cloudflare Learning Paths\ndescription: Source IP anchoring has become increasingly common recently as\n  businesses begin to shift more traffic out of their office perimeter but still\n  rely on their corporate IPs as a primary source of truth for trusted egress.\n  Cloudflare understands the relevance of this model. Because subsequent\n  backhauling and often single-threaded points of failure are inherent to static\n  IP egress, Cloudflare offers several similar concepts that can help\n  organizations transition from static IP egress to source IP anchoring. You can\n  maintain your existing services, such as SaaS apps, while applying more\n  granular and accurate control over access and data security.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-egress-policies/source-ip-anchoring/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-egress-policies/source-ip-anchoring/index.md\n---\n\nSource IP anchoring has become increasingly common recently as businesses begin to shift more traffic out of their office perimeter but still rely on their corporate IPs as a primary source of truth for trusted egress. Cloudflare understands the relevance of this model. Because subsequent backhauling and often single-threaded points of failure are inherent to static IP egress, Cloudflare offers several similar concepts that can help organizations transition from static IP egress to source IP anchoring. You can maintain your existing services, such as SaaS apps, while applying more granular and accurate control over access and data security.\n\nThe next section discusses best practices for migrating from managing backhauled user traffic in the context of IP allowlisting to delivering consistent security practices and IP consistency without sacrificing performance.\n\n</page>\n\n<page>\n---\ntitle: Create your first network policy  Cloudflare Learning Paths\ndescription: You can control network-level traffic by filtering requests by\n  selectors such as IP addresses and ports. You can also integrate network\n  policies with an identity provider to apply identity-based filtering.\nlastUpdated: 2025-10-22T20:17:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-network-policies/create-policy/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-network-policies/create-policy/index.md\n---\n\nYou can control network-level traffic by filtering requests by selectors such as IP addresses and ports. You can also integrate network policies with an [identity provider](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) to apply identity-based filtering.\n\nTo create a new network policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Firewall policies**.\n\n  2. In the **Network** tab, select **Add a network policy**.\n\n  3. Name the policy.\n\n  4. Under **Traffic**, build a logical expression that defines the traffic you want to allow or block.\n\n  5. Choose an **Action** to take when traffic matches the logical expression. For example, you can use a list of [device serial numbers](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/corp-device/) to ensure users can only access an application if they connect with the WARP client from a company device:\n\n     | Selector | Operator | Value | Logic | Action |\n     | - | - | - | - | - |\n     | SNI Domain | is | `internalapp.com` | And | Block |\n     | Passed Device Posture Checks | not in | *Device serial numbers* | | |\n\n  6. Select **Create policy**.\n\n* API\n\n  1. [Create an API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with the following permissions:\n\n     | Type | Item | Permission |\n     | - | - | - |\n     | Account | Zero Trust | Edit |\n\n  2. (Optional) Configure your API environment variables to include your [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) and API token.\n\n  3. Send a `POST` request to the [Create a Zero Trust Gateway rule](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/rules/methods/create/) endpoint. For example, you can use a list of [device serial numbers](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/corp-device/) to ensure users can only access an application if they connect with the WARP client from a company device:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "The API will respond with a summary of the policy and the result of your request.\n\nFor more information, refer to [network policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/).\n\n</page>\n\n<page>\n---\ntitle: Recommended network policies  Cloudflare Learning Paths\ndescription: We recommend you add the following network policies to build an\n  Internet and SaaS app security strategy for your organization.\nlastUpdated: 2025-12-10T23:21:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-network-policies/recommended-network-policies/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/build-network-policies/recommended-network-policies/index.md\n---\n\nWe recommend you add the following network policies to build an Internet and SaaS app security strategy for your organization.\n\nFor additional commonly used network policy examples, refer to [Common network policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/common-policies/). For more information on building network policies, refer to [Network policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/).\n\n## Quarantined-Users-NET-Restricted-Access\n\nRestrict access for users included in an identity provider (IdP) user group for risky users. This policy ensures your security team can restrict traffic for users of whom malicious or suspicious activity was detected.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | not in list | *Quarantined-Users-IPAllowlist* | Or | Block |\n  | SNI | not in list | *Quarantined-Users-HostAllowlist* | Or | |\n  | SNI Domain | not in list | *Quarantined-Users-DomainAllowlist* | And | |\n  | User Group Names | in | *Quarantined Users* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## Posture-Fail-NET-Restricted-Access\n\nRestrict access for devices where baseline posture checks have not passed. If posture checks are integrated with service providers such as Crowdstrike or Intune via the API, this policy dynamically blocks access for devices that do not meet predetermined security requirements.\n\nRestrict access for users included in an identity provider (IdP) user group for risky users. This policy ensures your security team can restrict traffic for users of whom malicious or suspicious activity was detected.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | not in list | *Posture-Fail-IPAllowlist* | Or | Block |\n  | SNI | not in list | *Posture-Fail-HostAllowlist* | Or | |\n  | SNI Domain | not in list | *Posture-Fail-DomainAllowlist* | And | |\n  | Passed Device Posture Checks | not in | *Windows 10 or higher (OS version)* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "You can add a number of WARP client device posture checks as needed, such as [Disk encryption](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/disk-encryption/) and [Domain joined](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/domain-joined/). For more information on device posture checks, refer to [Enforce device posture](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/).\n\n## FinanceUsers-NET-HTTPS-FinanceServers (example)\n\nAllow HTTPS access for user groups. For example, the following policy gives finance users access to any known financial applications:\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | in list | *Finance Servers* | And | Allow |\n  | User Group Names | in | *Finance Users* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-NET-Internet-Blocklist\n\nBlock traffic to destination IPs, SNIs, and SNI domains that are malicious or pose a threat to your organization.\n\nYou can implement this policy by either creating custom blocklists or by using blocklists provided by threat intelligence partners or regional Computer Emergency and Response Teams (CERTs). Ideally, your CERTs can update the blocklist with an [API automation](https://developers.cloudflare.com/security-center/intel-apis/) to provide real-time threat protection.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | in list | *IP Blocklist* | Or | Block |\n  | SNI | in list | *Host Blocklist* | Or | |\n  | SNI Domain | in list | *Domain Blocklist* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "Note\n\nThe **Detected Protocol** selector is only available for Enterprise users. For more information, refer to [Protocol detection](https://developers.cloudflare.com/cloudflare-one/traffic-policies/network-policies/protocol-detection/).\n\n## All-NET-SSH-Internet-Allowlist\n\nAllow SSH traffic to specific endpoints on the Internet for specific users. You can create a similar policy for other non-web endpoints that required access.\n\nOptionally, you can include a selector to filter by source IP or IdP group.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | in list | *SSHAllowList* | Or | Allow |\n  | SNI | in list | *SSHAllowlistFQDN* | And | |\n  | Detected Protocol | is | *SSH* | And | |\n  | User Group Names | in | *SSH-Allowed-Users* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-NET-NO-HTTP-HTTPS-Internet-Deny\n\nBlock all non-web traffic towards the Internet. By using the **Detected Protocol** selector, you will ensure alternative ports for HTTP and HTTPS are allowed.\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | Destination IP | not in list | *InternalNetwork* | And | Block |\n  | Detected Protocol | not in | *HTTP*, *HTTP2* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-NET-InternalNetwork-ImplicitDeny\n\nImplicitly deny all of your internal IP ranges included in a list. We recommend you place this policy at the [bottom of your policy list](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/order-of-enforcement/#order-of-precedence) to ensure you explicitly approve traffic defined in the above policies.\n\n* Dashboard\n\n  | Selector | Operator | Value | Action |\n  | - | - | - | - |\n  | Destination IP | in list | *Internal Network IPs* | Block |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform",
      "language": "unknown"
    },
    {
      "code": "## All-NET-ApplicationAccess-Allow\n\nOnly allow network traffic from known and approved devices.\n\nIn the following example, you can use a list of [device serial numbers](https://developers.cloudflare.com/cloudflare-one/reusable-components/posture-checks/warp-client-checks/corp-device/) to ensure users can only access an application if they connect with the WARP client from a company device:\n\n* Dashboard\n\n  | Selector | Operator | Value | Logic | Action |\n  | - | - | - | - | - |\n  | SNI Domain | is | `internalapp.com` | And | Block |\n  | Passed Device Posture Checks | not in | *Device serial numbers* | | |\n\n* API",
      "language": "unknown"
    },
    {
      "code": "To get the UUIDs of your device posture checks, use the [List device posture rules](https://developers.cloudflare.com/api/resources/zero_trust/subresources/devices/subresources/posture/methods/list/) endpoint.\n\n* Terraform",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: What security features does Cloudflare provide?  Cloudflare Learning Paths\ndescription: Review concepts related to Cloudflare Internet traffic and SaaS app security.\nlastUpdated: 2025-10-24T15:44:40.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/concepts/security-concepts/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/concepts/security-concepts/index.md\n---\n\nReview concepts related to Cloudflare Internet traffic and SaaS app security.\n\n## What is 1.1.1.1?\n\n1.1.1.1 is Cloudflare's free, fast, and secure public DNS resolver.\n\nFor more information, refer to the [Learning Center](https://www.cloudflare.com/learning/dns/what-is-1.1.1.1/) and [1.1.1.1 documentation](https://developers.cloudflare.com/1.1.1.1/).\n\n## What is a secure web gateway (SWG)?\n\nA secure web gateway (SWG) is a cyber security product that protects company data and enforces security policies.\n\nCloudflare Gateway is a modern next-generation firewall between your user, device, or network and the public Internet. It includes DNS filtering to inspect and apply policies to all Internet-bound DNS queries.\n\nFor more information, refer to the [Learning Center](https://www.cloudflare.com/learning/access-management/what-is-a-secure-web-gateway/) and [Gateway documentation](https://developers.cloudflare.com/cloudflare-one/traffic-policies/).\n\n## What is HTTPS inspection?\n\nHTTPS inspection (also known as TLS decryption) is the process of filtering traffic by decrypting traffic sent to or from your organization, inspecting it and applying policies, then re-encrypting the traffic as it ingresses or egresses.\n\nFor more information, refer to the [Learning Center](https://www.cloudflare.com/learning/security/what-is-https-inspection/) and [TLS decryption documentation](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/tls-decryption/).\n\n## What is data loss prevention (DLP)?\n\nData loss prevention checks for sensitive data sent in uploads and downloads.\n\nCloudflare [Data Loss Prevention](https://www.cloudflare.com/learning/access-management/what-is-dlp/) (DLP) allows you to scan your web traffic and SaaS applications for the presence of sensitive data such as social security numbers, financial information, secret keys, and source code.\n\nFor more information, refer to the [Learning Center](https://www.cloudflare.com/learning/access-management/what-is-dlp/) and [DLP documentation](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/).\n\n## What is a cloud access security broker (CASB)?\n\nA cloud access security broker protects cloud services from security threats.\n\nCloudflare CASB provides comprehensive visibility and control over SaaS apps to prevent data leaks and compliance violations. It helps detect insider threats, shadow IT, risky data sharing, and bad actors.\n\nFor more information, refer to the [Learning Center](https://www.cloudflare.com/learning/access-management/what-is-a-casb/) and [CASB documentation](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/).\n\n## What is browser isolation?\n\nBrowser isolation prevents users from interacting directly with malicious websites by rendering pages in an isolated browser offsite.\n\nCloudflare Browser Isolation seamlessly executes active webpage content in a secure isolated browser to protect users from zero-day attacks, malware, and phishing.\n\nFor more information, refer to the [Learning Center](https://www.cloudflare.com/learning/access-management/what-is-a-casb/) and [Browser Isolation documentation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/).\n\n</page>\n\n<page>\n---\ntitle: Define device enrollment permissions  Cloudflare Learning Paths\ndescription: Device enrollment permissions determine which users can connect new\n  devices to your organization's Cloudflare Zero Trust instance. Once the user\n  registers their device, the WARP client will store their identity token and\n  use it to authenticate to services in your private network.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/device-enrollment-permissions/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/device-enrollment-permissions/index.md\n---\n\nDevice enrollment permissions determine which users can connect new devices to your organization's Cloudflare Zero Trust instance. Once the user registers their device, the WARP client will store their identity token and use it to authenticate to services in your private network.\n\n## Set device enrollment permissions\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles** > **Management**.\n\n  2. In **Device enrollment** > **Device enrollment permissions**, select **Manage**.\n\n  3. In the **Policies** tab, configure one or more [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to define who can join their device. For example, you could allow all users with a company email address:\n\n     | Rule type | Selector | Value |\n     | - | - | - |\n     | Include | Emails ending in | `@company.com` |\n\n  Note\n\n  Device posture checks are not supported in device enrollment policies. WARP can only perform posture checks after the device is enrolled.\n\n  1. In the **Login methods** tab:\n\n     a. Select the [identity providers](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/) users can authenticate with. If you have not integrated an identity provider, you can use the [one-time PIN](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/).\n\n     b. (Optional) If you plan to only allow access via a single IdP, turn on **Instant Auth**. End users will not be shown the Cloudflare Access login page. Instead, Cloudflare will redirect users directly to your SSO login event.\n\n  2. Select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Apps and Policies Write`\n\n  2. Create a reusable Access policy using the [`cloudflare_zero_trust_access_policy`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_policy) resource:",
      "language": "unknown"
    },
    {
      "code": "3. Use the [`cloudflare_zero_trust_access_application`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_application) resource to create an application with type `warp`.",
      "language": "unknown"
    },
    {
      "code": "## Only allow corporate devices\n\nDevice posture evaluation happens after a device has already enrolled in your Zero Trust organization. If you want only specific devices to be able to enroll, we recommend adding a [mutual TLS authentication](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/) rule to your device enrollment policy. This rule will check for the presence of a specific client certificate on the enrolling devices.\n\nNote\n\nMutual TLS authentication is only available on Enterprise plans.\n\nCertificate requirements\n\n* The CA certificate can be from a publicly trusted CA or self-signed.\n\n* In the certificate `Basic Constraints`, the attribute `CA` must be set to `TRUE`.\n\n* The certificate must use one of the signature algorithms listed below:\n\n  Allowed signature algorithms\n\n  `x509.SHA1WithRSA`\n\n  `x509.SHA256WithRSA`\n\n  `x509.SHA384WithRSA`\n\n  `x509.SHA512WithRSA`\n\n  `x509.ECDSAWithSHA1`\n\n  `x509.ECDSAWithSHA256`\n\n  `x509.ECDSAWithSHA384`\n\n  `x509.ECDSAWithSHA512`\n\nTo check for an mTLS certificate:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Access controls** > **Service credentials** > **Mutual TLS**.\n\n  2. Select **Add mTLS Certificate**.\n\n  3. Enter any name for the root CA.\n\n  4. In **Certificate content**, paste the contents of your root CA.\n\n     If the client certificate is directly signed by the root CA, you only need to upload the root. If the client certificate is signed by an intermediate certificate, you must upload the entire CA chain (intermediate and root). For example:",
      "language": "unknown"
    },
    {
      "code": "1) In **Associated hostnames**, enter your Zero Trust team domain: `<team-name>.cloudflareaccess.com`\n\n  2) In your [device enrollment permissions](#set-device-enrollment-permissions), add a *Common Name* or *Valid Certificate* rule. For example, the following policy requires a client certificate with a specific common name:\n\n     | Action | Rule type | Selector | Value |\n     | - | - | - | - |\n     | Allow | Require | Common Name | `<CERT-COMMON-NAME>` |\n\n  3) On your device, add the client certificate to the [system keychain](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#test-in-the-browser).\n\n* Terraform (v5)\n\n  1. Add the following permissions to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Mutual TLS Certificates Write`\n     * `Access: Apps and Policies Write`\n\n  2. Use the [`cloudflare_zero_trust_access_mtls_certificate`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_mtls_certificate) resource to add an mTLS certificate to your account:",
      "language": "unknown"
    },
    {
      "code": "3. Create the following Access policy:",
      "language": "unknown"
    },
    {
      "code": "4. Add the policy to your [`cloudflared_zero_trust_access_application` for WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/device-enrollment/#set-device-enrollment-permissions).\n\n  5. On your device, add the client certificate to the [system keychain](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/mutual-tls-authentication/#test-in-the-browser).\n\n## Best practices\n\nMost businesses use a single identity provider as the source of truth for their user directory. You should use this source of truth to onboard your corporate users to Zero Trust, for example by requiring company email addresses to login with your primary identity provider. Later on, you can add other login methods or identity providers as necessary for any contractors, vendors, or acquired corporations who may need access to your network.\n\n</page>\n\n<page>\n---\ntitle: Customize device profiles  Cloudflare Learning Paths\ndescription: A device profile defines WARP client settings for a specific set of\n  devices in your organization. You can create multiple profiles and apply\n  different settings based on the user's identity, the device's location, and\n  other criteria.\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/device-profiles/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/device-profiles/index.md\n---\n\nA device profile defines [WARP client settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) for a specific set of devices in your organization. You can create multiple profiles and apply different settings based on the user's identity, the device's location, and other criteria.\n\nFor example, users in one identity provider group (signifying a specific office location) might have different routes that need to be excluded from their WARP tunnel, or some device types (like Linux) might need different DNS settings to accommodate local development services.\n\n## Configure the default profile\n\nSet your default device profile to be applicable to a majority of your userbase, or any user without known explicit considerations.\n\nTo customize the default settings:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Select the **Default** profile and select \\**Edit*.\n\n  3. Many users running Cloudflare Zero Trust to secure their organization have a default profile that resembles the following. Refer to [WARP client settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) for a description of each setting.\n\n     | Setting | State | Notes |\n     | - | - | - |\n     | Captive portal detection | Enabled | |\n     | Mode switch | Disabled | If enabled, users have the option to switch to a DNS-only security mode and lose access to your private network. |\n     | Lock WARP switch | Enabled | Should be enabled unless users have an explicit reason to disable WARP, such as a conflicting VPN client on the device or other extenuating circumstances. If disabled for concerns about user experience, **Auto Connect** should be enabled and set on a short interval, like 10-15 minutes. |\n     | Allow device to leave organization | Disabled | |\n     | Allow updates | Disabled | Usually disabled on managed devices. If enabled, users who are local administrators on their device can update the WARP client on their own  this can introduce version consistency control issues if WARP versions are centrally managed by IT. |\n     | Auto connect | Enabled | Timeout is usually set between 10min - 30min. |\n     | Support URL | Enabled | |\n     | Service mode | Gateway with WARP | Proxies device traffic to Cloudflare according to your Split Tunnel rules. |\n     | Local Domain Fallback | | Refer to [Resolve Private DNS](https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/private-dns/). |\n     | Split Tunnels | Exclude IPs and domains | Refer to [Define Split Tunnels settings](https://developers.cloudflare.com/learning-paths/replace-vpn/configure-device-agent/split-tunnel-settings/). |\n     | Directly route Microsoft 365 traffic | Disabled | Usually disabled to allow inspection of Microsoft 365 traffic. |\n\n  4. Save the profile.\n\n  5. Configure [global settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#global-settings) for all device profiles:\n\n     1. (Recommended) Enable **Admin override code** if you turned on **Lock WARP switch**.\n     2. Enable **Install CA to system certificate store** if you want users to see a [custom block page](https://developers.cloudflare.com/cloudflare-one/reusable-components/custom-pages/gateway-block-page/).\n\n* API\n\n  1. Update the default device settings profile:",
      "language": "unknown"
    },
    {
      "code": "1. Update global settings:",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Configure default profile settings using the [`cloudflare_zero_trust_device_default_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile) resource:",
      "language": "unknown"
    },
    {
      "code": "3. Configure [global settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#global-settings) using the [`cloudflare_zero_trust_device_settings`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_settings) resource:",
      "language": "unknown"
    },
    {
      "code": "## (Optional) Create an office profile\n\nYou can configure a device settings profile to take effect when the device is connected to a trusted network such as an office. For example, you may wish to allow users in the office to access applications directly rather than route traffic through Cloudflare.\n\nFor setup instructions, refer to [Add a managed network](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/managed-networks/).\n\n</page>\n\n<page>\n---\ntitle: Proxy traffic through Gateway  Cloudflare Learning Paths\ndescription: With Cloudflare Gateway, you can log and filter DNS, network, and\n  HTTP traffic from devices running the WARP client. This includes traffic to\n  the public Internet and traffic directed to your private network. DNS\n  filtering is enabled by default since the WARP client sends DNS queries to\n  Cloudflare's public DNS resolver, 1.1.1.1. To enable network and HTTP\n  filtering, you will need to allow Cloudflare Gateway to proxy that traffic.\nlastUpdated: 2025-10-28T22:09:07.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/enable-proxy/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/enable-proxy/index.md\n---\n\nWith Cloudflare Gateway, you can log and filter DNS, network, and HTTP traffic from devices running the WARP client. This includes traffic to the public Internet and traffic directed to your private network. DNS filtering is enabled by default since the WARP client sends DNS queries to Cloudflare's public DNS resolver, [1.1.1.1](https://developers.cloudflare.com/1.1.1.1/). To enable network and HTTP filtering, you will need to allow Cloudflare Gateway to proxy that traffic.\n\n## Enable the proxy\n\n1. Go to **Traffic policies** > **Traffic settings**.\n2. Enable **Allow Secure Web Gateway to proxy traffic** for TCP.\n3. (Recommended) To proxy all port `443` traffic, including internal DNS queries, select **UDP**.\n4. (Optional) To scan file uploads and downloads for malware, [enable anti-virus scanning](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/antivirus-scanning/).\n\nCloudflare will now proxy traffic from enrolled devices, except for the traffic excluded in your [split tunnel settings](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/#3-route-private-network-ips-through-warp). For more information on how Gateway forwards traffic, refer to [Gateway proxy](https://developers.cloudflare.com/cloudflare-one/traffic-policies/proxy/).\n\n</page>\n\n<page>\n---\ntitle: Determine when to use PAC files  Cloudflare Learning Paths\ndescription: Learn how and when to use PAC files instead of (or complementary\n  to) endpoint agents.\nlastUpdated: 2025-11-21T18:29:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/pac-files/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/pac-files/index.md\n---\n\nNote\n\nOnly available on Enterprise plans.\n\nLearn how and when to use PAC files instead of (or complementary to) endpoint agents.\n\n## What are PAC files?\n\nA PAC file, or proxy auto-configuration file, is like a tiny map that guides your web browser to websites. Instead of going straight to a website, a PAC file can forward your traffic through a proxy server first, protecting your device and filtering unwanted URL access. Cloudflare users use PAC files to filter Internet traffic when they do not want to install agents on devices or where agent installations are not supported.\n\nHere is a quick overview of PAC files:\n\n* **What they do**: PAC files contain JavaScript code that decides whether or not your browser should use a proxy. The code determines this for each website you visit.\n* **How they work**: PAC files tell your browser to run a `FindProxyForURL()` function with the website address. This function analyzes the address and decides whether to send it directly to the browser or through a specified proxy server.\n* **Why use them**: PAC files are handy for organizations or networks that want to control access to the Internet. PAC files can allow access to some websites directly while routing others through the proxy for filtering or security.\n* **Benefits**: Managing a single PAC file saves time and effort compared to manually configuring proxy settings for each device. It also allows for flexible rules based on websites, time and date, and other factors.\n\nThink of PAC files like a GPS: you are driving to a friend's house, but there is construction on the main road. Your GPS (the PAC file) suggests a detour through a side street (the proxy server) to get there faster.\n\n### Use cases\n\nSome use cases for PAC files include:\n\n* **Versions of Windows before Windows 8/Windows Server 2012**: The WARP client does not support older versions of Windows, so PAC files provide a clientless solution to route traffic through Cloudflare to add security and filtering benefits.\n* **Non-persistent virtual desktop infrastructure (VDI) environments**: PAC files can be especially valuable in non-persistent VDI environments where installing and saving user details for the WARP client is challenging. In these instances, PAC files ensure consistent access and security regardless of individual user sessions.\n* **Backup in case of agent outage**: In case of an agent outage, PAC files can act as a backup that can be deployed quickly to minimize downtime and security risk.\n\n## Where are PAC files hosted?\n\nPAC files are usually hosted in a centralized location where all of the devices in your organization can reach and download the file. You can configure browsers with a PAC URL to retrieve the PAC file from the address. This typically occurs when your users open the browser. Many admins push PAC files to devices via deployment methods such as Group Policy Objects (GPOs).\n\n## Create a PAC file\n\nFor detailed instructions on creating a PAC file, refer to [Enable Gateway proxy with PAC files](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/proxy-endpoints/).\n\n### Best practices\n\n* Avoid complex logic and nested conditions, as they might slow down processing time.\n* Place frequently accessed URLs and conditions at the top for faster processing.\n* Test your PAC file logic on multiple devices before deployment with tools such as an [online proxy PAC file tester](https://thorsen.pm/proxyforurl).\n* When users download a PAC file from a central location, the download must complete within 30 seconds or most browsers will time out.\n* Requests must complete with an HTTP response code `200`.\n* Requests must have an uncompressed body smaller than 1 MB (megabyte).\n* Do not include standard HTTP caching within your PAC file. Cached contents can make PAC instructions outdated, and thus lead to bad HTTP routing.\n* PAC files cannot be fetched through a proxy.\n\n</page>\n\n<page>\n---\ntitle: Define Split Tunnel settings  Cloudflare Learning Paths\ndescription: Split tunnel settings determine which traffic WARP does and does not proxy.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/split-tunnel-settings/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/split-tunnel-settings/index.md\n---\n\nSplit tunnel settings determine which traffic WARP does and does not proxy.\n\nWARP offers two different split tunnel modes:\n\n* If you intend to send all internal and external destination traffic through Cloudflare's global network, opt for **Exclude IPs and domains** mode. This mode will proxy everything through the WARP tunnel with the exception of IPs and hosts defined explicitly within the Split Tunnel list.\n* If you intend to only use WARP to proxy private destination traffic, you can operate in **Include IPs and domains** mode, in which you explicitly define which IP ranges and domains should be included in the WARP routing table.\n\n## Update Split Tunnels mode\n\nTo change your Split Tunnels mode:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to modify and select **Configure**.\n\n  3. Scroll down to **Split Tunnels**.\n\n  4. (Optional) To view your existing Split Tunnel configuration, select **Manage**. You will see a list of the IPs and domains Cloudflare Zero Trust excludes or includes, depending on the mode you have selected. We recommend making a copy of your Split Tunnel entries, as they will revert to the default upon switching modes.\n\n  5. Under **Split Tunnels**, choose a mode:\n\n     * **Exclude IPs and domains**  (Default) All traffic will be sent to Cloudflare Gateway except for the IPs and domains you specify.\n     * **Include IPs and Domains**  Only traffic destined to the IPs or domains you specify will be sent to Cloudflare Gateway. All other traffic will bypass Gateway and will no longer be filtered by your network or HTTP policies. In order to use certain features, you will need to manually add [Zero Trust domains](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#cloudflare-zero-trust-domains).\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a [`cloudflare_zero_trust_device_default_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile) or [`cloudflare_zero_trust_device_custom_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile) resource to modify, or [create a new device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/#create-a-new-profile).\n\n  3. In your device profile, configure either the `exclude` or `include` argument. You cannot set both `exclude` and `include` in a given device profile.\n\n     a. To manage Split Tunnel routes in **Exclude** mode, use the `exclude` argument:",
      "language": "unknown"
    },
    {
      "code": "In this example, all traffic will be sent to Cloudflare Gateway except for traffic destined to `10.0.0.0/8`. To exclude the default IPs and domains recommended by Cloudflare, refer to [Add a route](#add-a-route).\n\n     b. To manage Split Tunnel routes in **Include** mode, use the `include` argument:",
      "language": "unknown"
    },
    {
      "code": "In this example, only traffic destined to `10.0.0.0/8` will be sent to Cloudflare Gateway.\n\nAll clients with this device profile will now switch to the new mode and its default route configuration. Next, [add](#add-a-route) or [remove](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#remove-a-route) routes from your Split Tunnel configuration.\n\n## Add a route\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Device profiles**.\n\n  2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to modify and select **Configure**.\n\n  3. Under **Split Tunnels**, check whether your [Split Tunnels mode](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#change-split-tunnels-mode) is set to **Exclude** or **Include**.\n\n  4. Select **Manage**.\n\n  5. You can exclude or include routes based on either their IP address or domain. When possible we recommend adding an IP address instead of a domain. To learn about the consequences of adding a domain, refer to [Domain-based Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#domain-based-split-tunnels).\n\n     * Add an IP\n\n       To add an IP address to Split Tunnels:\n\n       1. Select *IP Address*.\n       2. Enter the IP address or CIDR you want to exclude or include.\n       3. Select **Save destination**.\n\n       Traffic to this IP address is now excluded or included from the WARP tunnel.\n\n       Note\n\n       If you would like to exclude a specific IP range from a larger IP range, you can use this calculator:\n\n     * Add a domain\n\n       To add a domain to Split Tunnels:\n\n       1. Select *Domain*.\n       2. Enter a [valid domain](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#valid-domains) to exclude or include.\n       3. Select **Save destination**.\n       4. (Optional) If your domain does not have a public DNS record, create a [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) entry to allow a private DNS server to handle domain resolution.\n\n       When a user goes to the domain, the domain gets resolved according to your Local Domain Fallback configuration (either by Gateway or by your private DNS server). WARP Split Tunnels will then dynamically include or exclude the IP address returned in the DNS lookup.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Choose a [`cloudflare_zero_trust_device_default_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile) or [`cloudflare_zero_trust_device_custom_profile`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile) resource to modify, or [create a new device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/#create-a-new-profile).\n\n  3. (Optional) Create a list of split tunnel routes that you can reuse across multiple device profiles. For example, you can declare a local value in the same module as your device profiles:",
      "language": "unknown"
    },
    {
      "code": "4. In the device profile, exclude or include routes based on either their IP address or domain:",
      "language": "unknown"
    },
    {
      "code": "When possible we recommend adding an IP address instead of a domain. To learn about the consequences of adding a domain, refer to [Domain-based Split Tunnels](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#domain-based-split-tunnels).\n\n* Add an IP\n\n  To add an IP address to Split Tunnels:\n\n  1. Select *IP Address*.\n  2. Enter the IP address or CIDR you want to exclude or include.\n  3. Select **Save destination**.\n\n  Traffic to this IP address is now excluded or included from the WARP tunnel.\n\n  Note\n\n  If you would like to exclude a specific IP range from a larger IP range, you can use this calculator:\n\n* Add a domain\n\n  To add a domain to Split Tunnels:\n\n  1. Select *Domain*.\n  2. Enter a [valid domain](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/#valid-domains) to exclude or include.\n  3. Select **Save destination**.\n  4. (Optional) If your domain does not have a public DNS record, create a [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/) entry to allow a private DNS server to handle domain resolution.\n\n  When a user goes to the domain, the domain gets resolved according to your Local Domain Fallback configuration (either by Gateway or by your private DNS server). WARP Split Tunnels will then dynamically include or exclude the IP address returned in the DNS lookup.\n\nIt may take up to 10 minutes for newly updated settings to propagate to devices.\n\nWe recommend keeping the Split Tunnels list short, as each entry takes time for the client to parse. In particular, domains are slower to action than IP addresses because they require on-the-fly IP lookups and routing table / local firewall changes. A shorter list will also make it easier to understand and debug your configuration. For information on device profile limits, refer to [Account limits](https://developers.cloudflare.com/cloudflare-one/account-limits/#warp).\n\n</page>\n\n<page>\n---\ntitle: Resolve private DNS  Cloudflare Learning Paths\ndescription: \"By default, all DNS requests on the user device are resolved by\n  Cloudflare's public DNS resolver except for common top level domains used for\n  local resolution (such as localhost). To allow users to connect to internal\n  server names or domains that do not resolve on the public Internet, you have\n  two options:\"\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/private-dns/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/private-dns/index.md\n---\n\nBy default, all DNS requests on the user device are resolved by Cloudflare's [public DNS resolver](https://developers.cloudflare.com/1.1.1.1/) except for common top level domains used for local resolution (such as `localhost`). To allow users to connect to internal server names or domains that do not resolve on the public Internet, you have two options:\n\n* [Add internal domains to Local Domain Fallback](#local-domain-fallback)\n* [Build custom resolver policies](#resolver-policies)\n\n## Local Domain Fallback\n\nLocal Domain Fallback tells the WARP client to send specific DNS requests to your private DNS resolver instead of to Cloudflare's public DNS resolver. This method was the primary delivery mechanism for private DNS for a long time, and is the simplest option, but it has two shortcomings: you cannot deterministically route private DNS queries to different resolvers based on specific attributes, and you cannot apply Gateway DNS policies to this traffic because Cloudflare is not resolving it.\n\nTo learn more about how Local Domain Fallback works, refer to [How the WARP client handles DNS requests](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/#how-the-warp-client-handles-dns-requests).\n\n### Add a domain\n\nTo add a domain to the Local Domain Fallback list:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Team & Resources** > **Devices** > **Device profiles**.\n  2. Locate the [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/) you would like to view or modify and select **Configure**.\n  3. Scroll down to **Local Domain Fallback** and select **Manage**.\n\n  1) In **Domain**, enter the apex domain (`example.com`) that you want to resolve using your private DNS server. All prefixes under the apex domain are subject to Local Domain Fallback (in other words, `example.com` is interpreted as `*.example.com`).\n\n  2) In **DNS Servers**, enter the IP address of the DNS servers that should resolve that domain name.\n\n  3) Enter an optional description and select **Save domain**.\n\n* Terraform (v5)\n\n  A Local Domain Fallback list is scoped to a specific [device profile](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/). If a device profile does not have a corresponding Local Domain Fallback resource, those devices will use the default local domains shown in Step 2.\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. (Optional) Create a list of domains that you can reuse across multiple device profiles. For example, you can declare a local value in the same module as your device profiles:",
      "language": "unknown"
    },
    {
      "code": "3. To configure Local Domain Fallback for the default device profile, use the [`cloudflare_zero_trust_device_default_profile_local_domain_fallback`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_default_profile_local_domain_fallback) resource. To configure Local Domain Fallback for a custom device profile, use[`cloudflare_zero_trust_device_custom_profile_local_domain_fallback`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_device_custom_profile_local_domain_fallback). For example:",
      "language": "unknown"
    },
    {
      "code": "For `suffix`, specify the apex domain (`example.com`) that you want to resolve using your private DNS server. All prefixes under the apex domain are subject to Local Domain Fallback (in other words, `example.com` is interpreted as `*.example.com`). For `dns_server`, enter the IP address of the DNS servers that should resolve that domain name.\n\nWARP tries all servers and always uses the fastest response, even if that response is `no records found`. We recommend specifying at least one DNS server for each domain. If a value is not specified, the WARP client will try to identify the DNS server (or servers) used on the device before it started, and use that server for each domain in the Local Domain Fallback list.\n\n### Route traffic to fallback server\n\nThe WARP client routes DNS traffic to your [Local Domain Fallback server](#add-a-domain) according to your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/). To ensure that queries can reach your private DNS server:\n\n* If your DNS server is only reachable inside of the WARP tunnel (for example, via `cloudflared` or Magic WAN):\n\n  1. Go to **Networks** > **Routes** and verify that the DNS server is connected to Cloudflare. To connect a DNS server, refer to [Private networks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/).\n\n  2. In your [Split Tunnel configuration](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/), verify that the DNS server IP routes through the WARP tunnel.\n\n* If your DNS server is only reachable outside of the WARP tunnel (for example, via a third-party VPN), verify that the DNS server IP is [excluded from the WARP tunnel](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/).\n\nFor more information, refer to [How the WARP client handles DNS requests](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/#how-the-warp-client-handles-dns-requests).\n\n## Resolver policies\n\nNote\n\nOnly available on Enterprise plans.\n\n[Resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) provide similar functionality to Local Domain Fallback but occur in Cloudflare Gateway rather than on the local device. This option is recommended if you want more granular control over private DNS resolution. For example, you can ensure that all users in a specific geography use the private DNS server closest to them, ensure that specific conditions are met before resolving private DNS traffic, and apply [Gateway DNS policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/) to private DNS traffic.\n\n### Create a resolver policy\n\nVirtual network limitation\n\nResolver policies do not automatically update when you change the virtual networks associated with a route. If you move a route from one virtual network to another, the resolver policy will still reference the old virtual network. You will need to manually remove and recreate the resolver policy to update the route.\n\nTo create a resolver policy:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Traffic policies** > **Resolver policies**.\n\n  2. Select **Add a policy**.\n\n  3. Create an expression for your desired traffic. For example, you can resolve a hostname for an internal service:\n\n     | Selector | Operator | Value |\n     | - | - | - |\n     | Host | in | `internal.example.com` |\n\n     Make sure your destination is not subject to [Local Domain Fallback](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/local-domains/#manage-local-domains).\n\n  4. In **Select DNS resolver**, choose *Configure custom DNS resolvers*.\n\n  5. Enter the IP addresses of your custom DNS resolver. As you enter an IP address, Gateway will search through your [virtual networks](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/cloudflared/tunnel-virtual-networks/) configured in Zero Trust.\n\n  6. In **Network**, choose whether to route queries publicly (to the Internet) or privately (to a private network service).\n\n  7. (Optional) Enter a custom port for each IP address.\n\n  8. Select **Create policy**.\n\n  Custom resolvers are saved to your account for future use. You can add up to 10 IPv4 and 10 IPv6 addresses to a policy.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Create a resolver policy using the [`cloudflare_zero_trust_gateway_policy`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_gateway_policy) resource:",
      "language": "unknown"
    },
    {
      "code": "When a user's query matches a resolver policy, Gateway will send the query to your listed resolvers in the following order:\n\n1. Public resolvers\n2. Private resolvers behind the default virtual network for your account\n3. Private resolvers behind a custom virtual network\n\nGateway will cache the fastest resolver for use in subsequent queries. Resolver priority is cached on a per user basis for each data center.\n\n</page>\n\n<page>\n---\ntitle: Choose an on-ramp  Cloudflare Learning Paths\ndescription: Similar to the network onboarding practices in the Replace your VPN\n  implementation guide, there are a number of ways to on-ramp your network\n  traffic to the Cloudflare global network. This guide will quickly explore all\n  of the options to on-ramp traffic to Cloudflare Gateway to inspect, apply\n  policies, and filter.\nlastUpdated: 2025-11-21T18:29:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/choose-on-ramp/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/choose-on-ramp/index.md\n---\n\nSimilar to the network onboarding practices in the [Replace your VPN](https://developers.cloudflare.com/learning-paths/replace-vpn/connect-private-network/) implementation guide, there are a number of ways to on-ramp your network traffic to the Cloudflare global network. This guide will quickly explore all of the options to on-ramp traffic to Cloudflare Gateway to inspect, apply policies, and filter.\n\nNote\n\nThe following steps are identical to [Connect user devices](https://developers.cloudflare.com/learning-paths/replace-vpn/connect-devices/) in the Replace your VPN implementation guide. If you have already completed Replace your VPN, you can skip ahead to [Network on-ramps](#network-on-ramps).\n\n## Device on-ramps\n\nThe most common way to protect and filter your end-user traffic is by using a device client. The standard Cloudflare device client supports a number of operating systems and deployment methodologies, but there can still be scenarios in which an alternative path makes sense.\n\n### Zero Trust Client\n\nCloudflare WARP is the most common onramp to send user traffic to Gateway. It is a lightweight device client, which builds proxy tunnels using either Wireguard or MASQUE, and builds a DNS proxy using DNS-over-HTTPS. It supports all major operating systems, supports all common forms of endpoint management tooling, and has a robust series of management parameters and profiles to accurately scope the needs of a diverse user base. It has flexible operating modes and can control device traffic as a proxy, control device DNS traffic as a DNS proxy, or both. It is the most common method to send traffic from user devices to be filtered and decrypted by Cloudflare Gateway.\n\n### PAC files (Enterprise only)\n\nCloudflare supports filtering HTTP/S traffic sent via a PAC file on a user device. PAC files configured to send traffic to Cloudflare target a domain specific to your account tenant, and receive and process all URL traffic for that device that fits the proxy profile. PAC files are most commonly used in scenarios in which the device client is not appropriate or cannot be installed -- specifically Windows pre-2008 and Windows Server 2012, and devices which cannot install client software at all.\n\n### Clientless Browser Isolation\n\nCloudflare Browser Isolation runs a headless, Chromium-based browser for your users to accomplish their secure browsing needs. It can be activated via an Access application, a Gateway policy, or by using link-based isolation (reverse proxy). In this model, your users can connect from any device to a proxy website to browse the Internet while applying all your Gateway HTTP policies and inspection requirements.\n\n| | WARP | PAC Files | Clientless Browser Isolation |\n| - | - | - | - |\n| Supported OS | macOS, Windows, Linux, iOS, Android | All desktop OS | All OS (with HTML5 compliant browser) |\n| Configurable via MDM | Yes | Yes | N/A |\n| Gateway policy types supported | DNS, Network, HTTP, Resolver, Egress | HTTP | DNS, Network, HTTP, Resolver, Egress |\n| Identity-based policies supported | Yes | No | Yes |\n\n## Network on-ramps\n\nThe primary ways to source multi-device or network traffic to Cloudflare Gateway are via Magic WAN using GRE or IPsec tunnels, the [WARP Connector](#warp-connector) as a software-defined all-ports traffic proxy, or via upstream DNS for a whole network using [DNS filtering locations](#dns-filtering-locations).\n\n### Magic WAN\n\nNote\n\nOnly available on Enterprise plans.\n\n[Magic WAN](https://developers.cloudflare.com/magic-wan/) is Cloudflare's offering most analogous to a traditional SD-WAN. Magic WAN is typically deployed via an IPsec or GRE tunnel terminating on customer devices (such as firewalls or routers), or via our Magic WAN Connector hardware device. You can also be deploy Magic WAN using [Cloudflare Network Interconnect](https://developers.cloudflare.com/network-interconnect/) (CNI) at private peering locations or some public cloud instances (where compatible).\n\nMagic WAN on-ramps traffic via your connections and can send all network and HTTP traffic through Cloudflare Gateway for inspection.\n\nFor more information on how Magic WAN integrates with Zero Trust, refer to [Zero Trust integration](https://developers.cloudflare.com/magic-wan/zero-trust/).\n\n### WARP Connector Beta\n\n[WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/), a software agent similar to our device client, functions as a virtual device to establish a connection between your network and the Cloudflare global network. You can install WARP Connector on a dedicated Linux server or virtual machine.\n\nWARP Connector supports egressing traffic from your private network to the Internet as a gateway. This means it can allow traffic initiated from a network to be on-ramped to Cloudflare for either public or private destinations. You can use WARP Connector to establish a secure egress path for servers or users on a network which may not each be able to run the WARP client and still apply Gateway network and HTTP inspection policies. This connection is most analogous to proxy server connectivity or site-to-site VPN.\n\nFor more information on setting up Cloudflare Tunnel via WARP Connector, refer to [Set up WARP Connector](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/private-net/warp-connector/).\n\n### DNS filtering locations\n\nDNS locations are a collection of DNS endpoints which can be mapped to physical entities such as offices, homes, or data centers.\n\nThe fastest way to start filtering DNS queries from a location is by changing the DNS resolvers at the router or updating the upstream resolution to Cloudflare DNS resolution endpoints. This can also be accomplished from individual devices, or an network or subnet which sets resolver IPs for clients via DHCP.\n\nFor more information on setting up DNS locations, refer to [Add locations](https://developers.cloudflare.com/cloudflare-one/networks/resolvers-and-proxies/dns/locations/).\n\n| | Magic WAN | WARP Connector | DNS Locations |\n| - | - | - | - |\n| Gateway policy types supported | Network, HTTP, Egress | Network, HTTP, Egress | DNS, Resolver |\n\n</page>\n\n<page>\n---\ntitle: Download and install WARP  Cloudflare Learning Paths\ndescription: Most admins test by manually downloading the WARP client and\n  enrolling in your organization's Cloudflare Zero Trust instance.\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/install-agent/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/install-agent/index.md\n---\n\nMost admins test by manually downloading the WARP client and enrolling in your organization's Cloudflare Zero Trust instance.\n\n## Install WARP\n\n1. First, uninstall any existing third-party VPN software if possible. Sometimes products placed in a disconnected or disabled state will still interfere with the WARP client.\n\n2. If you are running third-party firewall or TLS decryption software, verify that it does not inspect or block traffic to the following destinations:\n\n   * IPv4 API endpoints: `162.159.137.105` and `162.159.138.105`\n   * IPv6 API endpoints: `2606:4700:7::a29f:8969` and `2606:4700:7::a29f:8a69`\n   * SNIs: `zero-trust-client.cloudflareclient.com` and `notifications.cloudflareclient.com`\n\n   For more information, refer to [WARP with firewall](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/firewall/).\n\n3. Manually install WARP on the device.\n\n   Window, macOS, and Linux\n\n   To enroll your device using the WARP GUI:\n\n   1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the WARP client.\n\n   2. Launch the WARP client.\n\n   3. Select the Cloudflare logo in the menu bar.\n\n   4. Select the gear icon.\n\n   5. Go to **Preferences** > **Account**.\n\n   6. Select **Login with Cloudflare Zero Trust**.\n\n   7. Enter your team name.\n\n   8. Complete the authentication steps required by your organization.\n\n      Once authenticated, you will see a Success page and a dialog prompting you to open WARP.\n\n   9. Select **Open Cloudflare WARP.app** to complete the registration.\n\n   iOS, Android, and ChromeOS\n\n   1. [Download](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/) and install the Cloudflare One Agent app.\n   2. Launch the Cloudflare One Agent app.\n   3. Select **Next**.\n   4. Review the privacy policy and select **Accept**.\n   5. Enter your team name.\n   6. Complete the authentication steps required by your organization.\n   7. After authenticating, select **Install VPN Profile**.\n   8. In the **Connection request** popup window, select **OK**.\n   9. If you did not enable [auto-connect](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/#auto-connect), manually turn on the switch to **Connected**.\n\nThe WARP client should show as **Connected**. The device is now connected to your organization and secured with Cloudflare Zero Trust.\n\n</page>\n\n<page>\n---\ntitle: MDM deployment  Cloudflare Learning Paths\ndescription: Organizations can deploy WARP automatically to their fleet of\n  devices in a single operation. The WARP client is compatible with the vast\n  majority of managed deployment workflows, including mobility management\n  solutions such as Intune or JAMF, or by executing an .msi file on desktop\n  machines.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/mdm/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/mdm/index.md\n---\n\nOrganizations can deploy WARP automatically to their fleet of devices in a single operation. The WARP client is compatible with the vast majority of managed deployment workflows, including [mobility management solutions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/partners/) such as Intune or JAMF, or by executing an `.msi` file on desktop machines.\n\n## MDM policy file\n\nRefer to our [managed deployment instructions](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/) and create a `.plist`, `mdm.xml`, or `.msi` policy file based on your organization's software management tool.\n\n[MDM parameters](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/deployment/mdm-deployment/parameters/) that you specify in a local policy file will overrule any [WARP settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) configured in the dashboard.\n\nTherefore, we recommend that your policy file only contain the organization name and potentially the onboarding flag, [relying on the dashboard](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/configure-device-agent/device-profiles/) to configure the remaining device settings.",
      "language": "unknown"
    },
    {
      "code": "1. In the [Cloudflare dashboard](https://dash.cloudflare.com/), select **Zero Trust**.\n\n   [Go to **Zero Trust**](https://one.dash.cloudflare.com/)\n\n2. On the onboarding screen, choose a team name. The team name is a unique, internal identifier for your Zero Trust organization. Users will enter this team name when they enroll their device manually, and it will be the subdomain for your App Launcher (as relevant). Your business name is the typical entry.\n\n   You can find your team name in [Cloudflare One](https://one.dash.cloudflare.com) by going to **Settings**.\n\n3. Complete your onboarding by selecting a subscription plan and entering your payment details. If you chose the **Zero Trust Free plan**, this step is still needed but you will not be charged.\n\n</page>\n\n<page>\n---\ntitle: Verify device connectivity  Cloudflare Learning Paths\ndescription: \"To validate that Cloudflare is receiving traffic from a user device:\"\nlastUpdated: 2025-11-20T01:18:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/validate-traffic-in-gateway/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/connect-devices-networks/validate-traffic-in-gateway/index.md\n---\n\nTo validate that Cloudflare is receiving traffic from a user device:\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Traffic policies** > **Traffic settings**.\n2. Under **Log traffic activity**, enable activity logging for all DNS logs.\n3. On your device, open a browser and go to any website.\n4. In Cloudflare One, go to **Insights** > **Logs** > **DNS**.\n5. Make sure DNS queries from your device appear.\n\n## Best practices\n\nSecuring your organization with Zero Trust usually happens in two phases: the first phase is establishing connectivity, and the second phase is building policies for distinct applications. We recommend verifying that all connectivity is working as expected before moving on to build complex security policies. This will reduce the amount of troubleshooting and challenges that arise from managing complex systems.\n\nTroubleshoot WARP\n\nFor step-by-step guidance on diagnosing and resolving WARP client issues, refer to the [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/). The guide covers:\n\n* How to collect diagnostic logs via the Cloudflare dashboard or CLI\n* How to review key configuration files\n* Common misconfigurations and their fixes\n* Best practices for filing support tickets\n\n</page>\n\n<page>\n---\ntitle: Configure an identity provider  Cloudflare Learning Paths\ndescription: An identity provider (IdP) stores and manages users' digital\n  identities. You can integrate your existing identity provider with Cloudflare\n  Zero Trust in order to manage user access to your private network. This\n  requires configuration both in Cloudflare and with the identity provider\n  itself.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/configure-idp/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/configure-idp/index.md\n---\n\nAn [identity provider (IdP)](https://www.cloudflare.com/learning/access-management/what-is-an-identity-provider/) stores and manages users' digital identities. You can integrate your existing identity provider with Cloudflare Zero Trust in order to manage user access to your private network. This requires configuration both in Cloudflare and with the identity provider itself.\n\nNote\n\nSome admins choose to test by authenticating with a [one-time PIN (OTP)](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/one-time-pin/) instead of an IdP. OTP can also be used as an alternative login method for contractors or other guests that are not part of your IdP.\n\nTo add an identity provider:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Integrations** > **Identity providers**.\n\n  2. In the **Your identity providers** card, select **Add new identity provider**.\n\n  3. Select the identity provider you want to add.\n\n     If you do not see your identity provider listed, these providers can typically still be enabled. If they support OIDC or OAuth, select the [generic OIDC](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/) option. If they support SAML, select the [generic SAML](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/) option. Cloudflare supports all SAML and OIDC providers and can integrate with the majority of OAuth providers. If your provider supports both SAML and OIDC, we recommend OIDC for ease of configuration.\n\n  4. Fill in the necessary fields to set up your identity provider.\n\n     Each identity provider will have different required fields for you to fill in. Step-by-step instructions are shown in the dashboard side panel. Alternatively, refer to the [IdP-specific documentation](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/).\n\n  5. Once you have filled in the necessary fields, select **Save**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Access: Organizations, Identity Providers, and Groups Write`\n\n  2. Add an identity provider to Cloudflare One using the [`cloudflare_zero_trust_access_identity_provider`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_access_identity_provider) resource. For example, to add a Microsoft Entra ID integration:",
      "language": "unknown"
    },
    {
      "code": "Each identity provider integration has different required attributes. You will need to obtain these attribute values from your identity provider. For more information, refer to the [IdP-specific documentation](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/).\n\n     If you do not see your identity provider listed, these providers can typically still be enabled. If they support OIDC or OAuth, use the [generic OIDC](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-oidc/) option. If they support SAML, use the [generic SAML](https://developers.cloudflare.com/cloudflare-one/integrations/identity-providers/generic-saml/) option. Cloudflare supports all SAML and OIDC providers and can integrate with the majority of OAuth providers. If your provider supports both SAML and OIDC, we recommend OIDC for ease of configuration.\n\nUsers will now be able to select this IdP when they are prompted to authenticate.\n\n</page>\n\n<page>\n---\ntitle: Create a Cloudflare account  Cloudflare Learning Paths\ndescription: \"To create a new Cloudflare account:\"\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/create-cloudflare-account/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/create-cloudflare-account/index.md\n---\n\nTo create a new Cloudflare account:\n\n1. [Sign up](https://dash.cloudflare.com/sign-up) on the Cloudflare dashboard.\n\n2. To secure your account, enable [two-factor authentication](https://developers.cloudflare.com/fundamentals/user-profiles/2fa/).\n\n3. If you have a Cloudflare contact (Enterprise only), ask them to set up your account as a multi-user organization. Account members will need:\n\n   * [**Access** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit applications and Access policies.\n   * [**Gateway** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/) to read or edit Gateway policies.\n   * [**PII** permissions](https://developers.cloudflare.com/cloudflare-one/roles-permissions/#cloudflare-zero-trust-pii) to view user information in Gateway activity logs.\n\n## Best practices\n\nIf you are creating an account for your team or a business, we recommend choosing an email alias or distribution list for your **Email**, such as `cloudflare@example.com`.\n\nThis email address is the main point of contact for your Cloudflare billing, usage notifications, and account recovery.\n\n</page>\n\n<page>\n---\ntitle: Create a Zero Trust organization  Cloudflare Learning Paths\ndescription: To start using Zero Trust features, create a Zero Trust\n  organization in your Cloudflare account.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/create-zero-trust-org/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/create-zero-trust-org/index.md\n---\n\nTo start using Zero Trust features, create a Zero Trust organization in your Cloudflare account.\n\n## Sign up for Zero Trust\n\nTo create a Zero Trust organization:\n\n1. In the [Cloudflare dashboard](https://dash.cloudflare.com/), select **Zero Trust**.\n\n   [Go to **Zero Trust**](https://one.dash.cloudflare.com/)\n\n2. On the onboarding screen, choose a team name. The team name is a unique, internal identifier for your Zero Trust organization. Users will enter this team name when they enroll their device manually, and it will be the subdomain for your App Launcher (as relevant). Your business name is the typical entry.\n\n   You can find your team name in [Cloudflare One](https://one.dash.cloudflare.com) by going to **Settings**.\n\n3. Complete your onboarding by selecting a subscription plan and entering your payment details. If you chose the **Zero Trust Free plan**, this step is still needed but you will not be charged.\n\n## (Optional) Manage Zero Trust in Terraform\n\nYou can use the [Cloudflare Terraform provider](https://registry.terraform.io/providers/cloudflare/cloudflare/latest) to manage your Zero Trust organization alongside your other IT infrastructure. To get started with Terraform, refer to our [Terraform tutorial series](https://developers.cloudflare.com/terraform/tutorial/).\n\nTo add Zero Trust to your Terraform configuration:\n\n1. [Sign up for Zero Trust](#sign-up-for-zero-trust) on the Cloudflare dashboard.\n\n2. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n   * `Access: Organizations, Identity Providers, and Groups Write`\n\n3. Add the [`cloudflare_zero_trust_organization`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_organization) resource:",
      "language": "unknown"
    },
    {
      "code": "Replace `<your-team-name` with the Zero Trust organization name selected during [onboarding](#sign-up-for-zero-trust). You can also view your team name on [Cloudflare One](https://one.dash.cloudflare.com) under **Settings** > **Team name and domain**.\n\nYou can now update Zero Trust organization settings using Terraform.\n\nTip\n\nIf you plan to manage all Zero Trust settings in Terraform, set the dashboard to [API/Terraform read-only mode](https://developers.cloudflare.com/cloudflare-one/api-terraform/#set-dashboard-to-read-only).\n\n</page>\n\n<page>\n---\ntitle: Prerequisites  Cloudflare Learning Paths\ndescription: \"To make the most of securing your Internet traffic and SaaS apps,\n  make sure that you have the following:\"\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/prerequisites/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/initial-setup/prerequisites/index.md\n---\n\nTo make the most of securing your Internet traffic and SaaS apps, make sure that you have the following:\n\n* A device that can run [WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/), Cloudflare's endpoint agent.\n* (Optional) A [Linux host server](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/download-warp/#linux) on the private network that can run the Cloudflare WARP Connector.\n\n</page>\n\n<page>\n---\ntitle: Scan SaaS applications with Cloudflare CASB  Cloudflare Learning Paths\ndescription: Cloudflare CASB provides comprehensive visibility and control over\n  SaaS apps to prevent data leaks and compliance violations. It helps detect\n  insider threats, shadow IT, risky data sharing, and bad actors.\nlastUpdated: 2025-10-29T14:53:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/configure-casb/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/configure-casb/index.md\n---\n\nNote\n\nOnly available on Enterprise plans.\n\nCloudflare CASB provides comprehensive visibility and control over SaaS apps to prevent data leaks and compliance violations. It helps detect insider threats, shadow IT, risky data sharing, and bad actors.\n\nCloudflare's API-implemented CASB addresses the final, common security concern for administrators of SaaS applications or security organizations: How can I get insights into the existing configurations of my SaaS tools and proactively address issues before there is an incident? CASB integrates with a number of leading SaaS applications and surfaces instant security insights related to misconfiguration and potential for data loss. CASB also powers [risk score heuristics](https://developers.cloudflare.com/cloudflare-one/team-and-resources/users/risk-score/) organized by severity.\n\nFor more information on Cloudflare CASB, including available SaaS integrations, refer to [Scan SaaS applications](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/).\n\n## Manage CASB integrations\n\nWhen you integrate a third-party SaaS application or cloud environment with Cloudflare CASB, you allow CASB to make API calls to its endpoint and read relevant data on your behalf. The CASB integration permissions are read-only and follow the least privileged model. In other words, only the minimum access required to perform a scan is granted.\n\n### Prerequisites\n\nBefore you can integrate a SaaS application or cloud environment with CASB, your account with that integration must meet certain requirements. Refer to the SaaS application or cloud environment's [integration guide](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/) to learn more about the prerequisites and permissions.\n\n### Add an integration\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Cloud & SaaS findings** > **Integrations**.\n2. Select **Connect an integration** or **Add integration**.\n3. Browse the available integrations and select the application you would like to add.\n4. Follow the step-by-step integration instructions in the UI.\n5. To run your first scan, select **Save integration**.\n\nAfter the first scan, CASB will automatically scan your SaaS application or cloud environment on a frequent basis to keep up with any changes. Scan intervals will vary due to each application having their own set of requirements, but the frequency is typically between every 1 hour and every 24 hours.\n\nOnce CASB detects at least one finding, you can [view and manage your findings](https://developers.cloudflare.com/cloudflare-one/cloud-and-saas-findings/manage-findings/).\n\n### Pause an integration\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Cloud & SaaS findings** > **Integrations**.\n2. Find the integration you would like to pause and select **Configure**.\n3. To stop scanning the application, turn off **Scan for findings**.\n4. Select **Save integration**.\n\nYou can resume CASB scanning at any time by turning on **Scan for findings**.\n\n### Delete an integration\n\nWarning\n\nWhen you delete an integration, all keys and OAuth data will be deleted. This means you cannot restore a deleted integration or its scanned data.\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), go to **Cloud & SaaS findings** > **Integrations**.\n2. Find the integration you would like to delete and select **Configure**.\n3. Select **Disenroll**.\n\nTo resume scanning the integration for findings, you will need to [add the integration](#add-an-integration) again.\n\n### Integrate DLP policies\n\nIf you use both Cloudflare CASB and Cloudflare Data Loss Prevention (DLP), you can use DLP to discover if files stored in your SaaS application contain sensitive data. CASB integrations supported by DLP include:\n\n* [Amazon Web Services (AWS) S3](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/aws-s3/)\n* [Box](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/box/)\n* [Dropbox](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/dropbox/)\n* [Google Cloud Platform (GCP) Cloud Storage](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/gcp-cloud-storage)\n* [Google Drive](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/google-workspace/google-drive/)\n* [Microsoft OneDrive](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/microsoft-365/onedrive/)\n* [Microsoft SharePoint](https://developers.cloudflare.com/cloudflare-one/integrations/cloud-and-saas/microsoft-365/sharepoint/)\n\nFor more information, refer to [Scan SaaS applications with DLP](https://developers.cloudflare.com/cloudflare-one/cloud-and-saas-findings/casb-dlp/).\n\n</page>\n\n<page>\n---\ntitle: Layer security methods  Cloudflare Learning Paths\ndescription: Once you have decided on a model (or mixture of models) to secure\n  front door access to your SaaS applications, you can address other common SaaS\n  security areas of concern by layering multiple Cloudflare controls.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/layer-security/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/layer-security/index.md\n---\n\nOnce you have decided on a model (or mixture of models) to secure front door access to your SaaS applications, you can address other common SaaS security areas of concern by layering multiple Cloudflare controls.\n\n## Device posture controls for managed endpoints\n\nYou can control endpoint access to your SaaS applications with device posture controls via either [Access for SaaS](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/sso-front-door/) or [WARP enrollment settings](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-settings/) in Zero Trust. Device posture can determine what constitutes a managed endpoint accessing a SaaS application.\n\nYou can also define what constitutes a healthy or semi-healthy managed endpoint and invoke step-up security policies based on potential security concerns. These controls are separate from the controls enacted for unmanaged endpoints.\n\n## Inline security for unmanaged endpoints\n\nFor unmanaged endpoints, you can deliver selective inline security like upload/download controls, HTTP filtering, and data loss detection/prevention policies in SaaS applications without the need to install agents. You can deliver inline security through Browser Isolation, but it requires a [front door control](https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/sso-front-door/) (such as Access for SaaS) in order to be applied consistently.\n\n## Browser Isolation\n\nCloudflare can deliver isolate SaaS apps in via either the WARP client or static links with Clientless Web Isolation.\n\n### WARP client\n\nWhen your users' devices are enrolled with the WARP client, Cloudflare will transparently isolate browser sessions. In other words, a user's browser will display `example.com`, but Cloudflare will isolate the traffic by rendering it in an isolated browser.\n\n### Clientless Web Isolation\n\nWith [Clientless Web Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/setup/clientless-browser-isolation/), Cloudflare will append a static link to the web address. For example, a user's browser going to `example.com` in an isolated session will display `<your-team-name>.cloudflareaccess.com/browser/https://www.example.com`.\n\nWhen Browser Isolation isolates traffic, Cloudflare can apply the security stack of TLS decryption, HTTP inspection, network inspection, DNS filtering, and DLP policy evaluation to the traffic in the request body. This provides a solution for securing unmanaged endpoint access to sensitive systems and can potentially upgrade traffic from users or services that may have otherwise been deemed as risky. Any method for Browser Isolation attaches the user to your dedicated egress IP addresses so you can apply policies across each method of access consistently.\n\n</page>\n\n<page>\n---\ntitle: SaaS security overview  Cloudflare Learning Paths\ndescription: \"The concept of SaaS (software-as-a-service) security is top of\n  mind for many security organizations but is not explicitly defined. When\n  organizations approach Cloudflare for help securing their SaaS apps, it can\n  mean a number of different things with a number of ideal outcomes. Cloudflare\n  distills SaaS security into three key concepts:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/saas-security-overview/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/saas-security-overview/index.md\n---\n\nThe concept of SaaS (software-as-a-service) security is top of mind for many security organizations but is not explicitly defined. When organizations approach Cloudflare for help securing their SaaS apps, it can mean a number of different things with a number of ideal outcomes. Cloudflare distills SaaS security into three key concepts:\n\n1. Better protection for the front door of your SaaS applications with considerations for both managed and unmanaged endpoint access.\n2. Assurances for the ability to apply inline security tooling. In other words, we ensure the ability to apply restrictions on file uploads/downloads, the ability to access administrative targets, and the application of policies to prevent or detect data loss. Managing distinct policies for hundreds (on average) of SaaS apps means inline security will always meaningfully drift.\n3. Visibility and control for your critical SaaS applications whether or not users are actively engaging with them (also known as out-of-band). This concept becomes most critical when you have limited ability to apply inline policy using TLS inspection and other methods.\n\nCloudflare offers multiple solutions that achieve and sometimes overlap with all three of the defined concepts. Through combinations of Access for SaaS identity proxy, WARP with dedicated IP addresses, Browser Isolation, and CASB API, Cloudflare helps define and address any potential SaaS security goals.\n\n</page>\n\n<page>\n---\ntitle: Single sign-on front door controls  Cloudflare Learning Paths\ndescription: Access for SaaS functions as an identity proxy to add an additional\n  authentication layer to your SaaS apps.\nlastUpdated: 2025-10-24T18:16:28.000Z\nchatbotDeprioritize: false\ntags: SSO\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/sso-front-door/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/secure-saas-applications/sso-front-door/index.md\n---\n\n[Access for SaaS](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/saas-apps/) functions as an identity proxy to add an additional authentication layer to your SaaS apps.\n\nAccess for SaaS integrates directly with your SaaS app using standard protocols (such as SAML) to become the primary enforcement point for user access. Access calls your identity provider (IdP) of choice and uses additional security signals about your users and devices to make policy decisions. Benefits of Access for SaaS include:\n\n* A streamlined experience for users on both managed and unmanaged devices.\n* Application of baseline policies requiring specific concepts such as device posture and endpoint control.\n* Distinct access methodology for contractors.\n* Flexibility to configure multiple SSO vendors simultaneously, freely switch between SSO vendors, and reduce reliance on a single vendor.\n\n### SSO integrations\n\nYou can pair Access for SaaS with the [App Launcher](https://developers.cloudflare.com/cloudflare-one/access-controls/access-settings/app-launcher/) to provide a full replacement to your organization's front door.\n\nSCIM provisioning limitation\n\nAccess for SaaS supports SCIM passthrough in an API-only closed beta. If you require SCIM passthrough, contact your account team.\n\n## Configure your SSO provider\n\nIf you cannot use Access for SaaS for some or all of your SaaS apps, you can accomplish most of the same outcomes through a combination of strong security controls on your managed devices and your [Clientless Web Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/setup/clientless-browser-isolation/) implementation. You can use your existing SSO provider to enforce a strong relationship between Cloudflare and your SaaS applications.\n\n### Policies based on dedicated egress IPs\n\nWith [dedicated egress IPs](https://developers.cloudflare.com/cloudflare-one/traffic-policies/egress-policies/dedicated-egress-ips/), you can set explicit egress locations globally and share these IPs with your SSO provider. With this Zero Trust security approach, your users must meet all of your Cloudflare requirements (such as being enrolled in WARP or Browser Isolation) when they authenticate to your SSO provider. Using your dedicated egress IPs as a control mechanism within your SSO means you can set policies on the basis of which users are subject to security policy and inspection because they are guaranteed to be proxied through Cloudflare.\n\n### Generic IdP multi-factor authentication\n\nSimilar to the dedicated egress IP option, many IdPs support a generic multi-factor authentication (MFA) method. You can use your IdP's generic MFA in conjunction with Cloudflare security policies to make your second factor a Cloudflare Access policy. This policy can check all of the security signals available in Access for SaaS. This method delivers user traffic data to Cloudflare and ensures that users cannot access SaaS applications without first being subject to granular security policy.\n\n</page>\n\n<page>\n---\ntitle: Create a list of IPs or domains  Cloudflare Learning Paths\ndescription: Gateway supports creating lists of IPs, hostnames, or other entries\n  to reference in your policies.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/create-list/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/create-list/index.md\n---\n\nGateway supports creating [lists](https://developers.cloudflare.com/cloudflare-one/reusable-components/lists/) of IPs, hostnames, or other entries to reference in your policies.\n\nIt is likely that you will be onboarding to the Cloudflare platform with some predetermined series of security policies. Maybe you have explicit deny lists based on hostnames, IPs, or another measure that tie to individual users. Maybe some networks can access certain apex records while others cannot.\n\nThe best way to migrate to Cloudflare in a way that will simplify ongoing maintenance is to build as many reusable objects as possible. Not only because that makes policy building simpler, but because as those applications, networks, and services organically change and grow, updates to the lists automatically update everywhere that the lists are applied.\n\n## Create a list from a CSV file\n\nTo test uploading CSV lists, you can download a [sample CSV file](https://developers.cloudflare.com/cloudflare-one/static/list-test.csv) of IP address ranges or copy the following into a file:",
      "language": "unknown"
    },
    {
      "code": "When you format a CSV file for upload:\n\n* Each line should be a single entry that includes a value and an optional description.\n* A header row must be present for Zero Trust to recognize descriptions.\n* Trailing whitespace characters are not allowed.\n* CRLF (Windows) and LF (Unix) line endings are valid.\n\nTo upload the list to Cloudflare One:\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Reusable components** > **Lists**.\n  2. Select **Upload CSV**.\n  3. Next, specify a **List name**, enter an optional description, and choose a **List type**.\n  4. Drag and drop a file into the **CSV file** window, or select a file.\n  5. Select **Create**.\n\n* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Decode the contents of the CSV file and store it as a local value:",
      "language": "unknown"
    },
    {
      "code": "3. Create a list using the [`cloudflare_zero_trust_list`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_list) resource:",
      "language": "unknown"
    },
    {
      "code": "You can now use this list in the policy builder by choosing the *in list* operator.\n\n## Create a list manually\n\n* Dashboard\n\n  1. In [Cloudflare One](https://one.dash.cloudflare.com), go to **Team & Resources** > **Lists**.\n  2. Select **Create manual list**.\n  3. Next, specify a **List name**, enter an optional description, and choose a **List type**.\n  4. Enter your list element manually into the **Add entry** field and select **Add**.\n  5. Select **Save**.\n\n* API",
      "language": "unknown"
    },
    {
      "code": "* Terraform (v5)\n\n  1. Add the following permission to your [`cloudflare_api_token`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/api_token):\n\n     * `Zero Trust Write`\n\n  2. Create a list using the [`cloudflare_zero_trust_list`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/zero_trust_list) resource.\n\n     Example list of IPs:",
      "language": "unknown"
    },
    {
      "code": "Example list of domains:",
      "language": "unknown"
    },
    {
      "code": "You can now use this list in the policy builder by choosing the *in list* operator.\n\nCreate lists in advance\n\nBefore moving on to create security policies, we recommend you create lists for your known domains, hosts, and IP addresses.\n\n</page>\n\n<page>\n---\ntitle: Use indicator feeds to improve security policies  Cloudflare Learning Paths\ndescription: When building DNS, network, or HTTP policies to block malicious\n  activity for your organization, you can use external indicator feeds supplied\n  by Cloudflare and other third-party providers.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/indicator-feeds/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/indicator-feeds/index.md\n---\n\nWhen building DNS, network, or HTTP policies to block malicious activity for your organization, you can use external indicator feeds supplied by Cloudflare and other third-party providers.\n\n## Subscribe to indicator feeds\n\nCloudflare threat intelligence data consists of a data exchange between providers and subscribers.\n\nA provider is an organization that has a set of data that they are interested in sharing with other Cloudflare organizations. Any organization can be a provider. Examples of current providers are Government Cyber Defense groups.\n\nSubscribers can be any Cloudflare customer that wants to secure their environment further by creating rules based on provider datasets. Subscribers must be authorized by a provider. Authorization is granted using the [Grant permission to indicator feed endpoint](https://developers.cloudflare.com/api/resources/intel/subresources/indicator_feeds/subresources/permissions/methods/create/).\n\nTo subscribe to an indicator feed, contact your account team. For more information, refer to [Custom Indicator Feeds](https://developers.cloudflare.com/security-center/indicator-feeds/).\n\n</page>\n\n<page>\n---\ntitle: Order of enforcement  Cloudflare Learning Paths\ndescription: \"Gateway follows a specific order of enforcement as traffic travels\n  through the Cloudflare global network to the Internet:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/order-of-enforcement/\n  md: https://developers.cloudflare.com/learning-paths/secure-internet-traffic/understand-policies/order-of-enforcement/index.md\n---\n\nGateway follows a specific order of enforcement as traffic travels through the Cloudflare global network to the Internet:",
      "language": "unknown"
    },
    {
      "code": "Order of enforcement change on 2025-07-14\n\nOn 2025-07-14, Gateway began evaluating network-level policies before application-level policies and verify the network path to an origin server before accepting a connection. This only affects your policies if you are applying HTTP policies in your account. For example:\n\nComparison of old and new order of enforcement\n\n| | Old order of enforcement | New order of enforcement |\n| - | - | - |\n| **Network Block policy and HTTP Block policy** | Gateway blocks traffic and displays the block page and/or follows the client notification settings on the HTTP policy. | Gateway blocks traffic. Gateway does not display the block page but will follow the client notification settings on the Network policy. |\n| **Network Allow policy and HTTP Block policy** | Gateway blocks traffic and displays the block page and follows the client notification settings on the HTTP policy. | No change. |\n| **Network Block policy and HTTP Allow policy** | Gateway blocks traffic and follows the client notification settings on the Network policy. | No change. |\n\n## Connection establishment\n\nWhen a user connects to a server with Gateway, Gateway first establishes a TCP connection with the destination server on the port the user requested. Because TCP traffic is proxied by Cloudflare, the connection Gateway establishes with the origin is independent from the connection users establish with Gateway. This means Gateway assigns a new source IP and port to the user's connection and no details from the user's TCP handshake are included in the TCP handshake with the origin server.\n\nIf the TCP connection to the destination server is successful, Gateway will apply policies. If Gateway policies allow the connection, Gateway will connect the user to the destination server. If Gateway policies block the connection, Gateway will end the connection and will not send any data between the user and the destination server. If the TCP connection to the destination server is unsuccessful, Gateway will not run any policies and retry TCP connections from the user to the server.",
      "language": "unknown"
    },
    {
      "code": "Connections to Zero Trust will always appear in your [Zero Trust network session logs](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/account/zero_trust_network_sessions/) regardless of connection success. Because Gateway does not inspect failed connections, they will not appear in your [Gateway activity logs](https://developers.cloudflare.com/cloudflare-one/insights/logs/gateway-logs/).\n\n## Priority between policy builders\n\nGateway applies your policies in the following order:\n\n1. DNS policies with selectors evaluated before resolution\n2. Resolver policies (if applicable)\n3. DNS policies with selectors evaluated after resolution\n4. Egress policies (if applicable)\n5. Network policies\n6. HTTP policies\n\nDNS and resolver policies are standalone. For example, if you block a site with a DNS policy but do not create a corresponding HTTP policy, users can still access the site if they know its IP address.\n\n### HTTP/3 traffic\n\nFor proxied [HTTP/3 traffic](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/http3/), Gateway applies your policies in the following order:\n\n1. DNS policies\n2. Network policies\n3. HTTP policies\n\n## Priority within a policy builder\n\n### DNS policies\n\nGateway evaluates DNS policies first in order of DNS resolution, then in [order of precedence](#order-of-precedence).\n\nWhen DNS queries are received, Gateway evaluates policies with pre-resolution selectors, resolves the DNS query, then evaluates policies with post-resolution selectors. This means policies with selectors evaluated before DNS resolution take precedence. For example, the following set of policies will block `example.com`:\n\n| Precedence | Selector | Operator | Value | Action |\n| - | - | - | - | - |\n| 1 | Resolved Country IP Geolocation | is | United States | Allow |\n| 2 | Domain | is | `example.com` | Block |\n\nDespite an explicit Allow policy ordered first, policy 2 takes precedence because the *Domain* selector is evaluated before DNS resolution.\n\nIf a policy contains both pre-resolution and post-resolution selectors, Gateway will evaluate the entire policy after DNS resolution. For information on when each selector is evaluated, refer to the [list of DNS selectors](https://developers.cloudflare.com/cloudflare-one/traffic-policies/dns-policies/#selectors).\n\n### Network policies\n\nGateway evaluates network policies in [order of precedence](#order-of-precedence).\n\n### HTTP policies\n\nGateway applies HTTP policies based on a combination of [action type](https://developers.cloudflare.com/cloudflare-one/traffic-policies/http-policies/#actions) and [order of precedence](#order-of-precedence):\n\n1. All Do Not Inspect policies are evaluated first, in order of precedence.\n2. If no policies match, all Isolate policies are evaluated in order of precedence.\n3. All Allow, Block and Do Not Scan policies are evaluated in order of precedence.\n4. The body of the HTTP request, including Data Loss Prevention (DLP), AV scanning, and file sandboxing, is evaluated.\n\nThis order of enforcement allows Gateway to first determine whether decryption should occur. If a site matches a Do Not Inspect policy, it is automatically allowed through Gateway and bypasses all other HTTP policies.\n\nNote\n\nThe only exception is if you are using [Clientless Web Isolation](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/setup/clientless-browser-isolation/)  all sites within the clientless remote browser are implicitly isolated even if they match a Do Not Inspect policy.\n\nNext, Gateway checks decrypted traffic against your Isolate policies. When a user makes a request which triggers an Isolate policy, the request will be rerouted to a [remote browser](https://developers.cloudflare.com/cloudflare-one/remote-browser-isolation/).\n\nNext, Gateway evaluates all Allow, Block, and Do Not Scan policies. These policies apply to both isolated and non-isolated traffic. For example, if `example.com` is isolated and `example.com/subpage` is blocked, Gateway will block the subpage (`example.com/subpage`) inside of the remote browser.\n\nLastly, Gateway inspects the body of the HTTP request by evaluating it against DLP policies, and running anti-virus scanning and file sandboxing. If DLP Block policies are present, the action Gateway ultimately takes may not match the action it initially logs. For more information, refer to [DLP policy precedence](#dlp-policy-precedence).\n\n### Resolver policies\n\nWhen [resolver policies](https://developers.cloudflare.com/cloudflare-one/traffic-policies/resolver-policies/) are present, Gateway first evaluates any DNS policies with pre-resolution selectors, then routes any DNS queries according to the [order of precedence](#order-of-precedence) of your resolver policies, and lastly evaluates any DNS policies with post-resolution selectors.\n\n### Order of precedence\n\nOrder of precedence refers to the priority of individual policies within the DNS, network, or HTTP policy builder. Gateway evaluates policies in ascending order beginning with the lowest value.\n\nThe order of precedence follows the first match principle. Once traffic matches an Allow or Block policy, evaluation stops and no subsequent policies can override the decision. Therefore, Cloudflare recommends assigning the most specific policies and exceptions with the highest precedence and the most general policies with the lowest precedence.\n\n#### Cloudflare One\n\nIn Cloudflare One, policies are in order of precedence from top to bottom of the list. Policies begin with precedence `1` and count upward. You can modify the order of precedence by dragging and dropping individual policies in the dashboard.\n\n#### Cloudflare API\n\nTo update the precedence of a policy with the Cloudflare API, use the [Update a Zero Trust Gateway rule](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/rules/methods/update/) endpoint to update the `precedence` field.\n\n#### DLP policy precedence\n\nFor Gateway configurations with DLP policies, Gateway will filter and log traffic based on first match, then scan the body of the HTTP request for matching content. Because of the first match principle, Gateway may perform and log a decision for traffic, then perform a contradicting decision. For example, if traffic is first allowed with an Allow HTTP policy, then blocked with a DLP Block policy, Gateway will log the initial Allow action despite ultimately blocking the request.\n\n#### Access applications\n\nIf Gateway traffic is headed to a private IP address protected as an Access application, that traffic will still be evaluated by the destination application's Access policies, even if a Gateway Allow policy matched first. Gateway Block policies that match traffic will terminate any other policy evaluation. This is expected behavior. A Gateway Allow policy does not override or bypass Access policies.\n\nTerraform provider v4 precedence limitation\n\nTo avoid conflicts, version 4 of the Terraform Cloudflare provider applies a hash calculation to policy precedence. For example, a precedence of `1000` may become `1000901`. This can cause errors when reordering policies. To avoid this issue, manually set the precedence of policies created with Terraform using the [Update a Zero Trust Gateway rule](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/rules/methods/update/) endpoint.\n\nTo ensure your precedence is set correctly, Cloudflare recommends [upgrading your Terraform provider to version 5](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/guides/version-5-upgrade).\n\n## Example\n\nSuppose you have a list of policies arranged in the following order of precedence:\n\n* DNS policies:\n\n  | Precedence | Selector | Operator | Value | Action |\n  | - | - | - | - | - |\n  | 1 | Host | is | `example.com` | Block |\n  | 2 | Host | is | `test.example.com` | Allow |\n  | 3 | Domain | matches regex | `.\\` | Block |\n\n* HTTP policies:\n\n  | Precedence | Selector | Operator | Value | Action |\n  | - | - | - | - | - |\n  | 1 | Host | is | `example.com` | Block |\n  | 2 | Host | is | `test2.example.com` | Do Not Inspect |\n\n* Network policies:\n\n  | Precedence | Selector | Operator | Value | Action |\n  | - | - | - | - | - |\n  | 1 | Destination Port | is | `80` | Block |\n  | 2 | Destination port | is | `443` | Allow |\n  | 3 | SNI Domain | is | `test.example.com` | Block |\n\nWhen a user goes to `https://test.example.com`, Gateway performs the following operations:\n\n1. Evaluate DNS request against DNS policies:\n\n   1. Policy #1 does not match `test.example.com`  move on to check Policy #2.\n   2. Policy #2 matches, so DNS resolution is allowed.\n   3. Policy #3 is not evaluated because there has already been an explicit match.\n\n2. Evaluate HTTPS request against network policies:\n\n   1. Policy #1 does not match because port 80 is used for standard HTTP, not HTTPS.\n   2. Policy #2 matches, so the request is allowed and proxied to the upstream server.\n   3. Policy #3 is not evaluated because there has already been an explicit match.\n\n3. Evaluate HTTPS request against HTTP policies:\n\n   1. Policy #2 is evaluated first because Do Not Inspect [always takes precedence](#http-policies) over Allow and Block. Since there is no match, move on to check Policy #1.\n   2. Policy #1 does not match `test.example.com`. Since there are no matching Block policies, the request passes the HTTP filter.\n\nTherefore, the user is able to connect to `https://test.example.com`.\n\n## Precedence calculations\n\nWhen arranging policies in [Cloudflare One](https://one.dash.cloudflare.com/), Gateway automatically calculates the precedence for rearranged policies.\n\nWhen using the API to create a policy, unless the precedence is explicitly defined in the policy, Gateway will assign precedence to policies starting at `1000`. Every time a new policy is added to the bottom of the order, Gateway will calculate the current highest precedence in the account and add a random integer between 1 and 100 to `1000` so that it now claims the maximum precedence in the account. To manually update a policy's precedence, use the [Update a Zero Trust Gateway rule](https://developers.cloudflare.com/api/resources/zero_trust/subresources/gateway/subresources/rules/methods/update/) endpoint. You can set a policy's precedence to any value that is not already in use.\n\nChanging the order within Cloudflare One or API may result in configuration issues when using [Terraform](#manage-precedence-with-terraform).\n\n## Manage precedence with Terraform\n\nYou can manage the order of execution of your Gateway policies using Terraform. With version 5 of the Terraform Cloudflare provider, Gateway users can list their policies in a Terraform file with any desired integer precedence value. Cloudflare recommends starting with a precedence of `1000` and adding extra space between each policy's precedence for any future policies. For example:",
      "language": "unknown"
    },
    {
      "code": "To avoid precedence calculation errors when reordering policies with Terraform, you should move one policy at a time before running `terraform plan` and `terraform apply`. If you use both Terraform and Cloudflare One or API, sync your polices with `terraform refresh` before reordering policies in Terraform. Alternatively, you can set your account to [read-only in Cloudflare One](https://developers.cloudflare.com/cloudflare-one/api-terraform/#set-dashboard-to-read-only), only allowing changes using the API or Terraform.\n\n</page>\n\n<page>\n---\ntitle: How Cloudflare prevents email-based phishing attacks  Cloudflare\n  Learning Paths\ndescription: Cloudflare Email security uses a variety of factors to determine\n  whether a given email message attachment, URL, or specific network traffic is\n  part of a phishing campaign.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/prevent-phishing-attack/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/prevent-phishing-attack/index.md\n---\n\nCloudflare Email security uses a variety of factors to determine whether a given email message attachment, URL, or specific network traffic is part of a phishing campaign.\n\nThese small pattern assessments are dynamic in nature. Cloudflare's automated systems use a combination of factors to clearly distinguish between a valid phishing campaign and benign traffic.\n\nCloudflare's vast global network detects emergent campaign infrastructure and aggregates data for Cloudflare's proprietary analytics engine SPARSE.\n\nSPARSE uses AI and ML models to make effective detections for all types of malicious emails, including Business Email Compromise (BEC).\n\nIn a BEC attack, the attacker falsifies an email message to trick the victim into performing some action - most often transferring money to an account or location the attacker controls.\n\nTo detect these low volume, malicious emails that do not contain malware, malicious links or email attachments, Cloudflare analyzes the email thread, content, sentiment and context via message lexical analysis, subject analysis and sender analysis. Display names are also compared with known executive names for similarity using several matching models.\n\nRefer to [How we detect phish](https://developers.cloudflare.com/email-security/reference/how-we-detect-phish/#sample-attack-types-and-detections) to learn more about additional attack types and detections.\n\n</page>\n\n<page>\n---\ntitle: Protect your organization from phishing attacks  Cloudflare Learning Paths\ndescription: In the early 2000s, Secure Email Gateways (SEGs) were introduced to\n  deal with a growing need around the routing and filtering of email. While SEGs\n  were successful at their mission for many years, their fundamental design has\n  made it impossible for them to keep pace as phishing threats rapidly grow in\n  scope and sophistication.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/protect-from-phishing-attacks/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/protect-from-phishing-attacks/index.md\n---\n\nIn the early 2000s, Secure Email Gateways (SEGs) were introduced to deal with a growing need around the routing and filtering of email. While SEGs were successful at their mission for many years, their fundamental design has made it impossible for them to keep pace as phishing threats rapidly grow in scope and sophistication.\n\nContinuously updating manual rulesets and policies that were originally built for on-prem servers only inflates the amount of time and effort involved in maintaining a SEG. This has resulted in an increase in cost and complexity while still falling short of catching the most dangerous threats, such as business email compromise (BEC) attacks.\n\nAs organizations continue to adopt Microsoft 365 to enhance communication and collaboration for their hybrid workforce, it is crucial to take advantage of Microsoft's native security features while integrating complementary, machine learning-based solutions to automatically block and isolate the most dangerous threats. This strategy not only significantly reduces phishing risk, but also simplifies workflows, minimizing the time and effort needed for ongoing security management.\n\nAnalysts agree that consolidating capabilities to minimize overlapping functionality is helping organizations reduce cost and complexity. However, they also advise organizations to carefully assess native features to ensure they satisfy all use cases. As Microsoft continues to build out its essential email security features, the growing overlap with SEGs has given organizations an opportunity to streamline security operations by leveraging capabilities already included in their E3 or E5 license.\n\nThis shift enables organizations to eliminate complex and costly SEG deployments, redirecting a fraction of that budget to integrate lightweight solutions that effectively address the most dangerous phishing threats. Cloudflare Email security provides an integrated, low-touch solution that augments Microsoft 365 using machine learning threat analysis to automate the detection of BEC and multi-channel attacks.\n\n</page>\n\n<page>\n---\ntitle: What is Cloudflare?  Cloudflare Learning Paths\ndescription: Cloudflare is one of the world's largest connectivity cloud\n  networks. Today, anyone with an Internet presence can have faster and more\n  secure websites and applications thanks to Cloudflare. This includes bloggers,\n  businesses, and even non-profits.\nlastUpdated: 2024-12-09T10:38:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/what-is-cloudflare/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/what-is-cloudflare/index.md\n---\n\nCloudflare is one of the world's largest [connectivity cloud networks](https://blog.cloudflare.com/welcome-to-connectivity-cloud). Today, anyone with an Internet presence can have faster and more secure websites and applications thanks to Cloudflare. This includes bloggers, businesses, and even non-profits.\n\nMillions of Internet properties are on Cloudflare, and our network is growing by tens of thousands each day. Cloudflare powers Internet requests for millions of websites and serves 55 million HTTP requests per second on average.\n\n</page>\n\n<page>\n---\ntitle: What is Email security?  Cloudflare Learning Paths\ndescription: Despite email's importance as a communication method, security and\n  privacy were not built into the The Simple Mail Transfer Protocol (SMTP)\n  protocol. As a result, email is a major attack vector.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/what-is-email-security/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/what-is-email-security/index.md\n---\n\nDespite email's importance as a communication method, security and privacy were not built into the [The Simple Mail Transfer Protocol (SMTP) protocol](https://www.cloudflare.com/learning/email-security/what-is-smtp/). As a result, email is a major attack vector.\n\nEmail security is the process of preventing [email-based](https://www.cloudflare.com/learning/email-security/what-is-email/) cyber attacks and unwanted communications. It spans protecting inboxes from takeover, protecting domains from [spoofing](https://www.cloudflare.com/learning/ssl/what-is-domain-spoofing/), stopping [phishing attacks](https://www.cloudflare.com/learning/access-management/phishing-attack/), preventing fraud, blocking [malware](https://www.cloudflare.com/learning/ddos/glossary/malware/) delivery, and filtering [spam](https://www.cloudflare.com/learning/email-security/how-to-stop-spam-emails/).\n\n</page>\n\n<page>\n---\ntitle: What is a phishing attack?  Cloudflare Learning Paths\ndescription: Phishing is an attempt to steal sensitive data, typically in the\n  form of usernames, passwords, or other important account information. The\n  phisher either uses the stolen information themselves (for instance, to take\n  over the user's accounts with their password), or sells the stolen\n  information.\nlastUpdated: 2024-12-09T10:38:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/what-is-phishing-attack/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/concepts/what-is-phishing-attack/index.md\n---\n\n[Phishing](https://www.cloudflare.com/en-gb/learning/access-management/phishing-attack/) is an attempt to steal sensitive data, typically in the form of usernames, passwords, or other important account information. The phisher either uses the stolen information themselves (for instance, to take over the user's accounts with their password), or sells the stolen information.\n\nPhishing attackers disguise themselves as a reputable source. With an enticing or seemingly urgent request, an attacker lures the victim into providing information, just as a person uses bait while fishing.\n\nPhishing often takes place over email. Phishers either try to trick people into emailing information directly, or link to a webpage they control that is designed to look legitimate (for instance, a fake login page where the victim enters their password).\n\n</page>\n\n<page>\n---\ntitle: Configure auto-moves  Cloudflare Learning Paths\ndescription: \"To configure auto-move events:\"\nlastUpdated: 2025-12-02T17:49:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/enable-auto-moves/configure-auto-moves/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/enable-auto-moves/configure-auto-moves/index.md\n---\n\nTo configure auto-move events:\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com/).\n\n2. Select **Email security**.\n\n3. Select **Settings**.\n\n4. Select **Moves**.\n\n5. Under **Auto-moves**, select **Configure**.\n\n6. Assign actions based on malicious, spoof, suspicious, spam, and bulk dispositions. Select among:\n\n   * **Soft delete - user recoverable**: Moves the message to the user's **Recoverable Items - Deleted** folder. Messages can be recovered by the user.\n   * **Hard delete - admin recoverable**: Completely deletes messages from a user's inbox.\n   * **Move to trash**: Moves messages to the trash or deleted items email folder.\n   * **Move to junk**: Moves the message to the junk or spam folder.\n   * **No action**: Messages stay in the origin folder.\n\n7. Select **Post-delivery** moves:\n\n   * **(Recommended) Post-delivery response**: Enabling this option allows Email security to rescan delivered emails at multiple time intervals for previously unknown phishing sites or campaigns.\n   * **(Recommended) Phish submission response**: Enabling this option allows Email security to move emails that your users reported as phishing and Email security determined to be malicious.\n\n8. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Email dispositions  Cloudflare Learning Paths\ndescription: \"Email security returns five potential verdicts for every email it\n  scans. Review the detections and consider how you would treat them once an\n  auto-move is enabled. Below is an overview of the disposition and\n  recommendation actions by Cloudflare:\"\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/enable-auto-moves/email-dispositions/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/enable-auto-moves/email-dispositions/index.md\n---\n\nEmail security returns five potential verdicts for every email it scans. Review the detections and consider how you would treat them once an auto-move is enabled. Below is an overview of the disposition and recommendation actions by Cloudflare:\n\n| Disposition | Description | Recommendation | |\n| - | - | - | - |\n| MALICIOUS | Traffic invoked multiple phishing verdict triggers, met thresholds for bad behavior, and is associated with active campaigns. | Block | |\n| SUSPICIOUS | Traffic associated with phishing campaigns (and is under further analysis by our automated systems). | Research these messages internally to evaluate legitimacy. | |\n| SPOOF | Traffic associated with phishing campaigns that is either non-compliant with your email authentication policies ([SPF](https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-spf-record/), [DKIM](https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-dkim-record/), [DMARC](https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-dmarc-record/)), or have mismatching Envelope From and Header From values. | Block after investigating (can be triggered by third-party mail services). | |\n| SPAM | Traffic associated with non-malicious, commercial campaigns. | Route to existing Spam quarantine folder. | |\n| BULK | Traffic associated with [Graymail](https://en.wikipedia.org/wiki/Graymail), that falls in between the definitions of SPAM and SUSPICIOUS. For example, a marketing email that intentionally obscures its unsubscribe link. | Monitor or tag | |\n\n</page>\n\n<page>\n---\ntitle: Manage your active directory  Cloudflare Learning Paths\ndescription: Directories are folders to store user data. Email security allows\n  you to manage directories from the Cloudflare dashboard.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/active-directory-sync/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/active-directory-sync/index.md\n---\n\nDirectories are folders to store user data. Email security allows you to manage directories from the Cloudflare dashboard.\n\nTo manage a Microsoft directory:\n\n1. Log in to [Zero Trust ](https://one.dash.cloudflare.com/).\n2. Select **Email security**.\n3. Select **Directories**.\n4. Under **Directory name**, select **MS directory**.\n5. From here, you can manage **Groups** or **Users** directories.\n\nEmail security allows you to view and manage your groups directory and their [impersonation registry](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/impersonation-registry/). When a group is added to the registry, all members are registered by default.\n\nTo manage your group directory, on the **MS directory** page, select **Groups**.\n\nTo add a single group to the registry:\n\n1. Select the group name you want to add.\n2. Select the three dots > **Add to registry**.\n\nTo add multiple groups to the registry at once:\n\n1. Select the group names you want to add to the registry.\n2. Select the **Action** dropdown list.\n3. Select **Add to registry**.\n\nIn addition, Email security allows you to:\n\n* [Remove groups from the registry](https://developers.cloudflare.com/cloudflare-one/email-security/directories/manage-integrated-directories/manage-groups-directory/#remove-groups-from-registry).\n* [Filter the impersonation registry](https://developers.cloudflare.com/cloudflare-one/email-security/directories/manage-integrated-directories/manage-groups-directory/#filter-impersonation-registry).\n* [Manage users in your directory](https://developers.cloudflare.com/cloudflare-one/email-security/directories/manage-integrated-directories/manage-users-directory/).\n\n</page>\n\n<page>\n---\ntitle: Enable audit logs  Cloudflare Learning Paths\ndescription: With Email security, you can enable logs to review actions\n  performed on your account.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/audit-logs/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/audit-logs/index.md\n---\n\nWith Email security, you can enable logs to review actions performed on your account.\n\nTo enable audit logs:\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/).\n2. Select **Analytics & Logs** > **Logpush**.\n3. Select **Audit logs**.\n4. Under **Configure logpush job**:\n\n* **Job name**: Enter the job name.\n\n* **If logs match**: Select Filtered logs:\n\n  * **Field**: Choose `ResourceType`.\n  * **Operator**: Choose `starts with`.\n  * **Value**: Enter `email_security`.\n\n1. Select **Submit**.\n\n</page>\n\n<page>\n---\ntitle: Create allow policies  Cloudflare Learning Paths\ndescription: Email security allows you to configure allow policies. An allow\n  policy exempts messages that match certain patterns from normal detection\n  scanning.\nlastUpdated: 2025-12-02T17:49:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/create-allow-policies/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/create-allow-policies/index.md\n---\n\nEmail security allows you to configure allow policies. An allow policy exempts messages that match certain patterns from normal detection scanning.\n\nYou can choose how Email security will handle messages that match your criteria:\n\n* **Trusted Sender**: Messages will bypass all [detections](https://developers.cloudflare.com/cloudflare-one/email-security/reference/dispositions-and-attributes/) and link following. Typically, it only applies to phishing simulations from vendors such as KnowBe4. Many emails contain links in them. Some of these could be links to surveys, phishing simulations and other trackable links. By marking a message as a Trusted Sender, Email security will not scan any attachments from the sender and will not attempt to open the links in the emails.\n* **Exempt Recipient**: Messages will be exempt from all Email security [detections](https://developers.cloudflare.com/cloudflare-one/email-security/reference/dispositions-and-attributes/) intended for recipients matching this pattern (email address or regular expression only). Typically, this only applies to submission mailboxes for user reporting to security.\n* **Accept Sender**: Messages will exempt messages from the `SPAM`, `SPOOF`, and `BULK` [dispositions](https://developers.cloudflare.com/cloudflare-one/email-security/reference/dispositions-and-attributes/) (but not `MALICIOUS` or `SUSPICIOUS`). Commonly used for external domains and sources that send mail on behalf of your organization, such as marketing emails or internal tools.\n\n## Configure allow policies\n\nTo configure allow policies:\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com/).\n\n2. Select **Email security**.\n\n3. Select **Settings**, then go to **Detection settings** > **Allow policies**.\n\n4. On the **Detection settings** page, select **Add a policy**.\n\n5. On the **Add an allow policy** page, enter the policy information:\n\n   * **Input method**: Choose between **Manual input**, and **Uploading an allow policy**:\n\n     * **Manual input**:\n\n       * **Action**: Select one of the following to choose how Email security will handle messages that match your criteria:\n\n         * **Trust sender**: Messages will bypass all detections and link following.\n         * **Exempt recipient**: Message to this recipient will bypass all detections.\n         * **Accept sender**: Messages from this sender will be exempted from Spam, Spoof, and Bulk dispositions.\n\n     * **Rule type**: Specify the scope of your policy. Choose one of the following:\n\n       * **Email addresses**: Must be a valid email.\n       * **IP addresses**: Can only be IPv4. IPv6 and CIDR are invalid entries.\n       * **Domains**: Must be a valid domain.\n       * **Regular expressions**: Must be valid Java expressions. Regular expressions are matched with fields related to the sender email address (envelope from, header from, reply-to), the originating IP address, and the server name for the email.\n\n     * **(Recommended) Sender verification**: This option enforces DMARC, SPF, or DKIM authentication. If you choose to enable this option, Email security will only honor policies that pass authentication.\n       * **Notes**: Provide additional information about your allow policy.\n\n   * **Uploading an allow policy**: Upload a file no larger than 150 KB. The file can only contain `Pattern`, `Notes`, `Verify Email`, `Trusted Sender`, `Exempt Recipient`, and `Acceptable Sender` fields. The first row must be a header row.\n\n6. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Add user to the impersonation registry  Cloudflare Learning Paths\ndescription: Attackers often try to impersonate executives within an\n  organization when sending malicious emails (with requests about banking\n  information, trade secrets, and more), which is known as a Business Email\n  Compromise (BEC) attack.\nlastUpdated: 2025-12-02T17:49:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/impersonation-registry/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/impersonation-registry/index.md\n---\n\nAttackers often try to impersonate executives within an organization when sending malicious emails (with requests about banking information, trade secrets, and more), which is known as a [Business Email Compromise (BEC)](https://www.cloudflare.com/en-gb/learning/email-security/business-email-compromise-bec/) attack.\n\nThe impersonation registry protects against these attacks by looking for spoofs of known key users in an organization. Information about key users you either synced with your directory or entered manually in the dashboard is used by Email security to run enhanced scan techniques and find these spoofed emails.\n\nTo add a user to the impersonation registry:\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com/).\n\n2. Select **Email security**.\n\n3. Select **Settings** > **Impersonation registry**.\n\n4. Select **Add a user**.\n\n5. Select **Input method**: Choose between **Manual input**, **Upload manual list**, and **Select from existing directories**:\n\n   * **Manual input**: Enter the following information:\n\n     * **User info**: enter a valid **Display name**.\n\n     * **User email**: Enter one of the following:\n\n       * **Email address**: Enter all known email addresses, separated by a comma.\n       * **Regular expressions**: Must be valid Java expressions.\n\n   * **Upload manual list**: You can upload a file no larger than 150 KB containing all variables of potential emails. The file must contain `Display_Name` and `Email`, and the first row must be the header row.\n\n   * **Select from existing directories**:\n\n     * **Select directory**: Select your directory.\n     * **Add users or groups**: Choose the users or groups you want to register.\n\n6. Select **Save**.\n\nFor more information on how to edit and remove users, refer to [Impersonation Registry](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/impersonation-registry/#edit-users).\n\n</page>\n\n<page>\n---\ntitle: Report phish  Cloudflare Learning Paths\ndescription: Before deploying Email security to production, you will have to\n  consider reporting any phishing attacks, evaluating which disposition to\n  assign a specific message, and using different screen criteria to search\n  through your inbox.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/report-phish/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/report-phish/index.md\n---\n\nBefore deploying Email security to production, you will have to consider reporting any phishing attacks, evaluating which disposition to assign a specific message, and using different screen criteria to search through your inbox.\n\nPhishNet is an add-in button that helps users to submit phish samples missed by Email security detection.\n\nTo set up PhishNet O365:\n\n1. Log in to the Microsoft admin panel. Go to **Microsoft 365 admin center** > **Settings** > **Integrated Apps**.\n2. Select **Upload custom apps**.\n3. Choose **Provide link to manifest file** and paste the following URL:",
      "language": "unknown"
    },
    {
      "code": "1. Verify and complete the wizard.\n\n</page>\n\n<page>\n---\ntitle: Set additional detections  Cloudflare Learning Paths\ndescription: \"Email security allows you to configure the following additional detections:\"\nlastUpdated: 2025-12-02T17:49:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/set-additional-detections/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/configure-email-security/set-additional-detections/index.md\n---\n\nEmail security allows you to configure the following additional detections:\n\n* [Domain age](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/additional-detections/#configure-domain-age)\n* [Blank email detection](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/additional-detections/#configure-blank-email-detection)\n* [Automated Clearing House (ACH)](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/additional-detections/#configure-ach-change-from-free-email-detection) change from free email detection.\n* [HTML attachment email detection](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/additional-detections/#configure-html-attachment-email-detection)\n\nTo configure additional detections:\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com/).\n2. Select **Email security**.\n3. Select **Settings**.\n4. On the Settings page, go to **Detection settings** > **Additional detections**, and select **Edit**.\n\n## Configure domain age\n\nThe domain age is the time since the domain has been registered.\n\nTo configure a domain age:\n\n1. On the **Edit additional detections** page:\n\n   * Select **Malicious domain age**: Controls the threshold for a malicious disposition. Maximum of 100 days.\n   * Select **Suspicious domain age**: Controls the threshold for a suspicious disposition. Maximum of 100 days.\n\n2. Select **Save**.\n\n## Configure blank email detection\n\nBlank email detection detects emails with blank bodies and assigns a default disposition. You can choose between **Malicious** and **Suspicious** as dispositions.\n\nTo enable blank email detection:\n\n1. On the **Edit additional detections** page, enable **Blank email detection**.\n2. Choose between **Malicious** and **Suspicious**.\n3. Select **Save**.\n\n## Configure ACH change from free email detection\n\n[Automated Clearing House (ACH)](https://en.wikipedia.org/wiki/Automated_clearing_house) is a banking term related to direct deposits. ACH change from free email detection detects payroll inquiries or change requests from free email domains and assigns a default disposition. You can choose between **Malicious** and **Suspicious** as dispositions.\n\nTo enable ACH change from free email detection:\n\n1. On the **Edit additional detections** page, enable **ACH change from free email detection**.\n2. Choose between **Malicious** and **Suspicious**.\n3. Select **Save**.\n\n## Configure HTML Attachment Email Detection\n\nHTML attachment email detection detects HTM and HTML attachments in emails and assigns a default disposition.\n\nTo enable HTML attachment email detection:\n\n1. On the **Edit additional detections** page, enable **HTML attachment email detection**.\n2. Choose between **Malicious** and **Suspicious**.\n3. Select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Monitor detections  Cloudflare Learning Paths\ndescription: Spam and Malicious emails are blocked outright by Email security,\n  but Suspicious and Spoof dispositions should be monitored. Suspicious messages\n  should be investigated by a security analyst to determine the legitimacy of\n  the message.\nlastUpdated: 2025-11-05T17:19:20.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/monitor-your-inbox/monitor-detections/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/monitor-your-inbox/monitor-detections/index.md\n---\n\nSpam and Malicious emails are blocked outright by Email security, but Suspicious and Spoof dispositions should be monitored. Suspicious messages should be investigated by a security analyst to determine the legitimacy of the message.\n\n[PhishGuard](https://developers.cloudflare.com/cloudflare-one/email-security/phishguard/) (Cloudflare's managed email security service) can review these messages for you and move them from the end user inbox if they are deemed malicious.\n\nMessages that receive a Spoof disposition should be investigated because it signals that the traffic is either non-compliant with your email authentication process [SPF](https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-spf-record/), [DKIM](https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-dkim-record/), [DMARC](https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-dmarc-record/), or has a mismatching Envelope From and Header From value.\n\nIn most cases, a Spoof disposition is triggered by a legitimate third-party mail service. If you determine that the Spoofed email is a legitimate business use case, you can either:\n\n* Update your email authentication records.\n* Add an acceptable sender [allow policy](https://developers.cloudflare.com/cloudflare-one/email-security/settings/detection-settings/allow-policies/) to exempt messages from the Spam, Spoof, or Bulk disposition, but not Malicious or Suspicious, so the content of the message can still be monitored.\n\n## Search email messages\n\nEmail security offers a variety of ways for you to better examine and understand your message traffic:\n\nYou can search for emails that have been processed by Email security, whether they are marked with a [detection disposition](https://developers.cloudflare.com/email-security/reference/dispositions-and-attributes/) or not.\n\nThere are three ways for searching emails:\n\n* Popular screen: A popular screen allows you to view messages based on common pre-defined criteria.\n* Regular screen: A regular screen allows you to investigate your inbox by inserting a term to screen across all criteria.\n* Advanced screen: The advanced screen criteria gives you the option to narrow message results based on specific criteria. The advanced screen has several options (such as keywords, subject keywords, sender domain, and more) to scan your inbox.\n\nAdditional information on search can be found on the [Screen criteria](https://developers.cloudflare.com/cloudflare-one/email-security/investigation/search-email/#screen-criteria) documentation.\n\n### Export messages\n\nWith Email security, you can export messages to a CSV file. Via the dashboard, you can export up to 1,000 rows. If you want to export all messages, you can use the [API](https://developers.cloudflare.com/api/resources/email_security/subresources/investigate/methods/get/).\n\n</page>\n\n<page>\n---\ntitle: Phish submissions  Cloudflare Learning Paths\ndescription: While Email security offers industry leading detection efficacy due\n  to Cloudflare's Threat Intelligence, Preemptive Threat Hunting (actor and\n  campaign infrastructure hunting with 8B, plus campaign threat signals assessed\n  every day) and ML-Based Detection Models (Trust Graphs Computer Vision,\n  Sentiment/Thread/Structural Analysis, Industry/Natural Language Understanding\n  Modeling) false negatives and false positive can occur.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/monitor-your-inbox/phish-submissions/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/monitor-your-inbox/phish-submissions/index.md\n---\n\nWhile Email security offers industry leading detection efficacy due to Cloudflare's Threat Intelligence, Preemptive Threat Hunting (actor and campaign infrastructure hunting with 8B, plus campaign threat signals assessed every day) and ML-Based Detection Models (Trust Graphs Computer Vision, Sentiment/Thread/Structural Analysis, Industry/Natural Language Understanding Modeling) false negatives and false positive can occur.\n\nThere are two different ways to [submit a phish](https://developers.cloudflare.com/cloudflare-one/email-security/settings/phish-submissions/) sample:\n\n* User submission:\n\n  * Submitted directly by the end user, and used with phish submission buttons. To learn more about user-submitted phish, refer to [PhishNet for Microsoft O365](https://developers.cloudflare.com/cloudflare-one/email-security/settings/phish-submissions/#phishnet-o365).\n  * User submissions can create another challenge for your organization. While it is important for end users to be vigilant and report what they believe may be a phishing email, they are often wrong. About 90% of the time, when an end user reports a missed phishing email, they are mistaken. This puts an extra burden on busy security teams as they sift through end user reports. The PhishGuard team at Cloudflare can solve this problem for your organization by reviewing end user submissions for you.\n\n* Admin submission:\n\n  * To be used when IT administrators or security teams submit to Email security. Submit original phish samples as an attachment in EML format to the appropriate team submission address.\n  * Within the Email security dashboard, Phish submissions will allow you to have a full understanding of what reclassification has been made and what the outcomes of those submissions are.\n\n</page>\n\n<page>\n---\ntitle: PhishGuard  Cloudflare Learning Paths\ndescription: \"PhishGuard serves as an extension of your Security Operations team\n  with dedicated Email security technical resources providing real-time\n  monitoring of your email environment. The Active Defense Service provides:\"\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/monitor-your-inbox/phishguard/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/monitor-your-inbox/phishguard/index.md\n---\n\n[PhishGuard](https://developers.cloudflare.com/cloudflare-one/email-security/phishguard/) serves as an extension of your Security Operations team with dedicated Email security technical resources providing real-time monitoring of your email environment. The Active Defense Service provides:\n\n* Customized notification and responses for fraud and insider threats.\n* Reclassification of messages if the disposition is incorrect.\n* PhishGuard monitors and reviews Suspicious email traffic.\n* Quarantine and auto-move of identified threats.\n* Tailored threat hunting for your email environment.\n* Custom detections.\n\nAs a PhishGuard customer, the following service offerings should be enabled:\n\n* Escalation contacts must be configured in the Email security dashboard: This allows for email reports to be delivered regarding high risk items identified and responded to by the team.\n* Auto-moves should be enabled and configured for quarantine of identified items: Malicious should be prioritized, but configuring Spam for a move to junk/trash or even soft delete may also be highly useful to the client.\n\nRefer to the [PhishGuard](https://developers.cloudflare.com/cloudflare-one/email-security/phishguard/) documentation to learn more about this add-on service.\n\n</page>\n\n<page>\n---\ntitle: Create an Email security account  Cloudflare Learning Paths\ndescription: To create your Email security account, you will need the\n  alphanumeric string on the URL when logged in to the Cloudflare dashboard.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/create-email-security-account/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/create-email-security-account/index.md\n---\n\nTo create your Email security account, you will need the alphanumeric string on the URL when logged in to the Cloudflare dashboard.\n\nIf you do not have a Cloudflare account, you can create one for free by referring to the [Cloudflare sign-up page](https://dash.cloudflare.com/sign-up).\n\nOnce you have created your account, your account team will create an Email security account for you.\n\nTo establish your tenant, you will need the following information:\n\n* Average monthly inbound message volume\n* Number of active email users\n* At least one domain\n* Admin email address\n\n</page>\n\n<page>\n---\ntitle: Deployment models  Cloudflare Learning Paths\ndescription: While there are multiple deployment methods, the easiest way to get\n  started with Email security is via the API deployment method.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/deployment-models/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/deployment-models/index.md\n---\n\nWhile there are multiple deployment methods, the easiest way to get started with Email security is via the API deployment method.\n\nWhen you choose the [API deployment](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/api/), Email security can both scan and take actions on emails after they have reached a user's inbox.\n\nWith a [Journaling setup](https://developers.cloudflare.com/cloudflare-one/email-security/setup/post-delivery-deployment/bcc-journaling/journaling-setup/m365-journaling/) alone without API integration, Email security can only scan emails after it has reached a user's inbox.\n\n</page>\n\n<page>\n---\ntitle: Initial login  Cloudflare Learning Paths\ndescription: Once your tenant is created by your account team, you will receive\n  an email that grants you access to the Email security platform.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/initial-login/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/initial-login/index.md\n---\n\nOnce your tenant is created by your account team, you will receive an email that grants you access to the Email security platform.\n\nMulti-factor authentication is required, so you will need an authenticator tool to set up your second factor prior to gaining access. Scan the QR code, set up your second factor, create a new password, and enter the Email security portal.\n\n</page>\n\n<page>\n---\ntitle: Prerequisites  Cloudflare Learning Paths\ndescription: To make the most of this learning path, make sure you have access\n  to Microsoft 365.\nlastUpdated: 2024-12-09T10:38:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/prerequisites/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/prerequisites/index.md\n---\n\nTo make the most of this learning path, make sure you have access to Microsoft 365.\n\n</page>\n\n<page>\n---\ntitle: Recommended deployment model  Cloudflare Learning Paths\ndescription: An API deployment model with Email security has multiple benefits\n  for Microsoft 365 Customers.\nlastUpdated: 2025-10-27T15:00:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/recommended-deployment-model/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/recommended-deployment-model/index.md\n---\n\nAn API deployment model with Email security has multiple benefits for Microsoft 365 Customers.\n\nThe API deployment with Email security offers:\n\n* Easy protection for complex email architectures, without requiring any change to mail flow operations.\n* Agentless deployment for Microsoft 365.\n* Office 365 directory integration to retrieve user and group information and prevent user impersonation.\n\n![Microsoft 365 API deployment diagram](https://developers.cloudflare.com/_astro/ms365-api-deployment.1XiiRyde_ZkHHdj.webp)\n\n</page>\n\n<page>\n---\ntitle: Set up Microsoft Graph API  Cloudflare Learning Paths\nlastUpdated: 2025-12-02T17:49:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/setup-ms-graph-api/\n  md: https://developers.cloudflare.com/learning-paths/secure-o365-email/get-started/setup-ms-graph-api/index.md\n---\n\n1. Log in to [Cloudflare One](https://one.dash.cloudflare.com/).\n\n2. Select **Email security**.\n\n3. Select **Monitoring**.\n\n4. Enable **Microsoft Integration**:\n\n   1. **Name integration**: Add your integration name, then select **Continue**.\n\n   2. **Authorize integration**:\n\n      * Select **Authorize**. Selecting **Authorize** will take you to the Microsoft Sign in page where you will have to enter your email address.\n      * Once you enter your email address, select **Next**.\n      * After selecting **Next**, the system will show a dialog box with a list of requested permissions. Select **Accept** to authorize Email security. Upon authorization, you will be redirected to a page where you can review details and enroll integration.\n\n   3. **Review details**: Review your integration details, then:\n\n      * Select **Complete Email security set up** where you will be able to connect your domains and configure auto-moves.\n      * Select **Continue to Email security**.\n\n</page>\n\n<page>\n---\ntitle: Analytics  Cloudflare Learning Paths\ndescription: Use the Workers Analytics Engine to send unlimited-cardinality data\n  from your Worker to a time-series database. Query it with SQL.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/performance/analytics/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/performance/analytics/index.md\n---\n\n## Workers Analytics Engine\n\nUse the [Workers Analytics Engine](https://developers.cloudflare.com/analytics/analytics-engine/) to send unlimited-cardinality data from your Worker to a time-series database. Query it with SQL.\n\n## Account and zone analytics\n\nUse [Account and zone analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/) to provide details about the requests and traffic related to your Cloudflare accounts and zones.\n\n## Cloudflare Network Analytics\n\nUse [Cloudflare Network Analytics](https://developers.cloudflare.com/analytics/network-analytics/) to provide near real-time visibility into network and transport-layer traffic patterns and DDoS attacks.\n\n## GraphQL Analytics API\n\nUse the [GraphQL Analytics API](https://developers.cloudflare.com/analytics/graphql-api/) to provide\\ all of your performance, security, and reliability data from one endpoint. Select exactly what you need, from one metric for a domain to multiple metrics aggregated for your account.\n\n</page>\n\n<page>\n---\ntitle: Caching  Cloudflare Learning Paths\ndescription: By default, Cloudflare caches static content such as images, CSS,\n  and JavaScript. However, you can extend Cloudflare caching to work with HTML\n  by creating custom Cache Rules.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/performance/caching/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/performance/caching/index.md\n---\n\n## Optimize caching\n\nBy default, Cloudflare [caches static content](https://developers.cloudflare.com/cache/concepts/default-cache-behavior/) such as images, CSS, and JavaScript. However, you can extend Cloudflare caching to work with HTML by creating custom [Cache Rules](https://developers.cloudflare.com/cache/how-to/cache-rules/).\n\n### Cache more requests\n\n1. In the Cloudflare dashboard, go to the **Caching** > **Cache Rules** page.\n\n   [Go to **Cache Rules**](https://dash.cloudflare.com/?to=/:account/:zone/caching/cache-rules)\n\n2. Select **Create rule**.\n\n3. For When incoming requests match, enter either your entire website or a specific path on your application, based on the Hostname or URI Path. Refer to the [available fields](https://developers.cloudflare.com/cache/how-to/cache-rules/settings/#fields).\n\n4. For Cache eligibility, define how these requests should be cached and for how long. Refer to the available [cache eligibility settings](https://developers.cloudflare.com/cache/how-to/cache-rules/settings/#eligible-for-cache-settings).\n\n5. You can then monitor the effectiveness of your cache settings using [Cache Analytics](https://developers.cloudflare.com/cache/performance-review/cache-analytics/) and update your configuration according to our [Cache performance guide](https://developers.cloudflare.com/cache/performance-review/cache-performance/).\n\n### Advanced cache optimizations\n\n* [Custom Cache Keys](https://developers.cloudflare.com/cache/how-to/cache-keys/) allows you to precisely set the cacheability setting for any resource.\n* [Origin Cache Control](https://developers.cloudflare.com/cache/concepts/cache-control/) can be used to let the Cache-Control headers tell Cloudflare how to handle content from the origin server.\n\n## Tiered Cache\n\n[Tiered Cache](https://developers.cloudflare.com/cache/how-to/tiered-cache/) uses the size of Cloudflare's network to reduce requests to customer origin servers by dramatically increasing cache hit ratios.\n\nIt works by dividing Cloudflare's data centers into a hierarchy of lower-tiers and upper-tiers. If content is not cached in lower-tier data centers (generally the ones closest to a visitor), the lower-tier requests an upper-tier for the content. If the upper-tier does not have the content, only the upper-tier will initiate a request to the origin. This practice improves bandwidth efficiency by limiting the number of Cloudflare data centers that can ask the origin for content.\n\nRefer to [Enable Tiered Cache](https://developers.cloudflare.com/cache/how-to/tiered-cache/#enable-tiered-cache) to get started.\n\n### Cache Reserve\n\n[Cache Reserve](https://developers.cloudflare.com/cache/advanced-configuration/cache-reserve/) is a large, persistent data store implemented on top of [R2](https://developers.cloudflare.com/r2/).\n\nWith a single click in the dashboard, your cacheable content will be written to Cache Reserve. In the same way that Tiered Cache builds a hierarchy of caches between your visitors and your origin, Cache Reserve serves as the ultimate [upper-tier cache](https://developers.cloudflare.com/cache/how-to/tiered-cache/) that will reserve storage space for your assets for as long as you want.\n\nThis ensures that your content is served from cache longer, shielding your origin from unneeded egress fees.\n\n## Cloudflare Waiting Room\n\n[Cloudflare Waiting Room](https://developers.cloudflare.com/waiting-room/) allows you to route excess users of your website to a customized waiting room, helping preserve customer experience and protect origin servers from being overwhelmed with requests.\n\n## Use Cloudflare IP addresses\n\nTake action to prevent attacks to your application during peak season by configuring your firewall to only accept traffic from Cloudflare IP addresses. By only allowing [Cloudflare IPs](https://www.cloudflare.com/ips), you can prevent attackers from bypassing Cloudflare and sending requests directly to your origin.\n\nRefer to [Cloudflare IP addresses](https://developers.cloudflare.com/fundamentals/concepts/cloudflare-ip-addresses/) for more information.\n\n## Monitor traffic\n\nYou can use the Cloudflare dashboard to closely monitor the traffic on your domain and fine-tune your cache and security settings accordingly.\n\n### Zone and Account analytics\n\n[Cloudflare zone analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/zone-analytics/) gives you access to a wide range of metrics, collected at the website or domain level.\n\n[Cloudflare account analytics](https://developers.cloudflare.com/analytics/account-and-zone-analytics/account-analytics/) lets you access a wide range of aggregated metrics from all the sites under a specific Cloudflare account.\n\n### Security Analytics and Security Events\n\n[Security Analytics](https://developers.cloudflare.com/waf/analytics/security-analytics/) displays information about all incoming HTTP requests for your domain, including requests not handled by Cloudflare security products.\n\nYou can also use the [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/) to review mitigated requests and tailor your security configurations.\n\n### Cache Analytics\n\nYou can use [Cache Analytics](https://developers.cloudflare.com/cache/performance-review/cache-analytics/) to improve site performance or reduce origin web server traffic. Cache Analytics helps determine if resources are missing from cache, expired, or ineligible for caching.\n\n</page>\n\n<page>\n---\ntitle: Logs  Cloudflare Learning Paths\ndescription: Use Logpush to push your request or event logs to your cloud\n  service provider using Logpush, which can be configured via the Cloudflare\n  dashboard or API.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/performance/logs/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/performance/logs/index.md\n---\n\n## Logpush\n\nUse [Logpush](https://developers.cloudflare.com/logs/logpush/) to push your request or event logs to your cloud service provider using Logpush, which can be configured via the Cloudflare dashboard or API.\n\n## Instant Logs\n\nUse [Instant Logs](https://developers.cloudflare.com/logs/instant-logs/) to view HTTP request logs instantly in the Cloudflare dashboard or the CLI.\n\n## Logs Engine\n\nUse the [Logs Engine](https://developers.cloudflare.com/logs/r2-log-retrieval/) to store your logs in R2 and query them directly.\n\n## Log Explorer\n\nUse the [Log Explorer](https://developers.cloudflare.com/log-explorer/) to store and explore your Cloudflare logs directly within the Cloudflare dashboard or API.\n\n</page>\n\n<page>\n---\ntitle: Custom pages  Cloudflare Learning Paths\ndescription: Design your custom HTML page and host it online anywhere. Once\n  published, Cloudflare will use the customized page instead of serving our\n  standard page to your visitors.\nlastUpdated: 2025-11-10T11:55:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/concepts/custom-pages/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/concepts/custom-pages/index.md\n---\n\nDesign your custom HTML page and host it online anywhere. Once published, Cloudflare will use the customized page instead of serving our standard page to your visitors.\n\nNote\n\nWe encourage you to customize every page to provide a consistent branding experience for your users. You can also [turn on Origin Error Pages](https://developers.cloudflare.com/rules/custom-errors/#error-pages) for 5XX errors (except errors `520`-`527`).\n\nPages you can customize:\n\n* WAF block\n* IP/Country block\n* IP/Country challenge\n* 500 class errors\n* 1000 class errors\n* Managed challenge / I'm Under Attack Mode\n* Rate limiting block\n\nOlder error page types\n\nYou can only customize the error pages for the following error page types if you have customized their error pages in the past:\n\n* Interactive Challenge\n* JavaScript Challenge\n\nThese types of challenges are being discouraged in favor of managed challenges.\n\n</page>\n\n<page>\n---\ntitle: Block user agents and lock zones  Cloudflare Learning Paths\ndescription: User Agent (UA) Blocking rules match against specific User-Agent\n  request headers sent by the browser or application accessing your site. UA\n  rules are applied against the entire domain, and after a rule is triggered,\n  you can decide which action to take against the visitor.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/block-agents-lock-zones/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/block-agents-lock-zones/index.md\n---\n\n[User Agent (UA) Blocking](https://developers.cloudflare.com/waf/tools/user-agent-blocking/) rules match against specific User-Agent request headers sent by the browser or application accessing your site. UA rules are applied against the entire domain, and after a rule is triggered, you can decide which action to take against the visitor.\n\nActions:\n\n* Block: Ensures that an IP address will never be allowed to access your site\n* CAPTCHA Challenge: Rules will be shown a CAPTCHA before allowed access\n* Javascript Challenge: Rules will be shown 5 second javascript confirmation\n\n## Zone Lockdown\n\n[Zone Lockdown](https://developers.cloudflare.com/waf/tools/zone-lockdown/) rules allow you to define paths and only allow specific, trusted IPs to those paths. Any requests to those paths from non-whitelisted IPs will be automatically blocked with an 1106 HTTP code. This ability is particularly useful for locking down administrative or staging portions of your application.\n\n</page>\n\n<page>\n---\ntitle: Confirm account security  Cloudflare Learning Paths\ndescription: Review the list below for guidance on securing your account.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/confirm-account-security/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/confirm-account-security/index.md\n---\n\nReview the list below for guidance on securing your account.\n\n* [Add abuse contact](https://developers.cloudflare.com/fundamentals/account/account-security/abuse-contact/)\n* [Allow Cloudflare access](https://developers.cloudflare.com/fundamentals/account/account-security/cloudflare-access/)\n* [Leaked Password Notifications](https://developers.cloudflare.com/fundamentals/account/account-security/leaked-password-notifications/)\n* [Review audit logs - v1](https://developers.cloudflare.com/fundamentals/account/account-security/review-audit-logs/)\n* [Audit Logs - version 2 (beta)](https://developers.cloudflare.com/fundamentals/account/account-security/audit-logs/)\n* [Secure compromised account](https://developers.cloudflare.com/fundamentals/account/account-security/secure-a-compromised-account/)\n* [Set up SSO](https://developers.cloudflare.com/fundamentals/manage-members/dashboard-sso/)\n* [Manage active sessions](https://developers.cloudflare.com/fundamentals/account/account-security/manage-active-sessions/)\n* [SCIM provisioning](https://developers.cloudflare.com/fundamentals/account/account-security/scim-setup/)\n* [Zone holds](https://developers.cloudflare.com/fundamentals/account/account-security/zone-holds/)\n\n</page>\n\n<page>\n---\ntitle: Control domain access  Cloudflare Learning Paths\ndescription: IP Access Rules specify an action based on the origin of your user\n  across a single domain or all of the domains in your account.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/control-domain-access/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/control-domain-access/index.md\n---\n\n[IP Access Rules](https://developers.cloudflare.com/waf/tools/ip-access-rules/) specify an action based on the origin of your user across a single domain or all of the domains in your account.\n\nIP Access Rules can be applied based on:\n\n* IPv4 address or range: Specified in CIDR notation as `/16` or `/24`\n* IPv6 address or range: Specified in CIDR notation as `/32`, `/48`, `/64`\n* ASN\n* Country or the Tor network\n\nNote\n\nWe recommend locking down your origin with an Access Control List (ACL) which only allows [Cloudflare IPs](http://www.cloudflare.com/ips).\n\nActions:\n\n* Block: Ensures that an IP address will never be allowed to access your site.\n* CAPTCHA Challenge: Rules will be shown a CAPTCHA before allowed access.\n* Javascript Challenge: Rules will be shown a five second javascript confirmation.\n* Allowlist: Ensures that an IP address will never be blocked from accessing your site. This supersedes any Cloudflare security profile.\n\nNote\n\nChallenge Passage timeout applies to IP reputation, IUAM mode and user IP Firewall (CAPTCHA or JS Challenge): [cf\\_clearance cookie](https://developers.cloudflare.com/fundamentals/reference/policies-compliances/cloudflare-cookies/#additional-cookies-used-by-the-challenge-platform) is set with `Max-age=Challenge Passage`.\n\n</page>\n\n<page>\n---\ntitle: Control incoming requests  Cloudflare Learning Paths\ndescription: Use Custom rules to allow you to control incoming traffic by\n  filtering requests to a zone. They work as customized web application firewall\n  (WAF) rules that you can use to perform actions like Block or Managed\n  Challenge on incoming requests.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/control-incoming-requests/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/control-incoming-requests/index.md\n---\n\nUse [Custom rules](https://developers.cloudflare.com/waf/custom-rules/) to allow you to control incoming traffic by filtering requests to a zone. They work as customized web application firewall (WAF) rules that you can use to perform actions like Block or Managed Challenge on incoming requests.\n\nUse WAF [Managed Rules](https://developers.cloudflare.com/waf/managed-rules/) to apply custom criteria for all incoming HTTP requests.\n\n## Understand hosting plan limits\n\nCloudflare offsets most of the load to your website via caching and request filtering, but some traffic will still pass through to your origin. Knowing the limits of your hosting plan can help prevent a bottleneck from your host.\n\nOnce you are aware of your plan limits, you can use [Rate Limiting](https://developers.cloudflare.com/waf/rate-limiting-rules/) to restrict how many times a requesting entity can make a request to your website.\n\nTo help you define the best rate limiting setting for your use case, refer to [How Cloudflare determines the request rate](https://developers.cloudflare.com/waf/rate-limiting-rules/request-rate/).\n\n## Security models\n\n* Positive Security policy: Allow specific requests and deny everything else.\n* Negative Security policy: Block specific requests and allow everything else.\n\n## Actions\n\n* Log: Test rule effectiveness before committing to a more severe action.\n* Allow: Allow matching requests to access the site.\n* Block: Block matching requests from accessing the site.\n* CAPTCHA Challenge: Rules will be shown a CAPTCHA before proceeding.\n* Javascript Challenge: Rules will be shown a five second Javascript confirmation before proceeding.\n\n</page>\n\n<page>\n---\ntitle: Defend content with Scrape Shield  Cloudflare Learning Paths\ndescription: Scrape Shield is a collection of settings meant to protect your site's content.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/defend-content/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/defend-content/index.md\n---\n\nScrape Shield is a collection of settings meant to protect your site's content.\n\n## Email Address Obfuscation\n\n[Email Address Obfuscation](https://developers.cloudflare.com/waf/tools/scrape-shield/email-address-obfuscation/) uses JavaScript to encrypt addresses and prevents harvesting by spammers and bots while keeping addresses easy to read and use for human visitors.\n\n## Hotlink Protection\n\n[Hotlink Protection](https://developers.cloudflare.com/waf/tools/scrape-shield/hotlink-protection/) prevents your images from being used by other sites, which can reduce the bandwidth consumed by your origin server.\n\n</page>\n\n<page>\n---\ntitle: What to do when under attack  Cloudflare Learning Paths\ndescription: If you are under attack and have this feature enabled during the\n  attack, visitors will receive an interstitial page for about five seconds\n  while the traffic is analyzed to make sure it is a legitimate human visitor.\n  The vast majority of Layer 7 attack scripts are defeated by IUAM and can be\n  honed via Page Rules.\nlastUpdated: 2025-12-23T20:53:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/enable-iaum/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/enable-iaum/index.md\n---\n\n## Enable \"I'm Under Attack\" mode (IAUM)\n\nIf you are under attack and have this feature enabled during the attack, visitors will receive an interstitial page for about five seconds while the traffic is analyzed to make sure it is a legitimate human visitor. The vast majority of Layer 7 attack scripts are defeated by IUAM and can be honed via Page Rules.\n\nRefer to [I'm Under Attack Mode](https://developers.cloudflare.com/fundamentals/reference/under-attack-mode/) for more information.\n\n## Change Access Control List (ACL)\n\nAn ACL refers to rules that are applied to port numbers or IP addresses that are available on a host permitting use of the service. When you only allow Cloudflare IPs, you eliminate threats attempting to attack your origin IP range.\n\nRefer to [Cloudflare IP Ranges](https://www.cloudflare.com/ips) for more information.\n\n## Change Origin IPs and update Cloudflare DNS records\n\nIf your origin is still being attacked, consider moving your Origin IPs and updating your Cloudflare DNS records.\n\nRefer to [Prevent DDoS attacks](https://developers.cloudflare.com/learning-paths/prevent-ddos-attacks/concepts/) for detailed guidance.\n\nNote\n\nTo learn about best practices for DDoS protection, review [Proactive DDoS defense](https://developers.cloudflare.com/ddos-protection/best-practices/proactive-defense/).\n\n</page>\n\n<page>\n---\ntitle: Prepare for surges and mitigate DDoS attacks  Cloudflare Learning Paths\ndescription: Utilize Cloudflare's caching to enhance load times and reduce\n  server strain. Also, features like the Waiting Room and Rate Limiting can be\n  used to effectively manage excess demand and ensure a stable user experience.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/prepare-for-surges/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/prepare-for-surges/index.md\n---\n\n## Reduce server strain\n\nUtilize Cloudflare's [caching](https://developers.cloudflare.com/cache/) to enhance load times and reduce server strain. Also, features like the [Waiting Room](https://developers.cloudflare.com/waiting-room) and [Rate Limiting](https://developers.cloudflare.com/waf/rate-limiting-rules/) can be used to effectively manage excess demand and ensure a stable user experience.\n\n## Unlimited DDoS Protection\n\nCloudflare's Advanced [DDoS protection](https://developers.cloudflare.com/ddos-protection/) is always on for Enterprise customers and is used to mitigate DDoS attacks of all forms and sizes including those that target UDP and ICMP protocols, as well as SYN/ACK, DNS amplification, SMURF, and Layer 7 attacks.\n\n## Browser Integrity Check\n\n[Browser Integrity Check](https://developers.cloudflare.com/waf/tools/browser-integrity-check/) looks for requests with HTTP headers commonly used by spammers, bots, and crawlers such as requests with a missing or non-standard user agent. If a threat is found, Cloudflare will present a challenge page before allowing access. This may affect your API and can be selectively disabled using [Page Rules](https://developers.cloudflare.com/rules/page-rules/).\n\n</page>\n\n<page>\n---\ntitle: Secure against attacks  Cloudflare Learning Paths\ndescription: Review the different actions you can take to secure your website\n  against attacks.\nlastUpdated: 2025-09-25T16:31:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/security/secure-against-attacks/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/security/secure-against-attacks/index.md\n---\n\nReview the different actions you can take to secure your website against attacks.\n\n## Orange cloud all proper subdomains\n\nWhen a subdomain is set to Proxied (also known as orange-clouded), Cloudflare proxying is active for that record and the record will resolve to a Cloudflare IP.\n\nRefer to [Proxy status](https://developers.cloudflare.com/dns/proxy-status/) for more information.\n\n</page>\n\n<page>\n---\ntitle: Support resources  Cloudflare Learning Paths\nlastUpdated: 2025-12-23T20:53:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/surge-readiness/support/resources/\n  md: https://developers.cloudflare.com/learning-paths/surge-readiness/support/resources/index.md\n---\n\n| Support type | Resource |\n| - | - |\n| Self-serve questions | <https://support.cloudflare.com> <https://developers.cloudflare.com/fundamentals> |\n| Strategic guidance and best practices (proactive) | Reach out to your dedicated account team |\n| Non-critical production issues (reactive) | - [Support portal](https://dash.cloudflare.com/?to=/:account/support) - Dashboard chat |\n| Critical issues such as attacks (reactive) | - Call the 24/7 Emergency Support line - +1 (650)353-5922 (US) - [www.cloudflare.com/ecp/support](http://www.cloudflare.com/ecp/support) (global lines) |\n\nNote\n\nFor security reasons, Cloudflare Support only assists individuals whose email addresses are validated against the list of registered account contacts. Review and update all contacts accordingly in your Cloudflare Dashboard. For more information, refer to [Manage members](https://developers.cloudflare.com/fundamentals/manage-members/).\n\n## Additional resources\n\n* For help with an issue, refer to [guidance for submitting support tickets](https://developers.cloudflare.com/support/contacting-cloudflare-support/).\n* Reference our [Support Docs](https://developers.cloudflare.com/support/), including [Priority definitions](https://developers.cloudflare.com/support/contacting-cloudflare-support/#priority-definitions).\n* Learn the basic countermeasures to [prevent an ongoing DDoS attack](https://developers.cloudflare.com/ddos-protection/best-practices/proactive-defense/).\n* Let [Cloudflare's Security Operations Center-as-a-Service (SOC)](https://www.cloudflare.com/soc-as-a-service/) monitor your environment for volumetric security threats and potential operational disruptions, perform analysis to identify attack vectors, and help you implement countermeasures to mitigate future incidents.\n* If a customer has purchased Technical Account Management Service, utilize the [Technical Account Management Service](https://www.cloudflare.com/technical-account-management-service/) which operates as an extension of your team, as the Cloudflare support expert who knows your tech stack, unique infrastructure, and Cloudflare portfolio requirements.\n* Learn [what's new](https://www.cloudflare.com/whats-new/) and subscribe to product release email summaries.\n* Read the [Cloudflare blog](https://blog.cloudflare.com/) for the latest announcements from Cloudflare.\n* Refer to the [Cloudflare Community](https://community.cloudflare.com/) to seek advice and share insights about using Cloudflare with other Cloudflare users.\n* [Maximize Revenue and Minimize Risk in Peak Season webinar](https://www.google.com/url?q=https://cloudflare.ondemand.goldcast.io/on-demand/28262595-9ddf-4e26-91bf-241117f4b5fe\\&sa=D\\&source=docs\\&ust=1758134183832896\\&usg=AOvVaw3-v4hp23nSzNj0s6j-xxyc)\n\n</page>\n\n<page>\n---\ntitle: Understand Cloudflare WARP basics  Cloudflare Learning Paths\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-1/\n  md: https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-1/index.md\n---\n\n* Watch this episode\n\n  In this episode, we explain the core features of the Cloudflare WARP client and how to troubleshoot common issues. After watching, you will have an understanding of the GUI, the differences between the consumer and corporate WARP, device profiles, the various operating modes of WARP, split tunneling and more.\n\n  **Related content**\n\n  Explore the following resources on WARP, device profiles, operating modes, and split tunneling:\n\n  * [Introduction to Cloudflare WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/)\n  * [Set up WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/set-up-warp/)\n  * [Configure Device Profiles for Cloudflare WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/device-profiles/)\n  * [Cloudflare WARP Operating Modes](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/warp-modes/)\n  * [Split Tunneling with Cloudflare WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/configure-warp/route-traffic/split-tunnels/)\n  * [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/)\n\n* Series overview\n\n  [Watch Episode 1: Understand and troubleshoot Cloudflare WARP ](https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-1/)In this episode, we explain the core features of the Cloudflare WARP client and how to troubleshoot common issues.\n\n  [Watch Episode 2: WARP diagnostic logs ](https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-2/)In this episode, we explain how to troubleshoot Cloudflare WARP by analyzing diagnostic logs and understand how the client connects in different modes.\n\n</page>\n\n<page>\n---\ntitle: WARP diagnostic logs  Cloudflare Learning Paths\nlastUpdated: 2025-10-21T14:33:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-2/\n  md: https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-2/index.md\n---\n\n* Watch this episode\n\n  In this more advanced episode, we explain how to use warp-diag files to identify and resolve connection issues with the WARP client. You will learn how to locate and interpret three key files: `warp-status`, `warp-settings`, and `daemon.log`. The video also provides troubleshooting tips including specific keyword searches and guidance on how to cross-reference logs to identify a bigger picture of the problem.\n\n  **Related content**\n\n  Explore the following resources on WARP, device profiles, operating modes, and split tunneling:\n\n  * [Introduction to Cloudflare WARP](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/)\n  * [WARP troubleshooting guide](https://developers.cloudflare.com/cloudflare-one/team-and-resources/devices/warp/troubleshooting/troubleshooting-guide/)\n\n* Series overview\n\n  [Watch Episode 1: Understand and troubleshoot Cloudflare WARP ](https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-1/)In this episode, we explain the core features of the Cloudflare WARP client and how to troubleshoot common issues.\n\n  [Watch Episode 2: WARP diagnostic logs ](https://developers.cloudflare.com/learning-paths/warp-overview-course/series/warp-basics-2/)In this episode, we explain how to troubleshoot Cloudflare WARP by analyzing diagnostic logs and understand how the client connects in different modes.\n\n</page>\n\n<page>\n---\ntitle: Serverless computing  Cloudflare Learning Paths\ndescription: Cloudflare Workers allows you to build serverless applications or\n  augment existing ones by writing code that is deployed instantly across the\n  globe. To understand the significance of Workers technology, we begin by\n  understanding the environment in which it was developed.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/concepts/serverless-computing/\n  md: https://developers.cloudflare.com/learning-paths/workers/concepts/serverless-computing/index.md\n---\n\nCloudflare Workers allows you to build serverless applications or augment existing ones by writing code that is deployed instantly across the globe. To understand the significance of Workers technology, we begin by understanding the environment in which it was developed.\n\nWorkers is a serverless computing provider. [Serverless computing](https://www.cloudflare.com/learning/serverless/what-is-serverless/) refers to a cloud computing model where providers, like Cloudflare, manage servers on behalf of users, allowing developers and businesses to focus entirely on writing and deploying application logic.\n\n## Cloud computing\n\n[Cloud computing](https://www.cloudflare.com/learning/cloud/what-is-the-cloud/) is defined as hosting computing resources (such as virtual machines, storage, databases, and networking services) on third-party servers. Cloud computing service providers include Amazon Web Services, Microsoft Azure, Google Cloud Platform, and Cloudflare.\n\n### Serverless computing\n\nServerless computing is a subset of cloud computing. Serverless computing is a method of providing backend services on an as-used basis. A serverless provider allows users to write and deploy code without the hassle of worrying about the underlying infrastructure. Serverless computing has unique characteristics that set it apart from other cloud computing models.\n\n#### Resource management\n\nCloud computing allows organizations to rent a fixed number of servers or server space. To prepare for seasonal or unplanned spikes in request traffic to their applications, organizations may overpurchase server space to ensure their applications do not go down because of high request volume from end users or customers.\n\nIn the serverless computing model, organizations and individuals are not required to calculate how much server space or machines they need to rent. Serverless computing providers take care of server management, and provisioning, allowing developers and organizations to focus on writing and deploying logic.\n\nServerless computing providers scale automatically to handle surges and low points in request traffic. The serverless computing provider is responsible for the scalability of your application and will work to match resources to the volume of requests your application is receiving, ensuring your application stays online.\n\n#### Execution model\n\nServerless computing providers differ in their approach to how your application's code is executed. Many serverless computing providers, like Cloudflare, use an event-driven model. When an event (such as an HTTP request or a [Cron Trigger](https://developers.cloudflare.com/workers/configuration/cron-triggers/)) invokes a Worker, the Worker code will execute. The total amount of time from the start to end of an invocation of a Worker is known as [duration](https://developers.cloudflare.com/workers/platform/limits/#duration). The amount of time the CPU actually spends doing work during a given request is known as [CPU time](https://developers.cloudflare.com/workers/platform/pricing/#workers).\n\n#### Billing model\n\nDevelopers and organizations using serverless computing are billed on a usage model paradigm. Instead of paying for a fixed amount of computing resources that may be underutilized or exceeded, users pay as much as they use in the serverless model. Usage is defined differently per serverless computing provider. Usage in Workers is defined as CPU time.\n\n## Summary\n\nBy reading this page, you have:\n\n* Been introduced to the serverless computing concept that is behind Cloudflare Workers.\n* Reviewed the differences between legacy on-premise and cloud computing infrastructure.\n* Analyzed the key differences between the cloud computing and serverless computing paradigms.\n\nIn the next section, you will learn about what makes Workers, a serverless computing platform that is part of the larger Cloudflare Developer Platform, unique in its architecture from other serverless computing providers.\n\n</page>\n\n<page>\n---\ntitle: Introduction to Cloudflare  Cloudflare Learning Paths\ndescription: Cloudflare is a global network of servers. It is one of the largest\n  networks on the Internet.\nlastUpdated: 2025-05-01T15:14:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/concepts/cloudflare-intro/\n  md: https://developers.cloudflare.com/learning-paths/workers/concepts/cloudflare-intro/index.md\n---\n\n[Cloudflare](https://www.cloudflare.com/learning/what-is-cloudflare/) is a global network of [servers](https://www.cloudflare.com/learning/cdn/glossary/edge-server/). It is one of the largest [networks](https://www.cloudflare.com/network/) on the Internet.\n\nCloudflare's product offering is composed of [SASE and SSE services](https://www.cloudflare.com/zero-trust/), [application](https://www.cloudflare.com/application-services/) and [infrastructure services](https://www.cloudflare.com/network-services/), and [Developer Platform](https://www.cloudflare.com/developer-platform/solutions/).\n\nCloudflare's products offer something to developers, private and public organizations, businesses, governments, and individual consumers.\n\n## Cloudflare Developer Platform\n\nThe [Cloudflare Developer Platform](https://www.cloudflare.com/developer-platform/products/) includes [Cloudflare Workers](https://developers.cloudflare.com/workers/), which allows you to deploy serverless code instantly across the globe. You will learn more about [the Developer Platform in this module](https://developers.cloudflare.com/learning-paths/workers/devplat/).\n\n## Built on Cloudflare\n\nIf your application is built on Cloudflare, then Cloudflare would act as the origin server of your application.\n\nAn example tech stack for an application built on Cloudflare would look like:\n\n* [Domain Registrar](https://developers.cloudflare.com/registrar/) to buy a new your domain.\n* [Cloudflare Pages](https://developers.cloudflare.com/pages/) to configure and deploy a front-end site.\n* [Cloudflare Workers](https://developers.cloudflare.com/workers/) or [Pages Functions](https://developers.cloudflare.com/pages/functions/) (which are Workers under the hood) to add dynamic functionality to your site.\n* [Storage resources](https://developers.cloudflare.com/workers/platform/storage-options/) to persist different types of data.\n* [Application security (DDoS protection, WAF, and more)](https://www.cloudflare.com/application-services/products/#security-services) to secure your site.\n* [Application performance (CDN, Load Balancing, and more)](https://www.cloudflare.com/application-services/products/#performance-services) to customize and enhance your site's performance.\n* [AI](https://developers.cloudflare.com/use-cases/ai/) to run machine learning models.\n\nAnd more depending on your use case.\n\n## Built with Cloudflare\n\nWhen you add your application to Cloudflare, Cloudflare's global network of servers will sit in between requests to your application and your application's [origin server](https://www.cloudflare.com/learning/cdn/glossary/origin-server/).\n\n![Cloudflare sits in between requests and your origin server.](https://developers.cloudflare.com/_astro/website-with-cloudflare.D3VGvGsa_ZGrGho.svg)\n\nAfter you add your application to [Cloudflare](https://developers.cloudflare.com/fundamentals/concepts/how-cloudflare-works/), you can:\n\n* Use Workers to augment the application by deploying code.\n* Add storage resources available on the Developer Platform.\n* Enhance your application's performance by speeding up content delivery and user experience ([CDN](https://www.cloudflare.com/learning/cdn/what-is-a-cdn/)).\n* Protect your website from malicious activity ([DDoS](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/) by configuring the [Web Application Firewall](https://www.cloudflare.com/learning/ddos/glossary/web-application-firewall-waf/)).\n* Route traffic ([Load balancing](https://developers.cloudflare.com/load-balancing/), [Waiting Room](https://developers.cloudflare.com/waiting-room/)).\n\nAnd more depending on your use case.\n\n## Summary\n\nBy reading this page, you have:\n\n* Learned the scale of Cloudflare's global network.\n* Explored the product offering to know what Cloudflare can offer for users like you.\n* Reviewed how you can build your applications with Cloudflare and Cloudflare Workers.\n\nIn the next section, you will be introduced to the fundamentals of serverless computing, the concept behind Cloudflare Workers.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Workers  Cloudflare Learning Paths\ndescription: Cloudflare Workers gives developers the power to deploy serverless\n  code instantly to Cloudflare's global network.\nlastUpdated: 2025-02-07T16:05:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/concepts/workers-concepts/\n  md: https://developers.cloudflare.com/learning-paths/workers/concepts/workers-concepts/index.md\n---\n\nCloudflare Workers gives developers the power to deploy serverless code instantly to Cloudflare's global network.\n\nCloudflare Workers significantly differs from other serverless computing providers in its execution model and architecture.\n\n## What you can do with Workers\n\nA single Worker project can have logic as complex or as simple as the developer desires. A project of smaller scale might look like a Worker that [returns a small HTML page](https://developers.cloudflare.com/workers/examples/return-html/) on a single route. A more complex Worker project would span multiple domains, multiple routes for each domain, and different logic for each route. The developer decides the architectural complexity of their Worker project.\n\nYour application can be made up of multiple Workers that work together and deliver a single experience to end users. Workers can also integrate with other Cloudflare Developer Platform functionality such as storage, media and AI. You will learn more about this in the [Developer Platform module](https://developers.cloudflare.com/learning-paths/workers/devplat/).\n\n## Runtime\n\nThe [Workers runtime](https://blog.cloudflare.com/workerd-open-source-workers-runtime) is designed to be JavaScript-standards compliant and web-interoperable. The Workers runtime uses the V8 engine  the same engine used by Chromium and Node.js, and has an open-source version, [`workerd`](https://github.com/cloudflare/workerd).\n\n## Execution\n\nThe Cloudflare Workers runtime runs in every data center of [Cloudflare's global network](https://www.cloudflare.com/network/). Every Worker run within its own isolate. Isolate architecture is what makes Workers efficient.\n\n### Isolates\n\nWorkers uses [isolates](https://developers.cloudflare.com/workers/reference/how-workers-works/#isolates): lightweight contexts that provide your code with variables it can access and a safe environment to be executed within. You could even consider an isolate a sandbox for your function to run in.\n\nA single instance of the runtime can run hundreds or thousands of isolates, seamlessly switching between them. Each isolate's memory is completely isolated, so each piece of code is protected from other untrusted or user-written code on the runtime. Isolates are also designed to start very quickly. Instead of creating a virtual machine for each function, an isolate is created within an existing environment. This model eliminates the cold starts of the virtual machine model.\n\nUnlike other serverless providers which use [containerized processes](https://www.cloudflare.com/learning/serverless/serverless-vs-containers/) each running an instance of a language runtime, Workers pays the overhead of a JavaScript runtime once on the start of a container. Workers processes are able to run essentially limitless scripts with almost no individual overhead. Any given isolate can start around a hundred times faster than a Node process on a container or virtual machine. Notably, on startup isolates consume an order of magnitude less memory.\n\n## Compute per request\n\nMost Workers are a variation on the default Workers flow:\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "For Workers written in [ES modules syntax](https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/), when a request to your `*.workers.dev` subdomain or to your Cloudflare-managed domain is received by any of Cloudflare's data centers, the request invokes the [`fetch()` handler](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/) defined in your Worker code with the given request. You can respond to the request by returning a [`Response`](https://developers.cloudflare.com/workers/runtime-apis/response/) object.\n\n## Summary\n\nBy reading this page, you have learned:\n\n* The basics of how Worker projects are organized.\n* The fundamentals of how Workers execute on the Cloudflare network.\n* How the request to response flow executes.\n\nIn the next module, you build and deploy your first Worker to the Cloudflare global network.\n\n## Related resources\n\n* [Cloud computing without containers](https://blog.cloudflare.com/cloud-computing-without-containers) - A blog post detailing the containers versus isolates difference in the context of Cloudflare.\n* [How Workers works](https://developers.cloudflare.com/workers/reference/how-workers-works/) - Learn the difference between the Workers runtime versus traditional browsers and Node.js.\n* [How the cache works](https://developers.cloudflare.com/workers/reference/how-the-cache-works/) - Learn how Workers interacts with the Cloudflare cache.\n\n## Feedback\n\nTo improve this learning path or report any missing or incorrect information, [file an issue on GitHub](https://github.com/cloudflare/cloudflare-docs/issues/new/choose).\n\n## Community\n\nConnect with the [Cloudflare Developer Platform community on Discord](https://discord.cloudflare.com) to ask questions, share what you are building, and discuss the platform with other developers.\n\n</page>\n\n<page>\n---\ntitle: C3 & Wrangler  Cloudflare Learning Paths\ndescription: Before deploying your first Worker, learn about the CLI tools you\n  will use to build and deploy your Worker project.\nlastUpdated: 2025-04-15T15:42:08.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/get-started/c3-and-wrangler/\n  md: https://developers.cloudflare.com/learning-paths/workers/get-started/c3-and-wrangler/index.md\n---\n\nBefore deploying your first Worker, learn about the CLI tools you will use to build and deploy your Worker project.\n\n## Cloudflare dashboard\n\nYou can build and develop your Worker on the Cloudflare dashboard, without needing to install and use C3 and Wrangler. Continue to the next page to get started with Workers on the Cloudflare dashboard.\n\n## CLI\n\nThe Cloudflare Developer Platform ecosystem has two command-line interfaces (CLI):\n\n* C3: To create new projects.\n* Wrangler: To build and deploy your projects.\n\n## C3\n\n[C3](https://developers.cloudflare.com/pages/get-started/c3/) (`create-cloudflare` CLI) is a command-line tool designed to help you set up and deploy new applications to Cloudflare. In addition to speed, it leverages officially developed templates for Workers and framework-specific setup guides to ensure each new application that you set up follows Cloudflare and any third-party best practices for deployment on the Cloudflare network.\n\nYou will use C3 for new project creation.\n\n## Wrangler\n\n[Wrangler](https://developers.cloudflare.com/workers/wrangler/) is a command-line tool for building with Cloudflare developer products.\n\nWith Wrangler, you can [develop](https://developers.cloudflare.com/workers/wrangler/commands/#dev) your Worker locally and remotely, [roll back](https://developers.cloudflare.com/workers/wrangler/commands/#rollback) to a previous deployment of your Worker, [delete](https://developers.cloudflare.com/workers/wrangler/commands/#delete) a Worker and its bound Developer Platform resources, and more. Refer to [Wrangler Commands](https://developers.cloudflare.com/workers/wrangler/commands/) to view the full reference of Wrangler commands.\n\nWhen you run C3 to create your project, C3 will install the latest version of Wrangler and you do not need to install Wrangler again. You can [update Wrangler](https://developers.cloudflare.com/workers/wrangler/install-and-update/#update-wrangler) to a newer version in your project to access new Wrangler capabilities and features.\n\n## Source of truth\n\nIf you are building your Worker on the Cloudflare dashboard, you will set up your project configuration (such as environment variables, bindings, and routes) through the dashboard. If you are building your project programmatically using C3 and Wrangler, you will rely on a [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/) to configure your Worker.\n\nCloudflare recommends choosing and using one [source of truth](https://developers.cloudflare.com/workers/wrangler/configuration/#source-of-truth), the dashboard or the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/), to avoid errors in your project.\n\n## Summary\n\nBy reading this page, you have learned:\n\n* How to use C3 to create new Workers and Pages projects.\n* How to use Wrangler to develop, configure, and delete your projects.\n\nIn the next section, you will learn more about the Cloudflare dashboard before moving on to deploy your first Worker.\n\n</page>\n\n<page>\n---\ntitle: First application  Cloudflare Learning Paths\ndescription: If you have already created your first Worker and want to learn\n  what more you can do with your project, review the following Learn Cloudflare\n  Workers course for beginners.\nlastUpdated: 2025-09-09T12:12:09.000Z\nchatbotDeprioritize: false\ntags: Hono\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/get-started/first-application/\n  md: https://developers.cloudflare.com/learning-paths/workers/get-started/first-application/index.md\n---\n\n## Build an AI application with Hono and Workers\n\nIf you have already created your first Worker and want to learn what more you can do with your project, review the following Learn Cloudflare Workers course for beginners.\n\nIn this course, you will:\n\n* Deploy your first Worker.\n* Develop your application locally.\n* Add the Hono framework to your project.\n* Integrate Workers AI into your project.\n\n\n\nFind [the video on YouTube](https://youtu.be/H7Qe96fqg1M?si=GVkdGLrmb1faiHma) and explore other Cloudflare Workers tutorials.\n\nIn the next section, you will learn about the Cloudflare Developer Platform.\n\n</page>\n\n<page>\n---\ntitle: First Worker  Cloudflare Learning Paths\ndescription: You can deploy your first Worker via the Cloudflare dashboard or\n  programmatically using your terminal.\nlastUpdated: 2025-09-09T12:12:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/get-started/first-worker/\n  md: https://developers.cloudflare.com/learning-paths/workers/get-started/first-worker/index.md\n---\n\n## Build and deploy your first Worker\n\nYou can deploy your first Worker via the Cloudflare dashboard or programmatically using your terminal.\n\nYou must have a Cloudflare account to create a Worker. To get started with Cloudflare, refer to [Create account](https://developers.cloudflare.com/fundamentals/account/create-account/).\n\n### Via the Cloudflare dashboard\n\nTo create your first Worker using the Cloudflare dashboard:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select **Create application**.\n\n3. Select **Create Worker** > **Deploy**.\n\n### Via C3 and Wrangler\n\n#### Prerequisites\n\n1. Sign up for a [Cloudflare account](https://dash.cloudflare.com/sign-up/workers-and-pages).\n2. Install [`Node.js`](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm).\n\nNode.js version manager\n\nUse a Node version manager like [Volta](https://volta.sh/) or [nvm](https://github.com/nvm-sh/nvm) to avoid permission issues and change Node.js versions. [Wrangler](https://developers.cloudflare.com/workers/wrangler/install-and-update/), discussed later in this guide, requires a Node version of `16.17.0` or later.\n\n#### Create and deploy your first Worker\n\n[C3 (create-cloudflare-cli)](https://github.com/cloudflare/workers-sdk/tree/main/packages/create-cloudflare) is a command-line tool designed to help you set up and deploy new applications to Cloudflare. In addition to speed, it leverages officially developed templates for Workers and framework-specific setup guides to ensure each new application that you set up follows Cloudflare and any third-party best practices for deployment on the Cloudflare network.\n\nTo create your Worker project, run:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "This will prompt you to install the [`create-cloudflare`](https://www.npmjs.com/package/create-cloudflare) package, and lead you through setup.\n\nFor setup, select the following options:\n\n* For *What would you like to start with?*, choose `Hello World example`.\n* For *Which template would you like to use?*, choose `Worker only`.\n* For *Which language do you want to use?*, choose `JavaScript`.\n* For *Do you want to use git for version control?*, choose `Yes`.\n* For *Do you want to deploy your application?*, choose `No` (we will be making some changes before deploying).\n\nYou will be asked if you would like to deploy the project to Cloudflare.\n\n* If you choose to deploy, you will be asked to authenticate (if not logged in already), and your project will be deployed to the Cloudflare global network and available on your custom [`workers.dev` subdomain](https://developers.cloudflare.com/workers/configuration/routing/workers-dev/).\n\n* If you choose not to deploy, go to the newly created project directory to begin writing code. Deploy your project by running the [`wrangler deploy`](https://developers.cloudflare.com/workers/wrangler/commands/#deploy) command.\n\nRefer to [How to run Wrangler commands](https://developers.cloudflare.com/workers/wrangler/commands/#how-to-run-wrangler-commands) to learn how to run Wrangler commands according to your package manager.\n\nIn your Worker project directory, C3 has generated the following:\n\n1. `wrangler.jsonc`: Your [Wrangler](https://developers.cloudflare.com/workers/wrangler/configuration/#sample-wrangler-configuration) configuration file.\n2. `index.js` (in `/src`): A minimal `'Hello World!'` Worker written in [ES module](https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/) syntax.\n3. `package.json`: A minimal Node dependencies configuration file.\n4. `package-lock.json`: Refer to [`npm` documentation on `package-lock.json`](https://docs.npmjs.com/cli/v9/configuring-npm/package-lock-json).\n5. `node_modules`: Refer to [`npm` documentation `node_modules`](https://docs.npmjs.com/cli/v7/configuring-npm/folders#node-modules).\n\nTo continue building your Worker, open the `index.js` file to write your code. Refer to [Examples](https://developers.cloudflare.com/workers/examples/) to use ready-made code you can experiment with.\n\n## Summary\n\nYou have learned how to:\n\n* Create and deploy a Worker project using the Cloudflare dashboard and programmatically, using your terminal.\n\nIn the next section, you can follow a video tutorial to create your first Cloudflare Workers application.\n\n### Related resources\n\n* [Get started guide](https://developers.cloudflare.com/workers/get-started/guide/) - Create a new Worker with Cloudflare Workers' Get started guide.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Developer Platform  Cloudflare Learning Paths\ndescription: \"The Cloudflare Developer Platform offers various services to\n  empower developers to build full-stack applications, including: compute,\n  storage, web development, image optimization, video streaming and AI.\"\nlastUpdated: 2025-08-15T16:51:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workers/devplat/intro-to-devplat/\n  md: https://developers.cloudflare.com/learning-paths/workers/devplat/intro-to-devplat/index.md\n---\n\nThe [Cloudflare Developer Platform](https://www.cloudflare.com/developer-platform/products/) offers various services to empower developers to build full-stack applications, including: [compute](https://www.cloudflare.com/developer-platform/products/#compute), [storage](https://www.cloudflare.com/developer-platform/products/#storage), [web development, image optimization, video streaming](https://www.cloudflare.com/developer-platform/products/#webdev) and [AI](https://ai.cloudflare.com/).\n\nIt is important to note that the developer platform product offering is growing with new releases and features updates. To review a list of product documentation related to Cloudflare Developer Platform:\n\n1. Go to [Cloudflare Docs](https://developers.cloudflare.com).\n2. Select **Product directory** in the top menu.\n3. Select the **Developer platform** filter to view [product documentation for Cloudflare Developer Platform products](https://developers.cloudflare.com/directory/?product-group=Developer+platform).\n\n## Web development\n\n[Cloudflare Pages](https://developers.cloudflare.com/pages/) allows you to build full-stack applications at scale.\n\nWith Pages, you can deploy front-end applications using [C3, Git integration or Direct Upload](https://developers.cloudflare.com/pages/get-started/). Pages supports a large set of frameworks including [Astro](https://developers.cloudflare.com/pages/framework-guides/deploy-an-astro-site/), [Gatsby](https://developers.cloudflare.com/pages/framework-guides/deploy-a-gatsby-site/), [Hugo](https://developers.cloudflare.com/pages/framework-guides/deploy-a-hugo-site/), [Next.js](https://developers.cloudflare.com/pages/framework-guides/nextjs/), [Nuxt](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nuxt-site/), [React](https://developers.cloudflare.com/pages/framework-guides/deploy-a-react-site/), [Remix](https://developers.cloudflare.com/pages/framework-guides/deploy-a-remix-site/), and [more](https://developers.cloudflare.com/pages/framework-guides/).\n\n## Compute\n\n**Cloudflare Workers**\n\nAs you have learned in previous sections, [Cloudflare Workers](https://developers.cloudflare.com/workers/) allow you to build and deploy serverless applications instantly across the globe. To explore what you can build with Workers, refer to [Examples](https://developers.cloudflare.com/workers/examples/) and [Tutorials](https://developers.cloudflare.com/workers/tutorials/).\n\n**Email Routing**\n\n[Cloudflare Email Routing](https://developers.cloudflare.com/email-routing/) allows you to create custom email addresses for your domain and route incoming emails to your preferred mailbox. If you already have a website, refer to [Enable Email Routing](https://developers.cloudflare.com/email-routing/get-started/enable-email-routing/) to set up a custom email address for your site.\n\n## Storage\n\nCloudflare storage offerings differ per use case.\n\n| Use-case | Product | Ideal for |\n| - | - | - |\n| Key-value storage | [Workers KV](https://developers.cloudflare.com/kv/) | Configuration data, service routing metadata, personalization (A/B testing) |\n| Object storage / blob storage | [R2](https://developers.cloudflare.com/r2/) | User-facing web assets, images, machine learning and training datasets, analytics datasets, log and event data. |\n| Accelerate a Postgres or MySQL database | [Hyperdrive](https://developers.cloudflare.com/hyperdrive/) | Connecting to an existing database in a cloud or on-premise using your existing database drivers & ORMs. |\n| Global coordination & stateful serverless | [Durable Objects](https://developers.cloudflare.com/durable-objects/) | Building collaborative applications; global coordination across clients; real-time WebSocket applications; strongly consistent, transactional storage. |\n| Lightweight SQL database | [D1](https://developers.cloudflare.com/d1/) | Relational data, including user profiles, product listings and orders, and/or customer data. |\n| Task processing, batching and messaging | [Queues](https://developers.cloudflare.com/queues/) | Background job processing (emails, notifications, APIs), message queuing, and deferred tasks. |\n| Vector search & embeddings queries | [Vectorize](https://developers.cloudflare.com/vectorize/) | Storing [embeddings](https://developers.cloudflare.com/workers-ai/models/#text-embeddings) from AI models for semantic search and classification tasks. |\n| Streaming ingestion | [Pipelines](https://developers.cloudflare.com/pipelines/) | Streaming data ingestion and processing, including clickstream analytics, telemetry/log data, and structured data for querying |\n| Time-series metrics | [Analytics Engine](https://developers.cloudflare.com/analytics/analytics-engine/) | Write and query high-cardinality time-series data, usage metrics, and service-level telemetry using Workers and/or SQL. |\n\nFor a detailed guide to choosing the correct storage option, refer to [Choose a data or storage product](https://developers.cloudflare.com/workers/platform/storage-options/).\n\n## Image optimization and video streaming\n\n[Cloudflare Stream](https://developers.cloudflare.com/stream/) and [Cloudflare Images](https://developers.cloudflare.com/images/) deliver videos and pictures to your end-users without configuring or maintaining infrastructure.\n\n## AI\n\n[Workers AI](https://developers.cloudflare.com/workers-ai/) allow you to build and deploy AI applications that run machine learning models powered by serverless GPUs.\n\n## Summary\n\nYou have learned:\n\n* More about what the Cloudflare Developer Platform offers.\n* The difference between compute, storage, application development, and AI products.\n\n## Feedback\n\nTo improve this learning path, [file an issue on GitHub](https://github.com/cloudflare/cloudflare-docs/issues/new/choose).\n\n## Community\n\nConnect with the [Cloudflare Developer Platform community on Discord](https://discord.cloudflare.com) to ask questions, share what you are building, and discuss the platform with other developers.\n\n</page>\n\n<page>\n---\ntitle: Introduction to Workflows  Cloudflare Learning Paths\ndescription: >\n  Cloudflare Workflows provides durable execution capabilities, allowing\n  developers to create reliable, repeatable workflows that run in the\n  background. Workflows are designed to resume execution even if the underlying\n  compute fails, ensuring that tasks complete eventually. They are built on top\n  of Cloudflare Workers and handle scaling and provisioning automatically.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-1/\n  md: https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-1/index.md\n---\n\n* Watch this episode\n\n  Cloudflare Workflows provides durable execution capabilities, allowing developers to create reliable, repeatable workflows that run in the background. Workflows are designed to resume execution even if the underlying compute fails, ensuring that tasks complete eventually. They are built on top of Cloudflare Workers and handle scaling and provisioning automatically.\n\n  Workflows are triggered by events, such as Event Notifications consumed from a Queue, HTTP requests, another Worker, or even scheduled timers. Individual steps within a Workflow are designed as retriable units of work. The state is persisted between steps, allowing workflows to resume from the last successful step after failures. Workflows automatically generate metrics for each step, aiding in debugging and observability.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [Source code for the Punderful repository](https://github.com/craigsdennis/punderful-workflows)\n  * [Cloudflare Workflows](https://developers.cloudflare.com/workflows/)\n  * [Cloudflare Workers AI](https://developers.cloudflare.com/workers-ai/)\n\n* Step-by-step tutorial\n\n  Punderful is a sample application that showcases the use of various Cloudflare primitives, including Workers, D1, Vectorize, Workers AI, and Workflows. The application displays a list of puns stored in a D1 database.\n\n  The homepage lists the latest puns stored in D1. The application also includes a semantic search feature powered by Vectorize. To perform a search:\n\n  1. Go to the Punderful search page.\n  2. Type a search query in the \"Search for a pun...\" input box.\n  3. Observe the search results appearing instantly below the search box.\n\n  To demonstrate adding a new pun:\n\n  1. Go to the Punderful creation page.\n  2. Enter a new pun in the \"Enter your pun here...\" textarea.\n  3. Observe the preview of the pun updating as you type.\n  4. Click the \"Submit Pun\" button.\n\n  When a new pun is submitted, it needs to be indexed in Vectorize for the semantic search to work. This indexing process involves creating embeddings from the pun text. This is a task suitable for background processing using Cloudflare Workflows, avoiding delays for the user in the request-response loop.\n\n  ### Implementing a Workflow to Process New Puns\n\n  A workflow is implemented to handle the background processing required when a new pun is submitted.\n\n  #### Triggering the Workflow\n\n  When a new pun is submitted via the `/api/puns` endpoint, the data is first inserted into the D1 database. Then, a new Workflow instance is created and triggered to perform the subsequent background tasks.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/index.tsx#L165)\n\n  In this handler, `c.env.PUBLISH.create(crypto.randomUUID(), { punId, pun: payload.pun })` creates a new instance of the workflow bound as `PUBLISH`, assigns it a unique ID, and passes the `punId` and `pun` text as the payload.\n\n  #### Defining the Workflow Class\n\n  The workflow logic is defined in a class that extends `WorkflowEntrypoint`.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/workflows/publish.ts#L12)\n\n  The `run` method is the entrypoint for the workflow execution. It receives the `event` containing the payload and a `step` object to define individual, durable steps.\n\n  #### Workflow Steps\n\n  Each discrete, retriable task in the workflow is defined using `await step.do()`.\n\n  ##### Content Moderation\n\n  Optionally, the workflow can perform content moderation using an external service like OpenAI's moderation API if an API key is available in the environment.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/workflows/publish.ts#L16)\n\n  This step calls the OpenAI moderation API. If the content is flagged as inappropriate, the pun's status is updated in the database, and a `NonRetryableError` is thrown. Throwing a `NonRetryableError` prevents the workflow from retrying this step, as the content is permanently deemed inappropriate.\n\n  ##### Creating Embeddings\n\n  Next, create vector embeddings for the pun text using a Workers AI model.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/workflows/publish.ts#L34)\n\n  This step uses the `@cf/baai/bge-large-en-v1.5` model from Workers AI to generate a vector embedding for the `pun` text. The result (the embedding vector) is returned by the step and can be used in subsequent steps. `step.do()` ensures this step will be retried if it fails, guaranteeing that embeddings are eventually created.\n\n  ##### Categorizing the Pun\n\n  Optionally, use a Workers AI language model to categorize the pun.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/workflows/publish.ts#L41)\n\n  This step uses the `@cf/meta/llama-3.1-8b-instruct` model with a specific system prompt to generate categories for the pun. The generated categories string is returned by the step. This step also benefits from `step.do()`'s reliability.\n\n  ##### Adding Embeddings to Vectorize\n\n  Insert the created pun embedding and potentially categories embedding into the Vectorize database.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/workflows/publish.ts#L78)\n\n  This step uses `this.env.VECTORIZE.upsert()` to add the generated embeddings and associated metadata to the Vectorize database. This makes the pun searchable semantically. `step.do()` ensures this critical indexing step is completed reliably.\n\n  ##### Updating Database Status\n\n  The final step updates the status of the pun in the D1 database to indicate that it has been published and processed by the workflow.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/7cec7f4bd7d6b17085cb6d6cb3e56b6a4b5b7c9d/src/workflows/publish.ts#L104)\n\n  This step updates the `status` column in the D1 database to \"published\" for the corresponding pun ID. Once this step is complete, the pun is considered fully processed and ready to be displayed on the homepage.\n\n  #### Workflow Bindings\n\n  To make the `PublishWorkflow` class available to the main Worker and to provide access to necessary resources (like D1, AI, Vectorize), bindings are configured in the `wrangler.toml` file.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/wrangler.toml)\n\n  This configuration defines a workflow named `publish`, binds it to the environment variable `PUBLISH`, and links it to the `PublishWorkflow` class in `src/index.ts`. It also shows bindings for Workers AI (`AI`) and Vectorize (`VECTORIZE`), which are accessed via `this.env` within the workflow.\n\n  ### Vectorize for Semantic Search\n\n  Vectorize is a vector database used in this application to enable semantic search for puns. It stores the vector embeddings created by Workers AI. The search functionality queries this Vectorize index to find puns similar in meaning to the user's query.\n\n  The homepage displays recently published puns (status \"published\"). The detail page for a specific pun displays \"Similar Puns\", which are found by querying Vectorize with the embedding of the current pun.\n\n  ### Scalability\n\n  Cloudflare Workers and Workflows are designed to scale automatically based on demand, handling concurrent requests and background tasks efficiently without requiring manual provisioning.\n\n* Series overview\n\n  [Watch Episode 1: Understand Cloudflare Workflows ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-1/)In this episode, we introduce Cloudflare Workflows, which provides durable execution capabilities, allowing developers to create reliable, repeatable workflows that run in the background.\n\n  [Watch Episode 2: Monitor and batch your website data ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-2/)In this episode, we describe how Workflows can be used to process batches of data, ensuring each item in the batch goes through a defined process with reliable execution.\n\n  [Watch Episode 3: Use cron triggers to develop time-aware applications ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-3/)In this episode, we review Workflows ability to explicitly schedule tasks using cron triggers and pause execution with \\`step.sleep\\` allows developers to build sophisticated, time-aware applications.\n\n</page>\n\n<page>\n---\ntitle: Monitor and batch your website data  Cloudflare Learning Paths\ndescription: >\n  Workflows can be used to process batches of data, ensuring each item in the\n  batch goes through a defined process with reliable execution. This section\n  demonstrates processing a batch of puns using the Punderful application as an\n  example.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-2/\n  md: https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-2/index.md\n---\n\n* Watch this episode\n\n  Workflows can be used to process batches of data, ensuring each item in the batch goes through a defined process with reliable execution. This section demonstrates processing a batch of puns using the Punderful application as an example.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [Source code for the Punderful repository](https://github.com/craigsdennis/punderful-workflows)\n  * [Cloudflare Workflows](https://developers.cloudflare.com/workflows/)\n  * [Cloudflare Workers AI](https://developers.cloudflare.com/workers-ai/)\n\n* Step-by-step tutorial\n\n  The Punderful application processes user-submitted puns by performing content moderation, creating embeddings, categorizing, and adding them to a vector store. This process is defined as a Workflow. To process a batch of existing puns (from an open-source dataset called OPun), a batch endpoint is created that iterates through the puns and triggers the defined Workflow for each one.\n\n  #### Batch Processing Code\n\n  The following code snippet shows the endpoint responsible for batch processing:\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/tree/main/src/index.tsx#L291)\n\n  This code:\n\n  1. Fetches the list of puns from a JSON file (`puns.json`).\n  2. Logs the number of puns being processed.\n  3. Sets a user ID for tracking.\n  4. Loops through each pun.\n  5. Performs basic text cleaning on the pun.\n  6. Inserts the pun into the database (handled by `insertPun`).\n  7. Triggers the `PUBLISH` Workflow for each individual pun using `c.env.PUBLISH.create()`. The Workflow is given a unique ID using `crypto.randomUUID()`.\n\n  ### Monitoring Workflow Instances via CLI\n\n  The Cloudflare Wrangler CLI provides commands to monitor and manage Workflows and their instances.\n\n  To list the available workflows associated with your account:",
      "language": "unknown"
    },
    {
      "code": "To list the instances of a specific workflow (for example, the `publish` workflow):",
      "language": "unknown"
    },
    {
      "code": "This command will show a list of workflow instances, their status (Queued, Running, Completed, Errored), and timestamps.\n\n  To view the details of a specific workflow instance, including its steps and their status, duration, and output:",
      "language": "unknown"
    },
    {
      "code": "Replace `<instance-id>` with the actual ID of a running or completed instance from the `list` command output.\n\n  #### Example CLI Output (Describe Instance)\n\n  Describing a workflow instance provides a detailed breakdown of its execution:",
      "language": "unknown"
    },
    {
      "code": "This output shows the status, start/end times, duration, success status, and even the output and configuration for each step within the workflow instance.\n\n  ### Monitoring Workflow Instances via Cloudflare Dashboard\n\n  You can also monitor Workflows and their instances directly in the Cloudflare Dashboard.\n\n  This dashboard view provides a user-friendly way to observe the progress of your batch jobs, identify failed instances, and inspect the execution details of each step.\n\n* Series overview\n\n  [Watch Episode 1: Understand Cloudflare Workflows ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-1/)In this episode, we introduce Cloudflare Workflows, which provides durable execution capabilities, allowing developers to create reliable, repeatable workflows that run in the background.\n\n  [Watch Episode 2: Monitor and batch your website data ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-2/)In this episode, we describe how Workflows can be used to process batches of data, ensuring each item in the batch goes through a defined process with reliable execution.\n\n  [Watch Episode 3: Use cron triggers to develop time-aware applications ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-3/)In this episode, we review Workflows ability to explicitly schedule tasks using cron triggers and pause execution with \\`step.sleep\\` allows developers to build sophisticated, time-aware applications.\n\n</page>\n\n<page>\n---\ntitle: Use cron triggers to develop time-aware applications  Cloudflare\n  Learning Paths\ndescription: >\n  Cloudflare Workflows provide a powerful way to manage asynchronous, durable\n  processes. The ability to explicitly schedule tasks using cron triggers and\n  pause execution with `step.sleep` allows developers to build sophisticated,\n  time-aware applications.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-3/\n  md: https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-3/index.md\n---\n\n* Watch this episode\n\n  Cloudflare Workflows provide a powerful way to manage asynchronous, durable processes. The ability to explicitly schedule tasks using cron triggers and pause execution with `step.sleep` allows developers to build sophisticated, time-aware applications.\n\n  **Related content**\n\n  If you want to dive into detail, refer to the following pages:\n\n  * [Source code for the Punderful repository](https://github.com/craigsdennis/punderful-workflows)\n  * [Cloudflare Workflows](https://developers.cloudflare.com/workflows/)\n  * [Cloudflare Workers AI](https://developers.cloudflare.com/workers-ai/)\n\n* Step-by-step tutorial\n\n  Workflows allow you to kick off asynchronous processes without blocking the user. This is demonstrated in the `addInteraction` function, which creates a new instance of the `INTERACTION` workflow.\n\n  Locate the `addInteraction` function in `src/index.tsx`:\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/index.tsx#L237)\n\n  This function is called when a user interacts with a pun (for example, likes it). Instead of performing the interaction logic directly, it offloads the work to a workflow.\n\n  Examine the `InteractionWorkflow` definition in `src/workflows/interaction.ts`. This workflow performs tasks like checking if the user/session exists and recording the interaction in the database.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/workflows/interaction.ts)\n\n  ### Leaderboard Code\n\n  A common use case for background processes is crunching data and caching results, such as building a leaderboard.\n\n  Examine the `LeaderboardWorkflow` in `src/workflows/leaderboard.ts`. This workflow performs a database query to find trending puns and then stores the results in Cloudflare KV (Key-Value Store).\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/workflows/leaderboard.ts)\n\n  This workflow can be scheduled to run periodically to update the leaderboard data.\n\n  ### Wrangler.toml Configuration\n\n  The `wrangler.toml` file is used to configure your Worker and Workflows. This includes defining bindings to resources like KV namespaces and setting up triggers for workflows.\n\n  Open `wrangler.toml` and find the `[triggers]` section.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/wrangler.toml#L68)\n\n  The `crons` array allows you to define scheduled triggers for your main Worker. The example shows a cron job configured to run every 30 minutes.\n\n  Locate the `scheduled` handler in your main Worker code (`src/index.tsx`). This handler is executed when a cron trigger fires.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/index.tsx#L315)\n\n  This handler creates an instance of the `LEADERBOARD_WORKFLOW`, initiating the leaderboard update process on a schedule.\n\n  ### Puntificator: Using AI to Develop More Puns Automatically\n\n  Workflows can also be used for more complex, multi-step processes, including interacting with AI models. The `PuntificatorWorkflow` is an example that leverages AI to generate and evaluate new puns.\n\n  Examine the `PuntificatorWorkflow` definition in `src/workflows/puntificator.ts`.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/workflows/puntificator.ts)\n\n  This workflow includes steps to:\n\n  1. Retrieve trending puns.\n  2. Create a new pun based on trends using an AI model.\n  3. Judge the quality of the created pun using another AI model.\n  4. Save the pun if it meets a certain rating threshold.\n\n  Crucially, this workflow includes a `step.sleep` call:\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/workflows/puntificator.ts#L135)\n\n  This step pauses the workflow execution for a specified duration. This is useful for waiting to consider user feedback on a published pun before potentially taking further action based on its popularity.\n\n  ### Nested Workflows\n\n  Workflows can initiate other workflows, allowing you to compose complex processes from smaller, modular units.\n\n  In the `PuntificatorWorkflow`, find where it calls the `PUBLISH` workflow.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/workflows/puntificator.ts#L115)\n\n  This demonstrates how one workflow can trigger another, enabling the separation of concerns and modular design.\n\n  Examine the `PublishWorkflow` in `src/workflows/publish.ts`.\n\n  [See here](https://github.com/craigsdennis/punderful-workflows/blob/main/src/workflows/publish.ts)\n\n  This workflow handles the logic for publishing a pun, likely involving saving it to the database and making it visible on the site.\n\n  ### Workflow Instances\n\n  You can trigger workflows manually and inspect their execution status and output using the `wrangler` command-line tool.\n\n  To trigger the `PuntificatorWorkflow` manually:",
      "language": "unknown"
    },
    {
      "code": "This command will queue an instance of the workflow. You will receive a success message and the instance ID.\n\n  To describe the latest instance of a workflow:",
      "language": "unknown"
    },
    {
      "code": "This command will show details about the most recent run of the specified workflow, including its start time, end time, duration, state, and the state of each individual step within the workflow. You can observe steps like `create-new-pun-based-on-trends`, `judge-pun`, `save-pun`, `publish`, and `wait-for-publish` (which shows a 'Sleeping' state).\n\n* Series overview\n\n  [Watch Episode 1: Understand Cloudflare Workflows ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-1/)In this episode, we introduce Cloudflare Workflows, which provides durable execution capabilities, allowing developers to create reliable, repeatable workflows that run in the background.\n\n  [Watch Episode 2: Monitor and batch your website data ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-2/)In this episode, we describe how Workflows can be used to process batches of data, ensuring each item in the batch goes through a defined process with reliable execution.\n\n  [Watch Episode 3: Use cron triggers to develop time-aware applications ](https://developers.cloudflare.com/learning-paths/workflows-course/series/workflows-3/)In this episode, we review Workflows ability to explicitly schedule tasks using cron triggers and pause execution with \\`step.sleep\\` allows developers to build sophisticated, time-aware applications.\n\n</page>\n\n<page>\n---\ntitle: Load Balancing actions  Cloudflare Load Balancing docs\ndescription: Add actions to customize how your load balancer responds to certain\n  HTTP requests.\nlastUpdated: 2025-08-18T14:27:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/actions/\n  md: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/actions/index.md\n---\n\nAdd **actions** to customize how your load balancer responds to certain HTTP requests.\n\nEach load balancing rule includes one or more actions.\n\n## Supported Actions\n\nThis table lists the actions available for Load Balancing rules. For a walkthrough, refer to [Create Load Balancing rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/create-rules/).\n\n| Action | Options | Description |\n| - | - | - |\n| *Fixed response* | *N/A* | Respond to the request with an HTTP status code and an optional message. |\n| *Override* | *Session affinity* | Set the [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/) for the request. You can customize cookie behavior and session time-to-live (TTL). |\n| *Override* | *Load balancer TTL* | Customize the load balancer session time-to-live (TTL). |\n| *Override* | *Steering policy* | Update the [steering policy](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/) associated with your load balancer. |\n| *Override* | *Fallback pool* | Update the [fallback pools](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/#off---failover) associated with your load balancer. |\n| *Override* | *Pools* | Update the [pools](https://developers.cloudflare.com/load-balancing/pools/) associated with your load balancer. |\n| *Override* | *Region pools* | Update the [region pools](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/geo-steering/) associated with your load balancer. |\n| *Override* | *Terminates* | Stop processing Load Balancing rules and apply the current load balancing logic to the request. |\n\n</page>\n\n<page>\n---\ntitle: Create custom rules  Cloudflare Load Balancing docs\ndescription: Create and manage Load Balancing rules in the Custom Rules page,\n  which is part of the Create/Edit Load Balancer workflow found in Traffic in\n  the dashboard.\nlastUpdated: 2025-09-03T10:05:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/create-rules/\n  md: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/create-rules/index.md\n---\n\nCreate and manage [Load Balancing rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/) in the **Custom Rules** page, which is part of the Create/Edit Load Balancer workflow found in **Traffic** in the dashboard.\n\n***\n\n## Prerequisites\n\n* **Understand whether Cloudflare proxies your traffic**: Depending on the [proxy status](https://developers.cloudflare.com/load-balancing/understand-basics/proxy-modes/) of your traffic, you may have access to different fields for your load balancing rules. For more details, refer to [Supported fields and expressions](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/).\n\n***\n\n## Example Workflow\n\n1. In the Cloudflare dashboard, go to the **Load Balancing** page.\n\n   [Go to **Load Balancing**](https://dash.cloudflare.com/?to=/:account/load-balancing)\n\n2. Edit an existing load balancer or [create a new load balancer](https://developers.cloudflare.com/load-balancing/load-balancers/create-load-balancer/).\n\n3. From the Load Balancer workflow, select **Custom Rules**.\n\n4. Select **Create Custom Rule**.\n\n5. In the **Field** drop-down list, choose an HTTP property. For more details, refer to [Supported fields](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/).\n\n6. In the **Operator** drop-down list, choose an operator. For more details, refer to [Operators](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/#operators-and-grouping-symbols).\n\n7. Enter the value to match. When the field is an ordered list, **Value** is a drop-down list. Otherwise, **Value** is a text input.\n\n8. (Optional) To create a compound expression using logical operators, select **And** or **Or**.\n\n9. For an action, choose **Respond with fixed response** or **Override** and enter additional details. For a full list of actions, refer to [Actions](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/actions/).\n\n10. (Optional) Select **Add another override**.\n\n11. After you create your rule, select **Save and Deploy** or **Save as Draft**.\n\n12. Select **Next** and review your changes.\n\n13. Select **Save** to confirm.\n\nWarning\n\nTo save a new load balancer rule, make sure to save both the rule **and** the overall load balancer configuration.\n\nNote\n\nIn general, for non-terminating actions, the last change made by rules within the same [phase](https://developers.cloudflare.com/ruleset-engine/about/phases/) will win (later rules can overwrite changes made by previous ones). However, for [terminating actions](https://developers.cloudflare.com/ruleset-engine/rules-language/actions/), such as Block, Redirect, or any of the challenge actions, rule evaluation will stop and the action is executed immediately.\n\nLoad Balancer Custom Rules override the default Load Balancer settings, including pool and origin selection. These are non-terminating actions, so the last rule applied will override any prior rules.\n\n## Example use case\n\n### URL-based routing\n\nIf you want to host `example.com/blog` separately from your main website, for example, use the following custom rule.\n\n**When incoming requests match**:\n\n| Field | Operator | Value |\n| - | - | - |\n| URI Path | contains | `/blog` |\n\n**Then**:\n\n| Action | Options | Value |\n| - | - | - |\n| Overrides | Pools | `<BLOG_SERVER>` |\n\n</page>\n\n<page>\n---\ntitle: Load Balancing expressions  Cloudflare Load Balancing docs\ndescription: \"Load Balancing rules use two kinds of expressions:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/\n  md: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/index.md\n---\n\n[Load Balancing rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/) use two kinds of expressions:\n\n* [Simple expressions](#simple-expressions) compare a value from an HTTP request to a value defined in the expression. A simple expression is identified by the presence of a **comparison operator** (*equals* or *less than*, for example).\n\n* [Compound expressions](#compound-expressions) combine two or more simple expressions into a single expression. Compound expression contains a **logical operator** (*and*, *or*, for example). With compound expressions you can tailor rules to specific use cases with a high degree of accuracy and precision.\n\n***\n\n## Simple expressions\n\nSimple expressions are composed of three elements:\n\n1. A **field** that represents a property of an HTTP request.\n2. A representative **value** for that field which Cloudflare compares to the actual request value.\n3. A **comparison operator**, which specifies how the value defined in the expression must relate to the actual value from the request for the operator to return `true`.\n\nWhen the comparison operator returns `true`, the request matches the expression.\n\nThis example expression returns true when a request URI path contains `/content`:",
      "language": "unknown"
    },
    {
      "code": "In general, simple expressions use this pattern:",
      "language": "unknown"
    },
    {
      "code": "For more details, refer to [Supported fields and operators](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/).\n\n***\n\n## Compound expressions\n\nA compound expression uses a **logical operator** (*and*, *or*, for example) to combine two or more expressions. Compound expressions allow you to build complex statements within a single expression.\n\nThe example expression below returns true when both the HTTP request URI path contains `/content` and the query string contains `webserver`:",
      "language": "unknown"
    },
    {
      "code": "In general, compound expressions use this pattern:",
      "language": "unknown"
    },
    {
      "code": "A compound expression can be an operand of a logical operator. This allows multiple operators to construct a compound expression from many individual expressions.\n\nFor more details, refer to [Supported fields and operators](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/).\n\n***\n\n## Working with expressions\n\nThe Expression Builders visual interface allows you to build expressions without worrying about field names and syntax.\n\nBy comparison, the Expression Editor is text only, but it supports advanced features not available in the builder.\n\n### Expression Builder\n\nCompound expressions are easier to scan when displayed in the Expression Builders visual interface, and the Expression Preview is a great reference for learning to write more advanced expressions.\n\nThis Expression Builder screenshot shows the example compound expression described earlier. Compound expressions are easier to scan when displayed in the Expression Builders visual interface.\n\n![Example rule configuration visible in the Expression Builder](https://developers.cloudflare.com/_astro/rules-builder-1.CBdNVOoP_2v8pOk.webp)\n\nThe **Expression Preview** displays the expression in text:",
      "language": "unknown"
    },
    {
      "code": "For a walkthrough, refer to [Creating Load Balancing rules](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/create-rules/).\n\n### Expression Editor\n\nThe Expression Editor is a text-only interface for creating Load Balancing expressions. Although it lacks the visual simplicity of the Expression Builder, the Expression Editor supports advanced features such as support for grouping symbols (parentheses).\n\nTo access the Expression Editor in the **Traffic** app, click **Edit expression** in the **Create Custom Rule** dialog.\n\nTo return to the builder, click **Use expression builder**.\n\n### Rules lists\n\nLoad Balancing Custom Rules does not support IP list operators.\n\n</page>\n\n<page>\n---\ntitle: Supported fields and operators  Cloudflare Load Balancing docs\ndescription: The fields that are supported by load balancing rules depend on\n  whether Cloudflare proxies the traffic going through your load balancer or\n  not.\nlastUpdated: 2025-08-25T08:54:23.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/\n  md: https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/reference/index.md\n---\n\nThe fields that are supported by load balancing rules depend on whether Cloudflare proxies the traffic going through your load balancer or not.\n\nIf you use the wrong set of fields, you might see unexpected behaviors. For best results, use the fields associated with your traffic's [proxy status](https://developers.cloudflare.com/load-balancing/understand-basics/proxy-modes/).\n\nAlso, some Load Balancing rules fields are available on the Expression Builder - as described in [Load Balancing expressions](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#working-with-expressions) - while others can only be configured manually, via API or [Expression Editor](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)\n\n## Expression Builder field sets\n\nConsider the following table to know how the fields available in the [Expression Builder](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-builder) are grouped.\n\n| Field Set | Section in Expression Builder | Description |\n| - | - | - |\n| [Fields supported regardless of proxy](#fields-supported-regardless-of-proxy) | `BOTH` | Values that are always accessible regardless of the load balancer proxy status. |\n| [Proxied-only fields](#proxied-only-fields) | `PROXIED ONLY` | Values accessible only when the load balancer is proxied. |\n| [Unproxied-only fields](#unproxied-only-fields) | `NON-PROXIED ONLY` | Values accessible only when the load balancer is not proxied (DNS-only traffic). |\n\n![Choose load balancer fields based on the proxy status header](https://developers.cloudflare.com/_astro/proxy-status.DIPDmp1m_Z2fIPQz.webp)\n\n## Fields supported regardless of proxy\n\nRegardless of your traffic [proxy status](https://developers.cloudflare.com/load-balancing/understand-basics/proxy-modes/), Load Balancing rules can access values for the following fields:\n\n| Field | Name in Expression Builder | Description |\n| - | - | - |\n| `cf.load_balancer.name` `Bytes` | `Load Balancer Name` | Represents the name of the load balancer executing these rules.Example value: `lb.example.com` |\n| `cf.load_balancer.region` `Bytes` | `Load Balancer Region` | Provides the[region name](https://developers.cloudflare.com/load-balancing/reference/region-mapping-api/#list-of-load-balancer-regions)of the data center processing the request.Example value: `ENAM` |\n| `ip.src` `IP address` | `IP Source Address` | If proxied, this field provides the client TCP IP address, which may be adjusted to reflect the actual address of the client by using HTTP headers such as `X-Forwarded-For` or `X-Real-IP` .If unproxied (DNS-only), this field provides the ECS source address, if available. If not available, it provides the client resolver IP address.**Deprecation Warning:** In the future, this field will always be set to the client resolver IP address for unproxied requests. To check for the presence of ECS and use the ECS IP, see the fields[`dns.rr.opt.client`](#field-dns-rr-opt-client)and[`dns.rr.opt.client.addr`](#field-dns-rr-opt-client-addr), respectively.Example value: `1.2.3.4` |\n| `ip.src.asnum` `Number` | `AS Number` | The 16-bit or 32-bit integer representing the Autonomous System (AS) number associated with the client IP address.Example value: `13335` |\n\n## Proxied-only fields\n\nIf your traffic is proxied through Cloudflare, you have access to all the fields listed under [Fields supported regardless of proxy](#fields-supported-regardless-of-proxy) in addition to the following fields:\n\nMany of these fields are referenced from the [Rules language documentation](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/).\n\n| Field | Name in Expression Builder | Description |\n| - | - | - |\n| [`http.cookie`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.cookie/) `String` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | Represents the entire cookie as a string.Example value: `session=8521F670545D7865F79C3D7BEDC29CCE;-background=light` |\n| [`http.host`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.host/) `String` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | Represents the hostname used in the full request URI.Example value: `www.example.org` |\n| [`http.referer`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.referer/) `String` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | Represents the HTTP Referer request header, which contains the address of the web page that linked to the currently requested page.Example value: `Referer: https://developer.example.org/en-US/docs/Web/JavaScript` |\n| [`http.request.headers`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.headers/) `Map<Array<String>>` | `Header` | Represents HTTP request headers as a Map (or associative array).The keys of the associative array are the names of HTTP request headers **converted to lowercase**.When there are repeating headers, the array includes them in the order they appear in the request.**Decoding:** no decoding performed *Whitespace:* preserved *Non-ASCII:* preservedExample: `any(http.request.headers[\"content-type\"][*] == \"application/json\")`Example value: `{\"content-type\": [\"application/json\"]}` |\n| [`http.request.method`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.method/) `String` | `Request Method` | Represents the HTTP method, returned as a string of uppercase characters.Example value: `GET` |\n| [`http.request.timestamp.sec`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.timestamp.sec/) `Integer` | `Timestamp` | Represents the timestamp when Cloudflare received the request, expressed as Unix time in seconds. This value is 10 digits long.Example value: `1484063137` |\n| [`http.request.uri`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri/) `String` | `URI` | Represents the URI path and query string of the request.Example value: `/articles/index?section=539061&expand=comments` |\n| [`http.request.uri.args`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri.args/) `Map<Array<String>>` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | Represents the HTTP URI arguments associated with a request as a Map (associative array).When an argument repeats, then the array contains multiple items in the order they appear in the request.The values are not pre-processed and retain the original case used in the request.*Decoding:* no decoding performed *Non-ASCII:* preservedExample: `any(http.request.uri.args[\"search\"][*] == \"red+apples\")`Example value: `{\"search\": [\"red+apples\"]}` |\n| [`http.request.uri.args.names`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri.args.names/) `Array<String>` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | Represents the names of the arguments in the HTTP URI query string. The names are not pre-processed and retain the original case used in the request.When a name repeats, the array contains multiple items in the order that they appear in the request.*Decoding:* no decoding performed *Non-ASCII:* preservedExample: `any(http.request.uri.args.names[*] == \"search\")`Example value: `[\"search\"]` |\n| [`http.request.uri.args.values`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri.args.values/) `Array<String>` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | Represents the values of arguments in the HTTP URI query string. The values are not pre-processed and retain the original case used in the request. They are in the same order as in the request.Duplicated values are listed multiple times.*Decoding:* no decoding performed *Non-ASCII:* preservedExample: `any(http.request.uri.args.values[*] == \"red+apples\")`Example value: `[\"red+apples\"]` |\n| [`http.request.uri.path`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri.path/) `String` | `URI Path` | Represents the URI path of the request.Example value: `/articles/index` |\n| [`http.request.uri.query`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri.query/) `String` | `URI Query` | Represents the entire query string, without the `?` delimiter.Example value: `section=539061&expand=comments` |\n| [`http.request.version`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.version/) `String` | `HTTP Version` | Represents the version of the HTTP protocol used. Use this field when you require different checks for different versions.Example Values:- `HTTP/1.1`\n- `HTTP/3` |\n\n## Unproxied-only fields\n\nIf your traffic is not proxied through Cloudflare, you have access to all the fields listed under [Fields supported regardless of proxy](#fields-supported-regardless-of-proxy) in addition to the following fields:\n\n| Field | Name in Expression Builder | Description |\n| - | - | - |\n| `dns.qry.name` `Bytes` | `Query Name` | Represents the query name asked.Example value: `example.com.` |\n| `dns.qry.name.len` `Integer` | `Query Name Length` | Represents the length in bytes of the query name.Example value: `123` |\n| `dns.qry.qu` `Boolean` | `Question` | When `true`, this field indicates that the received DNS message was a question. |\n| `dns.qry.type` `Integer` | `Query Type` | Represents the numeric value of the[DNS query type](https://en.wikipedia.org/wiki/List_of_DNS_record_types).Example Values:- `1`(A record)\n\n- `28`(AAAA record) |\n| `dns.rr.opt.client` `Boolean` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | When `true`, this field indicates that the EDNS Client Subnet (ECS) address was sent with the DNS request. |\n| `dns.rr.opt.client.addr` `String` | ([Manual entry only](https://developers.cloudflare.com/load-balancing/additional-options/load-balancing-rules/expressions/#expression-editor)) | If present, this field represents the ECS address sent with the DNS request.Example value: `1.2.3.0` |\n\n## Operators and grouping symbols\n\n* **Comparison operators** specify how values defined in an expression must relate to the actual HTTP request value for the expression to return true.\n\n* **Logical operators** combine two expressions to form a compound expression and use order of precedence to determine how an expression is evaluated.\n\n* **Grouping symbols** allow you to organize expressions, enforce operator precedence, and nest expressions.\n\nFor examples and usage, refer to [Operators and grouping symbols](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/) in the Rules language documentation.\n\n</page>\n\n<page>\n---\ntitle: Health monitor notifications  Cloudflare Load Balancing docs\ndescription: Cloudflare is migrating the notifications used by load balancing\n  health monitors to use Cloudflare's centralized Notifications Service.\nlastUpdated: 2025-07-10T10:49:25.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/reference/migration-guides/health-monitor-notifications/\n  md: https://developers.cloudflare.com/load-balancing/reference/migration-guides/health-monitor-notifications/index.md\n---\n\nCloudflare is migrating the notifications used by load balancing [health monitors](https://developers.cloudflare.com/load-balancing/monitors/) to use Cloudflare's centralized [Notifications Service](https://developers.cloudflare.com/notifications/).\n\n## What is changing and why?\n\nCloudflares account-level [Notifications Service](https://developers.cloudflare.com/notifications/) is now the centralized location for most Cloudflare services. This change promotes consistency and streamlined administration, as well as gives you more options for notification delivery such as configuring webhooks or associating multiple pools with the same notification. These new notifications will also be managed at the account level instead of the zone level.\n\nWe strongly encourage all customers to migrate existing Health Monitor notifications to Cloudflares centralized Notifications Service to avoid lapses in alerts.\n\n## Migration guide\n\nYou should use this guide to migrate over **all** your existing health monitor notifications.\n\n### Step 1 - Find existing notifications\n\nFirst you should determine which pools are using notifications. It's often easier if you use the Cloudflare API to list all your pools and look for the `notification_email` parameter.\n\nWith code\n\nUse the [Cloudflare API](https://developers.cloudflare.com/api/resources/load_balancers/subresources/pools/methods/list/) to list all your pools and then look for whether each pool has a value for the `notification_email` parameter.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "No code\n\nTo find pools with existing notifications in the dashboard:\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com) and select your account and domain.\n2. Go to **Load Balancing**.\n3. Select the **Pools** tab.\n4. On a pool, select **Edit**.\n5. For **Health Check Notifications**, check the value is toggled to **On** and an email address is present in the **Notification email address** field.\n\n### Step 2 - Create new notifications\n\nIn this step, you should create new notifications to replace all of your existing legacy notifications.\n\nWith code\n\nIf using the Cloudflare API, [re-create all your existing notifications](https://developers.cloudflare.com/api/resources/alerting/subresources/policies/methods/create/) with the following parameters specified:",
      "language": "unknown"
    },
    {
      "code": "No code\n\nOn the pool you located in [Step 1](#step-1---find-existing-notifications), look for **Pool Notifications**. Click **Create a Health Alert** to start [creating a notification](https://developers.cloudflare.com/notifications/get-started/#create-a-notification).\n\n### Step 3 - Remove deprecated notifications\n\nAs the final step in the migration process, you need to remove all emails from your legacy notifications to ensure that you no longer receive deprecation emails moving forward.\n\nThough you can perform these steps in the dashboard, Cloudflare recommends you use our new API endpoint for added convenience.\n\nWith code\n\nIf using the Cloudflare API, we recently added a [`PATCH`](https://developers.cloudflare.com/api/resources/load_balancers/subresources/pools/methods/bulk_edit/) endpoint so you can easily remove email notifications from multiple pools at the same time.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Load Balancing: Monitors and Pools Write`",
      "language": "unknown"
    },
    {
      "code": "This API call supports the standard pagination query parameters, either `limit/offset` or `per_page/page`, so by default it only updates the first 25 pools listed. To make sure you update all your pools, you may want to adjust your API call so it loops through various pages or includes a larger number of pools with each request.\n\nIf needed, you can remove legacy notifications by using the dashboard.\n\nNo code\n\nOnce you created your new notification in [Step 2](#step-2---create-new-notifications), you will return to the pool you were editing previously. To disable the deprecated notifications, you must remove all notification email addresses from the field.\n\nIf you do not complete this step (removing all notification emails from all pools), your migration will not be considered complete and you will continue to receive additional emails about this deprecation.\n\n</page>\n\n<page>\n---\ntitle: Migrate to new GraphQL nodes  Cloudflare Load Balancing docs\ndescription: \"After 30 September 2021, Cloudflare will make the following\n  changes to the Load Balancing GraphQL schema:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/reference/migration-guides/load-balancing-graphql-nodes/\n  md: https://developers.cloudflare.com/load-balancing/reference/migration-guides/load-balancing-graphql-nodes/index.md\n---\n\nAfter 30 September 2021, Cloudflare will make the following changes to the Load Balancing GraphQL schema:\n\n* Deprecate nodes:\n\n  * `loadBalancingRequestsGroups` will be deprecated for `loadBalancingRequestsAdaptiveGroups`\n  * `loadBalancingRequests` will be deprecated for `loadBalancingRequestsAdaptive`\n\n* Deprecate the `date` field (replace it with the existing `datetime` field)\n\n* Add the `sampleInterval` field\n\n## Example query\n\nThe following example:\n\n* Replaces `loadBalancingRequestsGroups` with `loadBalancingRequestsAdaptiveGroups`\n* Replaces `date` with `datetime`\n* Uses the new `sampleInterval` field",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Local traffic steering  Cloudflare Load Balancing docs\ndescription: Endpoint steering customizes how each pool distributes requests to\n  its associated endpoints.\nlastUpdated: 2025-08-20T20:59:04.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/\n  md: https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/index.md\n---\n\nEndpoint steering customizes how each [pool](https://developers.cloudflare.com/load-balancing/pools/) distributes requests to its associated endpoints.\n\nThese distributions are a combination of two properties:\n\n* The endpoint steering [policy](#policies) chosen for your pool.\n* The [weights](#weights) assigned to each endpoint.\n\nNote\n\nIf an endpoint [becomes unhealthy](https://developers.cloudflare.com/load-balancing/understand-basics/health-details/), your pool will also re-balance traffic according to its endpoint steering policy.\n\n## Policies\n\nWhen you [create a pool](https://developers.cloudflare.com/load-balancing/pools/create-pool/), you have to choose an option for **Endpoint Steering**.\n\n\n\n* [Random](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/random-origin-steering/)\n* [Hash](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/hash-origin-steering/)\n* [Least Outstanding Requests](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/origin-level-steering/least-outstanding-requests-pools/)\n\n## Weights\n\nThe weight assigned to an endpoint controls the percentage of pool traffic sent to that endpoint. By default, all endpoints within a pool have a weight of **1**.\n\nIf you leave each endpoint with the default setting and choose a **Random** endpoint steering policy, each endpoint will receive the same percentage of traffic. If you use a **Hash** policy, that percentage will vary based on the IP distribution of your requests.\n\n### Customize weights\n\nTo customize weights when you [create or edit a pool](https://developers.cloudflare.com/load-balancing/pools/create-pool/), set the **Weight** to a number between 0 and 1 (expressed in increments of .01). Cloudflare will then send traffic to that pool based on a combination of your endpoint steering policy and the following formula.",
      "language": "unknown"
    },
    {
      "code": "Endpoint weight example\n\nHeres an example applying weights to three endpoints with a **Random** endpoint steering policy:\n\n* **Weights:** Endpoint A = 0.25; Endpoint B = 0.25; Endpoint C = 0.50\n* **When all endpoints are healthy**, each endpoint will receive the following proportion of total traffic: A = 25%; B = 25%; C = 50%.\n* **When one endpoint is unhealthy** (such as endpoint C), each healthy endpoint will receive the following proportion of total traffic: A = 50%; B=50%.\n\nA significant amount of traffic is required for the distribution to converge on the expected values.\n\nAn endpoint with a weight of **0** should not receive any traffic sent to that pool (though the endpoint will still receive health monitor requests).\n\nYou can also see this value in the **Percent** field when creating or editing a pool in the dashboard.\n\nNote:\n\nIf an endpoint is used in multiple pools and has multiple weights assigned, the total traffic sent to that pool will differ from the percentage specified in each individual pool.\n\n### Limitations\n\nIf you choose **Hash** for your **Endpoint Steering** or enable [session affinity](https://developers.cloudflare.com/load-balancing/understand-basics/session-affinity/), these options can affect traffic distribution.\n\nAdditionally, session affinity takes precedence over any selected weight or endpoint steering policy.\n\nWhen using [DNS-only load balancing](https://developers.cloudflare.com/load-balancing/understand-basics/proxy-modes/#dns-only-load-balancing), DNS resolvers may cache resolved IPs for clients and affect traffic distribution.\n\n</page>\n\n<page>\n---\ntitle: Global traffic steering policies  Cloudflare Load Balancing docs\ndescription: Global traffic steering policies decide how a load balancer routes\n  traffic to attached and healthy pools.\nlastUpdated: 2025-08-28T14:30:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/\n  md: https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/index.md\n---\n\nGlobal traffic steering policies decide how a load balancer routes traffic to attached and healthy pools.\n\n\n\n* [Standard](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/standard-options/)\n* [Geo](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/geo-steering/)\n* [Dynamic](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/dynamic-steering/)\n* [Proximity](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/proximity-steering/)\n* [Least Outstanding Requests](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/least-outstanding-requests/)\n\n## EDNS Client Subnet (ECS) support\n\nEDNS Client Subnet (ECS) support provides customers with more control over location-based steering during gray-clouded DNS resolutions and can be used for proximity or geo (country) steering.\n\nCustomers can configure their load balancer using the `location_strategy` parameter, which includes the properties `prefer_ecs` and `mode`.\n\n`prefer_ecs` determines whether the ECS geolocation should be preferred as the authoritative location.\n\n| Type | Description |\n| - | - |\n| `\"always\"` | Always prefers ECS. |\n| `\"never\"` | Never prefers ECS. |\n| `\"proximity\"` | Prefers ECS only when `steering_policy=\"proximity\"`. |\n| `\"geo\"` | Prefers ECS only when `steering_policy=\"geo\"` and only supports country-level steering. |\n\n`mode` determines the authoritative location when ECS is not preferred, does not exist in the request, or its geolocation lookup is unsuccessful.\n\n| Type | Description |\n| - | - |\n| `\"pop\"` | Uses the Cloudflare PoP location. |\n| `\"resolver_ip\"` | Uses the DNS resolver geolocation data. If the geolocation lookup is unsuccessful, it uses the Cloudflare PoP location. |\n\nNote\n\nECS support applies to DNS-only load balancers.\n\n</page>\n\n<page>\n---\ntitle: Manage Logpush with cURL  Cloudflare Logs docs\ndescription: You can manage your Cloudflare Logpush service from the command\n  line using cURL.\nlastUpdated: 2025-09-16T08:46:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/logs/logpush/examples/example-logpush-curl/\n  md: https://developers.cloudflare.com/logs/logpush/examples/example-logpush-curl/index.md\n---\n\nYou can manage your Cloudflare Logpush service from the command line using cURL.\n\nBefore getting started, review the following documentation:\n\n* [API configuration](https://developers.cloudflare.com/logs/logpush/logpush-job/api-configuration/)\n\nNote\n\nThe examples below are for zone-scoped datasets. Account-scoped datasets should use `/accounts/{account_id}` instead of `/zone/{zone_id}`.\n\n## Step 1 - Get ownership challenge\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Parameters\n\n* **destination\\_conf** - Refer to [Destination](https://developers.cloudflare.com/logs/logpush/logpush-job/api-configuration/#destination) for details.\n\n### Response\n\nA challenge file will be written to the destination, and the filename will be in the response (the filename may be expressed as a path if appropriate for your destination). For example:",
      "language": "unknown"
    },
    {
      "code": "You will need to provide the token contained in this file when creating a job in the next step.\n\nNote\n\nWhen using Sumo Logic, you may find it helpful to have [Live Tail](https://help.sumologic.com/05Search/Live-Tail/About-Live-Tail) open to see the challenge file as soon as it is uploaded.\n\n## Step 2 - Create a job\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Parameters\n\n* **name** (optional) - We suggest using your domain name as the job name; the name cannot be changed after the job is created.\n\n* **destination\\_conf** - Refer to [Destination](https://developers.cloudflare.com/logs/logpush/logpush-job/api-configuration/#destination) for details.\n\n* **dataset** - The category of logs you want to receive. Refer to [Datasets](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/) for the full list of supported datasets; this parameter cannot be changed after the job is created.\n\n* **output\\_options** (optional) - Refer to [Log Output Options](https://developers.cloudflare.com/logs/logpush/logpush-job/log-output-options/).\n\n  * Typically includes the desired fields and timestamp format.\n\n  * Set the timestamp format to `RFC 3339` (`\"timestamp_format\": \"rfc3339\"`) for:\n\n    * Google BigQuery usage.\n    * Automated timestamp parsing within Sumo Logic; refer to [timestamps from Sumo Logic](https://help.sumologic.com/03Send-Data/Sources/04Reference-Information-for-Sources/Timestamps%2C-Time-Zones%2C-Time-Ranges%2C-and-Date-Formats) for details.\n\n* **ownership\\_challenge** - Challenge token required to prove destination ownership.\n\n* **kind** (optional) - Used to differentiate between Logpush and Edge Log Delivery jobs. Refer to [Kind](https://developers.cloudflare.com/logs/logpush/logpush-job/api-configuration/#kind) for details.\n\n* **filter** (optional) - Refer to [Filters](https://developers.cloudflare.com/logs/logpush/logpush-job/filters/) for details.\n\n### Response\n\nIn the response, you get a newly-created job ID. For example:",
      "language": "unknown"
    },
    {
      "code": "## Step 3 - Enable (update) a job\n\nStart by retrieving information about a specific job, using a job ID:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Response",
      "language": "unknown"
    },
    {
      "code": "Note that by default a job is not enabled (`\"enabled\": false`).\n\nIf you do not remember your job ID, you can retrieve it using your zone ID:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "Next, to enable the job, send an update request:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Response",
      "language": "unknown"
    },
    {
      "code": "Once the job is enabled, you will start receiving logs within a few minutes and then in batches as soon as possible until you disable the job. For zones with very high request volume, it may take several hours before you start receiving logs for the first time.\n\nIn addition to modifying `enabled`, you can also update the value for **output\\_options**. To modify **destination\\_conf**, you will need to request an ownership challenge and provide the associated token with your update request. You can also delete your current job and create a new one.\n\nOnce a job has been enabled and has started executing, the **last\\_complete** field will show the time when the last batch of logs was successfully sent to the destination:\n\n### Request to get job by ID and see **last\\_complete** info\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Response",
      "language": "unknown"
    },
    {
      "code": "## Optional - Delete a job\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "Be careful when deleting a job because this action cannot be reversed.\n\n### Response",
      "language": "unknown"
    },
    {
      "code": "## Optional - Retrieve your job\n\nRetrieve a specific job, using the job ID:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Response",
      "language": "unknown"
    },
    {
      "code": "Retrieve all jobs for all datasets:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Response",
      "language": "unknown"
    },
    {
      "code": "## Optional - Update **output\\_options**\n\nIf you want to add (or remove) fields, change the timestamp format, or enable protection against the `Log4j - CVE-2021-44228` vulnerability, first retrieve the current **output\\_options** for your zone.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "### Response",
      "language": "unknown"
    },
    {
      "code": "Next, edit the **output\\_options** as desired and create a `PUT` request. The following example enables the **CVE-2021-44228** redaction option.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Logs Write`",
      "language": "unknown"
    },
    {
      "code": "Note that at this time, the **CVE-2021-44228** option is not available through the UI, and updating your Logpush job through the UI will remove this option.\n\n### Response",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Manage Logpush with Python  Cloudflare Logs docs\ndescription: You can manage your Cloudflare Logpush service using Python. In the\n  script below you can find example requests to create a job, retrieve job\n  details, update job settings, and delete a Logpush job.\nlastUpdated: 2025-07-17T13:10:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/logs/logpush/examples/example-logpush-python/\n  md: https://developers.cloudflare.com/logs/logpush/examples/example-logpush-python/index.md\n---\n\nYou can manage your Cloudflare Logpush service using Python. In the script below you can find example requests to create a job, retrieve job details, update job settings, and delete a Logpush job.\n\nNote\n\nThe examples below are for zone-scoped datasets. Account-scoped datasets should use `<ACCOUNT_ID>` instead of `<ZONE_ID>`.",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "3. Configure the zone transfers",
      "id": "3.-configure-the-zone-transfers"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "1. Stop transferring the zone",
      "id": "1.-stop-transferring-the-zone"
    },
    {
      "level": "h2",
      "text": "2. Prepare for the conversion",
      "id": "2.-prepare-for-the-conversion"
    },
    {
      "level": "h2",
      "text": "3. Convert your zone",
      "id": "3.-convert-your-zone"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "1. Stop transferring the zone",
      "id": "1.-stop-transferring-the-zone"
    },
    {
      "level": "h2",
      "text": "2. Configure your authoritative DNS provider",
      "id": "2.-configure-your-authoritative-dns-provider"
    },
    {
      "level": "h2",
      "text": "3. Convert your Cloudflare zone",
      "id": "3.-convert-your-cloudflare-zone"
    },
    {
      "level": "h2",
      "text": "4. Update nameservers",
      "id": "4.-update-nameservers"
    },
    {
      "level": "h2",
      "text": "Records within the same zone",
      "id": "records-within-the-same-zone"
    },
    {
      "level": "h2",
      "text": "Records pointing to a partial zone within the same account",
      "id": "records-pointing-to-a-partial-zone-within-the-same-account"
    },
    {
      "level": "h3",
      "text": "Auth DNS points to `cdn.cloudflare.net`",
      "id": "auth-dns-points-to-`cdn.cloudflare.net`"
    },
    {
      "level": "h2",
      "text": "Before you begin",
      "id": "before-you-begin"
    },
    {
      "level": "h2",
      "text": "1. Convert your zone and review DNS records",
      "id": "1.-convert-your-zone-and-review-dns-records"
    },
    {
      "level": "h2",
      "text": "2. Verify ownership for your domain",
      "id": "2.-verify-ownership-for-your-domain"
    },
    {
      "level": "h2",
      "text": "3. Add DNS records",
      "id": "3.-add-dns-records"
    },
    {
      "level": "h2",
      "text": "Other record types",
      "id": "other-record-types"
    },
    {
      "level": "h2",
      "text": "How the quick scan works",
      "id": "how-the-quick-scan-works"
    },
    {
      "level": "h2",
      "text": "Use case examples",
      "id": "use-case-examples"
    },
    {
      "level": "h3",
      "text": "Address records",
      "id": "address-records"
    },
    {
      "level": "h3",
      "text": "`www` records",
      "id": "`www`-records"
    },
    {
      "level": "h3",
      "text": "Email records",
      "id": "email-records"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Initializing (Setup)",
      "id": "initializing-(setup)"
    },
    {
      "level": "h2",
      "text": "Pending",
      "id": "pending"
    },
    {
      "level": "h3",
      "text": "Causes",
      "id": "causes"
    },
    {
      "level": "h3",
      "text": "Expected behavior for different plans",
      "id": "expected-behavior-for-different-plans"
    },
    {
      "level": "h2",
      "text": "Active",
      "id": "active"
    },
    {
      "level": "h2",
      "text": "Moved",
      "id": "moved"
    },
    {
      "level": "h3",
      "text": "Expected behavior for different plans",
      "id": "expected-behavior-for-different-plans"
    },
    {
      "level": "h2",
      "text": "Deleted",
      "id": "deleted"
    },
    {
      "level": "h2",
      "text": "Purged",
      "id": "purged"
    },
    {
      "level": "h2",
      "text": "Disable DNSSEC",
      "id": "disable-dnssec"
    },
    {
      "level": "h2",
      "text": "Register the domain",
      "id": "register-the-domain"
    },
    {
      "level": "h2",
      "text": "Resolve DNS for apex domain",
      "id": "resolve-dns-for-apex-domain"
    },
    {
      "level": "h2",
      "text": "Check if the domain is restricted at Cloudflare",
      "id": "check-if-the-domain-is-restricted-at-cloudflare"
    },
    {
      "level": "h2",
      "text": "Contact the zone owner in case of zone hold error",
      "id": "contact-the-zone-owner-in-case-of-zone-hold-error"
    },
    {
      "level": "h2",
      "text": "Check Audit Logs",
      "id": "check-audit-logs"
    },
    {
      "level": "h2",
      "text": "Check registrar for Cloudflare nameservers",
      "id": "check-registrar-for-cloudflare-nameservers"
    },
    {
      "level": "h2",
      "text": "Recover a deleted domain",
      "id": "recover-a-deleted-domain"
    },
    {
      "level": "h2",
      "text": "Requirements",
      "id": "requirements"
    },
    {
      "level": "h2",
      "text": "Setup",
      "id": "setup"
    },
    {
      "level": "h2",
      "text": "Before you begin",
      "id": "before-you-begin"
    },
    {
      "level": "h2",
      "text": "Steps",
      "id": "steps"
    },
    {
      "level": "h2",
      "text": "Available setups",
      "id": "available-setups"
    },
    {
      "level": "h2",
      "text": "How to",
      "id": "how-to"
    },
    {
      "level": "h2",
      "text": "SSL/TLS certificates",
      "id": "ssl/tls-certificates"
    },
    {
      "level": "h2",
      "text": "Access applications",
      "id": "access-applications"
    },
    {
      "level": "h2",
      "text": "How to",
      "id": "how-to"
    },
    {
      "level": "h2",
      "text": "Availability",
      "id": "availability"
    },
    {
      "level": "h2",
      "text": "Notes",
      "id": "notes"
    },
    {
      "level": "h2",
      "text": "How to",
      "id": "how-to"
    },
    {
      "level": "h2",
      "text": "Availability",
      "id": "availability"
    },
    {
      "level": "h2",
      "text": "Root Cause",
      "id": "root-cause"
    },
    {
      "level": "h2",
      "text": "Solution",
      "id": "solution"
    },
    {
      "level": "h2",
      "text": "Delete multiple filters",
      "id": "delete-multiple-filters"
    },
    {
      "level": "h2",
      "text": "Delete a single filter",
      "id": "delete-a-single-filter"
    },
    {
      "level": "h2",
      "text": "Get all filters",
      "id": "get-all-filters"
    },
    {
      "level": "h2",
      "text": "Get by filter ID",
      "id": "get-by-filter-id"
    },
    {
      "level": "h2",
      "text": "Filter object structure and properties",
      "id": "filter-object-structure-and-properties"
    },
    {
      "level": "h2",
      "text": "Update multiple filters",
      "id": "update-multiple-filters"
    },
    {
      "level": "h2",
      "text": "Update a single filter",
      "id": "update-a-single-filter"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Validate expression via query string",
      "id": "validate-expression-via-query-string"
    },
    {
      "level": "h3",
      "text": "Validate expression via JSON object",
      "id": "validate-expression-via-json-object"
    },
    {
      "level": "h2",
      "text": "Delete multiple rules",
      "id": "delete-multiple-rules"
    },
    {
      "level": "h2",
      "text": "Delete a single rule",
      "id": "delete-a-single-rule"
    },
    {
      "level": "h2",
      "text": "Get all rules",
      "id": "get-all-rules"
    },
    {
      "level": "h2",
      "text": "Get rule by ID",
      "id": "get-rule-by-id"
    },
    {
      "level": "h2",
      "text": "Firewall rule example JSON response",
      "id": "firewall-rule-example-json-response"
    },
    {
      "level": "h2",
      "text": "Avoiding priority conflicts",
      "id": "avoiding-priority-conflicts"
    },
    {
      "level": "h2",
      "text": "Update multiple rules",
      "id": "update-multiple-rules"
    },
    {
      "level": "h2",
      "text": "Update a single rule",
      "id": "update-a-single-rule"
    },
    {
      "level": "h2",
      "text": "1. Azure Active Directory configuration",
      "id": "1.-azure-active-directory-configuration"
    },
    {
      "level": "h2",
      "text": "2. Configure Email security to connect to Azure",
      "id": "2.-configure-email-security-to-connect-to-azure"
    },
    {
      "level": "h2",
      "text": "3. Test SSO configuration",
      "id": "3.-test-sso-configuration"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "1. Identity Provider SAML setup",
      "id": "1.-identity-provider-saml-setup"
    },
    {
      "level": "h2",
      "text": "2. Email security SAML setup",
      "id": "2.-email-security-saml-setup"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "1. Create an Email security app in Okta",
      "id": "1.-create-an-email-security-app-in-okta"
    },
    {
      "level": "h2",
      "text": "2. Configure Email security to connect to Okta",
      "id": "2.-configure-email-security-to-connect-to-okta"
    },
    {
      "level": "h2",
      "text": "BCC setup",
      "id": "bcc-setup"
    },
    {
      "level": "h2",
      "text": "Journaling setup",
      "id": "journaling-setup"
    },
    {
      "level": "h2",
      "text": "Microsoft Graph API",
      "id": "microsoft-graph-api"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "Create an alert webhook",
      "id": "create-an-alert-webhook"
    },
    {
      "level": "h2",
      "text": "Create a domain",
      "id": "create-a-domain"
    },
    {
      "level": "h2",
      "text": "Edit a domain",
      "id": "edit-a-domain"
    },
    {
      "level": "h2",
      "text": "Delete a domain",
      "id": "delete-a-domain"
    },
    {
      "level": "h2",
      "text": "Add a domain",
      "id": "add-a-domain"
    },
    {
      "level": "h2",
      "text": "Exempt TLS inspection",
      "id": "exempt-tls-inspection"
    },
    {
      "level": "h2",
      "text": "Disposition actions",
      "id": "disposition-actions"
    },
    {
      "level": "h2",
      "text": "Email Link Isolation",
      "id": "email-link-isolation"
    },
    {
      "level": "h3",
      "text": "Previous disposition actions",
      "id": "previous-disposition-actions"
    },
    {
      "level": "h3",
      "text": "Enable Email Link Isolation",
      "id": "enable-email-link-isolation"
    },
    {
      "level": "h2",
      "text": "URL rewrite ignore patterns",
      "id": "url-rewrite-ignore-patterns"
    },
    {
      "level": "h2",
      "text": "Update text add-ons",
      "id": "update-text-add-ons"
    },
    {
      "level": "h2",
      "text": "Add an allowed pattern",
      "id": "add-an-allowed-pattern"
    },
    {
      "level": "h3",
      "text": "CSV uploads",
      "id": "csv-uploads"
    },
    {
      "level": "h2",
      "text": "Add a blocked sender",
      "id": "add-a-blocked-sender"
    },
    {
      "level": "h3",
      "text": "CSV uploads",
      "id": "csv-uploads"
    },
    {
      "level": "h2",
      "text": "Default behavior",
      "id": "default-behavior"
    },
    {
      "level": "h2",
      "text": "Add a trusted domain",
      "id": "add-a-trusted-domain"
    },
    {
      "level": "h3",
      "text": "CSV uploads",
      "id": "csv-uploads"
    },
    {
      "level": "h2",
      "text": "Available configurations",
      "id": "available-configurations"
    },
    {
      "level": "h2",
      "text": "Access Added Detections",
      "id": "access-added-detections"
    },
    {
      "level": "h2",
      "text": "Setup",
      "id": "setup"
    },
    {
      "level": "h3",
      "text": "Using the dashboard",
      "id": "using-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Integrating a directory",
      "id": "integrating-a-directory"
    },
    {
      "level": "h3",
      "text": "Review threats",
      "id": "review-threats"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Set up PhishNet for Google Workspace",
      "id": "set-up-phishnet-for-google-workspace"
    },
    {
      "level": "h2",
      "text": "Submit phish with PhishNet",
      "id": "submit-phish-with-phishnet"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Set up PhishNet for Office 365",
      "id": "set-up-phishnet-for-office-365"
    },
    {
      "level": "h2",
      "text": "Submit phish with PhishNet",
      "id": "submit-phish-with-phishnet"
    },
    {
      "level": "h2",
      "text": "1. Authorize Email security with Office 365 for retraction",
      "id": "1.-authorize-email-security-with-office-365-for-retraction"
    },
    {
      "level": "h3",
      "text": "How does the authorization work?",
      "id": "how-does-the-authorization-work?"
    },
    {
      "level": "h2",
      "text": "2. Configure auto-retraction actions",
      "id": "2.-configure-auto-retraction-actions"
    },
    {
      "level": "h3",
      "text": "Post delivery retractions for new threats",
      "id": "post-delivery-retractions-for-new-threats"
    },
    {
      "level": "h2",
      "text": "3. Configure journaling",
      "id": "3.-configure-journaling"
    },
    {
      "level": "h3",
      "text": "1. Configure connector for delivery to Email security (formerly Area 1) (if required)",
      "id": "1.-configure-connector-for-delivery-to-email-security-(formerly-area-1)-(if-required)"
    },
    {
      "level": "h3",
      "text": "2. Configure journal rule",
      "id": "2.-configure-journal-rule"
    },
    {
      "level": "h3",
      "text": "3. Compliance",
      "id": "3.-compliance"
    },
    {
      "level": "h2",
      "text": "4. Manual message retraction",
      "id": "4.-manual-message-retraction"
    },
    {
      "level": "h2",
      "text": "Recover hard deleted messages",
      "id": "recover-hard-deleted-messages"
    },
    {
      "level": "h2",
      "text": "Geographic locations",
      "id": "geographic-locations"
    },
    {
      "level": "h2",
      "text": "Search terms",
      "id": "search-terms"
    },
    {
      "level": "h2",
      "text": "Data retention",
      "id": "data-retention"
    },
    {
      "level": "h2",
      "text": "Scope of data retained",
      "id": "scope-of-data-retained"
    },
    {
      "level": "h2",
      "text": "1. Configure Splunk HTTP Event Collector",
      "id": "1.-configure-splunk-http-event-collector"
    },
    {
      "level": "h2",
      "text": "2. Test your HTTP Event Collector",
      "id": "2.-test-your-http-event-collector"
    },
    {
      "level": "h3",
      "text": "Request formats",
      "id": "request-formats"
    },
    {
      "level": "h2",
      "text": "3. Configure Email security",
      "id": "3.-configure-email-security"
    },
    {
      "level": "h2",
      "text": "1. Configure the Sumologic Collector",
      "id": "1.-configure-the-sumologic-collector"
    },
    {
      "level": "h2",
      "text": "2. Configure Email security",
      "id": "2.-configure-email-security"
    },
    {
      "level": "h2",
      "text": "Key features",
      "id": "key-features"
    },
    {
      "level": "h2",
      "text": "Retention",
      "id": "retention"
    },
    {
      "level": "h2",
      "text": "Access Audit Logs",
      "id": "access-audit-logs"
    },
    {
      "level": "h3",
      "text": "API",
      "id": "api"
    },
    {
      "level": "h3",
      "text": "Dashboard",
      "id": "dashboard"
    },
    {
      "level": "h2",
      "text": "Logpush job",
      "id": "logpush-job"
    },
    {
      "level": "h2",
      "text": "Audit Log structure",
      "id": "audit-log-structure"
    },
    {
      "level": "h3",
      "text": "Initiation type",
      "id": "initiation-type"
    },
    {
      "level": "h3",
      "text": "Activity Scope",
      "id": "activity-scope"
    },
    {
      "level": "h2",
      "text": "Example how to query Audit Logs",
      "id": "example-how-to-query-audit-logs"
    },
    {
      "level": "h2",
      "text": "Common terms and definitions",
      "id": "common-terms-and-definitions"
    },
    {
      "level": "h3",
      "text": "Actor",
      "id": "actor"
    },
    {
      "level": "h3",
      "text": "Action",
      "id": "action"
    },
    {
      "level": "h3",
      "text": "Account",
      "id": "account"
    },
    {
      "level": "h3",
      "text": "Resource",
      "id": "resource"
    },
    {
      "level": "h3",
      "text": "Audit Log ID",
      "id": "audit-log-id"
    },
    {
      "level": "h2",
      "text": "View active sessions",
      "id": "view-active-sessions"
    },
    {
      "level": "h2",
      "text": "Revoke active sessions",
      "id": "revoke-active-sessions"
    },
    {
      "level": "h2",
      "text": "Access audit logs",
      "id": "access-audit-logs"
    },
    {
      "level": "h3",
      "text": "Using the dashboard",
      "id": "using-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Using the API",
      "id": "using-the-api"
    },
    {
      "level": "h2",
      "text": "Retention",
      "id": "retention"
    },
    {
      "level": "h2",
      "text": "Objectives",
      "id": "objectives"
    },
    {
      "level": "h2",
      "text": "Expected behaviors",
      "id": "expected-behaviors"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Gather the required data",
      "id": "gather-the-required-data"
    },
    {
      "level": "h3",
      "text": "Get the Account ID",
      "id": "get-the-account-id"
    },
    {
      "level": "h3",
      "text": "Create an API token",
      "id": "create-an-api-token"
    },
    {
      "level": "h2",
      "text": "Step 1 - Change your password",
      "id": "step-1---change-your-password"
    },
    {
      "level": "h2",
      "text": "Step 2 - Revoke active account sessions",
      "id": "step-2---revoke-active-account-sessions"
    },
    {
      "level": "h2",
      "text": "Step 3 - Enable Two-Factor Authentication (2FA)",
      "id": "step-3---enable-two-factor-authentication-(2fa)"
    },
    {
      "level": "h2",
      "text": "Step 4 - Change API keys and tokens",
      "id": "step-4---change-api-keys-and-tokens"
    },
    {
      "level": "h3",
      "text": "API keys",
      "id": "api-keys"
    },
    {
      "level": "h3",
      "text": "API tokens",
      "id": "api-tokens"
    },
    {
      "level": "h2",
      "text": "Step 5 - Review the audit log",
      "id": "step-5---review-the-audit-log"
    },
    {
      "level": "h2",
      "text": "Availability",
      "id": "availability"
    },
    {
      "level": "h2",
      "text": "Enable zone holds",
      "id": "enable-zone-holds"
    },
    {
      "level": "h2",
      "text": "Release zone holds",
      "id": "release-zone-holds"
    },
    {
      "level": "h2",
      "text": "Create an account owned token",
      "id": "create-an-account-owned-token"
    },
    {
      "level": "h2",
      "text": "Compatibility matrix",
      "id": "compatibility-matrix"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "View/Change your Origin CA keys",
      "id": "view/change-your-origin-ca-keys"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "View your Global API key",
      "id": "view-your-global-api-key"
    },
    {
      "level": "h2",
      "text": "Change your Global API key",
      "id": "change-your-global-api-key"
    },
    {
      "level": "h2",
      "text": "Account-level access control",
      "id": "account-level-access-control"
    },
    {
      "level": "h2",
      "text": "Member-level access control",
      "id": "member-level-access-control"
    },
    {
      "level": "h2",
      "text": "Generating the initial token",
      "id": "generating-the-initial-token"
    },
    {
      "level": "h3",
      "text": "Recommendations",
      "id": "recommendations"
    },
    {
      "level": "h2",
      "text": "Creating API tokens with the API",
      "id": "creating-api-tokens-with-the-api"
    },
    {
      "level": "h3",
      "text": "1. Define the Access Policy",
      "id": "1.-define-the-access-policy"
    },
    {
      "level": "h3",
      "text": "2. Define the restrictions",
      "id": "2.-define-the-restrictions"
    },
    {
      "level": "h3",
      "text": "3. Create the token",
      "id": "3.-create-the-token"
    },
    {
      "level": "h2",
      "text": "Using Cloudflare's APIs",
      "id": "using-cloudflare's-apis"
    },
    {
      "level": "h2",
      "text": "Query parameters",
      "id": "query-parameters"
    },
    {
      "level": "h3",
      "text": "Pagination",
      "id": "pagination"
    },
    {
      "level": "h2",
      "text": "Making API calls on Windows",
      "id": "making-api-calls-on-windows"
    },
    {
      "level": "h3",
      "text": "Using a Command Prompt window",
      "id": "using-a-command-prompt-window"
    },
    {
      "level": "h3",
      "text": "Using PowerShell",
      "id": "using-powershell"
    },
    {
      "level": "h2",
      "text": "Environment variables",
      "id": "environment-variables"
    },
    {
      "level": "h3",
      "text": "Define an environment variable",
      "id": "define-an-environment-variable"
    },
    {
      "level": "h3",
      "text": "Reference an environment variable",
      "id": "reference-an-environment-variable"
    },
    {
      "level": "h2",
      "text": "Client IP address range filtering",
      "id": "client-ip-address-range-filtering"
    },
    {
      "level": "h2",
      "text": "Time to live (TTL) constraints",
      "id": "time-to-live-(ttl)-constraints"
    },
    {
      "level": "h2",
      "text": "2025-12-09",
      "id": "2025-12-09"
    },
    {
      "level": "h2",
      "text": "2025-11-11",
      "id": "2025-11-11"
    },
    {
      "level": "h2",
      "text": "2025-11-03",
      "id": "2025-11-03"
    },
    {
      "level": "h2",
      "text": "2025-10-15",
      "id": "2025-10-15"
    },
    {
      "level": "h2",
      "text": "2025-07-01",
      "id": "2025-07-01"
    },
    {
      "level": "h2",
      "text": "2025-07-01",
      "id": "2025-07-01"
    },
    {
      "level": "h2",
      "text": "2025-06-15",
      "id": "2025-06-15"
    },
    {
      "level": "h2",
      "text": "2025-06-15",
      "id": "2025-06-15"
    },
    {
      "level": "h2",
      "text": "2025-06-15",
      "id": "2025-06-15"
    },
    {
      "level": "h2",
      "text": "2025-06-08",
      "id": "2025-06-08"
    },
    {
      "level": "h2",
      "text": "2025-03-23",
      "id": "2025-03-23"
    },
    {
      "level": "h2",
      "text": "2025-03-20",
      "id": "2025-03-20"
    },
    {
      "level": "h2",
      "text": "2025-03-17",
      "id": "2025-03-17"
    },
    {
      "level": "h2",
      "text": "2025-03-14",
      "id": "2025-03-14"
    },
    {
      "level": "h2",
      "text": "2025-03-11",
      "id": "2025-03-11"
    },
    {
      "level": "h2",
      "text": "2025-02-21",
      "id": "2025-02-21"
    },
    {
      "level": "h2",
      "text": "2024-12-09",
      "id": "2024-12-09"
    },
    {
      "level": "h2",
      "text": "2024-11-30",
      "id": "2024-11-30"
    },
    {
      "level": "h2",
      "text": "2024-10-01",
      "id": "2024-10-01"
    },
    {
      "level": "h2",
      "text": "2024-09-13",
      "id": "2024-09-13"
    },
    {
      "level": "h2",
      "text": "2024-08-15",
      "id": "2024-08-15"
    },
    {
      "level": "h2",
      "text": "2024-08-05",
      "id": "2024-08-05"
    },
    {
      "level": "h2",
      "text": "2024-07-14",
      "id": "2024-07-14"
    },
    {
      "level": "h2",
      "text": "2024-06-30",
      "id": "2024-06-30"
    },
    {
      "level": "h2",
      "text": "2024-06-14",
      "id": "2024-06-14"
    },
    {
      "level": "h2",
      "text": "2024-05-31",
      "id": "2024-05-31"
    },
    {
      "level": "h2",
      "text": "2024-03-31",
      "id": "2024-03-31"
    },
    {
      "level": "h2",
      "text": "2024-02-04",
      "id": "2024-02-04"
    },
    {
      "level": "h2",
      "text": "2023-07-01",
      "id": "2023-07-01"
    },
    {
      "level": "h2",
      "text": "2023-07-01",
      "id": "2023-07-01"
    },
    {
      "level": "h2",
      "text": "2023-06-06",
      "id": "2023-06-06"
    },
    {
      "level": "h2",
      "text": "2023-04-03",
      "id": "2023-04-03"
    },
    {
      "level": "h2",
      "text": "2023-03-19",
      "id": "2023-03-19"
    },
    {
      "level": "h2",
      "text": "2022-10-11",
      "id": "2022-10-11"
    },
    {
      "level": "h2",
      "text": "2022-07-01",
      "id": "2022-07-01"
    },
    {
      "level": "h2",
      "text": "2021-03-01",
      "id": "2021-03-01"
    },
    {
      "level": "h2",
      "text": "2020-04-02",
      "id": "2020-04-02"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "API token limits",
      "id": "api-token-limits"
    },
    {
      "level": "h2",
      "text": "Rate limiting headers",
      "id": "rate-limiting-headers"
    },
    {
      "level": "h2",
      "text": "User permissions",
      "id": "user-permissions"
    },
    {
      "level": "h2",
      "text": "Account permissions",
      "id": "account-permissions"
    },
    {
      "level": "h2",
      "text": "Zone permissions",
      "id": "zone-permissions"
    },
    {
      "level": "h2",
      "text": "When to use cURL vs SDK",
      "id": "when-to-use-curl-vs-sdk"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "With cURL:",
      "id": "with-curl:"
    },
    {
      "level": "h3",
      "text": "With the TypeScript SDK:",
      "id": "with-the-typescript-sdk:"
    },
    {
      "level": "h2",
      "text": "Migration steps",
      "id": "migration-steps"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Understanding the Cloudflare Cookies",
      "id": "understanding-the-cloudflare-cookies"
    },
    {
      "level": "h3",
      "text": "\\_\\_cflb cookie for Cloudflare Load Balancer session affinity",
      "id": "\\_\\_cflb-cookie-for-cloudflare-load-balancer-session-affinity"
    },
    {
      "level": "h3",
      "text": "\\_\\_cf\\_bm cookie for Cloudflare bot products",
      "id": "\\_\\_cf\\_bm-cookie-for-cloudflare-bot-products"
    },
    {
      "level": "h3",
      "text": "\\_\\_cfseq cookie for Cloudflare bot products",
      "id": "\\_\\_cfseq-cookie-for-cloudflare-bot-products"
    },
    {
      "level": "h3",
      "text": "cf\\_clearance cookie for Cloudflare bot products",
      "id": "cf\\_clearance-cookie-for-cloudflare-bot-products"
    },
    {
      "level": "h3",
      "text": "cf\\_ob\\_info and cf\\_use\\_ob cookie for Cloudflare Always Online",
      "id": "cf\\_ob\\_info-and-cf\\_use\\_ob-cookie-for-cloudflare-always-online"
    },
    {
      "level": "h3",
      "text": "\\_\\_cfwaitingroom for Cloudflare Waiting Room",
      "id": "\\_\\_cfwaitingroom-for-cloudflare-waiting-room"
    },
    {
      "level": "h3",
      "text": "\\_\\_cfruid to support Cloudflare Rate Limiting (previous version)",
      "id": "\\_\\_cfruid-to-support-cloudflare-rate-limiting-(previous-version)"
    },
    {
      "level": "h3",
      "text": "\\_cfuvid for Rate Limiting Rules",
      "id": "\\_cfuvid-for-rate-limiting-rules"
    },
    {
      "level": "h3",
      "text": "Additional cookies used by the Challenge Platform",
      "id": "additional-cookies-used-by-the-challenge-platform"
    },
    {
      "level": "h3",
      "text": "Cloudflare Access cookies",
      "id": "cloudflare-access-cookies"
    },
    {
      "level": "h2",
      "text": "Public data protection and compliance documentation",
      "id": "public-data-protection-and-compliance-documentation"
    },
    {
      "level": "h2",
      "text": "Tax documentation",
      "id": "tax-documentation"
    },
    {
      "level": "h2",
      "text": "Using a CSP with Cloudflare",
      "id": "using-a-csp-with-cloudflare"
    },
    {
      "level": "h3",
      "text": "Product requirements",
      "id": "product-requirements"
    },
    {
      "level": "h2",
      "text": "School Eligibility",
      "id": "school-eligibility"
    },
    {
      "level": "h2",
      "text": "Childrens Internet Protection Act (CIPA)",
      "id": "childrens-internet-protection-act-(cipa)"
    },
    {
      "level": "h3",
      "text": "CIPA Requirements",
      "id": "cipa-requirements"
    },
    {
      "level": "h3",
      "text": "Configuration",
      "id": "configuration"
    },
    {
      "level": "h3",
      "text": "Onboarding Guide",
      "id": "onboarding-guide"
    },
    {
      "level": "h2",
      "text": "Using Cloudflare's Services",
      "id": "using-cloudflare's-services"
    },
    {
      "level": "h2",
      "text": "I'm a website operator and my content was redirected for Terms of Service violations",
      "id": "i'm-a-website-operator-and-my-content-was-redirected-for-terms-of-service-violations"
    },
    {
      "level": "h2",
      "text": "Options for web admins to remove redirects",
      "id": "options-for-web-admins-to-remove-redirects"
    },
    {
      "level": "h2",
      "text": "Delivering videos with Cloudflare using paid products",
      "id": "delivering-videos-with-cloudflare-using-paid-products"
    },
    {
      "level": "h3",
      "text": "Option 1: Cloudflare Stream",
      "id": "option-1:-cloudflare-stream"
    },
    {
      "level": "h3",
      "text": "Option 2: Stream Delivery (Enterprise only)",
      "id": "option-2:-stream-delivery-(enterprise-only)"
    },
    {
      "level": "h2",
      "text": "Getting information on the content you are delivering",
      "id": "getting-information-on-the-content-you-are-delivering"
    },
    {
      "level": "h2",
      "text": "Still have questions? Contact support",
      "id": "still-have-questions?-contact-support"
    },
    {
      "level": "h2",
      "text": "DMCA complaints",
      "id": "dmca-complaints"
    },
    {
      "level": "h2",
      "text": "Phishing",
      "id": "phishing"
    },
    {
      "level": "h2",
      "text": "Trademark infringement",
      "id": "trademark-infringement"
    },
    {
      "level": "h2",
      "text": "Malware sites",
      "id": "malware-sites"
    },
    {
      "level": "h2",
      "text": "Child exploitation material",
      "id": "child-exploitation-material"
    },
    {
      "level": "h2",
      "text": "Get the URL for specific content",
      "id": "get-the-url-for-specific-content"
    },
    {
      "level": "h2",
      "text": "Submitting the abuse report",
      "id": "submitting-the-abuse-report"
    },
    {
      "level": "h2",
      "text": "Submit reports",
      "id": "submit-reports"
    },
    {
      "level": "h2",
      "text": "View submitted reports",
      "id": "view-submitted-reports"
    },
    {
      "level": "h2",
      "text": "Receive notifications",
      "id": "receive-notifications"
    },
    {
      "level": "h2",
      "text": "Custom paths",
      "id": "custom-paths"
    },
    {
      "level": "h3",
      "text": "Basic version",
      "id": "basic-version"
    },
    {
      "level": "h3",
      "text": "Advanced version",
      "id": "advanced-version"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Optimize format",
      "id": "optimize-format"
    },
    {
      "level": "h2",
      "text": "Source details",
      "id": "source-details"
    },
    {
      "level": "h2",
      "text": "Abort import jobs",
      "id": "abort-import-jobs"
    },
    {
      "level": "h2",
      "text": "Create your first import job",
      "id": "create-your-first-import-job"
    },
    {
      "level": "h2",
      "text": "Define a new source",
      "id": "define-a-new-source"
    },
    {
      "level": "h2",
      "text": "Define additional import jobs",
      "id": "define-additional-import-jobs"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "View account members",
      "id": "view-account-members"
    },
    {
      "level": "h2",
      "text": "Add account members",
      "id": "add-account-members"
    },
    {
      "level": "h2",
      "text": "Edit member permissions",
      "id": "edit-member-permissions"
    },
    {
      "level": "h2",
      "text": "Resend an invitation",
      "id": "resend-an-invitation"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Remove account members",
      "id": "remove-account-members"
    },
    {
      "level": "h3",
      "text": "Using the dashboard",
      "id": "using-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Using the API",
      "id": "using-the-api"
    },
    {
      "level": "h2",
      "text": "Enable 2FA",
      "id": "enable-2fa"
    },
    {
      "level": "h2",
      "text": "Additional configurations",
      "id": "additional-configurations"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Creating a mTLS rule",
      "id": "creating-a-mtls-rule"
    },
    {
      "level": "h2",
      "text": "Skip rules",
      "id": "skip-rules"
    },
    {
      "level": "h2",
      "text": "Rulesets",
      "id": "rulesets"
    },
    {
      "level": "h2",
      "text": "Custom Lists",
      "id": "custom-lists"
    },
    {
      "level": "h2",
      "text": "Managed Lists",
      "id": "managed-lists"
    },
    {
      "level": "h2",
      "text": "Creating a rule",
      "id": "creating-a-rule"
    },
    {
      "level": "h2",
      "text": "Advanced configuration",
      "id": "advanced-configuration"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Features by plan type",
      "id": "features-by-plan-type"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Types of queries",
      "id": "types-of-queries"
    },
    {
      "level": "h2",
      "text": "Alerts",
      "id": "alerts"
    },
    {
      "level": "h2",
      "text": "Dashboard analytics",
      "id": "dashboard-analytics"
    },
    {
      "level": "h2",
      "text": "Severity properties",
      "id": "severity-properties"
    },
    {
      "level": "h2",
      "text": "Project Cybersafe Schools Eligibility",
      "id": "project-cybersafe-schools-eligibility"
    },
    {
      "level": "h2",
      "text": "Childrens Internet Protection Act (CIPA)",
      "id": "childrens-internet-protection-act-(cipa)"
    },
    {
      "level": "h3",
      "text": "Requirements",
      "id": "requirements"
    },
    {
      "level": "h3",
      "text": "Configuration",
      "id": "configuration"
    },
    {
      "level": "h2",
      "text": "Life of a DNS query",
      "id": "life-of-a-dns-query"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Purpose of DNS filtering",
      "id": "purpose-of-dns-filtering"
    },
    {
      "level": "h2",
      "text": "How DNS filtering works",
      "id": "how-dns-filtering-works"
    },
    {
      "level": "h2",
      "text": "DNS filtering vs. Secure Web Gateway",
      "id": "dns-filtering-vs.-secure-web-gateway"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "Enable the block page for DNS policies",
      "id": "enable-the-block-page-for-dns-policies"
    },
    {
      "level": "h2",
      "text": "Customize the block page",
      "id": "customize-the-block-page"
    },
    {
      "level": "h3",
      "text": "Add a logo image",
      "id": "add-a-logo-image"
    },
    {
      "level": "h2",
      "text": "Create CIPA policy",
      "id": "create-cipa-policy"
    },
    {
      "level": "h2",
      "text": "Test a policy in the browser",
      "id": "test-a-policy-in-the-browser"
    },
    {
      "level": "h2",
      "text": "Add a DNS location",
      "id": "add-a-dns-location"
    },
    {
      "level": "h2",
      "text": "Change DNS resolver at the network level",
      "id": "change-dns-resolver-at-the-network-level"
    },
    {
      "level": "h2",
      "text": "Change DNS resolver in the browser",
      "id": "change-dns-resolver-in-the-browser"
    },
    {
      "level": "h2",
      "text": "More locations",
      "id": "more-locations"
    },
    {
      "level": "h2",
      "text": "Create reusable policy components",
      "id": "create-reusable-policy-components"
    },
    {
      "level": "h2",
      "text": "Define your domain structure",
      "id": "define-your-domain-structure"
    },
    {
      "level": "h3",
      "text": "Multiple domains in an application",
      "id": "multiple-domains-in-an-application"
    },
    {
      "level": "h2",
      "text": "Add your application to Access",
      "id": "add-your-application-to-access"
    },
    {
      "level": "h2",
      "text": "Set up External Evaluation rule",
      "id": "set-up-external-evaluation-rule"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Enable Browser Isolation",
      "id": "enable-browser-isolation"
    },
    {
      "level": "h2",
      "text": "Example Access policies",
      "id": "example-access-policies"
    },
    {
      "level": "h2",
      "text": "Example HTTP policies",
      "id": "example-http-policies"
    },
    {
      "level": "h3",
      "text": "Disable file downloads in isolated browser",
      "id": "disable-file-downloads-in-isolated-browser"
    },
    {
      "level": "h3",
      "text": "Block file downloads of sensitive data",
      "id": "block-file-downloads-of-sensitive-data"
    },
    {
      "level": "h2",
      "text": "Setup",
      "id": "setup"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Alternatives to clientless access",
      "id": "alternatives-to-clientless-access"
    },
    {
      "level": "h3",
      "text": "Device client",
      "id": "device-client"
    },
    {
      "level": "h3",
      "text": "Identity provider workarounds",
      "id": "identity-provider-workarounds"
    },
    {
      "level": "h3",
      "text": "Enterprise browsers",
      "id": "enterprise-browsers"
    },
    {
      "level": "h2",
      "text": "Why Cloudflare for clientless access",
      "id": "why-cloudflare-for-clientless-access"
    },
    {
      "level": "h2",
      "text": "Enable the App Launcher",
      "id": "enable-the-app-launcher"
    },
    {
      "level": "h2",
      "text": "Add a tile to the App Launcher",
      "id": "add-a-tile-to-the-app-launcher"
    },
    {
      "level": "h2",
      "text": "Customize App Launcher appearance",
      "id": "customize-app-launcher-appearance"
    },
    {
      "level": "h2",
      "text": "Types of block pages",
      "id": "types-of-block-pages"
    },
    {
      "level": "h3",
      "text": "Identity versus non-identity",
      "id": "identity-versus-non-identity"
    },
    {
      "level": "h2",
      "text": "Create a custom block page",
      "id": "create-a-custom-block-page"
    },
    {
      "level": "h2",
      "text": "Customize the login page",
      "id": "customize-the-login-page"
    },
    {
      "level": "h3",
      "text": "Create a tag",
      "id": "create-a-tag"
    },
    {
      "level": "h3",
      "text": "Tag an Access application",
      "id": "tag-an-access-application"
    },
    {
      "level": "h2",
      "text": "Deploy another instance of cloudflared",
      "id": "deploy-another-instance-of-cloudflared"
    },
    {
      "level": "h2",
      "text": "Standardize public hostnames",
      "id": "standardize-public-hostnames"
    },
    {
      "level": "h2",
      "text": "Disable TLS verification",
      "id": "disable-tls-verification"
    },
    {
      "level": "h2",
      "text": "(Optional) Add `Host` header to accommodate local traffic management tools",
      "id": "(optional)-add-`host`-header-to-accommodate-local-traffic-management-tools"
    },
    {
      "level": "h2",
      "text": "Enable tunnel notifications",
      "id": "enable-tunnel-notifications"
    },
    {
      "level": "h2",
      "text": "Update cloudflared",
      "id": "update-cloudflared"
    },
    {
      "level": "h2",
      "text": "Create a tunnel",
      "id": "create-a-tunnel"
    },
    {
      "level": "h2",
      "text": "Publish an application",
      "id": "publish-an-application"
    },
    {
      "level": "h2",
      "text": "Additional resources",
      "id": "additional-resources"
    },
    {
      "level": "h2",
      "text": "Add a site to Cloudflare",
      "id": "add-a-site-to-cloudflare"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Sign up for Zero Trust",
      "id": "sign-up-for-zero-trust"
    },
    {
      "level": "h2",
      "text": "(Optional) Manage Zero Trust in Terraform",
      "id": "(optional)-manage-zero-trust-in-terraform"
    },
    {
      "level": "h2",
      "text": "Consume the Cloudflare JWT",
      "id": "consume-the-cloudflare-jwt"
    },
    {
      "level": "h2",
      "text": "Send authorization headers with Workers",
      "id": "send-authorization-headers-with-workers"
    },
    {
      "level": "h2",
      "text": "Potential solutions",
      "id": "potential-solutions"
    },
    {
      "level": "h2",
      "text": "Recommended solution",
      "id": "recommended-solution"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create a Terraform configuration directory",
      "id": "1.-create-a-terraform-configuration-directory"
    },
    {
      "level": "h2",
      "text": "2. Declare providers and variables",
      "id": "2.-declare-providers-and-variables"
    },
    {
      "level": "h2",
      "text": "3. Configure Cloudflare resources",
      "id": "3.-configure-cloudflare-resources"
    },
    {
      "level": "h3",
      "text": "Add published application to Cloudflare Tunnel",
      "id": "add-published-application-to-cloudflare-tunnel"
    },
    {
      "level": "h3",
      "text": "Create an Access application",
      "id": "create-an-access-application"
    },
    {
      "level": "h3",
      "text": "Create an Access policy",
      "id": "create-an-access-policy"
    },
    {
      "level": "h2",
      "text": "4. Deploy Terraform",
      "id": "4.-deploy-terraform"
    },
    {
      "level": "h2",
      "text": "Configure static routes",
      "id": "configure-static-routes"
    },
    {
      "level": "h3",
      "text": "Create a static route",
      "id": "create-a-static-route"
    },
    {
      "level": "h3",
      "text": "Edit a static route",
      "id": "edit-a-static-route"
    },
    {
      "level": "h3",
      "text": "Delete static route",
      "id": "delete-static-route"
    },
    {
      "level": "h2",
      "text": "Configure BGP routes",
      "id": "configure-bgp-routes"
    },
    {
      "level": "h3",
      "text": "Choose an ASN for BGP peering",
      "id": "choose-an-asn-for-bgp-peering"
    },
    {
      "level": "h3",
      "text": "Set up BGP peering",
      "id": "set-up-bgp-peering"
    },
    {
      "level": "h2",
      "text": "Ways to onboard traffic to Cloudflare",
      "id": "ways-to-onboard-traffic-to-cloudflare"
    },
    {
      "level": "h3",
      "text": "GRE and IPsec tunnels",
      "id": "gre-and-ipsec-tunnels"
    },
    {
      "level": "h3",
      "text": "Network Interconnect (CNI)",
      "id": "network-interconnect-(cni)"
    },
    {
      "level": "h2",
      "text": "Add tunnels",
      "id": "add-tunnels"
    },
    {
      "level": "h2",
      "text": "Bidirectional vs unidirectional health checks",
      "id": "bidirectional-vs-unidirectional-health-checks"
    },
    {
      "level": "h3",
      "text": "Legacy bidirectional health checks",
      "id": "legacy-bidirectional-health-checks"
    },
    {
      "level": "h2",
      "text": "Create a Gateway policy for monitoring and evaluating all AI tool usage",
      "id": "create-a-gateway-policy-for-monitoring-and-evaluating-all-ai-tool-usage"
    },
    {
      "level": "h2",
      "text": "Create a Gateway policy to redirect users towards approved AI tools",
      "id": "create-a-gateway-policy-to-redirect-users-towards-approved-ai-tools"
    },
    {
      "level": "h2",
      "text": "Redirect users towards approved AI tools",
      "id": "redirect-users-towards-approved-ai-tools"
    },
    {
      "level": "h2",
      "text": "Capture prompts to prevent data loss",
      "id": "capture-prompts-to-prevent-data-loss"
    },
    {
      "level": "h2",
      "text": "Configure Gateway to use ChatGPT workspace header",
      "id": "configure-gateway-to-use-chatgpt-workspace-header"
    },
    {
      "level": "h2",
      "text": "Order your policies for specific inspection and enforcement",
      "id": "order-your-policies-for-specific-inspection-and-enforcement"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "How does MCP work?",
      "id": "how-does-mcp-work?"
    },
    {
      "level": "h2",
      "text": "What are the security concerns with MCP?",
      "id": "what-are-the-security-concerns-with-mcp?"
    },
    {
      "level": "h2",
      "text": "Manage the risks of shadow AI",
      "id": "manage-the-risks-of-shadow-ai"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h3",
      "text": "Distributing requests to pools",
      "id": "distributing-requests-to-pools"
    },
    {
      "level": "h3",
      "text": "Distributing requests within pools",
      "id": "distributing-requests-within-pools"
    },
    {
      "level": "h3",
      "text": "Endpoint health",
      "id": "endpoint-health"
    },
    {
      "level": "h3",
      "text": "Pool health",
      "id": "pool-health"
    },
    {
      "level": "h3",
      "text": "Specialized routing",
      "id": "specialized-routing"
    },
    {
      "level": "h2",
      "text": "Unexpected health status",
      "id": "unexpected-health-status"
    },
    {
      "level": "h2",
      "text": "Routing strategy",
      "id": "routing-strategy"
    },
    {
      "level": "h2",
      "text": "Usage-based notifications",
      "id": "usage-based-notifications"
    },
    {
      "level": "h2",
      "text": "Additional configuration options",
      "id": "additional-configuration-options"
    },
    {
      "level": "h2",
      "text": "Create a load balancer",
      "id": "create-a-load-balancer"
    },
    {
      "level": "h2",
      "text": "Shared configurations",
      "id": "shared-configurations"
    },
    {
      "level": "h2",
      "text": "Unique configurations",
      "id": "unique-configurations"
    },
    {
      "level": "h2",
      "text": "Policies",
      "id": "policies"
    },
    {
      "level": "h2",
      "text": "Weights",
      "id": "weights"
    },
    {
      "level": "h3",
      "text": "Customize weights",
      "id": "customize-weights"
    },
    {
      "level": "h3",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Customizations",
      "id": "customizations"
    },
    {
      "level": "h3",
      "text": "Pool-level settings",
      "id": "pool-level-settings"
    },
    {
      "level": "h3",
      "text": "Monitor-level settings",
      "id": "monitor-level-settings"
    },
    {
      "level": "h3",
      "text": "Fallback pool",
      "id": "fallback-pool"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h2",
      "text": "Layer 7 load balancing",
      "id": "layer-7-load-balancing"
    },
    {
      "level": "h3",
      "text": "Benefits",
      "id": "benefits"
    },
    {
      "level": "h2",
      "text": "DNS-only load balancing",
      "id": "dns-only-load-balancing"
    },
    {
      "level": "h3",
      "text": "Benefits",
      "id": "benefits"
    },
    {
      "level": "h3",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Layer 4 load balancing",
      "id": "layer-4-load-balancing"
    },
    {
      "level": "h2",
      "text": "Label Client Certificates",
      "id": "label-client-certificates"
    },
    {
      "level": "h2",
      "text": "Certificate Revocation",
      "id": "certificate-revocation"
    },
    {
      "level": "h2",
      "text": "Forward a client certificate",
      "id": "forward-a-client-certificate"
    },
    {
      "level": "h2",
      "text": "Bring your own CA for mTLS",
      "id": "bring-your-own-ca-for-mtls"
    },
    {
      "level": "h2",
      "text": "Client Certificate Deployment",
      "id": "client-certificate-deployment"
    },
    {
      "level": "h2",
      "text": "Customize Cipher Suites",
      "id": "customize-cipher-suites"
    },
    {
      "level": "h2",
      "text": "TLS Session Resumption",
      "id": "tls-session-resumption"
    },
    {
      "level": "h2",
      "text": "TLS Session Renegotiation",
      "id": "tls-session-renegotiation"
    },
    {
      "level": "h2",
      "text": "Chain of Trust",
      "id": "chain-of-trust"
    },
    {
      "level": "h2",
      "text": "WAF for Client Certificates",
      "id": "waf-for-client-certificates"
    },
    {
      "level": "h2",
      "text": "Rate Limiting by Client Certificates",
      "id": "rate-limiting-by-client-certificates"
    },
    {
      "level": "h2",
      "text": "Cloudflare API Shield",
      "id": "cloudflare-api-shield"
    },
    {
      "level": "h2",
      "text": "Cloudflare Workers",
      "id": "cloudflare-workers"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h3",
      "text": "Without Cloudflare",
      "id": "without-cloudflare"
    },
    {
      "level": "h3",
      "text": "With Cloudflare",
      "id": "with-cloudflare"
    },
    {
      "level": "h2",
      "text": "How it helps",
      "id": "how-it-helps"
    },
    {
      "level": "h3",
      "text": "DDoS protection",
      "id": "ddos-protection"
    },
    {
      "level": "h3",
      "text": "Caching",
      "id": "caching"
    },
    {
      "level": "h3",
      "text": "Hides origin IP address",
      "id": "hides-origin-ip-address"
    },
    {
      "level": "h2",
      "text": "How to do it",
      "id": "how-to-do-it"
    },
    {
      "level": "h2",
      "text": "Additional resources",
      "id": "additional-resources"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "Restore visitor IP addresses",
      "id": "restore-visitor-ip-addresses"
    },
    {
      "level": "h2",
      "text": "Cloudflare Logs",
      "id": "cloudflare-logs"
    },
    {
      "level": "h2",
      "text": "Bot Management",
      "id": "bot-management"
    },
    {
      "level": "h2",
      "text": "Application layer",
      "id": "application-layer"
    },
    {
      "level": "h2",
      "text": "Transport Layer",
      "id": "transport-layer"
    },
    {
      "level": "h2",
      "text": "Network Layer",
      "id": "network-layer"
    },
    {
      "level": "h2",
      "text": "Rotate IP addresses",
      "id": "rotate-ip-addresses"
    },
    {
      "level": "h2",
      "text": "Review unproxied DNS records",
      "id": "review-unproxied-dns-records"
    },
    {
      "level": "h2",
      "text": "Conceal unproxied DNS records",
      "id": "conceal-unproxied-dns-records"
    },
    {
      "level": "h2",
      "text": "Evaluate mail infrastructure",
      "id": "evaluate-mail-infrastructure"
    },
    {
      "level": "h2",
      "text": "Additional resources",
      "id": "additional-resources"
    },
    {
      "level": "h2",
      "text": "Reduce application requests to the origin",
      "id": "reduce-application-requests-to-the-origin"
    },
    {
      "level": "h3",
      "text": "Caching",
      "id": "caching"
    },
    {
      "level": "h3",
      "text": "Web Application Firewall (WAF)",
      "id": "web-application-firewall-(waf)"
    },
    {
      "level": "h2",
      "text": "Prevent external connections",
      "id": "prevent-external-connections"
    },
    {
      "level": "h2",
      "text": "Custom block page",
      "id": "custom-block-page"
    },
    {
      "level": "h3",
      "text": "Enable the block page for DNS policies",
      "id": "enable-the-block-page-for-dns-policies"
    },
    {
      "level": "h3",
      "text": "Customize the block page",
      "id": "customize-the-block-page"
    },
    {
      "level": "h2",
      "text": "WARP client block notifications",
      "id": "warp-client-block-notifications"
    },
    {
      "level": "h2",
      "text": "Create a list from a CSV file",
      "id": "create-a-list-from-a-csv-file"
    },
    {
      "level": "h2",
      "text": "Create a list manually",
      "id": "create-a-list-manually"
    },
    {
      "level": "h2",
      "text": "Create a Gateway policy",
      "id": "create-a-gateway-policy"
    },
    {
      "level": "h2",
      "text": "Example DNS policy",
      "id": "example-dns-policy"
    },
    {
      "level": "h2",
      "text": "Example network policy",
      "id": "example-network-policy"
    },
    {
      "level": "h3",
      "text": "Catch-all policy",
      "id": "catch-all-policy"
    },
    {
      "level": "h2",
      "text": "Considerations",
      "id": "considerations"
    },
    {
      "level": "h2",
      "text": "Prepare to build policies",
      "id": "prepare-to-build-policies"
    },
    {
      "level": "h3",
      "text": "1. Determine your sources of truth",
      "id": "1.-determine-your-sources-of-truth"
    },
    {
      "level": "h3",
      "text": "2. Define your networks",
      "id": "2.-define-your-networks"
    },
    {
      "level": "h3",
      "text": "3. Define your applications",
      "id": "3.-define-your-applications"
    },
    {
      "level": "h3",
      "text": "4. List existing policies",
      "id": "4.-list-existing-policies"
    },
    {
      "level": "h2",
      "text": "Configure WARP session timeout",
      "id": "configure-warp-session-timeout"
    },
    {
      "level": "h2",
      "text": "Global timeouts",
      "id": "global-timeouts"
    },
    {
      "level": "h3",
      "text": "Common mistake",
      "id": "common-mistake"
    },
    {
      "level": "h2",
      "text": "Why use a VPN",
      "id": "why-use-a-vpn"
    },
    {
      "level": "h2",
      "text": "How a VPN works",
      "id": "how-a-vpn-works"
    },
    {
      "level": "h2",
      "text": "Downsides of a VPN",
      "id": "downsides-of-a-vpn"
    },
    {
      "level": "h2",
      "text": "ZTNA vs. VPNs",
      "id": "ztna-vs.-vpns"
    },
    {
      "level": "h2",
      "text": "Set device enrollment permissions",
      "id": "set-device-enrollment-permissions"
    },
    {
      "level": "h2",
      "text": "Only allow corporate devices",
      "id": "only-allow-corporate-devices"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Configure the default profile",
      "id": "configure-the-default-profile"
    },
    {
      "level": "h2",
      "text": "(Optional) Create an office profile",
      "id": "(optional)-create-an-office-profile"
    },
    {
      "level": "h2",
      "text": "Enable the proxy",
      "id": "enable-the-proxy"
    },
    {
      "level": "h2",
      "text": "Should I enable TLS decryption?",
      "id": "should-i-enable-tls-decryption?"
    },
    {
      "level": "h2",
      "text": "Enable TLS decryption",
      "id": "enable-tls-decryption"
    },
    {
      "level": "h2",
      "text": "Configure user-side certificates",
      "id": "configure-user-side-certificates"
    },
    {
      "level": "h3",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Local Domain Fallback",
      "id": "local-domain-fallback"
    },
    {
      "level": "h3",
      "text": "Add a domain",
      "id": "add-a-domain"
    },
    {
      "level": "h3",
      "text": "Route traffic to fallback server",
      "id": "route-traffic-to-fallback-server"
    },
    {
      "level": "h2",
      "text": "Resolver policies",
      "id": "resolver-policies"
    },
    {
      "level": "h3",
      "text": "Create a resolver policy",
      "id": "create-a-resolver-policy"
    },
    {
      "level": "h2",
      "text": "Install WARP",
      "id": "install-warp"
    },
    {
      "level": "h2",
      "text": "Update Split Tunnels mode",
      "id": "update-split-tunnels-mode"
    },
    {
      "level": "h2",
      "text": "Add a route",
      "id": "add-a-route"
    },
    {
      "level": "h2",
      "text": "Configure Split Tunnels for private network access",
      "id": "configure-split-tunnels-for-private-network-access"
    },
    {
      "level": "h2",
      "text": "MDM policy file",
      "id": "mdm-policy-file"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Create a tunnel",
      "id": "create-a-tunnel"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Cloudflare Tunnel via cloudflared",
      "id": "cloudflare-tunnel-via-cloudflared"
    },
    {
      "level": "h2",
      "text": "Cloudflare Tunnel via WARP Connector",
      "id": "cloudflare-tunnel-via-warp-connector"
    },
    {
      "level": "h2",
      "text": "Comparison table",
      "id": "comparison-table"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Size the tunnel",
      "id": "size-the-tunnel"
    },
    {
      "level": "h2",
      "text": "Scale the tunnel",
      "id": "scale-the-tunnel"
    },
    {
      "level": "h3",
      "text": "When to add replicas",
      "id": "when-to-add-replicas"
    },
    {
      "level": "h3",
      "text": "When to add tunnels",
      "id": "when-to-add-tunnels"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Set up virtual networks",
      "id": "set-up-virtual-networks"
    },
    {
      "level": "h2",
      "text": "Set up WARP Connector",
      "id": "set-up-warp-connector"
    },
    {
      "level": "h2",
      "text": "Sign up for Zero Trust",
      "id": "sign-up-for-zero-trust"
    },
    {
      "level": "h2",
      "text": "(Optional) Manage Zero Trust in Terraform",
      "id": "(optional)-manage-zero-trust-in-terraform"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "1. Is the WARP client connected to a Cloudflare data center?",
      "id": "1.-is-the-warp-client-connected-to-a-cloudflare-data-center?"
    },
    {
      "level": "h2",
      "text": "2. Is the WARP client connecting to your private DNS server?",
      "id": "2.-is-the-warp-client-connecting-to-your-private-dns-server?"
    },
    {
      "level": "h2",
      "text": "3. Is network traffic to the application going through WARP?",
      "id": "3.-is-network-traffic-to-the-application-going-through-warp?"
    },
    {
      "level": "h2",
      "text": "4. Is the user blocked by a Gateway policy?",
      "id": "4.-is-the-user-blocked-by-a-gateway-policy?"
    },
    {
      "level": "h2",
      "text": "5. Is the user matching the correct Gateway policy?",
      "id": "5.-is-the-user-matching-the-correct-gateway-policy?"
    },
    {
      "level": "h2",
      "text": "6. Are the correct Gateway proxy settings enabled?",
      "id": "6.-are-the-correct-gateway-proxy-settings-enabled?"
    },
    {
      "level": "h2",
      "text": "7. Is the user's traffic reaching the tunnel?",
      "id": "7.-is-the-user's-traffic-reaching-the-tunnel?"
    },
    {
      "level": "h2",
      "text": "8. Is the tunnel forwarding requests to your application?",
      "id": "8.-is-the-tunnel-forwarding-requests-to-your-application?"
    },
    {
      "level": "h2",
      "text": "9. How is your application handling requests?",
      "id": "9.-how-is-your-application-handling-requests?"
    },
    {
      "level": "h2",
      "text": "10. Is TLS inspection affecting the connection to your application?",
      "id": "10.-is-tls-inspection-affecting-the-connection-to-your-application?"
    },
    {
      "level": "h2",
      "text": "Example list policy",
      "id": "example-list-policy"
    },
    {
      "level": "h2",
      "text": "Change DNS resolver in browser",
      "id": "change-dns-resolver-in-browser"
    },
    {
      "level": "h2",
      "text": "All-DNS-Domain-Allowlist",
      "id": "all-dns-domain-allowlist"
    },
    {
      "level": "h2",
      "text": "Quarantined-Users-DNS-Restricted-Access",
      "id": "quarantined-users-dns-restricted-access"
    },
    {
      "level": "h2",
      "text": "All-DNS-SecurityCategories-Blocklist",
      "id": "all-dns-securitycategories-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-ContentCategories-Blocklist",
      "id": "all-dns-contentcategories-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-Application-Blocklist",
      "id": "all-dns-application-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-GeoCountryIP-Blocklist",
      "id": "all-dns-geocountryip-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-DomainTopLevel-Blocklist",
      "id": "all-dns-domaintoplevel-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-DomainPhishing-Blocklist",
      "id": "all-dns-domainphishing-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-ResolvedIP-Blocklist",
      "id": "all-dns-resolvedip-blocklist"
    },
    {
      "level": "h2",
      "text": "All-DNS-DomainHost-Blocklist",
      "id": "all-dns-domainhost-blocklist"
    },
    {
      "level": "h2",
      "text": "Test a policy in the browser",
      "id": "test-a-policy-in-the-browser"
    },
    {
      "level": "h2",
      "text": "Get the most out of Browser Isolation",
      "id": "get-the-most-out-of-browser-isolation"
    },
    {
      "level": "h3",
      "text": "Block copy, paste, and upload/download for shadow IT",
      "id": "block-copy,-paste,-and-upload/download-for-shadow-it"
    },
    {
      "level": "h3",
      "text": "Isolate all \"gray-listed\" traffic",
      "id": "isolate-all-\"gray-listed\"-traffic"
    },
    {
      "level": "h3",
      "text": "Vendor-chain using link-based isolation",
      "id": "vendor-chain-using-link-based-isolation"
    },
    {
      "level": "h2",
      "text": "Create your first policy",
      "id": "create-your-first-policy"
    },
    {
      "level": "h2",
      "text": "Order your policies",
      "id": "order-your-policies"
    },
    {
      "level": "h2",
      "text": "Test your policies",
      "id": "test-your-policies"
    },
    {
      "level": "h2",
      "text": "Configure a DLP profile",
      "id": "configure-a-dlp-profile"
    },
    {
      "level": "h3",
      "text": "Configure a predefined profile",
      "id": "configure-a-predefined-profile"
    },
    {
      "level": "h3",
      "text": "Build a custom profile",
      "id": "build-a-custom-profile"
    },
    {
      "level": "h2",
      "text": "Build effective DLP profiles",
      "id": "build-effective-dlp-profiles"
    },
    {
      "level": "h3",
      "text": "Define your sensitive data",
      "id": "define-your-sensitive-data"
    },
    {
      "level": "h2",
      "text": "Build DLP policies",
      "id": "build-dlp-policies"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "All-HTTP-Application-InspectBypass",
      "id": "all-http-application-inspectbypass"
    },
    {
      "level": "h2",
      "text": "Android-HTTP-Application-InspectionBypass",
      "id": "android-http-application-inspectionbypass"
    },
    {
      "level": "h2",
      "text": "All-HTTP-Domain-Inspection-Bypass",
      "id": "all-http-domain-inspection-bypass"
    },
    {
      "level": "h2",
      "text": "All-HTTP-SecurityRisks-Blocklist",
      "id": "all-http-securityrisks-blocklist"
    },
    {
      "level": "h2",
      "text": "All-HTTP-ContentCategories-Blocklist",
      "id": "all-http-contentcategories-blocklist"
    },
    {
      "level": "h2",
      "text": "All-HTTP-DomainHost-Blocklist",
      "id": "all-http-domainhost-blocklist"
    },
    {
      "level": "h2",
      "text": "All-HTTP-Application-Blocklist",
      "id": "all-http-application-blocklist"
    },
    {
      "level": "h2",
      "text": "PrivilegedUsers-HTTP-Any-Isolate",
      "id": "privilegedusers-http-any-isolate"
    },
    {
      "level": "h2",
      "text": "Quarantined-Users-HTTP-Restricted-Access",
      "id": "quarantined-users-http-restricted-access"
    },
    {
      "level": "h2",
      "text": "All-HTTP-Domain-Isolate",
      "id": "all-http-domain-isolate"
    },
    {
      "level": "h2",
      "text": "Get started",
      "id": "get-started"
    },
    {
      "level": "h3",
      "text": "1. Identify your goals",
      "id": "1.-identify-your-goals"
    },
    {
      "level": "h3",
      "text": "2. Turn on TLS inspection",
      "id": "2.-turn-on-tls-inspection"
    },
    {
      "level": "h3",
      "text": "3. Determine the certificate used for inspection",
      "id": "3.-determine-the-certificate-used-for-inspection"
    },
    {
      "level": "h3",
      "text": "4. Build a baseline Do Not Inspect policy",
      "id": "4.-build-a-baseline-do-not-inspect-policy"
    },
    {
      "level": "h3",
      "text": "5. Build the necessary pass-through rules",
      "id": "5.-build-the-necessary-pass-through-rules"
    },
    {
      "level": "h2",
      "text": "Geographic distribution",
      "id": "geographic-distribution"
    },
    {
      "level": "h2",
      "text": "Access allowlisted sources",
      "id": "access-allowlisted-sources"
    },
    {
      "level": "h2",
      "text": "User-selectable egress locations",
      "id": "user-selectable-egress-locations"
    },
    {
      "level": "h2",
      "text": "Quarantined-Users-NET-Restricted-Access",
      "id": "quarantined-users-net-restricted-access"
    },
    {
      "level": "h2",
      "text": "Posture-Fail-NET-Restricted-Access",
      "id": "posture-fail-net-restricted-access"
    },
    {
      "level": "h2",
      "text": "FinanceUsers-NET-HTTPS-FinanceServers (example)",
      "id": "financeusers-net-https-financeservers-(example)"
    },
    {
      "level": "h2",
      "text": "All-NET-Internet-Blocklist",
      "id": "all-net-internet-blocklist"
    },
    {
      "level": "h2",
      "text": "All-NET-SSH-Internet-Allowlist",
      "id": "all-net-ssh-internet-allowlist"
    },
    {
      "level": "h2",
      "text": "All-NET-NO-HTTP-HTTPS-Internet-Deny",
      "id": "all-net-no-http-https-internet-deny"
    },
    {
      "level": "h2",
      "text": "All-NET-InternalNetwork-ImplicitDeny",
      "id": "all-net-internalnetwork-implicitdeny"
    },
    {
      "level": "h2",
      "text": "All-NET-ApplicationAccess-Allow",
      "id": "all-net-applicationaccess-allow"
    },
    {
      "level": "h2",
      "text": "What is 1.1.1.1?",
      "id": "what-is-1.1.1.1?"
    },
    {
      "level": "h2",
      "text": "What is a secure web gateway (SWG)?",
      "id": "what-is-a-secure-web-gateway-(swg)?"
    },
    {
      "level": "h2",
      "text": "What is HTTPS inspection?",
      "id": "what-is-https-inspection?"
    },
    {
      "level": "h2",
      "text": "What is data loss prevention (DLP)?",
      "id": "what-is-data-loss-prevention-(dlp)?"
    },
    {
      "level": "h2",
      "text": "What is a cloud access security broker (CASB)?",
      "id": "what-is-a-cloud-access-security-broker-(casb)?"
    },
    {
      "level": "h2",
      "text": "What is browser isolation?",
      "id": "what-is-browser-isolation?"
    },
    {
      "level": "h2",
      "text": "Set device enrollment permissions",
      "id": "set-device-enrollment-permissions"
    },
    {
      "level": "h2",
      "text": "Only allow corporate devices",
      "id": "only-allow-corporate-devices"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Configure the default profile",
      "id": "configure-the-default-profile"
    },
    {
      "level": "h2",
      "text": "(Optional) Create an office profile",
      "id": "(optional)-create-an-office-profile"
    },
    {
      "level": "h2",
      "text": "Enable the proxy",
      "id": "enable-the-proxy"
    },
    {
      "level": "h2",
      "text": "What are PAC files?",
      "id": "what-are-pac-files?"
    },
    {
      "level": "h3",
      "text": "Use cases",
      "id": "use-cases"
    },
    {
      "level": "h2",
      "text": "Where are PAC files hosted?",
      "id": "where-are-pac-files-hosted?"
    },
    {
      "level": "h2",
      "text": "Create a PAC file",
      "id": "create-a-pac-file"
    },
    {
      "level": "h3",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Update Split Tunnels mode",
      "id": "update-split-tunnels-mode"
    },
    {
      "level": "h2",
      "text": "Add a route",
      "id": "add-a-route"
    },
    {
      "level": "h2",
      "text": "Local Domain Fallback",
      "id": "local-domain-fallback"
    },
    {
      "level": "h3",
      "text": "Add a domain",
      "id": "add-a-domain"
    },
    {
      "level": "h3",
      "text": "Route traffic to fallback server",
      "id": "route-traffic-to-fallback-server"
    },
    {
      "level": "h2",
      "text": "Resolver policies",
      "id": "resolver-policies"
    },
    {
      "level": "h3",
      "text": "Create a resolver policy",
      "id": "create-a-resolver-policy"
    },
    {
      "level": "h2",
      "text": "Device on-ramps",
      "id": "device-on-ramps"
    },
    {
      "level": "h3",
      "text": "Zero Trust Client",
      "id": "zero-trust-client"
    },
    {
      "level": "h3",
      "text": "PAC files (Enterprise only)",
      "id": "pac-files-(enterprise-only)"
    },
    {
      "level": "h3",
      "text": "Clientless Browser Isolation",
      "id": "clientless-browser-isolation"
    },
    {
      "level": "h2",
      "text": "Network on-ramps",
      "id": "network-on-ramps"
    },
    {
      "level": "h3",
      "text": "Magic WAN",
      "id": "magic-wan"
    },
    {
      "level": "h3",
      "text": "WARP Connector Beta",
      "id": "warp-connector-beta"
    },
    {
      "level": "h3",
      "text": "DNS filtering locations",
      "id": "dns-filtering-locations"
    },
    {
      "level": "h2",
      "text": "Install WARP",
      "id": "install-warp"
    },
    {
      "level": "h2",
      "text": "MDM policy file",
      "id": "mdm-policy-file"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Sign up for Zero Trust",
      "id": "sign-up-for-zero-trust"
    },
    {
      "level": "h2",
      "text": "(Optional) Manage Zero Trust in Terraform",
      "id": "(optional)-manage-zero-trust-in-terraform"
    },
    {
      "level": "h2",
      "text": "Manage CASB integrations",
      "id": "manage-casb-integrations"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h3",
      "text": "Add an integration",
      "id": "add-an-integration"
    },
    {
      "level": "h3",
      "text": "Pause an integration",
      "id": "pause-an-integration"
    },
    {
      "level": "h3",
      "text": "Delete an integration",
      "id": "delete-an-integration"
    },
    {
      "level": "h3",
      "text": "Integrate DLP policies",
      "id": "integrate-dlp-policies"
    },
    {
      "level": "h2",
      "text": "Device posture controls for managed endpoints",
      "id": "device-posture-controls-for-managed-endpoints"
    },
    {
      "level": "h2",
      "text": "Inline security for unmanaged endpoints",
      "id": "inline-security-for-unmanaged-endpoints"
    },
    {
      "level": "h2",
      "text": "Browser Isolation",
      "id": "browser-isolation"
    },
    {
      "level": "h3",
      "text": "WARP client",
      "id": "warp-client"
    },
    {
      "level": "h3",
      "text": "Clientless Web Isolation",
      "id": "clientless-web-isolation"
    },
    {
      "level": "h3",
      "text": "SSO integrations",
      "id": "sso-integrations"
    },
    {
      "level": "h2",
      "text": "Configure your SSO provider",
      "id": "configure-your-sso-provider"
    },
    {
      "level": "h3",
      "text": "Policies based on dedicated egress IPs",
      "id": "policies-based-on-dedicated-egress-ips"
    },
    {
      "level": "h3",
      "text": "Generic IdP multi-factor authentication",
      "id": "generic-idp-multi-factor-authentication"
    },
    {
      "level": "h2",
      "text": "Create a list from a CSV file",
      "id": "create-a-list-from-a-csv-file"
    },
    {
      "level": "h2",
      "text": "Create a list manually",
      "id": "create-a-list-manually"
    },
    {
      "level": "h2",
      "text": "Subscribe to indicator feeds",
      "id": "subscribe-to-indicator-feeds"
    },
    {
      "level": "h2",
      "text": "Connection establishment",
      "id": "connection-establishment"
    },
    {
      "level": "h2",
      "text": "Priority between policy builders",
      "id": "priority-between-policy-builders"
    },
    {
      "level": "h3",
      "text": "HTTP/3 traffic",
      "id": "http/3-traffic"
    },
    {
      "level": "h2",
      "text": "Priority within a policy builder",
      "id": "priority-within-a-policy-builder"
    },
    {
      "level": "h3",
      "text": "DNS policies",
      "id": "dns-policies"
    },
    {
      "level": "h3",
      "text": "Network policies",
      "id": "network-policies"
    },
    {
      "level": "h3",
      "text": "HTTP policies",
      "id": "http-policies"
    },
    {
      "level": "h3",
      "text": "Resolver policies",
      "id": "resolver-policies"
    },
    {
      "level": "h3",
      "text": "Order of precedence",
      "id": "order-of-precedence"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Precedence calculations",
      "id": "precedence-calculations"
    },
    {
      "level": "h2",
      "text": "Manage precedence with Terraform",
      "id": "manage-precedence-with-terraform"
    },
    {
      "level": "h2",
      "text": "Configure allow policies",
      "id": "configure-allow-policies"
    },
    {
      "level": "h2",
      "text": "Configure domain age",
      "id": "configure-domain-age"
    },
    {
      "level": "h2",
      "text": "Configure blank email detection",
      "id": "configure-blank-email-detection"
    },
    {
      "level": "h2",
      "text": "Configure ACH change from free email detection",
      "id": "configure-ach-change-from-free-email-detection"
    },
    {
      "level": "h2",
      "text": "Configure HTML Attachment Email Detection",
      "id": "configure-html-attachment-email-detection"
    },
    {
      "level": "h2",
      "text": "Search email messages",
      "id": "search-email-messages"
    },
    {
      "level": "h3",
      "text": "Export messages",
      "id": "export-messages"
    },
    {
      "level": "h2",
      "text": "Workers Analytics Engine",
      "id": "workers-analytics-engine"
    },
    {
      "level": "h2",
      "text": "Account and zone analytics",
      "id": "account-and-zone-analytics"
    },
    {
      "level": "h2",
      "text": "Cloudflare Network Analytics",
      "id": "cloudflare-network-analytics"
    },
    {
      "level": "h2",
      "text": "GraphQL Analytics API",
      "id": "graphql-analytics-api"
    },
    {
      "level": "h2",
      "text": "Optimize caching",
      "id": "optimize-caching"
    },
    {
      "level": "h3",
      "text": "Cache more requests",
      "id": "cache-more-requests"
    },
    {
      "level": "h3",
      "text": "Advanced cache optimizations",
      "id": "advanced-cache-optimizations"
    },
    {
      "level": "h2",
      "text": "Tiered Cache",
      "id": "tiered-cache"
    },
    {
      "level": "h3",
      "text": "Cache Reserve",
      "id": "cache-reserve"
    },
    {
      "level": "h2",
      "text": "Cloudflare Waiting Room",
      "id": "cloudflare-waiting-room"
    },
    {
      "level": "h2",
      "text": "Use Cloudflare IP addresses",
      "id": "use-cloudflare-ip-addresses"
    },
    {
      "level": "h2",
      "text": "Monitor traffic",
      "id": "monitor-traffic"
    },
    {
      "level": "h3",
      "text": "Zone and Account analytics",
      "id": "zone-and-account-analytics"
    },
    {
      "level": "h3",
      "text": "Security Analytics and Security Events",
      "id": "security-analytics-and-security-events"
    },
    {
      "level": "h3",
      "text": "Cache Analytics",
      "id": "cache-analytics"
    },
    {
      "level": "h2",
      "text": "Logpush",
      "id": "logpush"
    },
    {
      "level": "h2",
      "text": "Instant Logs",
      "id": "instant-logs"
    },
    {
      "level": "h2",
      "text": "Logs Engine",
      "id": "logs-engine"
    },
    {
      "level": "h2",
      "text": "Log Explorer",
      "id": "log-explorer"
    },
    {
      "level": "h2",
      "text": "Zone Lockdown",
      "id": "zone-lockdown"
    },
    {
      "level": "h2",
      "text": "Understand hosting plan limits",
      "id": "understand-hosting-plan-limits"
    },
    {
      "level": "h2",
      "text": "Security models",
      "id": "security-models"
    },
    {
      "level": "h2",
      "text": "Actions",
      "id": "actions"
    },
    {
      "level": "h2",
      "text": "Email Address Obfuscation",
      "id": "email-address-obfuscation"
    },
    {
      "level": "h2",
      "text": "Hotlink Protection",
      "id": "hotlink-protection"
    },
    {
      "level": "h2",
      "text": "Enable \"I'm Under Attack\" mode (IAUM)",
      "id": "enable-\"i'm-under-attack\"-mode-(iaum)"
    },
    {
      "level": "h2",
      "text": "Change Access Control List (ACL)",
      "id": "change-access-control-list-(acl)"
    },
    {
      "level": "h2",
      "text": "Change Origin IPs and update Cloudflare DNS records",
      "id": "change-origin-ips-and-update-cloudflare-dns-records"
    },
    {
      "level": "h2",
      "text": "Reduce server strain",
      "id": "reduce-server-strain"
    },
    {
      "level": "h2",
      "text": "Unlimited DDoS Protection",
      "id": "unlimited-ddos-protection"
    },
    {
      "level": "h2",
      "text": "Browser Integrity Check",
      "id": "browser-integrity-check"
    },
    {
      "level": "h2",
      "text": "Orange cloud all proper subdomains",
      "id": "orange-cloud-all-proper-subdomains"
    },
    {
      "level": "h2",
      "text": "Additional resources",
      "id": "additional-resources"
    },
    {
      "level": "h2",
      "text": "Cloud computing",
      "id": "cloud-computing"
    },
    {
      "level": "h3",
      "text": "Serverless computing",
      "id": "serverless-computing"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h2",
      "text": "Cloudflare Developer Platform",
      "id": "cloudflare-developer-platform"
    },
    {
      "level": "h2",
      "text": "Built on Cloudflare",
      "id": "built-on-cloudflare"
    },
    {
      "level": "h2",
      "text": "Built with Cloudflare",
      "id": "built-with-cloudflare"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h2",
      "text": "What you can do with Workers",
      "id": "what-you-can-do-with-workers"
    },
    {
      "level": "h2",
      "text": "Runtime",
      "id": "runtime"
    },
    {
      "level": "h2",
      "text": "Execution",
      "id": "execution"
    },
    {
      "level": "h3",
      "text": "Isolates",
      "id": "isolates"
    },
    {
      "level": "h2",
      "text": "Compute per request",
      "id": "compute-per-request"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Feedback",
      "id": "feedback"
    },
    {
      "level": "h2",
      "text": "Community",
      "id": "community"
    },
    {
      "level": "h2",
      "text": "Cloudflare dashboard",
      "id": "cloudflare-dashboard"
    },
    {
      "level": "h2",
      "text": "CLI",
      "id": "cli"
    },
    {
      "level": "h2",
      "text": "C3",
      "id": "c3"
    },
    {
      "level": "h2",
      "text": "Wrangler",
      "id": "wrangler"
    },
    {
      "level": "h2",
      "text": "Source of truth",
      "id": "source-of-truth"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h2",
      "text": "Build an AI application with Hono and Workers",
      "id": "build-an-ai-application-with-hono-and-workers"
    },
    {
      "level": "h2",
      "text": "Build and deploy your first Worker",
      "id": "build-and-deploy-your-first-worker"
    },
    {
      "level": "h3",
      "text": "Via the Cloudflare dashboard",
      "id": "via-the-cloudflare-dashboard"
    },
    {
      "level": "h3",
      "text": "Via C3 and Wrangler",
      "id": "via-c3-and-wrangler"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h3",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Web development",
      "id": "web-development"
    },
    {
      "level": "h2",
      "text": "Compute",
      "id": "compute"
    },
    {
      "level": "h2",
      "text": "Storage",
      "id": "storage"
    },
    {
      "level": "h2",
      "text": "Image optimization and video streaming",
      "id": "image-optimization-and-video-streaming"
    },
    {
      "level": "h2",
      "text": "AI",
      "id": "ai"
    },
    {
      "level": "h2",
      "text": "Summary",
      "id": "summary"
    },
    {
      "level": "h2",
      "text": "Feedback",
      "id": "feedback"
    },
    {
      "level": "h2",
      "text": "Community",
      "id": "community"
    },
    {
      "level": "h2",
      "text": "Supported Actions",
      "id": "supported-actions"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Example Workflow",
      "id": "example-workflow"
    },
    {
      "level": "h2",
      "text": "Example use case",
      "id": "example-use-case"
    },
    {
      "level": "h3",
      "text": "URL-based routing",
      "id": "url-based-routing"
    },
    {
      "level": "h2",
      "text": "Simple expressions",
      "id": "simple-expressions"
    },
    {
      "level": "h2",
      "text": "Compound expressions",
      "id": "compound-expressions"
    },
    {
      "level": "h2",
      "text": "Working with expressions",
      "id": "working-with-expressions"
    },
    {
      "level": "h3",
      "text": "Expression Builder",
      "id": "expression-builder"
    },
    {
      "level": "h3",
      "text": "Expression Editor",
      "id": "expression-editor"
    },
    {
      "level": "h3",
      "text": "Rules lists",
      "id": "rules-lists"
    },
    {
      "level": "h2",
      "text": "Expression Builder field sets",
      "id": "expression-builder-field-sets"
    },
    {
      "level": "h2",
      "text": "Fields supported regardless of proxy",
      "id": "fields-supported-regardless-of-proxy"
    },
    {
      "level": "h2",
      "text": "Proxied-only fields",
      "id": "proxied-only-fields"
    },
    {
      "level": "h2",
      "text": "Unproxied-only fields",
      "id": "unproxied-only-fields"
    },
    {
      "level": "h2",
      "text": "Operators and grouping symbols",
      "id": "operators-and-grouping-symbols"
    },
    {
      "level": "h2",
      "text": "What is changing and why?",
      "id": "what-is-changing-and-why?"
    },
    {
      "level": "h2",
      "text": "Migration guide",
      "id": "migration-guide"
    },
    {
      "level": "h3",
      "text": "Step 1 - Find existing notifications",
      "id": "step-1---find-existing-notifications"
    },
    {
      "level": "h3",
      "text": "Step 2 - Create new notifications",
      "id": "step-2---create-new-notifications"
    },
    {
      "level": "h3",
      "text": "Step 3 - Remove deprecated notifications",
      "id": "step-3---remove-deprecated-notifications"
    },
    {
      "level": "h2",
      "text": "Example query",
      "id": "example-query"
    },
    {
      "level": "h2",
      "text": "Policies",
      "id": "policies"
    },
    {
      "level": "h2",
      "text": "Weights",
      "id": "weights"
    },
    {
      "level": "h3",
      "text": "Customize weights",
      "id": "customize-weights"
    },
    {
      "level": "h3",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "EDNS Client Subnet (ECS) support",
      "id": "edns-client-subnet-(ecs)-support"
    },
    {
      "level": "h2",
      "text": "Step 1 - Get ownership challenge",
      "id": "step-1---get-ownership-challenge"
    },
    {
      "level": "h3",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h2",
      "text": "Step 2 - Create a job",
      "id": "step-2---create-a-job"
    },
    {
      "level": "h3",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h2",
      "text": "Step 3 - Enable (update) a job",
      "id": "step-3---enable-(update)-a-job"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h3",
      "text": "Request to get job by ID and see **last\\_complete** info",
      "id": "request-to-get-job-by-id-and-see-**last\\_complete**-info"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h2",
      "text": "Optional - Delete a job",
      "id": "optional---delete-a-job"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h2",
      "text": "Optional - Retrieve your job",
      "id": "optional---retrieve-your-job"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h2",
      "text": "Optional - Update **output\\_options**",
      "id": "optional---update-**output\\_options**"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    }
  ],
  "url": "llms-txt#replace-ns0123-with-your-actual-cloudflare-nameservers",
  "links": []
}