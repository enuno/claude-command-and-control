{
  "title": "└───────────────────┴──────────────────────────────────────┘",
  "content": "jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"python-and-d1\",\n    \"main\": \"src/entry.py\",\n    \"compatibility_flags\": [\n      \"python_workers\"\n    ],\n    \"compatibility_date\": \"2024-03-29\",\n    \"d1_databases\": [\n      {\n        \"binding\": \"DB\",\n        \"database_name\": \"YOUR_DATABASE_NAME\",\n        \"database_id\": \"YOUR_DATABASE_ID\"\n      }\n    ]\n  }\n  toml\n  name = \"python-and-d1\"\n  main = \"src/entry.py\"\n  compatibility_flags = [\"python_workers\"] # Required for Python Workers\n  compatibility_date = \"2024-03-29\"\n\n[[d1_databases]]\n  binding = \"DB\" # This will be how you refer to your database in your Worker\n  database_name = \"YOUR_DATABASE_NAME\"\n  database_id = \"YOUR_DATABASE_ID\"\n  python\nfrom workers import Response, WorkerEntrypoint\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        # Do anything else you'd like on request here!\n\n# Query D1 - we'll list all tables in our database in this example\n        results = await self.env.DB.prepare(\"PRAGMA table_list\").run()\n        # Return a JSON response\n        return Response.json(results)\nsh\nnpx wrangler deploy\nsh",
  "code_samples": [
    {
      "code": "### 1. Configure bindings\n\nIn your Wrangler file, create a new `[[d1_databases]]` configuration block and set `database_name` and `database_id` to the name and id (respectively) of the D1 database you want to query:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "The value of `binding` is how you will refer to your database from within your Worker. If you change this, you must change this in your Worker script as well.\n\n### 2. Create your Python Worker\n\nTo create a Python Worker, create an empty file at `src/entry.py`, matching the value of `main` in your Wrangler file with the contents below:",
      "language": "unknown"
    },
    {
      "code": "The value of `binding` in your Wrangler file exactly must match the name of the variable in your Python code. This example refers to the database via a `DB` binding, and query this binding via `await env.DB.prepare(...)`.\n\nYou can then deploy your Python Worker directly:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "1. Configure bindings",
      "id": "1.-configure-bindings"
    },
    {
      "level": "h3",
      "text": "2. Create your Python Worker",
      "id": "2.-create-your-python-worker"
    }
  ],
  "url": "llms-txt#└───────────────────┴──────────────────────────────────────┘",
  "links": []
}