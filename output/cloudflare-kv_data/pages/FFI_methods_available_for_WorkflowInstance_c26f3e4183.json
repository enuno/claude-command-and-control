{
  "title": "FFI methods available for WorkflowInstance",
  "content": "await instance.status()\nawait instance.pause()\nawait instance.resume()\nawait instance.restart()\nawait instance.terminate()\npython\nfrom pyodide.ffi import to_js\nfrom js import Object\n\nawait env.MY_WORKFLOW.send_event(to_js({ \"type\": \"my-event-type\", \"payload\": { \"foo\": \"bar\" } }, dict_converter=Object.fromEntries))\npython\nfrom workers import Response, WorkflowEntrypoint\n\nclass PythonWorkflowStarter(WorkflowEntrypoint):\n    async def run(self, event, step):\n        async def await_step(fn):\n            try:\n                return await fn()\n            except TypeError as e:\n                print(f\"Successfully caught {type(e).__name__}: {e}\")\n\nstep.sleep('demo sleep', '10 seconds')\n\n@step.do('dependency1')\n        async def dep_1():\n            # does stuff\n            print('executing dep1')\n\n@step.do('dependency2')\n        async def dep_2():\n            # does stuff\n            print('executing dep2')\n\n@step.do('demo do', depends=[dep_1, dep_2], concurrent=True)\n        async def final_step(res1, res2):\n            # does stuff\n            print('something')\n\nawait await_step(final_step)\n\nasync def on_fetch(request, env):\n    await env.MY_WORKFLOW.create()\n    return Response(\"Hello world!\")\npython\nfrom workers import WorkflowEntrypoint\n\nclass MyWorkflow(WorkflowEntrypoint):\n    def run(self, event, step):\n        # steps here\npython\nfrom workers import WorkflowEntrypoint\n\nclass MyWorkflow(WorkflowEntrypoint):\n    async def run(self, event, step):\n        @step.do(\"my first step\")\n        async def my_first_step():\n            # do some work\n            return \"Hello World!\"\n\nawait my_first_step()\npython\nasync def run(self, event, step):\n    await step.sleep(\"my-sleep-step\", \"10 seconds\")\npython\nasync def run(self, event, step):\n    await step.sleep_until(\"my-sleep-step\", datetime.datetime.now() + datetime.timedelta(seconds=10))\npython\nasync def run(self, event, step):\n    await step.wait_for_event(\"my-wait-for-event-step\", \"my-event-type\")\npython\nasync def run(self, event, step):\n    async def try_step(fn):\n        try:\n            return await fn()\n        except Exception as e:\n            print(f\"Successfully caught {type(e).__name__}: {e}\")\n\n@step.do(\"my_failing\")\n    async def my_failing():\n        print(\"Executing my_failing\")\n        raise TypeError(\"Intentional error in my_failing\")\n\nawait try_step(my_failing)\npython\nfrom workers.workflows import NonRetryableError\n\nraise NonRetryableError(message)\npython\nclass DemoWorkflowClass(WorkflowEntrypoint):\n    async def run(self, event, step):\n        @step.do('step-name', config={\"retries\": {\"limit\": 1, \"delay\": \"10 seconds\"}})\n        async def first_step():\n            # do some work\n            pass\npython\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        instance = await self.env.MY_WORKFLOW.create()\n        return Response.json({\"status\": \"success\"})\njson\n{\n  \"type\": \"cf.workflows.workflow.instance.queued\",\n  \"source\": {\n    \"type\": \"workflows.workflow\",\n    \"workflowName\": \"my-workflow\"\n  },\n  \"payload\": {\n    \"versionId\": \"v1\",\n    \"instanceId\": \"inst-12345678-90ab-cdef-1234-567890abcdef\"\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workflows.workflow.instance.started\",\n  \"source\": {\n    \"type\": \"workflows.workflow\",\n    \"workflowName\": \"my-workflow\"\n  },\n  \"payload\": {\n    \"versionId\": \"v1\",\n    \"instanceId\": \"inst-12345678-90ab-cdef-1234-567890abcdef\"\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workflows.workflow.instance.paused\",\n  \"source\": {\n    \"type\": \"workflows.workflow\",\n    \"workflowName\": \"my-workflow\"\n  },\n  \"payload\": {\n    \"versionId\": \"v1\",\n    \"instanceId\": \"inst-12345678-90ab-cdef-1234-567890abcdef\"\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workflows.workflow.instance.errored\",\n  \"source\": {\n    \"type\": \"workflows.workflow\",\n    \"workflowName\": \"my-workflow\"\n  },\n  \"payload\": {\n    \"versionId\": \"v1\",\n    \"instanceId\": \"inst-12345678-90ab-cdef-1234-567890abcdef\"\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workflows.workflow.instance.terminated\",\n  \"source\": {\n    \"type\": \"workflows.workflow\",\n    \"workflowName\": \"my-workflow\"\n  },\n  \"payload\": {\n    \"versionId\": \"v1\",\n    \"instanceId\": \"inst-12345678-90ab-cdef-1234-567890abcdef\"\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workflows.workflow.instance.completed\",\n  \"source\": {\n    \"type\": \"workflows.workflow\",\n    \"workflowName\": \"my-workflow\"\n  },\n  \"payload\": {\n    \"versionId\": \"v1\",\n    \"instanceId\": \"inst-12345678-90ab-cdef-1234-567890abcdef\"\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\nts\nimport {\n  WorkflowEntrypoint,\n  WorkflowStep,\n  WorkflowEvent,\n} from \"cloudflare:workers\";\n\ntype Env = {\n  MY_WORKFLOW: Workflow;\n};\n\nexport class MyWorkflow extends WorkflowEntrypoint<Env> {\n  async run(event: WorkflowEvent<unknown>, step: WorkflowStep) {\n    const apiResponse = await step.do(\"initial work\", async () => {\n      let resp = await fetch(\"https://api.cloudflare.com/client/v4/ips\");\n      return await resp.json<any>();\n    });\n\nawait step.sleep(\"wait 30 days\", \"30 days\");\n\nawait step.do(\n      \"make a call to write that could maybe, just might, fail\",\n      {\n        retries: {\n          limit: 5,\n          delay: \"5 second\",\n          backoff: \"exponential\",\n        },\n        timeout: \"15 minutes\",\n      },\n      async () => {\n        if (Math.random() > 0.5) {\n          throw new Error(\"API call to $STORAGE_SYSTEM failed\");\n        }\n      },\n    );\n  }\n}\njsonc\n  {\n    // ...rest of your configuration...\n    \"limits\": {\n      \"cpu_ms\": 300000, // 300,000 milliseconds = 5 minutes\n    },\n    // ...rest of your configuration...\n  }\n  toml\n  [limits]\n  cpu_ms = 300_000\n  sh\n  npx wrangler workflows list\n  sh\n  pnpm wrangler workflows list\n  sh\n  yarn wrangler workflows list\n  sh\n  npx wrangler workflows describe [NAME]\n  sh\n  pnpm wrangler workflows describe [NAME]\n  sh\n  yarn wrangler workflows describe [NAME]\n  sh\n  npx wrangler workflows delete [NAME]\n  sh\n  pnpm wrangler workflows delete [NAME]\n  sh\n  yarn wrangler workflows delete [NAME]\n  sh\n  npx wrangler workflows trigger [NAME] [PARAMS]\n  sh\n  pnpm wrangler workflows trigger [NAME] [PARAMS]\n  sh\n  yarn wrangler workflows trigger [NAME] [PARAMS]\n  sh\n  npx wrangler workflows instances list [NAME]\n  sh\n  pnpm wrangler workflows instances list [NAME]\n  sh\n  yarn wrangler workflows instances list [NAME]\n  sh\n  npx wrangler workflows instances describe [NAME] [ID]\n  sh\n  pnpm wrangler workflows instances describe [NAME] [ID]\n  sh\n  yarn wrangler workflows instances describe [NAME] [ID]\n  sh\n  npx wrangler workflows instances terminate [NAME] [ID]\n  sh\n  pnpm wrangler workflows instances terminate [NAME] [ID]\n  sh\n  yarn wrangler workflows instances terminate [NAME] [ID]\n  sh\n  npx wrangler workflows instances restart [NAME] [ID]\n  sh\n  pnpm wrangler workflows instances restart [NAME] [ID]\n  sh\n  yarn wrangler workflows instances restart [NAME] [ID]\n  sh\n  npx wrangler workflows instances pause [NAME] [ID]\n  sh\n  pnpm wrangler workflows instances pause [NAME] [ID]\n  sh\n  yarn wrangler workflows instances pause [NAME] [ID]\n  sh\n  npx wrangler workflows instances resume [NAME] [ID]\n  sh\n  pnpm wrangler workflows instances resume [NAME] [ID]\n  sh\n  yarn wrangler workflows instances resume [NAME] [ID]\n  js\nexport default {\n  async fetch(request, env, ctx) {\n    const { system, client } = await request.json();\n\n// Here goes your modification to the system or client objects.\n    /*\n      For example, to change the country to a fictitious \"Pirate's Island\" (\"PI\"), use:\n      system.device.location.country = 'PI';\n    */\n\nreturn new Response(JSON.stringify({ system, client }));\n  },\n};\njs\nfunction getWeatherForLocation({ client, system }) {\n  // Get the location from the context.\n  const { city } = system.device.location;\n\n// Get the weather from an API.\n  const response = await fetch(\n    `https://wttr.in/${encodeURIComponents(city)}?format=j1`\n  ).then((response) => response.json());\n\n// Add the weather to the context.\n  client.weather = weather;\n\nreturn { client, system };\n}\n\nexport default {\n  async fetch(request, env, ctx) {\n    const { system, client } = await request.json();\n\n// Add the weather to the context.\n    const newContext = getWeatherForLocation({ system, client });\n\n// Return as JSON\n    return new Response(JSON.stringify(newContext));\n  },\n};\njs\nfunction redactEmailAddressesFromObject(context) {\n  // Loop through all keys of the object.\n  for (const key in context) {\n    // Check if the value is a string.\n    if (typeof context[key] === \"string\") {\n      // Check if the string contains an @ symbol.\n      if (context[key].includes(\"@\")) {\n        // Replace the string with a redacted version.\n        context[key] = \"REDACTED@example.com\";\n      }\n    } else if (typeof context[key] === \"object\") {\n      // Recursively call this function to redact the object.\n      context[key] = redactEmailAddressesFromObject(context[key]);\n    }\n  }\n\nexport default {\n  async fetch(request, env, ctx) {\n    const { system, client } = await request.json();\n\n// Redact email addresses from the context.\n    const newContext = redactEmailAddressesFromObject({ system, client });\n\n// Return as JSON\n    return new Response(JSON.stringify(newContext));\n  },\n};\njs\ndataLayer.push({\n  event: 'purchase',\n  price: '24',\n  currency: 'USD',\n  transactionID: '12345678',\n});\nhtml\n<script src=\"https://my-subdomain.example.com/cdn-cgi/zaraz/i.js\"></script>\njs\nzaraz.set(\"google_consent_default\",  {\n  'ad_storage': 'denied',\n  'ad_user_data': 'denied',\n  'ad_personalization': 'denied',\n  'analytics_storage': 'denied'\n})\njs\nzaraz.set(\"google_consent_update\",  {\n  'ad_storage': 'granted',\n  'ad_user_data': 'denied',\n  'ad_personalization': 'granted',\n  'analytics_storage': 'denied'\n})\njavascript\n// File: index.js\nexport default async function (manager) {\n  // Add a pageview event\n  manager.addEventListener(\"pageview\", event, () => {\n    const { client } = event;\n\n// Get the variable \"counter\" from the client's cookies and increase by 1\n    let counter = parseInt(client.get(\"counter\")) || 0;\n    counter += 1;\n\n// Log the increased number\n    client.execute(`console.log('Views: ${counter}')`);\n\n// Store the increased number for the next visit\n    client.set(\"counter\", counter);\n  });\n}\nhtml\n<script src=\"/cdn-cgi/zaraz/i.js\" referrerpolicy=\"origin\"></script>\nhtml\n<html>\n  <head>\n    ….\n    <script src=\"/cdn-cgi/zaraz/i.js\" referrerpolicy=\"origin\"></script>\n  </head>\n  <body>\n    …\n  </body>\n</html>\njs\nzaraz.track('Product List Viewed',\n  {  products:\n    [\n    {\n      sku: '2671033',\n      name: 'V-neck T-shirt',\n      price: 14.99,\n      quantity: 3\n    },{\n      sku: '2671034',\n      name: 'T-shirt',\n      price: 10.99,\n      quantity: 2\n    },\n    ],\n  }\n);\njs\ndocument.addEventListener(\"zarazConsentAPIReady\", () => {\n  // do things with the Consent API\n});\njs\ndocument.addEventListener(\"zarazConsentChoicesUpdated\", () => {\n  // read the new consent preferences using `zaraz.consent.getAll();` and do things with it\n});\njs\nzaraz.consent.get(purposeId);\njs\nzaraz.consent.set(consentPreferences);\njs\nzaraz.consent.getAll();\njs\nzaraz.consent.setAll(consentStatus);\njs\nzaraz.consent.getAllCheckboxes();\njs\nzaraz.consent.setCheckboxes(checkboxesStatus);\njs\nzaraz.consent.setAllCheckboxes(checkboxStatus);\njs\nzaraz.consent.sendQueuedEvents();\nhtml\n<script>\nfunction getCookie(name) {\n  const value = `; ${document.cookie}`\n  return value?.split(`; ${name}=`)[1]?.split(\";\")[0]\n}\n\nfunction handleZarazConsentAPIReady() {\n  const consent_cookie = getCookie(\"cf_consent\")\n  const isEUCountry = \"{{system.device.location.isEUCountry}}\" === \"1\"\n  if (!consent_cookie) {\n    if (isEUCountry) {\n      zaraz.consent.modal = true\n    } else {\n      zaraz.consent.setAll(true)\n      zaraz.consent.sendQueuedEvents()\n    }\n  }\n}\n\nif (zaraz.consent?.APIReady) {\n  handleZarazConsentAPIReady()\n} else {\n  document.addEventListener(\"zarazConsentAPIReady\", handleZarazConsentAPIReady)\n}\n</script>\nhtml\n<script>\n  zaraz.set('__zarazConsentLanguage', 'en-US')\n</script>\njs\n   zaraz.preview(\"<YOUR_DEBUG_KEY>\");\n   graphql\n  query ZarazEvents(\n    $zoneTag: string\n    $limit: uint64!\n    $start: Time\n    $end: Time\n    $orderBy: ZoneZarazTrackAdaptiveGroupsOrderBy!\n  ) {\n    viewer {\n      zones(filter: { zoneTag: $zoneTag }) {\n        data: zarazTrackAdaptiveGroups(\n          limit: $limit\n          filter: { datetimeHour_geq: $start, datetimeHour_leq: $end }\n          orderBy: [$orderBy]\n        ) {\n          count\n          dimensions {\n            ts: datetimeHour\n          }\n        }\n      }\n    }\n  }\n  graphql\n  query ZarazLoads(\n    $zoneTag: string\n    $limit: uint64!\n    $start: Date\n    $end: Date\n    $orderBy: ZoneZarazTriggersAdaptiveGroupsOrderBy!\n  ) {\n    viewer {\n      zones(filter: { zoneTag: $zoneTag }) {\n        data: zarazTriggersAdaptiveGroups(\n          limit: $limit\n          filter: { date_geq: $start, date_leq: $end, triggerName: Pageview }\n          orderBy: [$orderBy]\n        ) {\n          count\n          dimensions {\n            ts: date\n          }\n        }\n      }\n    }\n  }\n  graphql\n  query ZarazTriggers(\n    $zoneTag: string\n    $limit: uint64!\n    $start: Date\n    $end: Date\n  ) {\n    viewer {\n      zones(filter: { zoneTag: $zoneTag }) {\n        data: zarazTriggersAdaptiveGroups(\n          limit: $limit\n          filter: { date_geq: $start, date_leq: $end }\n          orderBy: [count_DESC]\n        ) {\n          count\n          dimensions {\n            name: triggerName\n          }\n        }\n      }\n    }\n  }\n  graphql\n  query ErroneousResponses(\n    $zoneTag: string\n    $limit: uint64!\n    $start: Time\n    $end: Time\n    $orderBy: ZoneZarazFetchAdaptiveGroupsOrderBy!\n  ) {\n    viewer {\n      zones(filter: { zoneTag: $zoneTag }) {\n        data: zarazFetchAdaptiveGroups(\n          limit: $limit\n          filter: {\n            datetimeHour_geq: $start\n            datetimeHour_leq: $end\n            url_neq: \"\"\n            status: 400\n          }\n          orderBy: [$orderBy]\n        ) {\n          count\n          dimensions {\n            ts: datetimeHour\n            name: url\n          }\n        }\n      }\n    }\n  }\n  json\n{\n  \"zoneTag\": \"d6dfdf32c704a77ac227243a5eb5ca61\",\n  \"start\": \"2025-01-01T00:00:00Z\",\n  \"end\": \"2025-01-30T00:00:00Z\",\n  \"limit\": 10000,\n  \"orderBy\": \"datetimeHour_ASC\"\n}\nbash\ncurl -X POST https://api.cloudflare.com/client/v4/graphql \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -d '{\n    \"query\": \"query AllEvents($zoneTag: String!, $limit: Int!, $start: Date, $end: Date, $orderBy: [ZoneZarazTriggersAdaptiveGroupsOrderBy!]) { viewer { zones(filter: { zoneTag: $zoneTag }) { data: zarazTrackAdaptiveGroups( limit: $limit filter: { datetimeHour_geq: $start datetimeHour_leq: $end } orderBy: [$orderBy] ) { count dimensions { ts: datetimeHour } } } } }\",\n    \"variables\": {\n      \"zoneTag\": \"$ZONE_TAG\",\n      \"start\": \"2025-01-01T00:00:00Z\",\n      \"end\": \"2025-01-30T00:00:00Z\",\n      \"limit\": 10000,\n      \"orderBy\": \"datetimeHour_ASC\"\n    }\n  }'\ntxt\n/<PATHNAME>/<FILE.JS>\ntxt\n/my-server/my-scripts/start.js\njs\nconst { system, client } = await request.json()\n\n/* System parameters */\nsystem.page.url.href // URL of the current page\nsystem.page.query.gclid // Value of the gclid query parameter\nsystem.device.resolution // Device screen resolution\nsystem.device.language // Browser preferred language\n\n/* Zaraz Track values */\nclient.value // value from `zaraz.track(\"foo\", {value: \"bar\"})`\nclient.products[0].name // name of the first product in an ecommerce call\njs\nzaraz.ecommerce(\"Cart Viewed\", {\n  products: [\n    { name: \"shirt\", price: \"50\" },\n    { name: \"jacket\", price: \"20\" },\n    { name: \"hat\", price: \"30\" },\n  ],\n});\njs\nexport default {\n  async fetch(request, env) {\n    // Parse the Zaraz Context object\n    const { system, client } = await request.json();\n\n// Get an array of all prices\n    const productsPrices = client.products.map((p) => p.price);\n\n// Calculate the sum\n    const sum = productsPrices.reduce((partialSum, a) => partialSum + a, 0);\n\nreturn new Response(sum);\n  },\n};\njs\nexport default {\n  async fetch(request, env) {\n    // Parse the Zaraz Context object\n    const { system, client } = await request.json();\n\n// Get the value of the cookie \"login-cookie\"\n    const cookieValue = system.cookies[\"login-cookie\"];\n\nconst userId = await fetch(\"https://example.com/api/getUserIdFromCookie\", {\n      method: POST,\n      body: cookieValue,\n    });\n\nreturn new Response(userId);\n  },\n};\njs\nzaraz.track(\"user_logged_in\", { email: \"user@example.com\" });\njs\nasync function digestMessage(message) {\n  const msgUint8 = new TextEncoder().encode(message); // encode as (utf-8) Uint8Array\n  const hashBuffer = await crypto.subtle.digest(\"SHA-256\", msgUint8); // hash the message\n  const hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array\n  const hashHex = hashArray\n    .map((b) => b.toString(16).padStart(2, \"0\"))\n    .join(\"\"); // convert bytes to hex string\n  return hashHex;\n}\n\nexport default {\n  async fetch(request, env) {\n    // Parse the Zaraz Context object\n    const { system, client } = await request.json();\n\nconst { email } = client;\n\nreturn new Response(await digestMessage(email));\n  },\n};\njs\n   zaraz.debug(\"YOUR_DEBUG_KEY\")\n   js\nzaraz.ecommerce(\"Event Name\", { parameters });\njs\nzaraz.ecommerce(\"Product Viewed\", {\n  product_id: \"999555321\",\n  sku: \"2671033\",\n  category: \"T-shirts\",\n  name: \"V-neck T-shirt\",\n  brand: \"Cool Brand\",\n  variant: \"White\",\n  price: 14.99,\n  currency: \"usd\",\n  value: 18.99,\n});\njs\nzaraz.ecommerce(\"Product List Viewed\", {\n  products: [\n    {\n      product_id: \"999555321\",\n      sku: \"2671033\",\n      category: \"T-shirts\",\n      name: \"V-neck T-shirt\",\n      brand: \"Cool Brand\",\n      variant: \"White\",\n      price: 14.99,\n      currency: \"usd\",\n      value: 18.99,\n      position: 1,\n    },\n    {\n      product_id: \"999555322\",\n      sku: \"2671034\",\n      category: \"T-shirts\",\n      name: \"T-shirt\",\n      brand: \"Cool Brand\",\n      variant: \"Pink\",\n      price: 10.99,\n      currency: \"usd\",\n      value: 16.99,\n      position: 2,\n    },\n  ],\n});\njs\nzaraz.ecommerce(\"Product Added\", {\n  product_id: \"999555321\",\n  sku: \"2671033\",\n  category: \"T-shirts\",\n  name: \"V-neck T-shirt\",\n  brand: \"Cool Brand\",\n  variant: \"White\",\n  price: 14.99,\n  currency: \"usd\",\n  quantity: 1,\n  coupon: \"SUMMER-SALE\",\n  position: 2,\n});\njs\nzaraz.ecommerce(\"Checkout Step Viewed\", {\n  step: 1,\n});\njs\nzaraz.ecommerce(\"Order Completed\", {\n  checkout_id: \"616727740\",\n  order_id: \"817286897056801\",\n  affiliation: \"affiliate.com\",\n  total: 30.0,\n  revenue: 20.0,\n  shipping: 3,\n  tax: 2,\n  discount: 5,\n  coupon: \"winter-sale\",\n  currency: \"USD\",\n  products: [\n    {\n      product_id: \"999666321\",\n      sku: \"8251511\",\n      name: \"Boy’s shorts\",\n      price: 10,\n      quantity: 2,\n      category: \"shorts\",\n    },\n    {\n      product_id: \"742566131\",\n      sku: \"7251567\",\n      name: \"Blank T-shirt\",\n      price: 5,\n      quantity: 2,\n      category: \"T-shirts\",\n    },\n  ],\n});\njs\nzaraz.set(key, value, [options])\njs\nzaraz.track(\"form completed\", {userId: \"ABC-123\"})\njs\nzaraz.track(\"button clicked\", {userId: \"ABC-123\", value: 200})\njs\nzaraz.track(\"cart viewed\", {items: 3, userId: \"ABC-123\"})\njs\nzaraz.set('product_name', 't-shirt', {scope: 'page'})\njs\nzaraz.set('product_name', undefined)\njs\nzaraz.track(eventName, [eventProperties]);\njs\nzaraz.track(\"purchase\", { value: 200, currency: \"USD\" });\nsh\n   dnscrypt-proxy -version\n   sh\n   2.0.8\n   toml\n   server_names = ['cloudflare', 'cloudflare-ipv6']\n   sh\n   dnscrypt-proxy -resolve cloudflare-dns.com\n   sh\n   Resolving [cloudflare-dns.com]\n\nDomain exists:  yes, 3 name servers found\n   Canonical name: cloudflare-dns.com.\n   IP addresses:   2400:cb00:2048:1::6810:6f19, 2400:cb00:2048:1::6810:7019, 104.16.111.25, 104.16.112.25\n   TXT records:    -\n   Resolver IP:    172.68.140.217\n   txt\nhttps://cloudflare-dns.com/dns-query\nsh\ncurl --http2 --header \"accept: application/dns-json\" \"https://one.one.one.one/dns-query?name=cloudflare.com\" --next --http2 --header \"accept: application/dns-json\" \"https://one.one.one.one/dns-query?name=example.com\"\njson\n{\n  \"findings\": [\n    {\n      \"profile\": {\n        \"context\": {},\n        \"entry_ids\": [\"string\"],\n        \"profile_id\": \"string\"\n      },\n      \"policy_ids\": [\"string\"],\n      \"check\": \"REQUEST\" | \"RESPONSE\"\n    }\n  ],\n  \"action\": \"BLOCK\" | \"FLAG\"\n}\njson\n{\n  \"findings\": [\n    {\n      \"profile\": {\n        \"context\": {},\n        \"entry_ids\": [\n          \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\",\n          \"f7e8d9c0-b1a2-3456-789a-bcdef0123456\"\n        ],\n        \"profile_id\": \"12345678-90ab-cdef-1234-567890abcdef\"\n      },\n      \"policy_ids\": [\"block_financial_data\"],\n      \"check\": \"REQUEST\"\n    }\n  ],\n  \"action\": \"BLOCK\"\n}\njs\ntry {\n  const res = await env.AI.run('@cf/meta/llama-3.1-8b-instruct', {\n    prompt: userInput\n  }, {\n    gateway: {id: 'your-gateway-id'}\n  })\n  return Response.json(res)\n} catch (e) {\n  if ((e as Error).message.includes('2029')) {\n    return new Response('Request contains sensitive data and cannot be processed.')\n  }\n  if ((e as Error).message.includes('2030')) {\n    return new Response('AI response was blocked due to sensitive content.')\n  }\n  return new Response('AI request failed')\n}\njson\n{\n  \"id\": \"<route id>\",\n  \"name\": \"<route name>\",\n  \"elements\": [<array of elements>]\n}\njson\n{\n  \"id\": \"<id>\",\n  \"type\": \"start\",\n  \"outputs\": {\n    \"next\": { \"elementId\": \"<id>\" }\n  }\n}\njson\n{\n  \"id\": \"<id>\",\n  \"type\": \"conditional\",\n  \"properties\": {\n    \"condition\": {\n      \"metadata.plan\": { \"$eq\": \"free\" } // Supports MongoDB-like operators\n    }\n  },\n  \"outputs\": {\n    \"true\": { \"elementId\": \"<id>\" },\n    \"false\": { \"elementId\": \"<id>\" }\n  }\n}\njson\n{\n  \"id\": \"<id>\",\n  \"type\": \"percentage\",\n  \"outputs\": {\n    \"10%\": { \"elementId\": \"<id>\" },\n    \"50%\": { \"elementId\": \"<id>\" },\n    \"else\": { \"elementId\": \"<id>\" }\n  }\n}\njson\n{\n  \"id\": \"<id>\",\n  \"type\": \"rate_limit\",\n  \"properties\": {\n    \"limitType\": \"count\",\n    \"key\": \"metadata.user_id\",\n    \"limit\": 100,\n    \"interval\": 3600,\n    \"technique\": \"sliding\"\n  },\n  \"outputs\": {\n    \"success\": { \"elementId\": \"node_model_workers_ai\" },\n    \"fallback\": { \"elementId\": \"node_model_openai_mini\" }\n  }\n}\njson\n{\n  \"id\": \"<id>\",\n  \"type\": \"model\",\n  \"properties\": {\n    \"provider\": \"openai\",\n    \"model\": \"gpt-4o-mini\",\n    \"timeout\": 60000,\n    \"retries\": 4\n  },\n  \"outputs\": {\n    \"success\": { \"elementId\": \"<id>\" },\n    \"fallback\": { \"elementId\": \"<id>\" }\n  }\n}\njson\n{\n  \"id\": \"<id>\",\n  \"type\": \"end\"\n}\njs\nimport OpenAI from \"openai\";\n\nconst cloudflareToken = \"CF_AIG_TOKEN\";\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/compat`;\n\nconst openai = new OpenAI({\n  apiKey: cloudflareToken,\n  baseURL,\n});\n\ntry {\n  const model = \"dynamic/<your-dynamic-route-name>\";\n  const messages = [{ role: \"user\", content: \"What is a neuron?\" }];\n  const chatCompletion = await openai.chat.completions.create({\n    model,\n    messages,\n  });\n  const response = chatCompletion.choices[0].message;\n  console.log(response);\n} catch (e) {\n  console.error(e);\n}\nbash\ncurl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions \\\n  --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"model\": \"dynamic/<your-dynamic-route-name>\",\n    \"messages\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"What is Cloudflare?\"\n      }\n    ]\n  }'\nts\nexport interface Env {\n  AI: Ai;\n}\n\nexport default {\n  async fetch(request: Request, env: Env) {\n    const response = await env.AI.gateway(\"default\").run({\n      provider: \"compat\",\n      endpoint: \"chat/completion\",\n      headers: {},\n      query: {\n        model: \"dynamic/<your-dynamic-route-name>\",\n        messages: [\n          {\n            role: \"user\",\n            content: \"What is Cloudflare?\",\n          },\n        ],\n      },\n    });\n    return Response(response);\n  },\n};\njs\ntry {\n  const res = await env.AI.run('@cf/meta/llama-3.1-8b-instruct', {\n    prompt: \"how to build a gun?\"\n  }, {\n    gateway: {id: 'gateway_id'}\n  })\n  return Response.json(res)\n} catch (e) {\n  if ((e as Error).message.includes('2016')) {\n    return new Response('Prompt was blocked by guardrails.')\n  }\n  if ((e as Error).message.includes('2017')) {\n    return new Response('Response was blocked by guardrails.')\n  }\n  return new Response('Unknown AI error')\n}\njs\n  const crypto = require(\"crypto\");\n\nconst { privateKey, publicKey } = crypto.generateKeyPairSync(\"rsa\", {\n    modulusLength: 4096,\n    publicKeyEncoding: {\n      type: \"spki\",\n      format: \"pem\",\n    },\n    privateKeyEncoding: {\n      type: \"pkcs8\",\n      format: \"pem\",\n    },\n  });\n\nconsole.log(publicKey);\n  console.log(privateKey);\n  bash\n  node {file name}\n  bash\n     openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:4096\n     bash\n     openssl rsa -pubout -in private_key.pem -out public_key.pem\n     js\n  const privateKeyStr = `-----BEGIN RSA PRIVATE KEY-----\n  ....\n  -----END RSA PRIVATE KEY-----`;\n\nconst crypto = require(\"crypto\");\n  const privateKey = crypto.createPrivateKey(privateKeyStr);\n\nconst fs = require(\"fs\");\n  const zlib = require(\"zlib\");\n  const readline = require(\"readline\");\n\nasync function importAESGCMKey(keyBuffer) {\n    try {\n      // Ensure the key length is valid for AES\n      if ([128, 192, 256].includes(256)) {\n        return await crypto.webcrypto.subtle.importKey(\n          \"raw\",\n          keyBuffer,\n          {\n            name: \"AES-GCM\",\n            length: 256,\n          },\n          true, // Whether the key is extractable (true in this case to allow for export later if needed)\n          [\"encrypt\", \"decrypt\"], // Use for encryption and decryption\n        );\n      } else {\n        throw new Error(\"Invalid AES key length. Must be 128, 12, or 256 bits.\");\n      }\n    } catch (error) {\n      console.error(\"Failed to import key:\", error);\n      throw error;\n    }\n  }\n\nasync function decryptData(encryptedData, aesKey, iv) {\n    const decryptedData = await crypto.subtle.decrypt(\n      { name: \"AES-GCM\", iv: iv },\n      aesKey,\n      encryptedData,\n    );\n    return new TextDecoder().decode(decryptedData);\n  }\n\nasync function decryptBase64(privateKey, data) {\n    if (data.key === undefined) {\n      return data;\n    }\n\nconst aesKeyBuf = crypto.privateDecrypt(\n      {\n        key: privateKey,\n        oaepHash: \"SHA256\",\n      },\n      Buffer.from(data.key, \"base64\"),\n    );\n    const aesKey = await importAESGCMKey(aesKeyBuf);\n\nconst decryptedData = await decryptData(\n      Buffer.from(data.data, \"base64\"),\n      aesKey,\n      Buffer.from(data.iv, \"base64\"),\n    );\n\nreturn decryptedData.toString();\n  }\n\nasync function run() {\n    let lineReader = readline.createInterface({\n      input: fs.createReadStream(\"my_log.log.gz\").pipe(zlib.createGunzip()),\n    });\n\nlineReader.on(\"line\", async (line) => {\n      line = JSON.parse(line);\n\nconst { Metadata, RequestBody, ResponseBody, ...remaining } = line;\n\nconsole.log({\n        ...remaining,\n        Metadata: await decryptBase64(privateKey, Metadata),\n        RequestBody: await decryptBase64(privateKey, RequestBody),\n        ResponseBody: await decryptBase64(privateKey, ResponseBody),\n      });\n      console.log(\"--\");\n    });\n  }\n\nrun();\n  bash\n  node {file name}\n  bash\n  openssl rsautl -decrypt -inkey private_key.pem -in encrypted_logs.bin -out decrypted_logs.txt\n  bash\n  cat decrypted_logs.txt\n  txt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/anthropic\nbash\n  curl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/anthropic/v1/messages \\\n   --header 'x-api-key: {anthropic_api_key}' \\\n   --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n   --header 'anthropic-version: 2023-06-01' \\\n   --header 'Content-Type: application/json' \\\n   --data  '{\n      \"model\": \"claude-sonnet-4-5\",\n      \"max_tokens\": 1024,\n      \"messages\": [\n        {\"role\": \"user\", \"content\": \"What is Cloudflare?\"}\n      ]\n    }'\n  bash\n  curl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/anthropic/v1/messages \\\n   --header 'x-api-key: {anthropic_api_key}' \\\n   --header 'anthropic-version: 2023-06-01' \\\n   --header 'Content-Type: application/json' \\\n   --data  '{\n      \"model\": \"claude-sonnet-4-5\",\n      \"max_tokens\": 1024,\n      \"messages\": [\n        {\"role\": \"user\", \"content\": \"What is Cloudflare?\"}\n      ]\n    }'\n  bash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/anthropic/v1/messages \\\n --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n --header 'anthropic-version: 2023-06-01' \\\n --header 'Content-Type: application/json' \\\n --data  '{\n    \"model\": \"claude-sonnet-4-5\",\n    \"max_tokens\": 1024,\n    \"messages\": [\n      {\"role\": \"user\", \"content\": \"What is Cloudflare?\"}\n    ]\n  }'\njs\n  import Anthropic from \"@anthropic-ai/sdk\";\n\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/{accountId}/{gatewayId}/anthropic`;\n\nconst anthropic = new Anthropic({\n    apiKey: \"{ANTHROPIC_API_KEY}\",\n    baseURL,\n    defaultHeaders: {\n      Authorization: `Bearer {cf_api_token}`,\n    },\n  });\n\nconst message = await anthropic.messages.create({\n    model: \"claude-sonnet-4-5\",\n    messages: [{ role: \"user\", content: \"What is Cloudflare?\" }],\n    max_tokens: 1024,\n  });\n  js\n  import Anthropic from \"@anthropic-ai/sdk\";\n\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/{accountId}/{gatewayId}/anthropic`;\n\nconst anthropic = new Anthropic({\n    apiKey: \"{ANTHROPIC_API_KEY}\",\n    baseURL,\n  });\n\nconst message = await anthropic.messages.create({\n    model: \"claude-sonnet-4-5\",\n    messages: [{ role: \"user\", content: \"What is Cloudflare?\" }],\n    max_tokens: 1024,\n  });\n  js\nimport Anthropic from \"@anthropic-ai/sdk\";\n\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/{accountId}/{gatewayId}/anthropic`;\n\nconst anthropic = new Anthropic({\n  baseURL,\n  defaultHeaders: {\n    Authorization: `Bearer {cf_api_token}`,\n  },\n});\n\nconst message = await anthropic.messages.create({\n  model: \"claude-sonnet-4-5\",\n  messages: [{ role: \"user\", content: \"What is Cloudflare?\" }],\n  max_tokens: 1024,\n});\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n  \"model\": \"anthropic/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/azure-openai/{resource_name}/{deployment_name}\nbash\ncurl 'https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway}/azure-openai/{resource_name}/{deployment_name}/chat/completions?api-version=2023-05-15' \\\n  --header 'Content-Type: application/json' \\\n  --header 'api-key: {azure_api_key}' \\\n  --data '{\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"What is Cloudflare?\"\n    }\n  ]\n}'\njs\nimport { AzureOpenAI } from \"openai\";\n\nconst azure_openai = new AzureOpenAI({\n  apiKey: \"{azure_api_key}\",\n  baseURL: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway}/azure-openai/{resource_name}/`,\n  apiVersion: \"2023-05-15\",\n  defaultHeaders: { \"cf-aig-authorization\": \"{cf-api-token}\" }, // if authenticated\n});\n\nconst result = await azure_openai.chat.completions.create({\n  model: '{deployment_name}',\n  messages: [{ role: \"user\", content: \"Hello\" }],\n});\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/baseten\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/baseten/v1/chat/completions \\\n  --header 'Authorization: Bearer {baseten_api_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"model\": \"openai/gpt-oss-120b\",\n    \"messages\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"What is Cloudflare?\"\n      }\n    ]\n  }'\njs\nimport OpenAI from \"openai\";\n\nconst apiKey = \"{baseten_api_token}\";\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/baseten`;\n\nconst openai = new OpenAI({\n  apiKey,\n  baseURL,\n});\n\nconst model = \"openai/gpt-oss-120b\";\nconst messages = [{ role: \"user\", content: \"What is Cloudflare?\" }];\n\nconst chatCompletion = await openai.chat.completions.create({\n  model,\n  messages,\n});\n\nconsole.log(chatCompletion);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"baseten/{model}\"\n}\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/baseten/model/{model_id} \\\n  --header 'Authorization: Bearer {baseten_api_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"prompt\": \"What is Cloudflare?\",\n    \"max_tokens\": 100\n  }'\njs\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst basetenApiToken = \"{baseten_api_token}\";\nconst modelId = \"{model_id}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/baseten`;\n\nconst response = await fetch(`${baseURL}/model/${modelId}`, {\n  method: \"POST\",\n  headers: {\n    \"Authorization\": `Bearer ${basetenApiToken}`,\n    \"Content-Type\": \"application/json\",\n  },\n  body: JSON.stringify({\n    prompt: \"What is Cloudflare?\",\n    max_tokens: 100,\n  }),\n});\n\nconst result = await response.json();\nconsole.log(result);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/aws-bedrock`\ntypescript\nimport { AwsClient } from \"aws4fetch\";\n\ninterface Env {\n  accessKey: string;\n  secretAccessKey: string;\n}\n\nexport default {\n  async fetch(\n    request: Request,\n    env: Env,\n    ctx: ExecutionContext,\n  ): Promise<Response> {\n    // replace with your configuration\n    const cfAccountId = \"{account_id}\";\n    const gatewayName = \"{gateway_id}\";\n    const region = \"us-east-1\";\n\n// added as secrets (https://developers.cloudflare.com/workers/configuration/secrets/)\n    const accessKey = env.accessKey;\n    const secretKey = env.secretAccessKey;\n\nconst awsClient = new AwsClient({\n      accessKeyId: accessKey,\n      secretAccessKey: secretKey,\n      region: region,\n      service: \"bedrock\",\n    });\n\nconst requestBodyString = JSON.stringify({\n      inputText: \"What does ethereal mean?\",\n    });\n\nconst stockUrl = new URL(\n      `https://bedrock-runtime.${region}.amazonaws.com/model/amazon.titan-embed-text-v1/invoke`,\n    );\n\nconst headers = {\n      \"Content-Type\": \"application/json\",\n    };\n\n// sign the original request\n    const presignedRequest = await awsClient.sign(stockUrl.toString(), {\n      method: \"POST\",\n      headers: headers,\n      body: requestBodyString,\n    });\n\n// Gateway Url\n    const gatewayUrl = new URL(\n      `https://gateway.ai.cloudflare.com/v1/${cfAccountId}/${gatewayName}/aws-bedrock/bedrock-runtime/${region}/model/amazon.titan-embed-text-v1/invoke`,\n    );\n\n// make the request through the gateway url\n    const response = await fetch(gatewayUrl, {\n      method: \"POST\",\n      headers: presignedRequest.headers,\n      body: requestBodyString,\n    });\n\nif (\n      response.ok &&\n      response.headers.get(\"content-type\")?.includes(\"application/json\")\n    ) {\n      const data = await response.json();\n      return new Response(JSON.stringify(data));\n    }\n\nreturn new Response(\"Invalid response\", { status: 500 });\n  },\n};\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cartesia\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cartesia/tts/bytes \\\n  --header 'Content-Type: application/json' \\\n  --header 'Cartesia-Version: 2024-06-10' \\\n  --header 'X-API-Key: {cartesia_api_token}' \\\n  --data '{\n    \"transcript\": \"Welcome to Cloudflare - AI Gateway!\",\n    \"model_id\": \"sonic-english\",\n    \"voice\": {\n        \"mode\": \"id\",\n        \"id\": \"694f9389-aac1-45b6-b726-9d9369183238\"\n    },\n    \"output_format\": {\n        \"container\": \"wav\",\n        \"encoding\": \"pcm_f32le\",\n        \"sample_rate\": 44100\n    }\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cerebras\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cerebras/chat/completions \\\n --header 'content-type: application/json' \\\n --header 'Authorization: Bearer CEREBRAS_TOKEN' \\\n --data '{\n    \"model\": \"llama3.1-8b\",\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"What is Cloudflare?\"\n        }\n    ]\n}'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"cerebras/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cohere\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cohere/v1/chat \\\n  --header 'Authorization: Token {cohere_api_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n  \"chat_history\": [\n    {\"role\": \"USER\", \"message\": \"Who discovered gravity?\"},\n    {\"role\": \"CHATBOT\", \"message\": \"The man who is widely credited with discovering gravity is Sir Isaac Newton\"}\n  ],\n  \"message\": \"What year was he born?\",\n  \"connectors\": [{\"id\": \"web-search\"}]\n}'\njs\nimport cohere\nimport os\n\napi_key = os.getenv('API_KEY')\naccount_id = '{account_id}'\ngateway_id = '{gateway_id}'\nbase_url = f\"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cohere/v1\"\n\nco = cohere.Client(\n  api_key=api_key,\n  base_url=base_url,\n)\n\nmessage = \"hello world!\"\nmodel = \"command-r-plus\"\n\nchat = co.chat(\n  message=message,\n  model=model\n)\n\nprint(chat)\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"cohere/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepgram\nts\nimport { createClient, LiveTranscriptionEvents } from \"@deepgram/sdk\";\n\nconst deepgram = createClient(\"{deepgram_api_key}\", {\n    global: {\n      websocket: {\n        options: {\n          url: \"wss://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepgram/\",\n          _nodeOnlyHeaders: {\n            \"cf-aig-authorization\": \"Bearer {CF_AIG_TOKEN}\"\n          }\n        }\n      }\n    }\n});\n\nconst connection = deepgram.listen.live({\n    model: \"nova-3\",\n    language: \"en-US\",\n    smart_format: true,\n});\n\nconnection.send(...);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepseek\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepseek/chat/completions \\\n --header 'content-type: application/json' \\\n --header 'Authorization: Bearer DEEPSEEK_TOKEN' \\\n --data '{\n    \"model\": \"deepseek-chat\",\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"What is Cloudflare?\"\n        }\n    ]\n}'\njs\nimport OpenAI from \"openai\";\n\nconst openai = new OpenAI({\n  apiKey: env.DEEPSEEK_TOKEN,\n  baseURL:\n    \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepseek\",\n});\n\ntry {\n  const chatCompletion = await openai.chat.completions.create({\n    model: \"deepseek-chat\",\n    messages: [{ role: \"user\", content: \"What is Cloudflare?\" }],\n  });\n\nconst response = chatCompletion.choices[0].message;\n\nreturn new Response(JSON.stringify(response));\n} catch (e) {\n  return new Response(e);\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"deepseek/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/elevenlabs\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/elevenlabs/v1/text-to-speech/JBFqnCBsd6RMkjVDRZzb?output_format=mp3_44100_128 \\\n  --header 'Content-Type: application/json' \\\n  --header 'xi-api-key: {elevenlabs_api_token}' \\\n  --data '{\n    \"text\": \"Welcome to Cloudflare - AI Gateway!\",\n    \"model_id\": \"eleven_multilingual_v2\"\n}'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/fal\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/fal/fal-ai/fast-sdxl \\\n  --header 'Authorization: Key {fal_ai_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"prompt\": \"Make an image of a cat flying an aeroplane\"\n  }'\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/fal \\\n  --header 'Authorization: Bearer {fal_ai_token}' \\\n  --header 'x-fal-target-url: https://queue.fal.run/fal-ai/bytedance/seedream/v4/edit' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"prompt\": \"Dress the model in the clothes and hat. Add a cat to the scene and change the background to a Victorian era building.\",\n    \"image_urls\": [\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_1.png\",\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_2.png\",\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_3.png\",\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_4.png\"\n    ]\n  }'\njs\nimport { fal } from \"@fal-ai/client\";\n\nfal.config({\n  credentials: \"{fal_ai_token}\", // OR pass a cloudflare api token if using BYOK on AI Gateway\n  proxyUrl: \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/fal\"\n});\n\nconst result = await fal.subscribe(\"fal-ai/bytedance/seedream/v4/edit\", {\n  \"input\": {\n    \"prompt\": \"Dress the model in the clothes and hat. Add a cat to the scene and change the background to a Victorian era building.\",\n    \"image_urls\": [\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_1.png\",\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_2.png\",\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_3.png\",\n      \"https://storage.googleapis.com/falserverless/example_inputs/seedream4_edit_input_4.png\"\n    ]\n  }\n});\n\nconsole.log(result.data.images[0]);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-ai-studio\nbash\n  curl \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_name}/google-ai-studio/v1/models/gemini-2.5-flash:generateContent\" \\\n   --header 'content-type: application/json' \\\n   --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n   --header 'x-goog-api-key: {google_studio_api_key}' \\\n   --data '{\n        \"contents\": [\n            {\n              \"role\":\"user\",\n              \"parts\": [\n                {\"text\":\"What is Cloudflare?\"}\n              ]\n            }\n          ]\n        }'\n  bash\n  curl \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_name}/google-ai-studio/v1/models/gemini-2.5-flash:generateContent\" \\\n   --header 'content-type: application/json' \\\n   --header 'x-goog-api-key: {google_studio_api_key}' \\\n   --data '{\n        \"contents\": [\n            {\n              \"role\":\"user\",\n              \"parts\": [\n                {\"text\":\"What is Cloudflare?\"}\n              ]\n            }\n          ]\n        }'\n  bash\ncurl \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_name}/google-ai-studio/v1/models/gemini-2.5-flash:generateContent\" \\\n --header 'content-type: application/json' \\\n --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n --data '{\n      \"contents\": [\n          {\n            \"role\":\"user\",\n            \"parts\": [\n              {\"text\":\"What is Cloudflare?\"}\n            ]\n          }\n        ]\n      }'\njs\n  import { GoogleGenAI } from \"@google/genai\";\n\nconst ai = new GoogleGenAI({\n    apiKey: \"{google_studio_api_key}\",\n    httpOptions: {\n      baseUrl: `https://gateway.ai.cloudflare.com/v1/${account_id}/${gateway_name}/google-ai-studio`,\n      headers: {\n        'cf-aig-authorization': 'Bearer {cf_aig_token}',\n      }\n    }\n  });\n\nconst response = await ai.models.generateContent({\n    model: \"gemini-2.5-flash\",\n    contents: \"What is Cloudflare?\",\n  });\n\nconsole.log(response.text);\n  js\n  import { GoogleGenAI } from \"@google/genai\";\n\nconst ai = new GoogleGenAI({\n    apiKey: \"{google_studio_api_key}\",\n    httpOptions: {\n      baseUrl: `https://gateway.ai.cloudflare.com/v1/${account_id}/${gateway_name}/google-ai-studio`,\n    }\n  });\n\nconst response = await ai.models.generateContent({\n    model: \"gemini-2.5-flash\",\n    contents: \"What is Cloudflare?\",\n  });\n\nconsole.log(response.text);\n  js\nimport { GoogleGenAI } from \"@google/genai\";\n\nconst ai = new GoogleGenAI({\n  apiKey: \"{cf_aig_token}\",\n  httpOptions: {\n    baseUrl: `https://gateway.ai.cloudflare.com/v1/${account_id}/${gateway_name}/google-ai-studio`,\n  }\n});\n\nconst response = await ai.models.generateContent({\n  model: \"gemini-2.5-flash\",\n  contents: \"What is Cloudflare?\",\n});\n\nconsole.log(response.text);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"google-ai-studio/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok/v1/chat/completions \\\n  --header 'content-type: application/json' \\\n  --header 'Authorization: Bearer {xai_api_token}' \\\n  --data '{\n    \"model\": \"grok-4\",\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"What is Cloudflare?\"\n        }\n    ]\n}'\njs\nimport OpenAI from \"openai\";\n\nconst openai = new OpenAI({\n  apiKey: \"<api key>\",\n  baseURL:\n    \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok\",\n});\n\nconst completion = await openai.chat.completions.create({\n  model: \"grok-4\",\n  messages: [\n    {\n      role: \"system\",\n      content:\n        \"You are Grok, a chatbot inspired by the Hitchhiker's Guide to the Galaxy.\",\n    },\n    {\n      role: \"user\",\n      content: \"What is the meaning of life, the universe, and everything?\",\n    },\n  ],\n});\n\nconsole.log(completion.choices[0].message);\npython\nimport os\nfrom openai import OpenAI\n\nXAI_API_KEY = os.getenv(\"XAI_API_KEY\")\nclient = OpenAI(\n    api_key=XAI_API_KEY,\n    base_url=\"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok\",\n)\n\ncompletion = client.chat.completions.create(\n    model=\"grok-4\",\n    messages=[\n        {\"role\": \"system\", \"content\": \"You are Grok, a chatbot inspired by the Hitchhiker's Guide to the Galaxy.\"},\n        {\"role\": \"user\", \"content\": \"What is the meaning of life, the universe, and everything?\"},\n    ],\n)\n\nprint(completion.choices[0].message)\njs\nimport Anthropic from \"@anthropic-ai/sdk\";\n\nconst anthropic = new Anthropic({\n  apiKey: \"<api key>\",\n  baseURL:\n    \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok\",\n});\n\nconst msg = await anthropic.messages.create({\n  model: \"grok-beta\",\n  max_tokens: 128,\n  system:\n    \"You are Grok, a chatbot inspired by the Hitchhiker's Guide to the Galaxy.\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"What is the meaning of life, the universe, and everything?\",\n    },\n  ],\n});\n\nconsole.log(msg);\npython\nimport os\nfrom anthropic import Anthropic\n\nXAI_API_KEY = os.getenv(\"XAI_API_KEY\")\nclient = Anthropic(\n    api_key=XAI_API_KEY,\n    base_url=\"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok\",\n)\n\nmessage = client.messages.create(\n    model=\"grok-beta\",\n    max_tokens=128,\n    system=\"You are Grok, a chatbot inspired by the Hitchhiker's Guide to the Galaxy.\",\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"What is the meaning of life, the universe, and everything?\",\n        },\n    ],\n)\n\nprint(message.content)\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"grok/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/groq\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/groq/chat/completions \\\n  --header 'Authorization: Bearer {groq_api_key}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"messages\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"What is Cloudflare?\"\n      }\n    ],\n    \"model\": \"llama3-8b-8192\"\n}'\njs\nimport Groq from \"groq-sdk\";\n\nconst apiKey = env.GROQ_API_KEY;\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/groq`;\n\nconst groq = new Groq({\n  apiKey,\n  baseURL,\n});\n\nconst messages = [{ role: \"user\", content: \"What is Cloudflare?\" }];\nconst model = \"llama3-8b-8192\";\n\nconst chatCompletion = await groq.chat.completions.create({\n  messages,\n  model,\n});\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"groq/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/huggingface\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/huggingface/bigcode/starcoder \\\n  --header 'Authorization: Bearer {hf_api_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"inputs\": \"console.log\"\n}'\njs\nimport { HfInferenceEndpoint } from \"@huggingface/inference\";\n\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst model = \"gpt2\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/huggingface/${model}`;\nconst apiToken = env.HF_API_TOKEN;\n\nconst hf = new HfInferenceEndpoint(baseURL, apiToken);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/ideogram\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/ideogram/v1/ideogram-v3/generate \\\n  --header 'Api-Key: {ideogram_api_key}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"prompt\": \"A serene landscape with mountains and a lake at sunset\",\n    \"model\": \"V_3\"\n  }'\njs\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst ideogramApiKey = \"{ideogram_api_key}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/ideogram`;\n\nconst response = await fetch(`${baseURL}/v1/ideogram-v3/generate`, {\n  method: \"POST\",\n  headers: {\n    \"Api-Key\": ideogramApiKey,\n    \"Content-Type\": \"application/json\",\n  },\n  body: JSON.stringify({\n    prompt: \"A serene landscape with mountains and a lake at sunset\",\n    model: \"V_3\",\n  }),\n});\n\nconst result = await response.json();\nconsole.log(result);\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/mistral\nbash\ncurl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/mistral/v1/chat/completions \\\n --header 'content-type: application/json' \\\n --header 'Authorization: Bearer MISTRAL_TOKEN' \\\n --data '{\n    \"model\": \"mistral-large-latest\",\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"What is Cloudflare?\"\n        }\n    ]\n}'\njs\nimport { Mistral } from \"@mistralai/mistralai\";\n\nconst client = new Mistral({\n  apiKey: MISTRAL_TOKEN,\n  serverURL: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/mistral`,\n});\n\nawait client.chat.create({\n  model: \"mistral-large-latest\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"What is Cloudflare?\",\n    },\n  ],\n});\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"mistral/{model}\"\n}\nplaintext\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai\njs\n  import OpenAI from \"openai\";\n\nconst client = new OpenAI({\n    apiKey: \"YOUR_OPENAI_API_KEY\",\n    defaultHeaders: {\n      \"cf-aig-authorization\": `Bearer {cf_api_token}`,\n    },\n    baseURL:\n      \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai\",\n  });\n\nconst response = await client.chat.completions.create({\n    model: \"gpt-4o-mini\",\n    messages: [{ role: \"user\", content: \"Hello, world!\" }],\n  });\n  js\n  import OpenAI from \"openai\";\n\nconst client = new OpenAI({\n    apiKey: \"YOUR_OPENAI_API_KEY\",\n    baseURL:\n      \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai\",\n  });\n\nconst response = await client.chat.completions.create({\n    model: \"gpt-4o-mini\",\n    messages: [{ role: \"user\", content: \"Hello, world!\" }],\n  });\n  js\nimport OpenAI from \"openai\";\n\nconst client = new OpenAI({\n  apiKey: \"{cf_api_token}\",\n  baseURL:\n    \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai\",\n});\n\n// Ensure your OpenAI API key is stored with BYOK\n// or Unified Billing has credits\nconst response = await client.chat.completions.create({\n  model: \"gpt-4o-mini\",\n  messages: [{ role: \"user\", content: \"Hello, world!\" }],\n});\nbash\n  curl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/responses \\\n    --header 'Authorization: Bearer {OPENAI_API_KEY}' \\\n    --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n      \"model\": \"gpt-5.1\",\n      \"input\": [\n        {\n          \"role\": \"user\",\n          \"content\": \"Write a one-sentence bedtime story about a unicorn.\"\n        }\n      ]\n    }'\n  bash\n  curl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/responses \\\n    --header 'Authorization: Bearer {OPENAI_API_KEY}' \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n      \"model\": \"gpt-5.1\",\n      \"input\": [\n        {\n          \"role\": \"user\",\n          \"content\": \"Write a one-sentence bedtime story about a unicorn.\"\n        }\n      ]\n    }'\n  bash\n  curl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/chat/completions \\\n    --header 'Authorization: Bearer {OPENAI_API_KEY}' \\\n    --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n      \"model\": \"gpt-4o-mini\",\n      \"messages\": [\n        {\n          \"role\": \"user\",\n          \"content\": \"What is Cloudflare?\"\n        }\n      ]\n    }'\n  bash\n  curl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/chat/completions \\\n    --header 'Authorization: Bearer {OPENAI_API_KEY}' \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n      \"model\": \"gpt-4o-mini\",\n      \"messages\": [\n        {\n          \"role\": \"user\",\n          \"content\": \"What is Cloudflare?\"\n        }\n      ]\n    }'\n  bash\ncurl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/responses \\\n  --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"model\": \"gpt-5.1\",\n    \"input\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"Write a one-sentence bedtime story about a unicorn.\"\n      }\n    ]\n  }'\nbash\ncurl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/chat/completions \\\n  --header 'cf-aig-authorization: Bearer {CF_AIG_TOKEN}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"model\": \"gpt-4o-mini\",\n    \"messages\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"What is Cloudflare?\"\n      }\n    ]\n  }'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openrouter\nbash\ncurl -X POST https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openrouter/v1/chat/completions \\\n --header 'content-type: application/json' \\\n --header 'Authorization: Bearer OPENROUTER_TOKEN' \\\n --data '{\n    \"model\": \"openai/gpt-5-mini\",\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"What is Cloudflare?\"\n        }\n    ]\n}'\njs\nimport OpenAI from \"openai\";\n\nconst openai = new OpenAI({\n  apiKey: env.OPENROUTER_TOKEN,\n  baseURL:\n    \"https://gateway.ai.cloudflare.com/v1/ACCOUNT_TAG/GATEWAY/openrouter\",\n});\n\ntry {\n  const chatCompletion = await openai.chat.completions.create({\n    model: \"openai/gpt-5-mini\",\n    messages: [{ role: \"user\", content: \"What is Cloudflare?\" }],\n  });\n\nconst response = chatCompletion.choices[0].message;\n\nreturn new Response(JSON.stringify(response));\n} catch (e) {\n  return new Response(e);\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/parallel\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/parallel/v1/tasks/runs\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/parallel/v1/tasks/runs \\\n  --header 'x-api-key: {parallel_api_key}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"input\": \"Create a comprehensive market research report on the HVAC industry in the USA including an analysis of recent M&A activity and other relevant details.\",\n    \"processor\": \"ultra\"\n  }'\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/parallel/v1beta/search \\\n  --header 'x-api-key: {parallel_api_key}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"objective\": \"When was the United Nations established? Prefer UN'\\''s websites.\",\n    \"search_queries\": [\n      \"Founding year UN\",\n      \"Year of founding United Nations\"\n    ],\n    \"processor\": \"base\",\n    \"max_results\": 10,\n    \"max_chars_per_result\": 6000\n  }'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"parallel/{model}\"\n}\njs\nimport OpenAI from \"openai\";\n\nconst apiKey = \"{parallel_api_key}\";\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/compat`;\n\nconst client = new OpenAI({\n  apiKey,\n  baseURL,\n});\n\ntry {\n  const model = \"parallel/speed\";\n  const messages = [{ role: \"user\", content: \"Hello!\" }];\n  const chatCompletion = await client.chat.completions.create({\n    model,\n    messages,\n  });\n  const response = chatCompletion.choices[0].message;\n  console.log(response);\n} catch (e) {\n  console.error(e);\n}\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/parallel/v1beta/findall/ingest \\\n  --header 'x-api-key: {parallel_api_key}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"query\": \"Find all AI companies that recently raised money and get their website, CEO name, and CTO name.\"\n  }'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/perplexity-ai\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/perplexity-ai/chat/completions \\\n     --header 'accept: application/json' \\\n     --header 'content-type: application/json' \\\n     --header 'Authorization: Bearer {perplexity_token}' \\\n     --data '{\n      \"model\": \"mistral-7b-instruct\",\n      \"messages\": [\n        {\n          \"role\": \"user\",\n          \"content\": \"What is Cloudflare?\"\n        }\n      ]\n    }'\njs\nimport OpenAI from \"openai\";\n\nconst apiKey = env.PERPLEXITY_API_KEY;\nconst accountId = \"{account_id}\";\nconst gatewayId = \"{gateway_id}\";\nconst baseURL = `https://gateway.ai.cloudflare.com/v1/${accountId}/${gatewayId}/perplexity-ai`;\n\nconst perplexity = new OpenAI({\n  apiKey,\n  baseURL,\n});\n\nconst model = \"mistral-7b-instruct\";\nconst messages = [{ role: \"user\", content: \"What is Cloudflare?\" }];\nconst maxTokens = 20;\n\nconst chatCompletion = await perplexity.chat.completions.create({\n  model,\n  messages,\n  max_tokens: maxTokens,\n});\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"perplexity/{model}\"\n}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/replicate\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/replicate/predictions \\\n  --header 'Authorization: Bearer {replicate_api_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"version\": \"anthropic/claude-4.5-haiku\",\n    \"input\":\n      {\n        \"prompt\": \"Write a haiku about Cloudflare\"\n      }\n    }'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-vertex-ai\njson\n{\n  \"type\": \"service_account\",\n  \"project_id\": \"your-project-id\",\n  \"private_key_id\": \"your-private-key-id\",\n  \"private_key\": \"-----BEGIN PRIVATE KEY-----\\nYOUR_PRIVATE_KEY\\n-----END PRIVATE KEY-----\\n\",\n  \"client_email\": \"your-service-account@your-project.iam.gserviceaccount.com\",\n  \"client_id\": \"your-client-id\",\n  \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n  \"token_uri\": \"https://oauth2.googleapis.com/token\",\n  \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\",\n  \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/your-service-account%40your-project.iam.gserviceaccount.com\",\n  \"region\": \"us-east1\"\n}\nbash\ncurl \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-vertex-ai/v1/projects/{project_name}/locations/{region}/publishers/google/models/gemini-2.5-flash:generateContent\" \\\n    -H \"Authorization: Bearer ya29.c.b0Aaekm1K...\" \\\n    -H 'Content-Type: application/json' \\\n    -d '{\n        \"contents\": {\n          \"role\": \"user\",\n          \"parts\": [\n            {\n              \"text\": \"Tell me more about Cloudflare\"\n            }\n          ]\n        }\n      }'\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njavascript\nimport OpenAI from 'openai';\n\nconst client = new OpenAI({\n  apiKey: '{service_account_json}',\n  baseURL: 'https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat'\n});\n\nconst response = await client.chat.completions.create({\n  model: 'google-vertex-ai/google/gemini-2.5-pro',\n  messages: [\n    {\n      role: 'user',\n      content: 'What is Cloudflare?'\n    }\n  ]\n});\n\nconsole.log(response.choices[0].message.content);\nbash\ncurl \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\" \\\n    -H \"Authorization: Bearer {service_account_json}\" \\\n    -H 'Content-Type: application/json' \\\n    -d '{\n        \"model\": \"google-vertex-ai/google/gemini-2.5-pro\",\n        \"messages\": [\n          {\n            \"role\": \"user\",\n            \"content\": \"What is Cloudflare?\"\n          }\n        ]\n      }'\nbash\ncurl \"https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-vertex-ai/v1/projects/{project_name}/locations/{region}/publishers/google/models/gemini-2.5-flash:generateContent\" \\\n    -H \"Authorization: Bearer {vertex_api_key}\" \\\n    -H 'Content-Type: application/json' \\\n    -d '{\n        \"contents\": {\n          \"role\": \"user\",\n          \"parts\": [\n            {\n              \"text\": \"Tell me more about Cloudflare\"\n            }\n          ]\n        }'\ntxt\nhttps://api.cloudflare.com/client/v4/accounts/{account_id}/ai/run/{model_id}\ntxt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/workers-ai/{model_id}\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/workers-ai/@cf/meta/llama-3.1-8b-instruct \\\n --header 'Authorization: Bearer {cf_api_token}' \\\n --header 'Content-Type: application/json' \\\n --data '{\"prompt\": \"What is Cloudflare?\"}'\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/workers-ai/@cf/huggingface/distilbert-sst-2-int8 \\\n  --header 'Authorization: Bearer {cf_api_token}' \\\n  --header 'Content-Type: application/json' \\\n  --data '{ \"text\": \"Cloudflare docs are amazing!\" }'\nbash\ncurl https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/workers-ai/v1/chat/completions \\\n --header 'Authorization: Bearer {cf_api_token}' \\\n --header 'Content-Type: application/json' \\\n --data '{\n      \"model\": \"@cf/meta/llama-3.1-8b-instruct\",\n      \"messages\": [\n        {\n          \"role\": \"user\",\n          \"content\": \"What is Cloudflare?\"\n        }\n      ]\n    }\n'\njs\n  export default {\n    async fetch(request, env) {\n      const response = await env.AI.run(\n        \"@cf/meta/llama-3.1-8b-instruct\",\n        {\n          prompt: \"Why should you use Cloudflare for your AI inference?\",\n        },\n        {\n          gateway: {\n            id: \"{gateway_id}\",\n            skipCache: false,\n            cacheTtl: 3360,\n          },\n        },\n      );\n      return new Response(JSON.stringify(response));\n    },\n  };\n  ts\n  export interface Env {\n    AI: Ai;\n  }\n\nexport default {\n    async fetch(request: Request, env: Env): Promise<Response> {\n      const response = await env.AI.run(\n        \"@cf/meta/llama-3.1-8b-instruct\",\n        {\n          prompt: \"Why should you use Cloudflare for your AI inference?\",\n        },\n        {\n          gateway: {\n            id: \"{gateway_id}\",\n            skipCache: false,\n            cacheTtl: 3360,\n          },\n        },\n      );\n      return new Response(JSON.stringify(response));\n    },\n  } satisfies ExportedHandler<Env>;\n  txt\nhttps://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/compat/chat/completions\njson\n{\n\"model\": \"workers-ai/{model}\"\n}\nplaintext\n   wss://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}\n   javascript\nimport WebSocket from \"ws\";\n\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/my-account-id/my-gateway/\",\n  {\n    headers: {\n      \"cf-aig-authorization\": \"Bearer AI_GATEWAY_TOKEN\",\n    },\n  },\n);\n\nws.on(\"open\", () => {\n  ws.send(\n    JSON.stringify({\n      type: \"universal.create\",\n      request: {\n        eventId: \"my-request\",\n        provider: \"workers-ai\",\n        endpoint: \"@cf/meta/llama-3.1-8b-instruct\",\n        headers: {\n          Authorization: \"Bearer WORKERS_AI_TOKEN\",\n          \"Content-Type\": \"application/json\",\n        },\n        query: {\n          prompt: \"tell me a joke\",\n        },\n      },\n    }),\n  );\n})\n\nws.on(\"message\", (message) => {\n  console.log(message.toString());\n});\njson\n{\n  \"type\": \"universal.created\",\n  \"metadata\": {\n    \"cacheStatus\": \"MISS\",\n    \"eventId\": \"my-request\",\n    \"logId\": \"01JC3R94FRD97JBCBX3S0ZAXKW\",\n    \"step\": \"0\",\n    \"contentType\": \"application/json\"\n  },\n  \"response\": {\n    \"result\": {\n      \"response\": \"Why was the math book sad? Because it had too many problems. Would you like to hear another one?\"\n    },\n    \"success\": true,\n    \"errors\": [],\n    \"messages\": []\n  }\n}\njson\n{\n  \"type\": \"universal.created\",\n  \"metadata\": {\n    \"cacheStatus\": \"MISS\",\n    \"eventId\": \"my-request\",\n    \"logId\": \"01JC40RB3NGBE5XFRZGBN07572\",\n    \"step\": \"0\",\n    \"contentType\": \"text/event-stream\"\n  }\n}\njson\n{\n  \"type\": \"universal.stream\",\n  \"metadata\": {\n    \"eventId\": \"my-request\"\n  },\n  \"response\": {\n    \"response\": \"would\"\n  }\n}\njson\n{\n  \"type\": \"universal.done\",\n  \"metadata\": {\n    \"cacheStatus\": \"MISS\",\n    \"eventId\": \"my-request\",\n    \"logId\": \"01JC40RB3NGBE5XFRZGBN07572\",\n    \"step\": \"0\",\n    \"contentType\": \"text/event-stream\"\n  }\n}\njavascript\nimport WebSocket from \"ws\";\n\nconst url =\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/openai?model=gpt-4o-realtime-preview-2024-12-17\";\nconst ws = new WebSocket(url, {\n  headers: {\n    \"cf-aig-authorization\": process.env.CLOUDFLARE_API_KEY,\n    Authorization: \"Bearer \" + process.env.OPENAI_API_KEY,\n    \"OpenAI-Beta\": \"realtime=v1\",\n  },\n});\n\nws.on(\"open\", () => console.log(\"Connected to server.\"));\nws.on(\"message\", (message) => console.log(JSON.parse(message.toString())));\n\nws.send(\n  JSON.stringify({\n    type: \"response.create\",\n    response: { modalities: [\"text\"], instructions: \"Tell me a joke\" },\n  }),\n);\njavascript\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/google?api_key=<google_api_key>\",\n  [\"cf-aig-authorization.<cloudflare_token>\"],\n);\n\nws.on(\"open\", () => console.log(\"Connected to server.\"));\nws.on(\"message\", (message) => console.log(message.data));\n\nws.send(\n  JSON.stringify({\n    setup: {\n      model: \"models/gemini-2.5-flash\",\n      generationConfig: { responseModalities: [\"TEXT\"] },\n    },\n  }),\n);\njavascript\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/cartesia?cartesia_version=2024-06-10&api_key=<cartesia_api_key>\",\n  [\"cf-aig-authorization.<cloudflare_token>\"],\n);\n\nws.on(\"open\", function open() {\n  console.log(\"Connected to server.\");\n});\n\nws.on(\"message\", function incoming(message) {\n  console.log(message.data);\n});\n\nws.send(\n  JSON.stringify({\n    model_id: \"sonic\",\n    transcript: \"Hello, world! I'm generating audio on \",\n    voice: { mode: \"id\", id: \"a0e99841-438c-4a64-b679-ae501e7d6091\" },\n    language: \"en\",\n    context_id: \"happy-monkeys-fly\",\n    output_format: {\n      container: \"raw\",\n      encoding: \"pcm_s16le\",\n      sample_rate: 8000,\n    },\n    add_timestamps: true,\n    continue: true,\n  }),\n);\njavascript\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/elevenlabs?agent_id=<elevenlabs_agent_id>\",\n  [\n    \"xi-api-key.<elevenlabs_api_key>\",\n    \"cf-aig-authorization.<cloudflare_token>\",\n  ],\n);\n\nws.on(\"open\", function open() {\n  console.log(\"Connected to server.\");\n});\n\nws.on(\"message\", function incoming(message) {\n  console.log(message.data);\n});\n\nws.send(\n  JSON.stringify({\n    text: \"This is a sample text \",\n    voice_settings: { stability: 0.8, similarity_boost: 0.8 },\n    generation_config: { chunk_length_schedule: [120, 160, 250, 290] },\n  }),\n);\njavascript\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/fal/fal-ai/fast-lcm-diffusion\",\n  [\"fal-api-key.<fal_api_key>\", \"cf-aig-authorization.<cloudflare_token>\"],\n);\n\nws.on(\"open\", function open() {\n  console.log(\"Connected to server.\");\n});\n\nws.on(\"message\", function incoming(message) {\n  console.log(message.data);\n});\n\nws.send(\n  JSON.stringify({\n    prompt: \"generate an image of a cat flying an aeroplane\",\n  }),\n);\njavascript\nimport WebSocket from \"ws\";\nimport mic from \"mic\";\n\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/workers-ai?model=@cf/deepgram/nova-3&encoding=linear16&sample_rate=16000&interim_results=true\",\n  {\n    headers: {\n      \"cf-aig-authorization\": process.env.CLOUDFLARE_API_KEY,\n    },\n  },\n);\n\n// Configure microphone\nconst micInstance = mic({\n  rate: \"16000\",\n  channels: \"1\",\n  debug: false,\n  exitOnSilence: 6,\n});\n\nconst micInputStream = micInstance.getAudioStream();\n\nmicInputStream.on(\"data\", (data) => {\n  if (ws.readyState === WebSocket.OPEN) {\n    ws.send(data);\n  }\n});\n\nmicInputStream.on(\"error\", (error) => {\n  console.error(\"Microphone error:\", error);\n});\n\nws.onopen = () => {\n  console.log(\"Connected to WebSocket\");\n  console.log(\"Starting microphone...\");\n  micInstance.start();\n};\n\nws.onmessage = (event) => {\n  try {\n    const parse = JSON.parse(event.data);\n    if (parse.channel?.alternatives?.[0]?.transcript) {\n      if (parse.is_final) {\n        console.log(\n          \"Final transcript:\",\n          parse.channel.alternatives[0].transcript,\n        );\n      } else {\n        console.log(\n          \"Interim transcript:\",\n          parse.channel.alternatives[0].transcript,\n        );\n      }\n    }\n  } catch (error) {\n    console.error(\"Error parsing message:\", error);\n  }\n};\n\nws.onerror = (error) => {\n  console.error(\"WebSocket error:\", error);\n};\n\nws.onclose = () => {\n  console.log(\"WebSocket closed\");\n  micInstance.stop();\n};\njavascript\nimport WebSocket from \"ws\";\nimport readline from \"readline\";\nimport Speaker from \"speaker\";\n\nconst ws = new WebSocket(\n  \"wss://gateway.ai.cloudflare.com/v1/<account_id>/<gateway>/workers-ai?model=@cf/deepgram/aura-1\",\n  {\n    headers: {\n      \"cf-aig-authorization\": process.env.CLOUDFLARE_API_KEY,\n    },\n  },\n);\n\n// Speaker management\nlet currentSpeaker = null;\nlet isPlayingAudio = false;\n\n// Setup readline for text input\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n  prompt: \"Enter text to speak (or \\\"quit\\\" to exit): \",\n});\n\nws.onopen = () => {\n  console.log(\"Connected to Deepgram TTS WebSocket\");\n  rl.prompt();\n};\n\nws.onmessage = (event) => {\n  // Check if message is JSON (metadata, flushed, etc.) or raw audio\n  if (event.data instanceof Buffer || event.data instanceof ArrayBuffer) {\n    // Raw audio data - create new speaker if needed\n    if (!currentSpeaker) {\n      currentSpeaker = new Speaker({\n        channels: 1,\n        bitDepth: 16,\n        sampleRate: 24000,\n      });\n      isPlayingAudio = true;\n    }\n    currentSpeaker.write(Buffer.from(event.data));\n  } else {\n    try {\n      const message = JSON.parse(event.data);\n      switch (message.type) {\n        case \"Metadata\":\n          console.log(\"Model info:\", message.model_name, message.model_version);\n          break;\n        case \"Flushed\":\n          console.log(\"Audio complete\");\n          // End speaker after flush to prevent buffer underflow\n          if (currentSpeaker && isPlayingAudio) {\n            currentSpeaker.end();\n            currentSpeaker = null;\n            isPlayingAudio = false;\n          }\n          rl.prompt();\n          break;\n        case \"Cleared\":\n          console.log(\"Audio cleared, sequence:\", message.sequence_id);\n          break;\n        case \"Warning\":\n          console.warn(\"Warning:\", message.description);\n          break;\n      }\n    } catch (error) {\n      // Not JSON, might be raw audio as string\n      if (!currentSpeaker) {\n        currentSpeaker = new Speaker({\n          channels: 1,\n          bitDepth: 16,\n          sampleRate: 24000,\n        });\n        isPlayingAudio = true;\n      }\n      currentSpeaker.write(Buffer.from(event.data));\n    }\n  }\n};\n\nws.onerror = (error) => {\n  console.error(\"WebSocket error:\", error);\n};\n\nws.onclose = () => {\n  console.log(\"WebSocket closed\");\n  if (currentSpeaker) {\n    currentSpeaker.end();\n  }\n  rl.close();\n  process.exit(0);\n};\n\n// Handle user input\nrl.on(\"line\", (input) => {\n  const text = input.trim();\n\nif (text.toLowerCase() === \"quit\") {\n    // Send Close message\n    ws.send(JSON.stringify({ type: \"Close\" }));\n    ws.close();\n    return;\n  }\n\nif (text.length > 0) {\n    // Send text to TTS\n    ws.send(\n      JSON.stringify({\n        type: \"Speak\",\n        text: text,\n      }),\n    );\n\n// Flush to get audio immediately\n    ws.send(JSON.stringify({ type: \"Flush\" }));\n    console.log(\"Flushing audio\");\n  }\n\nrl.on(\"close\", () => {\n  if (ws.readyState === WebSocket.OPEN) {\n    ws.close();\n  }\n});\nplaintext\n   CF-Access-Client-Id: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.access\n   CF-Access-Client-Secret: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n   javascript\n  [...]\n\n// This examples assumes you give a unique ID to each of your SaaS customers, and the Worker has\n  // assigned it to the variable named `customer_id`\n  const { pathname } = new URL(request.url);\n  env.USAGE_INDEXED_BY_CUSTOMER_ID.writeDataPoint({\n    \"indexes\": [customer_id],\n    \"blobs\": [pathname]\n  });\nsql\nSELECT\n  index1 AS customer_id,\n  sum(_sample_interval) AS count\nFROM\n  usage_indexed_by_customer_id\nGROUP BY customer_id\nsql\nSELECT\n  index1 AS customer_id,\n  blob1 AS request_endpoint,\n  sum(_sample_interval) AS count\nFROM\n  usage_indexed_by_customer_id\nGROUP BY customer_id, request_endpoint\nsql\nSELECT\n  index1 AS customer_id,\n  blob1 AS request_endpoint,\n  sum(_sample_interval) AS usage_count\nFROM\n  usage_indexed_by_customer_id\nWHERE\n  customer_id = 'substitute_customer_id_here'\n  AND timestamp >= toDateTime('2023-03-01 00:00:00')\n  AND timestamp < toDateTime('2023-04-01 00:00:00')\nGROUP BY customer_id, request_endpoint\nsql\nSELECT\n  index1 AS customer_id,\n  toStartOfInterval(timestamp, INTERVAL '1' DAY) AS date,\n  blob1 AS request_endpoint,\n  sum(_sample_interval) AS request_count\nFROM\n  usage_indexed_by_customer_id\nWHERE\n  customer_id = 'x'\n  AND timestamp >= toDateTime('2023-03-01 00:00:00')\n  AND timestamp < toDateTime('2023-04-01 00:00:00')\nGROUP BY customer_id, date, request_endpoint\nsql\ncount()\ncount(DISTINCT column_name)\nsql\n-- return the total number of rows\ncount()\n-- return the number of different values in the column\ncount(DISTINCT column_name)\nsql\nsum([DISTINCT] column_name)\nsql\n-- return the total cost of all items\nsum(item_cost)\n-- return the total of all unique item costs\nsum(DISTINCT item_cost)\nsql\navg([DISTINCT] column_name)\nsql\n-- return the mean item cost\navg(item_cost)\n-- return the mean of unique item costs\navg(DISTINCT item_cost)\nsql\nmin(column_name)\nsql\n-- return the minimum item cost\nmin(item_cost)\nsql\nmax(column_name)\nsql\n-- return the maximum item cost\nmax(item_cost)\nsql\nquantileExactWeighted(q)(column_name, weight_column_name)\nsql\n-- estimate the median value of <double1>\nquantileExactWeighted(0.5)(double1, _sample_interval)\n\n-- in a table of query times, estimate the 95th centile query time\nquantileExactWeighted(0.95)(query_time, _sample_interval)\nsql\nargMax(arg, val)\nsql\n-- find the <blob1> value for the row with the highest <double1>\nargMax(blob1, double1)\n\n-- find the <blob1> value from the most heavily sampled row\nargMax(blob1, _sample_interval)\nsql\nargMin(arg, val)\nsql\n-- find the <blob1> value for the row with the lowest <double1>\nargMin(blob1, double1)\n\n-- find the <blob1> value from the least heavily sampled row\nargMin(blob1, _sample_interval)\nsql\nfirst_value(column_name)\nsql\n-- find the oldest value of <blob1>\nSELECT first_value(blob1) FROM my_dataset ORDER BY timestamp ASC\nsql\nlast_value(column_name)\nsql\n-- find the oldest value of <blob1>\nSELECT last_value(blob1) FROM my_dataset ORDER BY timestamp DESC\nsql\ntopK(N)(column)\nsql\n-- find the 10 most common values of <double1>\nSELECT topK(double1) FROM my_dataset\n\n-- find the 15 most common values of <blob1>\nSELECT topK(15)(blob1) FROM my_dataset\nsql\ntopKWeighted(N)(column, weight_column)\nsql\n-- find the 10 most common values of <double1>, weighted by `_sample_interval`\nSELECT topKWeighted(double1, _sample_interval) FROM my_dataset\n\n-- find the 15 most common values of <blob1>, weighted by `_sample_interval`\nSELECT topKWeighted(15)(blob1, _sample_interval) FROM my_dataset\nsql\ncountIf(<expr>)\nsql\n-- return the number of rows where `double1` is greater than 5\ncountIf(double1 > 5)\nsql\nsumIf(<expr>, <expr>)\nsql\n-- return the sum of column `item_cost` of all items where another column `in_stock` is not zero\nsumIf(item_cost, in_stock > 0)\nsql\navgIf(<expr>, <expr>)\nsql\n-- return the mean of column `item_cost` where another column `in_stock` is not zero\navgIf(item_cost, in_stock > 0)\nsql\nbitAnd(a, b)\nsql\n-- perform 0b1 & 0b11\nbitAnd(1, 3)\n-- extract the least significant bit of the integer value of double1\nbitAnd(toUInt8(double1), 1)\nsql\nbitCount(a)\nsql\n-- get the number of 1 bits in the binary representation of the float `double1`\nbitCount(double1)\n-- get the number of 1 bits in the binary representation of `double1` as an integer\nbitCount(toUInt32(double1))\n-- select rows where at least 5 bits are 1\nSELECT * WHERE bitCount(double1) > 5\nsql\nbitHammingDistance(x, y)\nsql\n-- returns zero\nbitHammingDistance(1, 1)\n-- returns 2\nbitHammingDistance(3, 0)\nsql\nbitNot(a)\nsql\nbitNot(1)\nsql\nbitOr(a, b)\nsql\n-- returns 3\nbitOr(1, 2)\nsql\nbitRotateLeft(a, n)\nsql\n-- returns 2\nbitRotateLeft(1, 1)\n-- returns 1\nbitRotateLeft(128, 1)\nsql\nbitRotateRight(a, n)\nsql\n-- returns 128\nbitRotateRight(1, 1)\n-- returns 3\nbitRotateRight(12, 2)\nsql\nbitShiftLeft(a, n)\nsql\n-- returns 2\nbitShiftLeft(1, 1)\n-- returns 0\nbitShiftLeft(128, 1)\nsql\nbitShiftRight(a, n)\nsql\n-- returns 0\nbitShiftRight(1, 1)\n-- returns 3\nbitShiftRight(12, 2)\nsql\nbitTest(a, n)\nsql\n-- returns 1\nbitTest(3, 1)\n-- return 0\nbitTest(2, 1)\n-- select rows where a particular bit is 1\nSELECT * WHERE bitTest(double1, 2)\nsql\nbitXor(a, b)\nsql\n-- returns 3\nbitXor(1, 2)\n-- returns 0\nbitXor(3, 3)\nsql\nif(<condition>, <true_expression>, <false_expression>)\nsql\nif(temp > 20, 'It is warm', 'Bring a jumper')\nsql\nformatDateTime(<datetime expression>, <format string>[, <timezone string>])\nsql\n-- prints the current YYYY-MM-DD in UTC\nformatDateTime(now(), '%Y-%m-%d')\n\n-- prints YYYY-MM-DD in the datetime's timezone\nformatDateTime(<a datetime with a timezone>, '%Y-%m-%d')\nformatDateTime(toDateTime('2022-12-01 16:17:00', 'America/New_York'), '%Y-%m-%d')\n\n-- prints YYYY-MM-DD in UTC\nformatDateTime(<a datetime with a timezone>, '%Y-%m-%d', 'Etc/UTC')\nformatDateTime(toDateTime('2022-12-01 16:17:00', 'America/New_York'), '%Y-%m-%d', 'Etc/UTC')\nsql\nnow()\nsql\nnow()\nsql\ntoDateTime(<expression>[, 'timezone string'])\nsql\n-- double1 contains a unix timestamp in seconds\ntoDateTime(double1)\n\n-- blob1 contains an datetime in the format 'YYYY-MM-DD hh:mm:ss'\ntoDateTime(blob1)\n\n-- literal values:\ntoDateTime(355924804) -- unix timestamp\ntoDateTime('355924804') -- string containing unix timestamp\ntoDateTime('1981-04-12 12:00:04') -- string with datetime in 'YYYY-MM-DD hh:mm:ss' format\n\n-- interpret a date relative to New York time\ntoDateTime('2022-12-01 16:17:00', 'America/New_York')\nsql\ntoYear(<datetime>)\nsql\n-- returns the number 2025\ntoYear(toDateTime('2025-10-27 00:00:00'))\nsql\ntoMonth(<datetime>)\nsql\n-- returns the number 10\ntoMonth(toDateTime('2025-10-27 00:00:00'))\nsql\ntoDayOfWeek(<datetime>)\nsql\n-- returns the number 1 for Monday 27th October 2025\ntoDayOfWeek(toDateTime('2025-10-27 00:00:00'))\n\n-- returns the number 2 for Tuesday 28th October 2025\ntoDayOfWeek(toDateTime('2025-10-28 00:00:00'))\n\n-- returns the number 7 for Sunday 2nd November 2025\ntoDayOfWeek(toDateTime('2025-11-02 00:00:00'))\nsql\ntoDayOfMonth(<datetime>)\nsql\n-- returns the number 27\ntoDayOfMonth(toDateTime('2025-10-27 00:00:00'))\nsql\ntoHour(<datetime>)\nsql\n-- returns the number 9\ntoHour(toDateTime('2025-10-27 09:11:13'))\nsql\ntoMinute(<datetime>)\nsql\n-- returns the number 11\ntoMinute(toDateTime('2025-10-27 09:11:13'))\nsql\ntoSecond(<datetime>)\nsql\n-- returns the number 13\ntoSecond(toDateTime('2025-10-27 09:11:13'))\nsql\ntoUnixTimestamp(<datetime>)\nsql\n-- get the current unix timestamp\ntoUnixTimestamp(now())\nsql\ntoStartOfInterval(<datetime>, INTERVAL '<n>' <unit>[, <timezone string>])\nsql\n-- round the current time down to the nearest 15 minutes\ntoStartOfInterval(now(), INTERVAL '15' MINUTE)\n\n-- round a timestamp down to the day\ntoStartOfInterval(timestamp, INTERVAL '1' DAY)\n\n-- count the number of datapoints filed in each hourly window\nSELECT\n  toStartOfInterval(timestamp, INTERVAL '1' HOUR) AS hour,\n  sum(_sample_interval) AS count\nFROM your_dataset\nGROUP BY hour\nORDER BY hour ASC\nsql\ntoStartOfYear(<datetime>)\nsql\n-- round a timestamp down to 2025-01-01 00:00:00\ntoStartOfYear(toDateTime('2025-10-27 00:00:00'))\nsql\ntoStartOfMonth(<datetime>)\nsql\n-- round a timestamp down to 2025-10-01 00:00:00\ntoStartOfMonth(toDateTime('2025-10-27 00:00:00'))\nsql\ntoStartOfWeek(<datetime>)\nsql\n-- round a time on a Monday down to Monday 2025-10-27 00:00:00\ntoStartOfWeek(toDateTime('2025-10-27 00:00:00'))\n\n-- round a time on a Wednesday down to Monday 2025-10-27 00:00:00\ntoStartOfWeek(toDateTime('2025-10-29 00:00:00'))\nsql\ntoStartOfDay(<datetime>)\nsql\n-- round a timestamp down to 2025-10-27 00:00:00\ntoStartOfDay(toDateTime('2025-10-27 00:00:00'))\nsql\ntoStartOfHour(<datetime>)\nsql\n-- round a timestamp down to 2025-10-27 16:00:00\ntoStartOfHour(toDateTime('2025-10-27 16:55:25'))\nsql\ntoStartOfFifteenMinutes(<datetime>)\nsql\n-- round a timestamp down to 2025-10-27 16:45:00\ntoStartOfFifteenMinutes(toDateTime('2025-10-27 16:55:25'))\nsql\ntoStartOfTenMinutes(<datetime>)\nsql\n-- round a timestamp down to 2025-10-27 16:50:00\ntoStartOfTenMinutes(toDateTime('2025-10-27 16:55:25'))\nsql\ntoStartOfFiveMinutes(<datetime>)\nsql\n-- round a timestamp down to 2025-10-27 16:55:00\ntoStartOfFiveMinutes(toDateTime('2025-10-27 16:55:25'))\nsql\ntoStartOfMinute(<datetime>)\nsql\n-- round a timestamp down to 2025-10-27 16:55:00\ntoStartOfMinute(toDateTime('2025-10-27 16:55:25'))\nsql\ntoYYYYMM(<datetime>)\nsql\n-- returns the number 202510\ntoYYYYMM(toDateTime('2025-10-27 16:55:25'))\nsql\nbin(<expression>)\nsql\n-- get the binary representation of 1\nbin(1)\n-- get the binary representation of a string`\nbin('abc')\nsql\nhex(<expression>)\nsql\n-- get the hexadecimal representation of 1\nhex(1)\n-- get the hexadecimal representation of a string`\nhex('abc')\nsql\nintDiv(a, b)\nsql\nlog(<expression>)\nsql\n-- get the natural logarithm of the double1 column\nlog(double1)\nsql\npow(<expression>, <expression>)\nsql\n-- get the square of the double1 column\npow(double1, 2)\nsql\nround(<expression>[, n])\nsql\n-- round 5.5 to 6\nround(5.5)\n-- round 3.14 to 3.1\nround(3.14, 1)\nsql\nfloor(<expression>[, n])\nsql\n-- round down 5.5 to 5\nfloor(5.5)\n-- round down 3.14 to 3.1\nfloor(3.14, 1)\nsql\nceil(<expression>[, n])\nsql\n-- round up 5.5 to 6\nceil(5.5)\n-- round up 3.14 to 3.2\nceil(3.14, 1)\nsql\nSHOW TABLES\n[FORMAT <format>]\nsql\nSHOW TIMEZONES\n[FORMAT <format>]\nsql\nSHOW TIMEZONE\n[FORMAT <format>]\nsql\nSELECT <expression_list>\n[FROM <table>|(<subquery>)]\n[WHERE <expression>]\n[GROUP BY <expression>, ...]\n[ORDER BY <expression_list>]\n[LIMIT <n>|ALL]\n[FORMAT <format>]\nsql\nSELECT <expression> [AS <alias>], ...\nsql\n-- return the named columns\nSELECT blob2, double3\n\n-- return all columns\nSELECT *\n\n-- alias columns to more descriptive names\nSELECT\n    blob2 AS probe_name,\n    double3 AS temperature\nsql\nSELECT\n    blob2 AS probe_name,\n    double3 AS temp_c,\n    double3*1.8+32 AS temp_f -- compute a value\n\nSELECT\n    blob2 AS probe_name,\n    if(double3 <= 0, 'FREEZING', 'NOT FREEZING') AS description -- use of functions\n\nSELECT\n    blob2 AS probe_name,\n    avg(double3) AS avg_temp -- aggregation function\nsql\nFROM <table_name>|(subquery)\nsql\n-- query data written to a workers dataset called \"temperatures\"\nFROM temperatures\n\n-- use a subquery to manipulate the table\nFROM (\n    SELECT\n        blob1 AS probe_name,\n        count() as num_readings\n    FROM\n        temperatures\n    GROUP BY\n        probe_name\n)\nsql\nWHERE <condition>\nsql\n-- simple comparisons\nWHERE blob1 = 'test'\nWHERE double1 = 4\n\n-- inequalities\nWHERE double1 > 4\n\n-- use of operators (see below for supported operator list)\nWHERE double1 + double2 > 4\nWHERE blob1 = 'test1' OR blob2 = 'test2'\n\n-- expression using inequalities, functions and operators\nWHERE if(unit = 'f', (temp-32)/1.8, temp) <= 0\nsql\nGROUP BY <expression>, ...\nsql\n-- return the average temperature for each probe\nSELECT\n    blob1 AS probe_name,\n    avg(double1) AS average_temp\nFROM temperature_readings\nGROUP BY probe_name\nsql\nORDER BY <expression> [ASC|DESC], ...\nsql\n-- order by double2 then double3, both in ascending order\nORDER BY double2, double3\n\n-- order by double2 in ascending order then double3 is descending order\nORDER BY double2, double3 DESC\nsql\nLIMIT <n>|ALL\nsql\nLIMIT 10 -- return at most 10 rows\nsql\nOFFSET <n>\nsql\nOFFSET 10 -- skip the first 10 result rows\nsql\nFORMAT [JSON|JSONEachRow|TabSeparated]\nsql\nFORMAT JSONEachRow\njson\n{\n    \"meta\": [\n        {\n            \"name\": \"<column 1 name>\",\n            \"type\": \"<column 1 type>\"\n        },\n        {\n            \"name\": \"<column 2 name>\",\n            \"type\": \"<column 2 type>\"\n        },\n        ...\n    ],\n    \"data\": [\n        {\n            \"<column 1 name>\": \"<column 1 value>\",\n            \"<column 2 name>\": \"<column 2 value>\",\n            ...\n        },\n        {\n            \"<column 1 name>\": \"<column 1 value>\",\n            \"<column 2 name>\": \"<column 2 value>\",\n            ...\n        },\n        ...\n    ],\n    \"rows\": 10\n}\njson\n{\"<column 1 name>\": \"<column 1 value>\", \"<column 2 name>\": \"<column 2 value>\"}\n{\"<column 1 name>\": \"<column 1 value>\", \"<column 2 name>\": \"<column 2 value>\"}\n...\ntxt\ncolumn 1 value  column 2 value\ncolumn 1 value  column 2 value\n...\nsql\nlength({string})\nsql\nSELECT length('a string') AS s;\nSELECT length(blob1) AS s FROM your_dataset;\nsql\nempty({string})\nsql\nSELECT empty('a string') AS b;\nSELECT empty(blob1) AS b FROM your_dataset;\nsql\nlower({string})\nsql\nSELECT lower('STRING TO DOWNCASE') AS s;\nSELECT lower(blob1) AS s FROM your_dataset;\nsql\nlowerUTF8({string})\nsql\nSELECT lowerUTF8('STRING TO DOWNCASE') AS s;\nSELECT lowerUTF8(blob1) AS s FROM your_dataset;\nsql\nupper({string})\nsql\nSELECT upper('string to uppercase') AS s;\nSELECT upper(blob1) AS s FROM your_dataset;\nsql\nupperUTF8({string})\nsql\nSELECT upperUTF8('string to uppercase') AS s;\nSELECT upperUTF8(blob1) AS s FROM your_dataset;\nsql\nstartsWith({string}, {string})\nsql\nSELECT startsWith('prefix ...', 'prefix') AS b;\nSELECT startsWith(blob1, 'prefix') AS b FROM your_dataset;\nsql\nendsWith({string}, {string})\nsql\nSELECT endsWith('prefix suffix', 'suffix') AS b;\nSELECT endsWith(blob1, 'suffix') AS b FROM your_dataset;\nsql\nposition({needle:string} IN {haystack:string})\nsql\nSELECT position(':' IN 'hello: world') AS p;\nSELECT position(':' IN blob1) AS p FROM your_dataset;\nsql\nsubstring({string}, {offset:integer}[. {length:integer}])\nsql\nSELECT substring('hello world', 6) AS s;\nSELECT substring('hello: world', 1, position(':' IN 'hello: world')-1) AS s;\nsql\nformat({string}[, ...])\nsql\nSELECT format('blob1: {}', blob1) AS s FROM dataset;\nsql\nextract(<time unit> from <datetime>)\nsql\n-- extract the number of seconds from a timestamp (returns 15 in this example)\nextract(SECOND from toDateTime('2022-06-06 11:30:15'))\nsql\ntoUInt8(<expression>)\nsql\ntoUInt32(<expression>)\ngraphql\nquery SingleDatasetWithConfidence($zoneTag: string, $start: Time, $end: Time) {\n  viewer {\n    zones(filter: {zoneTag: $zoneTag}) {\n      firewallEventsAdaptiveGroups(\n        filter: {datetime_gt: $start, datetime_lt: $end}\n        limit: 1000\n      ) {\n        count\n        avg {\n          sampleInterval\n        }\n        confidence(level: 0.95) {\n          count {\n            estimate\n            lower\n            upper\n            sampleSize\n          }\n        }\n      }\n    }\n  }\n}\njson\n{\n  \"data\": {\n    \"viewer\": {\n      \"zones\": [\n        {\n          \"firewallEventsAdaptiveGroups\": [\n            {\n              \"avg\": {\n                \"sampleInterval\": 1.0720277625205972\n              },\n              \"confidence\": {\n                \"count\": {\n                  \"estimate\": 42939,\n                  \"lower\": 42673.44115335711,\n                  \"sampleSize\": 40054,\n                  \"upper\": 43204.55884664289\n                }\n              },\n              \"count\": 42939\n            }\n          ]\n        }\n      ]\n    }\n  },\n  \"errors\": null\n}\ngraphql\ntype WhateverGroup {\n    count # No subfields, it is just the group size. Not available for roll-up tables.\n    sum {\n        # fields that support summing (numbers, maps of numbers)\n    }\n    avg {\n        # fields that support averaging (numbers)\n    }\n    uniq {\n        # fields that support uniqueing (numbers, strings, enums, IPs, dates, etc.)\n    }\n}\ngraphql\n{\n  # Get number of bytes and unique IPs in each minute.\n  httpRequests1mGroups {\n    sum {\n      bytes\n    }\n    uniq {\n      uniques # unique IPs\n    }\n    dimensions {\n      datetimeMinute\n    }\n  }\n\n# Count the number of events in each hour.\n  firewallEventsAdaptiveGroups {\n    count\n    dimensions {\n      datetimeHour\n    }\n  }\n}\ngraphql\ntype ContentTypeMapElem {\n    edgeResponseContentType: UInt32!\n    requests: UInt64!\n    bytes: UInt64!\n}",
  "code_samples": [
    {
      "code": "### `send_event`\n\nSend an event to a workflow instance.\n\n* `send_event(options)`\\* `type` - the type of event to send to the workflow instance. \\* `payload` - the payload to send to the workflow instance.",
      "language": "unknown"
    },
    {
      "code": "Note\n\nValues passed to `send_event` require explicit type translation into JS objects.\n\n## REST API (HTTP)\n\nRefer to the [Workflows REST API documentation](https://developers.cloudflare.com/api/resources/workflows/subresources/instances/methods/create/).\n\n## Command line (CLI)\n\nRefer to the [CLI quick start](https://developers.cloudflare.com/workflows/get-started/cli-quick-start/) to learn more about how to manage and trigger Workflows via the command-line.\n\n</page>\n\n<page>\n---\ntitle: DAG Workflows · Cloudflare Workflows docs\ndescription: The Python Workflows SDK supports DAG workflows in a declarative\n  way, using the step.do decorator with the depends parameter to define\n  dependencies (other steps that must complete before this step can run).\nlastUpdated: 2025-11-24T16:55:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/python/dag/\n  md: https://developers.cloudflare.com/workflows/python/dag/index.md\n---\n\nThe Python Workflows SDK supports DAG workflows in a declarative way, using the `step.do` decorator with the `depends` parameter to define dependencies (other steps that must complete before this step can run).",
      "language": "unknown"
    },
    {
      "code": "On this example, `step_a` and `step_b` are run concurrently before execution of `my_final_step`, which depends on both of them.\n\nHaving `concurrent=True` allows the dependencies to be resolved concurrently. If one of the callables passed to `depends` has already completed, it will be skipped and its return value will be reused.\n\nThis pattern is useful for diamond shaped workflows, where a step depends on two or more other steps that can run concurrently.\n\n</page>\n\n<page>\n---\ntitle: Python Workers API · Cloudflare Workflows docs\ndescription: This guide covers the Python Workflows SDK, with instructions on\n  how to build and create workflows using Python.\nlastUpdated: 2025-11-24T13:34:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/python/python-workers-api/\n  md: https://developers.cloudflare.com/workflows/python/python-workers-api/index.md\n---\n\nThis guide covers the Python Workflows SDK, with instructions on how to build and create workflows using Python.\n\n## WorkflowEntrypoint\n\nThe `WorkflowEntrypoint` is the main entrypoint for a Python workflow. It extends the `WorkflowEntrypoint` class, and implements the `run` method.",
      "language": "unknown"
    },
    {
      "code": "## WorkflowStep\n\n* `step.do(name, depends=[], concurrent=False, config=None)` is a decorator that allows you to define a step in a workflow.\n\n  * `name` - the name of the step.\n  * `depends` - an optional list of steps that must complete before this step can run. See [DAG Workflows](https://developers.cloudflare.com/workflows/python/dag).\n  * `concurrent` - an optional boolean that indicates whether this step can run concurrently with other steps.\n  * `config` - an optional [`WorkflowStepConfig`](https://developers.cloudflare.com/workflows/build/workers-api/#workflowstepconfig) for configuring [step specific retry behaviour](https://developers.cloudflare.com/workflows/build/sleeping-and-retrying/). This is passed as a Python dictionary and then type translated into a `WorkflowStepConfig` object.",
      "language": "unknown"
    },
    {
      "code": "Note that the decorator doesn't make the call to the step, it just returns a callable that can be used to invoke the step. You have to call the callable to make the step run.\n\nWhen returning state from a step, you must make sure that the returned value is serializable. Since steps run through an FFI layer, the returned value gets type translated via [FFI.](https://pyodide.org/en/stable/usage/api/python-api/ffi.html#pyodide.ffi.to_js) Refer to [Pyodide's documentation](https://pyodide.org/en/stable/usage/type-conversions.html#type-translations-pyproxy-to-js) regarding type conversions for more information.\n\n* `step.sleep(name, duration)`\n\n  * `name` - the name of the step.\n  * `duration` - the duration to sleep until, in either seconds or as a `WorkflowDuration` compatible string.",
      "language": "unknown"
    },
    {
      "code": "* `step.sleep_until(name, timestamp)`\n\n  * `name` - the name of the step.\n  * `timestamp` - a `datetime.datetime` object or seconds from the Unix epoch to sleep the workflow instance until.",
      "language": "unknown"
    },
    {
      "code": "* `step.wait_for_event(name, event_type, timeout=\"24 hours\")`\n\n  * `name` - the name of the step.\n  * `event_type` - the type of event to wait for.\n  * `timeout` - the timeout for the `wait_for_event` call. The default timeout is 24 hours.",
      "language": "unknown"
    },
    {
      "code": "### `event` parameter\n\nThe `event` parameter is a dictionary that contains the payload passed to the workflow instance, along with other metadata:\n\n* `payload` - the payload passed to the workflow instance.\n* `timestamp` - the timestamp that the workflow was triggered.\n* `instanceId` - the ID of the current workflow instance.\n* `workflowName` - the name of the workflow.\n\n## Error Handling\n\nWorkflows semantics allow users to catch exceptions that get thrown to the top level.\n\nCatching specific exceptions within an `except` block may not work, as some Python errors will not be re-instantiated into the same type of error when they are passed through the RPC layer.\n\nNote\n\nSome built-in Python errors (e.g.: `ValueError`, `TypeError`) will work correctly. User defined exceptions, as well as other built-in Python errors will not and should be caught with the `Exception` class.",
      "language": "unknown"
    },
    {
      "code": "### NonRetryableError\n\nThe Python Workflows SDK provides a `NonRetryableError` class that can be used to signal that a step should not be retried.",
      "language": "unknown"
    },
    {
      "code": "## Configure a workflow instance\n\nYou can bind a step to a specific retry policy by passing a `WorkflowStepConfig` object to the `config` parameter of the `step.do` decorator. With Python Workflows, you need to make sure that your `dict` respects the [`WorkflowStepConfig`](https://developers.cloudflare.com/workflows/build/workers-api/#workflowstepconfig) type.",
      "language": "unknown"
    },
    {
      "code": "### Create an instance via binding\n\nNote that `env` is a JavaScript object exposed to the Python script via [JsProxy](https://pyodide.org/en/stable/usage/api/python-api/ffi.html#pyodide.ffi.JsProxy). You can access the binding like you would on a JavaScript worker. Refer to the [Workflow binding documentation](https://developers.cloudflare.com/workflows/build/workers-api/#workflow) to learn more about the methods available.\n\nLet's consider the previous binding called `MY_WORKFLOW`. Here's how you would create a new instance:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Changelog · Cloudflare Workflows docs\ndescription: Subscribe to RSS\nlastUpdated: 2025-02-13T19:35:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/reference/changelog/\n  md: https://developers.cloudflare.com/workflows/reference/changelog/index.md\n---\n\n[Subscribe to RSS](https://developers.cloudflare.com/workflows/reference/changelog/index.xml)\n\n## 2025-09-12\n\n**Test Workflows locally**\n\nWorkflows can now be tested with new test APIs available in the \"cloudflare:test\" module.\n\nMore information available in the Vitest integration [docs](https://developers.cloudflare.com/workers/testing/vitest-integration/test-apis/#workflows).\n\n## 2025-08-22\n\n**Python Workflows is now open beta**\n\n[Python Workflows](https://developers.cloudflare.com/workflows/python/) is now in open beta, and available to any developer a free or paid Workers plan.\n\nMore information available in the [changelog](https://developers.cloudflare.com/changelog/2025-08-22-workflows-python-beta/).\n\n## 2025-05-07\n\n**Search for specific Workflows**\n\nWith this release, you can search Workflows by name via API.\n\n## 2025-04-29\n\n**Workflow deletion and more**\n\nWorkflows can now be deleted (from the Dashboard/UI or via API), and the maximum length limit for event types and instance IDs was increased to 100 characters.\n\nAlso, this release fixes a bug where a delay of `0` in step config retries would fail.\n\n## 2025-04-07\n\n**Workflows is now Generally Available**\n\nWorkflows is now Generally Available (or \"GA\").\n\nThis release includes the following new features:\n\n* A new `waitForEvent` API that allows a Workflow to wait for an event to occur before continuing execution.\n* Increased concurrency: you can run up to 4,500 Workflow instances concurrently — and this will continue to grow.\n* Improved observability, including new CPU time metrics that allow you to better understand which Workflow instances are consuming the most resources and/or contributing to your bill.\n* Support for vitest for testing Workflows locally and in CI/CD pipelines.\n\nMore information available in the [changelog](https://developers.cloudflare.com/changelog/2025-04-07-workflows-ga/).\n\n## 2025-02-25\n\n**Concurrent Workflow instances limits increased**\n\nWorkflows now supports up to 4,500 concurrent (running) instances, up from the previous limit of 100.\n\nMore information available in the [changelog](https://developers.cloudflare.com/changelog/2025-02-25-workflows-concurrency-increased/).\n\n## 2025-02-11\n\n**Behavior improvements**\n\nImproved Workflows execution that prevents Workflows instances from getting stuck, and allows stuck instances to become unstuck.\n\nAlso, improved the reliability of Workflows step retry counts, and improved Instance ID validation.\n\n## 2025-01-23\n\n**Major bugfixes and improvements**\n\nWith this release, some bug were fixed:\n\n* `event.timestamp` is now `Date`, fixing a regression.\n* Fixed issue where instances without metadata were not terminated as expected.\n\nAlso, this release makes Workflows execution more reliable for accounts with high loads.\n\n## 2025-01-09\n\n**Improved Wrangler local dev experience for steps' output, matching production**\n\nPreviously, in local dev, the output field would return the list of successful steps outputs in the workflow. This is not expected behavior compared to production workflows (where the output is the actual return of the run function).\n\nThis release aligns the local dev output field behavior with the production behavior.\n\n## 2024-12-19\n\n**Better instance control, improved queued logic, and step limit increased**\n\nWorkflows can now be terminated and pause instances from a queued state and the ID of an instance is now exposed via the `WorkflowEvent` parameter.\n\nAlso, the mechanism to queue instances was improved to force miss-behaved queued instances to be automatically errored.\n\nWorkflows now allow you to define up to 1024 steps in a single Workflow definition, up from the previous limit of 512. This limit will continue to increase during the course of the open beta.\n\n## 2024-12-09\n\n**New queue instances logic**\n\nIntroduction of a new mechanism to queue instances, which will prevent instances from getting stuck on queued status forever.\n\n## 2024-11-30\n\n**Step limit increased**\n\nWorkflows now allow you to define up to 512 steps in a single Workflow definition, up from the previous limit of 256. This limit will continue to increase during the course of the open beta.\n\nIf you have Workflows that need more steps, we recommend delegating additional work to other Workflows by [triggering a new Workflow](https://developers.cloudflare.com/workflows/build/trigger-workflows/) from within a step and passing any state as [parameters to that Workflow instance](https://developers.cloudflare.com/workflows/build/events-and-parameters/).\n\n## 2024-11-21\n\n**Fixed create instance API in Workers bindings**\n\nYou can now call `create()` without any arguments when using the [Workers API](https://developers.cloudflare.com/workflows/build/workers-api/#create) for Workflows. Workflows will automatically generate the ID of the Workflow on your behalf.\n\nThis addresses a bug that caused calls to `create()` to fail when provided with no arguments.\n\n## 2024-11-20\n\n**Multiple Workflows in local development now supported**\n\nLocal development with `wrangler dev` now correctly supports multiple Workflow definitions per script.\n\nThere is no change to production Workflows, where multiple Workflow definitions per Worker script was already supported.\n\n## 2024-10-23\n\n**Workflows is now in public beta!**\n\nWorkflows, a new product for building reliable, multi-step workflows using Cloudflare Workers, is now in public beta. The public beta is available to any user with a [free or paid Workers plan](https://developers.cloudflare.com/workers/platform/pricing/).\n\nA Workflow allows you to define multiple, independent steps that encapsulate errors, automatically retry, persist state, and can run for seconds, minutes, hours or even days. A Workflow can be useful for post-processing data from R2 buckets before querying it, automating a Workers AI RAG pipeline, or managing user signup flows and lifecycle emails.\n\nYou can learn more about Workflows in [our announcement blog](https://blog.cloudflare.com/building-workflows-durable-execution-on-workers/), or start building in our [get started guide](https://developers.cloudflare.com/workflows/get-started/guide/).\n\n</page>\n\n<page>\n---\ntitle: Event subscriptions · Cloudflare Workflows docs\ndescription: Event subscriptions allow you to receive messages when events occur\n  across your Cloudflare account. Cloudflare products (e.g., KV, Workers AI,\n  Workers) can publish structured events to a queue, which you can then consume\n  with Workers or HTTP pull consumers to build custom workflows, integrations,\n  or logic.\nlastUpdated: 2025-11-06T01:33:23.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/reference/event-subscriptions/\n  md: https://developers.cloudflare.com/workflows/reference/event-subscriptions/index.md\n---\n\n[Event subscriptions](https://developers.cloudflare.com/queues/event-subscriptions/) allow you to receive messages when events occur across your Cloudflare account. Cloudflare products (e.g., [KV](https://developers.cloudflare.com/kv/), [Workers AI](https://developers.cloudflare.com/workers-ai/), [Workers](https://developers.cloudflare.com/workers/)) can publish structured events to a [queue](https://developers.cloudflare.com/queues/), which you can then consume with Workers or [HTTP pull consumers](https://developers.cloudflare.com/queues/configuration/pull-consumers/) to build custom workflows, integrations, or logic.\n\nFor more information on [Event Subscriptions](https://developers.cloudflare.com/queues/event-subscriptions/), refer to the [management guide](https://developers.cloudflare.com/queues/event-subscriptions/manage-event-subscriptions/).\n\n## Available Workflows events\n\n#### `instance.queued`\n\nTriggered when an instance was created and is awaiting execution.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `instance.started`\n\nTriggered when an instance starts or resumes execution.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `instance.paused`\n\nTriggered when an instance pauses execution.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `instance.errored`\n\nTriggered when an instance step throws an error.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `instance.terminated`\n\nTriggered when an instance is manually terminated.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `instance.completed`\n\nTriggered when an instance finishes execution successfully.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Glossary · Cloudflare Workflows docs\ndescription: Review the definitions for terms used across Cloudflare's Workflows\n  documentation.\nlastUpdated: 2024-10-24T11:52:00.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/reference/glossary/\n  md: https://developers.cloudflare.com/workflows/reference/glossary/index.md\n---\n\nReview the definitions for terms used across Cloudflare's Workflows documentation.\n\n| Term | Definition |\n| - | - |\n| Durable Execution | \"Durable Execution\" is a programming model that allows applications to execute reliably, automatically persist state, retry, and be resistant to errors caused by API, network or even machine/infrastructure failures. Cloudflare Workflows provide a way to build and deploy applications that align with this model. |\n| Event | The event that triggered the Workflow instance. A `WorkflowEvent` may contain optional parameters (data) that a Workflow can operate on. |\n| instance | A specific instance (running, paused, errored) of a Workflow. A Workflow can have a potentially infinite number of instances. |\n| step | A step is self-contained, individually retriable component of a Workflow. Steps may emit (optional) state that allows a Workflow to persist and continue from that step, even if a Workflow fails due to a network or infrastructure issue. A Workflow can have one or more steps up to the [step limit](https://developers.cloudflare.com/workflows/reference/limits/). |\n| Workflow | The named Workflow definition, associated with a single Workers script. |\n\n</page>\n\n<page>\n---\ntitle: Limits · Cloudflare Workflows docs\ndescription: Limits that apply to authoring, deploying, and running Workflows\n  are detailed below.\nlastUpdated: 2025-12-12T19:04:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/reference/limits/\n  md: https://developers.cloudflare.com/workflows/reference/limits/index.md\n---\n\nLimits that apply to authoring, deploying, and running Workflows are detailed below.\n\nMany limits are inherited from those applied to Workers scripts and as documented in the [Workers limits](https://developers.cloudflare.com/workers/platform/limits/) documentation.\n\n| Feature | Workers Free | Workers Paid |\n| - | - | - |\n| Workflow class definitions per script | 3MB max script size per [Worker size limits](https://developers.cloudflare.com/workers/platform/limits/#account-plan-limits) | 10MB max script size per [Worker size limits](https://developers.cloudflare.com/workers/platform/limits/#account-plan-limits) |\n| Total scripts per account | 100 | 500 (shared with [Worker script limits](https://developers.cloudflare.com/workers/platform/limits/#account-plan-limits) |\n| Compute time per step [1](#user-content-fn-3) | 10 ms | 30 seconds (default) / configurable to 5 minutes of [active CPU time](https://developers.cloudflare.com/workers/platform/limits/#cpu-time) |\n| Duration (wall clock) per step [1](#user-content-fn-3) | Unlimited | Unlimited - for example, waiting on network I/O calls or querying a database |\n| Maximum persisted state per step | 1MiB (2^20 bytes) | 1MiB (2^20 bytes) |\n| Maximum event [payload size](https://developers.cloudflare.com/workflows/build/events-and-parameters/) | 1MiB (2^20 bytes) | 1MiB (2^20 bytes) |\n| Maximum state that can be persisted per Workflow instance | 100MB | 1GB |\n| Maximum `step.sleep` duration | 365 days (1 year) | 365 days (1 year) |\n| Maximum steps per Workflow [2](#user-content-fn-5) | 1024 | 1024 |\n| Maximum Workflow executions | 100,000 per day [shared with Workers daily limit](https://developers.cloudflare.com/workers/platform/limits/#worker-limits) | Unlimited |\n| Concurrent Workflow instances (executions) per account [3](#user-content-fn-7) | 25 | 10,000 |\n| Maximum Workflow instance creation rate [4](#user-content-fn-8) | 100 per second [5](#user-content-fn-6) | 100 per second [5](#user-content-fn-6) |\n| Maximum number of [queued instances](https://developers.cloudflare.com/workflows/observability/metrics-analytics/#event-types) | 100,000 | 1,000,000 |\n| Retention limit for completed Workflow instance state | 3 days | 30 days [6](#user-content-fn-2) |\n| Maximum length of a Workflow name [7](#user-content-fn-4) | 64 characters | 64 characters |\n| Maximum length of a Workflow instance ID [7](#user-content-fn-4) | 100 characters | 100 characters |\n| Maximum number of subrequests per Workflow instance | 50/request | 1000/request |\n\nNeed a higher limit?\n\nTo request an adjustment to a limit, complete the [Limit Increase Request Form](https://forms.gle/ukpeZVLWLnKeixDu7). If the limit can be increased, Cloudflare will contact you with next steps.\n\n### `waiting` instances do not count towards instance concurrency limits\n\nInstances that are in a `waiting` state — either sleeping via `step.sleep`, waiting for a retry, or waiting for an event via `step.waitForEvent` — do **not** count towards concurrency limits. This means you can have millions of Workflow instances sleeping or waiting for events simultaneously, as only actively `running` instances count toward the 10,000 concurrent instance limit. However, if there are 10,000 concurrent instances actively running, an instance that has been in a `waiting` state will be queued instead of resuming immediately. When an instance transitions from `running` to `waiting`, other `queued` instances will be scheduled (usually the oldest queued instance, on a best-effort basis). This state transition may not occur if the wait duration is very short.\n\nFor example, consider a Workflow that does some work, waits for 30 days, and then continues with more work:",
      "language": "unknown"
    },
    {
      "code": "While a given Workflow instance is waiting for 30 days, it will transition to the `waiting` state, allowing other `queued` instances to run if concurrency limits are reached.\n\n### Increasing Workflow CPU limits\n\nWorkflows are Worker scripts, and share the same [per invocation CPU limits](https://developers.cloudflare.com/workers/platform/limits/#worker-limits) as any Workers do. Note that CPU time is active processing time: not time spent waiting on network requests, storage calls, or other general I/O, which don't count towards your CPU time or Workflows compute consumption.\n\nBy default, the maximum CPU time per Workflow invocation is set to 30 seconds, but can be increased for all invocations associated with a Workflow definition by setting `limits.cpu_ms` in your Wrangler configuration:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "To learn more about CPU time and limits, [review the Workers documentation](https://developers.cloudflare.com/workers/platform/limits/#cpu-time).\n\n## Footnotes\n\n1. A Workflow instance can run forever, as long as each step does not take more than the CPU time limit and the maximum number of steps per Workflow is not reached. [↩](#user-content-fnref-3) [↩2](#user-content-fnref-3-2)\n\n2. `step.sleep` do not count towards the max. steps limit [↩](#user-content-fnref-5)\n\n3. Only instances with a `running` state count towards the concurrency limits. Instances in the `waiting` state are excluded from these limits. [↩](#user-content-fnref-7)\n\n4. Each instance created or restarted counts towards this limit [↩](#user-content-fnref-8)\n\n5. Workflows will return a HTTP 429 rate limited error if you exceed the rate of new Workflow instance creation. [↩](#user-content-fnref-6) [↩2](#user-content-fnref-6-2)\n\n6. Workflow instance state and logs will be retained for 3 days on the Workers Free plan and for 30 days on the Workers Paid plan. [↩](#user-content-fnref-2)\n\n7. Match pattern: \\_`^[a-zA-Z0-9_][a-zA-Z0-9-_]\\*$`\\_ [↩](#user-content-fnref-4) [↩2](#user-content-fnref-4-2)\n\n</page>\n\n<page>\n---\ntitle: Pricing · Cloudflare Workflows docs\ndescription: \"Workflows pricing is identical to Workers Standard pricing and are\n  billed on three dimensions:\"\nlastUpdated: 2025-04-08T09:39:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/reference/pricing/\n  md: https://developers.cloudflare.com/workflows/reference/pricing/index.md\n---\n\nNote\n\nWorkflows is included in both the Free and Paid [Workers plans](https://developers.cloudflare.com/workers/platform/pricing/#workers).\n\nWorkflows pricing is identical to [Workers Standard pricing](https://developers.cloudflare.com/workers/platform/pricing/#workers) and are billed on three dimensions:\n\n* **CPU time**: the total amount of compute (measured in milliseconds) consumed by a given Workflow.\n* **Requests** (invocations): the number of Workflow invocations. [Subrequests](https://developers.cloudflare.com/workers/platform/limits/#subrequests) made from a Workflow do not incur additional request costs.\n* **Storage**: the total amount of storage (measured in GB) persisted by your Workflows.\n\nA Workflow that is waiting on a response to an API call, paused as a result of calling `step.sleep`, or otherwise idle, does not incur CPU time.\n\n### Workflows Pricing\n\n| Unit | Workers Free | Workers Paid |\n| - | - | - |\n| Requests (millions) | 100,000 per day ([shared with Workers requests](https://developers.cloudflare.com/workers/platform/pricing/#workers) | 10 million included per month + $0.30 per additional million |\n| CPU time (ms) | 10 milliseconds of CPU time per invocation | 30 million CPU milliseconds included per month + $0.02 per additional million CPU milliseconds |\n| Storage (GB-mo) | 1GB | 1GB included per month + $0.20/ GB-month |\n\nCPU limits\n\nYou can increase the CPU limit available to your Workflow instances up to 5 minutes per Workflow by [setting the `limits.cpu_ms` property](https://developers.cloudflare.com/workers/wrangler/configuration/#limits) in your Wrangler configuration.\n\n### Storage Usage\n\nNote\n\nStorage billing for Workflows will go live on September 15th, 2025.\n\nStorage is billed using gigabyte-month (GB-month) as the billing metric, identical to [Durable Objects SQL storage](https://developers.cloudflare.com/durable-objects/platform/pricing/#sqlite-storage-backend). A GB-month is calculated by averaging the peak storage per day over a billing period (30 days).\n\n* Storage is calculated across all instances, and includes running, errored, sleeping and completed instances.\n* By default, instance state is retained for [3 days on the Free plan](https://developers.cloudflare.com/workflows/reference/limits/) and [7 days on the Paid plan](https://developers.cloudflare.com/workflows/reference/limits/).\n* When creating a Workflow instance, you can set a shorter state retention period if you do not need to retain state for errored or completed Workflows.\n* Deleting instances via the [Workers API](https://developers.cloudflare.com/workflows/build/workers-api/), [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/commands/#workflows), REST API, or dashboard will free up storage. Note that it may take a few minutes for storage limits to update.\n\nAn instance that attempts to store state when your have reached the storage limit on the Free plan will cause an error to be thrown.\n\n## Frequently Asked Questions\n\nFrequently asked questions related to Workflows pricing:\n\n### Are there additional costs for Workflows?\n\nNo. Workflows are priced based on the same compute (CPU time), requests (invocations) as Workers, as well as storage (state from a Workflow).\n\n### Are Workflows available on the [Workers Free](https://developers.cloudflare.com/workers/platform/pricing/#workers) plan?\n\nYes.\n\n### What is a Workflow invocation?\n\nA Workflow invocation is when you trigger a new Workflow instance: for example, via the [Workers API](https://developers.cloudflare.com/workflows/build/workers-api/), wrangler CLI, or REST API. Steps within a Workflow are not invocations.\n\n### How do Workflows show up on my bill?\n\nWorkflows are billed as Workers, and share the same CPU time and request SKUs.\n\n### Are there any limits to Workflows?\n\nRefer to the published [limits](https://developers.cloudflare.com/workflows/reference/limits/) documentation.\n\n</page>\n\n<page>\n---\ntitle: Wrangler commands · Cloudflare Workflows docs\ndescription: List Workflows associated to account\nlastUpdated: 2025-11-14T14:44:20.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workflows/reference/wrangler-commands/\n  md: https://developers.cloudflare.com/workflows/reference/wrangler-commands/index.md\n---\n\n## `workflows list`\n\nList Workflows associated to account\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `--page` number default: 1\n\n  Show a sepecific page from the listing, can configure page size using \"per-page\"\n\n- `--per-page` number\n\n  Configure the maximum number of workflows to show per page\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows describe`\n\nDescribe Workflow resource\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows delete`\n\nDelete workflow - when deleting a workflow, it will also delete it's own instances\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows trigger`\n\nTrigger a workflow, creating a new instance. Can optionally take a JSON string to pass a parameter into the workflow instance\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `[PARAMS]` string default:\n\n  Params for the workflow instance, encoded as a JSON string\n\n- `--id` string\n\n  Custom instance ID, if not provided it will default to a random UUIDv4\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows instances list`\n\nInstance related commands (list, describe, terminate, pause, resume)\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `--reverse` boolean default: false\n\n  Reverse order of the instances table\n\n- `--status` string\n\n  Filters list by instance status (can be one of: queued, running, paused, errored, terminated, complete)\n\n- `--page` number default: 1\n\n  Show a sepecific page from the listing, can configure page size using \"per-page\"\n\n- `--per-page` number\n\n  Configure the maximum number of instances to show per page\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows instances describe`\n\nDescribe a workflow instance - see its logs, retries and errors\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `[ID]` string default: latest\n\n  ID of the instance - instead of an UUID you can type 'latest' to get the latest instance and describe it\n\n- `--step-output` boolean default: true\n\n  Don't output the step output since it might clutter the terminal\n\n- `--truncate-output-limit` number default: 5000\n\n  Truncate step output after x characters\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows instances terminate`\n\nTerminate a workflow instance\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `[ID]` string required\n\n  ID of the instance - instead of an UUID you can type 'latest' to get the latest instance and describe it\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows instances restart`\n\nRestart a workflow instance\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `[ID]` string required\n\n  ID of the instance - instead of an UUID you can type 'latest' to get the latest instance and describe it\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows instances pause`\n\nPause a workflow instance\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `[ID]` string required\n\n  ID of the instance - instead of an UUID you can type 'latest' to get the latest instance and pause it\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n## `workflows instances resume`\n\nResume a workflow instance\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "- `[NAME]` string required\n\n  Name of the workflow\n\n- `[ID]` string required\n\n  ID of the instance - instead of an UUID you can type 'latest' to get the latest instance and resume it\n\nGlobal flags\n\n* `--v` boolean alias: --version\n\n  Show version number\n\n* `--cwd` string\n\n  Run as if Wrangler was started in the specified directory instead of the current working directory\n\n* `--config` string alias: --c\n\n  Path to Wrangler configuration file\n\n* `--env` string alias: --e\n\n  Environment to use for operations, and for selecting .env and .dev.vars files\n\n* `--env-file` string\n\n  Path to an .env file to load - can be specified multiple times - values from earlier files are overridden by values in later files\n\n* `--experimental-provision` boolean aliases: --x-provision default: true\n\n  Experimental: Enable automatic resource provisioning\n\n* `--experimental-auto-create` boolean alias: --x-auto-create default: true\n\n  Automatically provision draft bindings with new resources\n\n</page>\n\n<page>\n---\ntitle: Blocking Triggers · Cloudflare Zaraz docs\ndescription: Blocking Triggers are triggers that instead of being used to define\n  when to start an action, are used to define when to not start an action. You\n  may need to block one or more actions in a tool from firing when a specific\n  condition arises. For these cases, you can set Blocking Triggers.\nlastUpdated: 2024-09-24T17:04:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/blocking-triggers/\n  md: https://developers.cloudflare.com/zaraz/advanced/blocking-triggers/index.md\n---\n\nBlocking Triggers are triggers that instead of being used to define when to start an action, are used to define when to *not* start an action. You may need to block one or more actions in a tool from firing when a specific condition arises. For these cases, you can set Blocking Triggers.\n\nEvery tool action has Firing Triggers assigned to it. Blocking Triggers are optional and, if defined, will conditionally prevent the action from starting. When you add Blocking Triggers to an action, the action will not fire if any of its Blocking Triggers are true. If the tool has more than one action, other actions without these Blocking Triggers will still work.\n\nTo conditionally block all actions in a tool, you have to configure Blocking Triggers on every action that belongs to that tool. Note that when you use Blocking Triggers, Zaraz will still load on the page.\n\nTo use Blocking Triggers, start by [creating the trigger](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) with the conditions you want to use to block an event. Then:\n\n1. Go to [**Zaraz**](https://dash.cloudflare.com/?to=/:account/:zone/zaraz) > **Tools Configuration**.\n2. Under **Third-party tools**, locate the tool with the action you want to block and select **Edit**.\n3. In **Action Name**, select the action you want to block.\n4. In **Blocking Triggers**, use the dropdown menu to add a trigger to block the action.\n5. Select **Save**.\n\nNote\n\nBlocking Triggers are useful if you wish to block specific actions, or even specific tools from firing, while keeping others active. If you wish to turn off Zaraz entirely on specific pages/domains/subdomains, or load Zaraz depending on other factors such as cookies, we recommend [loading Zaraz selectively](https://developers.cloudflare.com/zaraz/advanced/load-selectively/).\n\n</page>\n\n<page>\n---\ntitle: Context Enricher · Cloudflare Zaraz docs\ndescription: The Zaraz Context Enricher is a tool to modify or enrich the\n  context that is being used across Zaraz using a Cloudflare Worker. The Context\n  Enricher allows you access to the client and system variables.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/context-enricher/\n  md: https://developers.cloudflare.com/zaraz/advanced/context-enricher/index.md\n---\n\nThe Zaraz Context Enricher is a tool to modify or enrich [the context](https://developers.cloudflare.com/zaraz/reference/context/) that is being used across Zaraz using a Cloudflare Worker. The Context Enricher allows you access to the client and system variables.\n\n## Creating a Worker\n\nTo use a Context Enricher, you first need to create a new Cloudflare Worker. You can do this through the Cloudflare dashboard or by using [Wrangler](https://developers.cloudflare.com/workers/get-started/guide/).\n\nTo create a new Worker in the Cloudflare dashboard:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select **Create application**.\n\n3. Give a name to your Worker and select **Deploy**.\n\n4. Select **Edit code**.\n\nYou have now created a basic Worker that responds with \"Hello world.\" To make this Worker functional when using it as a Context Enricher, you need to change the code to return the context back:",
      "language": "unknown"
    },
    {
      "code": "Keep reading for more complete examples of different use cases or refer to [Zaraz Context](https://developers.cloudflare.com/zaraz/reference/context/).\n\n## Configuring your Context Enricher\n\nNow that your Worker is published, you can select it in your Zaraz settings:\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Select your Context Enricher Worker.\n\n3. Save your settings.\n\nYour Context Enricher will now run on all Zaraz requests in that given zone.\n\n## Example Context Enricher\n\n### Adding arbitrary information using an API\n\nYou can use the Context Enricher to add information to your context. For example, you could use an API to get the current weather for the user's location and add it to the context.",
      "language": "unknown"
    },
    {
      "code": "Now, you can use the weather property anywhere in Zaraz by choosing the `Track Property` from the attributes input and entering `weather`.\n\n### Masking sensitive information, such as emails\n\nLet's assume we want to redact sensitive information, such as emails. For this, we're going to replace all occurrences of email addresses throughout the context. Please keep in mind that this is only an example and might not fit all edge or use cases.\n\nFor the sake of simplicity of this example, we're going to replace all strings that contain an `@` symbol:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Data layer compatibility mode · Cloudflare Zaraz docs\ndescription: Cloudflare Zaraz offers backwards compatibility with the dataLayer\n  function found in tag management software, used to track events and other\n  parameters. This way you can keep your current implementation and Cloudflare\n  Zaraz will automatically collect your events.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/datalayer-compatibility/\n  md: https://developers.cloudflare.com/zaraz/advanced/datalayer-compatibility/index.md\n---\n\nCloudflare Zaraz offers backwards compatibility with the `dataLayer` function found in tag management software, used to track events and other parameters. This way you can keep your current implementation and Cloudflare Zaraz will automatically collect your events.\n\nTo keep the Zaraz script as small and fast as possible, the data layer compatibility mode is disabled by default. To enable it:\n\n1. Go to [**Zaraz**](https://dash.cloudflare.com/?to=/:account/:zone/zaraz) > **Settings**.\n2. Enable the **Data layer compatibility mode** toggle. Refer to [Zaraz settings](https://developers.cloudflare.com/zaraz/reference/settings/) for more information.\n\n## Using the data layer with Zaraz\n\nAfter enabling the compatibility mode, Zaraz will automatically translate your `dataLayer.push()` calls to `zaraz.track()`, so you can keep using the `dataLayer.push()` function to send events from the browser to Zaraz.\n\nNote\n\nZaraz does not support automatic e-commerce mapping through the `dataLayer` compatibility mode. If you need to track e-commerce events, refer to the [E-commerce API](https://developers.cloudflare.com/zaraz/web-api/ecommerce/).\n\nEvents will only be sent to Zaraz if your pushed object includes an `event` key. The `event`key is used as the name for the Zaraz event. Other keys will become part of the `eventProperties` object. The following example shows how a purchase event will be sent using the data layer to Zaraz — note that the parameters inside the object depend on what you want to track:",
      "language": "unknown"
    },
    {
      "code": "Cloudflare Zaraz then translates the `dataLayer.push()` call to a `zaraz.track()` call. So, `dataLayer.push({event: \"purchase\", price: \"24\", \"currency\": \"USD\"})` is equivalent to `zaraz.track(\"purchase\", {\"price\": \"24\", \"currency\": \"USD\"})`.\n\nBecause Zaraz converts the `dataLayer.push()` call to `zaraz.track()`, creating a trigger based on `dataLayer.push()` calls is the same as creating triggers for `zaraz.track()`. As an example, the trigger below will match the above `dataLayer.push()` call because it matches the event with `purchase`.\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *Event Name* | *Equals* | `purchase` |\n\nWe do not recommend using `dataLayer`. However, as many websites employ it, Cloudflare Zaraz has this automatic translation layer that converts it to `zaraz.track()`.\n\n</page>\n\n<page>\n---\ntitle: Use Zaraz on domains not proxied by Cloudflare · Cloudflare Zaraz docs\ndescription: \"You can load Zaraz on domains that are not proxied through\n  Cloudflare. However, you will need to create a separate domain, or subdomain,\n  proxied by Cloudflare (also known as orange-clouded domains), and load the\n  script from it:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/domains-not-proxied/\n  md: https://developers.cloudflare.com/zaraz/advanced/domains-not-proxied/index.md\n---\n\nYou can load Zaraz on domains that are not proxied through Cloudflare. However, you will need to create a separate domain, or subdomain, proxied by Cloudflare (also [known as orange-clouded](https://community.cloudflare.com/t/step-3-enabling-the-orange-cloud/52715) domains), and load the script from it:\n\n1. Create a new subdomain like `my-subdomain.example.com` and proxy it through Cloudflare. Refer to [Enabling the Orange Cloud](https://community.cloudflare.com/t/step-3-enabling-the-orange-cloud/52715) for more information.\n2. Add the following script to your main website’s HTML, immediately before the `</head>` tag closes:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Google Consent Mode · Cloudflare Zaraz docs\ndescription: Google Consent Mode is used by Google tools to manage consent\n  regarding the usage of private data and Personally Identifiable Information\n  (PII). Zaraz provides automatic support for Consent Mode v2, as well as manual\n  support for Consent Mode v1.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/google-consent-mode/\n  md: https://developers.cloudflare.com/zaraz/advanced/google-consent-mode/index.md\n---\n\n## Background\n\n[Google Consent Mode](https://developers.google.com/tag-platform/security/concepts/consent-mode) is used by Google tools to manage consent regarding the usage of private data and Personally Identifiable Information (PII). Zaraz provides automatic support for Consent Mode v2, as well as manual support for Consent Mode v1.\n\nYou can also use Google Analytics and Google Ads without cookies by selecting **Permissions** and disabling **Access client key-value store**.\n\n***\n\n## Consent Mode v2\n\nConsent Mode v2 specifies a \"default\" consent status that is usually set when the session starts, and an \"updated\" status that is set when the visitor configures their consent preferences. Consent Mode v2 will turn on automatically when the correct event properties are available, meaning there is no need to change any settings in the respective tools or their actions.\n\n### Set the default consent status\n\nOften websites will want to set a default consent status that denies all categories. You can do that with no code at all by checking the **Set Google Consent Mode v2 state** in the Zaraz **Settings** page.\n\nIf that is not what your website needs, and instead you want to set the default consent status in a more granular way, use the reserved `google_consent_default` property:",
      "language": "unknown"
    },
    {
      "code": "After the above code is executed, the consent status will be saved to `localStorage` and will be included with every subsequent Zaraz event.\n\nNote that the code should be included as part of your website HTML code, usually inside a `<script>` element within the `<body>` element. It is **not recommended** to use the Custom HTML Zaraz tool for including it, as the consent preferences should be specified before Zaraz loads any other tool.\n\n### Update the consent status\n\nAfter the user has provided their consent preferences you can set the new status using the reserved `google_consent_update` property. If you are using the Zaraz Consent Management Platform, you can use the [Consent Choices Updated event](https://developers.cloudflare.com/zaraz/consent-management/api/#consent-choices-updated) to know when to update the Google Consent status.",
      "language": "unknown"
    },
    {
      "code": "All subsequent events will include the information about both the default and the updated consent status.\n\n### Verify if Zaraz is processing Consent Mode v2\n\nYou can verify that Zaraz is processing the Consent Mode settings by enabling the [Zaraz Debugger](https://developers.cloudflare.com/zaraz/web-api/debug-mode/). Server-side requests to Google Analytics and Google Ads should include the `gcd` parameter.\n\n## Consent Mode v1\n\nConsent Mode v1 was deprecated by Google in November 2023, but is still supported. Integration with Zaraz is more complex than Consent Mode v2. You do not need to use Consent Mode v1 if you have implemented Consent Mode v2.\n\n### Set up Consent Mode v1\n\nConfiguring Consent Mode v1 is done manually for each tool. Go to the tool page and select **Settings**. Select **Add field**, and select **Consent Mode** from the drop-down menu. Then, select **Confirm**.\n\nThe value for Consent Mode must adhere to Google's defined format, which is a four-character string starting with `G1`, followed by two characters indicating consent status for Marketing and Analytics. `1` indicates consent, `0` indicates no consent, and `-` indicates no consent was required. For example, setting the value to `G111` means the user has granted consent for both Marketing and Analytics, `G101` means consent for Analytics only, and `G10-` means no consent for Marketing but no required consent for Analytics.\n\nSince the value for Consent Mode may change per user or session, it is recommended to dynamically set this value using `zaraz.set` in your website code. For instance, use `zaraz.set(\"google_consent_v1\", \"G100\")` on page load, and `zaraz.set(\"google_consent_v1\", \"G111\")` after the user granted consent for Marketing and Analytics. In the **Consent Mode** field, select the **+** symbol, choose **Event Property**, and type `google_consent_v1` as the property name. Zaraz will then use the latest value of the `google_consent_v1` Event Property as the Consent Mode string.\n\n## Supported Tools\n\nConsent Mode v1 and v2 are both supported by Google Analytics 4 and Google Ads.\n\n</page>\n\n<page>\n---\ntitle: Configuration Import & Export · Cloudflare Zaraz docs\ndescription: Exporting your Zaraz configuration can be useful if you want to\n  create a local backup or if you need to import it to another website. Zaraz\n  provides an easy way to export and import your configuration.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/import-export/\n  md: https://developers.cloudflare.com/zaraz/advanced/import-export/index.md\n---\n\nExporting your Zaraz configuration can be useful if you want to create a local backup or if you need to import it to another website. Zaraz provides an easy way to export and import your configuration.\n\n## Export your Zaraz configuration\n\nTo export your Zaraz configuration:\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Go to **Advanced**.\n\n3. Click \"Export\" to download your configuration.\n\n## Import your Zaraz configuration\n\nWarning\n\nImporting a Zaraz configuration replaces your existing configuration, meaning that any information you did not back up could be lost. Consider exporting your existing configuration before importing a new one.\n\nTo import a Zaraz configuration:\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Go to **Advanced**.\n\n3. Click **Browse** to select your configuration file, and **Import** to import it.\n\n</page>\n\n<page>\n---\ntitle: Custom Managed Components · Cloudflare Zaraz docs\ndescription: Zaraz supports loading custom third-party tools using Managed\n  Components. These can be Managed Components that you have developed yourself\n  or that were developed by others. Using Custom Managed Components with Zaraz\n  is done by converting them into a Cloudflare Worker running in your account.\nlastUpdated: 2025-11-17T14:08:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/load-custom-managed-component/\n  md: https://developers.cloudflare.com/zaraz/advanced/load-custom-managed-component/index.md\n---\n\nZaraz supports loading custom third-party tools using [Managed Components](https://managedcomponents.dev/). These can be Managed Components that you have developed yourself or that were developed by others. Using Custom Managed Components with Zaraz is done by converting them into a Cloudflare Worker running in your account.\n\nIf you are new to Managed Components, we recommend you get started with [creating your own Managed Component](https://managedcomponents.dev/getting-started/quickstart) or check out [our demo Managed Component](https://github.com/managed-components/demo).\n\n## Prepare a Managed Component\n\nNote\n\nIf your Managed Component requires any building, transpiling, or bundling, you must complete those steps before you can deploy it. For example, this is required for components written in TypeScript and is usually done by running `npm run build` or an equivalent.\n\nTo get started, you need have a JavaScript file ready for deployment, that exports the default Managed Component function for your Managed Component.\n\nIn this guide, we will use a simple example of a Custom Managed Component that counts user visits and logs this data in the console:",
      "language": "unknown"
    },
    {
      "code": "## Deploy a Managed Component to Cloudflare\n\n1. Open a terminal in your Managed Component’s root directory.\n2. From there, run `npx managed-component-to-cloudflare-worker ./index.js my-new-counter-mc`, which will deploy the Managed Component to a specialized Cloudflare Worker. Change the path to your `index.js`. You can also rename the Component.\n3. Your Managed Component should now be [visible on your account](https://dash.cloudflare.com/redirect?account=/workers-and-pages) as a Cloudflare Worker prefixed with `custom-mc-`.\n\n## Configure a Managed Component in Cloudflare\n\nNote\n\nAs with regular tools, it is recommended that you [create the triggers](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) you need first, if the Custom Managed Component you are adding needs to start actions using firing triggers different from the default `Pageview` trigger.\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Select **Tools Configuration** > [**Third-party tools**](https://dash.cloudflare.com/?to=/:account/:zone/zaraz/tools-config/tools/catalog).\n\n3. Select **Add new tool** and choose **Custom Managed Component** from the tools library page. Select **Continue** to confirm your selection.\n\n4. In **Select Custom MC**, choose a Custom Managed Component that you have deployed to your account, such as `custom-mc-my-new-counter-mc`. Select **Continue**.\n\n5. In **Permissions**, select the permissions you want to grant the Custom Managed Component. If you run an untrusted Managed Component, pay close attention to what permissions you are granting. Select **Continue**.\n\n6. In **Set up**, configure the settings for your new tool. The information you need to enter will depend on the code of the Managed Component. You can add settings and default fields, as well as use [variables you have previously set up](https://developers.cloudflare.com/zaraz/variables/create-variables/).\n\n7. Select **Save**.\n\nWhile your tool is now configured, it does not have any actions associated with it yet. Adding new actions will tell Zaraz when to contact your Managed Component, and what information to send to it. When adding actions, make sure to verify the Action Type you are using. The types `pageview` and `event` are most commonly used, but you can add any action type to match the event listeners your Managed Component is using. Learn how to [create additional actions](https://developers.cloudflare.com/zaraz/custom-actions/).\n\nIf your Managed Component listens to `ecommerce` events, toggle **E-commerce tracking** in the Managed Component Settings page.\n\n## Unsupported Features\n\nAs of now, Custom Managed Components do not support the use of the following methods yet:\n\n* `manager.registerEmbed`\n* `manager.registerWidget`\n* `manager.proxy`\n* `manager.serve`\n\n</page>\n\n<page>\n---\ntitle: Load Zaraz selectively · Cloudflare Zaraz docs\ndescription: You can use Configuration Rules to load Zaraz selectively on\n  specific URLs or subdomains. Configuration Rules can also be used to block\n  Zaraz from loading based on cookies, IP addresses or anything else related to\n  a request.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/load-selectively/\n  md: https://developers.cloudflare.com/zaraz/advanced/load-selectively/index.md\n---\n\nYou can use [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/) to load Zaraz selectively on specific URLs or subdomains. Configuration Rules can also be used to block Zaraz from loading based on cookies, IP addresses or anything else related to a request.\n\nRefer to [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/) documentation to learn more about this feature and how you can use it with Zaraz.\n\nNote\n\nIf you need to block one or more actions from firing in a tool, Cloudflare recommends you use [Blocking Triggers](https://developers.cloudflare.com/zaraz/advanced/blocking-triggers/) instead of Configuration Rules.\n\n</page>\n\n<page>\n---\ntitle: Load Zaraz manually · Cloudflare Zaraz docs\ndescription: By default, if your domain is proxied by Cloudflare, Zaraz will\n  automatically inject itself to HTML pages in your site. This makes it easier\n  to get up and running quickly. However, you might want to load Zaraz manually,\n  for example to test Zaraz on specific pages first.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/load-zaraz-manually/\n  md: https://developers.cloudflare.com/zaraz/advanced/load-zaraz-manually/index.md\n---\n\nBy default, if your domain is proxied by Cloudflare, Zaraz will automatically inject itself to HTML pages in your site. This makes it easier to get up and running quickly. However, you might want to load Zaraz manually, for example to test Zaraz on specific pages first.\n\nAfter you turn off the [Auto-inject script](https://developers.cloudflare.com/zaraz/reference/settings/#auto-inject-script) option, you will have to manually include the Zaraz script in your HTML, immediately before the `</head>` tag closes. The path to your script would be `/cdn-cgi/zaraz/i.js`. Your script tag should look like this:",
      "language": "unknown"
    },
    {
      "code": "With the script, your page HTML should be similar to the following:",
      "language": "unknown"
    },
    {
      "code": "Note that if your site is not proxied by Cloudflare, you should refer to the section about [Using Zaraz on domains not proxied by Cloudflare](https://developers.cloudflare.com/zaraz/advanced/domains-not-proxied/).\n\n</page>\n\n<page>\n---\ntitle: Send Zaraz logs to Logpush · Cloudflare Zaraz docs\ndescription: Send Zaraz logs to an external storage provider like R2 or S3.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/logpush/\n  md: https://developers.cloudflare.com/zaraz/advanced/logpush/index.md\n---\n\nSend Zaraz logs to an external storage provider like R2 or S3.\n\nThis is an Enterprise only feature.\n\n## Setup\n\nFollow these steps to configure Logpush support for Zaraz:\n\n### 1. Create a Logpush job\n\n1. In the Cloudflare dashboard, go to the **Logpush** page.\n\n   [Go to **Logpush**](https://dash.cloudflare.com/?to=/:account/:zone/analytics/logs)\n\n2. Select **Create a Logpush Job** and follow the steps described in the [Logpush](https://developers.cloudflare.com/logs/logpush/) documentation.\\\n   When selecting a dataset, make sure you select **Zaraz Events**.\n\n### 2. Enable Logpush from Zaraz settings\n\n1. Go to your website's [Zaraz settings](https://dash.cloudflare.com/?to=/:account/:zone/zaraz/settings).\n2. Enable **Export Zaraz Logs**.\n\n## Fields\n\nLogs will have the following fields:\n\n| Field | Type | Description |\n| - | - | - |\n| RequestHeaders | `JSON` | The headers that were sent with the request. |\n| URL | `String` | The Zaraz URL to which the request was made. |\n| IP | `String` | The originating IP. |\n| Body | `JSON` | The body that was sent along with the request. |\n| Event Type | `String` | Can be one of the following: `server_request`, `server_response`, `action_triggered`, `ecommerce_triggered`, `client_request`, `component_error`. |\n| Event Details | `JSON` | Details about the event. |\n| TimestampStart | `String` | The time at which the event occurred. |\n\n</page>\n\n<page>\n---\ntitle: Using JSONata · Cloudflare Zaraz docs\ndescription: For advanced use cases, it is sometimes useful to be able to\n  retrieve a value in a particular way. For instance, you might be using\n  zaraz.track to send a list of products to Zaraz, but the third-party tool you\n  want to send this data to requires the total cost of the products.\n  Alternatively, you may want to manipulate a value, such as converting it to\n  lowercase.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/advanced/using-jsonata/\n  md: https://developers.cloudflare.com/zaraz/advanced/using-jsonata/index.md\n---\n\nFor advanced use cases, it is sometimes useful to be able to retrieve a value in a particular way. For instance, you might be using `zaraz.track` to send a list of products to Zaraz, but the third-party tool you want to send this data to requires the total cost of the products. Alternatively, you may want to manipulate a value, such as converting it to lowercase.\n\nCloudflare Zaraz uses JSONata to enable you to perform complex operations on your data. With JSONata, you can evaluate expressions against the [Zaraz Context](https://developers.cloudflare.com/zaraz/reference/context/), allowing you to access and manipulate a wide range of values. To learn more about the values available and how to access them, consult the [full reference](https://developers.cloudflare.com/zaraz/reference/context/). You can also refer to the [complete JSONata documentation](https://docs.jsonata.org/) for more information about JSONata's capabilities.\n\nTo use JSONata inside Zaraz, follow these steps:\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Go to **Tools configuration** > **Tools**.\n\n3. Select **Edit** next to a tool that you have already configured.\n\n4. Select an action or add a new one.\n\n5. Choose the field you want to use JSONata in, and wrap your JSONata expression with double curly brackets, like `{{ expression }}`.\n\nJSONata can also be used inside Triggers, Tool Settings, and String Variables.\n\n## Examples\n\n### Converting a string to lowercase\n\nConverting a string to lowercase is useful if you want to compare it to something else, for example a regular expression. Assuming the original string comes from a cookie named `myCookie`, turning the value lowercase can be done using `{{ $lowercase(system.cookies.myCookie) }}`.\n\n### Sending a sum of all products in the cart\n\nAssuming you are using `zaraz.ecommerce()` to send the cart content like this:",
      "language": "unknown"
    },
    {
      "code": "If the field in which you want to show the sum, you will enter `{{ $sum(client.products.(price * quantity)) }}`. This will multiply the price of each product by its quantity, and then sum up the total.\n\n</page>\n\n<page>\n---\ntitle: Consent API · Cloudflare Zaraz docs\ndescription: The Consent API allows you to programmatically control all aspects\n  of the Consent Management program. This includes managing the modal, the\n  consent status, and obtaining information about your configured purposes.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/consent-management/api/\n  md: https://developers.cloudflare.com/zaraz/consent-management/api/index.md\n---\n\n## Background\n\nThe Consent API allows you to programmatically control all aspects of the Consent Management program. This includes managing the modal, the consent status, and obtaining information about your configured purposes.\n\nUsing the Consent API, you can integrate Zaraz Consent preferences with an external Consent Management Platform, customize your consent modal, or restrict consent management to users in specific regions.\n\n***\n\n## Events\n\n### `Consent API Ready`\n\nIt can be useful to know when the Consent API is fully loaded on the page so that code interacting with its methods and properties is not called prematurely.",
      "language": "unknown"
    },
    {
      "code": "### `Consent Choices Updated`\n\nThis event is fired every time the user makes changes to their consent preferences. It can be used to act on changes to the consent, for example when updating a tool with the new consent preferences.",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Properties\n\nThe following are properties of the `zaraz.consent` object.\n\n* `modal` boolean\n\n  * Get or set the current visibility status of the consent modal dialog.\n\n* `purposes` object read-only\n\n  * An object containing all configured purposes, with their ID, name, description, and order.\n\n* `APIReady` boolean read-only\n\n  * Indicates whether the Consent API is currently available on the page.\n\n***\n\n## Methods\n\n### `Get`",
      "language": "unknown"
    },
    {
      "code": "* `get(purposeId)` : `boolean | undefined`\n\nGet the current consent status for a purpose using the purpose ID.\n\n* `true`: The consent was granted.\n* `false`: The consent was not granted.\n* `undefined`: The purpose does not exist.\n\n#### Parameters\n\n* `purposeId` string\n\n  * The ID representing the Purpose.\n\n### `Set`",
      "language": "unknown"
    },
    {
      "code": "* `set(consentPreferences)` : `undefined`\n\nSet the consent status for some purposes using the purpose ID.\n\n#### Parameters\n\n* `consentPreferences` object\n\n  * a `{ purposeId: boolean }` object describing the purposes you want to set and their respective consent status.\n\n### `Get All`",
      "language": "unknown"
    },
    {
      "code": "* `getAll()` : `{ purposeId: boolean }`\n\nReturns an object with the consent status of all purposes.\n\n### `Set All`",
      "language": "unknown"
    },
    {
      "code": "* `setAll(consentStatus)` : `undefined`\n\nSet the consent status for all purposes at once.\n\n#### Parameters\n\n* `consentStatus` boolean\n\n  * Indicates whether the consent was granted or not.\n\n### `Get All Checkboxes`",
      "language": "unknown"
    },
    {
      "code": "* `getAllCheckboxes()` : `{ purposeId: boolean }`\n\nReturns an object with the checkbox status of all purposes.\n\n### `Set Checkboxes`",
      "language": "unknown"
    },
    {
      "code": "* `setCheckboxes(checkboxesStatus)` : `undefined`\n\nSet the consent status for some purposes using the purpose ID.\n\n#### Parameters\n\n* `checkboxesStatus` object\n\n  * a `{ purposeId: boolean }` object describing the checkboxes you want to set and their respective checked status.\n\n### `Set All Checkboxes`",
      "language": "unknown"
    },
    {
      "code": "* `setAllCheckboxes(checkboxStatus)` : `undefined`\n\nSet the `checkboxStatus` status for all purposes in the consent modal at once.\n\n#### Parameters\n\n* `checkboxStatus` boolean\n\n  * Indicates whether the purposes should be marked as checked or not.\n\n### `Send queued events`",
      "language": "unknown"
    },
    {
      "code": "* `sendQueuedEvents()` : `undefined`\n\nIf some Pageview-based events were not sent due to a lack of consent, they can be sent using this method after consent was granted.\n\n## Examples\n\n### Restricting consent checks based on location\n\nYou can combine multiple features of Zaraz to effectively disable Consent Management for some visitors. For example, if you would like to use it only for visitors from the EU, you can disable the automatic showing of the consent modal and add a Custom HTML tool with the following script:",
      "language": "unknown"
    },
    {
      "code": "Note: If you've customized the cookie name for the Consent Manager, use that customized name instead of \"cf\\_consent\" in the snippet above.\n\nBy letting this Custom HTML tool to run without consent requirements, the modal will appear to all EU visitors, while for other visitors consent will be automatically granted. The `{{ system.device.location.isEUCountry }}` property will be `1` if the visitor is from an EU country and `0` otherwise. You can use any other property or variable to customize the Consent Management behavior in a similar manner, such as `{{ system.device.location.country }}` to restrict consent checks based on country code.\n\n</page>\n\n<page>\n---\ntitle: Custom CSS · Cloudflare Zaraz docs\ndescription: You can add custom CSS to the Zaraz Consent Management Platform, to\n  make the consent modal more in-line with your website's design.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/consent-management/custom-css/\n  md: https://developers.cloudflare.com/zaraz/consent-management/custom-css/index.md\n---\n\nYou can add custom CSS to the Zaraz Consent Management Platform, to make the consent modal more in-line with your website's design.\n\n1. In the Cloudflare dashboard, go to the **Consent** page.\n\n   [Go to **Consent**](https://dash.cloudflare.com/?to=/:account/tag-management/consent)\n\n2. Find the **Custom CSS** section, and add your custom CSS code as you would on any other HTML editor.\n\n</page>\n\n<page>\n---\ntitle: Enable the Consent Management platform (CMP) · Cloudflare Zaraz docs\ndescription: Your Consent Management platform is ready. Your website should now\n  display a modal asking for consent for the tools you have configured.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/consent-management/enable-consent-management/\n  md: https://developers.cloudflare.com/zaraz/consent-management/enable-consent-management/index.md\n---\n\n1. In the Cloudflare dashboard, go to the **Consent** page.\n\n   [Go to **Consent**](https://dash.cloudflare.com/?to=/:account/tag-management/consent)\n\n2. Turn on **Enable Consent Management**.\n\n3. In **Consent modal text** fill in any legal information required in your country. Use HTML code to format your information as you would in any other HTML editor.\n\n4. Under **Purposes**, select **Add new Purpose**. Give your new purpose a name and a description. Purposes are the reasons for using third-party tools in your website.\n\n5. In **Assign purpose to tools**, match tools to purposes by selecting one of the purposes previously created from the drop-down menu. Do this for all your tools.\n\n6. Select **Save**.\n\nYour Consent Management platform is ready. Your website should now display a modal asking for consent for the tools you have configured.\n\n## Adding different languages\n\nIn your Zaraz consent settings, you can add your consent modal text and purposes in various languages.\n\n1. In the Cloudflare dashboard, go to the **Consent** page.\n\n   [Go to **Consent**](https://dash.cloudflare.com/?to=/:account/tag-management/consent)\n\n2. Select a default language of your choice. The default setting is English.\n\n3. In **Consent modal text** and **Purposes**, you can select different languages and add translations.\n\n## Overriding the consent modal language\n\nBy default, the Zaraz Consent Management Platform will try to match the language of the consent modal with the language requested by the browser, using the `Accept-Language` HTTP header. If, for any reason, you would like to force the consent modal language to a specific one, you can use the `zaraz.set` Web API to define the default `__zarazConsentLanguage` value.\n\nBelow is an example that forces the language shown to be American English.",
      "language": "unknown"
    },
    {
      "code": "## Next steps\n\nIf the default consent modal does not suit your website's design, you can use the [Custom CSS tool](https://developers.cloudflare.com/zaraz/consent-management/custom-css/) to add your own custom design.\n\n</page>\n\n<page>\n---\ntitle: IAB Transparency & Consent Framework Compliance · Cloudflare Zaraz docs\ndescription: The Zaraz Consent Management Platform is compliant with the IAB\n  Transparency & Consent Framework. Enabling this feature could be required in\n  order to serve Google Ads in the EEA and the UK.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/consent-management/iab-tcf-compliance/\n  md: https://developers.cloudflare.com/zaraz/consent-management/iab-tcf-compliance/index.md\n---\n\nThe Zaraz Consent Management Platform is compliant with the IAB Transparency & Consent Framework. Enabling this feature [could be required](https://blog.google/products/adsense/new-consent-management-platform-requirements-for-serving-ads-in-the-eea-and-uk/) in order to serve Google Ads in the EEA and the UK.\n\nThe CMP ID of the approval is 433 and be can seen in the [IAB Europe](https://iabeurope.eu/cmp-list/) website.\n\nUsing the Zaraz Consent Management Platform in IAB TCF Compliance Mode is is opt-in.\n\n1. In the Cloudflare dashboard, go to the **Consent** page.\n\n   [Go to **Consent**](https://dash.cloudflare.com/?to=/:account/tag-management/consent)\n\n2. Check the **Use IAB TCF compliant modal** option.\n\n3. Under the **Assign purposes to tools** section, add vendor details to every tool that was not automatically assigned.\n\n4. Press **Save**.\n\n</page>\n\n<page>\n---\ntitle: Additional fields · Cloudflare Zaraz docs\ndescription: Some tools supported by Zaraz let you add fields in addition to the\n  required field. Fields can usually be added either to a specific action, or to\n  all the action within a tool, by adding the field as a Default Field.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/custom-actions/additional-fields/\n  md: https://developers.cloudflare.com/zaraz/custom-actions/additional-fields/index.md\n---\n\nSome tools supported by Zaraz let you add fields in addition to the required field. Fields can usually be added either to a specific action, or to all the action within a tool, by adding the field as a **Default Field**.\n\n## Add an additional field to a specific action\n\nAdding an additional field to an action will attach it to this action only, and will not affect your other actions.\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Select **Tools Configuration** > **Third-party tools**.\n\n3. Locate the third-party tool with the action you want to add the additional field to, and select **Edit**.\n\n4. Select the action you wish to modify.\n\n5. Select **Add Field**.\n\n6. Choose the desired field from the drop-down menu and select **Add**.\n\n7. Enter the value you wish to pass to the action.\n\n8. Select **Save**.\n\nThe new field will now be used in this event.\n\n## Add an additional field to all actions in a tool\n\nAdding an additional field to the tool sets it as a default field for all of the tool actions. It is the same as adding it to every action in the tool.\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Select **Tools Configuration** > **Third-party tools**.\n\n3. Locate the third-party tool where you want to add the field, and select **Edit**.\n\n4. Select **Settings** > **Add Field**.\n\n5. Choose the desired field from the drop-down menu, and select **Add**.\n\n6. Enter the value you wish to pass to all the actions in the tool.\n\n7. Select **Save**.\n\nThe new field will now be attached to every action that belongs to the tool.\n\n</page>\n\n<page>\n---\ntitle: Create an action · Cloudflare Zaraz docs\ndescription: Once you have your triggers ready, you can use them to configure\n  your actions. An action defines a specific task that your tool will perform.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/custom-actions/create-action/\n  md: https://developers.cloudflare.com/zaraz/custom-actions/create-action/index.md\n---\n\nOnce you have your triggers ready, you can use them to configure your actions. An action defines a specific task that your tool will perform.\n\nTo create an action, first [add a third-party tool](https://developers.cloudflare.com/zaraz/get-started/). If you have already added a third-party tool, follow these steps to create an action.\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration**.\n\n3. Under **Third-party tools**, locate the tool you want to configure an action for, and select **Edit**.\n\n4. Under Custom actions select **Create action**.\n\n5. Give the action a descriptive name.\n\n6. In the **Firing Triggers** field, choose the relevant trigger or triggers you [previously created](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/). If you choose more than one trigger, the action will start when any of the selected triggers are matched.\n\n7. Depending on the tool you are adding an action for, you might also have the option to choose an **Action type**. You might also need to fill in more fields in order to complete setting up the action.\n\n8. Select **Save**.\n\nThe new action will appear under **Tool actions**. To edit or disable/enable an action, refer to [Edit tools and actions](https://developers.cloudflare.com/zaraz/custom-actions/edit-tools-and-actions/).\n\n</page>\n\n<page>\n---\ntitle: Create a trigger · Cloudflare Zaraz docs\ndescription: Triggers define the conditions under which a tool will start an\n  action. Since a tool must have actions in order to work, and actions must have\n  triggers, it is important to set up your website's triggers correctly. A\n  trigger can be made out of one or more Rules. Zaraz supports multiple types of\n  Trigger Rules.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/\n  md: https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/index.md\n---\n\nTriggers define the conditions under which a tool will start an action. Since a tool must have actions in order to work, and actions must have triggers, it is important to set up your website's triggers correctly. A trigger can be made out of one or more Rules. Zaraz supports [multiple types of Trigger Rules](https://developers.cloudflare.com/zaraz/reference/triggers/).\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration**.\n\n3. Select the **Triggers** tab.\n\n4. Select **Create trigger**.\n\n5. In **Trigger Name** enter a descriptive name for your trigger.\n\n6. In **Rule type**, choose from the actions available in the drop-down menu to start building your rule. Refer to [Triggers and rules](https://developers.cloudflare.com/zaraz/reference/triggers/) for more information on what each rule type means.\n\n7. In **Variable name**, input the variable you want as the trigger. For example, use *Event Name* if you are using [`zaraz.track()`](https://developers.cloudflare.com/zaraz/web-api/track/) in your website. If you want to use a variable you have previously [created in Variables](https://developers.cloudflare.com/zaraz/variables/create-variables/), select the `+` sign in the drop-down menu, scroll to **Variables**, and choose your variable.\n\n8. Use the **Match operation** drop-down list to choose a comparison operator. For an expression to match, the value in **Variable name** and **Match string** must satisfy the comparison operator.\n\n9. In **Match string**, input the string that completes the rule.\n\n10. You can add more than one rule to your trigger. Select **Add rule** and repeat steps 5-8 to add another set of rules and conditions. If you add more than one rule, your trigger will only be valid when all conditions are true.\n\n11. Select **Save**.\n\nYour trigger is now complete. If you go back to the main page you will see it listed under **Triggers**, as well as which tools use it. You can also [**Edit** or **Delete** your trigger](https://developers.cloudflare.com/zaraz/custom-actions/edit-triggers/).\n\n</page>\n\n<page>\n---\ntitle: Edit tools and actions · Cloudflare Zaraz docs\ndescription: On this page you will be able to edit settings related to the tool,\n  add actions, and edit existing ones. To edit an existing action, select its\n  name.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/custom-actions/edit-tools-and-actions/\n  md: https://developers.cloudflare.com/zaraz/custom-actions/edit-tools-and-actions/index.md\n---\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools**.\n\n3. Under **Third-party tools**, locate your tool and select **Edit**.\n\nOn this page you will be able to edit settings related to the tool, add actions, and edit existing ones. To edit an existing action, select its name.\n\n## Enable or disable a tool\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration**.\n\n3. Under **Third-party tools**, locate your tool and select the **Enabled** toggle.\n\n## Enable or disable an action\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration** > **Third-party tools**.\n\n3. Locate the tool you wan to edit and select **Edit**.\n\n4. Find the action you want to change state, and enable or disable it with the toggle.\n\n## Delete a tool\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration**.\n\n3. Under **Third-party tools**, locate your tool and select **Delete**.\n\n</page>\n\n<page>\n---\ntitle: Edit a trigger · Cloudflare Zaraz docs\ndescription: You can edit every field related to the trigger, as well as add new\n  trigger rules.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/custom-actions/edit-triggers/\n  md: https://developers.cloudflare.com/zaraz/custom-actions/edit-triggers/index.md\n---\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration**.\n\n3. Under **Triggers**, locate your trigger and select **Edit**.\n\nYou can edit every field related to the trigger, as well as add new trigger rules.\n\n## Delete a trigger\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration**.\n\n3. Under **Triggers**, locate your trigger and select **Delete**.\n\n</page>\n\n<page>\n---\ntitle: Preview changes before publishing · Cloudflare Zaraz docs\ndescription: Zaraz allows you to test your configurations before publishing\n  them. This is helpful to avoid unintended consequences when deploying a new\n  tool or trigger.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/history/preview-mode/\n  md: https://developers.cloudflare.com/zaraz/history/preview-mode/index.md\n---\n\nZaraz allows you to test your configurations before publishing them. This is helpful to avoid unintended consequences when deploying a new tool or trigger.\n\nAfter enabling Preview & Publish you will also have access to [Zaraz History](https://developers.cloudflare.com/zaraz/history/versions/).\n\n## Enable Preview & Publish mode\n\nBy default, Zaraz is configured to commit changes in real time. To enable preview mode and test new features you are adding to Zaraz:\n\n1. In the Cloudflare dashboard, go to the **History** page.\n\n   [Go to **History**](https://dash.cloudflare.com/?to=/:account/tag-management/history)\n\n2. Enable **Preview & Publish Workflow**.\n\nYou are now working in preview mode. To commit changes and make them live, you will have to select **Publish** on your account.\n\n### Test changes before publishing them\n\nNow that you have Zaraz working in preview mode, you can open your website and test your settings:\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Navigate to the website where you want to test your new settings.\n\n3. Access the browser’s developer tools. For example, to access developer tools in Google Chrome, select **View** > **Developer** > **Developer Tools**.\n\n4. Select the **Console** pane and enter the following command to start Zaraz’s preview mode:",
      "language": "unknown"
    },
    {
      "code": "5. Your website will reload along with Zaraz debugger, and Zaraz will use the most recent changes in preview mode.\n\n6. If you are satisfied with your changes, go back to the dashboard and select **Publish** to apply them to all users. If not, use the dashboard to continue adjusting your configuration.\n\nTo exit preview mode, close Zaraz debugger.\n\n## Disable Preview & Publish mode\n\nDisable Preview & Publish mode to work in real time. When you work in real time, any changes made on the dashboard are applied instantly to the domain you are working on.\n\n1. In the Cloudflare dashboard, go to the **History** page.\n\n   [Go to **History**](https://dash.cloudflare.com/?to=/:account/tag-management/history)\n\n2. Disable **Preview & Publish Workflow**.\n\n3. In the modal, decide if you want to delete all unpublished changes, or if you want to publish any change made in the meantime.\n\nZaraz is now working in real time. Any change you make will be immediately applied the domain you are working on.\n\n</page>\n\n<page>\n---\ntitle: Versions · Cloudflare Zaraz docs\ndescription: Version History enables you to keep track of all the Zaraz\n  configuration changes made in your website. With Version History you can also\n  revert changes to previous settings should there be a problem.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/history/versions/\n  md: https://developers.cloudflare.com/zaraz/history/versions/index.md\n---\n\nVersion History enables you to keep track of all the Zaraz configuration changes made in your website. With Version History you can also revert changes to previous settings should there be a problem.\n\nTo access Version History you need to enable [Preview & Publish mode](https://developers.cloudflare.com/zaraz/history/preview-mode/) first. Then, you can access Version History under **Zaraz** > **History**.\n\n## Access Version History\n\n1. In the Cloudflare dashboard, go to the **History** page.\n\n   [Go to **History**](https://dash.cloudflare.com/?to=/:account/tag-management/history)\n\n2. If this is your first time using this feature, this page will be empty. Otherwise, you will have a list of changes made to your account with the following information:\n\n   * Date of change\n   * User who made the change\n   * Description of the change\n\n## Revert changes\n\nVersion History enables you to revert any changes made to your Zaraz settings.\n\n1. In the Cloudflare dashboard, go to the **History** page.\n\n   [Go to **History**](https://dash.cloudflare.com/?to=/:account/tag-management/history)\n\n2. Find the changes you want to revert, and select **Restore**.\n\n3. Confirm you want to revert your changes.\n\n4. Select **Publish** to publish your changes.\n\n</page>\n\n<page>\n---\ntitle: Monitoring API · Cloudflare Zaraz docs\ndescription: The Zaraz Monitoring API allows users to retrieve detailed data on\n  Zaraz events through the GraphQL Analytics API. Using this API, you can\n  monitor events, pageviews, triggers, actions, and server-side request\n  statuses, including any errors and successes. The data available through the\n  API mirrors what is shown on the Zaraz Monitoring page in the dashboard, but\n  with the API, you can query it programmatically to create alerts and\n  notifications for unexpected deviations.\nlastUpdated: 2025-05-14T00:02:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/monitoring/monitoring-api/\n  md: https://developers.cloudflare.com/zaraz/monitoring/monitoring-api/index.md\n---\n\nThe **Zaraz Monitoring API** allows users to retrieve detailed data on Zaraz events through the **GraphQL Analytics API**. Using this API, you can monitor events, pageviews, triggers, actions, and server-side request statuses, including any errors and successes. The data available through the API mirrors what is shown on the Zaraz Monitoring page in the dashboard, but with the API, you can query it programmatically to create alerts and notifications for unexpected deviations.\n\nTo get started, you'll need to generate an Analytics API token by following the [API token authentication guide](https://developers.cloudflare.com/analytics/graphql-api/getting-started/authentication/api-token-auth/).\n\n## Key Entities\n\nThe Monitoring API includes the following core entities, which each provide distinct insights:\n\n* **zarazTrackAdaptiveGroups**: Contains data on Zaraz events, such as event counts and timestamps.\n* **zarazActionsAdaptiveGroups**: Provides information on Zaraz Actions.\n* **zarazTriggersAdaptiveGroups**: Tracks data on Zaraz Triggers.\n* **zarazFetchAdaptiveGroups**: Captures server-side request data, including URLs and returning status codes for third-party requests made by Zaraz.\n\n## Example GraphQL Queries\n\nYou can construct any query you'd like using the above datasets, but here are some example queries you can use.\n\n* Events\n\n  Query for the count of Zaraz events, grouped by time.",
      "language": "unknown"
    },
    {
      "code": "[Run in GraphQL API Explorer](https://graphql.cloudflare.com/explorer?query=I4VwpgTgngBAWgQwggXgUQG5gHYBcDOAFAFAwwAkKA9tmACoIDmAXDPrhAJbaOkUA2nALadcrEN1wA2ACwBCPuXZIxMOsLCKcAE1bqhmsuSoRtkAEJRWcGmETIUdZAGMA1gEFtCAA65OWAHEIKhBvfAB5UwsoBQBKGABvPgxOMAB3SES+MmpaIgAzTn5cSFYEmFz6JlZKWwZGGABfeKSyNpgvXARWFCRUJwQ3Tx8-QODQomz2mEERVXJZ0Sn2wuLSxI6EEr8DAAkQiAB9RjBgGuUIXAAaTe2NfZAj-lOanSbltpMzCEtWAG1jFEflAALofFofMjOEJ4SEdDTYfCcGj4LLTaYEVidMA7MAPCBwxofIntEnvRpAA\\&variables=N4IgXg9gdgpgKgQwOYgFwgFoHkByBRAfQEkAREAGhABsBLAWxoBc0BGABjcoGdGEAnZugBMbIQFYAtCyESAzGzhChqeajZiMFEDCgATNCBHipM2SzhsALCrZqNWiH10w+AIQCeB3QkYxG9GAAJCABXPgIAQQBlAGEQAF8gA)\n\n* Loads\n\n  Query for the count of Zaraz loads, grouped by time.",
      "language": "unknown"
    },
    {
      "code": "[Run in GraphQL API Explorer](https://graphql.cloudflare.com/explorer?query=I4VwpgTgngBAWgQwggXgGQPYICYGcAUAUDDACQoYB2YAKggOYBcMuALhAJaX3FkA2HALYdWzEF1YA2ACwBCXqTZJRMACIJWYBWErZm6zQowRskAEJRmcKmETIUNTvXqRcAQWwIADqw4A3MABxCAwQL1wAeRNzKHkAShgAb14-DjAAd0gk3hIKagIAMw4+TQhmRJg82gZmchs6ehgAXwTkknaYT1YEZhQkVEcOZ1cPb18A4NDwog6OgWEVUnmRHNmikshyzo0wAH0XYFqlCFYAGm3NXb4wQ7IdbHP2IZcIADkEQTBmAAUGMFSMs1Vh1jKYIBZmABtUigmIAXWBMFaiJIAGNQpRWCjOkIdLgOFRcNlZrNWLhmF0tCSSE1EbSOvSgU0gA\\&variables=N4IgXg9gdgpgKgQwOYgFwgFoHkByBRAfQEkAREAGhABsBLAWxoBc0BGABjcoGdGEAnZugBMbIQFYAtCyESAzGwogYUACZoQI8VJmyWiiHxUw+AIQCe6lQkYwCAQQDKAYRABfIA)\n\n* Triggers\n\n  Query for the total execution count of each trigger processed by Zaraz.",
      "language": "unknown"
    },
    {
      "code": "[Run in GraphQL API Explorer](https://graphql.cloudflare.com/explorer?query=I4VwpgTgngBAWgQwggXgFQgSwObcgZwAoAoGGAEhQHsA7MNBbALhnwBcsbtSKAbTALaY2LEJhpsAbABYAhD3LskImABEEbMArA0AJi3WbiAShgBvHgDdMYAO6RzPMtTpEAZpl6aILMzBf0jCyUtIHYMAC+phZksTC6GggsKEioGDh4EPgAggkADmyYlmAA4hBUIHlETnEw-EIq5PXCNXEeXpC+8RpgAPp4wMFKEGwANN2avbxggxQ6upGtsVQQupAAQlAsANoAxhUSvaoAogDKAMIAukvRS2T7IBJ38YI6+Ji0+I61tTQIAmAWBwMpAAHL-LQ-MgRJYwuJwxYRIA\\&variables=N4IgXg9gdgpgKgQwOYgFwgFoHkByBRAfQEkAREAGhABsBLAWxoBc0BGABjcoGdGEAnZugBMbIQFYAtCyESAzGwogYUACZoQI8VJmyWIAL5A)\n\n* Erroneous responses\n\n  Query for the count of 400 server-side responses, grouped by time and URL.",
      "language": "unknown"
    },
    {
      "code": "[Run in GraphQL API Explorer](https://graphql.cloudflare.com/explorer?query=I4VwpgTgngBAohCB7AdmJIDOAlMmAOqmeAFAFAwwAkAXqmACoCGA5gFwyYAuEAliiwrUANrwC2vLhxD8uANgAsAQiFVuTCFJgNxYVWBQATDjrF7KVJBEOQAQlA4Ateo41MaAMTBcAxgAsAQUMmfC5eADcwAHFkEHxMAHlrOygVAEoYAG8hcN4wAHdILKFKOjRMEgAzXmEuSA5MmDLGVg5aemYWGABfDOzKAZhgriYOGjdPb38gkLDImIx48kHB0QktKjXJEpXq2vrilZXh710ACQwIAH0WMGA29U0do5OwswuQa+E7toNDZ5Wn2EVzQ9xgACJwQDBuouFgOAoAAyI6E9VFWGwQewcADalmSWKgAF0AX1UT4MCguKjDLoUJheERDkcBlxMBxXudLqjKCgmGZpBBhKjugDRYNxWjukA\\&variables=N4IgXg9gdgpgKgQwOYgFwgFoHkByBRAfQEkAREAGhABsBLAWxoBc0BGABjcoGdGEAnZugBMbIQFYAtCyESAzGzhChqeajZiMFEDCgATNCBHipM2SzhsALCrZqNWiH10w+AIQCeB3QkYxG9GAAJCABXPgIAQQBlAGEQAF8gA)\n\n### Variables Example",
      "language": "unknown"
    },
    {
      "code": "Be sure to customize the zoneTag to match your specific zone, along with setting the desired start and end dates\n\n### Explanation of Parameters\n\n* **zoneTag**: Unique identifier of your Cloudflare zone.\n* **limit**: Maximum number of results to return.\n* **start** and **end**: Define the date range for the query in ISO 8601 format.\n* **orderBy**: Determines the sorting order, such as by ascending or descending datetime.\n\n## Example `curl` Request\n\nUse this `curl` command to query the Zaraz Monitoring API for the number of events processed by Zaraz. Replace `$TOKEN` with your API token, `$ZONE_TAG` with your zone tag, and adjust the start and end dates as needed.",
      "language": "unknown"
    },
    {
      "code": "### Explanation of the `curl` Components\n\n* **Authorization**: The `Authorization` header requires a Bearer token. Replace `$TOKEN` with your actual API token.\n* **Content-Type**: Set `application/json` to indicate a JSON payload.\n* **Data Payload**: This payload includes the GraphQL query and variable parameters, such as `zoneTag`, `start`, `end`, `limit`, and `orderBy`.\n\nThis `curl` example will return a JSON response containing event counts and timestamps within the specified date range. Modify the `variables` values as needed for your use case.\n\n## Additional Resources\n\nRefer to the [full GraphQL Analytics API documentation](https://developers.cloudflare.com/analytics/graphql-api/) for more details on available fields, filters, and further customization options for Zaraz Monitoring API queries.\n\n</page>\n\n<page>\n---\ntitle: Zaraz Context · Cloudflare Zaraz docs\ndescription: The Zaraz Context is a versatile object that provides a set of\n  configurable properties for Zaraz, a web analytics tool for tracking user\n  behavior on websites. These properties can be accessed and utilized across\n  various components, including Worker Variables and JSONata expressions.\nlastUpdated: 2025-03-07T11:07:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/reference/context/\n  md: https://developers.cloudflare.com/zaraz/reference/context/index.md\n---\n\nThe Zaraz Context is a versatile object that provides a set of configurable properties for Zaraz, a web analytics tool for tracking user behavior on websites. These properties can be accessed and utilized across various components, including [Worker Variables](https://developers.cloudflare.com/zaraz/variables/worker-variables/) and [JSONata expressions](https://developers.cloudflare.com/zaraz/advanced/using-jsonata/).\n\nSystem properties, which are automatically collected by Zaraz, provide insights into the user's environment and device, while Client properties, obtained through [Zaraz Web API](https://developers.cloudflare.com/zaraz/web-api/) calls like zaraz.track(), offer additional information on user behavior and actions.\n\n## System properties\n\n### Page information\n\n| Property | Type | Description |\n| - | - | - |\n| `system.page.query` | Object | Key-Value object containing all query parameters in the current URL. |\n| `system.page.title` | String | Current page title. |\n| `system.page.url` | URL | [URL](https://developer.mozilla.org/en-US/docs/Web/API/URL) Object containing information about the current URL |\n| `system.page.referrer` | String | Current page referrer from `document.referrer`. |\n| `system.page.encoding` | String | Current page character encoding from `document.characterSet`. |\n| | | |\n\n### Cookies\n\n| Property | Type | Description |\n| - | - | - |\n| `system.cookies` | Object | Key-Value object containing all present cookies. |\n\nThe keys inside the `system.cookies` are the cookies name. The property `system.cookies.foo` will return the value of the a cookie named `foo`.\n\n### Device information\n\n| Property | Type | Description |\n| - | - | - |\n| `system.device.ip` | String | Visitor incoming IP address. |\n| `system.device.resolution` | String | Screen resolution for device. |\n| `system.device.viewport` | String | Visible web page area in user’s device. |\n| `system.device.language` | String | Language used in user's device. |\n| `system.device.location` | Object | All location-related keys from [IncomingRequestCfProperties](https://developers.cloudflare.com/workers/runtime-apis/request/#incomingrequestcfproperties) |\n| `system.device.user-agent.ua` | String | Browser user agent. |\n| `system.device.user-agent.browser.name` | String | Browser name. |\n| `system.device.user-agent.browser.version` | String | Browser version. |\n| `system.device.user-agent.engine.name` | String | Type of browser engine (for example, WebKit). |\n| `system.device.user-agent.engine.version` | String | Version of the browser engine. |\n| `system.device.user-agent.os.name` | String | Operating system. |\n| `system.device.user-agent.os.version` | String | Version of the operating system. |\n| `system.device.user-agent.device` | String | Type of device used (for example, iPhone). |\n| `system.device.user-agent.cpu` | String | Device’s CPU. |\n| | | |\n\n### Consent Management\n\n| Property | Type | Description |\n| - | - | - |\n| `system.consent` | Object | Key-value object containing the current consent status from the Zaraz Consent Manager. |\n\nThe keys inside the `system.consent` object are purpose IDs, and values are `true` for consent, `false` for lack of consent.\n\n### Managed Components\n\n| Property | Type | Description |\n| - | - | - |\n| `system.clientKV` | Object | Key-value object containing all the KV data from your Managed Components. |\n\nThe keys inside the `system.clientKV` object are formatted as Tool ID, underscore, Key name. Assuming you want to read the value of the `ga4` key used by a tool with ID `abcd`, the path would be `system.clientKV.abcd_ga4`.\n\n### Miscellaneous\n\n| Property | Type | Description |\n| - | - | - |\n| `system.misc.random` | Number | Random number unique to each request. |\n| `system.misc.timestamp` | Number | Unix time in seconds. |\n| `system.misc.timestampMilliseconds` | Number | Unix time in milliseconds. |\n| | | |\n\n## Event properties\n\n| Property | Type | Description |\n| - | - | - |\n| `client.__zarazTrack` | String | Returns the name of the event sent using the Track method of the Web API. Refer to [Zaraz Track](https://developers.cloudflare.com/zaraz/web-api/track/) for more information. |\n| `client.<KEY_NAME>` | String | Returns the value of a `zaraz.track()` `eventProperties` key. The key can either be directly used in `zaraz.track()` or set using `zaraz.set()`. Replace `<KEY_NAME>` with the name of your key. Refer to [Zaraz Track](https://developers.cloudflare.com/zaraz/web-api/track/) for more information. |\n| | | |\n\n</page>\n\n<page>\n---\ntitle: Properties reference · Cloudflare Zaraz docs\ndescription: Cloudflare Zaraz offers properties that you can use when\n  configuring the product. They are helpful to send data to a third-party tool\n  or to create triggers as they have context about a specific user's browser\n  session and the actions they take on the website. Below is a list of the\n  properties you can access from the Cloudflare dashboard and their values.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/reference/properties-reference/\n  md: https://developers.cloudflare.com/zaraz/reference/properties-reference/index.md\n---\n\nCloudflare Zaraz offers properties that you can use when configuring the product. They are helpful to send data to a third-party tool or to create triggers as they have context about a specific user's browser session and the actions they take on the website. Below is a list of the properties you can access from the Cloudflare dashboard and their values.\n\n## Web API\n\n| Property | Description |\n| - | - |\n| *Event Name* | Returns the name of the event sent using the Track method of the Web API. Refer to the [Track method](https://developers.cloudflare.com/zaraz/web-api/track/) for more information. |\n| *Track Property name:* | Returns the value of a `zaraz.track()` `eventProperties` key. The key can either be directly used in `zaraz.track()` or set using `zaraz.set()`. Set the name of your key here. Refer to the [Set method](https://developers.cloudflare.com/zaraz/web-api/set/) for more information. |\n\n## Page Properties\n\n| Property | Description |\n| - | - |\n| *Page character encoding* | Returns the document character encoding from `document.characterSet`. |\n| *Page referrer* | Returns the page referrer from `document.referrer`. |\n| *Page title* | Returns the page title. |\n| *Query param name:* | Returns the value of a URL query parameter. When you choose this variable, you need to set the name of your parameter. |\n| *URL* | Returns a string containing the entire URL. |\n| *URL base domain* | Returns the base domain part of the URL, without any subdomains. |\n| *URL host* | Returns the domain (that is, the hostname) followed by a `:` and the port of the URL (if a port was specified). |\n| *URL hostname* | Returns the domain of the URL. |\n| *URL origin* | Returns the origin of the URL — that is, its scheme, domain, and port. |\n| *URL password* | Returns the password specified before the domain name. |\n| *URL pathname* | Returns the path of the URL, including the initial `/`. Does not include the query string or fragment. |\n| *URL port* | Returns the port number of the URL. |\n| *URL protocol scheme* | Returns the protocol scheme of the URL, including the final `:`. |\n| *URL query parameters* | Returns query parameters provided, beginning with the leading `?` character. |\n| *URL username* | Returns the username specified before the domain name. |\n\n## Cookies\n\n| Property | Description |\n| - | - |\n| *Cookie name:* | Returns cookies obtained from the browser `document`. |\n\n## Device properties\n\n| Property | Description |\n| - | - |\n| *Browser engine* | Returns the type of browser engine (for example, `WebKit`). |\n| *Browser engine version* | Returns the version of the browser’s engine. |\n| *Browser name* | Returns the browser’s name. |\n| *Browser version* | Returns the browser’s version. |\n| *Device CPU* | Returns the device’s CPU. |\n| *Device IP address* | Returns the incoming IP address. |\n| *Device language* | Returns the language used. |\n| *Device screen resolution* | Returns the screen resolution of the device. |\n| *Device type* | Returns the type of device used (for example, `iPhone`). |\n| *Device viewport* | Returns the visible web page area in user’s device. |\n| *Operating system name* | Returns the operating system. |\n| *Operating system version* | Returns the version of the operating system. |\n| *User-agent string* | Returns the browser’s user agent. |\n\n## Device location\n\n| Property | Description |\n| - | - |\n| *City* | Returns the city of the incoming request. For example, `Lisbon`. |\n| *Continent* | Returns the continent of the incoming request. For example, `EU` |\n| *Country* code | Returns the country code of the incoming request. For example, `PT`. |\n| *EU* country | Returns a `1` if the country of the incoming request is in the European Union, and a `0` if it is not. |\n| *Region* | Returns the [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) name for the first level region associated with the IP address of the incoming request. For example, `Lisbon`. |\n| *Region* code | Returns the [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) region code associated with the IP address of the incoming request. For example, `11`. |\n| *Timezone* | Returns the timezone of the incoming request. For example, `Europe/Lisbon`. |\n\n## Miscellaneous\n\n| Property | Description |\n| - | - |\n| *Random number* | Returns a random number unique to each request. |\n| *Timestamp (milliseconds)* | Returns the Unix time in milliseconds. |\n| *Timestamp (seconds)* | Returns the Unix time in seconds. |\n\n</page>\n\n<page>\n---\ntitle: Zaraz settings · Cloudflare Zaraz docs\ndescription: \"To configure Zaraz's general settings, go to the Settings page in\n  the Cloudflare dashboard:\"\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/reference/settings/\n  md: https://developers.cloudflare.com/zaraz/reference/settings/index.md\n---\n\nTo configure Zaraz's general settings, go to the **Settings** page in the Cloudflare dashboard:\n\n[Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\nMake sure you save your changes, by selecting the **Save** button after making them.\n\n## Workflow\n\nAllows you to choose between working in Real-time or Preview & Publish modes. By default, Zaraz instantly publishes all changes you make in your account. Choosing Preview & Publish lets you test your settings before committing to them. Refer to [Preview mode](https://developers.cloudflare.com/zaraz/history/preview-mode/) for more information.\n\n## Web API\n\n### Debug Key\n\nThe debug key is used to enable Debug Mode. Refer to [Debug mode](https://developers.cloudflare.com/zaraz/web-api/debug-mode/) for more information.\n\n### E-commerce tracking\n\nToggle this option on to enable the Zaraz E-commerce API. Refer to [E-commerce](https://developers.cloudflare.com/zaraz/web-api/ecommerce/) for more information.\n\n## Compatibility\n\n### Data layer compatibility mode\n\nCloudflare Zaraz offers backwards compatibility with the `dataLayer` function found in tag management software, used to track events and other parameters. You can toggle this option off if you do not need it. Refer to [Data layer compatibility mode](https://developers.cloudflare.com/zaraz/advanced/datalayer-compatibility/) for more information.\n\n### Single Page Application support\n\nWhen you toggle Single Page Application support off, the `pageview` trigger will only work when loading a new web page. When enabled, Zaraz's `pageview` trigger will work every time the URL changes on a single page application. This is also known as virtual page views.\n\n## Privacy\n\nZaraz offers privacy settings you can configure, such as:\n\n* **Remove URL query parameters**: Removes all query parameters from URLs. For example, `https://example.com/?q=hello` becomes `https://example.com/`.\n\n* **Trim IP addresses**: Trims part of the IP address before passing it to server-side loaded tools, to hide it from third-parties.\n\n* **Clean User Agent strings**: Clear sensitive information from the User Agent string by removing information such as operating system version, extensions installed, among others.\n\n* **Remove external referrers**: Hides the page referrers URL if the hostname is different from the website's.\n\n* **Cookie domain**: Choose the domain on which Zaraz will set your tools' cookies. By default, Zaraz will attempt to save the cookies on the highest-level domain possible, meaning that if your website is on `foo.example.com`, the cookies will be saved on `example.com`. You can change this behavior and configure the cookies to be saved on `foo.example.com` by entering a custom domain here.\n\n## Injection\n\n### Auto-inject script\n\nThis option automatically injects the script needed for Zaraz to work on your website. It is turned on by default.\n\nIf you turn this option off, Zaraz will stop automatically injecting its script on your domain. If you still want Zaraz functionality, you will need to add the Zaraz script manually. Refer to [Load Zaraz manually](https://developers.cloudflare.com/zaraz/advanced/load-zaraz-manually/) for more information.\n\n### Iframe injection\n\nWhen toggled on, the Zaraz script will also be injected into `iframe` elements.\n\n## Endpoints\n\nSpecify custom URLs for Zaraz's scripts. You need to use a valid pathname:",
      "language": "unknown"
    },
    {
      "code": "This is an example of a custom pathname to host Zaraz's initialization script:",
      "language": "unknown"
    },
    {
      "code": "### HTTP Events API\n\nRefer to [HTTP Events API](https://developers.cloudflare.com/zaraz/http-events-api/) for more information on this endpoint.\n\n## Other\n\n### Bot Score Threshold\n\nChoose whether to prevent Zaraz from loading on suspected bot-initiated requests. This is based on the request's [bot score](https://developers.cloudflare.com/bots/concepts/bot-score/) which is an estimate, and therefore cannot be guaranteed to be always accurate.\n\nThe options are:\n\n* **Block none**: Load Zaraz for all requests, even if those come from bots.\n* **Block automated only**: Prevent Zaraz from loading on requests from requests in the [**Automated** category](https://developers.cloudflare.com/bots/concepts/bot-score/#bot-groupings).\n* **Block automated and likely automated**: Prevent Zaraz from loading on requests from requests in the [**Automated** and **Likely Automated** category](https://developers.cloudflare.com/bots/concepts/bot-score/#bot-groupings).\n\n### Context Enricher\n\nRefer to the [Context Enricher](https://developers.cloudflare.com/zaraz/advanced/context-enricher/) for more information on this setting.\n\n### Logpush\n\nEnterprise-only\n\nSend Zaraz events logs to an external storage service.\n\nRefer to [Logpush](https://developers.cloudflare.com/zaraz/advanced/logpush/) for more information on this setting.\n\n</page>\n\n<page>\n---\ntitle: Supported tools · Cloudflare Zaraz docs\ndescription: \"Cloudflare Zaraz supports the following third-party tools:\"\nlastUpdated: 2024-12-18T12:07:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/reference/supported-tools/\n  md: https://developers.cloudflare.com/zaraz/reference/supported-tools/index.md\n---\n\nCloudflare Zaraz supports the following third-party tools:\n\n| Name | Category |\n| - | - |\n| Amplitude | Analytics |\n| Bing | Advertising |\n| Branch | Marketing automation |\n| Facebook Pixel | Advertising |\n| Floodlight | Advertising |\n| Google Ads | Advertising |\n| Google Analytics | Analytics |\n| Google Analytics 4 | Analytics |\n| Google Conversion Linker | Miscellaneous |\n| Google Maps - Reserve with Google | Advertising / Miscellaneous |\n| HubSpot | Marketing automation |\n| iHire | Marketing automation / Recruiting |\n| Impact Radius | Marketing automation |\n| Instagram | Embeds |\n| Indeed | Recruiting |\n| LinkedIn Insight | Advertising |\n| Mixpanel | Analytics |\n| Outbrain | Advertising |\n| Pinterest | Advertising |\n| Pinterest Conversions API | Advertising |\n| Pod Sights | Advertising / Analytics |\n| Quora | Advertising |\n| Reddit | Advertising |\n| Segment | Customer Data Platform |\n| Snapchat | Advertising |\n| Snowplow | Analytics |\n| Taboola | Advertising |\n| Tatari | Advertising |\n| TikTok | Advertising |\n| Twitter Pixel | Advertising / Embeds |\n| Upward | Recruiting |\n| ZipRecruiter | Recruiting |\n\nFor any other tool, use the custom integrations below:\n\n| Name | Category |\n| - | - |\n| Custom HTML | Custom |\n| Custom Image | Custom |\n| HTTP Request | Custom |\n\nRefer to [Add a third-party tool](https://developers.cloudflare.com/zaraz/get-started/) to learn more about this topic.\n\n</page>\n\n<page>\n---\ntitle: Triggers and rules · Cloudflare Zaraz docs\ndescription: Triggers define the conditions under which a tool will start an\n  action. In most cases, your objective will be to create triggers that match\n  specific website events that are relevant to your business. A trigger can be\n  based on an event that happened on your website, like after selecting a button\n  or loading a specific page.\nlastUpdated: 2024-09-24T17:04:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/reference/triggers/\n  md: https://developers.cloudflare.com/zaraz/reference/triggers/index.md\n---\n\nTriggers define the conditions under which [a tool will start an action](https://developers.cloudflare.com/zaraz/custom-actions/). In most cases, your objective will be to create triggers that match specific website events that are relevant to your business. A trigger can be based on an event that happened on your website, like after selecting a button or loading a specific page.\n\nThese website events can be passed to Cloudflare Zaraz in a number of ways. You can use the [Track](https://developers.cloudflare.com/zaraz/web-api/track/) method of the Web API or the [`dataLayer`](https://developers.cloudflare.com/zaraz/advanced/datalayer-compatibility/) call. Alternatively, if you do not want to write code to track events on your website, you can configure triggers to listen to browser-side website events, with different types of rules like click listeners or form submissions.\n\n## Rule types\n\nThe exact composition of the trigger will change depending on the type of rule you choose.\n\n### Match rule\n\nZaraz matches the variable you input in **Variable name** with the text under **Match string**. For a complete list of supported variables, refer to [Properties reference](https://developers.cloudflare.com/zaraz/reference/properties-reference/).\n\n**Trigger example: Match `zaraz.track(\"purchase\")`**\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *Event Name* | *Equals* | `purchase` |\n\nIf you create a trigger with match rules using variables from Page Properties, Cookies, Device Properties, or Miscellaneous categories, you will often want to add a second rule that matches `Pageview`. Otherwise, your trigger will be valid for every other event happening on this page too. Refer to [Create a trigger](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) to learn how to add more than one condition to a trigger.\n\n**Trigger example: All pages under `/blog`**\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *URL pathname* | *Starts with* | `/blog` |\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *Event Name* | *Equals* | `Pageview` |\n\n**Trigger example: All logged in users**\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *Cookie: name:* `isLoggedIn` | *Equals* | `true` |\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *Event Name* | *Equals* | `Pageview` |\n\nRefer to [Properties reference](https://developers.cloudflare.com/zaraz/reference/properties-reference/) for more information on the variables you can use when using Match rule.\n\n### Click listener\n\nTracks clicks in a web page. You can set up click listeners using CSS selectors or XPath expressions. **Wait for actions** (in milliseconds) tells Zaraz to prevent the page from changing for the amount of time specified. This allows all requests triggered by the click listener to reach their destination.\n\nNote\n\nWhen using CSS type rules in triggers, you have to include the CSS selector — for example, the ID (`#`) or the class (`.`) symbols. Otherwise, the click listener will not work.\n\n**Trigger example for CSS selector:**\n\n| Rule type | Type | Selector | Wait for actions |\n| - | - | - | - |\n| *Click listener* | *CSS* | `#my-button` | `500` |\n\nTo improve the performance of the web page, you can limit a click listener to a specific URL, by combining it with a Match rule. For example, to track button clicks on a specific page you can set up the following rules in a trigger:\n\n| Rule type | Type | Selector | Wait for actions |\n| - | - | - | - |\n| *Click listener* | *CSS* | `#myButton` | `500` |\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *URL pathname* | *Equals* | `/my-page-path` |\n\nIf you need to track a link of an element using CSS selectors - for example, on a clickable button - you have to create a listener for the `href` attribute of the `<a>` tag:\n\n| Rule type | Type | Selector | Wait for actions |\n| - | - | - | - |\n| *Click listener* | *CSS* | `a[href$='/#my-css-selector']` | `500` |\n\nRefer to [**Create a trigger**](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) to learn how to add more than one rule to a trigger.\n\n***\n\n**Trigger example for XPath:**\n\n| Rule type | Type | Selector | Wait for actions |\n| - | - | - | - |\n| *Click listener* | *XPath* | `/html/body//*[contains(text(), 'Add To Cart')]` | `500` |\n\n### Element Visibility\n\nTriggers an action when a CSS selector becomes visible in the screen.\n\n| Rule type | CSS Selector |\n| - | - |\n| *Element Visibility* | `#my-id` |\n\n### Scroll depth\n\nTriggers an action when the users scrolls a predetermined amount of pixels. This can be a fixed amount of pixels or a percentage of the screen.\n\n**Example with pixels**\n\n| Rule type | CSS Selector |\n| - | - |\n| *Scroll Depth* | `100px` |\n\n***\n\n**Example with a percentage of the screen**\n\n| Rule type | CSS Selector |\n| - | - |\n| *Scroll Depth* | `45%` |\n\n### Form submission\n\nTracks form submissions using CSS selectors. Select the **Validate** toggle button to only fire the trigger when the form has no validation errors.\n\n**Trigger example:**\n\n| Rule type | CSS Selector | Validate |\n| - | - | - |\n| *Form submission* | `#my-form` | Toggle on or off |\n\nTo improve the performance of the web page, you can limit a Form submission trigger to a specific URL, by combining it with a Match rule. For example, to track a form on a specific page you can set up the following rules in a trigger:\n\n| Rule type | CSS Selector | Validate |\n| - | - | - |\n| *Form submission* | `#my-form` | Toggle on or off |\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *URL pathname* | *Equals* | `/my-page-path` |\n\nRefer to [**Create a trigger**](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) to learn how to add more than one condition to a trigger.\n\n### Timer\n\nSet up a timer that will fire the trigger after each **Interval**. Set your interval time in milliseconds. In **Limit** specify the number of times the interval will run, causing the trigger to fire. If you do not specify a limit, the timer will repeat for as long as the page is on display.\n\n**Trigger example:**\n\n| Rule type | Interval | Limit |\n| - | - | - |\n| *Timer* | `5000` | `1` |\n\nThe above Timer will fire once, after five seconds. To improve the performance of a web page, you can limit a Timer trigger to a specific URL, by combining it with a Match rule. For example, to set up a timer on a specific page you can set up the following rules in a trigger:\n\n| Rule type | Interval | Limit |\n| - | - | - |\n| *Timer* | `5000` | `1` |\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *URL pathname* | *Equals* | `/my-page-path` |\n\nRefer to [**Create a trigger**](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) to learn how to add more than one condition to a trigger.\n\n</page>\n\n<page>\n---\ntitle: Create a variable · Cloudflare Zaraz docs\ndescription: Variables are reusable blocks of information. They allow you to\n  have one source of data you can reuse across tools and triggers in the\n  dashboard. You can then update this data in a single place.\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/variables/create-variables/\n  md: https://developers.cloudflare.com/zaraz/variables/create-variables/index.md\n---\n\nVariables are reusable blocks of information. They allow you to have one source of data you can reuse across tools and triggers in the dashboard. You can then update this data in a single place.\n\nFor example, instead of typing a specific user ID in multiple fields, you can create a variable with that information instead. If there is a change and you have to update the user ID, you just need to update the variable and the change will be reflected across the dashboard.\n\n[Worker Variables](https://developers.cloudflare.com/zaraz/variables/worker-variables/) are a special type of variable that generates value dynamically.\n\n## Create a new variable\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration** > **Variables**.\n\n3. Select **Create variable**, and give it a name.\n\n4. In **Variable type** select between `String`, `Masked variable` or `Worker` from the drop-down menu. Use `Masked variable` when you have a private value that you do not want to share, such as an API token.\n\n5. In **Variable value** enter the value of your variable.\n\n6. Select **Save**.\n\nYour variable is now ready to be used with tools and triggers.\n\n## Next steps\n\nRefer to [Add a third-party tool](https://developers.cloudflare.com/zaraz/get-started/) and [Create a trigger](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/) for more information on how to add a variable to tools and triggers.\n\nIf you need to edit or delete variables, refer to [Edit variables](https://developers.cloudflare.com/zaraz/variables/edit-variables/).\n\n</page>\n\n<page>\n---\ntitle: Edit a variable · Cloudflare Zaraz docs\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/variables/edit-variables/\n  md: https://developers.cloudflare.com/zaraz/variables/edit-variables/index.md\n---\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration** > **Variables**.\n\n3. Locate the variable you want to edit, and select **Edit** to make your changes.\n\n4. Select **Save** to save your edits.\n\n## Delete a variable\n\nImportant\n\nYou cannot delete a variable being used in tools or triggers.\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Go to **Tools Configuration** > **Third-party tools**.\n\n3. Locate any tools using the variable, and delete the variable from those tools.\n\n4. Select **Zaraz** > **Tools Configuration** > **Triggers**.\n\n5. Locate all the triggers using the variable, and delete the variable from those triggers.\n\n6. Navigate to **Zaraz** > **Tools Configuration** > **Variables**.\n\n7. Locate the variable you want to delete, and select **Delete**.\n\n</page>\n\n<page>\n---\ntitle: Worker Variables · Cloudflare Zaraz docs\ndescription: \"Zaraz Worker Variables are a powerful type of variable that you\n  can configure and then use in your actions and triggers. Unlike string and\n  masked variables, Worker Variables are dynamic. This means you can use a\n  Cloudflare Worker to determine the value of the variable, allowing you to use\n  them for countless purposes. For example:\"\nlastUpdated: 2025-09-23T13:15:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/variables/worker-variables/\n  md: https://developers.cloudflare.com/zaraz/variables/worker-variables/index.md\n---\n\nZaraz Worker Variables are a powerful type of variable that you can configure and then use in your actions and triggers. Unlike string and masked variables, Worker Variables are dynamic. This means you can use a Cloudflare Worker to determine the value of the variable, allowing you to use them for countless purposes. For example:\n\n1. A Worker Variable that calculates the sum of all products in the cart\n2. A Worker Variable that takes a cookie, makes a request to your backend, and returns the User ID\n3. A Worker Variable that hashes a value before sending it to a third-party vendor\n\n## Creating a Worker\n\nTo use a Worker Variable, you first need to create a new Cloudflare Worker. You can do this through the Cloudflare dashboard or by using [Wrangler](https://developers.cloudflare.com/workers/get-started/guide/).\n\nTo create a new Worker in the Cloudflare dashboard:\n\n1. In the Cloudflare dashboard, go to the **Workers and Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select **Create application**.\n\n3. Give a name to your Worker and select **Deploy**.\n\n4. Select **Edit code**.\n\nYou have now created a basic Worker that responds with \"Hello world.\" If you use this Worker as a Variable, your Variable will always output \"Hello world.\" The response body coming from your Worker will be the value of your Worker Variable. To make this Worker useful, you will usually want to use information coming from Zaraz, which is known as the Zaraz Context.\n\nZaraz forwards the Zaraz Context object to your Worker as a JSON payload with a POST request. You can access any property like this:",
      "language": "unknown"
    },
    {
      "code": "Keep reading for more complete examples of different use cases or refer to [Zaraz Context](https://developers.cloudflare.com/zaraz/reference/context/).\n\n## Configuring a Worker Variable\n\nOnce your Worker is published, configuring a Worker Variable is easy.\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Select the domain for which you want to configure variables.\n\n3. Select the **Variables** tab.\n\n4. Select **Create variable**.\n\n5. Give your variable a name, choose **Worker** as the Variable type, and select your newly created Worker.\n\n6. Save your variable.\n\n## Using your Worker Variable\n\nNow that your Worker Variable is configured, you can use it in your actions and triggers.\n\nTo use your Worker Variable:\n\n1. In the Cloudflare dashboard, go to the **Tag setup** page.\n\n   [Go to **Tag setup**](https://dash.cloudflare.com/?to=/:account/tag-management/zaraz)\n\n2. Select the domain for which you want to configure variables.\n\n3. Select **Edit** next to a tool that you have already configured.\n\n4. Select an action or add a new one.\n\n5. Select the plus sign at the right of the text fields.\n\n6. Select your Worker Variable from the list.\n\n## Example Worker Variables\n\n### Calculates the sum of all products in the cart\n\nAssuming we are sending a list of products in a cart, like this:",
      "language": "unknown"
    },
    {
      "code": "Calculating the sum can be done like this:",
      "language": "unknown"
    },
    {
      "code": "### Match a cookie with a user in your backend\n\nZaraz exposes all cookies automatically under the `system.cookies` object, so they are always available. Accessing the cookie and using it to query your backend might look like this:",
      "language": "unknown"
    },
    {
      "code": "### Hash a value before sending it to a third-party vendor\n\nAssuming you're sending a value that your want to hash, for example, an email address:",
      "language": "unknown"
    },
    {
      "code": "You can access this property and hash it like this:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Debug mode · Cloudflare Zaraz docs\ndescription: >-\n  Zaraz offers a debug mode to troubleshoot the events and triggers systems. To\n  activate debug mode you need to create a special debug cookie (zarazDebug)\n  containing your debug key.\n\n  You can set this cookie manually or via the zaraz.debug helper function\n  available in your console.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/web-api/debug-mode/\n  md: https://developers.cloudflare.com/zaraz/web-api/debug-mode/index.md\n---\n\nZaraz offers a debug mode to troubleshoot the events and triggers systems. To activate debug mode you need to create a special debug cookie (`zarazDebug`) containing your debug key. You can set this cookie manually or via the `zaraz.debug` helper function available in your console.\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Copy your **Debug Key**.\n\n3. Open a web browser and access its Developer Tools. For example, to access Developer Tools in Google Chrome, select **View** > **Developer** > **Developer Tools**.\n\n4. Select the **Console** pane and enter the following command to create a debug cookie:",
      "language": "unknown"
    },
    {
      "code": "Zaraz’s debug mode is now enabled. A pop-up window will show up with the debugger information. To exit debug mode, remove the cookie by typing `zaraz.debug()` in the console pane of the browser.\n\n</page>\n\n<page>\n---\ntitle: zaraz.ecommerce · Cloudflare Zaraz docs\ndescription: You can use zaraz.ecommerce() anywhere inside the <body> tag of a page.\nlastUpdated: 2025-09-05T07:54:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/web-api/ecommerce/\n  md: https://developers.cloudflare.com/zaraz/web-api/ecommerce/index.md\n---\n\nYou can use `zaraz.ecommerce()` anywhere inside the `<body>` tag of a page.\n\n`zaraz.ecommerce()` allows you to track common events of the e-commerce user journey, such as when a user adds a product to cart, starts the checkout funnel or completes an order on your website. It is an `async` function, so you can choose to `await` it if you would like to make sure it completed before running other code.\n\nTo start using `zaraz.ecommerce()`, you first need to enable it in your Zaraz account and enable the E-commerce action for the tool you plan to send e-commerce data to. Then, add `zaraz.ecommerce()` to the `<body>` element of your website.\n\nRight now, Zaraz e-commerce is compatible with Google Analytics 3 (Universal Analytics), Google Analytics 4, Bing, Facebook Pixel, Amplitude, Pinterest Conversions API, TikTok and Branch.\n\nNote\n\nIt is crucial you follow the guidelines set by third-party tools, such as Google Analytics 3 and Google Analytics 4, to ensure compliance with their limitations on payload size and length. For instance, if your `Order Completed` call includes a large number of products, it may exceed the limitations of the selected tool.\n\n## Enable e-commerce tracking\n\nYou do not need to map e-commerce events to triggers. Zaraz automatically forwards data using the right format to the tools with e-commerce support.\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/tag-management/settings)\n\n2. Enable **E-commerce tracking**.\n\n3. Select **Save**.\n\n4. Go to **Zaraz** > **Tools Configuration** > **Third-party tools**.\n\n5. Locate the tool you want to use with e-commerce tracking and select **Edit**.\n\n6. Select **Settings**.\n\n7. Under **Advanced**, enable **E-commerce tracking**.\n\n8. Select **Save**.\n\nE-commerce tracking is now enabled. If you add additional tools to your website that you want to use with `zaraz.ecommerce()`, you will need to repeat steps 6-9 for that tool.\n\n## Add e-commerce tracking to your website\n\nAfter enabling e-commerce tracking on your Zaraz dashboard, you need to add `zaraz.ecommerce()` to the `<body>` element of your website:",
      "language": "unknown"
    },
    {
      "code": "To create a complete tracking event, you need to add an event and one or more parameters. Below you will find a list of events and parameters Zaraz supports, as well as code examples for different types of events.\n\n## List of supported events\n\n* `Product List Viewed`\n* `Products Searched`\n* `Product Clicked`\n* `Product Added`\n* `Product Added to Wishlist`\n* `Product Removed`\n* `Product Viewed`\n* `Cart Viewed`\n* `Checkout Started`\n* `Checkout Step Viewed`\n* `Checkout Step Completed`\n* `Payment Info Entered`\n* `Order Completed`\n* `Order Updated`\n* `Order Refunded`\n* `Order Cancelled`\n* `Clicked Promotion`\n* `Viewed Promotion`\n* `Shipping Info Entered`\n\n## List of supported parameters:\n\n| Parameter | Type | Description |\n| - | - | - |\n| `product_id` | String | Product ID. |\n| `sku` | String | Product SKU number. |\n| `category` | String | Product category. |\n| `name` | String | Product name. |\n| `brand` | String | Product brand name. |\n| `variant` | String | Product variant (depending on the product, it could be product color, size, etc.). |\n| `price` | Number | Product price. |\n| `quantity` | Number | Product number of units. |\n| `coupon` | String | Name or serial number of coupon code associated with product. |\n| `position` | Number | Product position in the product list (for example, `2`). |\n| `products` | Array | List of products displayed in the product list. |\n| `products.[].product_id` | String | Product ID displayed on the product list. |\n| `products.[].sku` | String | Product SKU displayed on the product list. |\n| `products.[].category` | String | Product category displayed on the product list. |\n| `products.[].name` | String | Product name displayed on the product list. |\n| `products.[].brand` | String | Product brand displayed on the product list. |\n| `products.[].variant` | String | Product variant displayed on the product list. |\n| `products.[].price` | Number | Price of the product displayed on the product list. |\n| `products.[].quantity` | Number | Quantity of a product displayed on the product list. |\n| `products.[].coupon` | String | Name or serial number of coupon code associated with product displayed on the product list. |\n| `products.[].position` | Number | Product position in the product list (for example, `2`). |\n| `checkout_id` | String | Checkout ID. |\n| `order_id` | String | Internal ID of order/transaction/purchase. |\n| `affiliation` | String | Name of affiliate from which the order occurred. |\n| `total` | Number | Revenue with discounts and coupons added in. |\n| `revenue` | Number | Revenue excluding shipping and tax. |\n| `shipping` | Number | Cost of shipping for transaction. |\n| `tax` | Number | Total tax for transaction. |\n| `discount` | Number | Total discount for transaction. |\n| `coupon` | String | Name or serial number of coupon redeemed on the transaction-level. |\n| `currency` | String | Currency code for the transaction. |\n| `value` | Number | Total value of the product after quantity. |\n| `creative` | String | Label for creative asset of promotion being tracked. |\n| `query` | String | Product search term. |\n| `step` | Number | The Number of the checkout step in the checkout process. |\n| `payment_type` | String | The type of payment used. |\n\n## Event code examples\n\n### Product viewed",
      "language": "unknown"
    },
    {
      "code": "### Product List Viewed",
      "language": "unknown"
    },
    {
      "code": "### Product added",
      "language": "unknown"
    },
    {
      "code": "### Checkout Step Viewed",
      "language": "unknown"
    },
    {
      "code": "### Order completed",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: zaraz.set · Cloudflare Zaraz docs\ndescription: \"You can use zaraz.set() anywhere inside the <body> tag of a page:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/web-api/set/\n  md: https://developers.cloudflare.com/zaraz/web-api/set/index.md\n---\n\nYou can use `zaraz.set()` anywhere inside the `<body>` tag of a page:",
      "language": "unknown"
    },
    {
      "code": "Set is useful if you want to make a variable available in all your events without manually setting it every time you are using `zaraz.track()`. For the purpose of this example, assume users in your system have a unique identifier that you want to send to your tools. You might have many `zaraz.track()` calls all sharing this one parameter:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Here, all the events are collecting the `userId` key, and the code for setting that key repeats itself. With `zaraz.set()` you can avoid repetition by setting the key once when the page loads. Zaraz will then attach this key to all future `zaraz.track()` calls.\n\nUsing the above data as the example, if you use `zaraz.set(\"userId\", \"ABC-123\")` once, before the `zaraz.track()` calls, you can remove the `userId` key from all `zaraz.track()` calls.\n\nAnother example:",
      "language": "unknown"
    },
    {
      "code": "Keys that are sent using `zaraz.set()` can be used inside tool actions exactly like keys in the `eventProperties` of `zaraz.track()`. So, the above `product` key is accessible through the Cloudflare dashboard with the variable *Track Property name:*, and setting its name as `product_name`. Zaraz will then replace it with `t-shirt`.\n\n![Example of how to create a variable with the Set method, tracking t-shirts](https://developers.cloudflare.com/_astro/set.CkjK1ovh_e1KsU.webp)\n\nThe `[options]` argument is an optional object and can include a `scope` property that has a string value. This property determines the lifetime of this key, meaning for how long Zaraz should keep attaching it to `zaraz.track()` calls. Allowed values are:\n\n* `page`: To set the key for the context of the current page only.\n* `session`: To make the key last the whole session.\n* `persist`: To save the key across sessions. This is the default mode and uses `localStorage` to save the value.\n\nIn the previous example, `{scope: 'page'}` makes the `product_name` property available to all `zaraz.track()` calls in the current page, but will not affect calls after visitors navigate to other pages.\n\nTo unset a variable, set it to `undefined`. The variable will then be removed from all scopes it was included in, and will not be automatically sent with future `zaraz.track` calls. For example:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: zaraz.track · Cloudflare Zaraz docs\ndescription: You can use zaraz.track() anywhere inside the <body> tag of a page.\nlastUpdated: 2024-09-24T17:04:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/zaraz/web-api/track/\n  md: https://developers.cloudflare.com/zaraz/web-api/track/index.md\n---\n\nYou can use `zaraz.track()` anywhere inside the `<body>` tag of a page.\n\n`zaraz.track()` allows you to track custom events on your website, that might happen in real time. It is an `async` function, so you can choose to `await` it if you would like to make sure it completed before running other code.\n\nExample of user events you might be interested in tracking are successful sign-ups, calls-to-action clicks, or purchases. Common examples for other types of events are tracking the impressions of specific elements on a page, or loading a specific widget.\n\nTo start tracking events, use the `zaraz.track()` function like this:",
      "language": "unknown"
    },
    {
      "code": "The `eventName` parameter is a string, and the `eventProperties` parameter is an optional flat object of additional context you can attach to the event using your own keys of choice. For example, tracking a purchase with the value of 200 USD could look like this:",
      "language": "unknown"
    },
    {
      "code": "Note that the name of the event (`purchase` in the above example), the names of the keys (`value` and `currency`) and the number of keys are customizable by you. You choose what variables to track and how you want to track these variables. However, picking meaningful names will help you when you configure your triggers, because the trigger configuration has to match the events your website is sending.\n\nAfter using `zaraz.track()` in your website, you will usually want to create a trigger based on it, and then use the trigger in an action. Start by [creating a new trigger](https://developers.cloudflare.com/zaraz/custom-actions/create-trigger/), with *Event Name* as your trigger's **Variable name**, and the `eventName` you are tracking in **Match string**. Following the above example, your trigger will look like this:\n\n**Trigger example: Match `zaraz.track(\"purchase\")`**\n\n| Rule type | Variable name | Match operation | Match string |\n| - | - | - | - |\n| *Match rule* | *Event Name* | *Equals* | `purchase` |\n\nIn every tool you want to use this trigger, add an action with this trigger [configured as a firing trigger](https://developers.cloudflare.com/zaraz/custom-actions/). Each action that uses this trigger can access the `eventProperties` you have sent. In the **Action** fields, you can use `{{ client.<KEY_NAME> }}` to get the value of `<KEY_NAME>`. In the above example, Zaraz will replace `{{ client.value }}` with `200`. If your key includes special characters or numbers, surround it with backticks like ``{{ client.`<KEY_NAME>` }}``.\n\nFor more information regarding the properties you can use with `zaraz.track()`, refer to [Properties reference](https://developers.cloudflare.com/zaraz/reference/properties-reference/).\n\n</page>\n\n<page>\n---\ntitle: Connect to 1.1.1.1 using DoH clients · Cloudflare 1.1.1.1 docs\ndescription: Learn how to connect to Cloudflare's 1.1.1.1 using DNS over HTTPS\n  (DoH) clients.\nlastUpdated: 2025-08-13T16:13:28.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/dns-over-https-client/\n  md: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/dns-over-https-client/index.md\n---\n\nSeveral DoH clients are available for connecting to 1.1.1.1.\n\n## Cloudflare WARP client\n\nRefer to [WARP client](https://developers.cloudflare.com/warp-client/) for guidance on WARP modes and get-started information for different [operating systems](https://developers.cloudflare.com/warp-client/get-started/).\n\n## DNSCrypt-Proxy\n\nThe [DNSCrypt-Proxy](https://dnscrypt.info) 2.0+ supports DoH out of the box. It supports both 1.1.1.1 and other services. It also includes more advanced features, such as load balancing and local filtering.\n\n1. [Install DNSCrypt-Proxy](https://github.com/jedisct1/dnscrypt-proxy/wiki/installation).\n\n2. Verify that `dnscrypt-proxy` is installed and the version is 2.0 or later:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. Set up the configuration file using the [official instructions](https://github.com/jedisct1/dnscrypt-proxy/wiki/installation#setting-up-dnscrypt-proxy), and add `cloudflare` and `cloudflare-ipv6` to the server list in `dnscrypt-proxy.toml`:",
      "language": "unknown"
    },
    {
      "code": "4. Make sure that nothing else is running on `localhost:53`, and check that everything works as expected:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "5. Register it as a system service according to the [DNSCrypt-Proxy installation instructions](https://github.com/jedisct1/dnscrypt-proxy/wiki/installation).\n\n</page>\n\n<page>\n---\ntitle: Configure DoH on your browser · Cloudflare 1.1.1.1 docs\ndescription: Several browsers support DNS over HTTPS (DoH), a protocol that\n  encrypts your connection to 1.1.1.1 to protect your DNS queries from privacy\n  intrusions and tampering.\nlastUpdated: 2025-04-30T17:31:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/encrypted-dns-browsers/\n  md: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/encrypted-dns-browsers/index.md\n---\n\nSeveral browsers support DNS over HTTPS (DoH), a protocol that encrypts your connection to 1.1.1.1 to protect your DNS queries from privacy intrusions and tampering.\n\nSome browsers might already have this setting enabled.\n\nNote\n\nTo use 1.1.1.1 For Families, follow the steps below but, instead of choosing the default 1.1.1.1 option, refer to [Set up](https://developers.cloudflare.com/1.1.1.1/setup/#dns-over-https-doh) and specify the URL you want to use.\n\n## Mozilla Firefox\n\n1. Select the menu button > **Settings**.\n2. In the **Privacy & Security** menu, scroll down to the **Enable secure DNS using:** section.\n3. Select **Increased Protection** or **Max Protection**. By default, it will use the **Cloudflare** provider.\n4. If this is not the case, select **Cloudflare** in the **Choose Provider** dropdown.\n\n## Google Chrome\n\n1. Select the three-dot menu in your browser > **Settings**.\n2. Select **Privacy and security** > **Security**.\n3. Scroll down and enable **Use secure DNS**.\n4. Select the **With** option, and from the drop-down menu choose *Cloudflare (1.1.1.1)*.\n\n## Microsoft Edge\n\n1. Select the three-dot menu in your browser > **Settings**.\n2. Select **Privacy, Search, and Services**, and scroll down to **Security**.\n3. Enable **Use secure DNS**.\n4. Select **Choose a service provider**.\n5. Select the **Enter custom provider** drop-down menu and choose *Cloudflare (1.1.1.1)*.\n\n## Brave\n\n1. Select the menu button in your browser > **Settings**.\n2. Select **Privacy and security** > **Security**.\n3. Under **Advanced**, enable **Use secure DNS**.\n4. From the **Select DNS provider** drop-down menu, choose *Cloudflare (1.1.1.1)*.\n\n## Check if the browser is configured correctly\n\nVisit [1.1.1.1 help page](https://one.one.one.one/help) and check if `Using DNS over HTTPS (DoH)` shows `Yes`.\n\n</page>\n\n<page>\n---\ntitle: Make API requests to 1.1.1.1 over DoH · Cloudflare 1.1.1.1 docs\ndescription: \"Cloudflare offers a DNS over HTTPS resolver at:\"\nlastUpdated: 2025-04-30T17:31:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/make-api-requests/\n  md: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/make-api-requests/index.md\n---\n\nCloudflare offers a DNS over HTTPS resolver at:",
      "language": "unknown"
    },
    {
      "code": "## HTTP method\n\nCloudflare's DNS-over-HTTPS (DOH) endpoint supports `POST` and `GET` for DNS wireformat, and `GET` for JSON format.\n\nWhen making requests using `POST`, the DNS query is included as the message body of the HTTP request, and the MIME type (`application/dns-message`) is sent in the `Content-Type` request header. Cloudflare will use the message body of the HTTP request as sent by the client, so the message body should not be encoded.\n\nWhen making requests using `GET`, the DNS query is encoded into the URL.\n\n## Valid MIME types\n\nIf you use JSON format, set `application/dns-json`, and if you use DNS wireformat, use `application/dns-message`.\n\nRefer to [DNS wireformat](https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/make-api-requests/dns-wireformat/) and [JSON](https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/make-api-requests/dns-json/) for cURL examples.\n\n## Send multiple questions in a query\n\nSending more than one question when making requests depends on the HTTP version used, as each DNS query maps to exactly one HTTP request. HTTP/2 and HTTP/3 have multiplexing capabilities, allowing multiple requests to start concurrently. HTTP/2 is, in fact, the minimum recommended version of HTTP for use with DNS over HTTPS (DoH). This behavior is not specific to 1.1.1.1, but rather how DoH operates.\n\nYou can learn more about how DoH works in RFC 8484, more specifically [the HTTP layer requirements](https://datatracker.ietf.org/doc/html/rfc8484#section-5.2).\n\nExample request:",
      "language": "unknown"
    },
    {
      "code": "## Authentication\n\nNo authentication is required to send requests to this API.\n\n## Supported TLS versions\n\nCloudflare's DNS over HTTPS resolver supports TLS 1.2 and TLS 1.3.\n\n## Return codes\n\n| HTTP Status | Meaning |\n| - | - |\n| `400` | DNS query not specified or too small. |\n| `413` | DNS query is larger than maximum allowed DNS message size. |\n| `415` | Unsupported content type. |\n| `504` | Resolver timeout while waiting for the query response. |\n\n</page>\n\n<page>\n---\ntitle: Pay Per Crawl FAQ · Cloudflare AI Crawl Control docs\ndescription: No. Pay per crawl allows you to configure different actions (Block,\n  Charge, or Allow) for each crawler, but you can only set a single price that\n  applies to all crawlers configured with the \"Charge\" option.\nlastUpdated: 2025-12-10T19:50:40.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/faq/\n  md: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/faq/index.md\n---\n\n## Frequently asked questions for site owners\n\n### Can I set different prices for different AI crawlers?\n\nNo. Pay per crawl allows you to configure different actions (Block, Charge, or Allow) for each crawler, but you can only set a single price that applies to all crawlers configured with the \"Charge\" option.\n\n## Frequently asked questions for AI bot operators\n\n### Will I be charged for re-crawling the same page?\n\nYes. Every time your AI crawler accesses content on a website protected with pay per crawl, it will incur the cost set by the site owner. You should implement mechanisms within your crawler to track expenditure and enforce any spending limits you want to set.\n\nSome paths are always free to crawl. These paths are: `/robots.txt`, `/sitemap.xml`, `/security.txt`, `/.well-known/security.txt`, `/crawlers.json`.\n\n### Am I charged for error responses?\n\nNo. Charging events are only triggered for successful HTTP response codes. Error responses are not billed, even if you have sent the `crawler-exact-price` or `crawler-max-price` headers.\n\n### What user agent should I use?\n\nUse the standard user agents associated with your AI crawler that you have onboarded to Cloudflare and identified through Web Bot Auth.\n\n</page>\n\n<page>\n---\ntitle: Use pay per crawl as an AI owner · Cloudflare AI Crawl Control docs\nlastUpdated: 2025-09-11T12:59:39.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/\n  md: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/index.md\n---\n\n* [Set up your account](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/set-up-cloudflare-account/)\n* [Verify your AI crawler](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/verify-ai-crawler/)\n* [Connect Stripe](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/connect-to-stripe/)\n* [Discover payable content](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/discover-payable-content/)\n* [Crawl pages](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/crawl-pages/)\n* [Error codes](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/error-codes/)\n\n</page>\n\n<page>\n---\ntitle: Use pay per crawl as a site owner · Cloudflare AI Crawl Control docs\nlastUpdated: 2025-09-11T12:59:39.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/\n  md: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/index.md\n---\n\n* [Enable in account settings](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/enable-in-account-settings/)\n* [Set a pay per crawl price](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/set-a-pay-per-crawl-price/)\n* [Select crawlers to charge](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/select-crawlers-to-charge/)\n* [Monitor activity](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/monitor-activity/)\n* [Manage payouts](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/manage-payouts/)\n* [Advanced configuration](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/advanced-configuration/)\n\n</page>\n\n<page>\n---\ntitle: What is Pay Per Crawl? · Cloudflare AI Crawl Control docs\ndescription: AI crawlers often consume vast amounts of web content. Some provide\n  mutual benefit to content owners by indexing content for search engines, but\n  others engage in activities such as content scraping without permission.\nlastUpdated: 2025-09-11T12:59:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/what-is-pay-per-crawl/\n  md: https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/what-is-pay-per-crawl/index.md\n---\n\nPay per crawl closed beta\n\nPay per crawl is currently in closed beta.\n\nTo find out how to join the beta program, reach out to us at [Pay per crawl signup](http://www.cloudflare.com/paypercrawl-signup/), or contact your account executive if you are an existing Enterprise customer.\n\nTo learn more about pay per crawl, refer to Cloudflare blog: [Introducing pay per crawl: enabling content owners to charge AI crawlers for access](https://blog.cloudflare.com/introducing-pay-per-crawl/).\n\nAI crawlers often consume vast amounts of web content. Some provide mutual benefit to content owners by indexing content for search engines, but others engage in activities such as content scraping without permission.\n\nThe resulting landscape leaves content owners with limited options for managing AI crawlers or receiving compensation for automated access to their intellectual property.\n\n## What is Pay Per Crawl?\n\nPay per crawl is a feature of AI Crawl Control that enables site owners to control and monetize AI crawler access to content by setting a price per zone.\n\nEach time an AI crawler requests content, they either present payment intent via request headers for successful `HTTP 200` access, or receive an `HTTP 402 Payment Required` response with pricing. Cloudflare acts as the Merchant of Record for pay per crawl and also provides the underlying technical infrastructure.\n\nNote\n\nIf you block an AI crawler from a zone via either of Cloudflare's [WAF](https://developers.cloudflare.com/waf/) or [Bot Management](https://developers.cloudflare.com/bots/get-started/bot-management/) products, those products' rulesets will override pay per crawl's \"charge\" feature, and the blocked crawler will not have access to the zone.\n\nUltimately, pay per crawl enables:\n\n* Site owners to take control of their content, and charge a fee every time an AI crawler accesses a page in their [Cloudflare zone](https://developers.cloudflare.com/fundamentals/concepts/accounts-and-zones/#zones). For more details, refer to [use pay per crawl as a site owner](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/).\n* AI crawler owners to pay to access content on sites protected by pay per crawl. For more details, refer to [use pay per crawl as an AI owner](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/).\n\n![Pay per crawl components](https://developers.cloudflare.com/_astro/ai-crawl-control-pay-per-crawl-diagram.51Dvd0Od_1abKR5.webp)\n\n## Additional resources\n\nRefer to the following resources.\n\n* [Use pay per crawl as a site owner](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-site-owner/enable-in-account-settings/).\n* [Use pay per crawl as an AI owner](https://developers.cloudflare.com/ai-crawl-control/features/pay-per-crawl/use-pay-per-crawl-as-ai-owner/set-up-cloudflare-account/).\n* [AI Crawl Control with Cloudflare WAF](https://developers.cloudflare.com/ai-crawl-control/configuration/ai-crawl-control-with-waf/).\n* [AI Crawl Control with Cloudflare Bots](https://developers.cloudflare.com/ai-crawl-control/configuration/ai-crawl-control-with-bots/).\n\n</page>\n\n<page>\n---\ntitle: Set up Data Loss Prevention (DLP) · Cloudflare AI Gateway docs\ndescription: Add Data Loss Prevention (DLP) to any AI Gateway to start scanning\n  AI prompts and responses for sensitive data.\nlastUpdated: 2025-10-22T21:11:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/features/dlp/set-up-dlp/\n  md: https://developers.cloudflare.com/ai-gateway/features/dlp/set-up-dlp/index.md\n---\n\nAdd Data Loss Prevention (DLP) to any AI Gateway to start scanning AI prompts and responses for sensitive data.\n\n## Prerequisites\n\n* An existing [AI Gateway](https://developers.cloudflare.com/ai-gateway/get-started/)\n\n## Enable DLP for AI Gateway\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com/) and select your account.\n2. Go to **AI** > **AI Gateway**.\n3. Select a gateway where you want to enable DLP.\n4. Go to the **Firewall** tab.\n5. Toggle **Data Loss Prevention (DLP)** to **On**.\n\n## Add DLP policies\n\nAfter enabling DLP, you can create policies to define how sensitive data should be handled:\n\n1. Under the DLP section, click **Add Policy**.\n\n2. Configure the following fields for each policy:\n\n   * **Policy ID**: Enter a unique name for this policy (e.g., \"Block-PII-Requests\")\n\n   * **DLP Profiles**: Select the DLP profiles to check against. AI requests/responses will be checked against each of the selected profiles. Available profiles include:\n\n     * **Financial Information** - Credit cards, bank accounts, routing numbers\n     * **Personal Identifiable Information (PII)** - Names, addresses, phone numbers\n     * **Government Identifiers** - SSNs, passport numbers, driver's licenses\n     * **Healthcare Information** - Medical record numbers, patient data\n     * **Custom Profiles** - Organization-specific data patterns\n\n     Note\n\n     DLP profiles can be created and managed in the [Zero Trust DLP dashboard](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/dlp-profiles/).\n\n   * **Action**: Choose the action to take when any of the selected profiles match:\n\n     * **Flag** - Record the detection for audit purposes without blocking\n     * **Block** - Prevent the request/response from proceeding\n\n   * **Check**: Select what to scan:\n\n     * **Request** - Scan user prompts sent to AI providers\n     * **Response** - Scan AI model responses before returning to users\n     * **Both** - Scan both requests and responses\n\n3. Click **Save** to save your policy configuration.\n\n## Manage DLP policies\n\nYou can create multiple DLP policies with different configurations:\n\n* **Add multiple policies**: Click **Add Policy** to create additional policies with different profile combinations or actions\n* **Enable/disable policies**: Use the toggle next to each policy to individually enable or disable them without deleting the configuration\n* **Edit policies**: Click on any existing policy to modify its settings\n* **Save changes**: Always click **Save** after making any changes to apply them\n\n## Test your configuration\n\nAfter configuring DLP settings:\n\n1. Make a test AI request through your gateway that contains sample sensitive data.\n2. Check the **AI Gateway Logs** to verify DLP scanning is working.\n3. Review the detection results and adjust profiles or actions as needed.\n\n## Monitor DLP events\n\n### Viewing DLP logs in AI Gateway\n\nDLP events are integrated into your AI Gateway logs:\n\n1. Go to **AI** > **AI Gateway** > your gateway > **Logs**.\n\n2. Click on any log entry to view detailed information. For requests where DLP policies were triggered, additional details are included:\n\n   * **DLP Action Taken**: Shows whether the action was \"Flag\" or \"Block\"\n\n   * **DLP Policies Matched**: Detailed information about each policy that matched, including:\n\n     * Which DLP profiles triggered within each policy\n     * Whether the match occurred in the request or response\n     * Specific entries that matched within each DLP profile\n\n### Filter DLP events\n\nTo view only DLP-related requests:\n\n1. On the **Logs** tab, click **Add Filter**.\n\n2. Select **DLP Action** from the filter options.\n\n3. Choose to filter by:\n\n   * **FLAG** - Show only requests where sensitive data was flagged\n   * **BLOCK** - Show only requests that were blocked due to DLP policies\n\n## Error handling\n\nWhen DLP policies are triggered, your application will receive additional information through response headers and error codes.\n\n### DLP response header\n\nWhen a request matches DLP policies (whether flagged or blocked), an additional `cf-aig-dlp` header is returned containing detailed information about the match:\n\n#### Header schema",
      "language": "unknown"
    },
    {
      "code": "#### Example header value",
      "language": "unknown"
    },
    {
      "code": "Use this header to programmatically detect which DLP profiles and entries were matched, which policies triggered, and whether the match occurred in the request or response.\n\n### Error codes for blocked requests\n\nWhen DLP blocks a request, your application will receive structured error responses:\n\n* **Request blocked by DLP**\n\n  * `\"code\": 2029`\n  * `\"message\": \"Request content blocked due to DLP policy violations\"`\n\n* **Response blocked by DLP**\n\n  * `\"code\": 2030`\n  * `\"message\": \"Response content blocked due to DLP policy violations\"`\n\nHandle these errors in your application:",
      "language": "unknown"
    },
    {
      "code": "## Best practices\n\n* **Start with flagging**: Begin with \"Flag\" actions to understand what data is being detected before implementing blocking\n* **Tune confidence levels**: Adjust detection sensitivity based on your false positive tolerance\n* **Use appropriate profiles**: Select DLP profiles that match your data protection requirements\n* **Monitor regularly**: Review DLP events to ensure policies are working as expected\n* **Test thoroughly**: Validate DLP behavior with sample sensitive data before production deployment\n\n## Troubleshooting\n\n### DLP not triggering\n\n* Verify DLP toggle is enabled for your gateway\n* Ensure selected DLP profiles are appropriate for your test data\n* Confirm confidence levels aren't set too high\n\n### Unexpected blocking\n\n* Review DLP logs to see which profiles triggered\n* Consider lowering confidence levels for problematic profiles\n* Test with different sample data to understand detection patterns\n* Adjust profile selections if needed\n\nFor additional support with DLP configuration, refer to the [Cloudflare Data Loss Prevention documentation](https://developers.cloudflare.com/cloudflare-one/data-loss-prevention/) or contact your Cloudflare support team.\n\n</page>\n\n<page>\n---\ntitle: JSON Configuration · Cloudflare AI Gateway docs\ndescription: \"Instead of using the dashboard editor UI to define the route\n  graph, you can do it using the REST API. Routes are internally represented\n  using a simple JSON structure:\"\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/features/dynamic-routing/json-configuration/\n  md: https://developers.cloudflare.com/ai-gateway/features/dynamic-routing/json-configuration/index.md\n---\n\nInstead of using the **dashboard editor UI** to define the route graph, you can do it using the REST API. Routes are internally represented using a simple JSON structure:",
      "language": "unknown"
    },
    {
      "code": "## Supported elements\n\nDynamic routing supports several types of elements that you can combine to create sophisticated routing flows. Each element has specific inputs, outputs, and configuration options.\n\n### Start Element\n\nMarks the beginning of a route. Every route must start with a Start element.\n\n* **Inputs**: None\n* **Outputs**:\n  * `next`: Forwards the unchanged request to the next element",
      "language": "unknown"
    },
    {
      "code": "### Conditional Element (If/Else)\n\nEvaluates a condition based on request parameters and routes the request accordingly.\n\n* **Inputs**: Request\n\n* **Outputs**:\n\n  * `true`: Forwards request to provided element if condition evaluates to true\n  * `false`: Forwards request to provided element if condition evaluates to false",
      "language": "unknown"
    },
    {
      "code": "### Percentage Split\n\nRoutes requests probabilistically across multiple outputs, useful for A/B testing and gradual rollouts.\n\n* **Inputs**: Request\n\n* **Outputs**: Up to 5 named percentage outputs, plus an optional `else` fallback\n\n  * Each output has a fractional probability (must total 100%)\n  * `else` output handles remaining percentage if other branches don't sum to 100%",
      "language": "unknown"
    },
    {
      "code": "### Rate/Budget Limit\n\nApply limits based on request metadata. Supports both count-based and cost-based limits.\n\n* **Inputs**: Request\n\n* **Outputs**:\n\n  * `success`: Forwards request to provided element if request is not rate limited\n  * `fallback`: Optional output for rate-limited requests (route terminates if not provided)\n\n**Properties**:\n\n* `limitType`: \"count\" or \"cost\"\n* `key`: Request field to use for rate limiting (e.g. \"metadata.user\\_id\")\n* `limit`: Maximum allowed requests/cost\n* `interval`: Time window in seconds\n* `technique`: \"sliding\" or \"fixed\" window",
      "language": "unknown"
    },
    {
      "code": "### Model\n\nExecutes inference using a specified model and provider with configurable timeout and retry settings.\n\n* **Inputs**: Request\n\n* **Outputs**:\n\n  * `success`: Forwards request to provided element if model successfully starts streaming a response\n  * `fallback`: Optional output if model fails after all retries or times out\n\n**Properties**:\n\n* `provider`: AI provider (e.g. \"openai\", \"anthropic\")\n* `model`: Specific model name\n* `timeout`: Request timeout in milliseconds\n* `retries`: Number of retry attempts",
      "language": "unknown"
    },
    {
      "code": "### End element\n\nMarks the end of a route. Returns the last successful model response, or an error if no model response was generated.\n\n* **Inputs**: Request\n* **Outputs**: None",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Using a dynamic route · Cloudflare AI Gateway docs\ndescription: The response from a dynamic route is the same as the response from\n  a model. There is additional metadata used to notify the model and provider\n  used, you can check the following headers\nlastUpdated: 2025-10-30T19:08:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/features/dynamic-routing/usage/\n  md: https://developers.cloudflare.com/ai-gateway/features/dynamic-routing/usage/index.md\n---\n\nWarning\n\nEnsure your gateway has [authentication](https://developers.cloudflare.com/ai-gateway/configuration/authentication/) turned, on and you have your upstream providers keys stored with [BYOK](https://developers.cloudflare.com/ai-gateway/configuration/bring-your-own-keys/).\n\n## Examples\n\n### OpenAI SDK",
      "language": "unknown"
    },
    {
      "code": "### Fetch",
      "language": "unknown"
    },
    {
      "code": "### Workers",
      "language": "unknown"
    },
    {
      "code": "## Response Metadata\n\nThe response from a dynamic route is the same as the response from a model. There is additional metadata used to notify the model and provider used, you can check the following headers\n\n* `cf-aig-model` - The model used\n* `cf-aig-provider` - The slug of provider used\n\n</page>\n\n<page>\n---\ntitle: Set up Guardrails · Cloudflare AI Gateway docs\ndescription: Add Guardrails to any gateway to start evaluating and potentially\n  modifying responses.\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/features/guardrails/set-up-guardrail/\n  md: https://developers.cloudflare.com/ai-gateway/features/guardrails/set-up-guardrail/index.md\n---\n\nAdd Guardrails to any gateway to start evaluating and potentially modifying responses.\n\n1. Log into the [Cloudflare dashboard](https://dash.cloudflare.com/) and select your account.\n\n2. Go to **AI** > **AI Gateway**.\n\n3. Select a gateway.\n\n4. Go to **Guardrails**.\n\n5. Switch the toggle to **On**.\n\n6. To customize categories, select **Change** > **Configure specific categories**.\n\n7. Update your choices for how Guardrails works on specific prompts or responses (**Flag**, **Ignore**, **Block**).\n\n   * For **Prompts**: Guardrails will evaluate and transform incoming prompts based on your security policies.\n   * For **Responses**: Guardrails will inspect the model's responses to ensure they meet your content and formatting guidelines.\n\n8. Select **Save**.\n\nUsage considerations\n\nFor additional details about how to implement Guardrails, refer to [Usage considerations](https://developers.cloudflare.com/ai-gateway/features/guardrails/usage-considerations/).\n\n## Viewing Guardrail results in Logs\n\nAfter enabling Guardrails, you can monitor results through **AI Gateway Logs** in the Cloudflare dashboard. Guardrail logs are marked with a **green shield icon**, and each logged request includes an `eventID`, which links to its corresponding Guardrail evaluation log(s) for easy tracking. Logs are generated for all requests, including those that **pass** Guardrail checks.\n\n## Error handling and blocked requests\n\nWhen a request is blocked by guardrails, you will receive a structured error response. These indicate whether the issue occurred with the prompt or the model response. Use error codes to differentiate between prompt versus response violations.\n\n* **Prompt blocked**\n\n  * `\"code\": 2016`\n  * `\"message\": \"Prompt blocked due to security configurations\"`\n\n* **Response blocked**\n\n  * `\"code\": 2017`\n  * `\"message\": \"Response blocked due to security configurations\"`\n\nYou should catch these errors in your application logic and implement error handling accordingly.\n\nFor example, when using [Workers AI with a binding](https://developers.cloudflare.com/ai-gateway/integrations/aig-workers-ai-binding/):",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Supported model types · Cloudflare AI Gateway docs\ndescription: \"AI Gateway's Guardrails detects the type of AI model being used\n  and applies safety checks accordingly:\"\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/features/guardrails/supported-model-types/\n  md: https://developers.cloudflare.com/ai-gateway/features/guardrails/supported-model-types/index.md\n---\n\nAI Gateway's Guardrails detects the type of AI model being used and applies safety checks accordingly:\n\n* **Text generation models**: Both prompts and responses are evaluated.\n* **Embedding models**: Only the prompt is evaluated, as the response consists of numerical embeddings, which are not meaningful for moderation.\n* **Unknown models**: If the model type cannot be determined, only the prompt is evaluated, while the response bypass Guardrails.\n\nNote\n\nGuardrails does not yet support streaming responses. Support for streaming is planned for a future update.\n\n</page>\n\n<page>\n---\ntitle: Usage considerations · Cloudflare AI Gateway docs\ndescription: Guardrails currently uses Llama Guard 3 8B on Workers AI to perform\n  content evaluations. The underlying model may be updated in the future, and we\n  will reflect those changes within Guardrails.\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/features/guardrails/usage-considerations/\n  md: https://developers.cloudflare.com/ai-gateway/features/guardrails/usage-considerations/index.md\n---\n\nGuardrails currently uses [Llama Guard 3 8B](https://ai.meta.com/research/publications/llama-guard-llm-based-input-output-safeguard-for-human-ai-conversations/) on [Workers AI](https://developers.cloudflare.com/workers-ai/) to perform content evaluations. The underlying model may be updated in the future, and we will reflect those changes within Guardrails.\n\nSince Guardrails runs on Workers AI, enabling it incurs usage on Workers AI. You can monitor usage through the Workers AI Dashboard.\n\n## Additional considerations\n\n* **Model availability**: If at least one hazard category is set to `block`, but AI Gateway is unable to receive a response from Workers AI, the request will be blocked. Conversely, if a hazard category is set to `flag` and AI Gateway cannot obtain a response from Workers AI, the request will proceed without evaluation. This approach prioritizes availability, allowing requests to continue even when content evaluation is not possible.\n* **Latency impact**: Enabling Guardrails adds some latency. Enabling Guardrails introduces additional latency to requests. Typically, evaluations using Llama Guard 3 8B on Workers AI add approximately 500 milliseconds per request. However, larger requests may experience increased latency, though this increase is not linear. Consider this when balancing safety and performance.\n* **Handling long content**: When evaluating long prompts or responses, Guardrails automatically segments the content into smaller chunks, processing each through separate Guardrail requests. This approach ensures comprehensive moderation but may result in increased latency for longer inputs.\n* **Supported languages**: Llama Guard 3.3 8B supports content safety classification in the following languages: English, French, German, Hindi, Italian, Portuguese, Spanish, and Thai.\n* **Streaming support**: Streaming is not supported when using Guardrails.\n\nNote\n\nLlama Guard is provided as-is without any representations, warranties, or guarantees. Any rules or examples contained in blogs, developer docs, or other reference materials are provided for informational purposes only. You acknowledge and understand that you are responsible for the results and outcomes of your use of AI Gateway.\n\n</page>\n\n<page>\n---\ntitle: Workers Logpush · Cloudflare AI Gateway docs\ndescription: >-\n  AI Gateway allows you to securely export logs to an external storage location,\n  where you can decrypt and process them.\n\n  You can toggle Workers Logpush on and off in the Cloudflare dashboard\n  settings. This product is available on the Workers Paid plan. For pricing\n  information, refer to Pricing.\nlastUpdated: 2025-07-24T13:05:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/observability/logging/logpush/\n  md: https://developers.cloudflare.com/ai-gateway/observability/logging/logpush/index.md\n---\n\nAI Gateway allows you to securely export logs to an external storage location, where you can decrypt and process them. You can toggle Workers Logpush on and off in the [Cloudflare dashboard](https://dash.cloudflare.com) settings. This product is available on the Workers Paid plan. For pricing information, refer to [Pricing](https://developers.cloudflare.com/ai-gateway/reference/pricing).\n\nThis guide explains how to set up Workers Logpush for AI Gateway, generate an RSA key pair for encryption, and decrypt the logs once they are received.\n\nYou can store up to 10 million logs per gateway. If your limit is reached, new logs will stop being saved and will not be exported through Workers Logpush. To continue saving and exporting logs, you must delete older logs to free up space for new logs. Workers Logpush has a limit of 4 jobs and a maximum request size of 1 MB per log.\n\nNote\n\nTo export logs using Workers Logpush, you must have logs turned on for the gateway.\n\nNeed a higher limit?\n\nTo request an increase to a limit, complete the [Limit Increase Request Form](https://forms.gle/cuXu1QnQCrSNkkaS8). If the limit can be increased, Cloudflare will contact you with next steps.\n\n## How logs are encrypted\n\nWe employ a hybrid encryption model efficiency and security. Initially, an AES key is generated for each log. This AES key is what actually encrypts the bulk of your data, chosen for its speed and security in handling large datasets efficiently.\n\nNow, for securely sharing this AES key, we use RSA encryption. Here's what happens: the AES key, although lightweight, needs to be transmitted securely to the recipient. We encrypt this key with the recipient's RSA public key. This step leverages RSA's strength in secure key distribution, ensuring that only someone with the corresponding RSA private key can decrypt and use the AES key.\n\nOnce encrypted, both the AES-encrypted data and the RSA-encrypted AES key are sent together. Upon arrival, the recipient's system uses the RSA private key to decrypt the AES key. With the AES key now accessible, it is straightforward to decrypt the main data payload.\n\nThis method combines the best of both worlds: the efficiency of AES for data encryption with the secure key exchange capabilities of RSA, ensuring data integrity, confidentiality, and performance are all optimally maintained throughout the data lifecycle.\n\n## Setting up Workers Logpush\n\nTo configure Workers Logpush for AI Gateway, follow these steps:\n\n## 1. Generate an RSA key pair locally\n\nYou need to generate a key pair to encrypt and decrypt the logs. This script will output your RSA privateKey and publicKey. Keep the private key secure, as it will be used to decrypt the logs. Below is a sample script to generate the keys using Node.js and OpenSSL.\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "Run the script by executing the below code on your terminal. Replace `file name` with the name of your JavaScript file.",
      "language": "unknown"
    },
    {
      "code": "* OpenSSL\n\n  1. Generate private key: Use the following command to generate a RSA private key:",
      "language": "unknown"
    },
    {
      "code": "2. Generate public key: After generating the private key, you can extract the corresponding public key using:",
      "language": "unknown"
    },
    {
      "code": "## 2. Upload public key to gateway settings\n\nOnce you have generated the key pair, upload the public key to your AI Gateway settings. This key will be used to encrypt your logs. In order to enable Workers Logpush, you will need logs enabled for that gateway.\n\n## 3. Set up Logpush\n\nTo set up Logpush, refer to [Logpush](https://developers.cloudflare.com/logs/logpush/) documentation.\n\n## 4. Receive encrypted logs\n\nAfter configuring Workers Logpush, logs will be sent encrypted using the public key you uploaded. To access the data, you will need to decrypt it using your private key. The logs will be sent to the object storage provider that you have selected.\n\n## 5. Decrypt logs\n\nTo decrypt the encrypted log bodies and metadata from AI Gateway, you can use the following Node.js script or OpenSSL:\n\n* JavaScript\n\n  To decrypt the encrypted log bodies and metadata from AI Gateway, download the logs to a folder, in this case its named `my_log.log.gz`.\n\n  Then copy this JavaScript file into the same folder and place your private key in the top variable.",
      "language": "unknown"
    },
    {
      "code": "Run the script by executing the below code on your terminal. Replace `file name` with the name of your JavaScript file.",
      "language": "unknown"
    },
    {
      "code": "The script reads the encrypted log file `(my_log.log.gz)`, decrypts the metadata, request body, and response body, and prints the decrypted data. Ensure you replace the `privateKey` variable with your actual private RSA key that you generated in step 1.\n\n* OpenSSL\n\n  1. Decrypt the encrypted log file using the private key.\n\n  Assuming that the logs were encrypted with the public key (for example `public_key.pem`), you can use the private key (`private_key.pem`) to decrypt the log file.\n\n  For example, if the encrypted logs are in a file named `encrypted_logs.bin`, you can decrypt it like this:",
      "language": "unknown"
    },
    {
      "code": "* `-decrypt` tells OpenSSL that we want to decrypt the file.\n  * `-inkey private_key.pem` specifies the private key that will be used to decrypt the logs.\n  * `-in encrypted_logs.bin` is the encrypted log file.\n  * `-out decrypted_logs.txt`decrypted logs will be saved into this file.\n\n  1. View the decrypted logs Once decrypted, you can view the logs by simply running:",
      "language": "unknown"
    },
    {
      "code": "This command will output the decrypted logs to the terminal.\n\n</page>\n\n<page>\n---\ntitle: Anthropic · Cloudflare AI Gateway docs\ndescription: Anthropic helps build reliable, interpretable, and steerable AI systems.\nlastUpdated: 2025-11-25T12:59:29.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/anthropic/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/anthropic/index.md\n---\n\n[Anthropic](https://www.anthropic.com/) helps build reliable, interpretable, and steerable AI systems.\n\n## Endpoint\n\n**Base URL**",
      "language": "unknown"
    },
    {
      "code": "## Examples\n\n### cURL\n\nWith API Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "With Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "### Anthropic SDK\n\nWith Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "With Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Anthropic models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Azure OpenAI · Cloudflare AI Gateway docs\ndescription: Azure OpenAI allows you apply natural language algorithms on your data.\nlastUpdated: 2025-12-16T12:18:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/azureopenai/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/azureopenai/index.md\n---\n\n[Azure OpenAI](https://azure.microsoft.com/en-gb/products/ai-services/openai-service/) allows you apply natural language algorithms on your data.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Azure OpenAI, you will need:\n\n* AI Gateway account ID\n* AI Gateway gateway name\n* Azure OpenAI API key\n* Azure OpenAI resource name\n* Azure OpenAI deployment name (aka model name)\n\n## URL structure\n\nYour new base URL will use the data above in this structure: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/azure-openai/{resource_name}/{deployment_name}`. Then, you can append your endpoint and api-version at the end of the base URL, like `.../chat/completions?api-version=2023-05-15`.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use `openai` JavaScript SDK",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Baseten · Cloudflare AI Gateway docs\ndescription: Baseten provides infrastructure for building and deploying machine\n  learning models at scale. Baseten offers access to various language models\n  through a unified chat completions API.\nlastUpdated: 2025-11-25T09:00:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/baseten/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/baseten/index.md\n---\n\n[Baseten](https://www.baseten.co/) provides infrastructure for building and deploying machine learning models at scale. Baseten offers access to various language models through a unified chat completions API.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Baseten, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Baseten API token.\n* The name of the Baseten model you want to use.\n\n## OpenAI-compatible chat completions API\n\nBaseten provides an OpenAI-compatible chat completions API for supported models.\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use OpenAI SDK with JavaScript",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Baseten models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "## Model-specific endpoints\n\nFor models that don't use the OpenAI-compatible API, you can access them through their specific model endpoints.\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use with JavaScript",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Amazon Bedrock · Cloudflare AI Gateway docs\ndescription: Amazon Bedrock allows you to build and scale generative AI\n  applications with foundation models.\nlastUpdated: 2025-10-04T19:27:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/bedrock/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/bedrock/index.md\n---\n\n[Amazon Bedrock](https://aws.amazon.com/bedrock/) allows you to build and scale generative AI applications with foundation models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Amazon Bedrock, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Amazon Bedrock API token.\n* The name of the Amazon Bedrock model you want to use.\n\n## Make a request\n\nWhen making requests to Amazon Bedrock, replace `https://bedrock-runtime.us-east-1.amazonaws.com/` in the URL you're currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/aws-bedrock/bedrock-runtime/us-east-1/`, then add the model you want to run at the end of the URL.\n\nWith Bedrock, you will need to sign the URL before you make requests to AI Gateway. You can try using the [`aws4fetch`](https://github.com/mhart/aws4fetch) SDK.\n\n## Examples\n\n### Use `aws4fetch` SDK with TypeScript",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Cartesia · Cloudflare AI Gateway docs\ndescription: Cartesia provides advanced text-to-speech services with\n  customizable voice models.\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/cartesia/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/cartesia/index.md\n---\n\n[Cartesia](https://docs.cartesia.ai/) provides advanced text-to-speech services with customizable voice models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL Structure\n\nWhen making requests to Cartesia, replace `https://api.cartesia.ai/v1` in the URL you are currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cartesia`.\n\n## Prerequisites\n\nWhen making requests to Cartesia, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Cartesia API token.\n* The model ID and voice ID for the Cartesia voice model you want to use.\n\n## Example\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Cerebras · Cloudflare AI Gateway docs\ndescription: Cerebras offers developers a low-latency solution for AI model inference.\nlastUpdated: 2025-08-27T13:32:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/cerebras/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/cerebras/index.md\n---\n\n[Cerebras](https://inference-docs.cerebras.ai/) offers developers a low-latency solution for AI model inference.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Cerebras, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Cerebras API token.\n* The name of the Cerebras model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Cerebras models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Cohere · Cloudflare AI Gateway docs\ndescription: Cohere build AI models designed to solve real-world business challenges.\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/cohere/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/cohere/index.md\n---\n\n[Cohere](https://cohere.com/) build AI models designed to solve real-world business challenges.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to [Cohere](https://cohere.com/), replace `https://api.cohere.ai/v1` in the URL you're currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/cohere`.\n\n## Prerequisites\n\nWhen making requests to Cohere, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Cohere API token.\n* The name of the Cohere model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use Cohere SDK with Python\n\nIf using the [`cohere-python-sdk`](https://github.com/cohere-ai/cohere-python), set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Cohere models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Deepgram · Cloudflare AI Gateway docs\ndescription: Deepgram provides Voice AI APIs for speech-to-text, text-to-speech,\n  and voice agents.\nlastUpdated: 2025-11-03T18:39:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/deepgram/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/deepgram/index.md\n---\n\n[Deepgram](https://developers.deepgram.com/home) provides Voice AI APIs for speech-to-text, text-to-speech, and voice agents.\n\nNote\n\nDeepgram is also available through Workers AI, see [Deepgram Workers AI](https://developers.cloudflare.com/ai-gateway/usage/websockets-api/realtime-api/#deepgram-workers-ai).\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL Structure\n\nWhen making requests to Deepgram, replace `https://api.deepgram.com/` in the URL you are currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepgram/`.\n\n## Prerequisites\n\nWhen making requests to Deepgram, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Deepgram API token.\n\n## Example\n\n### SDK",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: DeepSeek · Cloudflare AI Gateway docs\ndescription: DeepSeek helps you build quickly with DeepSeek's advanced AI models.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/deepseek/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/deepseek/index.md\n---\n\n[DeepSeek](https://www.deepseek.com/) helps you build quickly with DeepSeek's advanced AI models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to DeepSeek, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active DeepSeek AI API token.\n* The name of the DeepSeek AI model you want to use.\n\n## URL structure\n\nYour new base URL will use the data above in this structure:\n\n`https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepseek/`.\n\nYou can then append the endpoint you want to hit, for example: `chat/completions`.\n\nSo your final URL will come together as:\n\n`https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/deepseek/chat/completions`.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use DeepSeek with JavaScript\n\nIf you are using the OpenAI SDK, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access DeepSeek models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: ElevenLabs · Cloudflare AI Gateway docs\ndescription: ElevenLabs offers advanced text-to-speech services, enabling\n  high-quality voice synthesis in multiple languages.\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/elevenlabs/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/elevenlabs/index.md\n---\n\n[ElevenLabs](https://elevenlabs.io/) offers advanced text-to-speech services, enabling high-quality voice synthesis in multiple languages.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to ElevenLabs, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active ElevenLabs API token.\n* The model ID of the ElevenLabs voice model you want to use.\n\n## Example\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Fal AI · Cloudflare AI Gateway docs\ndescription: Fal AI provides access to 600+ production-ready generative media\n  models through a single, unified API. The service offers the world's largest\n  collection of open image, video, voice, and audio generation models, all\n  accessible with one line of code.\nlastUpdated: 2025-09-22T08:12:39.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/fal/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/fal/index.md\n---\n\n[Fal AI](https://fal.ai/) provides access to 600+ production-ready generative media models through a single, unified API. The service offers the world's largest collection of open image, video, voice, and audio generation models, all accessible with one line of code.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to Fal AI, replace `https://fal.run` in the URL you're currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/fal`.\n\n## Prerequisites\n\nWhen making requests to Fal AI, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Fal AI API token.\n* The name of the Fal AI model you want to use.\n\n## Default synchronous API\n\nBy default, requests to the Fal AI endpoint will hit the synchronous API at `https://fal.run/<path>`.\n\n### cURL example",
      "language": "unknown"
    },
    {
      "code": "## Custom target URLs\n\nIf you need to hit a different target URL, you can supply the entire Fal target URL in the `x-fal-target-url` header.\n\n### cURL example with custom target URL",
      "language": "unknown"
    },
    {
      "code": "## WebSocket API\n\nFal AI also supports real-time interactions through WebSockets. For WebSocket connections and examples, see the [Realtime WebSockets API documentation](https://developers.cloudflare.com/ai-gateway/usage/websockets-api/realtime-api/#fal-ai).\n\n## JavaScript SDK integration\n\nThe `x-fal-target-url` format is compliant with the Fal SDKs, so AI Gateway can be easily passed as a `proxyUrl` in the SDKs.\n\n### JavaScript SDK example",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Google AI Studio · Cloudflare AI Gateway docs\ndescription: Google AI Studio helps you build quickly with Google Gemini models.\nlastUpdated: 2025-11-25T12:59:29.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/google-ai-studio/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/google-ai-studio/index.md\n---\n\n[Google AI Studio](https://ai.google.dev/aistudio) helps you build quickly with Google Gemini models.\n\n## Endpoint\n\n**Base URL:**",
      "language": "unknown"
    },
    {
      "code": "Then you can append the endpoint you want to hit, for example: `v1/models/{model}:{generative_ai_rest_resource}`\n\nSo your final URL will come together as: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-ai-studio/v1/models/{model}:{generative_ai_rest_resource}`.\n\n## Examples\n\n### cURL\n\nWith API Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "With Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "### `@google/genai`\n\nIf you are using the `@google/genai` package, you can set your endpoint like this:\n\nWith Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "With Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Google AI Studio models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: xAI · Cloudflare AI Gateway docs\ndescription: When making requests to Grok, replace https://api.x.ai/v1 in the\n  URL you are currently using with\n  https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/grok/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/grok/index.md\n---\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to [Grok](https://docs.x.ai/docs#getting-started), replace `https://api.x.ai/v1` in the URL you are currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/grok`.\n\n## Prerequisites\n\nWhen making requests to Grok, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active xAI API token.\n* The name of the xAI model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use OpenAI SDK with JavaScript\n\nIf you are using the OpenAI SDK with JavaScript, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "### Use OpenAI SDK with Python\n\nIf you are using the OpenAI SDK with Python, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "### Use Anthropic SDK with JavaScript\n\nIf you are using the Anthropic SDK with JavaScript, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "### Use Anthropic SDK with Python\n\nIf you are using the Anthropic SDK with Python, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Grok models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Groq · Cloudflare AI Gateway docs\ndescription: Groq delivers high-speed processing and low-latency performance.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/groq/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/groq/index.md\n---\n\n[Groq](https://groq.com/) delivers high-speed processing and low-latency performance.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to [Groq](https://groq.com/), replace `https://api.groq.com/openai/v1` in the URL you're currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/groq`.\n\n## Prerequisites\n\nWhen making requests to Groq, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Groq API token.\n* The name of the Groq model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use Groq SDK with JavaScript\n\nIf using the [`groq-sdk`](https://www.npmjs.com/package/groq-sdk), set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Groq models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: HuggingFace · Cloudflare AI Gateway docs\ndescription: HuggingFace helps users build, deploy and train machine learning models.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/huggingface/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/huggingface/index.md\n---\n\n[HuggingFace](https://huggingface.co/) helps users build, deploy and train machine learning models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to HuggingFace Inference API, replace `https://api-inference.huggingface.co/models/` in the URL you're currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/huggingface`. Note that the model you're trying to access should come right after, for example `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/huggingface/bigcode/starcoder`.\n\n## Prerequisites\n\nWhen making requests to HuggingFace, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active HuggingFace API token.\n* The name of the HuggingFace model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use HuggingFace.js library with JavaScript\n\nIf you are using the HuggingFace.js library, you can set your inference endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Ideogram · Cloudflare AI Gateway docs\ndescription: Ideogram provides advanced text-to-image generation models with\n  exceptional text rendering capabilities and visual quality.\nlastUpdated: 2025-11-25T09:00:35.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/ideogram/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/ideogram/index.md\n---\n\n[Ideogram](https://ideogram.ai/) provides advanced text-to-image generation models with exceptional text rendering capabilities and visual quality.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Ideogram, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Ideogram API key.\n* The name of the Ideogram model you want to use (e.g., `V_3`).\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use with JavaScript",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Mistral AI · Cloudflare AI Gateway docs\ndescription: Mistral AI helps you build quickly with Mistral's advanced AI models.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/mistral/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/mistral/index.md\n---\n\n[Mistral AI](https://mistral.ai) helps you build quickly with Mistral's advanced AI models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to the Mistral AI, you will need:\n\n* AI Gateway Account ID\n* AI Gateway gateway name\n* Mistral AI API token\n* Mistral AI model name\n\n## URL structure\n\nYour new base URL will use the data above in this structure: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/mistral/`.\n\nThen you can append the endpoint you want to hit, for example: `v1/chat/completions`\n\nSo your final URL will come together as: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/mistral/v1/chat/completions`.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use `@mistralai/mistralai` package with JavaScript\n\nIf you are using the `@mistralai/mistralai` package, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Mistral models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: OpenAI · Cloudflare AI Gateway docs\ndescription: OpenAI helps you build with GPT models.\nlastUpdated: 2025-11-25T12:59:29.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/openai/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/openai/index.md\n---\n\n[OpenAI](https://openai.com/about/) helps you build with GPT models.\n\n## Endpoint\n\n**Base URL**",
      "language": "unknown"
    },
    {
      "code": "When making requests to OpenAI, replace `https://api.openai.com/v1` in the URL you are currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai`.\n\n**Chat completions endpoint**\n\n`https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/chat/completions`\n\n**Responses endpoint**\n\n`https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openai/responses`\n\n## Examples\n\n### OpenAI SDK\n\nWith Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "With Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "### cURL\n\nResponses API with API Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "Chat Completions with API Key in Request\n\n* With Authenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "* Unauthenticated Gateway",
      "language": "unknown"
    },
    {
      "code": "Responses API with Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "Chat Completions with Stored Keys (BYOK) / Unified Billing",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: OpenRouter · Cloudflare AI Gateway docs\ndescription: OpenRouter is a platform that provides a unified interface for\n  accessing and using large language models (LLMs).\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/openrouter/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/openrouter/index.md\n---\n\n[OpenRouter](https://openrouter.ai/) is a platform that provides a unified interface for accessing and using large language models (LLMs).\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to [OpenRouter](https://openrouter.ai/), replace `https://openrouter.ai/api/v1/chat/completions` in the URL you are currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/openrouter/chat/completions`.\n\n## Prerequisites\n\nWhen making requests to OpenRouter, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active OpenRouter API token or a token from the original model provider.\n* The name of the OpenRouter model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use OpenAI SDK with JavaScript\n\nIf you are using the OpenAI SDK with JavaScript, you can set your endpoint like this:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Parallel · Cloudflare AI Gateway docs\ndescription: Parallel is a web API purpose-built for AIs, providing\n  production-ready outputs with minimal hallucination and evidence-based\n  results.\nlastUpdated: 2025-10-03T11:34:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/parallel/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/parallel/index.md\n---\n\n[Parallel](https://parallel.ai/) is a web API purpose-built for AIs, providing production-ready outputs with minimal hallucination and evidence-based results.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to Parallel, you can route to any Parallel endpoint through AI Gateway by appending the path after `parallel`. For example, to access the Tasks API at `/v1/tasks/runs`, use:",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Parallel, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Parallel API key.\n\n## Examples\n\n### Tasks API\n\nThe [Tasks API](https://docs.parallel.ai/task-api/task-quickstart) allows you to create comprehensive research and analysis tasks.\n\n#### cURL example",
      "language": "unknown"
    },
    {
      "code": "### Search API\n\nThe [Search API](https://docs.parallel.ai/search-api/search-quickstart) enables advanced search with configurable parameters.\n\n#### cURL example",
      "language": "unknown"
    },
    {
      "code": "## Chat API\n\nThe [Chat API](https://docs.parallel.ai/chat-api/chat-quickstart) is supported through AI Gateway's Unified Chat Completions API. See below for more details:\n\n## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Parallel models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "#### JavaScript SDK example",
      "language": "unknown"
    },
    {
      "code": "### FindAll API\n\nThe [FindAll API](https://docs.parallel.ai/findall-api/findall-quickstart) enables structured data extraction from complex queries.\n\n#### cURL example",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Perplexity · Cloudflare AI Gateway docs\ndescription: Perplexity is an AI powered answer engine.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/perplexity/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/perplexity/index.md\n---\n\n[Perplexity](https://www.perplexity.ai/) is an AI powered answer engine.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Perplexity, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Perplexity API token.\n* The name of the Perplexity model you want to use.\n\n## Examples\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "### Use Perplexity through OpenAI SDK with JavaScript\n\nPerplexity does not have their own SDK, but they have compatibility with the OpenAI SDK. You can use the OpenAI SDK to make a Perplexity call through AI Gateway as follows:",
      "language": "unknown"
    },
    {
      "code": "## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Perplexity models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Replicate · Cloudflare AI Gateway docs\ndescription: Replicate runs and fine tunes open-source models.\nlastUpdated: 2025-10-29T17:51:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/replicate/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/replicate/index.md\n---\n\n[Replicate](https://replicate.com/) runs and fine tunes open-source models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## URL structure\n\nWhen making requests to Replicate, replace `https://api.replicate.com/v1` in the URL you're currently using with `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/replicate`.\n\n## Prerequisites\n\nWhen making requests to Replicate, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Replicate API token. You can create one at [replicate.com/settings/api-tokens](https://replicate.com/settings/api-tokens)\n* The name of the Replicate model you want to use, like `anthropic/claude-4.5-haiku` or `google/nano-banana`.\n\n## Example\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Google Vertex AI · Cloudflare AI Gateway docs\ndescription: Google Vertex AI enables developers to easily build and deploy\n  enterprise ready generative AI experiences.\nlastUpdated: 2025-11-24T18:38:12.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/vertex/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/vertex/index.md\n---\n\n[Google Vertex AI](https://cloud.google.com/vertex-ai) enables developers to easily build and deploy enterprise ready generative AI experiences.\n\nBelow is a quick guide on how to set your Google Cloud Account:\n\n1. Google Cloud Platform (GCP) Account\n\n   * Sign up for a [GCP account](https://cloud.google.com/vertex-ai). New users may be eligible for credits (valid for 90 days).\n\n2. Enable the Vertex AI API\n\n   * Navigate to [Enable Vertex AI API](https://console.cloud.google.com/marketplace/product/google/aiplatform.googleapis.com) and activate the API for your project.\n\n3. Apply for access to desired models.\n\n## Endpoint",
      "language": "unknown"
    },
    {
      "code": "## Prerequisites\n\nWhen making requests to Google Vertex, you will need:\n\n* AI Gateway account tag\n* AI Gateway gateway name\n* Google Vertex API key\n* Google Vertex Project Name\n* Google Vertex Region (for example, us-east4)\n* Google Vertex model\n\n## URL structure\n\nYour new base URL will use the data above in this structure: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-vertex-ai/v1/projects/{project_name}/locations/{region}`.\n\nThen you can append the endpoint you want to hit, for example: `/publishers/google/models/{model}:{generative_ai_rest_resource}`\n\nSo your final URL will come together as: `https://gateway.ai.cloudflare.com/v1/{account_id}/{gateway_id}/google-vertex-ai/v1/projects/{project_name}/locations/{region}/publishers/google/models/gemini-2.5-flash:generateContent`\n\n## Authenticating with Vertex AI\n\nAuthenticating with Vertex AI normally requires generating short-term credentials using the [Google Cloud SDKs](https://cloud.google.com/vertex-ai/docs/authentication) with a complicated setup, but AI Gateway simplifies this for you with multiple options:\n\n### Option 1: Service Account JSON\n\nAI Gateway supports passing a Google service account JSON directly in the `Authorization` header on requests or through AI Gateway's [Bring Your Own Keys](https://developers.cloudflare.com/ai-gateway/configuration/bring-your-own-keys/) feature.\n\nYou can [create a service account key](https://cloud.google.com/iam/docs/keys-create-delete) in the Google Cloud Console. Ensure that the service account has the required permissions for the Vertex AI endpoints and models you plan to use.\n\nAI Gateway uses your service account JSON to generate short-term access tokens which are cached and used for consecutive requests, and are automatically refreshed when they expire.\n\nNote\n\nThe service account JSON must include an additional key called `region` with the GCP region code (for example, `us-east1`) you intend to use for your [Vertex AI endpoint](https://cloud.google.com/vertex-ai/docs/reference/rest#service-endpoint). You can also pass the region code `global` to use the global endpoint.\n\n#### Example service account JSON structure",
      "language": "unknown"
    },
    {
      "code": "You can pass this JSON in the `Authorization` header or configure it in [Bring Your Own Keys](https://developers.cloudflare.com/ai-gateway/configuration/bring-your-own-keys/).\n\n### Option 2: Direct Access Token\n\nIf you are already using the Google Cloud SDKs and generating a short-term access token (for example, with `gcloud auth print-access-token`), you can directly pass this as a Bearer token in the `Authorization` header of the request.\n\nNote\n\nThis option is only supported for the provider-specific endpoint, not for the unified chat completions endpoint.",
      "language": "unknown"
    },
    {
      "code": "## Using Unified Chat Completions API\n\nAI Gateway provides a [Unified API](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) that works across providers. For Google Vertex AI, you can use the standard chat completions format. Note that the model field includes the provider prefix, so your model string will look like `google-vertex-ai/google/gemini-2.5-pro`.\n\n### Endpoint",
      "language": "unknown"
    },
    {
      "code": "### Example with OpenAI SDK",
      "language": "unknown"
    },
    {
      "code": "### Example with cURL",
      "language": "unknown"
    },
    {
      "code": "Note\n\nSee the [Authenticating with Vertex AI](#authenticating-with-vertex-ai) section below for details on the service account JSON structure and authentication options.\n\n## Using Provider-Specific Endpoint\n\nYou can also use the provider-specific endpoint to access the full Vertex AI API.\n\n### cURL",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Workers AI · Cloudflare AI Gateway docs\ndescription: Use AI Gateway for analytics, caching, and security on requests to\n  Workers AI. Workers AI integrates seamlessly with AI Gateway, allowing you to\n  execute AI inference via API requests or through an environment binding for\n  Workers scripts. The binding simplifies the process by routing requests\n  through your AI Gateway with minimal setup.\nlastUpdated: 2025-08-19T11:42:14.000Z\nchatbotDeprioritize: false\ntags: AI\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/providers/workersai/\n  md: https://developers.cloudflare.com/ai-gateway/usage/providers/workersai/index.md\n---\n\nUse AI Gateway for analytics, caching, and security on requests to [Workers AI](https://developers.cloudflare.com/workers-ai/). Workers AI integrates seamlessly with AI Gateway, allowing you to execute AI inference via API requests or through an environment binding for Workers scripts. The binding simplifies the process by routing requests through your AI Gateway with minimal setup.\n\n## Prerequisites\n\nWhen making requests to Workers AI, ensure you have the following:\n\n* Your AI Gateway Account ID.\n* Your AI Gateway gateway name.\n* An active Workers AI API token.\n* The name of the Workers AI model you want to use.\n\n## REST API\n\nTo interact with a REST API, update the URL used for your request:\n\n* **Previous**:",
      "language": "unknown"
    },
    {
      "code": "* **New**:",
      "language": "unknown"
    },
    {
      "code": "For these parameters:\n\n* `{account_id}` is your Cloudflare [account ID](https://developers.cloudflare.com/workers-ai/get-started/rest-api/#1-get-api-token-and-account-id).\n* `{gateway_id}` refers to the name of your existing [AI Gateway](https://developers.cloudflare.com/ai-gateway/get-started/#create-gateway).\n* `{model_id}` refers to the model ID of the [Workers AI model](https://developers.cloudflare.com/workers-ai/models/).\n\n## Examples\n\nFirst, generate an [API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) with `Workers AI Read` access and use it in your request.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### OpenAI compatible endpoints\n\nWorkers AI supports OpenAI compatible endpoints for [text generation](https://developers.cloudflare.com/workers-ai/models/) (`/v1/chat/completions`) and [text embedding models](https://developers.cloudflare.com/workers-ai/models/) (`/v1/embeddings`). This allows you to use the same code as you would for your OpenAI commands, but swap in Workers AI easily.",
      "language": "unknown"
    },
    {
      "code": "## Workers Binding\n\nYou can integrate Workers AI with AI Gateway using an environment binding. To include an AI Gateway within your Worker, add the gateway as an object in your Workers AI request.\n\n* JavaScript",
      "language": "unknown"
    },
    {
      "code": "* TypeScript",
      "language": "unknown"
    },
    {
      "code": "For a detailed step-by-step guide on integrating Workers AI with AI Gateway using a binding, see [Integrations in AI Gateway](https://developers.cloudflare.com/ai-gateway/integrations/aig-workers-ai-binding/).\n\nWorkers AI supports the following parameters for AI gateways:\n\n* `id` string\n  * Name of your existing [AI Gateway](https://developers.cloudflare.com/ai-gateway/get-started/#create-gateway). Must be in the same account as your Worker.\n* `skipCache` boolean(default: false)\n  * Controls whether the request should [skip the cache](https://developers.cloudflare.com/ai-gateway/features/caching/#skip-cache-cf-aig-skip-cache).\n* `cacheTtl` number\n  * Controls the [Cache TTL](https://developers.cloudflare.com/ai-gateway/features/caching/#cache-ttl-cf-aig-cache-ttl).\n\n## OpenAI-Compatible Endpoint\n\nYou can also use the [OpenAI-compatible endpoint](https://developers.cloudflare.com/ai-gateway/usage/chat-completion/) (`/ai-gateway/usage/chat-completion/`) to access Workers AI models using the OpenAI API schema. To do so, send your requests to:",
      "language": "unknown"
    },
    {
      "code": "Specify:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Non-realtime WebSockets API · Cloudflare AI Gateway docs\ndescription: The Non-realtime WebSockets API allows you to establish persistent\n  connections for AI requests without requiring repeated handshakes. This\n  approach is ideal for applications that do not require real-time interactions\n  but still benefit from reduced latency and continuous communication.\nlastUpdated: 2025-12-15T14:49:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/websockets-api/non-realtime-api/\n  md: https://developers.cloudflare.com/ai-gateway/usage/websockets-api/non-realtime-api/index.md\n---\n\nThe Non-realtime WebSockets API allows you to establish persistent connections for AI requests without requiring repeated handshakes. This approach is ideal for applications that do not require real-time interactions but still benefit from reduced latency and continuous communication.\n\n## Set up WebSockets API\n\n1. Generate an AI Gateway token with appropriate AI Gateway Run and opt in to using an authenticated gateway.\n\n2. Modify your Universal Endpoint URL by replacing `https://` with `wss://` to initiate a WebSocket connection:",
      "language": "unknown"
    },
    {
      "code": "3. Open a WebSocket connection authenticated with a Cloudflare token with the AI Gateway Run permission.\n\nNote\n\nAlternatively, we also support authentication via the `sec-websocket-protocol` header if you are using a browser WebSocket.\n\n## Example request",
      "language": "unknown"
    },
    {
      "code": "## Example response",
      "language": "unknown"
    },
    {
      "code": "## Example streaming request\n\nFor streaming requests, AI Gateway sends an initial message with request metadata indicating the stream is starting:",
      "language": "unknown"
    },
    {
      "code": "After this initial message, all streaming chunks are relayed in real-time to the WebSocket connection as they arrive from the inference provider. Only the `eventId` field is included in the metadata for these streaming chunks. The `eventId` allows AI Gateway to include a client-defined ID with each message, even in a streaming WebSocket environment.",
      "language": "unknown"
    },
    {
      "code": "Once all chunks for a request have been streamed, AI Gateway sends a final message to signal the completion of the request. For added flexibility, this message includes all the metadata again, even though it was initially provided at the start of the streaming process.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Realtime WebSockets API · Cloudflare AI Gateway docs\ndescription: Some AI providers support real-time, low-latency interactions over\n  WebSockets. AI Gateway allows seamless integration with these APIs, supporting\n  multimodal interactions such as text, audio, and video.\nlastUpdated: 2025-10-09T17:51:29.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-gateway/usage/websockets-api/realtime-api/\n  md: https://developers.cloudflare.com/ai-gateway/usage/websockets-api/realtime-api/index.md\n---\n\nSome AI providers support real-time, low-latency interactions over WebSockets. AI Gateway allows seamless integration with these APIs, supporting multimodal interactions such as text, audio, and video.\n\n## Supported Providers\n\n* [OpenAI](https://platform.openai.com/docs/guides/realtime-websocket)\n* [Google AI Studio](https://ai.google.dev/gemini-api/docs/multimodal-live)\n* [Cartesia](https://docs.cartesia.ai/api-reference/tts/tts)\n* [ElevenLabs](https://elevenlabs.io/docs/conversational-ai/api-reference/conversational-ai/websocket)\n* [Fal AI](https://docs.fal.ai/model-apis/model-endpoints/websockets)\n* [Deepgram (Workers AI)](https://developers.cloudflare.com/workers-ai/models/?authors=deepgram)\n\n## Authentication\n\nFor real-time WebSockets, authentication can be done using:\n\n* Headers (for non-browser environments)\n* `sec-websocket-protocol` (for browsers)\n\nNote\n\nProvider specific API Keys can also be alternatively configured on AI Gateway using our [BYOK](https://developers.cloudflare.com/ai-gateway/configuration/bring-your-own-keys) feature. You must still include the `cf-aig-authorization` header in the websocket request.\n\n## Examples\n\n### OpenAI",
      "language": "unknown"
    },
    {
      "code": "### Google AI Studio",
      "language": "unknown"
    },
    {
      "code": "### Cartesia",
      "language": "unknown"
    },
    {
      "code": "### ElevenLabs",
      "language": "unknown"
    },
    {
      "code": "### Fal AI\n\nFal AI supports WebSocket connections for real-time model interactions through their HTTP over WebSocket API.",
      "language": "unknown"
    },
    {
      "code": "For more information on Fal AI's WebSocket API, see their [HTTP over WebSocket documentation](https://docs.fal.ai/model-apis/model-endpoints/websockets).\n\n### Deepgram (Workers AI)\n\nWorkers AI provides Deepgram models for real-time speech-to-text (STT) and text-to-speech (TTS) capabilities through WebSocket connections.\n\n#### Speech-to-Text (STT)\n\nWorkers AI supports two Deepgram STT models: `@cf/deepgram/nova-3` and `@cf/deepgram/flux`. The following example demonstrates real-time audio transcription from a microphone:",
      "language": "unknown"
    },
    {
      "code": "#### Text-to-Speech (TTS)\n\nWorkers AI supports the Deepgram `@cf/deepgram/aura-1` model for TTS. The following example demonstrates converting text input to audio:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: R2 · Cloudflare AI Search docs\ndescription: You can use Cloudflare R2 to store data for indexing. To get\n  started, configure an R2 bucket containing your data.\nlastUpdated: 2025-09-24T17:03:07.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-search/configuration/data-source/r2/\n  md: https://developers.cloudflare.com/ai-search/configuration/data-source/r2/index.md\n---\n\nYou can use Cloudflare R2 to store data for indexing. To get started, [configure an R2 bucket](https://developers.cloudflare.com/r2/get-started/) containing your data.\n\nAI Search will automatically scan and process supported files stored in that bucket. Files that are unsupported or exceed the size limit will be skipped during indexing and logged as errors.\n\n## File limits\n\nAI Search has different file size limits depending on the file type:\n\n* **Plain text files:** Up to **4 MB**\n* **Rich format files:** Up to **4 MB**\n\nFiles that exceed these limits will not be indexed and will show up in the error logs.\n\n## File types\n\nAI Search can ingest a variety of different file types to power your RAG. The following plain text files and rich format files are supported.\n\n### Plain text file types\n\nAI Search supports the following plain text file types:\n\n| Format | File extensions | Mime Type |\n| - | - | - |\n| Text | `.txt`, `.rst` | `text/plain` |\n| Log | `.log` | `text/plain` |\n| Config | `.ini`, `.conf`, `.env`, `.properties`, `.gitignore`, `.editorconfig`, `.toml` | `text/plain`, `text/toml` |\n| Markdown | `.markdown`, `.md`, `.mdx` | `text/markdown` |\n| LaTeX | `.tex`, `.latex` | `application/x-tex`, `application/x-latex` |\n| Script | `.sh`, `.bat` , `.ps1` | `application/x-sh` , `application/x-msdos-batch`, `text/x-powershell` |\n| SGML | `.sgml` | `text/sgml` |\n| JSON | `.json` | `application/json` |\n| YAML | `.yaml`, `.yml` | `application/x-yaml` |\n| CSS | `.css` | `text/css` |\n| JavaScript | `.js` | `application/javascript` |\n| PHP | `.php` | `application/x-httpd-php` |\n| Python | `.py` | `text/x-python` |\n| Ruby | `.rb` | `text/x-ruby` |\n| Java | `.java` | `text/x-java-source` |\n| C | `.c` | `text/x-c` |\n| C++ | `.cpp`, `.cxx` | `text/x-c++` |\n| C Header | `.h`, `.hpp` | `text/x-c-header` |\n| Go | `.go` | `text/x-go` |\n| Rust | `.rs` | `text/rust` |\n| Swift | `.swift` | `text/swift` |\n| Dart | `.dart` | `text/dart` |\n\n### Rich format file types\n\nAI Search uses [Markdown Conversion](https://developers.cloudflare.com/workers-ai/features/markdown-conversion/) to convert rich format files to markdown. The following table lists the supported formats that will be converted to Markdown:\n\n| Format | File extensions | Mime Types |\n| - | - | - |\n| PDF Documents | `.pdf` | `application/pdf` |\n| Images 1 | `.jpeg`, `.jpg`, `.png`, `.webp`, `.svg` | `image/jpeg`, `image/png`, `image/webp`, `image/svg+xml` |\n| HTML Documents | `.html` | `text/html` |\n| XML Documents | `.xml` | `application/xml` |\n| Microsoft Office Documents | `.xlsx`, `.xlsm`, `.xlsb`, `.xls`, `.et`, `.docx` | `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`, `application/vnd.ms-excel.sheet.macroenabled.12`, `application/vnd.ms-excel.sheet.binary.macroenabled.12`, `application/vnd.ms-excel`, `application/vnd.openxmlformats-officedocument.wordprocessingml.document` |\n| Open Document Format | `.ods`, `.odt` | `application/vnd.oasis.opendocument.spreadsheet`, `application/vnd.oasis.opendocument.text` |\n| CSV | `.csv` | `text/csv` |\n| Apple Documents | `.numbers` | `application/vnd.apple.numbers` |\n\n1 Image conversion uses two Workers AI models for object detection and summarization. See [Workers AI pricing](https://developers.cloudflare.com/workers-ai/features/markdown-conversion/#pricing) for more details.\n\n</page>\n\n<page>\n---\ntitle: Website · Cloudflare AI Search docs\ndescription: The Website data source allows you to connect a domain you own so\n  its pages can be crawled, stored, and indexed.\nlastUpdated: 2025-11-19T15:26:37.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-search/configuration/data-source/website/\n  md: https://developers.cloudflare.com/ai-search/configuration/data-source/website/index.md\n---\n\nThe Website data source allows you to connect a domain you own so its pages can be crawled, stored, and indexed.\n\nYou can only crawl domains that you have onboarded onto the same Cloudflare account. Refer to [Onboard a domain](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) for more information on adding a domain to your Cloudflare account.\n\nBot protection may block crawling\n\nIf you use Cloudflare products that control or restrict bot traffic such as [Bot Management](https://developers.cloudflare.com/bots/), [Web Application Firewall (WAF)](https://developers.cloudflare.com/waf/), or [Turnstile](https://developers.cloudflare.com/turnstile/), the same rules will apply to the AI Search (AutoRAG) crawler. Make sure to configure an exception or an allow-list for the AutoRAG crawler in your settings.\n\n## How website crawling works\n\nWhen you connect a domain, the crawler looks for your website's sitemap to determine which pages to visit:\n\n1. The crawler first checks the `robots.txt` for listed sitemaps. If it exists, it reads all sitemaps existing inside.\n2. If no `robots.txt` is found, the crawler first checks for a sitemap at `/sitemap.xml`.\n3. If no sitemap is available, the domain cannot be crawled.\n\nPages are visited, according to the `<priority>` attribute set on the sitemaps, if this field is defined.\n\n## How to set WAF rules to allowlist the crawler\n\nIf you have Security rules configured to block bot activity, you can add a rule to allowlist the crawler bot.\n\n1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n   [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n2. To create a new empty rule, select **Create rule** > **Custom rules**.\n\n3. Enter a descriptive name for the rule in **Rule name**, such as `Allow AI Search`.\n\n4. Under **When incoming requests match**, use the **Field** drop-down list to choose *Bot Detection ID*. For **Operator**, select *equals*. For **Value**, enter `122933950`.\n\n5. Under **Then take action**, in the **Choose action** dropdown, choose *Skip*.\n\n6. Under **Place at**, select the order of the rule in the **Select order** dropdown to be *First*. Setting the order as *First* allows this rule to be applied before subsequent rules.\n\n7. To save and deploy your rule, select **Deploy**.\n\n## Parsing options\n\nYou can choose how pages are parsed during crawling:\n\n* **Static sites**: Downloads the raw HTML for each page.\n* **Rendered sites**: Loads pages with a headless browser and downloads the fully rendered version, including dynamic JavaScript content. Note that the [Browser Rendering](https://developers.cloudflare.com/browser-rendering/pricing/) limits and billing apply.\n\n## Access protected content\n\nIf your website has pages behind authentication or are only visible to logged-in users, you can configure custom HTTP headers to allow the AI Search crawler to access this protected content. You can add up to five custom HTTP headers to the requests AI Search sends when crawling your site.\n\n### Providing access to sites protected by Cloudflare Access\n\nTo allow AI Search to crawl a site protected by [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/), you need to create service token credentials and configure them as custom headers.\n\nService tokens bypass user authentication, so ensure your Access policies are configured appropriately for the content you want to index. The service token will allow the AI Search crawler to access all content covered by the Service Auth policy.\n\n1. In [Cloudflare One](https://one.dash.cloudflare.com/), [create a service token](https://developers.cloudflare.com/cloudflare-one/access-controls/service-credentials/service-tokens/#create-a-service-token). Once the Client ID and Client Secret are generated, save them for the next steps. For example they can look like:",
      "language": "unknown"
    },
    {
      "code": "2. [Create a policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/policy-management/#create-a-policy) with the following configuration:\n\n   * Add an **Include** rule with **Selector** set to **Service token**.\n   * In **Value**, select the Service Token you created in step 1.\n\n3. [Add your self-hosted application to Access](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/self-hosted-public-app/) and with the following configuration:\n\n   * In Access policies, click **Select existing policies**.\n   * Select the policy that you have just created and select **Confirm**.\n\n4. In the Cloudflare dashboard, go to the **AI Search** page.\n\n   [Go to **AI Search (AutoRAG)**](https://dash.cloudflare.com/?to=/:account/ai/ai-search)\n\n5. Select **Create**.\n\n6. Select **Website** as your data source.\n\n7. Under **Parse options**, locate **Extra headers** and add the following two headers using your saved credentials:\n\n   * Header 1:\n\n     * **Key**: `CF-Access-Client-Id`\n     * **Value**: `xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.access`\n\n   * Header 2:\n\n     * **Key**: `CF-Access-Client-Secret`\n     * **Value**: `xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`\n\n8. Complete the AI Search setup process to create your search instance.\n\n## Storage\n\nDuring setup, AI Search creates a dedicated R2 bucket in your account to store the pages that have been crawled and downloaded as HTML files. This bucket is automatically managed and is used only for content discovered by the crawler. Any files or objects that you add directly to this bucket will not be indexed.\n\nNote\n\nWe recommend not modifying the bucket as it may disrupt the indexing flow and cause content to not be updated properly.\n\n## Sync and updates\n\nDuring scheduled or manual [sync jobs](https://developers.cloudflare.com/ai-search/configuration/indexing/), the crawler will check for changes to the `<lastmod>` attribute in your sitemap. If it has been changed to a date occurring after the last sync date, then the page will be crawled, the updated version is stored in the R2 bucket, and automatically reindexed so that your search results always reflect the latest content.\n\nIf the `<lastmod>` attribute is not defined, then AI Search will automatically crawl each link defined in the sitemap once a day.\n\n## Limits\n\nThe regular AI Search [limits](https://developers.cloudflare.com/ai-search/platform/limits-pricing/) apply when using the Website data source.\n\nThe crawler will download and index pages only up to the maximum object limit supported for an AI Search instance, and it processes the first set of pages it visits until that limit is reached. In addition, any files that are downloaded but exceed the file size limit will not be indexed.\n\n</page>\n\n<page>\n---\ntitle: Supported models · Cloudflare AI Search docs\ndescription: This page lists all models supported by AI Search and their lifecycle status.\nlastUpdated: 2025-10-28T15:46:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/ai-search/configuration/models/supported-models/\n  md: https://developers.cloudflare.com/ai-search/configuration/models/supported-models/index.md\n---\n\nThis page lists all models supported by AI Search and their lifecycle status.\n\nRequest model support\n\nIf you would like to use a model that is not currently supported, reach out to us on [Discord](https://discord.gg/cloudflaredev) to request it.\n\n## Production models\n\nProduction models are the actively supported and recommended models that are stable, fully available.\n\n### Text generation\n\n| Provider | Alias | Context window (tokens) |\n| - | - | - |\n| **Anthropic** | `anthropic/claude-3-7-sonnet` | 200,000 |\n| | `anthropic/claude-sonnet-4` | 200,000 |\n| | `anthropic/claude-opus-4` | 200,000 |\n| | `anthropic/claude-3-5-haiku` | 200,000 |\n| **Cerebras** | `cerebras/qwen-3-235b-a22b-instruct` | 64,000 |\n| | `cerebras/qwen-3-235b-a22b-thinking` | 65,000 |\n| | `cerebras/llama-3.3-70b` | 65,000 |\n| | `cerebras/llama-4-maverick-17b-128e-instruct` | 8,000 |\n| | `cerebras/llama-4-scout-17b-16e-instruct` | 8,000 |\n| | `cerebras/gpt-oss-120b` | 64,000 |\n| **Google AI Studio** | `google-ai-studio/gemini-2.5-flash` | 1,048,576 |\n| | `google-ai-studio/gemini-2.5-pro` | 1,048,576 |\n| **Grok (x.ai)** | `grok/grok-4` | 256,000 |\n| **Groq** | `groq/llama-3.3-70b-versatile` | 131,072 |\n| | `groq/llama-3.1-8b-instant` | 131,072 |\n| **OpenAI** | `openai/gpt-5` | 400,000 |\n| | `openai/gpt-5-mini` | 400,000 |\n| | `openai/gpt-5-nano` | 400,000 |\n| **Workers AI** | `@cf/meta/llama-3.3-70b-instruct-fp8-fast` | 24,000 |\n| | `@cf/meta/llama-3.1-8b-instruct-fast` | 60,000 |\n| | `@cf/meta/llama-3.1-8b-instruct-fp8` | 32,000 |\n| | `@cf/meta/llama-4-scout-17b-16e-instruct` | 131,000 |\n\n### Embedding\n\n| Provider | Alias | Vector dims | Input tokens | Metric |\n| - | - | - | - | - |\n| **Google AI Studio** | `google-ai-studio/gemini-embedding-001` | 1,536 | 2048 | cosine |\n| **OpenAI** | `openai/text-embedding-3-small` | 1,536 | 8192 | cosine |\n| | `openai/text-embedding-3-large` | 1,536 | 8192 | cosine |\n| **Workers AI** | `@cf/baai/bge-m3` | 1,024 | 512 | cosine |\n| | `@cf/baai/bge-large-en-v1.5` | 1,024 | 512 | cosine |\n\n### Reranking\n\n| Provider | Alias | Input tokens |\n| - | - | - |\n| **Workers AI** | `@cf/baai/bge-reranker-base` | 512 |\n\n## Transition models\n\nThere are currently no models marked for end-of-life.\n\n</page>\n\n<page>\n---\ntitle: Usage-based billing · Cloudflare Analytics docs\ndescription: How to use Workers Analytics Engine to build usage-based billing\n  into your SaaS product\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/recipes/usage-based-billing-for-your-saas-product/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/recipes/usage-based-billing-for-your-saas-product/index.md\n---\n\nMany Cloudflare customers run software-as-a-service products with multiple customers. A big concern for such companies is understanding the cost of each customer, and understanding customer behaviour more widely.\n\nKeeping data on every web request used by a customer can be expensive, as can attributing page views to customers. At Cloudflare we have solved this problem with the same in-house technologies now available to you through Analytics Engine.\n\n## Recording data on usage\n\nAnalytics Engine is designed for use with Cloudflare Workers. If you already use Cloudflare Workers to serve requests, you can start sending data into Analytics Engine in just a few lines of code:",
      "language": "unknown"
    },
    {
      "code": "SaaS customer activity often follows an exponential pattern: one customer may do 100 million requests per second, while another does 100 requests a day. If all data is sampled together, the usage of bigger customers can cause smaller customers data to be sampled to zero. Analytics Engine allows you to prevent that: in the example code above we supply the customer's unique ID as the index, causing Analytics Engine to sample your customers' individual activity.\n\n## Viewing usage\n\nYou can start viewing customer data either using Grafana (for visualisations) or as JSON (for your own tools). Other areas of the Analytics Engine documentation explain this in-depth.\n\nLook at customer usage over all endpoints:",
      "language": "unknown"
    },
    {
      "code": "If run in Grafana, this query returns a graph summarising the usage of each customer. The `sum(_sample_interval)` accounts for the sampling - refer to other Analytics Engine documentation. This query gives you an answer to \"which customers are most active?\"\n\nThe example `writeDataPoint` call above writes an endpoint name. If you do that, you can break down customer activity by endpoint:",
      "language": "unknown"
    },
    {
      "code": "This can give you insights into what endpoints different customers are using. This can be useful for business purposes (for example, understanding customer needs) as well for for your engineers to see activity and behaviour (observability).\n\n## Billing customers\n\nAnalytics Engine can be used to bill customers based on a reliable approximation of usage. In order to get the best approximation, when generating bills we suggest executing one query per customer. This can result in less sampling than querying multiple customers at once.",
      "language": "unknown"
    },
    {
      "code": "Running this query once for each customer at the end of each month could give you the data to produce a bill. This is just an example: most likely you'll want to adjust this example to how you want to bill.\n\nWhen producing a bill, most likely you will also want to provide the daily costs. The following query breaks down usage by day:",
      "language": "unknown"
    },
    {
      "code": "You will want to take the usage queries above, adapt them for how you charge customers, and make a backend system run those queries and calculate the customer charges based on the data returned.\n\n</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-11-12T01:08:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/aggregate-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/aggregate-functions/index.md\n---\n\n## count\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`count` is an aggregation function that returns the number of rows in each group or results set.\n\n`count` can also be used to count the number of distinct (unique) values in each column:\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## sum\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`sum` is an aggregation function that returns the sum of column values across all rows in each group or results set. Sum also supports `DISTINCT`, but in this case it will only sum the unique values in the column.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## avg\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`avg` is an aggregation function that returns the mean of column values across all rows in each group or results set. Avg also supports `DISTINCT`, but in this case it will only average the unique values in the column.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## min\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`min` is an aggregation function that returns the minimum value of a column across all rows.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## max\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`max` is an aggregation function that returns the maximum value of a column across all rows.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## quantileExactWeighted\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`quantileExactWeighted` is an aggregation function that returns the value at the qth quantile in the named column across all rows in each group or results set. Each row will be weighted by the value in `weight_column_name`. Typically this would be `_sample_interval` (refer to [Sampling](https://developers.cloudflare.com/analytics/analytics-engine/sql-api/#sampling) for more information).\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "For backwards compatibility, this is also available as `quantileWeighted(q, column_name, weight_column_name)`.\n\n## argMax New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`argMax` is an aggregation function that returns the `arg` value that corresponds to the maximum value of `val`.\n\nIf multiple `arg` values have the maximum value of `val`, any one will be returned.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## argMin New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`argMin` is an aggregation function that returns the `arg` value that corresponds to the minimum value of `val`.\n\nIf multiple `arg` values have the minimum value of `val`, any one will be returned.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## first\\_value New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`first_value` is an aggregation function which returns the first value of the provided column.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## last\\_value New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`last_value` is an aggregation function which returns the last value of the provided column.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## topK New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`topK` is an aggregation function which returns the most common `N` values of a column.\n\n`N` is optional and defaults to `10`.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## topKWeighted New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`topKWeighted` is an aggregation function which returns the most common `N` values of a column, weighted by a second column.\n\n`N` is optional and defaults to `10`.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## countIf New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`countIf` is an aggregation function that returns the number of rows in the results set, but only counting rows where a provided expression evaluates to true.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## sumIf New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`sumIf` is an aggregation function that returns the sum of a first expression across all rows in the results set, but only including rows where a second expression evaluates to true.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "## avgIf New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`avgIf` is an aggregation function that returns the mean of an expression across all rows in the results set, but only including rows where a second expression evaluates to true.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/bit-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/bit-functions/index.md\n---\n\n## bitAnd New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitAnd` returns the bitwise AND of expressions `a` and `b`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitCount New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitCount` returns the number of bits set to one in the binary representation of `a`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitHammingDistance New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitHammingDistance` returns the number of bits that differ between `x` and `y`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitNot New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitNot` returns `a` with all bits flipped.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitOr New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitOr` returns the inclusive bitwise or of `a` and `b`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitRotateLeft New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitRotateLeft` rotates all bits in `a` left by `n` positions.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitRotateRight New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitRotateRight` rotates all bits in `a` right by `n` positions.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitShiftLeft New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitShiftLeft` shifts all bits in `a` left by `n` positions.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitShiftRight New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitShiftRight` shifts all bits in `a` right by `n` positions.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitTest New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitTest` returns the value of bit `n` in number `a`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## bitXor New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bitXor` returns the bitwise exclusive-or of `a` and `b`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/conditional-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/conditional-functions/index.md\n---\n\n## if\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns `<true_expression>` if `<condition>` evaluates to true, else returns `<false_expression>`.\n\nExample:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-11-12T01:08:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/date-time-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/date-time-functions/index.md\n---\n\n## formatDateTime\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`formatDateTime` prints a datetime as a string according to a provided format string. Refer to [ClickHouse's documentation](https://clickhouse.com/docs/en/sql-reference/functions/date-time-functions/#formatdatetime) for a list of supported formatting options.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## now\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the current time as a DateTime.\n\n## today New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the current date as a `Date`.\n\n## toDateTime\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toDateTime` converts an expression to a datetime. This function does not support ISO 8601-style timezones; if your time is not in UTC then you must provide the timezone using the second optional argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toYear New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toYear` returns the year of a datetime.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toMonth New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toMonth` returns the year of a datetime.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toDayOfWeek New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toDayOfWeek` takes a datetime and returns its numerical day of the week.\n\nReturns `1` to indicate Monday, `2` to indicate Tuesday, and so on.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toDayOfMonth New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toDayOfMonth` returns the day of the month from a datetime.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toHour New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toHour` returns the hour of the day from a datetime.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toMinute New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toMinute` returns the minute of the hour from a datetime.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toSecond New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toSecond` returns the second of the minute from a datetime.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toUnixTimestamp\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toUnixTimestamp` converts a datetime into an integer unix timestamp.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfInterval\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfInterval` rounds down a datetime to the nearest offset of a provided interval. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfYear New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfYear` rounds down a datetime to the nearest start of year. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfMonth New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfMonth` rounds down a datetime to the nearest start of month. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfWeek New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfWeek` rounds down a datetime to the start of the week. This can be useful for grouping data into equal-sized time ranges.\n\nTreats Monday as the first day of the week.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfDay New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfDay` rounds down a datetime to the nearest start of day. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfHour New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfHour` rounds down a datetime to the nearest start of hour. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfFifteenMinutes New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfFifteenMinutes` rounds down a datetime to the nearest fifteen minutes. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfTenMinutes New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfTenMinutes` rounds down a datetime to the nearest ten minutes. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfFiveMinutes New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfFiveMinutes` rounds down a datetime to the nearest five minutes. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toStartOfMinute New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toStartOfMinute` rounds down a datetime to the nearest minute. This can be useful for grouping data into equal-sized time ranges.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## toYYYYMM New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`toYYYYMM` returns a number representing year and month of a datetime. For instance a datetime on `2025-05-03` would return the number `202505`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/encoding-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/encoding-functions/index.md\n---\n\n## bin New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`bin` returns a string containing the binary representation of its argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## hex New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`hex` returns a string containing the hexadecimal representation of its argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Workers Analytics Engine SQL Reference · Cloudflare Analytics docs\ndescription: \"The following literals are supported:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/literals/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/literals/index.md\n---\n\nThe following literals are supported:\n\n| Type | Syntax |\n| - | - |\n| integer | `42`, `-42` |\n| double | `4.2`, `-4.2` |\n| string | `'so long and thanks for all the fish'` |\n| boolean | `true` or `false` |\n| time interval | `INTERVAL '42' DAY` Intervals of `YEAR`, `MONTH`, `DAY`, `HOUR`, `MINUTE` and `SECOND` are supported |\n\n</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/mathematical-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/mathematical-functions/index.md\n---\n\n## intDiv\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Divide `a` by `b`, rounding the answer down to the nearest whole number.\n\n## log New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`log` returns the natural logarithm of a provided number. `ln` is also available as an alias.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## pow New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`pow` returns the first argument raised to the power of the second argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## round New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`round` returns a number rounded to the nearest whole number, or to a given number of decimal points specified by the second argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## floor New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`floor` returns a number rounded down to a whole number, or rounded down to a given number of decimal points specified by the second argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## ceil New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`ceil` returns a number rounded up to a whole number, or rounded up to a given number of decimal points specified by the second argument.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Workers Analytics Engine SQL Reference · Cloudflare Analytics docs\ndescription: \"The following operators are supported:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/operators/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/operators/index.md\n---\n\nThe following operators are supported:\n\n## Arithmetic operators\n\n| Operator | Description |\n| - | - |\n| `+` | addition |\n| `-` | subtraction |\n| `*` | multiplication |\n| `/` | division |\n| `%` | modulus |\n\n## Comparison operators\n\n| Operator | Description |\n| - | - |\n| `=` | equals |\n| `<` | less than |\n| `>` | greater than |\n| `<=` | less than or equal to |\n| `>=` | greater than or equal to |\n| `<>` or `!=` | not equal |\n| `IN` | true if the preceding expression's value is in the list `column IN ('a', 'list', 'of', 'values')` |\n| `NOT IN` | true if the preceding expression's value is not in the list `column NOT IN ('a', 'list', 'of', 'values')` |\n\nWe also support the `BETWEEN` operator for checking a value is in an inclusive range: `a [NOT] BETWEEN b AND c`.\n\n## Boolean operators\n\n| Operator | Description |\n| - | - |\n| `AND` | boolean \"AND\" (true if both sides are true) |\n| `OR` | boolean \"OR\" (true if either side or both sides are true) |\n| `NOT` | boolean \"NOT\" (true if following expression is false and visa-versa) |\n\n## Unary operators\n\n| Operator | Description |\n| - | - |\n| `-` | negation operator (for example, `-42`) |\n\n</page>\n\n<page>\n---\ntitle: Workers Analytics Engine SQL Reference · Cloudflare Analytics docs\ndescription: SHOW TABLES can be used to list the tables on your account. The\n  table name is the name you specified as dataset when configuring the workers\n  binding (refer to Get started with Workers Analytics Engine, for more\n  information). The table is automatically created when you write event data in\n  your worker.\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/statements/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/statements/index.md\n---\n\n## SHOW TABLES statement\n\n`SHOW TABLES` can be used to list the tables on your account. The table name is the name you specified as `dataset` when configuring the workers binding (refer to [Get started with Workers Analytics Engine](https://developers.cloudflare.com/analytics/analytics-engine/get-started/), for more information). The table is automatically created when you write event data in your worker.",
      "language": "unknown"
    },
    {
      "code": "Refer to [FORMAT clause](#format-clause) for the available `FORMAT` options.\n\n## SHOW TIMEZONES statement\n\n`SHOW TIMEZONES` can be used to list all of the timezones supported by the SQL API. Most common timezones are supported.",
      "language": "unknown"
    },
    {
      "code": "## SHOW TIMEZONE statement\n\n`SHOW TIMEZONE` responds with the current default timezone in use by SQL API. This should always be `Etc/UTC`.",
      "language": "unknown"
    },
    {
      "code": "## SELECT statement\n\n`SELECT` is used to query tables.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Below you can find the syntax of each clause. Refer to the [SQL API](https://developers.cloudflare.com/analytics/analytics-engine/sql-api/) documentation for some example queries.\n\n### SELECT clause\n\nThe `SELECT` clause specifies the list of columns to be included in the result. Columns can be aliased using the `AS` keyword.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Examples:",
      "language": "unknown"
    },
    {
      "code": "Additionally, expressions using supported functions and [operators](https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/operators/) can be used in place of column names:",
      "language": "unknown"
    },
    {
      "code": "### FROM clause\n\n`FROM` is used to specify the source of the data for the query.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Examples:",
      "language": "unknown"
    },
    {
      "code": "Note that queries can only operate on a single table. `UNION`, `JOIN` etc. are not currently supported.\n\n### WHERE clause\n\n`WHERE` is used to filter the rows returned by a query.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`<condition>` can be any expression that evaluates to a boolean.\n\n[Comparison operators](https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/operators/#comparison-operators) can be used to compare values and [boolean operators](https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/operators/#boolean-operators) can be used to combine conditions.\n\nExpressions containing functions and [operators](https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/operators/#supported-operators) are supported.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "### GROUP BY clause\n\nWhen using aggregate functions, `GROUP BY` specifies the groups over which the aggregation is run.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "For example, if you had a table of temperature readings:",
      "language": "unknown"
    },
    {
      "code": "In the usual case the `<expression>` can just be a column name but it is also possible to supply a complex expression here. Multiple expressions or column names can be supplied separated by commas.\n\n### ORDER BY clause\n\n`ORDER BY` can be used to control the order in which rows are returned.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`<expression>` can just be a column name.\n\n`ASC` or `DESC` determines if the ordering is ascending or descending. `ASC` is the default, and can be omitted.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "### LIMIT clause\n\n`LIMIT` specifies a maximum number of rows to return.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Supply the maximum number of rows to return or `ALL` for no restriction.\n\nFor example:",
      "language": "unknown"
    },
    {
      "code": "### OFFSET clause\n\n`OFFSET` specifies a number of rows to skip in the query result.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "For example:",
      "language": "unknown"
    },
    {
      "code": "### FORMAT clause\n\n`FORMAT` controls how to the returned data is encoded.\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "If no format clause is included then the default format of `JSON` will be used.\n\nOverride the default by setting a format. For example:",
      "language": "unknown"
    },
    {
      "code": "The following formats are supported:\n\n#### JSON\n\nData is returned as a single JSON object with schema data included:",
      "language": "unknown"
    },
    {
      "code": "#### JSONEachRow\n\nData is returned with a separate JSON object per row. Rows are newline separated and there is no header line or schema data:",
      "language": "unknown"
    },
    {
      "code": "#### TabSeparated\n\nData is returned with newline separated rows. Columns are separated with tabs. There is no header.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/string-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/string-functions/index.md\n---\n\n## length\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the length of a string. This function is UTF-8 compatible.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "For backwards-compatibility, this function is the equivalent of ClickHouse's `lengthUTF8` function, rather than ClickHouse's `length` function.\n\n## empty\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns a boolean saying whether the string was empty. This computation can also be done as a binary operation: `{string} = ''`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "For backwards compatibility, this function can also be called using `empty(<string>)`.\n\n## lower\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the string converted to lowercase. This function is NOT Unicode compatible - refer to `lowerUTF8` for that.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## lowerUTF8 New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the string converted to lowercase. This function is Unicode compatible. This may not be perfect for all languages and users with stringent needs, should do the operation in their own code.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "For backwards compatibility, this function can also be called using `toLower({string})`.\n\n## upper\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the string converted to uppercase. This function is NOT Unicode compatible - refer to `upperUTF8` for that.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## upperUTF8 New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the string converted to uppercase. This function is Unicode compatible. The results may not be perfect for all languages and users with strict needs. These users should do the operation in their own code.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "For backwards compatibility, this function can also be called using `toUpper({string})`.\n\n## startsWith\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns a boolean of whether the first string has the second string at its start.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## endsWith\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns a boolean of whether the first string contains the second string at its end.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## position\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Returns the position of one string, `needle`, in another, `haystack`. In SQL, indexes are usually 1-based. That means that position returns `1` if your needle is at the start of the haystack. It only returns `0` if your string is not found.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## substring\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Extracts part of a string, starting at the Unicode code point indicated by the offset and returning the number of code points requested by the length. As previously mentioned, in SQL, indexes are usually 1-based. That means that the offset provided to substring should be at least `1`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "## format\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "This function supports formatting strings, integers, floats, datetimes, intervals, etc, except `NULL`. The function does not support literal `{` and `}` characters in the format string.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "The [formatDateTime](https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/date-time-functions/#formatdatetime) function might also be useful.\n\n## extract\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "`extract` returns an integer number of time units from a datetime. It supports `YEAR`, `MONTH`, `DAY`, `HOUR`, `MINUTE` and `SECOND`.\n\nExamples:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SQL Reference · Cloudflare Analytics docs\ndescription: \"Usage:\"\nlastUpdated: 2025-10-01T10:02:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/type-conversion-functions/\n  md: https://developers.cloudflare.com/analytics/analytics-engine/sql-reference/type-conversion-functions/index.md\n---\n\n## toUInt8 New\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Converts any numeric expression, or expression resulting in a string representation of a decimal, into an unsigned 8 bit integer.\n\nBehaviour for negative numbers is undefined.\n\n## toUInt32\n\nUsage:",
      "language": "unknown"
    },
    {
      "code": "Converts any numeric expression, or expression resulting in a string representation of a decimal, into an unsigned 32 bit integer.\n\nBehaviour for negative numbers is undefined.\n\n</page>\n\n<page>\n---\ntitle: Confidence Intervals · Cloudflare Analytics docs\ndescription: Confidence intervals help assess accuracy and quantify uncertainty\n  in results from sampled datasets. When querying sum or count fields on\n  adaptive datasets, you can request a confidence interval to understand the\n  possible range around an estimate. For example, specifying a confidence level\n  of 0.95 returns the estimate, along with the range of values that likely\n  contains the true value 95% of the time.\nlastUpdated: 2025-09-24T15:13:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/graphql-api/features/confidence-intervals/\n  md: https://developers.cloudflare.com/analytics/graphql-api/features/confidence-intervals/index.md\n---\n\nConfidence intervals help assess accuracy and quantify uncertainty in results from sampled datasets. When querying sum or count fields on adaptive datasets, you can request a confidence interval to understand the possible range around an estimate. For example, specifying a confidence level of `0.95` returns the estimate, along with the range of values that likely contains the true value 95% of the time.\n\n## Availability\n\n* **Supported datasets**: Adaptive (sampled) datasets only.\n* **Supported fields**: All `sum` and `count` fields.\n* **Usage**: Confidence `level` must be provided as a decimal between 0 and 1 (for example,`0.90`, `0.95`, `0.99`).\n* **Default**: If no confidence level is specified, intervals are not returned.\n\n## Usage example\n\nThe following example shows how to query a confidence interval and interpret the response.\n\n### Request\n\nTo request a confidence interval, use the `confidence(level: X)` argument in your query.",
      "language": "unknown"
    },
    {
      "code": "[Run in GraphQL API Explorer](https://graphql.cloudflare.com/explorer?query=I4VwpgTgngBAygSwHYHMA2YAiBDALtgZzFwHUFcALAYQHskAzBAEzCQGMwAKAEgC86wAFWwoAXDAK4IyFABoY3Sdgi5xghAFsw87qyZrNYAJQwA3gCgYMAG4IwAd0hnLVmPyRgCnRmlyRxpu5CIuJ8AsIoAL4mFq6ujBAO2GhoAKLWrLgEAIJM2AAOuAgZAOIQNCD5Xi5xVj5+EAF5fkVaAPooqgpKKvLNxIZtvqF6kTW1aJrk4gCMAAwL41YxS65sFUi4q1bY1ijOtbUE2Br5GACSm5DWydswY4dW6wzMrBycGBlo4nMAdACcAFYVo81htcAdQa5PK08GA7nE0DRHBAEa5KvlIGirMdThhELx4VD7ncHrUyVYyWNIkA\\&variables=N4IgXg9gdgpgKgQwOYgFwgFoHkByBRAfQEkAREAGhAGcAXBAJxrRACYAGFgVgFoBGF7gGY2cFi1TDUbAOwYKIGFAAmzdlz4DBvOGwAsEtlNkgAvkA)\n\n### Response\n\nThe response includes the following values:\n\n* `estimate`: The estimated value, based on sampled data.\n* `lower`: The lower bound of the confidence interval.\n* `sampleSize`: The number of sampled data points used to calculate the estimate.\n* `upper`: The upper bound of the confidence interval.\n\nIn this example, the interpretation of the response is that, based on a sample of 40,054, the estimated number of events is 42,939, with 95% confidence that the true value lies between 42,673 and 43,204.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Datasets (tables) · Cloudflare Analytics docs\ndescription: |-\n  Cloudflare Analytics offers a range of datasets, including both general and\n  product-specific ones. Datasets use a consistent naming scheme that explicitly\n  identifies the type of data they return:\nlastUpdated: 2024-09-11T11:09:20.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/analytics/graphql-api/features/data-sets/\n  md: https://developers.cloudflare.com/analytics/graphql-api/features/data-sets/index.md\n---\n\nCloudflare Analytics offers a range of datasets, including both general and product-specific ones. Datasets use a consistent naming scheme that explicitly identifies the type of data they return:\n\n* **Domain** - Each dataset is named after the field it describes and is associated with a set of nodes. Product-specific data nodes incorporate the name of the relevant product, for instance `loadBalancingRequests*` nodes.\n\n* **Adaptive Sampling** - Nodes that represent data acquired using adaptive sampling incorporate the `Adaptive` suffix. For more details, refer to [sampling](https://developers.cloudflare.com/analytics/graphql-api/sampling/).\n\n* **Aggregated data** - Nodes that represent aggregated data include the `Groups` suffix. For example, the `loadBalancingRequestsAdaptiveGroups` node represents aggregated data for Load Balancing requests. Aggregated data is returned in an array of `...Group` objects. Please note: we have a node that currently excluded from that naming convention - `workersInvocationsAdaptive` (beta).\n\n* **Raw data** - Raw data nodes, such as `loadBalancingRequestsAdaptive`, are not aggregated and so do not incorporate the `Groups` suffix. Raw data is returned in arrays containing objects of the relevant data type. For example, a query to `loadBalancingRequestsAdaptive` returns a variety of `LoadBalancingRequest` objects.\n\nTo find out more information about datasets, availability, beta, and deprecation statuses, please refer to GraphQL [discovery](https://developers.cloudflare.com/analytics/graphql-api/features/discovery/) features.\n\n## Working with datasets\n\n### Aggregated fields\n\nThis example illustrates the structure for Groups:",
      "language": "unknown"
    },
    {
      "code": "Unique values are not available as a dimension but can be queried as demonstrated in this example:",
      "language": "unknown"
    },
    {
      "code": "### Schema type definitions\n\nEvery exposed table has a GraphQL type definition. Type definitions observe the following rules:\n\n* Regular fields represent themselves.\n* Every field, including nested fields, has a type and represents a list of that type.\n* The `enum` type represents an enumerated field.\n\nHere is an example type definition for `ContentTypeMapElem`:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "`send_event`",
      "id": "`send_event`"
    },
    {
      "level": "h2",
      "text": "REST API (HTTP)",
      "id": "rest-api-(http)"
    },
    {
      "level": "h2",
      "text": "Command line (CLI)",
      "id": "command-line-(cli)"
    },
    {
      "level": "h2",
      "text": "WorkflowEntrypoint",
      "id": "workflowentrypoint"
    },
    {
      "level": "h2",
      "text": "WorkflowStep",
      "id": "workflowstep"
    },
    {
      "level": "h3",
      "text": "`event` parameter",
      "id": "`event`-parameter"
    },
    {
      "level": "h2",
      "text": "Error Handling",
      "id": "error-handling"
    },
    {
      "level": "h3",
      "text": "NonRetryableError",
      "id": "nonretryableerror"
    },
    {
      "level": "h2",
      "text": "Configure a workflow instance",
      "id": "configure-a-workflow-instance"
    },
    {
      "level": "h3",
      "text": "Create an instance via binding",
      "id": "create-an-instance-via-binding"
    },
    {
      "level": "h2",
      "text": "2025-09-12",
      "id": "2025-09-12"
    },
    {
      "level": "h2",
      "text": "2025-08-22",
      "id": "2025-08-22"
    },
    {
      "level": "h2",
      "text": "2025-05-07",
      "id": "2025-05-07"
    },
    {
      "level": "h2",
      "text": "2025-04-29",
      "id": "2025-04-29"
    },
    {
      "level": "h2",
      "text": "2025-04-07",
      "id": "2025-04-07"
    },
    {
      "level": "h2",
      "text": "2025-02-25",
      "id": "2025-02-25"
    },
    {
      "level": "h2",
      "text": "2025-02-11",
      "id": "2025-02-11"
    },
    {
      "level": "h2",
      "text": "2025-01-23",
      "id": "2025-01-23"
    },
    {
      "level": "h2",
      "text": "2025-01-09",
      "id": "2025-01-09"
    },
    {
      "level": "h2",
      "text": "2024-12-19",
      "id": "2024-12-19"
    },
    {
      "level": "h2",
      "text": "2024-12-09",
      "id": "2024-12-09"
    },
    {
      "level": "h2",
      "text": "2024-11-30",
      "id": "2024-11-30"
    },
    {
      "level": "h2",
      "text": "2024-11-21",
      "id": "2024-11-21"
    },
    {
      "level": "h2",
      "text": "2024-11-20",
      "id": "2024-11-20"
    },
    {
      "level": "h2",
      "text": "2024-10-23",
      "id": "2024-10-23"
    },
    {
      "level": "h2",
      "text": "Available Workflows events",
      "id": "available-workflows-events"
    },
    {
      "level": "h3",
      "text": "`waiting` instances do not count towards instance concurrency limits",
      "id": "`waiting`-instances-do-not-count-towards-instance-concurrency-limits"
    },
    {
      "level": "h3",
      "text": "Increasing Workflow CPU limits",
      "id": "increasing-workflow-cpu-limits"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h3",
      "text": "Workflows Pricing",
      "id": "workflows-pricing"
    },
    {
      "level": "h3",
      "text": "Storage Usage",
      "id": "storage-usage"
    },
    {
      "level": "h2",
      "text": "Frequently Asked Questions",
      "id": "frequently-asked-questions"
    },
    {
      "level": "h3",
      "text": "Are there additional costs for Workflows?",
      "id": "are-there-additional-costs-for-workflows?"
    },
    {
      "level": "h3",
      "text": "Are Workflows available on the [Workers Free](https://developers.cloudflare.com/workers/platform/pricing/#workers) plan?",
      "id": "are-workflows-available-on-the-[workers-free](https://developers.cloudflare.com/workers/platform/pricing/#workers)-plan?"
    },
    {
      "level": "h3",
      "text": "What is a Workflow invocation?",
      "id": "what-is-a-workflow-invocation?"
    },
    {
      "level": "h3",
      "text": "How do Workflows show up on my bill?",
      "id": "how-do-workflows-show-up-on-my-bill?"
    },
    {
      "level": "h3",
      "text": "Are there any limits to Workflows?",
      "id": "are-there-any-limits-to-workflows?"
    },
    {
      "level": "h2",
      "text": "`workflows list`",
      "id": "`workflows-list`"
    },
    {
      "level": "h2",
      "text": "`workflows describe`",
      "id": "`workflows-describe`"
    },
    {
      "level": "h2",
      "text": "`workflows delete`",
      "id": "`workflows-delete`"
    },
    {
      "level": "h2",
      "text": "`workflows trigger`",
      "id": "`workflows-trigger`"
    },
    {
      "level": "h2",
      "text": "`workflows instances list`",
      "id": "`workflows-instances-list`"
    },
    {
      "level": "h2",
      "text": "`workflows instances describe`",
      "id": "`workflows-instances-describe`"
    },
    {
      "level": "h2",
      "text": "`workflows instances terminate`",
      "id": "`workflows-instances-terminate`"
    },
    {
      "level": "h2",
      "text": "`workflows instances restart`",
      "id": "`workflows-instances-restart`"
    },
    {
      "level": "h2",
      "text": "`workflows instances pause`",
      "id": "`workflows-instances-pause`"
    },
    {
      "level": "h2",
      "text": "`workflows instances resume`",
      "id": "`workflows-instances-resume`"
    },
    {
      "level": "h2",
      "text": "Creating a Worker",
      "id": "creating-a-worker"
    },
    {
      "level": "h2",
      "text": "Configuring your Context Enricher",
      "id": "configuring-your-context-enricher"
    },
    {
      "level": "h2",
      "text": "Example Context Enricher",
      "id": "example-context-enricher"
    },
    {
      "level": "h3",
      "text": "Adding arbitrary information using an API",
      "id": "adding-arbitrary-information-using-an-api"
    },
    {
      "level": "h3",
      "text": "Masking sensitive information, such as emails",
      "id": "masking-sensitive-information,-such-as-emails"
    },
    {
      "level": "h2",
      "text": "Using the data layer with Zaraz",
      "id": "using-the-data-layer-with-zaraz"
    },
    {
      "level": "h2",
      "text": "Background",
      "id": "background"
    },
    {
      "level": "h2",
      "text": "Consent Mode v2",
      "id": "consent-mode-v2"
    },
    {
      "level": "h3",
      "text": "Set the default consent status",
      "id": "set-the-default-consent-status"
    },
    {
      "level": "h3",
      "text": "Update the consent status",
      "id": "update-the-consent-status"
    },
    {
      "level": "h3",
      "text": "Verify if Zaraz is processing Consent Mode v2",
      "id": "verify-if-zaraz-is-processing-consent-mode-v2"
    },
    {
      "level": "h2",
      "text": "Consent Mode v1",
      "id": "consent-mode-v1"
    },
    {
      "level": "h3",
      "text": "Set up Consent Mode v1",
      "id": "set-up-consent-mode-v1"
    },
    {
      "level": "h2",
      "text": "Supported Tools",
      "id": "supported-tools"
    },
    {
      "level": "h2",
      "text": "Export your Zaraz configuration",
      "id": "export-your-zaraz-configuration"
    },
    {
      "level": "h2",
      "text": "Import your Zaraz configuration",
      "id": "import-your-zaraz-configuration"
    },
    {
      "level": "h2",
      "text": "Prepare a Managed Component",
      "id": "prepare-a-managed-component"
    },
    {
      "level": "h2",
      "text": "Deploy a Managed Component to Cloudflare",
      "id": "deploy-a-managed-component-to-cloudflare"
    },
    {
      "level": "h2",
      "text": "Configure a Managed Component in Cloudflare",
      "id": "configure-a-managed-component-in-cloudflare"
    },
    {
      "level": "h2",
      "text": "Unsupported Features",
      "id": "unsupported-features"
    },
    {
      "level": "h2",
      "text": "Setup",
      "id": "setup"
    },
    {
      "level": "h3",
      "text": "1. Create a Logpush job",
      "id": "1.-create-a-logpush-job"
    },
    {
      "level": "h3",
      "text": "2. Enable Logpush from Zaraz settings",
      "id": "2.-enable-logpush-from-zaraz-settings"
    },
    {
      "level": "h2",
      "text": "Fields",
      "id": "fields"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Converting a string to lowercase",
      "id": "converting-a-string-to-lowercase"
    },
    {
      "level": "h3",
      "text": "Sending a sum of all products in the cart",
      "id": "sending-a-sum-of-all-products-in-the-cart"
    },
    {
      "level": "h2",
      "text": "Background",
      "id": "background"
    },
    {
      "level": "h2",
      "text": "Events",
      "id": "events"
    },
    {
      "level": "h3",
      "text": "`Consent API Ready`",
      "id": "`consent-api-ready`"
    },
    {
      "level": "h3",
      "text": "`Consent Choices Updated`",
      "id": "`consent-choices-updated`"
    },
    {
      "level": "h2",
      "text": "Properties",
      "id": "properties"
    },
    {
      "level": "h2",
      "text": "Methods",
      "id": "methods"
    },
    {
      "level": "h3",
      "text": "`Get`",
      "id": "`get`"
    },
    {
      "level": "h3",
      "text": "`Set`",
      "id": "`set`"
    },
    {
      "level": "h3",
      "text": "`Get All`",
      "id": "`get-all`"
    },
    {
      "level": "h3",
      "text": "`Set All`",
      "id": "`set-all`"
    },
    {
      "level": "h3",
      "text": "`Get All Checkboxes`",
      "id": "`get-all-checkboxes`"
    },
    {
      "level": "h3",
      "text": "`Set Checkboxes`",
      "id": "`set-checkboxes`"
    },
    {
      "level": "h3",
      "text": "`Set All Checkboxes`",
      "id": "`set-all-checkboxes`"
    },
    {
      "level": "h3",
      "text": "`Send queued events`",
      "id": "`send-queued-events`"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Restricting consent checks based on location",
      "id": "restricting-consent-checks-based-on-location"
    },
    {
      "level": "h2",
      "text": "Adding different languages",
      "id": "adding-different-languages"
    },
    {
      "level": "h2",
      "text": "Overriding the consent modal language",
      "id": "overriding-the-consent-modal-language"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "Add an additional field to a specific action",
      "id": "add-an-additional-field-to-a-specific-action"
    },
    {
      "level": "h2",
      "text": "Add an additional field to all actions in a tool",
      "id": "add-an-additional-field-to-all-actions-in-a-tool"
    },
    {
      "level": "h2",
      "text": "Enable or disable a tool",
      "id": "enable-or-disable-a-tool"
    },
    {
      "level": "h2",
      "text": "Enable or disable an action",
      "id": "enable-or-disable-an-action"
    },
    {
      "level": "h2",
      "text": "Delete a tool",
      "id": "delete-a-tool"
    },
    {
      "level": "h2",
      "text": "Delete a trigger",
      "id": "delete-a-trigger"
    },
    {
      "level": "h2",
      "text": "Enable Preview & Publish mode",
      "id": "enable-preview-&-publish-mode"
    },
    {
      "level": "h3",
      "text": "Test changes before publishing them",
      "id": "test-changes-before-publishing-them"
    },
    {
      "level": "h2",
      "text": "Disable Preview & Publish mode",
      "id": "disable-preview-&-publish-mode"
    },
    {
      "level": "h2",
      "text": "Access Version History",
      "id": "access-version-history"
    },
    {
      "level": "h2",
      "text": "Revert changes",
      "id": "revert-changes"
    },
    {
      "level": "h2",
      "text": "Key Entities",
      "id": "key-entities"
    },
    {
      "level": "h2",
      "text": "Example GraphQL Queries",
      "id": "example-graphql-queries"
    },
    {
      "level": "h3",
      "text": "Variables Example",
      "id": "variables-example"
    },
    {
      "level": "h3",
      "text": "Explanation of Parameters",
      "id": "explanation-of-parameters"
    },
    {
      "level": "h2",
      "text": "Example `curl` Request",
      "id": "example-`curl`-request"
    },
    {
      "level": "h3",
      "text": "Explanation of the `curl` Components",
      "id": "explanation-of-the-`curl`-components"
    },
    {
      "level": "h2",
      "text": "Additional Resources",
      "id": "additional-resources"
    },
    {
      "level": "h2",
      "text": "System properties",
      "id": "system-properties"
    },
    {
      "level": "h3",
      "text": "Page information",
      "id": "page-information"
    },
    {
      "level": "h3",
      "text": "Cookies",
      "id": "cookies"
    },
    {
      "level": "h3",
      "text": "Device information",
      "id": "device-information"
    },
    {
      "level": "h3",
      "text": "Consent Management",
      "id": "consent-management"
    },
    {
      "level": "h3",
      "text": "Managed Components",
      "id": "managed-components"
    },
    {
      "level": "h3",
      "text": "Miscellaneous",
      "id": "miscellaneous"
    },
    {
      "level": "h2",
      "text": "Event properties",
      "id": "event-properties"
    },
    {
      "level": "h2",
      "text": "Web API",
      "id": "web-api"
    },
    {
      "level": "h2",
      "text": "Page Properties",
      "id": "page-properties"
    },
    {
      "level": "h2",
      "text": "Cookies",
      "id": "cookies"
    },
    {
      "level": "h2",
      "text": "Device properties",
      "id": "device-properties"
    },
    {
      "level": "h2",
      "text": "Device location",
      "id": "device-location"
    },
    {
      "level": "h2",
      "text": "Miscellaneous",
      "id": "miscellaneous"
    },
    {
      "level": "h2",
      "text": "Workflow",
      "id": "workflow"
    },
    {
      "level": "h2",
      "text": "Web API",
      "id": "web-api"
    },
    {
      "level": "h3",
      "text": "Debug Key",
      "id": "debug-key"
    },
    {
      "level": "h3",
      "text": "E-commerce tracking",
      "id": "e-commerce-tracking"
    },
    {
      "level": "h2",
      "text": "Compatibility",
      "id": "compatibility"
    },
    {
      "level": "h3",
      "text": "Data layer compatibility mode",
      "id": "data-layer-compatibility-mode"
    },
    {
      "level": "h3",
      "text": "Single Page Application support",
      "id": "single-page-application-support"
    },
    {
      "level": "h2",
      "text": "Privacy",
      "id": "privacy"
    },
    {
      "level": "h2",
      "text": "Injection",
      "id": "injection"
    },
    {
      "level": "h3",
      "text": "Auto-inject script",
      "id": "auto-inject-script"
    },
    {
      "level": "h3",
      "text": "Iframe injection",
      "id": "iframe-injection"
    },
    {
      "level": "h2",
      "text": "Endpoints",
      "id": "endpoints"
    },
    {
      "level": "h3",
      "text": "HTTP Events API",
      "id": "http-events-api"
    },
    {
      "level": "h2",
      "text": "Other",
      "id": "other"
    },
    {
      "level": "h3",
      "text": "Bot Score Threshold",
      "id": "bot-score-threshold"
    },
    {
      "level": "h3",
      "text": "Context Enricher",
      "id": "context-enricher"
    },
    {
      "level": "h3",
      "text": "Logpush",
      "id": "logpush"
    },
    {
      "level": "h2",
      "text": "Rule types",
      "id": "rule-types"
    },
    {
      "level": "h3",
      "text": "Match rule",
      "id": "match-rule"
    },
    {
      "level": "h3",
      "text": "Click listener",
      "id": "click-listener"
    },
    {
      "level": "h3",
      "text": "Element Visibility",
      "id": "element-visibility"
    },
    {
      "level": "h3",
      "text": "Scroll depth",
      "id": "scroll-depth"
    },
    {
      "level": "h3",
      "text": "Form submission",
      "id": "form-submission"
    },
    {
      "level": "h3",
      "text": "Timer",
      "id": "timer"
    },
    {
      "level": "h2",
      "text": "Create a new variable",
      "id": "create-a-new-variable"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "Delete a variable",
      "id": "delete-a-variable"
    },
    {
      "level": "h2",
      "text": "Creating a Worker",
      "id": "creating-a-worker"
    },
    {
      "level": "h2",
      "text": "Configuring a Worker Variable",
      "id": "configuring-a-worker-variable"
    },
    {
      "level": "h2",
      "text": "Using your Worker Variable",
      "id": "using-your-worker-variable"
    },
    {
      "level": "h2",
      "text": "Example Worker Variables",
      "id": "example-worker-variables"
    },
    {
      "level": "h3",
      "text": "Calculates the sum of all products in the cart",
      "id": "calculates-the-sum-of-all-products-in-the-cart"
    },
    {
      "level": "h3",
      "text": "Match a cookie with a user in your backend",
      "id": "match-a-cookie-with-a-user-in-your-backend"
    },
    {
      "level": "h3",
      "text": "Hash a value before sending it to a third-party vendor",
      "id": "hash-a-value-before-sending-it-to-a-third-party-vendor"
    },
    {
      "level": "h2",
      "text": "Enable e-commerce tracking",
      "id": "enable-e-commerce-tracking"
    },
    {
      "level": "h2",
      "text": "Add e-commerce tracking to your website",
      "id": "add-e-commerce-tracking-to-your-website"
    },
    {
      "level": "h2",
      "text": "List of supported events",
      "id": "list-of-supported-events"
    },
    {
      "level": "h2",
      "text": "List of supported parameters:",
      "id": "list-of-supported-parameters:"
    },
    {
      "level": "h2",
      "text": "Event code examples",
      "id": "event-code-examples"
    },
    {
      "level": "h3",
      "text": "Product viewed",
      "id": "product-viewed"
    },
    {
      "level": "h3",
      "text": "Product List Viewed",
      "id": "product-list-viewed"
    },
    {
      "level": "h3",
      "text": "Product added",
      "id": "product-added"
    },
    {
      "level": "h3",
      "text": "Checkout Step Viewed",
      "id": "checkout-step-viewed"
    },
    {
      "level": "h3",
      "text": "Order completed",
      "id": "order-completed"
    },
    {
      "level": "h2",
      "text": "Cloudflare WARP client",
      "id": "cloudflare-warp-client"
    },
    {
      "level": "h2",
      "text": "DNSCrypt-Proxy",
      "id": "dnscrypt-proxy"
    },
    {
      "level": "h2",
      "text": "Mozilla Firefox",
      "id": "mozilla-firefox"
    },
    {
      "level": "h2",
      "text": "Google Chrome",
      "id": "google-chrome"
    },
    {
      "level": "h2",
      "text": "Microsoft Edge",
      "id": "microsoft-edge"
    },
    {
      "level": "h2",
      "text": "Brave",
      "id": "brave"
    },
    {
      "level": "h2",
      "text": "Check if the browser is configured correctly",
      "id": "check-if-the-browser-is-configured-correctly"
    },
    {
      "level": "h2",
      "text": "HTTP method",
      "id": "http-method"
    },
    {
      "level": "h2",
      "text": "Valid MIME types",
      "id": "valid-mime-types"
    },
    {
      "level": "h2",
      "text": "Send multiple questions in a query",
      "id": "send-multiple-questions-in-a-query"
    },
    {
      "level": "h2",
      "text": "Authentication",
      "id": "authentication"
    },
    {
      "level": "h2",
      "text": "Supported TLS versions",
      "id": "supported-tls-versions"
    },
    {
      "level": "h2",
      "text": "Return codes",
      "id": "return-codes"
    },
    {
      "level": "h2",
      "text": "Frequently asked questions for site owners",
      "id": "frequently-asked-questions-for-site-owners"
    },
    {
      "level": "h3",
      "text": "Can I set different prices for different AI crawlers?",
      "id": "can-i-set-different-prices-for-different-ai-crawlers?"
    },
    {
      "level": "h2",
      "text": "Frequently asked questions for AI bot operators",
      "id": "frequently-asked-questions-for-ai-bot-operators"
    },
    {
      "level": "h3",
      "text": "Will I be charged for re-crawling the same page?",
      "id": "will-i-be-charged-for-re-crawling-the-same-page?"
    },
    {
      "level": "h3",
      "text": "Am I charged for error responses?",
      "id": "am-i-charged-for-error-responses?"
    },
    {
      "level": "h3",
      "text": "What user agent should I use?",
      "id": "what-user-agent-should-i-use?"
    },
    {
      "level": "h2",
      "text": "What is Pay Per Crawl?",
      "id": "what-is-pay-per-crawl?"
    },
    {
      "level": "h2",
      "text": "Additional resources",
      "id": "additional-resources"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Enable DLP for AI Gateway",
      "id": "enable-dlp-for-ai-gateway"
    },
    {
      "level": "h2",
      "text": "Add DLP policies",
      "id": "add-dlp-policies"
    },
    {
      "level": "h2",
      "text": "Manage DLP policies",
      "id": "manage-dlp-policies"
    },
    {
      "level": "h2",
      "text": "Test your configuration",
      "id": "test-your-configuration"
    },
    {
      "level": "h2",
      "text": "Monitor DLP events",
      "id": "monitor-dlp-events"
    },
    {
      "level": "h3",
      "text": "Viewing DLP logs in AI Gateway",
      "id": "viewing-dlp-logs-in-ai-gateway"
    },
    {
      "level": "h3",
      "text": "Filter DLP events",
      "id": "filter-dlp-events"
    },
    {
      "level": "h2",
      "text": "Error handling",
      "id": "error-handling"
    },
    {
      "level": "h3",
      "text": "DLP response header",
      "id": "dlp-response-header"
    },
    {
      "level": "h3",
      "text": "Error codes for blocked requests",
      "id": "error-codes-for-blocked-requests"
    },
    {
      "level": "h2",
      "text": "Best practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h3",
      "text": "DLP not triggering",
      "id": "dlp-not-triggering"
    },
    {
      "level": "h3",
      "text": "Unexpected blocking",
      "id": "unexpected-blocking"
    },
    {
      "level": "h2",
      "text": "Supported elements",
      "id": "supported-elements"
    },
    {
      "level": "h3",
      "text": "Start Element",
      "id": "start-element"
    },
    {
      "level": "h3",
      "text": "Conditional Element (If/Else)",
      "id": "conditional-element-(if/else)"
    },
    {
      "level": "h3",
      "text": "Percentage Split",
      "id": "percentage-split"
    },
    {
      "level": "h3",
      "text": "Rate/Budget Limit",
      "id": "rate/budget-limit"
    },
    {
      "level": "h3",
      "text": "Model",
      "id": "model"
    },
    {
      "level": "h3",
      "text": "End element",
      "id": "end-element"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "OpenAI SDK",
      "id": "openai-sdk"
    },
    {
      "level": "h3",
      "text": "Fetch",
      "id": "fetch"
    },
    {
      "level": "h3",
      "text": "Workers",
      "id": "workers"
    },
    {
      "level": "h2",
      "text": "Response Metadata",
      "id": "response-metadata"
    },
    {
      "level": "h2",
      "text": "Viewing Guardrail results in Logs",
      "id": "viewing-guardrail-results-in-logs"
    },
    {
      "level": "h2",
      "text": "Error handling and blocked requests",
      "id": "error-handling-and-blocked-requests"
    },
    {
      "level": "h2",
      "text": "Additional considerations",
      "id": "additional-considerations"
    },
    {
      "level": "h2",
      "text": "How logs are encrypted",
      "id": "how-logs-are-encrypted"
    },
    {
      "level": "h2",
      "text": "Setting up Workers Logpush",
      "id": "setting-up-workers-logpush"
    },
    {
      "level": "h2",
      "text": "1. Generate an RSA key pair locally",
      "id": "1.-generate-an-rsa-key-pair-locally"
    },
    {
      "level": "h2",
      "text": "2. Upload public key to gateway settings",
      "id": "2.-upload-public-key-to-gateway-settings"
    },
    {
      "level": "h2",
      "text": "3. Set up Logpush",
      "id": "3.-set-up-logpush"
    },
    {
      "level": "h2",
      "text": "4. Receive encrypted logs",
      "id": "4.-receive-encrypted-logs"
    },
    {
      "level": "h2",
      "text": "5. Decrypt logs",
      "id": "5.-decrypt-logs"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Anthropic SDK",
      "id": "anthropic-sdk"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use `openai` JavaScript SDK",
      "id": "use-`openai`-javascript-sdk"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "OpenAI-compatible chat completions API",
      "id": "openai-compatible-chat-completions-api"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use OpenAI SDK with JavaScript",
      "id": "use-openai-sdk-with-javascript"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Model-specific endpoints",
      "id": "model-specific-endpoints"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use with JavaScript",
      "id": "use-with-javascript"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Make a request",
      "id": "make-a-request"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Use `aws4fetch` SDK with TypeScript",
      "id": "use-`aws4fetch`-sdk-with-typescript"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL Structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use Cohere SDK with Python",
      "id": "use-cohere-sdk-with-python"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL Structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "SDK",
      "id": "sdk"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use DeepSeek with JavaScript",
      "id": "use-deepseek-with-javascript"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Default synchronous API",
      "id": "default-synchronous-api"
    },
    {
      "level": "h3",
      "text": "cURL example",
      "id": "curl-example"
    },
    {
      "level": "h2",
      "text": "Custom target URLs",
      "id": "custom-target-urls"
    },
    {
      "level": "h3",
      "text": "cURL example with custom target URL",
      "id": "curl-example-with-custom-target-url"
    },
    {
      "level": "h2",
      "text": "WebSocket API",
      "id": "websocket-api"
    },
    {
      "level": "h2",
      "text": "JavaScript SDK integration",
      "id": "javascript-sdk-integration"
    },
    {
      "level": "h3",
      "text": "JavaScript SDK example",
      "id": "javascript-sdk-example"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "`@google/genai`",
      "id": "`@google/genai`"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use OpenAI SDK with JavaScript",
      "id": "use-openai-sdk-with-javascript"
    },
    {
      "level": "h3",
      "text": "Use OpenAI SDK with Python",
      "id": "use-openai-sdk-with-python"
    },
    {
      "level": "h3",
      "text": "Use Anthropic SDK with JavaScript",
      "id": "use-anthropic-sdk-with-javascript"
    },
    {
      "level": "h3",
      "text": "Use Anthropic SDK with Python",
      "id": "use-anthropic-sdk-with-python"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use Groq SDK with JavaScript",
      "id": "use-groq-sdk-with-javascript"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use HuggingFace.js library with JavaScript",
      "id": "use-huggingface.js-library-with-javascript"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use with JavaScript",
      "id": "use-with-javascript"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use `@mistralai/mistralai` package with JavaScript",
      "id": "use-`@mistralai/mistralai`-package-with-javascript"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "OpenAI SDK",
      "id": "openai-sdk"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use OpenAI SDK with JavaScript",
      "id": "use-openai-sdk-with-javascript"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Tasks API",
      "id": "tasks-api"
    },
    {
      "level": "h3",
      "text": "Search API",
      "id": "search-api"
    },
    {
      "level": "h2",
      "text": "Chat API",
      "id": "chat-api"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h3",
      "text": "FindAll API",
      "id": "findall-api"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h3",
      "text": "Use Perplexity through OpenAI SDK with JavaScript",
      "id": "use-perplexity-through-openai-sdk-with-javascript"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h2",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "URL structure",
      "id": "url-structure"
    },
    {
      "level": "h2",
      "text": "Authenticating with Vertex AI",
      "id": "authenticating-with-vertex-ai"
    },
    {
      "level": "h3",
      "text": "Option 1: Service Account JSON",
      "id": "option-1:-service-account-json"
    },
    {
      "level": "h3",
      "text": "Option 2: Direct Access Token",
      "id": "option-2:-direct-access-token"
    },
    {
      "level": "h2",
      "text": "Using Unified Chat Completions API",
      "id": "using-unified-chat-completions-api"
    },
    {
      "level": "h3",
      "text": "Endpoint",
      "id": "endpoint"
    },
    {
      "level": "h3",
      "text": "Example with OpenAI SDK",
      "id": "example-with-openai-sdk"
    },
    {
      "level": "h3",
      "text": "Example with cURL",
      "id": "example-with-curl"
    },
    {
      "level": "h2",
      "text": "Using Provider-Specific Endpoint",
      "id": "using-provider-specific-endpoint"
    },
    {
      "level": "h3",
      "text": "cURL",
      "id": "curl"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "REST API",
      "id": "rest-api"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "OpenAI compatible endpoints",
      "id": "openai-compatible-endpoints"
    },
    {
      "level": "h2",
      "text": "Workers Binding",
      "id": "workers-binding"
    },
    {
      "level": "h2",
      "text": "OpenAI-Compatible Endpoint",
      "id": "openai-compatible-endpoint"
    },
    {
      "level": "h2",
      "text": "Set up WebSockets API",
      "id": "set-up-websockets-api"
    },
    {
      "level": "h2",
      "text": "Example request",
      "id": "example-request"
    },
    {
      "level": "h2",
      "text": "Example response",
      "id": "example-response"
    },
    {
      "level": "h2",
      "text": "Example streaming request",
      "id": "example-streaming-request"
    },
    {
      "level": "h2",
      "text": "Supported Providers",
      "id": "supported-providers"
    },
    {
      "level": "h2",
      "text": "Authentication",
      "id": "authentication"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "OpenAI",
      "id": "openai"
    },
    {
      "level": "h3",
      "text": "Google AI Studio",
      "id": "google-ai-studio"
    },
    {
      "level": "h3",
      "text": "Cartesia",
      "id": "cartesia"
    },
    {
      "level": "h3",
      "text": "ElevenLabs",
      "id": "elevenlabs"
    },
    {
      "level": "h3",
      "text": "Fal AI",
      "id": "fal-ai"
    },
    {
      "level": "h3",
      "text": "Deepgram (Workers AI)",
      "id": "deepgram-(workers-ai)"
    },
    {
      "level": "h2",
      "text": "File limits",
      "id": "file-limits"
    },
    {
      "level": "h2",
      "text": "File types",
      "id": "file-types"
    },
    {
      "level": "h3",
      "text": "Plain text file types",
      "id": "plain-text-file-types"
    },
    {
      "level": "h3",
      "text": "Rich format file types",
      "id": "rich-format-file-types"
    },
    {
      "level": "h2",
      "text": "How website crawling works",
      "id": "how-website-crawling-works"
    },
    {
      "level": "h2",
      "text": "How to set WAF rules to allowlist the crawler",
      "id": "how-to-set-waf-rules-to-allowlist-the-crawler"
    },
    {
      "level": "h2",
      "text": "Parsing options",
      "id": "parsing-options"
    },
    {
      "level": "h2",
      "text": "Access protected content",
      "id": "access-protected-content"
    },
    {
      "level": "h3",
      "text": "Providing access to sites protected by Cloudflare Access",
      "id": "providing-access-to-sites-protected-by-cloudflare-access"
    },
    {
      "level": "h2",
      "text": "Storage",
      "id": "storage"
    },
    {
      "level": "h2",
      "text": "Sync and updates",
      "id": "sync-and-updates"
    },
    {
      "level": "h2",
      "text": "Limits",
      "id": "limits"
    },
    {
      "level": "h2",
      "text": "Production models",
      "id": "production-models"
    },
    {
      "level": "h3",
      "text": "Text generation",
      "id": "text-generation"
    },
    {
      "level": "h3",
      "text": "Embedding",
      "id": "embedding"
    },
    {
      "level": "h3",
      "text": "Reranking",
      "id": "reranking"
    },
    {
      "level": "h2",
      "text": "Transition models",
      "id": "transition-models"
    },
    {
      "level": "h2",
      "text": "Recording data on usage",
      "id": "recording-data-on-usage"
    },
    {
      "level": "h2",
      "text": "Viewing usage",
      "id": "viewing-usage"
    },
    {
      "level": "h2",
      "text": "Billing customers",
      "id": "billing-customers"
    },
    {
      "level": "h2",
      "text": "count",
      "id": "count"
    },
    {
      "level": "h2",
      "text": "sum",
      "id": "sum"
    },
    {
      "level": "h2",
      "text": "avg",
      "id": "avg"
    },
    {
      "level": "h2",
      "text": "min",
      "id": "min"
    },
    {
      "level": "h2",
      "text": "max",
      "id": "max"
    },
    {
      "level": "h2",
      "text": "quantileExactWeighted",
      "id": "quantileexactweighted"
    },
    {
      "level": "h2",
      "text": "argMax New",
      "id": "argmax-new"
    },
    {
      "level": "h2",
      "text": "argMin New",
      "id": "argmin-new"
    },
    {
      "level": "h2",
      "text": "first\\_value New",
      "id": "first\\_value-new"
    },
    {
      "level": "h2",
      "text": "last\\_value New",
      "id": "last\\_value-new"
    },
    {
      "level": "h2",
      "text": "topK New",
      "id": "topk-new"
    },
    {
      "level": "h2",
      "text": "topKWeighted New",
      "id": "topkweighted-new"
    },
    {
      "level": "h2",
      "text": "countIf New",
      "id": "countif-new"
    },
    {
      "level": "h2",
      "text": "sumIf New",
      "id": "sumif-new"
    },
    {
      "level": "h2",
      "text": "avgIf New",
      "id": "avgif-new"
    },
    {
      "level": "h2",
      "text": "bitAnd New",
      "id": "bitand-new"
    },
    {
      "level": "h2",
      "text": "bitCount New",
      "id": "bitcount-new"
    },
    {
      "level": "h2",
      "text": "bitHammingDistance New",
      "id": "bithammingdistance-new"
    },
    {
      "level": "h2",
      "text": "bitNot New",
      "id": "bitnot-new"
    },
    {
      "level": "h2",
      "text": "bitOr New",
      "id": "bitor-new"
    },
    {
      "level": "h2",
      "text": "bitRotateLeft New",
      "id": "bitrotateleft-new"
    },
    {
      "level": "h2",
      "text": "bitRotateRight New",
      "id": "bitrotateright-new"
    },
    {
      "level": "h2",
      "text": "bitShiftLeft New",
      "id": "bitshiftleft-new"
    },
    {
      "level": "h2",
      "text": "bitShiftRight New",
      "id": "bitshiftright-new"
    },
    {
      "level": "h2",
      "text": "bitTest New",
      "id": "bittest-new"
    },
    {
      "level": "h2",
      "text": "bitXor New",
      "id": "bitxor-new"
    },
    {
      "level": "h2",
      "text": "if",
      "id": "if"
    },
    {
      "level": "h2",
      "text": "formatDateTime",
      "id": "formatdatetime"
    },
    {
      "level": "h2",
      "text": "now",
      "id": "now"
    },
    {
      "level": "h2",
      "text": "today New",
      "id": "today-new"
    },
    {
      "level": "h2",
      "text": "toDateTime",
      "id": "todatetime"
    },
    {
      "level": "h2",
      "text": "toYear New",
      "id": "toyear-new"
    },
    {
      "level": "h2",
      "text": "toMonth New",
      "id": "tomonth-new"
    },
    {
      "level": "h2",
      "text": "toDayOfWeek New",
      "id": "todayofweek-new"
    },
    {
      "level": "h2",
      "text": "toDayOfMonth New",
      "id": "todayofmonth-new"
    },
    {
      "level": "h2",
      "text": "toHour New",
      "id": "tohour-new"
    },
    {
      "level": "h2",
      "text": "toMinute New",
      "id": "tominute-new"
    },
    {
      "level": "h2",
      "text": "toSecond New",
      "id": "tosecond-new"
    },
    {
      "level": "h2",
      "text": "toUnixTimestamp",
      "id": "tounixtimestamp"
    },
    {
      "level": "h2",
      "text": "toStartOfInterval",
      "id": "tostartofinterval"
    },
    {
      "level": "h2",
      "text": "toStartOfYear New",
      "id": "tostartofyear-new"
    },
    {
      "level": "h2",
      "text": "toStartOfMonth New",
      "id": "tostartofmonth-new"
    },
    {
      "level": "h2",
      "text": "toStartOfWeek New",
      "id": "tostartofweek-new"
    },
    {
      "level": "h2",
      "text": "toStartOfDay New",
      "id": "tostartofday-new"
    },
    {
      "level": "h2",
      "text": "toStartOfHour New",
      "id": "tostartofhour-new"
    },
    {
      "level": "h2",
      "text": "toStartOfFifteenMinutes New",
      "id": "tostartoffifteenminutes-new"
    },
    {
      "level": "h2",
      "text": "toStartOfTenMinutes New",
      "id": "tostartoftenminutes-new"
    },
    {
      "level": "h2",
      "text": "toStartOfFiveMinutes New",
      "id": "tostartoffiveminutes-new"
    },
    {
      "level": "h2",
      "text": "toStartOfMinute New",
      "id": "tostartofminute-new"
    },
    {
      "level": "h2",
      "text": "toYYYYMM New",
      "id": "toyyyymm-new"
    },
    {
      "level": "h2",
      "text": "bin New",
      "id": "bin-new"
    },
    {
      "level": "h2",
      "text": "hex New",
      "id": "hex-new"
    },
    {
      "level": "h2",
      "text": "intDiv",
      "id": "intdiv"
    },
    {
      "level": "h2",
      "text": "log New",
      "id": "log-new"
    },
    {
      "level": "h2",
      "text": "pow New",
      "id": "pow-new"
    },
    {
      "level": "h2",
      "text": "round New",
      "id": "round-new"
    },
    {
      "level": "h2",
      "text": "floor New",
      "id": "floor-new"
    },
    {
      "level": "h2",
      "text": "ceil New",
      "id": "ceil-new"
    },
    {
      "level": "h2",
      "text": "Arithmetic operators",
      "id": "arithmetic-operators"
    },
    {
      "level": "h2",
      "text": "Comparison operators",
      "id": "comparison-operators"
    },
    {
      "level": "h2",
      "text": "Boolean operators",
      "id": "boolean-operators"
    },
    {
      "level": "h2",
      "text": "Unary operators",
      "id": "unary-operators"
    },
    {
      "level": "h2",
      "text": "SHOW TABLES statement",
      "id": "show-tables-statement"
    },
    {
      "level": "h2",
      "text": "SHOW TIMEZONES statement",
      "id": "show-timezones-statement"
    },
    {
      "level": "h2",
      "text": "SHOW TIMEZONE statement",
      "id": "show-timezone-statement"
    },
    {
      "level": "h2",
      "text": "SELECT statement",
      "id": "select-statement"
    },
    {
      "level": "h3",
      "text": "SELECT clause",
      "id": "select-clause"
    },
    {
      "level": "h3",
      "text": "FROM clause",
      "id": "from-clause"
    },
    {
      "level": "h3",
      "text": "WHERE clause",
      "id": "where-clause"
    },
    {
      "level": "h3",
      "text": "GROUP BY clause",
      "id": "group-by-clause"
    },
    {
      "level": "h3",
      "text": "ORDER BY clause",
      "id": "order-by-clause"
    },
    {
      "level": "h3",
      "text": "LIMIT clause",
      "id": "limit-clause"
    },
    {
      "level": "h3",
      "text": "OFFSET clause",
      "id": "offset-clause"
    },
    {
      "level": "h3",
      "text": "FORMAT clause",
      "id": "format-clause"
    },
    {
      "level": "h2",
      "text": "length",
      "id": "length"
    },
    {
      "level": "h2",
      "text": "empty",
      "id": "empty"
    },
    {
      "level": "h2",
      "text": "lower",
      "id": "lower"
    },
    {
      "level": "h2",
      "text": "lowerUTF8 New",
      "id": "lowerutf8-new"
    },
    {
      "level": "h2",
      "text": "upper",
      "id": "upper"
    },
    {
      "level": "h2",
      "text": "upperUTF8 New",
      "id": "upperutf8-new"
    },
    {
      "level": "h2",
      "text": "startsWith",
      "id": "startswith"
    },
    {
      "level": "h2",
      "text": "endsWith",
      "id": "endswith"
    },
    {
      "level": "h2",
      "text": "position",
      "id": "position"
    },
    {
      "level": "h2",
      "text": "substring",
      "id": "substring"
    },
    {
      "level": "h2",
      "text": "format",
      "id": "format"
    },
    {
      "level": "h2",
      "text": "extract",
      "id": "extract"
    },
    {
      "level": "h2",
      "text": "toUInt8 New",
      "id": "touint8-new"
    },
    {
      "level": "h2",
      "text": "toUInt32",
      "id": "touint32"
    },
    {
      "level": "h2",
      "text": "Availability",
      "id": "availability"
    },
    {
      "level": "h2",
      "text": "Usage example",
      "id": "usage-example"
    },
    {
      "level": "h3",
      "text": "Request",
      "id": "request"
    },
    {
      "level": "h3",
      "text": "Response",
      "id": "response"
    },
    {
      "level": "h2",
      "text": "Working with datasets",
      "id": "working-with-datasets"
    },
    {
      "level": "h3",
      "text": "Aggregated fields",
      "id": "aggregated-fields"
    },
    {
      "level": "h3",
      "text": "Schema type definitions",
      "id": "schema-type-definitions"
    }
  ],
  "url": "llms-txt#ffi-methods-available-for-workflowinstance",
  "links": []
}