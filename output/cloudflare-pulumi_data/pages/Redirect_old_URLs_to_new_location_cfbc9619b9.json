{
  "title": "Redirect old URLs to new location",
  "content": "resource \"cloudflare_page_rule\" \"legacy_redirect\" {\n  zone_id  = var.zone_id\n  target   = \"${var.domain}/old-location.php\"\n  priority = 2\n\nactions = {\n    forwarding_url = {\n      url         = \"https://www.${var.domain}/expensive-db-call\"\n      status_code = 301\n    }\n  }\n}\nsh\nterraform plan\nterraform apply\nbash\ncurl -I https://example.com/old-location.php\nbash\nHTTP/1.1 301 Moved Permanently\nLocation: https://example.com/expensive-db-call\nbash\ncurl -I https://example.com/expensive-db-call\nbash\nHTTP/1.1 503 Service Temporarily Unavailable\nbash\ngit add main.tf\ngit commit -m \"Step 5 - Add two Page Rules\"\ngit push\nbash\ngit checkout -b step3-zone-setings\nhcl",
  "code_samples": [
    {
      "code": "The first rule increases security to \"Under Attack\" mode for your database endpoint. The second rule redirects old URLs with a 301 permanent redirect.\n\n## 2. Preview and apply the changes:",
      "language": "unknown"
    },
    {
      "code": "## 3. Verify changes:\n\nTest the redirect functionality:",
      "language": "unknown"
    },
    {
      "code": "Expected output:",
      "language": "unknown"
    },
    {
      "code": "Test the increased security (Under Attack mode returns a challenge page):",
      "language": "unknown"
    },
    {
      "code": "Expected output:",
      "language": "unknown"
    },
    {
      "code": "The 503 response indicates the Under Attack mode is active, presenting visitors with a challenge page before allowing access to protect against DDoS attacks.\n\n## 4. Commit and merge the changes:",
      "language": "unknown"
    },
    {
      "code": "The call works as expected. In the first case, the Cloudflare global network responds with a `301` redirecting the browser to the new location. In the second case, the Cloudflare global network initially responds with a `503`, which is consistent with the Under Attack mode.\n\n</page>\n\n<page>\n---\ntitle: Configure HTTPS settings Â· Cloudflare Terraform docs\ndescription: This tutorial shows how to enable TLS 1.3, Automatic HTTPS\n  Rewrites, and Strict SSL mode using the updated v5 provider.\nlastUpdated: 2025-10-09T15:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/terraform/tutorial/configure-https-settings/\n  md: https://developers.cloudflare.com/terraform/tutorial/configure-https-settings/index.md\n---\n\nAfter setting up basic DNS records, you can configure zone settings using Terraform. This tutorial shows how to enable [TLS 1.3](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/tls-13/), [Automatic HTTPS Rewrites](https://developers.cloudflare.com/ssl/edge-certificates/additional-options/automatic-https-rewrites/), and [Strict SSL mode](https://developers.cloudflare.com/ssl/origin-configuration/ssl-modes/full-strict/) using the updated v5 provider.\n\n## Prerequisites\n\n* Completed tutorials [1](https://developers.cloudflare.com/terraform/tutorial/initialize-terraform/) and [2](https://developers.cloudflare.com/terraform/tutorial/track-history/)\n* Valid SSL certificate on your origin server (use the [Cloudflare Origin CA](https://developers.cloudflare.com/ssl/origin-configuration/origin-ca/) to generate one for strict SSL mode)\n\nNote\n\nTerraform code snippets below refer to the v5 SDK only.\n\n## 1. Create zone setting configuration\n\nCreate a new branch and add zone settings:",
      "language": "unknown"
    },
    {
      "code": "Add the following to your `main.tf` file:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "2. Preview and apply the changes:",
      "id": "2.-preview-and-apply-the-changes:"
    },
    {
      "level": "h2",
      "text": "3. Verify changes:",
      "id": "3.-verify-changes:"
    },
    {
      "level": "h2",
      "text": "4. Commit and merge the changes:",
      "id": "4.-commit-and-merge-the-changes:"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Create zone setting configuration",
      "id": "1.-create-zone-setting-configuration"
    }
  ],
  "url": "llms-txt#redirect-old-urls-to-new-location",
  "links": []
}