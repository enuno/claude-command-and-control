{
  "title": "Make several requests to see both origins",
  "content": "for i in {1..4}; do\n  curl https://www.example.com\n  sleep 1\ndone\nbash\nHello, this is 203.0.113.10!\nHello, this is 203.0.113.10!\nHello, this is 198.51.100.15!\nHello, this is 203.0.113.10!\nhcl",
  "code_samples": [
    {
      "code": "Expected output:",
      "language": "unknown"
    },
    {
      "code": "You'll see random distribution between your two origin servers. This basic DNS-based load balancing has limitations - no health checks, no geographic steering, and unpredictable distribution patterns. For more advanced scenarios like origins in different geographies or automatic failover, you'll want to use [Cloudflare's Load Balancing](https://developers.cloudflare.com/load-balancing/).\n\n## 2. Switch to using Cloudflare's Load Balancing product\n\nAs described in the [Load Balancing tutorial](https://developers.cloudflare.com/learning-paths/load-balancing/concepts/), you will need to complete three tasks:\n\n1. Create a monitor to run health checks against your origin servers.\n2. Create a pool of one or more origin servers that will receive load balanced traffic.\n3. Create a load balancer with an external hostname — for example, `www.example.com` — and one or more pools.\n\nWe can monitor the origins by creating a basic health check that makes a GET request to each origin on the URL. If the origin returns the 200 status code (OK) within five seconds, it is considered healthy. If it fails to do so three times in a row, it is considered unhealthy. This health check will be run once per minute from several regions and you can configure an email notification in the event any failures are detected.\n\nIn this example, the pool will be called `www-origins` with two origins added to it:\n\n* `www-us` (`203.0.113.10`)\n* `www-asia` (`198.51.100.15`)\n\nFor now, skip any sort of [geo routing](https://developers.cloudflare.com/load-balancing/understand-basics/traffic-steering/steering-policies/geo-steering/).\n\nWhen you create a load balancer (LB), it will [replace any existing DNS records with the same name](https://developers.cloudflare.com/load-balancing/load-balancers/dns-records/). For example, if you create the `www.example.com` load balancer below, it will supersede the two `www` DNS records that you previously defined. One benefit of leaving the DNS records in place is that if you temporarily disable load balancing, connections to this hostname are still possible.\n\nTo achieve the above, add the load balancing configuration to `main.tf`:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "2. Switch to using Cloudflare's Load Balancing product",
      "id": "2.-switch-to-using-cloudflare's-load-balancing-product"
    }
  ],
  "url": "llms-txt#make-several-requests-to-see-both-origins",
  "links": []
}