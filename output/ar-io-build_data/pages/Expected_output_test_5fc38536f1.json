{
  "title": "Expected output: test",
  "content": "bash\n        sudo apt update -y && sudo apt upgrade -y && sudo apt install -y curl openssh-server git certbot nginx sqlite3 build-essential && sudo systemctl enable ssh && curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash && source ~/.bashrc && sudo ufw allow 22 80 443 && sudo ufw enable\n        bash\n        # Add Docker's official GPG key\n        sudo apt-get update\n        sudo apt-get install ca-certificates curl\n        sudo install -m 0755 -d /etc/apt/keyrings\n        sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\n        sudo chmod a+r /etc/apt/keyrings/docker.asc\n\n# Add the repository to Apt sources\n        echo \\\n          \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n          $(. /etc/os-release && echo \"$VERSION_CODENAME\") stable\" | \\\n          sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n        sudo apt-get update\n\n# Install Docker\n        sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n        bash\n        nvm install 20.11.1 && nvm use 20.11.1 && npm install -g yarn@1.22.22\n        bash\n        git clone -b main https://github.com/ar-io/ar-io-node\n        cd ar-io-node\n        bash\n        nano .env\n        bash\n        GRAPHQL_HOST=arweave.net\n        GRAPHQL_PORT=443\n        START_HEIGHT=1000000\n        RUN_OBSERVER=true\n        ARNS_ROOT_HOST=\n        AR_IO_WALLET=\n        OBSERVER_WALLET=\n        bash\n        sudo docker compose up -d\n        bash\n        sudo certbot certonly --manual --preferred-challenges dns -d .com -d '*..com'\n        bash\n        sudo nano /etc/nginx/sites-available/default\n        nginx\n        # Force redirects from HTTP to HTTPS\n        server {\n            listen 80;\n            listen [::]:80;\n            server_name .com *..com;\n\nlocation / {\n                return 301 https://$host$request_uri;\n            }\n        }\n\n# Forward traffic to your node and provide SSL certificates\n        server {\n            listen 443 ssl;\n            listen [::]:443 ssl;\n            server_name .com *..com;\n\nssl_certificate /etc/letsencrypt/live/.com/fullchain.pem;\n            ssl_certificate_key /etc/letsencrypt/live/.com/privkey.pem;\n\nlocation / {\n                proxy_pass http://localhost:3000;\n                proxy_set_header Host $host;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_http_version 1.1;\n\n# Forward AR.IO headers if present in the request\n                proxy_set_header X-AR-IO-Origin $http_x_ar_io_origin;\n                proxy_set_header X-AR-IO-Origin-Node-Release $http_x_ar_io_origin_node_release;\n                proxy_set_header X-AR-IO-Hops $http_x_ar_io_hops;\n            }\n        }\n        bash\n        sudo nginx -t\n        sudo service nginx restart\n        bash\n        curl https:///3lyxgbgEvqNSvJrTX2J7CfRychUD5KClFhhVLyTPNCQ\n        \n        1984\n        cmd\n          wsl --update\n          wsl --shutdown\n          cmd\n        cd Documents\n        cmd\n        git clone -b main https://github.com/ar-io/ar-io-node\n        bash\n        GRAPHQL_HOST=arweave.net\n        GRAPHQL_PORT=443\n        START_HEIGHT=0\n        RUN_OBSERVER=true\n        ARNS_ROOT_HOST=\n        AR_IO_WALLET=\n        OBSERVER_WALLET=\n        cmd\n        cd Documents\\ar-io-node\n        cmd\n        docker compose up -d\n        cmd\n        docker compose down\n        cmd\n        ipconfig\n        cmd\n        cd Documents\n        git clone -b main https://github.com/bobinstein/dockerized-nginx\n        nginx\n        # Forward AR.IO headers if present in the request\n        proxy_set_header X-AR-IO-Origin $http_x_ar_io_origin;\n        proxy_set_header X-AR-IO-Origin-Node-Release $http_x_ar_io_origin_node_release;\n        proxy_set_header X-AR-IO-Hops $http_x_ar_io_hops;\n        \n        1984\n        bash",
  "code_samples": [
    {
      "code": "That's it! Your gateway is now serving Arweave data at `localhost:4000`.\n\n## Production Setup with Custom Domain\n\nReady to run a gateway with your own domain name and SSL certificates? Follow these comprehensive steps:\n\n        ### System Requirements\n\n        **Minimum requirements:**\n        - 4 core CPU\n        - 4 GB RAM\n        - 500 GB storage (SSD recommended)\n        - Stable 50 Mbps internet connection\n\n        **Recommended:**\n        - 12 core CPU\n        - 32 GB RAM\n        - 2 TB SSD storage\n        - Stable 1 Gbps internet connection\n\n        External storage devices should be formatted as ext4.\n\n        ### Install Required Packages\n\n        **Quick install all packages:**",
      "language": "unknown"
    },
    {
      "code": "**Install Docker:**",
      "language": "unknown"
    },
    {
      "code": "**Install Node.js and Yarn:**",
      "language": "unknown"
    },
    {
      "code": "### Install the Node\n\n        **Clone the repository:**",
      "language": "unknown"
    },
    {
      "code": "**Note:** Your indexing databases will be created in the project directory unless otherwise specified in your .env file, not your Docker environment. So, if you are using an external hard drive, you should install the node directly to that external drive.\n\n        **Create environment file:**",
      "language": "unknown"
    },
    {
      "code": "**Add configuration:**",
      "language": "unknown"
    },
    {
      "code": "**Supply Observer Wallet Keyfile:**\n        Save your wallet keyfile as `.json` in the `wallets` directory.\n\n          By default, the Observer will use [Turbo Credits](https://docs.ardrive.io/docs/turbo/credits) to pay for uploading reports to Arweave. This allows reports under 100kb to be uploaded for free, but larger reports will fail if the Observer wallet does not contain Credits. Including `REPORT_DATA_SINK=arweave` in your `.env` file will configure the Observer to use AR tokens instead of Turbo Credits, without any free limit.\n\n        **Start the Docker container:**",
      "language": "unknown"
    },
    {
      "code": "### Set Up Networking\n\n        **Register a Domain Name:**\n        Choose a domain registrar (e.g., [Namecheap](https://namecheap.com)) to register a domain name.\n\n        **Point Domain at Your Home Network:**\n        - Get your public IP address: `curl ifconfig.me`\n        - Create A records for your domain and wildcard subdomains (`*.yourdomain.com`)\n\n        **Set up Port Forwarding:**\n        - Get local IP: `ip addr show | grep -w inet | awk '{print $2}' | awk -F'/' '{print $1}'`\n        - Configure router to forward ports 80 and 443 to your local machine\n\n        **Create SSL Certificates:**",
      "language": "unknown"
    },
    {
      "code": "Previous versions of these instructions advised providing an email address to Certbot. As of June 2025, LetsEncrypt (the certificate authority used by Certbot) no longer supports email notifications.\n\n        **Important:** Wild card subdomain (*.&lt;your-domain&gt;.com) cannot auto renew without obtaining an API key from your domain registrar. Not all registrars offer this. Certbot certificates expire every 90 days. Be sure to consult with your chosen registrar to see if they offer an API for this purpose, or run the above command again to renew your certificates.\n\n        ### Configure nginx\n\n        **Open nginx configuration:**",
      "language": "unknown"
    },
    {
      "code": "**Replace with this configuration:**",
      "language": "unknown"
    },
    {
      "code": "**Test and restart nginx:**",
      "language": "unknown"
    },
    {
      "code": "**Note:** Previous versions of these instructions advised checking a gateway's ability to fetch content using `localhost`. Subsequent security updates prevent this without first unsetting `ARNS_ROOT_HOST` in your `.env`.\n\n        ### Test Your Gateway\n\n        **Verify it's working:**",
      "language": "unknown"
    },
    {
      "code": "**Expected output:**",
      "language": "unknown"
    },
    {
      "code": "If you see `1984`, your gateway is working perfectly!\n\n        ### System Requirements\n\n        **Minimum requirements:**\n        - 4 core CPU\n        - 4 GB RAM\n        - 500 GB storage (SSD recommended)\n        - Stable 50 Mbps internet connection\n\n        **Recommended:**\n        - 12 core CPU\n        - 32 GB RAM\n        - 2 TB SSD storage\n        - Stable 1 Gbps internet connection\n\n        External storage devices should be formatted as ext4.\n\n        ### Install Required Software\n\n        **Install Docker Desktop:**\n        - Download from [Docker Desktop for Windows](https://www.docker.com/products/docker-desktop/)\n        - Run installer and follow prompts\n        - Select WSL (Windows Subsystem for Linux) during installation\n        - Restart your PC\n        - Update WSL:",
      "language": "unknown"
    },
    {
      "code": "- Restart Docker Desktop\n\n        **Install Git:**\n        - Download from [Git for Windows](https://git-scm.com/download/win)\n        - Run installer with default settings\n\n        ### Clone the Repository\n\n        **Open Command Prompt:**\n        - Press `Windows Key + R`\n        - Type `cmd` and press `Enter`\n\n        **Navigate to desired directory:**",
      "language": "unknown"
    },
    {
      "code": "**Clone the repository:**",
      "language": "unknown"
    },
    {
      "code": "**Note:** Your database will be created in the project directory, not Docker. If using an external hard drive, install directly to that drive.\n\n        ### Create Environment File\n\n        **Open a text editor (e.g., Notepad):**\n        - Press `Windows Key` and search for \"Notepad\"\n\n        **Create .env file with this content:**",
      "language": "unknown"
    },
    {
      "code": "**Save as `.env`** (select \"All Files\" as file type)\n\n        **Supply Observer Wallet Keyfile:**\n        Save your wallet keyfile as `.json` in the `wallets` directory.\n\n        ### Start Docker Containers\n\n        **Navigate to project directory:**",
      "language": "unknown"
    },
    {
      "code": "**Start the container:**",
      "language": "unknown"
    },
    {
      "code": "**Explanation of flags:**\n        - `up`: Start the Docker containers\n        - `-d`: Run containers as background processes (detached mode)\n\n        **Shutdown command:**",
      "language": "unknown"
    },
    {
      "code": "### Set Up Router Port Forwarding\n\n        **Obtain a Domain Name:**\n        Choose a domain registrar (e.g., [Namecheap](https://namecheap.com)) and purchase a domain name.\n\n        **Point Domain at Your Home Network:**\n        - Visit https://www.whatsmyip.org/ to get your public IP address\n        - Access your domain registrar's settings\n        - Create A records for your domain and wildcard subdomains (`*.yourdomain.com`)\n\n        **Get Local IP Address:**",
      "language": "unknown"
    },
    {
      "code": "Look for IPv4 Address (format: `192.168.X.X` or `10.X.X.X`)\n\n        **Set Up Router Port Forwarding:**\n        - Access router settings (usually `192.168.0.1`)\n        - Navigate to port forwarding settings\n        - Forward ports 80 and 443 to your local machine's IP address\n\n        ### Install and Configure NGINX Docker\n\n        **Clone NGINX Docker repository:**",
      "language": "unknown"
    },
    {
      "code": "**Follow the repository instructions** for setting up NGINX Docker.\n\n        **Important:** When configuring your nginx setup, ensure that your nginx configuration includes the following AR.IO headers in the proxy configuration:",
      "language": "unknown"
    },
    {
      "code": "These headers are essential for proper AR.IO network functionality.\n\n        ### Test Your Gateway\n\n        **Verify it's working:**\n        Visit `https:///3lyxgbgEvqNSvJrTX2J7CfRychUD5KClFhhVLyTPNCQ` in your browser.\n\n        **Expected output:**",
      "language": "unknown"
    },
    {
      "code": "If you see `1984`, your gateway is working perfectly!\n\n## Useful Docker Commands\n\nMonitor and manage your AR.IO gateway with these commands:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Production Setup with Custom Domain",
      "id": "production-setup-with-custom-domain"
    },
    {
      "level": "h2",
      "text": "Useful Docker Commands",
      "id": "useful-docker-commands"
    }
  ],
  "url": "llms-txt#expected-output:-test",
  "links": []
}