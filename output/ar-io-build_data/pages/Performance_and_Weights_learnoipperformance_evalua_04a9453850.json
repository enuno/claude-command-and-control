{
  "title": "Performance and Weights (/learn/oip/performance-evaluation)",
  "content": "## Gateway Classifications\n\nConsider the following classifications:\n\n- **Functional or Passed Gateways**: are gateways that meet or surpass the network's performance and quality standards, including ArNS resolution and chunk/offset validation (if selected).\n- **Deficient or Failed Gateways**: are gateways that fall short of the network's performance expectations, including failures in ArNS resolution or chunk/offset validation.\n- **Functional or Submitted Observers**: are selected observers who diligently perform their duties and submit observation reports and contract interactions.\n- **Deficient or Failed Observers**: are selected observers who do not fulfill their duty of submitting observation reports and contract interactions.\n\n## Evaluation Process\n\nAt the end of an epoch, the AR.IO Smart Contract processes observer submissions to determine gateway performance through a consensus-based vote tallying system. This evaluation transforms individual observer reports into network-wide performance assessments.\n\n### Vote Tallying and Gateway Classification\n\nAfter observers submit their detailed reports (see [Reporting](/learn/oip/reporting) for submission details), the smart contract performs consensus calculation:\n\n- **Data Collection**: All observer contract interactions for each gateway are collected\n- **Vote Counting**: Each observer submission contributes either a PASS or FAIL vote\n- **Majority Determination**: If â‰¥50% of submitted observer interactions indicate PASS, the gateway is considered Functional\n- **Binary Classification**: Gateways are classified as either Functional (eligible for rewards) or Deficient (ineligible for rewards)\n\n**Consensus Mechanism:**\n\n- Multiple observers evaluate each gateway independently, ensuring reliable assessment\n- The 50% threshold requires majority agreement for positive performance determination\n- Binary scoring provides clear, unambiguous performance classification\n- Vote tallying occurs after the 40-minute confirmation period to ensure all interactions are finalized\n\n## Chunk/Offset Validation Criteria\n\nFor gateways selected for chunk/offset validation, additional performance criteria are evaluated:\n\n### Validation Requirements\n\n- **Chunk Retrieval**: Gateway must successfully respond to `GET /chunk/{offset}` requests\n- **Data Integrity**: Chunk data must be non-empty and within reasonable size limits (&lt;1MB)\n- **Merkle Proof Validation**: Cryptographic proof must decode correctly and validate against transaction data_root\n- **Performance Standards**: Response times must meet network expectations\n\n**Initial Implementation**: During the initial rollout phase, only a very\n  small portion of gateways will be checked for chunk/offset validation, and the\n  current validation criteria are extremely lenient to ensure smooth network\n  operation.\n\n### Assessment Process\n\n- **Binary Scoring**: Each offset test results in pass/fail determination\n- **Consensus Integration**: Chunk/offset results are integrated into overall gateway assessment\n- **Performance Tracking**: Individual offset assessments are tracked and reported\n\n## Weight Impact on Gateway Performance\n\nGateway performance directly affects multiple weighted factors that influence future observer selection and overall network participation:\n\n### Gateway Performance Ratio Weight (GPRW)\n\nA gateway's evaluation results directly impact their Gateway Performance Ratio Weight, which affects their likelihood of being selected as an observer in future epochs:\n\n- **Functional Gateways**: Increase their passed epochs count, improving their GPRW\n- **Deficient Gateways**: Decrease their GPRW as participated epochs increase without corresponding passes\n- **Observer Selection**: Higher GPRW increases chances of being selected as an observer\n\n### Observer Performance Ratio Weight (OPRW)\n\nFor gateways selected as observers, their performance in submitting reports affects future selection:\n\n- **Functional Observers**: Who submit reports increase their OPRW\n- **Deficient Observers**: Who fail to submit reports see their OPRW decrease\n- **Future Selection**: Higher OPRW improves chances of future observer selection\n\n### Composite Weight Calculation\n\nAll performance factors combine to determine overall network influence:\n\n- **SW** = Stake Weight (financial commitment)\n- **TW** = Tenure Weight (network longevity)\n- **GPRW** = Gateway Performance Ratio Weight\n- **OPRW** = Observer Performance Ratio Weight\n\n**Long-term Effects:**\n\n- Consistently functional gateways accumulate higher composite weights\n- Poor performers see diminishing influence and selection chances\n- Performance history creates compounding effects on network participation\n\n## Evaluation Timeline\n\nRewards are distributed **at the end of each epoch** by the AR.IO Smart Contract directly based on the tallied observer votes. The smart contract processes all observer submissions and automatically distributes rewards to functional gateways and observers based on their performance during the epoch.\n\n- **Majority Rule**: Gateway performance is determined by majority vote from observers\n- **Binary Scoring**: Simple pass/fail system for clear performance assessment\n- **Network Confirmation**: Delay ensures all votes are confirmed before evaluation\n- **Transparent Process**: All evaluations are based on onchain data\n\n## Consequences of Performance\n\n### Functional Gateways\n\n- Eligible for gateway rewards\n- Maintain good standing in the network\n- Continue to be considered for observer selection\n\n### Deficient Gateways\n\n- Ineligible for gateway rewards\n- Risk being marked as deficient for multiple epochs\n- May face additional penalties for prolonged poor performance\n\n### Observer Performance\n\n- Functional observers receive observer rewards\n- Deficient observers forfeit observer rewards\n- Deficient observers who are also functional gateways have their gateway reward reduced by 25%\n\nReady to understand how rewards are distributed? Learn about [Reward Distribution](/learn/oip/reward-distribution) to see the formulas and mechanics, or go back to [Observer Selection](/learn/oip/observer-selection) to review the selection process.",
  "code_samples": [
    {
      "code": "GPRW = \\frac{1 + \\text{Passed Epochs}}{1 + \\text{Participated Epochs}}",
      "language": "math"
    },
    {
      "code": "OPRW = \\frac{1 + \\text{Submitted Epochs}}{1 + \\text{Selected Epochs}}",
      "language": "math"
    },
    {
      "code": "CW = SW \\times TW \\times GPRW \\times OPRW",
      "language": "math"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Gateway Classifications",
      "id": "gateway-classifications"
    },
    {
      "level": "h2",
      "text": "Evaluation Process",
      "id": "evaluation-process"
    },
    {
      "level": "h3",
      "text": "Vote Tallying and Gateway Classification",
      "id": "vote-tallying-and-gateway-classification"
    },
    {
      "level": "h2",
      "text": "Chunk/Offset Validation Criteria",
      "id": "chunk/offset-validation-criteria"
    },
    {
      "level": "h3",
      "text": "Validation Requirements",
      "id": "validation-requirements"
    },
    {
      "level": "h3",
      "text": "Assessment Process",
      "id": "assessment-process"
    },
    {
      "level": "h2",
      "text": "Weight Impact on Gateway Performance",
      "id": "weight-impact-on-gateway-performance"
    },
    {
      "level": "h3",
      "text": "Gateway Performance Ratio Weight (GPRW)",
      "id": "gateway-performance-ratio-weight-(gprw)"
    },
    {
      "level": "h3",
      "text": "Observer Performance Ratio Weight (OPRW)",
      "id": "observer-performance-ratio-weight-(oprw)"
    },
    {
      "level": "h3",
      "text": "Composite Weight Calculation",
      "id": "composite-weight-calculation"
    },
    {
      "level": "h2",
      "text": "Evaluation Timeline",
      "id": "evaluation-timeline"
    },
    {
      "level": "h2",
      "text": "Key Features",
      "id": "key-features"
    },
    {
      "level": "h2",
      "text": "Consequences of Performance",
      "id": "consequences-of-performance"
    },
    {
      "level": "h3",
      "text": "Functional Gateways",
      "id": "functional-gateways"
    },
    {
      "level": "h3",
      "text": "Deficient Gateways",
      "id": "deficient-gateways"
    },
    {
      "level": "h3",
      "text": "Observer Performance",
      "id": "observer-performance"
    },
    {
      "level": "h2",
      "text": "Next Steps",
      "id": "next-steps"
    }
  ],
  "url": "llms-txt#performance-and-weights-(/learn/oip/performance-evaluation)",
  "links": []
}