{
  "title": "llama-3.1-70b-instruct",
  "content": "Text Generation • Meta\n\n@cf/meta/llama-3.1-70b-instruct\n\nThe Meta Llama 3.1 collection of multilingual large language models (LLMs) is a collection of pretrained and instruction tuned generative models. The Llama 3.1 instruction tuned text only models are optimized for multilingual dialogue use cases and outperform many of the available open source and closed chat models on common industry benchmarks.\n\n| Model Info | |\n| - | - |\n| Context Window[](https://developers.cloudflare.com/workers-ai/glossary/) | 24,000 tokens |\n| Terms and License | [link](https://github.com/meta-llama/llama-models/blob/main/models/llama3_1/LICENSE) |\n\nTry out this model with Workers AI LLM Playground. It does not require any setup or authentication and an instant way to preview and test a model directly in the browser.\n\n[Launch the LLM Playground](https://playground.ai.cloudflare.com/?model=@cf/meta/llama-3.1-70b-instruct)\n\nOpenAI compatible endpoints\n\nWorkers AI also supports OpenAI compatible API endpoints for `/v1/chat/completions` and `/v1/embeddings`. For more details, refer to [Configurations ](https://developers.cloudflare.com/workers-ai/configuration/open-ai-compatibility/).\n\n\\* indicates a required field\n\n* `frequency_penalty` number min 0 max 2\n\nDecreases the likelihood of the model repeating the same lines verbatim.\n\nAn array of integers that represent the image data constrained to 8-bit unsigned integer values\n\nA value between 0 and 255\n\nBinary string representing the image contents.\n\nName of the LoRA (Low-Rank Adaptation) model to fine-tune the base model.\n\n* `max_tokens` integer default 256\n\nThe maximum number of tokens to generate in the response.\n\n* `presence_penalty` number min 0 max 2\n\nIncreases the likelihood of the model introducing new topics.\n\n* `prompt` string required min 1 max 131072\n\nThe input text prompt for the model to generate a response.\n\nIf true, a chat template is not applied and you must adhere to the specific model's expected formatting.\n\n* `repetition_penalty` number min 0 max 2\n\nPenalty for repeated tokens; higher values discourage repetition.\n\n* `seed` integer min 1 max 9999999999\n\nRandom seed for reproducibility of the generation.\n\nIf true, the response will be streamed back incrementally using SSE, Server Sent Events.\n\n* `temperature` number default 0.6 min 0 max 5\n\nControls the randomness of the output; higher values produce more random results.\n\n* `top_k` integer min 1 max 50\n\nLimits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\n\n* `top_p` number min 0 max 2\n\nAdjusts the creativity of the AI's responses by controlling how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\n\n* `frequency_penalty` number min 0 max 2\n\nDecreases the likelihood of the model repeating the same lines verbatim.\n\n* `code` string required\n\n* `name` string required\n\nAn array of integers that represent the image data constrained to 8-bit unsigned integer values\n\nA value between 0 and 255\n\nBinary string representing the image contents.\n\n* `max_tokens` integer default 256\n\nThe maximum number of tokens to generate in the response.\n\n* `messages` array required\n\nAn array of message objects representing the conversation history.\n\n* `content` string required max 131072\n\nThe content of the message as a string.\n\n* `role` string required\n\nThe role of the message sender (e.g., 'user', 'assistant', 'system', 'tool').\n\n* `presence_penalty` number min 0 max 2\n\nIncreases the likelihood of the model introducing new topics.\n\n* `repetition_penalty` number min 0 max 2\n\nPenalty for repeated tokens; higher values discourage repetition.\n\n* `seed` integer min 1 max 9999999999\n\nRandom seed for reproducibility of the generation.\n\nIf true, the response will be streamed back incrementally.\n\n* `temperature` number default 0.6 min 0 max 5\n\nControls the randomness of the output; higher values produce more random results.\n\nA list of tools available for the assistant to use.\n\n* `description` string required\n\nA brief description of what the tool does.\n\n* `name` string required\n\nThe name of the tool. More descriptive the better.\n\n* `parameters` object required\n\nSchema defining the parameters accepted by the tool.\n\n* `properties` object required\n\nDefinitions of each parameter.\n\n* `additionalProperties` object\n\n* `description` string required\n\nA description of the expected parameter.\n\n* `type` string required\n\nThe data type of the parameter.\n\nList of required parameter names.\n\n* `type` string required\n\nThe type of the parameters object (usually 'object').\n\n* `function` object required\n\nDetails of the function tool.\n\n* `description` string required\n\nA brief description of what the function does.\n\n* `name` string required\n\nThe name of the function.\n\n* `parameters` object required\n\nSchema defining the parameters accepted by the function.\n\n* `properties` object required\n\nDefinitions of each parameter.\n\n* `additionalProperties` object\n\n* `description` string required\n\nA description of the expected parameter.\n\n* `type` string required\n\nThe data type of the parameter.\n\nList of required parameter names.\n\n* `type` string required\n\nThe type of the parameters object (usually 'object').\n\n* `type` string required\n\nSpecifies the type of tool (e.g., 'function').\n\n* `top_k` integer min 1 max 50\n\nLimits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\n\n* `top_p` number min 0 max 2\n\nControls the creativity of the AI's responses by adjusting how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\n\nThe generated text response from the model\n\nAn array of tool calls requests made during the response generation\n\nThe arguments passed to be passed to the tool call request\n\nThe name of the tool to be called\n\nThe following schemas are based on JSON Schema\n\n<page>\n---\ntitle: llama-3.1-8b-instruct · Cloudflare Workers AI docs\ndescription: The Meta Llama 3.1 collection of multilingual large language models\n  (LLMs) is a collection of pretrained and instruction tuned generative models.\n  The Llama 3.1 instruction tuned text only models are optimized for\n  multilingual dialogue use cases and outperform many of the available open\n  source and closed chat models on common industry benchmarks.\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers-ai/models/llama-3.1-8b-instruct/\n  md: https://developers.cloudflare.com/workers-ai/models/llama-3.1-8b-instruct/index.md\n---\n\n![Meta logo](https://developers.cloudflare.com/_astro/meta.x5nlFKBG.svg)",
  "code_samples": [
    {
      "code": "export interface Env {\n  AI: Ai;\n}\n\n\nexport default {\n  async fetch(request, env): Promise<Response> {\n\n\n    const messages = [\n      { role: \"system\", content: \"You are a friendly assistant\" },\n      {\n        role: \"user\",\n        content: \"What is the origin of the phrase Hello, World\",\n      },\n    ];\n\n\n    const stream = await env.AI.run(\"@cf/meta/llama-3.1-70b-instruct\", {\n      messages,\n      stream: true,\n    });\n\n\n    return new Response(stream, {\n      headers: { \"content-type\": \"text/event-stream\" },\n    });\n  },\n} satisfies ExportedHandler<Env>;",
      "language": "ts"
    },
    {
      "code": "export interface Env {\n  AI: Ai;\n}\n\n\nexport default {\n  async fetch(request, env): Promise<Response> {\n\n\n    const messages = [\n      { role: \"system\", content: \"You are a friendly assistant\" },\n      {\n        role: \"user\",\n        content: \"What is the origin of the phrase Hello, World\",\n      },\n    ];\n    const response = await env.AI.run(\"@cf/meta/llama-3.1-70b-instruct\", { messages });\n\n\n    return Response.json(response);\n  },\n} satisfies ExportedHandler<Env>;",
      "language": "ts"
    },
    {
      "code": "import os\nimport requests\n\n\nACCOUNT_ID = \"your-account-id\"\nAUTH_TOKEN = os.environ.get(\"CLOUDFLARE_AUTH_TOKEN\")\n\n\nprompt = \"Tell me all about PEP-8\"\nresponse = requests.post(\n  f\"https://api.cloudflare.com/client/v4/accounts/{ACCOUNT_ID}/ai/run/@cf/meta/llama-3.1-70b-instruct\",\n    headers={\"Authorization\": f\"Bearer {AUTH_TOKEN}\"},\n    json={\n      \"messages\": [\n        {\"role\": \"system\", \"content\": \"You are a friendly assistant\"},\n        {\"role\": \"user\", \"content\": prompt}\n      ]\n    }\n)\nresult = response.json()\nprint(result)",
      "language": "py"
    },
    {
      "code": "curl https://api.cloudflare.com/client/v4/accounts/$CLOUDFLARE_ACCOUNT_ID/ai/run/@cf/meta/llama-3.1-70b-instruct \\\n  -X POST \\\n  -H \"Authorization: Bearer $CLOUDFLARE_AUTH_TOKEN\" \\\n  -d '{ \"messages\": [{ \"role\": \"system\", \"content\": \"You are a friendly assistant\" }, { \"role\": \"user\", \"content\": \"Why is pizza so good\" }]}'",
      "language": "sh"
    },
    {
      "code": "{\n      \"oneOf\": [\n          {\n              \"properties\": {\n                  \"frequency_penalty\": {\n                      \"description\": \"Decreases the likelihood of the model repeating the same lines verbatim.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"image\": {\n                      \"oneOf\": [\n                          {\n                              \"description\": \"An array of integers that represent the image data constrained to 8-bit unsigned integer values\",\n                              \"items\": {\n                                  \"description\": \"A value between 0 and 255\",\n                                  \"type\": \"number\"\n                              },\n                              \"type\": \"array\"\n                          },\n                          {\n                              \"description\": \"Binary string representing the image contents.\",\n                              \"format\": \"binary\",\n                              \"type\": \"string\"\n                          }\n                      ]\n                  },\n                  \"lora\": {\n                      \"description\": \"Name of the LoRA (Low-Rank Adaptation) model to fine-tune the base model.\",\n                      \"type\": \"string\"\n                  },\n                  \"max_tokens\": {\n                      \"default\": 256,\n                      \"description\": \"The maximum number of tokens to generate in the response.\",\n                      \"type\": \"integer\"\n                  },\n                  \"presence_penalty\": {\n                      \"description\": \"Increases the likelihood of the model introducing new topics.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"prompt\": {\n                      \"description\": \"The input text prompt for the model to generate a response.\",\n                      \"maxLength\": 131072,\n                      \"minLength\": 1,\n                      \"type\": \"string\"\n                  },\n                  \"raw\": {\n                      \"default\": false,\n                      \"description\": \"If true, a chat template is not applied and you must adhere to the specific model's expected formatting.\",\n                      \"type\": \"boolean\"\n                  },\n                  \"repetition_penalty\": {\n                      \"description\": \"Penalty for repeated tokens; higher values discourage repetition.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"seed\": {\n                      \"description\": \"Random seed for reproducibility of the generation.\",\n                      \"maximum\": 9999999999,\n                      \"minimum\": 1,\n                      \"type\": \"integer\"\n                  },\n                  \"stream\": {\n                      \"default\": false,\n                      \"description\": \"If true, the response will be streamed back incrementally using SSE, Server Sent Events.\",\n                      \"type\": \"boolean\"\n                  },\n                  \"temperature\": {\n                      \"default\": 0.6,\n                      \"description\": \"Controls the randomness of the output; higher values produce more random results.\",\n                      \"maximum\": 5,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"top_k\": {\n                      \"description\": \"Limits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\",\n                      \"maximum\": 50,\n                      \"minimum\": 1,\n                      \"type\": \"integer\"\n                  },\n                  \"top_p\": {\n                      \"description\": \"Adjusts the creativity of the AI's responses by controlling how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  }\n              },\n              \"required\": [\n                  \"prompt\"\n              ],\n              \"title\": \"Prompt\"\n          },\n          {\n              \"properties\": {\n                  \"frequency_penalty\": {\n                      \"description\": \"Decreases the likelihood of the model repeating the same lines verbatim.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"functions\": {\n                      \"items\": {\n                          \"properties\": {\n                              \"code\": {\n                                  \"type\": \"string\"\n                              },\n                              \"name\": {\n                                  \"type\": \"string\"\n                              }\n                          },\n                          \"required\": [\n                              \"name\",\n                              \"code\"\n                          ],\n                          \"type\": \"object\"\n                      },\n                      \"type\": \"array\"\n                  },\n                  \"image\": {\n                      \"oneOf\": [\n                          {\n                              \"description\": \"An array of integers that represent the image data constrained to 8-bit unsigned integer values\",\n                              \"items\": {\n                                  \"description\": \"A value between 0 and 255\",\n                                  \"type\": \"number\"\n                              },\n                              \"type\": \"array\"\n                          },\n                          {\n                              \"description\": \"Binary string representing the image contents.\",\n                              \"format\": \"binary\",\n                              \"type\": \"string\"\n                          }\n                      ]\n                  },\n                  \"max_tokens\": {\n                      \"default\": 256,\n                      \"description\": \"The maximum number of tokens to generate in the response.\",\n                      \"type\": \"integer\"\n                  },\n                  \"messages\": {\n                      \"description\": \"An array of message objects representing the conversation history.\",\n                      \"items\": {\n                          \"properties\": {\n                              \"content\": {\n                                  \"description\": \"The content of the message as a string.\",\n                                  \"maxLength\": 131072,\n                                  \"type\": \"string\"\n                              },\n                              \"role\": {\n                                  \"description\": \"The role of the message sender (e.g., 'user', 'assistant', 'system', 'tool').\",\n                                  \"type\": \"string\"\n                              }\n                          },\n                          \"required\": [\n                              \"role\",\n                              \"content\"\n                          ],\n                          \"type\": \"object\"\n                      },\n                      \"type\": \"array\"\n                  },\n                  \"presence_penalty\": {\n                      \"description\": \"Increases the likelihood of the model introducing new topics.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"repetition_penalty\": {\n                      \"description\": \"Penalty for repeated tokens; higher values discourage repetition.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"seed\": {\n                      \"description\": \"Random seed for reproducibility of the generation.\",\n                      \"maximum\": 9999999999,\n                      \"minimum\": 1,\n                      \"type\": \"integer\"\n                  },\n                  \"stream\": {\n                      \"default\": false,\n                      \"description\": \"If true, the response will be streamed back incrementally.\",\n                      \"type\": \"boolean\"\n                  },\n                  \"temperature\": {\n                      \"default\": 0.6,\n                      \"description\": \"Controls the randomness of the output; higher values produce more random results.\",\n                      \"maximum\": 5,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  },\n                  \"tools\": {\n                      \"description\": \"A list of tools available for the assistant to use.\",\n                      \"items\": {\n                          \"oneOf\": [\n                              {\n                                  \"properties\": {\n                                      \"description\": {\n                                          \"description\": \"A brief description of what the tool does.\",\n                                          \"type\": \"string\"\n                                      },\n                                      \"name\": {\n                                          \"description\": \"The name of the tool. More descriptive the better.\",\n                                          \"type\": \"string\"\n                                      },\n                                      \"parameters\": {\n                                          \"description\": \"Schema defining the parameters accepted by the tool.\",\n                                          \"properties\": {\n                                              \"properties\": {\n                                                  \"additionalProperties\": {\n                                                      \"properties\": {\n                                                          \"description\": {\n                                                              \"description\": \"A description of the expected parameter.\",\n                                                              \"type\": \"string\"\n                                                          },\n                                                          \"type\": {\n                                                              \"description\": \"The data type of the parameter.\",\n                                                              \"type\": \"string\"\n                                                          }\n                                                      },\n                                                      \"required\": [\n                                                          \"type\",\n                                                          \"description\"\n                                                      ],\n                                                      \"type\": \"object\"\n                                                  },\n                                                  \"description\": \"Definitions of each parameter.\",\n                                                  \"type\": \"object\"\n                                              },\n                                              \"required\": {\n                                                  \"description\": \"List of required parameter names.\",\n                                                  \"items\": {\n                                                      \"type\": \"string\"\n                                                  },\n                                                  \"type\": \"array\"\n                                              },\n                                              \"type\": {\n                                                  \"description\": \"The type of the parameters object (usually 'object').\",\n                                                  \"type\": \"string\"\n                                              }\n                                          },\n                                          \"required\": [\n                                              \"type\",\n                                              \"properties\"\n                                          ],\n                                          \"type\": \"object\"\n                                      }\n                                  },\n                                  \"required\": [\n                                      \"name\",\n                                      \"description\",\n                                      \"parameters\"\n                                  ]\n                              },\n                              {\n                                  \"properties\": {\n                                      \"function\": {\n                                          \"description\": \"Details of the function tool.\",\n                                          \"properties\": {\n                                              \"description\": {\n                                                  \"description\": \"A brief description of what the function does.\",\n                                                  \"type\": \"string\"\n                                              },\n                                              \"name\": {\n                                                  \"description\": \"The name of the function.\",\n                                                  \"type\": \"string\"\n                                              },\n                                              \"parameters\": {\n                                                  \"description\": \"Schema defining the parameters accepted by the function.\",\n                                                  \"properties\": {\n                                                      \"properties\": {\n                                                          \"additionalProperties\": {\n                                                              \"properties\": {\n                                                                  \"description\": {\n                                                                      \"description\": \"A description of the expected parameter.\",\n                                                                      \"type\": \"string\"\n                                                                  },\n                                                                  \"type\": {\n                                                                      \"description\": \"The data type of the parameter.\",\n                                                                      \"type\": \"string\"\n                                                                  }\n                                                              },\n                                                              \"required\": [\n                                                                  \"type\",\n                                                                  \"description\"\n                                                              ],\n                                                              \"type\": \"object\"\n                                                          },\n                                                          \"description\": \"Definitions of each parameter.\",\n                                                          \"type\": \"object\"\n                                                      },\n                                                      \"required\": {\n                                                          \"description\": \"List of required parameter names.\",\n                                                          \"items\": {\n                                                              \"type\": \"string\"\n                                                          },\n                                                          \"type\": \"array\"\n                                                      },\n                                                      \"type\": {\n                                                          \"description\": \"The type of the parameters object (usually 'object').\",\n                                                          \"type\": \"string\"\n                                                      }\n                                                  },\n                                                  \"required\": [\n                                                      \"type\",\n                                                      \"properties\"\n                                                  ],\n                                                  \"type\": \"object\"\n                                              }\n                                          },\n                                          \"required\": [\n                                              \"name\",\n                                              \"description\",\n                                              \"parameters\"\n                                          ],\n                                          \"type\": \"object\"\n                                      },\n                                      \"type\": {\n                                          \"description\": \"Specifies the type of tool (e.g., 'function').\",\n                                          \"type\": \"string\"\n                                      }\n                                  },\n                                  \"required\": [\n                                      \"type\",\n                                      \"function\"\n                                  ]\n                              }\n                          ],\n                          \"type\": \"object\"\n                      },\n                      \"type\": \"array\"\n                  },\n                  \"top_k\": {\n                      \"description\": \"Limits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\",\n                      \"maximum\": 50,\n                      \"minimum\": 1,\n                      \"type\": \"integer\"\n                  },\n                  \"top_p\": {\n                      \"description\": \"Controls the creativity of the AI's responses by adjusting how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\",\n                      \"maximum\": 2,\n                      \"minimum\": 0,\n                      \"type\": \"number\"\n                  }\n              },\n              \"required\": [\n                  \"messages\"\n              ],\n              \"title\": \"Messages\"\n          }\n      ],\n      \"type\": \"object\"\n  }",
      "language": "json"
    },
    {
      "code": "{\n      \"oneOf\": [\n          {\n              \"contentType\": \"application/json\",\n              \"properties\": {\n                  \"response\": {\n                      \"description\": \"The generated text response from the model\",\n                      \"type\": \"string\"\n                  },\n                  \"tool_calls\": {\n                      \"description\": \"An array of tool calls requests made during the response generation\",\n                      \"items\": {\n                          \"properties\": {\n                              \"arguments\": {\n                                  \"description\": \"The arguments passed to be passed to the tool call request\",\n                                  \"type\": \"object\"\n                              },\n                              \"name\": {\n                                  \"description\": \"The name of the tool to be called\",\n                                  \"type\": \"string\"\n                              }\n                          },\n                          \"type\": \"object\"\n                      },\n                      \"type\": \"array\"\n                  }\n              },\n              \"type\": \"object\"\n          },\n          {\n              \"contentType\": \"text/event-stream\",\n              \"format\": \"binary\",\n              \"type\": \"string\"\n          }\n      ]\n  }",
      "language": "json"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Playground",
      "id": "playground"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h2",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h3",
      "text": "Input",
      "id": "input"
    },
    {
      "level": "h3",
      "text": "Output",
      "id": "output"
    },
    {
      "level": "h2",
      "text": "API Schemas",
      "id": "api-schemas"
    }
  ],
  "url": "llms-txt#llama-3.1-70b-instruct",
  "links": []
}