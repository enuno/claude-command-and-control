{
  "title": "Output the sitekeys for use in your application",
  "content": "output \"login_sitekey\" {\n  value = cloudflare_turnstile_widget.login_form.sitekey\n}\n\noutput \"api_sitekey\" {\n  value = cloudflare_turnstile_widget.api_protection.sitekey\n}\nshell\nexport TF_VAR_cloudflare_api_token=\"your-api-token\"\nexport TF_VAR_account_id=\"your-account-id\"\nshell\nterraform init\nshell\nterraform plan\nshell\nterraform apply\nshell\nterraform plan\nshell\nterraform apply\nshell\nterraform destroy\ntf\nlocals {\n  environments = {\n    dev = {\n      domains = [\"dev.example.com\"]\n      mode    = \"managed\"\n    }\n    staging = {\n      domains = [\"staging.example.com\"]\n      mode    = \"non_interactive\"\n    }\n    prod = {\n      domains = [\"example.com\", \"www.example.com\"]\n      mode    = \"invisible\"\n    }\n  }\n}\n\nresource \"cloudflare_turnstile_widget\" \"app_widget\" {\n  for_each = local.environments\n\naccount_id = var.account_id\n  name       = \"App Widget - ${each.key}\"\n  domains    = each.value.domains\n  mode       = each.value.mode\n  region     = \"world\"\n}\ntf\nresource \"cloudflare_turnstile_widget\" \"enterprise_widget\" {\n  account_id     = var.account_id\n  name          = \"Enterprise Form\"\n  domains       = [\"enterprise.example.com\"]\n  mode          = \"managed\"\n  region        = \"world\"\n  offlabel      = true  # Remove Cloudflare branding\n  bot_fight_mode = true # Enable bot fight mode\n}\nshell\ngo install github.com/cloudflare/cf-terraforming/cmd/cf-terraforming@latest\nshell\ncf-terraforming generate \\\n  --resource-type cloudflare_turnstile_widget \\\n  --account $ACCOUNT_ID\nshell\nterraform import cloudflare_turnstile_widget.existing_widget \\\n  $ACCOUNT_ID/$WIDGET_SITEKEY\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"description\": \"\",\n    \"kind\": \"custom\",\n    \"name\": \"My custom ruleset\",\n    \"rules\": [\n        {\n            \"description\": \"Challenge web traffic (not /api)\",\n            \"expression\": \"not starts_with(http.request.uri.path, \\\"/api/\\\")\",\n            \"action\": \"managed_challenge\"\n        }\n    ],\n    \"phase\": \"http_request_firewall_custom\"\n  }'\nbash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/phases/http_request_firewall_custom/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"description\": \"Account-level phase entry point\",\n       \"id\": \"<RULESET_ID>\",\n       \"kind\": \"root\",\n       \"last_updated\": \"2024-03-16T15:40:08.202335Z\",\n       \"name\": \"root\",\n       \"phase\": \"http_request_firewall_custom\",\n       \"rules\": [\n         // ...\n       ],\n       \"version\": \"9\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"description\": \"Execute custom ruleset\",\n       \"expression\": \"(cf.zone.plan eq \\\"ENT\\\")\",\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"<CUSTOM_RULESET_ID>\"\n       },\n       \"enabled\": true\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"description\": \"\",\n       \"kind\": \"root\",\n       \"name\": \"Account-level phase entry point\",\n       \"rules\": [\n           {\n               \"action\": \"execute\",\n               \"expression\": \"(cf.zone.plan eq \\\"ENT\\\")\",\n               \"action_parameters\": {\n                   \"id\": \"<CUSTOM_RULESET_ID>\"\n               }\n           }\n       ],\n       \"phase\": \"http_request_firewall_custom\"\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"description\": \"Account-level phase entry point\",\n       \"id\": \"<RULESET_ID>\",\n       \"kind\": \"root\",\n       \"last_updated\": \"2024-03-16T15:40:08.202335Z\",\n       \"name\": \"root\",\n       \"phase\": \"http_request_firewall_managed\",\n       \"rules\": [\n         // ...\n       ],\n       \"source\": \"firewall_managed\",\n       \"version\": \"10\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"efb7b8c949ac4650a09736fc376e9aee\"\n       },\n       \"expression\": \"(cf.zone.name in {\\\"example.com\\\" \\\"anotherexample.com\\\"}) and cf.zone.plan eq \\\"ENT\\\"\",\n       \"description\": \"Execute the Cloudflare Managed Ruleset\"\n     }'\n   json\n   {\n     \"result\": {\n       \"id\": \"<RULESET_ID>\",\n       \"name\": \"Account-level phase entry point\",\n       \"description\": \"\",\n       \"kind\": \"root\",\n       \"version\": \"11\",\n       \"rules\": [\n         // ... any existing rules\n         {\n           \"id\": \"<RULE_ID>\",\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"action_parameters\": {\n             \"id\": \"efb7b8c949ac4650a09736fc376e9aee\",\n             \"version\": \"latest\"\n           },\n           \"expression\": \"(cf.zone.name in {\\\"example.com\\\" \\\"anotherexample.com\\\"}) and cf.zone.plan eq \\\"ENT\\\"\",\n           \"description\": \"Execute the Cloudflare Managed Ruleset\",\n           \"last_updated\": \"2024-03-18T18:30:08.122758Z\",\n           \"ref\": \"<RULE_REF>\",\n           \"enabled\": true\n         }\n       ],\n       \"last_updated\": \"2024-03-18T18:30:08.122758Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"name\": \"My ruleset\",\n       \"description\": \"Entry point ruleset for WAF managed rulesets\",\n       \"kind\": \"root\",\n       \"phase\": \"http_request_firewall_managed\",\n       \"rules\": [\n           {\n               \"action\": \"execute\",\n               \"action_parameters\": {\n                   \"id\": \"efb7b8c949ac4650a09736fc376e9aee\"\n               },\n               \"expression\": \"(cf.zone.name in {\\\"example.com\\\" \\\"anotherexample.com\\\"}) and cf.zone.plan eq \\\"ENT\\\"\",\n               \"description\": \"Execute the Cloudflare Managed Ruleset\"\n           }\n       ]\n     }'\n   bash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"description\": \"\",\n    \"kind\": \"custom\",\n    \"name\": \"My rate limiting ruleset\",\n    \"rules\": [\n        {\n            \"description\": \"Rate limit API requests\",\n            \"expression\": \"(starts_with(http.request.uri.path, \\\"/my-api/\\\"))\",\n            \"ratelimit\": {\n                \"characteristics\": [\n                    \"ip.src\",\n                    \"cf.colo.id\"\n                ],\n                \"requests_to_origin\": false,\n                \"requests_per_period\": 30,\n                \"period\": 60,\n                \"mitigation_timeout\": 120\n            },\n            \"action\": \"block\",\n            \"action_parameters\": {\n                \"response\": {\n                    \"status_code\": 429,\n                    \"content_type\": \"application/json\",\n                    \"content\": \"{ \\\"error\\\": \\\"Your API requests have been rate limited. Wait a couple of minutes and try again.\\\" }\"\n                }\n            },\n            \"enabled\": true\n        }\n    ],\n    \"phase\": \"http_ratelimit\"\n  }'\nbash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/phases/http_ratelimit/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"description\": \"Account-level phase entry point\",\n       \"id\": \"<RULESET_ID>\",\n       \"kind\": \"root\",\n       \"last_updated\": \"2024-03-16T15:40:08.202335Z\",\n       \"name\": \"root\",\n       \"phase\": \"http_ratelimit\",\n       \"rules\": [\n         // ...\n       ],\n       \"source\": \"firewall_managed\",\n       \"version\": \"10\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets/$RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"description\": \"Execute rate limiting ruleset\",\n       \"expression\": \"(cf.zone.plan eq \\\"ENT\\\")\",\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"<RATE_LIMITING_RULESET_ID>\"\n       },\n       \"enabled\": true\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"description\": \"\",\n       \"kind\": \"root\",\n       \"name\": \"Account-level phase entry point\",\n       \"rules\": [\n           {\n               \"action\": \"execute\",\n               \"expression\": \"(cf.zone.plan eq \\\"ENT\\\")\",\n               \"action_parameters\": {\n                   \"id\": \"<RATE_LIMITING_RULESET_ID>\"\n               }\n           }\n       ],\n       \"phase\": \"http_ratelimit\"\n     }'\n   bash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"skip\",\n    \"action_parameters\": {\n        \"ruleset\": \"current\"\n    },\n    \"expression\": \"http.request.uri.path contains \\\"/skip-current-ruleset/\\\"\",\n    \"description\": \"\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"skip\",\n    \"action_parameters\": {\n        \"phases\": [\n            \"http_ratelimit\"\n        ]\n    },\n    \"expression\": \"http.request.uri.path contains \\\"/skip-phase/\\\"\",\n    \"description\": \"\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"skip\",\n    \"action_parameters\": {\n        \"phases\": [\n            \"http_ratelimit\"\n        ]\n    },\n    \"logging\": {\n        \"enabled\": false\n    },\n    \"expression\": \"http.request.uri.path contains \\\"/disable-logging/\\\"\",\n    \"description\": \"\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"skip\",\n    \"action_parameters\": {\n        \"products\": [\n            \"zoneLockdown\",\n            \"uaBlock\"\n        ]\n    },\n    \"expression\": \"http.request.uri.path contains \\\"/skip-products/\\\"\",\n    \"description\": \"\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"skip\",\n    \"action_parameters\": {\n        \"phase\": \"current\"\n    },\n    \"expression\": \"http.request.uri.path contains \\\"/skip-current-ruleset/\\\"\",\n    \"description\": \"\"\n  }'\ntxt\n(http.request.uri.path matches \"/autodiscover.(xml|src)$\")\ntxt\ndownloads.example.com/images/cat.jpg?verify=1484063787-9JQB8vP1z0yc5DEBnH6JGWM3mBmvIeMrnnxFi3WtJLE%3D\ntxt\n(http.host eq \"downloads.example.com\" and not is_timed_hmac_valid_v0(\"mysecrettoken\", http.request.uri, 10800, http.request.timestamp.sec, 8))\ntxt\nhttp.request.timestamp.sec < (<TIMESTAMP_ISSUED> + 10800)\npython\n  import hmac\n  import base64\n  import time\n  import urllib.parse\n  from hashlib import sha256\n\nmessage = \"/images/cat.jpg\"\n  secret = \"mysecrettoken\"\n  separator = \"verify\"\n  timestamp = str(int(time.time()))\n  digest = hmac.new((secret).encode('utf8'), \"{}{}\".format(message, timestamp).encode('utf8'), sha256)\n  token = urllib.parse.quote_plus(base64.b64encode(digest.digest()))\n  print(\"{}={}-{}\".format(separator, timestamp, token))\n  python\n  import hmac\n  import base64\n  import time\n  import urllib\n  from hashlib import sha256\n\nmessage = \"/images/cat.jpg\"\n  secret = \"mysecrettoken\"\n  separator = \"verify\"\n  timestamp = str(int(time.time()))\n  digest = hmac.new(secret, message + timestamp, sha256)\n  param = urllib.urlencode({separator: '%s-%s' % (timestamp, base64.b64encode(digest.digest()))})\n  print(param)\n  php\n  <?php\n  $message = \"/images/cat.jpg\";\n  $secret = \"mysecrettoken\";\n  $separator = \"verify\";\n  $timestamp = time();\n  $token = urlencode(base64_encode(hash_hmac(\"sha256\", $message . $timestamp, $secret, true)));\n  echo(\"{$separator}={$timestamp}-{$token}\");\n  txt\nverify=1484063787-9JQB8vP1z0yc5DEBnH6JGWM3mBmvIeMrnnxFi3WtJLE%3D\ntxt\n/images/cat.jpg?verify=1484063787-9JQB8vP1z0yc5DEBnH6JGWM3mBmvIeMrnnxFi3WtJLE%3D\ntxt\n/case-studies/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/\ntxt\n  (http.host eq \"downloads.example.com\" and starts_with(http.request.uri.path, \"/case-studies\") and not is_timed_hmac_valid_v0(\"mysecrettoken\", concat(substring(http.request.uri.path, 0, 51), \"?\", http.request.uri.query), 10800, http.request.timestamp.sec, 1))\ntxt\n/case-studies/12345678-90ab-4cde-f012-3456789abcde/foobar-report.pdf?1755877101-5WOroVcDINdl2%2BQZxZFHJcJ6l%2Fep4HGIrX3DtSXzWO0%3D\n/case-studies/12345678-90ab-4cde-f012-3456789abcde/acme-corp.pdf?1755877101-5WOroVcDINdl2%2BQZxZFHJcJ6l%2Fep4HGIrX3DtSXzWO0%3D\n/case-studies/768bf477-22d5-4545-857d-b155510119ff/another-company-report.pdf?1755878057-jeMS5S1F3MIgxvL61UmiX4vODiWtuLfcPV6q%2B0Y3Rig%3D\ntxt\n  http.request.uri.path matches \"(comment|conversation|event|poll)/create\"\n  txt\n  not http.cookie matches \"auth_session=[0-9a-zA-Z]{32}-[0-9]{10}-[0-9a-z]{6}\"\n  txt\n  http.request.method eq \"POST\"\n  bash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/firewall-for-ai/settings\" \\\n  --request PUT \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{ \"pii_detection_enabled\": true }'\n  sh\ncurl \"https://<YOUR_HOSTNAME>/v1/messages\" \\\n--header \"Authorization: Bearer <TOKEN>\" \\\n--json '{ \"prompt\": \"Provide the phone number for the person associated with example@example.com\" }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"enabled\": true\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"enabled\": false\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": {\n    \"enabled\": true\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks/detections\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"username\": \"lookup_json_string(http.request.body.raw, \\\"user\\\")\",\n    \"password\": \"lookup_json_string(http.request.body.raw, \\\"secret\\\")\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks/detections\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<DETECTION_ID>\",\n      \"username\": \"lookup_json_string(http.request.body.raw, \\\"user\\\")\",\n      \"password\": \"lookup_json_string(http.request.body.raw, \\\"secret\\\")\"\n    }\n    // (...)\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks/detections/$DETECTION_ID\" \\\n  --request DELETE \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\ntxt\n  (cf.waf.credential_check.username_and_password_leaked)\n  bash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"enabled\": true\n    }'\n  terraform\n  resource \"cloudflare_leaked_credential_check\" \"zone_lcc_example\" {\n    zone_id = \"<ZONE_ID>\"\n    enabled = true\n  }\n  txt\n(cf.waf.credential_check.username_and_password_leaked)\njs\n     {\"user\": \"<USERNAME>\", \"secret\": \"<PASSWORD>\"}\n     js\n     {\"user\": \"<USERNAME>\", \"secret\": \"<PASSWORD>\"}\n     bash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks/detections\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"username\": \"lookup_json_string(http.request.body.raw, \\\"user\\\")\",\n      \"password\": \"lookup_json_string(http.request.body.raw, \\\"secret\\\")\"\n    }'\n  js\n  {\"user\": \"<USERNAME>\", \"secret\": \"<PASSWORD>\"}\n  terraform\n  resource \"cloudflare_leaked_credential_check_rule\" \"custom_location_example\" {\n    zone_id = \"<ZONE_ID>\"\n    username = \"lookup_json_string(http.request.body.raw, \\\"user\\\")\"\n    password = \"lookup_json_string(http.request.body.raw, \\\"secret\\\")\"\n  }\n  terraform\nresource \"cloudflare_leaked_credential_check\" \"zone_lcc_example\" {\n  zone_id = \"<ZONE_ID>\"\n  enabled = true\n}\nterraform\nresource \"cloudflare_leaked_credential_check_rule\" \"custom_location_example\" {\n  zone_id = \"<ZONE_ID>\"\n  username = \"lookup_json_string(http.request.body.raw, \\\"user\\\")\"\n  password = \"lookup_json_string(http.request.body.raw, \\\"secret\\\")\"\n}\ntf\nresource \"cloudflare_ruleset\" \"zone_custom_firewall_leaked_creds\" {\n  zone_id     = \"<ZONE_ID>\"\n  name        = \"Phase entry point ruleset for custom rules in my zone\"\n  description = \"\"\n  kind        = \"zone\"\n  phase       = \"http_request_firewall_custom\"\n\nrules {\n    ref         = \"challenge_leaked_username_password\"\n    description = \"Challenge requests with a leaked username and password\"\n    expression  = \"(cf.waf.credential_check.username_and_password_leaked)\"\n    action      = \"managed_challenge\"\n  }\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/enable\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/disable\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/settings\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/payloads\" \\\n  --request GET \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\njson\n{\n  \"result\": [\n    {\n      \"id\": \"<EXPRESSION_ID>\",\n      \"payload\": \"lookup_json_string(http.request.body.raw, \\\"file\\\")\"\n    }\n  ],\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/payloads\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '[\n    {\n        \"payload\": \"lookup_json_string(http.request.body.raw, \\\"file\\\")\"\n    }\n  ]'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/payloads/$EXPRESSION_ID\" \\\n  --request DELETE \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\nbash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/enable\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n  terraform\n  resource \"cloudflare_content_scanning\" \"zone_content_scanning_example\" {\n    zone_id = \"<ZONE_ID>\"\n    enabled = true\n  }\n  txt\n(cf.waf.content_scan.has_malicious_obj)\ntxt\n  (cf.waf.content_scan.has_malicious_obj and http.request.uri.path contains \"upload.php\")\n  txt\n  (cf.waf.content_scan.has_obj and cf.bot_management.score lt 10)\n  txt\n     lookup_json_string(http.request.body.raw, \"file\")\n     txt\n     lookup_json_string(http.request.body.raw, \"file\")\n     bash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/content-upload-scan/payloads\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '[\n      {\n          \"payload\": \"lookup_json_string(http.request.body.raw, \\\"file\\\")\"\n      }\n    ]'\n  txt\n  lookup_json_string(http.request.body.raw, \"file\")\n  terraform\n  resource \"cloudflare_content_scanning_expression\" \"my_custom_scan_expression\" {\n    zone_id = <ZONE_ID>\n    payload = \"lookup_json_string(http.request.body.raw, \\\"file\\\")\"\n  }\n  terraform\nresource \"cloudflare_content_scanning\" \"zone_content_scanning_example\" {\n  zone_id = \"<ZONE_ID>\"\n  enabled = true\n}\nterraform\nresource \"cloudflare_content_scanning_expression\" \"my_custom_scan_expression\" {\n  zone_id = <ZONE_ID>\n  payload = \"lookup_json_string(http.request.body.raw, \\\"file\\\")\"\n}\ntf\nresource \"cloudflare_ruleset\" \"zone_custom_firewall_malicious_uploads\" {\n  zone_id     = \"<ZONE_ID>\"\n  name        = \"Phase entry point ruleset for custom rules in my zone\"\n  description = \"\"\n  kind        = \"zone\"\n  phase       = \"http_request_firewall_custom\"\n\nrules {\n    ref         = \"block_malicious_uploads\"\n    description = \"Block requests uploading malicious content objects\"\n    expression  = \"(cf.waf.content_scan.has_malicious_obj and http.request.uri.path eq \\\"/upload.php\\\")\"\n    action      = \"block\"\n  }\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"Custom Ruleset A\",\n    \"kind\": \"custom\",\n    \"description\": \"This ruleset includes a rule checking for exposed credentials.\",\n    \"rules\": [\n        {\n            \"action\": \"log\",\n            \"description\": \"Exposed credentials check on login.php page\",\n            \"expression\": \"http.request.method == \\\"POST\\\" && http.request.uri == \\\"/login.php\\\"\",\n            \"exposed_credential_check\": {\n                \"username_expression\": \"url_decode(http.request.body.form[\\\"username\\\"][0])\",\n                \"password_expression\": \"url_decode(http.request.body.form[\\\"password\\\"][0])\"\n            }\n        }\n    ],\n    \"phase\": \"http_request_firewall_custom\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<CUSTOM_RULESET_ID>\",\n    \"name\": \"Custom Ruleset A\",\n    \"description\": \"This ruleset includes a rule checking for exposed credentials.\",\n    \"kind\": \"custom\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"<CUSTOM_RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"log\",\n        \"description\": \"Exposed credentials check on login.php page\",\n        \"expression\": \"http.request.method == \\\"POST\\\" && http.request.uri == \\\"/login.php\\\"\",\n        \"exposed_credential_check\": {\n          \"username_expression\": \"url_decode(http.request.body.form[\\\"username\\\"][0])\",\n          \"password_expression\": \"url_decode(http.request.body.form[\\\"password\\\"][0])\"\n        },\n        \"last_updated\": \"2021-03-19T10:48:04.057775Z\",\n        \"ref\": \"<CUSTOM_RULE_REF>\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2021-03-19T10:48:04.057775Z\",\n    \"phase\": \"http_request_firewall_custom\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\nbash\ncurl \"https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/rulesets\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"name\": \"Custom Ruleset B\",\n    \"kind\": \"custom\",\n    \"description\": \"This ruleset includes a rule checking for exposed credentials.\",\n    \"rules\": [\n        {\n            \"action\": \"rewrite\",\n            \"action_parameters\": {\n                \"headers\": {\n                    \"Exposed-Credential-Check\": {\n                        \"operation\": \"set\",\n                        \"value\": \"1\"\n                    }\n                }\n            },\n            \"description\": \"Exposed credentials check on login endpoint with JSON body\",\n            \"expression\": \"http.request.method == \\\"POST\\\" && http.request.uri == \\\"/login.php\\\" && any(http.request.headers[\\\"content-type\\\"][*] == \\\"application/json\\\")\",\n            \"exposed_credential_check\": {\n                \"username_expression\": \"lookup_json_string(http.request.body.raw, \\\"username\\\")\",\n                \"password_expression\": \"lookup_json_string(http.request.body.raw, \\\"password\\\")\"\n            }\n        }\n    ],\n    \"phase\": \"http_request_firewall_custom\"\n  }'\njson\n{\n  \"result\": {\n    \"id\": \"<CUSTOM_RULESET_ID>\",\n    \"name\": \"Custom Ruleset B\",\n    \"description\": \"This ruleset includes a rule checking for exposed credentials.\",\n    \"kind\": \"custom\",\n    \"version\": \"1\",\n    \"rules\": [\n      {\n        \"id\": \"<CUSTOM_RULE_ID>\",\n        \"version\": \"1\",\n        \"action\": \"rewrite\",\n        \"action_parameters\": {\n          \"headers\": {\n            \"Exposed-Credential-Check\": {\n              \"operation\": \"set\",\n              \"value\": \"1\"\n            }\n          }\n        },\n        \"description\": \"Exposed credentials check on login endpoint with JSON body\",\n        \"expression\": \"http.request.method == \\\"POST\\\" && http.request.uri == \\\"/login.php\\\" && any(http.request.headers[\\\"content-type\\\"][*] == \\\"application/json\\\")\",\n        \"exposed_credential_check\": {\n          \"username_expression\": \"lookup_json_string(http.request.body.raw, \\\"username\\\")\",\n          \"password_expression\": \"lookup_json_string(http.request.body.raw, \\\"password\\\")\"\n        },\n        \"last_updated\": \"2022-03-19T12:48:04.057775Z\",\n        \"ref\": \"<CUSTOM_RULE_REF>\",\n        \"enabled\": true\n      }\n    ],\n    \"last_updated\": \"2022-03-19T12:48:04.057775Z\",\n    \"phase\": \"http_request_firewall_custom\"\n  },\n  \"success\": true,\n  \"errors\": [],\n  \"messages\": []\n}\ntf\nresource \"cloudflare_ruleset\" \"account_firewall_custom_ruleset_exposed_creds\" {\n  account_id  = \"<ACCOUNT_ID>\"\n  name        = \"Custom ruleset checking for exposed credentials\"\n  description = \"\"\n  kind        = \"custom\"\n  phase       = \"http_request_firewall_custom\"\n\nrules {\n    ref         = \"check_for_exposed_creds_add_header\"\n    description = \"Add header when there is a rule match and exposed credentials are detected\"\n    expression  = \"http.request.method == \\\"POST\\\" && http.request.uri == \\\"/login.php\\\"\"\n    action      = \"rewrite\"\n    action_parameters {\n      headers {\n        name      = \"Exposed-Credential-Check\"\n        operation = \"set\"\n        value     = \"1\"\n      }\n    }\n    exposed_credential_check {\n      username_expression = \"url_decode(http.request.body.form[\\\"username\\\"][0])\"\n      password_expression = \"url_decode(http.request.body.form[\\\"password\\\"][0])\"\n    }\n  }\n}\ntf\nresource \"cloudflare_ruleset\" \"account_firewall_custom_entrypoint\" {\n  account_id  = \"<ACCOUNT_ID>\"\n  name        = \"Account-level entry point ruleset for the http_request_firewall_custom phase deploying a custom ruleset checking for exposed credentials\"\n  description = \"\"\n  kind        = \"root\"\n  phase       = \"http_request_firewall_custom\"\n\ndepends_on = [cloudflare_ruleset.account_firewall_custom_ruleset_exposed_creds]\n\nrules {\n    ref         = \"deploy_custom_ruleset_example_com\"\n    description = \"Deploy custom ruleset for example.com\"\n    expression  = \"(cf.zone.name eq \\\"example.com\\\")\"\n    action      = \"execute\"\n    action_parameters {\n      id = cloudflare_ruleset.account_firewall_custom_ruleset_exposed_creds.id\n    }\n  }\n}\nbash\n  curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/leaked-credential-checks\" \\\n    --request POST \\\n    --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n    --json '{\n      \"enabled\": true\n    }'\n  terraform\n  resource \"cloudflare_leaked_credential_check\" \"zone_lcc_example\" {\n    zone_id = \"<ZONE_ID>\"\n    enabled = true\n  }\n  json\n   \"action_parameters\": {\n     // ...\n     \"matched_data\": {\n       \"public_key\": \"<PUBLIC_KEY_VALUE>\"\n     }\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"id\": \"060013b1eeb14c93b0dcd896537e0d2c\", // entry point ruleset ID\n       \"name\": \"default\",\n       \"description\": \"\",\n       \"source\": \"firewall_managed\",\n       \"kind\": \"zone\",\n       \"version\": \"3\",\n       \"rules\": [\n         // (...)\n         {\n           \"id\": \"1bdb49371c1f46958fc8b985efcb79e7\", // `execute` rule ID\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"expression\": \"true\",\n           \"last_updated\": \"2024-01-20T14:21:28.643979Z\",\n           \"ref\": \"1bdb49371c1f46958fc8b985efcb79e7\",\n           \"enabled\": true,\n           \"action_parameters\": {\n             \"id\": \"efb7b8c949ac4650a09736fc376e9aee\", // \"Cloudflare Managed Ruleset\" ID\n             \"version\": \"latest\"\n           }\n         }\n         // (...)\n       ],\n       \"last_updated\": \"2024-01-20T14:29:00.190643Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/060013b1eeb14c93b0dcd896537e0d2c/rules/1bdb49371c1f46958fc8b985efcb79e7\" \\\n     --request PATCH \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"efb7b8c949ac4650a09736fc376e9aee\",\n           \"matched_data\": {\n               \"public_key\": \"Ycig/Zr/pZmklmFUN99nr+taURlYItL91g+NcHGYpB8=\"\n           }\n       },\n       \"expression\": \"true\"\n     }'\n   bash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules/$RULE_ID\" \\\n  --request PATCH \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"action\": \"execute\",\n    \"action_parameters\": {\n        \"id\": \"efb7b8c949ac4650a09736fc376e9aee\"\n    },\n    \"expression\": \"true\"\n  }'\njson\n{\n  // for fields with only one match (such as URI or user agent fields):\n  \"<match_location>\": {\n    \"before\": \"<text_before_match>\",\n    \"content\": \"<matched_text>\",\n    \"after\": \"<text_after_match>\"\n  },\n  // for fields with possible multiple matches (such as form, header, or body fields):\n  \"<match_location>\": [\n    {\n      \"before\": \"<text_before_match_1>\",\n      \"content\": \"<matched_text_1>\",\n      \"after\": \"<text_after_match_1>\"\n    },\n    {\n      \"before\": \"<text_before_match_2>\",\n      \"content\": \"<matched_text_2>\",\n      \"after\": \"<text_after_match_2>\"\n    }\n  ]\n}\njson\n{\n  \"http.request.uri\": {\n    \"before\": \"/admin\",\n    \"content\": \"/.git/\",\n    \"after\": \"config\"\n  }\n}\njson\n{\n  \"http.request.headers.values[3]\": [\n    { \"content\": \"phar://\", \"after\": \"example\" }\n  ]\n}\njson\n{\n  \"http.request.body.raw\": {\n    \"before\": \"NY>\",\n    \"content\": \"<!ENTITY xxe SYSTEM \\\"file:///dev/random\\\">] > \",\n    \"after\": \"<foo>&xxe;</foo>\"\n  }\n}\nbash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"description\": \"Zone-level phase entry point\",\n       \"id\": \"<RULESET_ID>\",\n       \"kind\": \"zone\",\n       \"last_updated\": \"2024-03-16T15:40:08.202335Z\",\n       \"name\": \"zone\",\n       \"phase\": \"http_request_firewall_managed\",\n       \"rules\": [\n         // ...\n       ],\n       \"source\": \"firewall_managed\",\n       \"version\": \"10\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"efb7b8c949ac4650a09736fc376e9aee\"\n       },\n       \"expression\": \"true\",\n       \"description\": \"Execute the Cloudflare Managed Ruleset\"\n     }'\n   json\n   {\n     \"result\": {\n       \"id\": \"<RULESET_ID>\",\n       \"name\": \"Zone-level phase entry point\",\n       \"description\": \"\",\n       \"kind\": \"zone\",\n       \"version\": \"11\",\n       \"rules\": [\n         // ... any existing rules\n         {\n           \"id\": \"<RULE_ID>\",\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"action_parameters\": {\n             \"id\": \"efb7b8c949ac4650a09736fc376e9aee\",\n             \"version\": \"latest\"\n           },\n           \"expression\": \"true\",\n           \"description\": \"Execute the Cloudflare Managed Ruleset\",\n           \"last_updated\": \"2024-03-18T18:08:14.003361Z\",\n           \"ref\": \"<RULE_REF>\",\n           \"enabled\": true\n         }\n       ],\n       \"last_updated\": \"2024-03-18T18:08:14.003361Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"name\": \"My ruleset\",\n       \"description\": \"Entry point ruleset for WAF managed rulesets\",\n       \"kind\": \"zone\",\n       \"phase\": \"http_request_firewall_managed\",\n       \"rules\": [\n           {\n               \"action\": \"execute\",\n               \"action_parameters\": {\n                   \"id\": \"efb7b8c949ac4650a09736fc376e9aee\"\n               },\n               \"expression\": \"true\",\n               \"description\": \"Execute the Cloudflare Managed Ruleset\"\n           }\n       ]\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"description\": \"Zone-level phase entry point\",\n       \"id\": \"<ENTRY_POINT_RULESET_ID>\",\n       \"kind\": \"zone\",\n       \"last_updated\": \"2024-03-16T15:40:08.202335Z\",\n       \"name\": \"zone\",\n       \"phase\": \"http_request_firewall_managed\",\n       \"rules\": [\n         // ...\n       ],\n       \"source\": \"firewall_managed\",\n       \"version\": \"10\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$ENTRY_POINT_RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"c2e184081120413c86c3ab7e14069605\"\n       },\n       \"expression\": \"true\",\n       \"description\": \"Execute the Cloudflare Exposed Credentials Check Managed Ruleset\"\n     }'\n   json\n   {\n     \"result\": {\n       \"id\": \"<ENTRY_POINT_RULESET_ID>\",\n       \"name\": \"Zone-level phase entry point\",\n       \"description\": \"\",\n       \"kind\": \"zone\",\n       \"version\": \"11\",\n       \"rules\": [\n         // ... any existing rules\n         {\n           \"id\": \"<RULE_ID>\",\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"action_parameters\": {\n             \"id\": \"c2e184081120413c86c3ab7e14069605\",\n             \"version\": \"latest\"\n           },\n           \"expression\": \"true\",\n           \"description\": \"Execute the Cloudflare Exposed Credentials Check Managed Ruleset\",\n           \"last_updated\": \"2024-03-18T18:08:14.003361Z\",\n           \"ref\": \"<RULE_REF>\",\n           \"enabled\": true\n         }\n       ],\n       \"last_updated\": \"2024-03-18T18:08:14.003361Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"name\": \"My ruleset\",\n       \"description\": \"Entry point ruleset for WAF managed rulesets\",\n       \"kind\": \"zone\",\n       \"phase\": \"http_request_firewall_managed\",\n       \"rules\": [\n           {\n               \"action\": \"execute\",\n               \"action_parameters\": {\n                   \"id\": \"c2e184081120413c86c3ab7e14069605\"\n               },\n               \"expression\": \"true\",\n               \"description\": \"Execute the Cloudflare Exposed Credentials Check Managed Ruleset\"\n           }\n       ]\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_response_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"description\": \"Zone-level phase entry point (response)\",\n       \"id\": \"<RULESET_ID>\",\n       \"kind\": \"zone\",\n       \"last_updated\": \"2024-03-16T15:40:08.202335Z\",\n       \"name\": \"zone\",\n       \"phase\": \"http_response_firewall_managed\",\n       \"rules\": [\n         // ...\n       ],\n       \"source\": \"firewall_managed\",\n       \"version\": \"10\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"action\": \"execute\",\n       \"action_parameters\": {\n           \"id\": \"e22d83c647c64a3eae91b71b499d988e\"\n       },\n       \"expression\": \"true\",\n       \"description\": \"Execute the Cloudflare Sensitive Data Detection managed ruleset\"\n     }'\n   json\n   {\n     \"result\": {\n       \"id\": \"<RULESET_ID>\",\n       \"name\": \"Zone-level phase entry point (response)\",\n       \"description\": \"\",\n       \"kind\": \"zone\",\n       \"version\": \"11\",\n       \"rules\": [\n         // ... any existing rules\n         {\n           \"id\": \"<RULE_ID>\",\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"action_parameters\": {\n             \"id\": \"e22d83c647c64a3eae91b71b499d988e\",\n             \"version\": \"latest\"\n           },\n           \"expression\": \"true\",\n           \"description\": \"Execute the Cloudflare Sensitive Data Detection managed ruleset\",\n           \"last_updated\": \"2024-03-18T18:08:14.003361Z\",\n           \"ref\": \"<RULE_REF>\",\n           \"enabled\": true\n         }\n       ],\n       \"last_updated\": \"2024-03-18T18:08:14.003361Z\",\n       \"phase\": \"http_response_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"name\": \"My ruleset\",\n       \"description\": \"Entry point ruleset for WAF managed rulesets (response)\",\n       \"kind\": \"zone\",\n       \"phase\": \"http_response_firewall_managed\",\n       \"rules\": [\n           {\n               \"action\": \"execute\",\n               \"action_parameters\": {\n                   \"id\": \"e22d83c647c64a3eae91b71b499d988e\"\n               },\n               \"expression\": \"true\",\n               \"description\": \"Execute the Cloudflare Sensitive Data Detection managed ruleset\"\n           }\n       ]\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"id\": \"060013b1eeb14c93b0dcd896537e0d2c\", // entry point ruleset ID\n       \"name\": \"default\",\n       \"description\": \"\",\n       \"source\": \"firewall_managed\",\n       \"kind\": \"zone\",\n       \"version\": \"3\",\n       \"rules\": [\n         // (...)\n       ],\n       \"last_updated\": \"2024-01-20T14:29:00.190643Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$ENTRY_POINT_RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"expression\": \"(http.host eq \\\"dev.example.com\\\")\",\n       \"description\": \"Skip managed rules for dev.example.com\",\n       \"action\": \"skip\",\n       \"action_parameters\": {\n           \"ruleset\": \"current\"\n       },\n       \"position\": {\n           \"before\": \"\"\n       }\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"id\": \"060013b1eeb14c93b0dcd896537e0d2c\", // entry point ruleset ID\n       \"name\": \"default\",\n       \"description\": \"\",\n       \"source\": \"firewall_managed\",\n       \"kind\": \"zone\",\n       \"version\": \"3\",\n       \"rules\": [\n         // (...)\n         {\n           \"id\": \"1bdb49371c1f46958fc8b985efcb79e7\", // `execute` rule ID\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"expression\": \"true\",\n           \"last_updated\": \"2024-01-20T14:21:28.643979Z\",\n           \"ref\": \"1bdb49371c1f46958fc8b985efcb79e7\",\n           \"enabled\": true,\n           \"action_parameters\": {\n             \"id\": \"efb7b8c949ac4650a09736fc376e9aee\", // \"Cloudflare Managed Ruleset\" ID\n             \"version\": \"latest\"\n           }\n         }\n         // (...)\n       ],\n       \"last_updated\": \"2024-01-20T14:29:00.190643Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$ENTRY_POINT_RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"expression\": \"(http.host eq \\\"dev.example.com\\\")\",\n       \"description\": \"Skip the Cloudflare Managed Ruleset for dev.example.com\",\n       \"action\": \"skip\",\n       \"action_parameters\": {\n           \"rulesets\": [\n               \"efb7b8c949ac4650a09736fc376e9aee\"\n           ]\n       },\n       \"position\": {\n           \"before\": \"1bdb49371c1f46958fc8b985efcb79e7\"\n       }\n     }'\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/efb7b8c949ac4650a09736fc376e9aee\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"id\": \"efb7b8c949ac4650a09736fc376e9aee\",\n       \"name\": \"Cloudflare Managed Ruleset\",\n       \"description\": \"Created by the Cloudflare security team, this ruleset is designed to provide fast and effective protection for all your applications. It is frequently updated to cover new vulnerabilities and reduce false positives.\",\n       \"source\": \"firewall_managed\",\n       \"kind\": \"managed\",\n       \"version\": \"180\",\n       \"rules\": [\n         // (...)\n         {\n           \"id\": \"d9e350f1b72d4730899c8a420e48a85d\", // ID of rule to skip\n           \"version\": \"180\",\n           \"action\": \"block\",\n           \"categories\": [\"file-inclusion\", \"october-cms\"],\n           \"description\": \"October CMS - File Inclusion\",\n           \"last_updated\": \"2024-02-05T07:12:54.565276Z\",\n           \"ref\": \"adb550873eb92d32372ed08514d33241\",\n           \"enabled\": true\n         }\n         // (...)\n       ],\n       \"last_updated\": \"2024-02-05T07:12:54.565276Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/phases/http_request_firewall_managed/entrypoint\" \\\n     --request GET \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\"\n   json\n   {\n     \"result\": {\n       \"id\": \"060013b1eeb14c93b0dcd896537e0d2c\", // entry point ruleset ID\n       \"name\": \"default\",\n       \"description\": \"\",\n       \"source\": \"firewall_managed\",\n       \"kind\": \"zone\",\n       \"version\": \"3\",\n       \"rules\": [\n         // (...)\n         {\n           \"id\": \"1bdb49371c1f46958fc8b985efcb79e7\", // `execute` rule ID\n           \"version\": \"1\",\n           \"action\": \"execute\",\n           \"expression\": \"true\",\n           \"last_updated\": \"2024-01-20T14:21:28.643979Z\",\n           \"ref\": \"1bdb49371c1f46958fc8b985efcb79e7\",\n           \"enabled\": true,\n           \"action_parameters\": {\n             \"id\": \"efb7b8c949ac4650a09736fc376e9aee\", // \"Cloudflare Managed Ruleset\" ID\n             \"version\": \"latest\"\n           }\n         }\n         // (...)\n       ],\n       \"last_updated\": \"2024-01-20T14:29:00.190643Z\",\n       \"phase\": \"http_request_firewall_managed\"\n     },\n     \"success\": true,\n     \"errors\": [],\n     \"messages\": []\n   }\n   bash\n   curl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/rulesets/$ENTRY_POINT_RULESET_ID/rules\" \\\n     --request POST \\\n     --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n     --json '{\n       \"expression\": \"(http.host eq \\\"dev.example.com\\\")\",\n       \"description\": \"Skip a single rule for dev.example.com\",\n       \"action\": \"skip\",\n       \"action_parameters\": {\n           \"rules\": {\n               \"efb7b8c949ac4650a09736fc376e9aee\": [\n                   \"d9e350f1b72d4730899c8a420e48a85d\"\n               ]\n           }\n       },\n       \"position\": {\n           \"before\": \"1bdb49371c1f46958fc8b985efcb79e7\"\n       }\n     }'\n   sh\n   cf-terraforming generate --zone <ZONE_ID> --resource-type \"cloudflare_ruleset\"\n   txt\n   resource \"cloudflare_ruleset\" \"terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31\" {\n     kind    = \"zone\"\n     name    = \"default\"\n     phase   = \"http_request_firewall_custom\"\n     zone_id = \"<ZONE_ID>\"\n     rules {\n       [...]\n     }\n     [...]\n   }\n   [...]\n   sh\n   terraform import cloudflare_ruleset.terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31 zone/<ZONE_ID>/3c0b456bc2aa443089c5f40f45f51b31\n   txt\n   cloudflare_ruleset.terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31: Importing from ID \"zone/<ZONE_ID>/3c0b456bc2aa443089c5f40f45f51b31\"...\n   cloudflare_ruleset.terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31: Import prepared!\n     Prepared cloudflare_ruleset for import\n   cloudflare_ruleset.terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31: Refreshing state... [id=3c0b456bc2aa443089c5f40f45f51b31]\n\nThe resources that were imported are shown above. These resources are now in\n   your Terraform state and will henceforth be managed by Terraform.\n   sh\n   terraform plan\n   txt\n   cloudflare_ruleset.terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31: Refreshing state... [id=3c0b456bc2aa443089c5f40f45f51b31]\n   [...]\n   cloudflare_filter.my_filter: Refreshing state... [id=14a2524fd75c419f8d273116815b6349]\n   cloudflare_firewall_rule.my_firewall_rule: Refreshing state... [id=0580eb5d92e344ddb2374979f74c3ddf]\n   [...]\n   sh\n      terraform state list | grep -E '^cloudflare_(filter|firewall_rule)\\.'\n      txt\n      cloudflare_filter.my_filter\n      cloudflare_firewall_rule.my_firewall_rule\n      sh\n      terraform state rm -dry-run cloudflare_filter.my_filter cloudflare_firewall_rule.my_firewall_rule\n      txt\n      Would remove cloudflare_filter.my_filter\n      Would remove cloudflare_firewall_rule.my_firewall_rule\n      sh\n      terraform state rm cloudflare_filter.my_filter cloudflare_firewall_rule.my_firewall_rule\n      txt\n      Removed cloudflare_filter.my_filter\n      Removed cloudflare_firewall_rule.my_firewall_rule\n      Successfully removed 2 resource instance(s).\n      sh\n   terraform plan\n   txt\n   cloudflare_ruleset.terraform_managed_resource_3c0b456bc2aa443089c5f40f45f51b31: Refreshing state... [id=3c0b456bc2aa443089c5f40f45f51b31]\n   [...]\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration and found no differences, so no changes are needed.\n   html\n   <!doctype html>\n   <html>\n     <head>\n       <meta charset=\"utf-8\" />\n       <title>Custom RL page</title>\n       <meta\n         http-equiv=\"refresh\"\n         content=\"0; url='https://yourzonename/block'\"\n       />\n     </head>\n\n<body></body>\n   </html>\n   txt\n<FIELD> in $<LIST_NAME>\ntxt\n<IP_ADDRESS_1>,<DESCRIPTION>\n<IP_ADDRESS_2>\ntxt\n<HOSTNAME_1>,<DESCRIPTION>\n<HOSTNAME_2>\ntxt\n<ASN_1>,<DESCRIPTION>\n<ASN_2>\ntxt\n  ip.src in $office_network\n  txt\n  not ip.src in $office_network\n  txt\n  ip.src in $cf.open_proxies\n  html\n  <!--email_off-->contact@example.com<!--/email_off-->\n  txt\nPOST zones/{zone_id}/waiting_rooms/{room_id}/rules\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/waiting_rooms/$WAITING_ROOM_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"description\": \"subpath bypass\",\n    \"expression\": \"starts_with(http.request.uri.path, \\\"/bypassme\\\") or ends_with(http.request.uri.path, \\\".js\\\") or ends_with(http.request.uri.path, \\\".css\\\") or ends_with(http.request.uri.path, \\\".png\\\")\",\n    \"action\": \"bypass_waiting_room\"\n  }'\nbash\ncurl \"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/waiting_rooms/$WAITING_ROOM_ID/rules\" \\\n  --request POST \\\n  --header \"Authorization: Bearer $CLOUDFLARE_API_TOKEN\" \\\n  --json '{\n    \"description\": \"ip list bypass\",\n    \"expression\": \"ip.src in $bypass_ip_list\",\n    \"action\": \"bypass_waiting_room\"\n  }'\nbash\ncurl https://web3-trial.cloudflare-eth.com/v1/rinkeby \\\n--header 'Content-Type: application/json' \\\n--data '{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"eth_getBlockByNumber\",\n  \"params\": [\"0x2244\", true],\n  \"id\": 1\n}'\njs\nawait fetch(\n  new Request('https://web3-trial.cloudflare-eth.com/v1/rinkeby', {\n    method: 'POST',\n    body: JSON.stringify({\n      jsonrpc: '2.0',\n      method: 'eth_getBlockByNumber',\n      params: ['0x2244', true],\n      id: 1,\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n).then(resp => {\n  return resp.json();\n});\nbash\ncurl https://web3-trial.cloudflare-eth.com/v1/sepolia \\\n--header 'Content-Type: application/json' \\\n--data '{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"eth_getBlockByNumber\",\n  \"params\": [\"0x2244\", true],\n  \"id\": 1\n}'\njs\nawait fetch(\n  new Request('https://web3-trial.cloudflare-eth.com/v1/sepolia', {\n    method: 'POST',\n    body: JSON.stringify({\n      jsonrpc: '2.0',\n      method: 'eth_getBlockByNumber',\n      params: ['0x2244', true],\n      id: 1,\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n).then(resp => {\n  return resp.json();\n});\nsh\ncurl https://web3-trial.cloudflare-eth.com/v1/mainnet \\\n-X POST \\\n-H 'Content-Type: application/json' \\\n--data '{\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"trace_filter\",\n    \"params\":[\n        {\n            \"count\": 200,\n            \"fromBlock\": \"0xccb943\",\n            \"toBlock\": \"0xccbc62\",\n            \"fromAddress\": [\n                \"0xEdC763b3e418cD14767b3Be02b667619a6374076\"\n            ]\n        }\n    ],\n    \"id\":1\n    }'\njson\n{\n  \"jsonrpc\": \"2.0\",\n  \"result\": [\n    {\n      \"action\": {\n        \"from\": \"0xedc763b3e418cd14767b3be02b667619a6374076\",\n        \"callType\": \"call\",\n        \"gas\": \"0x8462\",\n        \"input\": \"0x095ea7b30000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488dffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\",\n        \"to\": \"0x7ff4169a6b5122b664c51c95727d87750ec07c84\",\n        \"value\": \"0x0\"\n      },\n      \"blockHash\": \"0x351e7c06ec010c8f7e7358eb580238dd23e1e129be96822aa93ebb6da08558e6\",\n      \"blockNumber\": 13416771,\n      \"result\": {\n        \"gasUsed\": \"0x6009\",\n        \"output\": \"0x0000000000000000000000000000000000000000000000000000000000000001\"\n      },\n      \"subtraces\": 0,\n      \"traceAddress\": [],\n      \"transactionHash\": \"0x054bbb9fbb855bf23f755e548c7409f45fc5eff8a824b2ad06380bc038d7b049\",\n      \"transactionPosition\": 54,\n      \"type\": \"call\"\n    }\n  ],\n  \"id\": 1\n}\njson\n{\n  \"Peering\": {\n    \"Peers\": [\n      {\n        \"ID\": \"QmcFf2FH3CEgTNHeMRGhN7HNHU1EXAxoEk6EFuSyXCsvRE\",\n        \"Addrs\": [\n          \"/dnsaddr/node-1.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcFmLd5ySfk2WZuJ1mfSWLDjdmHZq7rSAua4GoeSQfs1z\",\n        \"Addrs\": [\n          \"/dnsaddr/node-2.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfFmzSDVbwexQ9Au2pt5YEXHK5xajwgaU6PpkbLWerMa\",\n        \"Addrs\": [\n          \"/dnsaddr/node-3.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfJeB3Js1FG7T8YaZATEiaHqNKVdQfybYYkbT1knUswx\",\n        \"Addrs\": [\n          \"/dnsaddr/node-4.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfVvzK4tMdFmpJjEKDUoqRgP4W9FnmJoziYX5GXJJ8eZ\",\n        \"Addrs\": [\n          \"/dnsaddr/node-5.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfZD3VKrUxyP9BbyUnZDpbqDnT7cQ4WjPP8TRLXaoE7G\",\n        \"Addrs\": [\n          \"/dnsaddr/node-6.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfZP2LuW4jxviTeG8fi28qjnZScACb8PEgHAc17ZEri3\",\n        \"Addrs\": [\n          \"/dnsaddr/node-7.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfgsJsMtx6qJb74akCw1M24X1zFwgGo11h1cuhwQjtJP\",\n        \"Addrs\": [\n          \"/dnsaddr/node-8.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"Qmcfr2FC7pFzJbTSDfYaSy1J8Uuy8ccGLeLyqJCKJvTHMi\",\n        \"Addrs\": [\n          \"/dnsaddr/node-9.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfR3V5YAtHBzxVACWCzXTt26SyEkxdwhGJ6875A8BuWx\",\n        \"Addrs\": [\n          \"/dnsaddr/node-10.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"Qmcfuo1TM9uUiJp6dTbm915Rf1aTqm3a3dnmCdDQLHgvL5\",\n        \"Addrs\": [\n          \"/dnsaddr/node-11.ingress.cloudflare-ipfs.com\"\n        ]\n      },\n      {\n        \"ID\": \"QmcfV2sg9zaq7UUHVCGuSvT2M2rnLBAPsiE79vVyK3Cuev\",\n        \"Addrs\": [\n          \"/dnsaddr/node-12.ingress.cloudflare-ipfs.com\"\n        ]\n      }\n    ]\n  }\n}\nplaintext\n{% assign base = '' %}\n{% assign depth = page.url | split: '/' | size | minus: 1 %}\n{% if    depth <= 1 %}{% assign base = '.' %}\n{% elsif depth == 2 %}{% assign base = '..' %}\n{% elsif depth == 3 %}{% assign base = '../..' %}\n{% elsif depth == 4 %}{% assign base = '../../..' %}{% endif %}\nplaintext\n{%- include base.html -%}\njsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"name\": \"my-worker-dev\",\n      \"vars\": {\n        \"API_HOST\": \"example.com\",\n        \"API_ACCOUNT_ID\": \"example_user\",\n        \"SERVICE_X_DATA\": {\n          \"URL\": \"service-x-api.dev.example\",\n          \"MY_ID\": 123\n        }\n      }\n    }\n    toml\n    name = \"my-worker-dev\"\n\n[vars]\n    API_HOST = \"example.com\"\n    API_ACCOUNT_ID = \"example_user\"\n    SERVICE_X_DATA = { URL = \"service-x-api.dev.example\", MY_ID = 123 }\n    jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"my-worker-dev\",\n    \"vars\": {\n      \"API_HOST\": \"example.com\",\n      \"API_ACCOUNT_ID\": \"example_user\",\n      \"SERVICE_X_DATA\": {\n        \"URL\": \"service-x-api.dev.example\",\n        \"MY_ID\": 123\n      }\n    }\n  }\n  toml\n  name = \"my-worker-dev\"\n\n[vars]\n  API_HOST = \"example.com\"\n  API_ACCOUNT_ID = \"example_user\"\n  SERVICE_X_DATA = { URL = \"service-x-api.dev.example\", MY_ID = 123 }\n  json\n{\n  \"type\": \"cf.workersBuilds.worker.build.started\",\n  \"source\": {\n    \"type\": \"workersBuilds.worker\",\n    \"workerName\": \"my-worker\"\n  },\n  \"payload\": {\n    \"buildUuid\": \"build-12345678-90ab-cdef-1234-567890abcdef\",\n    \"status\": \"running\",\n    \"buildOutcome\": null,\n    \"createdAt\": \"2025-05-01T02:48:57.132Z\",\n    \"initializingAt\": \"2025-05-01T02:48:58.132Z\",\n    \"runningAt\": \"2025-05-01T02:48:59.132Z\",\n    \"stoppedAt\": null,\n    \"buildTriggerMetadata\": {\n      \"buildTriggerSource\": \"push_event\",\n      \"branch\": \"main\",\n      \"commitHash\": \"abc123def456\",\n      \"commitMessage\": \"Fix bug in authentication\",\n      \"author\": \"developer@example.com\",\n      \"buildCommand\": \"npm run build\",\n      \"deployCommand\": \"wrangler deploy\",\n      \"rootDirectory\": \"/\",\n      \"repoName\": \"my-worker-repo\",\n      \"providerAccountName\": \"github-user\",\n      \"providerType\": \"github\"\n    }\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workersBuilds.worker.build.failed\",\n  \"source\": {\n    \"type\": \"workersBuilds.worker\",\n    \"workerName\": \"my-worker\"\n  },\n  \"payload\": {\n    \"buildUuid\": \"build-12345678-90ab-cdef-1234-567890abcdef\",\n    \"status\": \"failed\",\n    \"buildOutcome\": \"failure\",\n    \"createdAt\": \"2025-05-01T02:48:57.132Z\",\n    \"initializingAt\": \"2025-05-01T02:48:58.132Z\",\n    \"runningAt\": \"2025-05-01T02:48:59.132Z\",\n    \"stoppedAt\": \"2025-05-01T02:50:00.132Z\",\n    \"buildTriggerMetadata\": {\n      \"buildTriggerSource\": \"push_event\",\n      \"branch\": \"main\",\n      \"commitHash\": \"abc123def456\",\n      \"commitMessage\": \"Fix bug in authentication\",\n      \"author\": \"developer@example.com\",\n      \"buildCommand\": \"npm run build\",\n      \"deployCommand\": \"wrangler deploy\",\n      \"rootDirectory\": \"/\",\n      \"repoName\": \"my-worker-repo\",\n      \"providerAccountName\": \"github-user\",\n      \"providerType\": \"github\"\n    }\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workersBuilds.worker.build.canceled\",\n  \"source\": {\n    \"type\": \"workersBuilds.worker\",\n    \"workerName\": \"my-worker\"\n  },\n  \"payload\": {\n    \"buildUuid\": \"build-12345678-90ab-cdef-1234-567890abcdef\",\n    \"status\": \"canceled\",\n    \"buildOutcome\": \"canceled\",\n    \"createdAt\": \"2025-05-01T02:48:57.132Z\",\n    \"initializingAt\": \"2025-05-01T02:48:58.132Z\",\n    \"runningAt\": \"2025-05-01T02:48:59.132Z\",\n    \"stoppedAt\": \"2025-05-01T02:49:30.132Z\",\n    \"buildTriggerMetadata\": {\n      \"buildTriggerSource\": \"push_event\",\n      \"branch\": \"main\",\n      \"commitHash\": \"abc123def456\",\n      \"commitMessage\": \"Fix bug in authentication\",\n      \"author\": \"developer@example.com\",\n      \"buildCommand\": \"npm run build\",\n      \"deployCommand\": \"wrangler deploy\",\n      \"rootDirectory\": \"/\",\n      \"repoName\": \"my-worker-repo\",\n      \"providerAccountName\": \"github-user\",\n      \"providerType\": \"github\"\n    }\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\njson\n{\n  \"type\": \"cf.workersBuilds.worker.build.succeeded\",\n  \"source\": {\n    \"type\": \"workersBuilds.worker\",\n    \"workerName\": \"my-worker\"\n  },\n  \"payload\": {\n    \"buildUuid\": \"build-12345678-90ab-cdef-1234-567890abcdef\",\n    \"status\": \"success\",\n    \"buildOutcome\": \"success\",\n    \"createdAt\": \"2025-05-01T02:48:57.132Z\",\n    \"initializingAt\": \"2025-05-01T02:48:58.132Z\",\n    \"runningAt\": \"2025-05-01T02:48:59.132Z\",\n    \"stoppedAt\": \"2025-05-01T02:50:15.132Z\",\n    \"buildTriggerMetadata\": {\n      \"buildTriggerSource\": \"push_event\",\n      \"branch\": \"main\",\n      \"commitHash\": \"abc123def456\",\n      \"commitMessage\": \"Fix bug in authentication\",\n      \"author\": \"developer@example.com\",\n      \"buildCommand\": \"npm run build\",\n      \"deployCommand\": \"wrangler deploy\",\n      \"rootDirectory\": \"/\",\n      \"repoName\": \"my-worker-repo\",\n      \"providerAccountName\": \"github-user\",\n      \"providerType\": \"github\"\n    }\n  },\n  \"metadata\": {\n    \"accountId\": \"f9f79265f388666de8122cfb508d7776\",\n    \"eventSubscriptionId\": \"1830c4bb612e43c3af7f4cada31fbf3f\",\n    \"eventSchemaVersion\": 1,\n    \"eventTimestamp\": \"2025-05-01T02:48:57.132Z\"\n  }\n}\nyaml\nname: Deploy Worker\non:\n  push:\n    branches:\n      - main\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    timeout-minutes: 60\n    steps:\n      - uses: actions/checkout@v4\n      - name: Build & Deploy Worker\n        uses: cloudflare/wrangler-action@v3\n        with:\n          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}\n          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}\njs\nasync function handleRequest(request) {\n  // Make the fetch request to the third party API endpoint\n  const response = await fetch(\"https://weather-api.com/endpoint\", {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n// Retrieve the data from the response\n  const data = await response.json();\n\n// Use the data to modify or manipulate your content as needed\n  return new Response(data);\n}\nsh\nwrangler secret put SECRET_NAME\njs\nconst secretValue = env.SECRET_NAME;\nsh\nwrangler secret put SECRET_NAME\njs\nconst secretValue = env.SECRET_NAME;\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"routes\": [\n      {\n        \"pattern\": \"shop.example.com\",\n        \"custom_domain\": true\n      }\n    ]\n  }\n  toml\n  [[routes]]\n  pattern = \"shop.example.com\"\n  custom_domain = true\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"routes\": [\n      {\n        \"pattern\": \"shop.example.com\",\n        \"custom_domain\": true\n      },\n      {\n        \"pattern\": \"shop-two.example.com\",\n        \"custom_domain\": true\n      }\n    ]\n  }\n  toml\n  [[routes]]\n  pattern = \"shop.example.com\"\n  custom_domain = true\n\n[[routes]]\n  pattern = \"shop-two.example.com\"\n  custom_domain = true\n  js\nexport default {\n  fetch(request) {\n    // This will fail\n    return fetch(\"https://shop.example.com\")\n  }\n}\njs\nexport default {\n  fetch(request) {\n    const url = new URL(request.url)\n    if(url.searchParams.get(\"auth\") !== \"SECRET_TOKEN\") {\n      return new Response(null, { status: 401 })\n    } else {\n      // This will invoke `api-worker`\n      return fetch(request)\n    }\n  }\n}\njsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"routes\": [\n         {\n           \"pattern\": \"example.com\",\n           \"custom_domain\": true\n         }\n       ]\n     }\n     toml\n     [[routes]]\n     pattern = \"example.com\"\n     custom_domain = true\n     jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"routes\": [\n      {\n        \"pattern\": \"subdomain.example.com/*\",\n        \"zone_name\": \"example.com\"\n      },\n      {\n        \"pattern\": \"subdomain.example.com/*\",\n        \"zone_id\": \"<YOUR_ZONE_ID>\"\n      }\n    ]\n  }\n  toml\n  [[routes]]\n  pattern = \"subdomain.example.com/*\"\n  zone_name = \"example.com\"\n\n[[routes]]\n  pattern = \"subdomain.example.com/*\"\n  zone_id = \"<YOUR_ZONE_ID>\"\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"routes\": [\n      {\n        \"pattern\": \"subdomain.example.com/*\",\n        \"zone_name\": \"example.com\"\n      },\n      {\n        \"pattern\": \"subdomain-two.example.com/example\",\n        \"zone_id\": \"<YOUR_ZONE_ID>\"\n      }\n    ]\n  }\n  toml\n  [[routes]]\n  pattern = \"subdomain.example.com/*\"\n  zone_name = \"example.com\"\n\n[[routes]]\n  pattern = \"subdomain-two.example.com/example\"\n  zone_id = \"<YOUR_ZONE_ID>\"\n  txt\nhttps://*.example.com/images/*\ntxt\n*example.com/*\ntxt\n*example.com/images/cat.png -> <no script>\n*example.com/images/*       -> worker-script\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"workers_dev\": false\n  }\n  toml\n  workers_dev = false\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"docs-site-blah\",\n    \"site\": {\n      \"bucket\": \"./public\"\n    },\n    \"env\": {\n      \"production\": {\n        \"name\": \"docs-site\",\n        \"route\": \"https://example.com/docs*\"\n      },\n      \"staging\": {\n        \"name\": \"docs-site-staging\",\n        \"route\": \"https://staging.example.com/docs*\"\n      }\n    }\n  }\n  toml\n  name = \"docs-site-blah\"\n\n[site]\n  bucket = \"./public\"\n\n[env.production]\n  name = \"docs-site\"\n  route = \"https://example.com/docs*\"\n\n[env.staging]\n  name = \"docs-site-staging\"\n  route = \"https://staging.example.com/docs*\"\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"site\": {\n      \"bucket\": \"./public\",\n      \"include\": [\n        \"included_dir\"\n      ]\n    }\n  }\n  toml\n  [site]\n  bucket = \"./public\"\n  include = [\"included_dir\"] # must be an array.\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"site\": {\n      \"bucket\": \"./public\",\n      \"exclude\": [\n        \"excluded_dir\"\n      ]\n    }\n  }\n  toml\n  [site]\n  bucket = \"./public\"\n  exclude = [\"excluded_dir\"] # must be an array.\n  sh\n   wrangler init -y\n   jsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"site\": {\n         \"bucket\": \"./public\"\n       }\n     }\n     toml\n     [site]\n     bucket = \"./public\" # <-- Add your build directory name here.\n     sh\n   npm i -D @cloudflare/kv-asset-handler\n   js\n  import { getAssetFromKV } from \"@cloudflare/kv-asset-handler\";\n  import manifestJSON from \"__STATIC_CONTENT_MANIFEST\";\n  const assetManifest = JSON.parse(manifestJSON);\n\nexport default {\n    async fetch(request, env, ctx) {\n      try {\n        // Add logic to decide whether to serve an asset or run your original Worker code\n        return await getAssetFromKV(\n          {\n            request,\n            waitUntil: ctx.waitUntil.bind(ctx),\n          },\n          {\n            ASSET_NAMESPACE: env.__STATIC_CONTENT,\n            ASSET_MANIFEST: assetManifest,\n          },\n        );\n      } catch (e) {\n        let pathname = new URL(request.url).pathname;\n        return new Response(`\"${pathname}\" not found`, {\n          status: 404,\n          statusText: \"not found\",\n        });\n      }\n    },\n  };\n  js\n  import { getAssetFromKV } from \"@cloudflare/kv-asset-handler\";\n\naddEventListener(\"fetch\", (event) => {\n    event.respondWith(handleEvent(event));\n  });\n\nasync function handleEvent(event) {\n    try {\n      // Add logic to decide whether to serve an asset or run your original Worker code\n      return await getAssetFromKV(event);\n    } catch (e) {\n      let pathname = new URL(event.request.url).pathname;\n      return new Response(`\"${pathname}\" not found`, {\n        status: 404,\n        statusText: \"not found\",\n      });\n    }\n  }\n  sh\n   npx wrangler deploy\n   jsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"route\": \"https://example.com/*\"\n     }\n     toml\n     route = \"https://example.com/*\"\n     sh\n   git clone --depth=1 --branch=wrangler2 https://github.com/cloudflare/worker-sites-template my-site\n   sh\n   wrangler dev\n   sh\n   npx wrangler deploy\n   jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"name\": \"my-site\"\n    }\n    toml\n    name = \"my-site\"\n    jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"compatibility_date\": \"yyyy-mm-dd\"\n    }\n    toml\n    compatibility_date = \"yyyy-mm-dd\"\n    jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"route\": \"https://example.com/*\"\n    }\n    toml\n    route = \"https://example.com/*\"\n    jsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"site\": {\n         \"bucket\": \"./public\"\n       }\n     }\n     toml\n     [site]\n     bucket = \"./public\" # Add the directory with your static assets!\n     sh\n   npm i -D @cloudflare/kv-asset-handler\n   js\n  import { getAssetFromKV } from \"@cloudflare/kv-asset-handler\";\n  import manifestJSON from \"__STATIC_CONTENT_MANIFEST\";\n  const assetManifest = JSON.parse(manifestJSON);\n\nexport default {\n    async fetch(request, env, ctx) {\n      try {\n        // Add logic to decide whether to serve an asset or run your original Worker code\n        return await getAssetFromKV(\n          {\n            request,\n            waitUntil: ctx.waitUntil.bind(ctx),\n          },\n          {\n            ASSET_NAMESPACE: env.__STATIC_CONTENT,\n            ASSET_MANIFEST: assetManifest,\n          },\n        );\n      } catch (e) {\n        let pathname = new URL(request.url).pathname;\n        return new Response(`\"${pathname}\" not found`, {\n          status: 404,\n          statusText: \"not found\",\n        });\n      }\n    },\n  };\n  js\n  import { getAssetFromKV } from \"@cloudflare/kv-asset-handler\";\n\naddEventListener(\"fetch\", (event) => {\n    event.respondWith(handleEvent(event));\n  });\n\nasync function handleEvent(event) {\n    try {\n      // Add logic to decide whether to serve an asset or run your original Worker code\n      return await getAssetFromKV(event);\n    } catch (e) {\n      let pathname = new URL(event.request.url).pathname;\n      return new Response(`\"${pathname}\" not found`, {\n        status: 404,\n        statusText: \"not found\",\n      });\n    }\n  }\n  sh\n   npx wrangler deploy\n   sh\nnpm create cloudflare@latest <NAME> -- --type=hello-world\nsh\nnpx wrangler versions upload\nsh\nnpx wrangler versions deploy\nbash\nfor j in {0..10}\ndo\n    curl -s https://$WORKER_NAME.$SUBDOMAIN.workers.dev\ndone\nsh\nnpx wrangler versions deploy\nbash\nfor j in {0..10}\ndo\n    curl -s https://$WORKER_NAME.$SUBDOMAIN.workers.dev\ndone\nsh\ncurl -s https://example.com -H 'Cloudflare-Workers-Version-Key: foo'\ntxt\nstarts_with(http.request.uri.path, \"/asset/\")\nsh\ncurl -s https://example.com -H 'Cloudflare-Workers-Version-Overrides: my-worker-name=\"dc8dcd28-271b-4367-9840-6c244f84cb40\"'\nsh\ncurl -s https://example.com -H 'Cloudflare-Workers-Version-Overrides: my-worker-name=\"dc8dcd28-271b-4367-9840-6c244f84cb40\"'\nsh\nnpx wrangler versions deploy\nbash\ncurl -X POST 'https://api.cloudflare.com/client/v4/accounts/<ACCOUNT_ID>/logpush/jobs' \\\n-H 'Authorization: Bearer <TOKEN>' \\\n-H 'Content-Type: application/json' \\\n-d '{\n\"name\": \"workers-logpush\",\n\"output_options\": {\n    \"field_names\": [\"Event\", \"EventTimestampMs\", \"Outcome\", \"Logs\", \"ScriptName\", \"ScriptVersion\"],\n},\n\"destination_conf\": \"<DESTINATION_URL>\",\n\"dataset\": \"workers_trace_events\",\n\"enabled\": true\n}'| jq .\njson\nscriptVersion: {\n    id: \"<UUID>\",\n    message: \"<MESSAGE>\",\n    tag: \"<TAG>\"\n}\ntxt\n  postgres://USERNAME:PASSWORD@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\n  sh\n       npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"postgres://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\"\n       jsonc\n         {\n           \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n           \"name\": \"hyperdrive-example\",\n           \"main\": \"src/index.ts\",\n           \"compatibility_date\": \"2024-08-21\",\n           \"compatibility_flags\": [\n             \"nodejs_compat\"\n           ],\n           \"hyperdrive\": [\n             {\n               \"binding\": \"HYPERDRIVE\",\n               \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n             }\n           ]\n         }\n         toml\n         name = \"hyperdrive-example\"\n         main = \"src/index.ts\"\n         compatibility_date = \"2024-08-21\"\n         compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n         [[hyperdrive]]\n         binding = \"HYPERDRIVE\"\n         id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n         jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"name\": \"hyperdrive-example\",\n      \"main\": \"src/index.ts\",\n      \"compatibility_date\": \"2024-08-21\",\n      \"compatibility_flags\": [\n        \"nodejs_compat\"\n      ],\n      \"hyperdrive\": [\n        {\n          \"binding\": \"HYPERDRIVE\",\n          \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n        }\n      ]\n    }\n    toml\n    name = \"hyperdrive-example\"\n    main = \"src/index.ts\"\n    compatibility_date = \"2024-08-21\"\n    compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n    [[hyperdrive]]\n    binding = \"HYPERDRIVE\"\n    id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n    sh\n    npm i pg@>8.16.3\n    sh\n    yarn add pg@>8.16.3\n    sh\n    pnpm add pg@>8.16.3\n    sh\n    npm i -D @types/pg\n    sh\n    yarn add -D @types/pg\n    sh\n    pnpm add -D @types/pg\n    jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"compatibility_flags\": [\n        \"nodejs_compat\"\n      ],\n      \"compatibility_date\": \"2024-09-23\",\n      \"hyperdrive\": [\n        {\n          \"binding\": \"HYPERDRIVE\",\n          \"id\": \"<your-hyperdrive-id-here>\"\n        }\n      ]\n    }\n    toml\n    # required for database drivers to function\n    compatibility_flags = [\"nodejs_compat\"]\n    compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n    binding = \"HYPERDRIVE\"\n    id = \"<your-hyperdrive-id-here>\"\n    ts\n  // filepath: src/index.ts\n  import { Client } from \"pg\";\n\nexport default {\n    async fetch(\n      request: Request,\n      env: Env,\n      ctx: ExecutionContext,\n    ): Promise<Response> {\n      // Create a new client instance for each request.\n      const client = new Client({\n        connectionString: env.HYPERDRIVE.connectionString,\n      });\n\ntry {\n        // Connect to the database\n        await client.connect();\n        console.log(\"Connected to PostgreSQL database\");\n\n// Perform a simple query\n        const result = await client.query(\"SELECT * FROM pg_tables\");\n\nreturn Response.json({\n          success: true,\n          result: result.rows,\n        });\n      } catch (error: any) {\n        console.error(\"Database error:\", error.message);\n\nnew Response(\"Internal error occurred\", { status: 500 });\n      }\n    },\n  };\n  sql\n     CREATE TABLE elements (\n       id INTEGER NOT NULL,\n       elementName TEXT NOT NULL,\n       atomicNumber INTEGER NOT NULL,\n       symbol TEXT NOT NULL\n     );\n     sql\n     INSERT INTO elements (id, elementName, atomicNumber, symbol)\n     VALUES\n       (1, 'Hydrogen', 1, 'H'),\n       (2, 'Helium', 2, 'He'),\n       (3, 'Lithium', 3, 'Li'),\n       (4, 'Beryllium', 4, 'Be'),\n       (5, 'Boron', 5, 'B'),\n       (6, 'Carbon', 6, 'C'),\n       (7, 'Nitrogen', 7, 'N'),\n       (8, 'Oxygen', 8, 'O'),\n       (9, 'Fluorine', 9, 'F'),\n       (10, 'Neon', 10, 'Ne');\n     sh\n     # Add the database connection string as a secret\n     npx wrangler secret put DATABASE_URL\n     # When prompted, paste your Neon database connection string\n     sh\n       npm i @neondatabase/serverless\n       sh\n       yarn add @neondatabase/serverless\n       sh\n       pnpm add @neondatabase/serverless\n       js\n     import { Client } from \"@neondatabase/serverless\";\n\nexport default {\n       async fetch(request, env, ctx) {\n         const client = new Client(env.DATABASE_URL);\n         await client.connect();\n         const { rows } = await client.query(\"SELECT * FROM elements\");\n\nreturn new Response(JSON.stringify(rows));\n       },\n     };\n     sh\n     npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"postgres://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\"\n     jsonc\n       {\n         \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n         \"name\": \"hyperdrive-example\",\n         \"main\": \"src/index.ts\",\n         \"compatibility_date\": \"2024-08-21\",\n         \"compatibility_flags\": [\n           \"nodejs_compat\"\n         ],\n         \"hyperdrive\": [\n           {\n             \"binding\": \"HYPERDRIVE\",\n             \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n           }\n         ]\n       }\n       toml\n       name = \"hyperdrive-example\"\n       main = \"src/index.ts\"\n       compatibility_date = \"2024-08-21\"\n       compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n       [[hyperdrive]]\n       binding = \"HYPERDRIVE\"\n       id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n       jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"hyperdrive-example\",\n    \"main\": \"src/index.ts\",\n    \"compatibility_date\": \"2024-08-21\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n      }\n    ]\n  }\n  toml\n  name = \"hyperdrive-example\"\n  main = \"src/index.ts\"\n  compatibility_date = \"2024-08-21\"\n  compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n  [[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n  sh\n  npm i pg@>8.16.3\n  sh\n  yarn add pg@>8.16.3\n  sh\n  pnpm add pg@>8.16.3\n  sh\n  npm i -D @types/pg\n  sh\n  yarn add -D @types/pg\n  sh\n  pnpm add -D @types/pg\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"compatibility_date\": \"2024-09-23\",\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<your-hyperdrive-id-here>\"\n      }\n    ]\n  }\n  toml\n  # required for database drivers to function\n  compatibility_flags = [\"nodejs_compat\"]\n  compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<your-hyperdrive-id-here>\"\n  sh\n  npm i @neondatabase/serverless\n  sh\n  yarn add @neondatabase/serverless\n  sh\n  pnpm add @neondatabase/serverless\n  sql\n     CREATE TABLE countries (\n     id SERIAL PRIMARY KEY,\n     name VARCHAR(255) NOT NULL\n     );\n     sql\n     INSERT INTO countries (name) VALUES ('United States');\n     INSERT INTO countries (name) VALUES ('Canada');\n     INSERT INTO countries (name) VALUES ('The Netherlands');\n     sh\n     # Add the Supabase URL as a secret\n     npx wrangler secret put SUPABASE_URL\n     # When prompted, paste your Supabase project URL\n\n# Add the Supabase anon key as a secret\n     npx wrangler secret put SUPABASE_KEY\n     # When prompted, paste your Supabase anon/public key\n     sh\n       npm i @supabase/supabase-js\n       sh\n       yarn add @supabase/supabase-js\n       sh\n       pnpm add @supabase/supabase-js\n       js\n     import { createClient } from \"@supabase/supabase-js\";\n\nexport default {\n       async fetch(request, env) {\n         const supabase = createClient(env.SUPABASE_URL, env.SUPABASE_KEY);\n         const { data, error } = await supabase.from(\"countries\").select(\"*\");\n         if (error) throw error;\n         return new Response(JSON.stringify(data), {\n           headers: {\n             \"Content-Type\": \"application/json\",\n           },\n         });\n       },\n     };\n     txt\n  postgres://USERNAME:PASSWORD@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\n  sh\n       npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"postgres://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\"\n       jsonc\n         {\n           \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n           \"name\": \"hyperdrive-example\",\n           \"main\": \"src/index.ts\",\n           \"compatibility_date\": \"2024-08-21\",\n           \"compatibility_flags\": [\n             \"nodejs_compat\"\n           ],\n           \"hyperdrive\": [\n             {\n               \"binding\": \"HYPERDRIVE\",\n               \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n             }\n           ]\n         }\n         toml\n         name = \"hyperdrive-example\"\n         main = \"src/index.ts\"\n         compatibility_date = \"2024-08-21\"\n         compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n         [[hyperdrive]]\n         binding = \"HYPERDRIVE\"\n         id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n         jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"name\": \"hyperdrive-example\",\n      \"main\": \"src/index.ts\",\n      \"compatibility_date\": \"2024-08-21\",\n      \"compatibility_flags\": [\n        \"nodejs_compat\"\n      ],\n      \"hyperdrive\": [\n        {\n          \"binding\": \"HYPERDRIVE\",\n          \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n        }\n      ]\n    }\n    toml\n    name = \"hyperdrive-example\"\n    main = \"src/index.ts\"\n    compatibility_date = \"2024-08-21\"\n    compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n    [[hyperdrive]]\n    binding = \"HYPERDRIVE\"\n    id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n    sh\n    npm i pg@>8.16.3\n    sh\n    yarn add pg@>8.16.3\n    sh\n    pnpm add pg@>8.16.3\n    sh\n    npm i -D @types/pg\n    sh\n    yarn add -D @types/pg\n    sh\n    pnpm add -D @types/pg\n    jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"compatibility_flags\": [\n        \"nodejs_compat\"\n      ],\n      \"compatibility_date\": \"2024-09-23\",\n      \"hyperdrive\": [\n        {\n          \"binding\": \"HYPERDRIVE\",\n          \"id\": \"<your-hyperdrive-id-here>\"\n        }\n      ]\n    }\n    toml\n    # required for database drivers to function\n    compatibility_flags = [\"nodejs_compat\"]\n    compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n    binding = \"HYPERDRIVE\"\n    id = \"<your-hyperdrive-id-here>\"\n    ts\n  // filepath: src/index.ts\n  import { Client } from \"pg\";\n\nexport default {\n    async fetch(\n      request: Request,\n      env: Env,\n      ctx: ExecutionContext,\n    ): Promise<Response> {\n      // Create a new client instance for each request.\n      const client = new Client({\n        connectionString: env.HYPERDRIVE.connectionString,\n      });\n\ntry {\n        // Connect to the database\n        await client.connect();\n        console.log(\"Connected to PostgreSQL database\");\n\n// Perform a simple query\n        const result = await client.query(\"SELECT * FROM pg_tables\");\n\nreturn Response.json({\n          success: true,\n          result: result.rows,\n        });\n      } catch (error: any) {\n        console.error(\"Database error:\", error.message);\n\nnew Response(\"Internal error occurred\", { status: 500 });\n      }\n    },\n  };\n  sh\n  npm i @supabase/supabase-js\n  sh\n  yarn add @supabase/supabase-js\n  sh\n  pnpm add @supabase/supabase-js\n  sh\n     npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"postgres://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\"\n     jsonc\n       {\n         \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n         \"name\": \"hyperdrive-example\",\n         \"main\": \"src/index.ts\",\n         \"compatibility_date\": \"2024-08-21\",\n         \"compatibility_flags\": [\n           \"nodejs_compat\"\n         ],\n         \"hyperdrive\": [\n           {\n             \"binding\": \"HYPERDRIVE\",\n             \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n           }\n         ]\n       }\n       toml\n       name = \"hyperdrive-example\"\n       main = \"src/index.ts\"\n       compatibility_date = \"2024-08-21\"\n       compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n       [[hyperdrive]]\n       binding = \"HYPERDRIVE\"\n       id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n       jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"hyperdrive-example\",\n    \"main\": \"src/index.ts\",\n    \"compatibility_date\": \"2024-08-21\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n      }\n    ]\n  }\n  toml\n  name = \"hyperdrive-example\"\n  main = \"src/index.ts\"\n  compatibility_date = \"2024-08-21\"\n  compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n  [[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n  sh\n  npm i pg@>8.16.3\n  sh\n  yarn add pg@>8.16.3\n  sh\n  pnpm add pg@>8.16.3\n  sh\n  npm i -D @types/pg\n  sh\n  yarn add -D @types/pg\n  sh\n  pnpm add -D @types/pg\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"compatibility_date\": \"2024-09-23\",\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<your-hyperdrive-id-here>\"\n      }\n    ]\n  }\n  toml\n  # required for database drivers to function\n  compatibility_flags = [\"nodejs_compat\"]\n  compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<your-hyperdrive-id-here>\"\n  txt\n  mysql://USERNAME:PASSWORD@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\n  sh\n  npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"mysql://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\"\n  jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"name\": \"hyperdrive-example\",\n      \"main\": \"src/index.ts\",\n      \"compatibility_date\": \"2024-08-21\",\n      \"compatibility_flags\": [\n        \"nodejs_compat\"\n      ],\n      \"hyperdrive\": [\n        {\n          \"binding\": \"HYPERDRIVE\",\n          \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n        }\n      ]\n    }\n    toml\n    name = \"hyperdrive-example\"\n    main = \"src/index.ts\"\n    compatibility_date = \"2024-08-21\"\n    compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n    [[hyperdrive]]\n    binding = \"HYPERDRIVE\"\n    id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n    sh\n    npm i mysql2@>3.13.0\n    sh\n    yarn add mysql2@>3.13.0\n    sh\n    pnpm add mysql2@>3.13.0\n    jsonc\n    {\n      \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n      \"compatibility_flags\": [\n        \"nodejs_compat\"\n      ],\n      \"compatibility_date\": \"2024-09-23\",\n      \"hyperdrive\": [\n        {\n          \"binding\": \"HYPERDRIVE\",\n          \"id\": \"<your-hyperdrive-id-here>\"\n        }\n      ]\n    }\n    toml\n    # required for database drivers to function\n    compatibility_flags = [\"nodejs_compat\"]\n    compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n    binding = \"HYPERDRIVE\"\n    id = \"<your-hyperdrive-id-here>\"\n    ts\n  // mysql2 v3.13.0 or later is required\n  import { createConnection } from \"mysql2/promise\";\n\nexport default {\n    async fetch(request, env, ctx): Promise<Response> {\n      // Create a connection using the mysql2 driver with the Hyperdrive credentials (only accessible from your Worker).\n      const connection = await createConnection({\n        host: env.HYPERDRIVE.host,\n        user: env.HYPERDRIVE.user,\n        password: env.HYPERDRIVE.password,\n        database: env.HYPERDRIVE.database,\n        port: env.HYPERDRIVE.port,\n\n// Required to enable mysql2 compatibility for Workers\n        disableEval: true,\n      });\n\ntry {\n        // Sample query\n        const [results, fields] = await connection.query(\"SHOW tables;\");\n\n// Clean up the client after the response is returned, before the Worker is killed\n        ctx.waitUntil(connection.end());\n\n// Return result rows as JSON\n        return Response.json({ results, fields });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  } satisfies ExportedHandler<Env>;\n  sql\n     CREATE TABLE products (\n       id int NOT NULL AUTO_INCREMENT PRIMARY KEY,\n       name varchar(255) NOT NULL,\n       image_url varchar(255),\n       category_id INT,\n       KEY category_id_idx (category_id)\n     );\n     sql\n     INSERT INTO products (name, image_url, category_id)\n     VALUES ('Ballpoint pen', 'https://example.com/500x500', '1');\n     sh\n     # Add the database host as a secret\n     npx wrangler secret put DATABASE_HOST\n     # When prompted, paste your PlanetScale host\n\n# Add the database username as a secret\n     npx wrangler secret put DATABASE_USERNAME\n     # When prompted, paste your PlanetScale username\n\n# Add the database password as a secret\n     npx wrangler secret put DATABASE_PASSWORD\n     # When prompted, paste your PlanetScale password\n     sh\n       npm i @planetscale/database\n       sh\n       yarn add @planetscale/database\n       sh\n       pnpm add @planetscale/database\n       js\n     import { connect } from \"@planetscale/database\";\n\nexport default {\n       async fetch(request, env) {\n         const config = {\n           host: env.DATABASE_HOST,\n           username: env.DATABASE_USERNAME,\n           password: env.DATABASE_PASSWORD,\n           // see https://github.com/cloudflare/workerd/issues/698\n           fetch: (url, init) => {\n             delete init[\"cache\"];\n             return fetch(url, init);\n           },\n         };\n\nconst conn = connect(config);\n         const data = await conn.execute(\"SELECT * FROM products;\");\n         return new Response(JSON.stringify(data.rows), {\n           status: 200,\n           headers: {\n             \"Content-Type\": \"application/json\",\n           },\n         });\n       },\n     };\n     jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"hyperdrive-example\",\n    \"main\": \"src/index.ts\",\n    \"compatibility_date\": \"2024-08-21\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n      }\n    ]\n  }\n  toml\n  name = \"hyperdrive-example\"\n  main = \"src/index.ts\"\n  compatibility_date = \"2024-08-21\"\n  compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n  [[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n  sh\n  npm i mysql2@>3.13.0\n  sh\n  yarn add mysql2@>3.13.0\n  sh\n  pnpm add mysql2@>3.13.0\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"compatibility_date\": \"2024-09-23\",\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<your-hyperdrive-id-here>\"\n      }\n    ]\n  }\n  toml\n  # required for database drivers to function\n  compatibility_flags = [\"nodejs_compat\"]\n  compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<your-hyperdrive-id-here>\"\n  sh\n  npm i @planetscale/database\n  sh\n  yarn add @planetscale/database\n  sh\n  pnpm add @planetscale/database\n  sh\n   # On macOS and linux with homebrew\n   brew install tursodatabase/tap/turso\n\n# Manual scripted installation\n   curl -sSfL https://get.tur.so/install.sh | bash\n   sh\n   turso --version\n   sh\n   turso auth login\n   sh\n   Waiting for authentication...\n     Success! Logged in as <YOUR_GITHUB_USERNAME>\n   sh\n   turso db create my-db\n   sh\n   # Example:\n   Creating database my-db in Amsterdam, Netherlands (ams)\n\n# Once succeeded:\n   Created database my-db in Amsterdam, Netherlands (ams) in 13 seconds.\n   sh\n   turso db shell my-db\n   sql\n   CREATE TABLE elements (\n     id INTEGER NOT NULL,\n     elementName TEXT NOT NULL,\n     atomicNumber INTEGER NOT NULL,\n     symbol TEXT NOT NULL\n   );\n\nINSERT INTO elements (id, elementName, atomicNumber, symbol)\n   VALUES (1, 'Hydrogen', 1, 'H'),\n     (2, 'Helium', 2, 'He'),\n     (3, 'Lithium', 3, 'Li'),\n     (4, 'Beryllium', 4, 'Be'),\n     (5, 'Boron', 5, 'B'),\n     (6, 'Carbon', 6, 'C'),\n     (7, 'Nitrogen', 7, 'N'),\n     (8, 'Oxygen', 8, 'O'),\n     (9, 'Fluorine', 9, 'F'),\n     (10, 'Neon', 10, 'Ne');\n   sh\n   # Get your database URL\n   turso db show my-db --url\n\n# Create an authentication token\n   turso db tokens create my-db\n   sh\n   # Add the database URL as a secret\n   npx wrangler secret put TURSO_URL\n   # When prompted, paste your database URL\n\n# Add the authentication token as a secret\n   npx wrangler secret put TURSO_AUTH_TOKEN\n   # When prompted, paste your authentication token\n   sh\n     npm i @libsql/client\n     sh\n     yarn add @libsql/client\n     sh\n     pnpm add @libsql/client\n     ts\n   import { Client as LibsqlClient, createClient } from \"@libsql/client/web\";\n\nexport interface Env {\n     TURSO_URL?: string;\n     TURSO_AUTH_TOKEN?: string;\n   }\n\nexport default {\n     async fetch(request, env, ctx): Promise<Response> {\n       const client = buildLibsqlClient(env);\n\ntry {\n         const res = await client.execute(\"SELECT * FROM elements\");\n         return new Response(JSON.stringify(res), {\n           status: 200,\n           headers: { \"Content-Type\": \"application/json\" },\n         });\n       } catch (error) {\n         console.error(\"Error executing SQL query:\", error);\n         return new Response(\n           JSON.stringify({ error: \"Internal Server Error\" }),\n           {\n             status: 500,\n           },\n         );\n       }\n     },\n   } satisfies ExportedHandler<Env>;\n\nfunction buildLibsqlClient(env: Env): LibsqlClient {\n     const url = env.TURSO_URL?.trim();\n     if (url === undefined) {\n       throw new Error(\"TURSO_URL env var is not defined\");\n     }\n\nconst authToken = env.TURSO_AUTH_TOKEN?.trim();\n     if (authToken == undefined) {\n       throw new Error(\"TURSO_AUTH_TOKEN env var is not defined\");\n     }\n\nreturn createClient({ url, authToken });\n   }\n   sh\n   set GB \"Ey up?\"\n   sh\n   OK\n   sh\n   set US \"Yo, whats up?\"\n   sh\n   OK\n   sh\n   set NL \"Hoi, hoe gaat het?\"\n   sh\n   OK\n   sh\n   # Add the Upstash Redis URL as a secret\n   npx wrangler secret put UPSTASH_REDIS_REST_URL\n   # When prompted, paste your Upstash Redis REST URL\n\n# Add the Upstash Redis token as a secret\n   npx wrangler secret put UPSTASH_REDIS_REST_TOKEN\n   # When prompted, paste your Upstash Redis REST token\n   sh\n     npm i @upstash/redis\n     sh\n     yarn add @upstash/redis\n     sh\n     pnpm add @upstash/redis\n     js\n   import { Redis } from \"@upstash/redis/cloudflare\";\n\nexport default {\n     async fetch(request, env) {\n       const redis = Redis.fromEnv(env);\n\nconst country = request.headers.get(\"cf-ipcountry\");\n       if (country) {\n         const greeting = await redis.get(country);\n         if (greeting) {\n           return new Response(greeting);\n         }\n       }\n\nreturn new Response(\"Hello What's up!\");\n     },\n   };\n   sh\n   # Add the QStash token as a secret\n   npx wrangler secret put QSTASH_TOKEN\n   # When prompted, paste your QStash token\n   sh\n     npm i @upstash/qstash\n     sh\n     yarn add @upstash/qstash\n     sh\n     pnpm add @upstash/qstash\n     txt\npostgres://USERNAME:PASSWORD@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\nsh\n     npx wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=\"postgres://user:password@HOSTNAME_OR_IP_ADDRESS:PORT/database_name\"\n     jsonc\n       {\n         \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n         \"name\": \"hyperdrive-example\",\n         \"main\": \"src/index.ts\",\n         \"compatibility_date\": \"2024-08-21\",\n         \"compatibility_flags\": [\n           \"nodejs_compat\"\n         ],\n         \"hyperdrive\": [\n           {\n             \"binding\": \"HYPERDRIVE\",\n             \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n           }\n         ]\n       }\n       toml\n       name = \"hyperdrive-example\"\n       main = \"src/index.ts\"\n       compatibility_date = \"2024-08-21\"\n       compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n       [[hyperdrive]]\n       binding = \"HYPERDRIVE\"\n       id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n       jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"hyperdrive-example\",\n    \"main\": \"src/index.ts\",\n    \"compatibility_date\": \"2024-08-21\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n      }\n    ]\n  }\n  toml\n  name = \"hyperdrive-example\"\n  main = \"src/index.ts\"\n  compatibility_date = \"2024-08-21\"\n  compatibility_flags = [\"nodejs_compat\"]\n\n# Pasted from the output of `wrangler hyperdrive create <NAME_OF_HYPERDRIVE_CONFIG> --connection-string=[...]` above.\n  [[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<ID OF THE CREATED HYPERDRIVE CONFIGURATION>\"\n  sh\n  npm i pg@>8.16.3\n  sh\n  yarn add pg@>8.16.3\n  sh\n  pnpm add pg@>8.16.3\n  sh\n  npm i -D @types/pg\n  sh\n  yarn add -D @types/pg\n  sh\n  pnpm add -D @types/pg\n  jsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"compatibility_flags\": [\n      \"nodejs_compat\"\n    ],\n    \"compatibility_date\": \"2024-09-23\",\n    \"hyperdrive\": [\n      {\n        \"binding\": \"HYPERDRIVE\",\n        \"id\": \"<your-hyperdrive-id-here>\"\n      }\n    ]\n  }\n  toml\n  # required for database drivers to function\n  compatibility_flags = [\"nodejs_compat\"]\n  compatibility_date = \"2024-09-23\"\n\n[[hyperdrive]]\n  binding = \"HYPERDRIVE\"\n  id = \"<your-hyperdrive-id-here>\"\n  ts\n// filepath: src/index.ts\nimport { Client } from \"pg\";\n\nexport default {\n  async fetch(\n    request: Request,\n    env: Env,\n    ctx: ExecutionContext,\n  ): Promise<Response> {\n    // Create a new client instance for each request.\n    const client = new Client({\n      connectionString: env.HYPERDRIVE.connectionString,\n    });\n\ntry {\n      // Connect to the database\n      await client.connect();\n      console.log(\"Connected to PostgreSQL database\");\n\n// Perform a simple query\n      const result = await client.query(\"SELECT * FROM pg_tables\");\n\nreturn Response.json({\n        success: true,\n        result: result.rows,\n      });\n    } catch (error: any) {\n      console.error(\"Database error:\", error.message);\n\nnew Response(\"Internal error occurred\", { status: 500 });\n    }\n  },\n};\nsh\n  npm create cloudflare@latest -- my-astro-app --framework=astro\n  sh\n  yarn create cloudflare my-astro-app --framework=astro\n  sh\n  pnpm create cloudflare@latest my-astro-app --framework=astro\n  sh\n     npm create cloudflare@latest -- my-astro-app --framework=astro\n     sh\n     yarn create cloudflare my-astro-app --framework=astro\n     sh\n     pnpm create cloudflare@latest my-astro-app --framework=astro\n     sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n     npm run deploy\n     sh\n     yarn run deploy\n     sh\n     pnpm run deploy\n     jsonc\n     {\n       \"name\": \"my-astro-app\",\n       \"compatibility_date\": \"2025-12-31\",\n       \"assets\": {\n         \"directory\": \"./dist\"\n       }\n     }\n     toml\n     name = \"my-astro-app\"\n     compatibility_date = \"2025-12-31\"\n\n[assets]\n     directory = \"./dist\"\n     sh\n     npx astro build\n     sh\n     yarn astro build\n     sh\n     pnpm astro build\n     sh\n     npx wrangler@latest deploy\n     sh\n     yarn wrangler@latest deploy\n     sh\n     pnpm wrangler@latest deploy\n     sh\n     npx astro add cloudflare\n     sh\n     yarn astro add cloudflare\n     sh\n     pnpm astro add cloudflare\n     txt\n   _worker.js\n   _routes.json\n   jsonc\n     {\n       \"name\": \"my-astro-app\",\n       \"main\": \"./dist/_worker.js/index.js\",\n       // Update to today's date\n       \"compatibility_date\": \"2025-12-31\",\n       \"compatibility_flags\": [\"nodejs_compat\"],\n       \"assets\": {\n         \"binding\": \"ASSETS\",\n         \"directory\": \"./dist\"\n       },\n       \"observability\": {\n         \"enabled\": true\n       }\n     }\n     toml\n     name = \"my-astro-app\"\n     main = \"./dist/_worker.js/index.js\"\n     compatibility_date = \"2025-12-31\"\n     compatibility_flags = [ \"nodejs_compat\" ]\n\n[assets]\n     binding = \"ASSETS\"\n     directory = \"./dist\"\n\n[observability]\n     enabled = true\n     sh\n     npx astro build\n     sh\n     yarn astro build\n     sh\n     pnpm astro build\n     sh\n     npx wrangler@latest deploy\n     sh\n     yarn wrangler@latest deploy\n     sh\n     pnpm wrangler@latest deploy\n     sh\n  npm create cloudflare@latest -- my-next-app --framework=next\n  sh\n  yarn create cloudflare my-next-app --framework=next\n  sh\n  pnpm create cloudflare@latest my-next-app --framework=next\n  sh\n     npm create cloudflare@latest -- my-next-app --framework=next\n     sh\n     yarn create cloudflare my-next-app --framework=next\n     sh\n     pnpm create cloudflare@latest my-next-app --framework=next\n     sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n     npm run preview\n     sh\n     yarn run preview\n     sh\n     pnpm run preview\n     sh\n     npm run deploy\n     sh\n     yarn run deploy\n     sh\n     pnpm run deploy\n     sh\n     npm i @opennextjs/cloudflare@latest\n     sh\n     yarn add @opennextjs/cloudflare@latest\n     sh\n     pnpm add @opennextjs/cloudflare@latest\n     sh\n     npm i -D wrangler@latest\n     sh\n     yarn add -D wrangler@latest\n     sh\n     pnpm add -D wrangler@latest\n     jsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"main\": \".open-next/worker.js\",\n       \"name\": \"my-app\",\n       \"compatibility_date\": \"2025-12-31\",\n       \"compatibility_flags\": [\n         \"nodejs_compat\"\n       ],\n       \"assets\": {\n         \"directory\": \".open-next/assets\",\n         \"binding\": \"ASSETS\"\n       }\n     }\n     toml\n       main = \".open-next/worker.js\"\n       name = \"my-app\"\n       compatibility_date = \"2025-12-31\"\n       compatibility_flags = [\"nodejs_compat\"]\n       [assets]\n       directory = \".open-next/assets\"\n       binding = \"ASSETS\"\n     ts\n   import { defineCloudflareConfig } from \"@opennextjs/cloudflare\";\n\nexport default defineCloudflareConfig();\n   json\n   \"preview\": \"opennextjs-cloudflare build && opennextjs-cloudflare preview\",\n   \"deploy\": \"opennextjs-cloudflare build && opennextjs-cloudflare deploy\",\n   \"cf-typegen\": \"wrangler types --env-interface CloudflareEnv cloudflare-env.d.ts\"\n   sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n     npm run preview\n     sh\n     yarn run preview\n     sh\n     pnpm run preview\n     sh\n     npm run deploy\n     sh\n     yarn run deploy\n     sh\n     pnpm run deploy\n     sh\n  npm create cloudflare@latest -- my-react-app --framework=react\n  sh\n  yarn create cloudflare my-react-app --framework=react\n  sh\n  pnpm create cloudflare@latest my-react-app --framework=react\n  sh\n     npm create cloudflare@latest -- my-react-app --framework=react\n     sh\n     yarn create cloudflare my-react-app --framework=react\n     sh\n     pnpm create cloudflare@latest my-react-app --framework=react\n     sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n     npm run deploy\n     sh\n     yarn run deploy\n     sh\n     pnpm run deploy\n     sh\n  npm create cloudflare@latest -- my-react-router-app --framework=react-router\n  sh\n  yarn create cloudflare my-react-router-app --framework=react-router\n  sh\n  pnpm create cloudflare@latest my-react-router-app --framework=react-router\n  sh\n     npm create cloudflare@latest -- my-react-router-app --framework=react-router\n     sh\n     yarn create cloudflare my-react-router-app --framework=react-router\n     sh\n     pnpm create cloudflare@latest my-react-router-app --framework=react-router\n     sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n     npm run deploy\n     sh\n     yarn run deploy\n     sh\n     pnpm run deploy\n     ts\nexport function loader({ context }: Route.LoaderArgs) {\n  return { message: context.cloudflare.env.VALUE_FROM_CLOUDFLARE };\n}\n\nexport default function Home({ loaderData }: Route.ComponentProps) {\n  return <Welcome message={loaderData.message} />;\n}\nts\nimport { createRequestHandler } from \"react-router\";\nimport { WorkflowEntrypoint, type WorkflowStep, type WorkflowEvent } from 'cloudflare:workers';\n\ndeclare global {\n  interface CloudflareEnvironment extends Env {}\n}\n\ntype Env = {\n  MY_WORKFLOW: Workflow;\n};\n\nexport class MyWorkflow extends WorkflowEntrypoint<Env> {\n  override async run(event: WorkflowEvent<Params>, step: WorkflowStep) {\n    await step.do(\"first step\", async () => {\n      return { output: \"First step result\" };\n    });\n\nawait step.sleep(\"sleep\", \"1 second\");\n\nawait step.do(\"second step\", async () => {\n      return { output: \"Second step result\" };\n    });\n\nreturn \"Workflow output\";\n  }\n}\n\nconst requestHandler = createRequestHandler(\n  () => import(\"virtual:react-router/server-build\"),\n  import.meta.env.MODE\n);\n\nexport default {\n  async fetch(request, env, ctx) {\n    return requestHandler(request, {\n      cloudflare: { env, ctx },\n    });\n  },\n} satisfies ExportedHandler<CloudflareEnvironment>;\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"workflows\": [\n      {\n        \"name\": \"my-workflow\",\n        \"binding\": \"MY_WORKFLOW\",\n        \"class_name\": \"MyWorkflow\"\n      }\n    ]\n  }\n  toml\n  [[workflows]]\n  name = \"my-workflow\"\n  binding = \"MY_WORKFLOW\"\n  class_name = \"MyWorkflow\"\n  ts\nexport async function action({ context }: Route.LoaderArgs) {\n  const env = context.cloudflare.env;\n  const instance = await env.MY_WORKFLOW.create({ params: { \"hello\": \"world\" })\n  return { id: instance.id, details: instance.status() };\n}\nsh\n     npx degit redwoodjs/sdk/starters/standard#main <project-name>\n     sh\n     yarn dlx degit redwoodjs/sdk/starters/standard#main <project-name>\n     sh\n     pnpx degit redwoodjs/sdk/starters/standard#main <project-name>\n     sh\n   cd <project-name>\n   sh\n     npm install\n     sh\n     yarn install\n     sh\n     pnpm install\n     sh\n     npm run dev\n     sh\n     yarn run dev\n     sh\n     pnpm run dev\n     sh\n     npm run release\n     sh\n     yarn run release\n     sh\n     pnpm run release\n     sh\n  npm create cloudflare@latest -- my-tanstack-start-app --framework=tanstack-start\n  sh\n  yarn create cloudflare my-tanstack-start-app --framework=tanstack-start\n  sh\n  pnpm create cloudflare@latest my-tanstack-start-app --framework=tanstack-start\n  sh\n  npm run dev\n  sh\n  yarn run dev\n  sh\n  pnpm run dev\n  jsonc\n     {\n       \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n       \"name\": \"<YOUR_PROJECT_NAME>\",\n       \"compatibility_date\": \"2025-12-31\",\n       \"compatibility_flags\": [\n         \"nodejs_compat\"\n       ],\n       \"main\": \"@tanstack/react-start/server-entry\",\n       \"observability\": {\n         \"enabled\": true\n       }\n     }\n     toml\n       name = \"<YOUR_PROJECT_NAME>\"\n       compatibility_date = \"2025-12-31\"\n       compatibility_flags = [\"nodejs_compat\"]\n       main = \"@tanstack/react-start/server-entry\"\n       [observability]\n       enabled = true\n     sh\n     npm i -D wrangler@latest\n     sh\n     yarn add -D wrangler@latest\n     sh\n     pnpm add -D wrangler@latest\n     sh\n     npm i @cloudflare/vite-plugin@latest\n     sh\n     yarn add @cloudflare/vite-plugin@latest\n     sh\n     pnpm add @cloudflare/vite-plugin@latest\n     ts\n   import { defineConfig } from \"vite\";\n   import { cloudflare } from \"@cloudflare/vite-plugin\";\n   ...\n\nexport default defineConfig({\n     plugins: [cloudflare({ viteEnvironment: { name: 'ssr' } }), ...],\n     // ... other configurations\n   });\n   jsonc\n   \"scripts\": {\n     ...\n     \"deploy\": \"npm run build && wrangler deploy\",\n     \"preview\": \"npm run build && vite preview\",\n     \"cf-typegen\": \"wrangler types\"\n   }\n   sh\n  npm run deploy\n  sh\n  yarn run deploy\n  sh\n  pnpm run deploy\n  sh\n  npm run preview\n  sh\n  yarn run preview\n  sh\n  pnpm run preview\n  tsx\nimport { createFileRoute } from \"@tanstack/react-router\";\nimport { createServerFn } from \"@tanstack/react-start\";\nimport { env } from \"cloudflare:workers\";\n\nexport const Route = createFileRoute(\"/\")({\n  loader: () => getData(),\n  component: RouteComponent,\n});\n\nconst getData = createServerFn().handler(() => {\n  // Use env here\n});\n\nfunction RouteComponent() {\n  // ...\n}\nsh\n  npm run cf-typegen\n  sh\n  yarn run cf-typegen\n  sh\n  pnpm run cf-typegen\n  ts\nimport { defineConfig } from \"vite\";\nimport { cloudflare } from \"@cloudflare/vite-plugin\";\nimport { tanstackStart } from '@tanstack/react-start/plugin/vite'\n\nexport default defineConfig({\n  plugins: [\n    cloudflare({ viteEnvironment: { name: \"ssr\" } }),\n    tanstackStart({\n      prerender: {\n        // Enable static prerendering\n        enabled: true,\n        // other prerender options...\n      },\n    }),\n  ],\n})\nsh\nAPI_KEY=${API_KEY}\nDATABASE_URL=${DATABASE_URL}\nsh\nAPI_KEY=my-local-dev-key\nDATABASE_URL=postgres://localhost/mydb\nsh\n  npm create cloudflare@latest -- my-svelte-app --framework=svelte\n  sh\n  yarn create cloudflare my-svelte-app --framework=svelte\n  sh\n  pnpm create cloudflare@latest my-svelte-app --framework=svelte\n  sh\ncd my-svelte-app\nsh\n  npm run dev\n  sh\n  yarn run dev\n  sh\n  pnpm run dev\n  sh\n  npm run deploy\n  sh\n  yarn run deploy\n  sh\n  pnpm run deploy\n  sh\n  npm create cloudflare@latest -- my-vue-app --framework=vue\n  sh\n  yarn create cloudflare my-vue-app --framework=vue\n  sh\n  pnpm create cloudflare@latest my-vue-app --framework=vue\n  sh\n  npm run dev\n  sh\n  yarn run dev\n  sh\n  pnpm run dev\n  sh\n  npm run deploy\n  sh\n  yarn run deploy\n  sh\n  pnpm run deploy\n  python\nfrom workers import WorkerEntrypoint, Response\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        return Response(\"Hello World!\")\npython\nfrom workers import WorkerEntrypoint, Response\nfrom hello import hello\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        name = (await request.json()).name\n        return Response(hello(name))\nbash\ncurl --header \"Content-Type: application/json\" \\\n  --request POST \\\n  --data '{\"name\": \"Python\"}' http://localhost:8787\nbash\nHello, Python!\njsonc\n  {\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"hello-python-worker\",\n    \"main\": \"src/entry.py\",\n    \"compatibility_flags\": [\n      \"python_workers\"\n    ],\n    \"compatibility_date\": \"2025-11-02\",\n    \"vars\": {\n      \"API_HOST\": \"example.com\"\n    }\n  }\n  toml\n  name = \"hello-python-worker\"\n  main = \"src/entry.py\"\n  compatibility_flags = [\"python_workers\"]\n  compatibility_date = \"2025-11-02\"\n\n[vars]\n  API_HOST = \"example.com\"\n  python\nfrom workers import WorkerEntrypoint, Response\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        return Response(self.env.API_HOST)\npython\ndef hello(name):\n    return \"Hello, \" + name + \"!\"\npython\nfrom hello import hello\nfrom workers import WorkerEntrypoint, Response\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        return Response(hello(\"World\"))\ntoml\n[dependency-groups]\ndev = [\n    \"workers-py\",\n    \"workers-runtime-sdk\"\n]\nbash\nuv tool upgrade workers-py\nbash\nuv lock --upgrade-package workers-py\nplaintext\n src\n  module.py\n  main.py\n uv.lock\n pyproject.toml\n wrangler.toml\npython\nimport module\ntoml\nmain = \"src/main.py\"\npython\nfrom workers import WorkerEntrypoint, Response\nfrom urllib.parse import urlparse, parse_qs\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        # Parse the incoming request URL\n        url = urlparse(request.url)\n        # Parse the query parameters into a Python dictionary\n        params = parse_qs(url.query)\n\nif \"name\" in params:\n            greeting = \"Hello there, {name}\".format(name=params[\"name\"][0])\n            return Response(greeting)\n\nif url.path == \"/favicon.ico\":\n          return Response(\"\")\n\nreturn Response(\"Hello world!\")\npython\nfrom workers import WorkerEntrypoint, Response\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        name = (await request.json()).name\n        return Response(\"Hello, {name}\".format(name=name))\nplaintext\n src\n    file.html\n    main.py\n wrangler.jsonc\npython\nfrom pathlib import Path\nfrom workers import WorkerEntrypoint, Response\n\nclass Default(WorkerEntrypoint):\n    async def fetch(self, request):\n        html_file = Path(__file__).parent / \"file.html\"\n        return Response(html_file.read_text(), headers={\"Content-Type\": \"text/html\"})\npython",
  "code_samples": [
    {
      "code": "### 3. Environment variables\n\nCreate a `.env` file or set environment variables.",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Terraform commands\n\n### Initialize and plan",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Manage changes",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Advanced Terraform configuration\n\n### Multiple environments",
      "language": "unknown"
    },
    {
      "code": "### Widget with Enterprise features",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Import existing widgets\n\nUse [`cf-terraforming`](https://developers.cloudflare.com/terraform/advanced-topics/import-cloudflare-resources/#cf-terraforming) to import existing widgets.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Error codes  Cloudflare Turnstile docs\ndescription: \"You can troubleshoot these error codes using the following recommendations:\"\nlastUpdated: 2025-12-19T17:29:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/turnstile/troubleshooting/client-side-errors/error-codes/\n  md: https://developers.cloudflare.com/turnstile/troubleshooting/client-side-errors/error-codes/index.md\n---\n\nNote\n\nWhen an error code is marked with `***`, it means that the remaining numbers can be ignored and are for internal use.\n\n| Error Code | Description | Retry | Troubleshooting |\n| - | - | - | - |\n| `100010` | Widget initialization failed | No | Reload page. If persistent, it indicates an automated device. |\n| `100020` | Multiple initialization attempts | No | Clear the existing widget before creating new one. |\n| `100030` | Invalid widget state | No | Reset widget with `turnstile.reset()`. |\n| `102010` | Invalid challenge response | Yes | Retry the challenge. |\n| `102020` | Network timeout during challenge | Yes | Check internet connection and retry. |\n| `102030` | Corrupted challenge data | Yes | Clear browser cache and retry. |\n| `103010` | Browser compatibility issue | Yes | Refer to [supported browsers](https://developers.cloudflare.com/cloudflare-challenges/reference/supported-browsers/). |\n| `103020` | JavaScript execution error | Yes | Ensure JavaScript is enabled. |\n| `103030` | Browser extension interference | Yes | Disable extensions temporarily. |\n| `104010` | Invalid widget configuration | Yes | Check widget parameters. |\n| `104020` | Missing required parameters | Yes | Ensure all required options are provided. |\n| `104030` | Parameter type mismatch | Yes | Verify parameter data types. |\n| `105010` | Deprecated API method | No | Update to the current API version. |\n| `105020` | Invalid API configuration | No | Review [client-side configurations](https://developers.cloudflare.com/turnstile/get-started/client-side-rendering/). |\n| `105030` | Unsupported feature usage | No | Check feature availability. |\n| `106010` | Generic parameter error | Yes | Review all widget parameters. |\n| `106020` | Parameter validation failed | Yes | Check parameter format and values. |\n| `110100` | Invalid sitekey | No | Verify the sitekey in [Cloudflare dashboard](https://dash.cloudflare.com/). |\n| `110110` | Sitekey not found | No | Check sitekey spelling and dashboard configuration. |\n| `110200` | Domain not authorized | No | Add current domain in Hostname Management |\n| `110420` | Rate limiting active | No | Wait before retrying, review rate limits |\n| `110430` | Account suspended | No | Contact Cloudflare support. |\n| `110500` | Browser not supported | No | Refer to [supported browsers](https://developers.cloudflare.com/cloudflare-challenges/reference/supported-browsers/). |\n| `110510` | Feature not available | No | Check your account plan and feature availability. |\n| `120010` | Script loading failed | Yes | Check your internet connection and content blockers. |\n| `120020` | Resource timeout | Yes | Retry after checking network stability |\n| `120030` | CDN unavailable | Yes | Wait and retry. Check your firewall settings |\n| `200010` | Widget already rendered | No | Reset existing widget before re-rendering. |\n| `200100` | Widget not found | No | Ensure the container element exists. |\n| `200500` | Widget state error | Yes | Reset widget with `turnstile.reset()`. |\n| `300*` | Generic challenge failure | No | Bot behavior detected. Refer to [troubleshooting](#troubleshooting). |\n| `400020` | Invalid widget size | No | Use valid size: `normal`, `compact`. |\n| `400030` | Invalid appearance | No | Use valid appearance: `always`, `execute`, `interaction-only`. |\n| `400040` | Invalid theme | No | Use valid theme: `light`, `dark`, `auto`. |\n| `600*` | Generic challenge failure | No | Bot behavior detected. Refer to [troubleshooting](#troubleshooting). |\n\n## Error families\n\n| Family | Category | Cause |\n| - | - | - |\n| `100***` | Initialization problems | Page reload needed. |\n| `102***` | Invalid parameters (network) | Network or browser issues. |\n| `103***` | Invalid parameters (browser) | Browser compatibility issues. |\n| `104***` | Invalid parameters (client-side) | Client validation failures. |\n| `105***` | API compatibility | Implementation error. |\n| `106***` | Invalid parameters (general) | Parameter validation failures. |\n| `110***` | Configuration issues | Setup problems. |\n| `120***` | Network or loading issues | Connection problems. |\n| `200***` | Widget issues | Widget state problems. |\n| `300***` | Generic Challenge failure | Bot detection. |\n| `400***` | Client configuration | Invalid options. |\n| `600***` | Generic Challenge failure | Bot detection. |\n\n***\n\n## Troubleshooting\n\nYou can troubleshoot these error codes using the following recommendations:\n\n1. Verify your browser compatibility.\n\n   * Turnstile supports all major browsers, except Internet Explorer.\n   * Ensure your browser is up to date. For more information, refer to our [Supported browsers](https://developers.cloudflare.com/cloudflare-challenges/reference/supported-browsers/).\n\n2. Disable your browser extensions.\n\n   * Some browser extensions, such as ad blockers, may block the scripts Turnstile needs to operate.\n   * Temporarily disable all extensions and reload the page.\n\n3. Enable JavaScript.\n   * Turnstile requires JavaScript to run. Ensure it is enabled in your browser settings. Refer to your browser's documentation for instructions on enabling JavaScript.\n\n4. Try Incognito or Private mode.\n   * Use your browser's incognito or private mode to rule out issues caused by extensions or cached data.\n\n5. Test another browser or device.\n   * Switch to a different browser or device to see if the issue is specific to your current setup.\n\n6. Avoid VPNs or proxies.\n   * Some virtual private networks (VPN) or proxies may interfere with Turnstile. Disable them temporarily to test.\n\n7. Switch to a different network.\n   * Your current network may have restrictions causing Turnstile challenges to fail. Try switching to another network, such as a mobile hotspot.\n\nError code `401`\n\nTurnstile may occasionally generate a `401` Unauthorized error in your browser console during a security check. This is not typically a problem with your implementation. This error often occurs when the widget attempts to request a [Private Access Token](https://developers.cloudflare.com/cloudflare-challenges/reference/private-access-tokens/) that your device or browser does not support yet.\n\nYou can generally safely ignore the `401` error, as it is an expected part of Turnstile's underlying Challenge Platform workflow. If the widget is successfully resolving and you are receiving a token, no action is required.\n\n</page>\n\n<page>\n---\ntitle: Work with WAF custom rulesets in the dashboard  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: \"To create and deploy a custom ruleset at the account level:\"\nlastUpdated: 2025-11-27T11:05:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/custom-rulesets/create-dashboard/\n  md: https://developers.cloudflare.com/waf/account/custom-rulesets/create-dashboard/index.md\n---\n\nNotes\n\nCustom rulesets at the account level require an Enterprise plan with a paid add-on.\n\nYou can create and deploy custom rulesets at the account or zone level. However, the Cloudflare dashboard currently does not support working with custom rulesets at the zone level. You will need to use the Cloudflare API to configure or deploy these rulesets.\n\n## Create and deploy a custom ruleset\n\nTo create and deploy a custom ruleset at the account level:\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Custom rulesets** tab.\n\n   ![Custom rulesets page in the Cloudflare dashboard](https://developers.cloudflare.com/_astro/custom-rulesets-dashboard.B9PZ8Swr_HNAJq.webp)\n\n3. To create a new empty ruleset, select **Create ruleset**. To duplicate an existing ruleset, select the three dots next to it > **Duplicate**.\n\n4. In the page that displays, enter a name and (optionally) a description for the custom ruleset.\n\n5. Under **Scope**, define when the custom ruleset should run.\n\n   * Select **All incoming requests** to apply the custom ruleset to all incoming requests for all your zones on an Enterprise plan.\n   * Select **Custom filter expression** to define a custom expression that defines when to execute the custom ruleset. Use the **Field** drop-down list to choose an HTTP property. For each request, the value of the property you choose for **Field** is compared to the value you specify for **Value** using the operator selected in **Operator**. Alternatively, select **Edit expression** to define your expression using the [Expression Editor](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/edit-expressions/#expression-editor).\n\n   Warning\n\n   Custom rulesets deployed at the account level only apply to incoming traffic of Enterprise domains. The Expression Builder will automatically include this filter. If you define a custom expression for the ruleset using the Expression Editor, you must use parentheses to enclose any custom conditions and end your expression with `and cf.zone.plan eq \"ENT\"` so that the rule only applies to domains on an Enterprise plan.\n\n6. To create a new rule, select **Add rule**.\n\n7. Enter a descriptive name for the rule in **Rule name**.\n\n8. Under **When incoming requests match**, use the **Field** drop-down list to choose an HTTP property. For each request, the value of the property you choose for **Field** is compared to the value you specify for **Value** using the operator selected in **Operator**. Alternatively, select **Edit expression** to define your expression using the [Expression Editor](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/edit-expressions/#expression-editor).\n\n9. Select the rule action from the **Choose action** drop-down list. For example, selecting *Block* tells Cloudflare to refuse requests that match the conditions you specified.\n\n10. (Optional) If you selected the *Block* action, you can [configure a custom response](#configure-a-custom-response-for-blocked-requests).\n\n11. Select **Deploy**.\n\n12. Add other rules to the custom ruleset, if needed. You can also duplicate an existing rule in the custom ruleset.\n\n13. Select **Create**.\n\n## Edit a custom ruleset\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Custom rulesets** tab.\n\n   ![Custom rulesets page in the Cloudflare dashboard](https://developers.cloudflare.com/_astro/custom-rulesets-dashboard.B9PZ8Swr_HNAJq.webp)\n\n3. To edit a custom ruleset, select the three dots next to it > **Edit**.\n\n4. Make any desired changes to the ruleset by selecting **Edit** next to the items you want to change.\n\n5. When you are done, select **Back to rulesets list**.\n\nWarning\n\nCustom rulesets deployed at the account level only apply to incoming traffic of Enterprise domains. The Expression Builder in the Cloudflare dashboard will automatically include this filter. If you define a custom expression for the ruleset using the Expression Editor, you must use parentheses to enclose any custom conditions and end your expression with `and cf.zone.plan eq \"ENT\"` so that the rule only applies to domains on an Enterprise plan.\n\n## Delete a custom ruleset\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Custom rulesets** tab.\n\n3. To delete a custom ruleset, select the three dots next to it > **Delete**.\n\n4. To confirm the delete operation, select **Delete**.\n\n## Configure a custom response for blocked requests\n\nWhen you select the *Block* action in a rule you can optionally define a custom response.\n\nThe custom response has three settings:\n\n* **With response type**: Choose a content type or the default WAF block response from the list. The available custom response types are the following:\n\n  | Dashboard value | API value |\n  | - | - |\n  | Custom HTML | `\"text/html\"` |\n  | Custom Text | `\"text/plain\"` |\n  | Custom JSON | `\"application/json\"` |\n  | Custom XML | `\"text/xml\"` |\n\n* **With response code**: Choose an HTTP status code for the response, in the range 400-499. The default response code is 403.\n\n* **Response body**: The body of the response. Configure a valid body according to the response type you selected. The maximum field size is 2 KB.\n\n</page>\n\n<page>\n---\ntitle: Use Terraform  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-02-04T15:44:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/custom-rulesets/link-create-terraform/\n  md: https://developers.cloudflare.com/waf/account/custom-rulesets/link-create-terraform/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Create a WAF custom ruleset using the API  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: \"To deploy custom rules at the account level:\"\nlastUpdated: 2025-11-27T11:05:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/custom-rulesets/create-api/\n  md: https://developers.cloudflare.com/waf/account/custom-rulesets/create-api/index.md\n---\n\nNote\n\nThis feature requires an Enterprise plan with a paid add-on.\n\nTo deploy custom rules at the account level:\n\n1. Create a custom ruleset with one or more rules. Alternatively, identify the existing custom ruleset you want to deploy using the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) API operation.\n2. Deploy the custom ruleset so that it gets executed. To deploy a custom ruleset, create a rule with the `execute` action.\n\nUse the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to work with custom rulesets using the API.\n\nIf you are using Terraform, refer to [WAF custom rules configuration using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-custom-rules/#create-and-deploy-a-custom-ruleset).\n\n## Procedure\n\nTo deploy a custom ruleset, follow these general steps:\n\n1. Create a custom ruleset in the `http_request_firewall_custom` phase with one or more rules.\n2. Deploy the ruleset to the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) of the `http_request_firewall_custom` phase.\n\n### 1. Create a custom ruleset\n\nThe following example creates a custom ruleset at the account level with a single rule in the `rules` array.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Account WAF Write`\n* `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "Save the ruleset ID in the response for the next step.\n\n### 2. Deploy the custom ruleset\n\nTo deploy the custom ruleset, add a rule with `\"action\": \"execute\"` to the `http_request_firewall_custom` phase entry point ruleset.\n\n1. Invoke the [Get an account entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the definition of the entry point ruleset for the `http_request_firewall_custom` phase. You will need the [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) for this task.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account WAF Read`\n   * `Account Rulesets Read`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. If the entry point ruleset already exists (that is, if you received a `200 OK` status code and the ruleset definition), take note of the ruleset ID in the response. Then, invoke the [Create an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add an `execute` rule to the existing ruleset deploying the custom ruleset. By default, the rule will be added at the end of the list of rules already in the ruleset.\n\n   The following request creates a rule that executes the custom ruleset with ID `<CUSTOM_RULESET_ID>` for all Enterprise zones in the account:\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "Warning\n\n   At the account level, you can only apply custom rulesets to incoming traffic of zones on an Enterprise plan. To enforce this requirement, you must include `cf.zone.plan eq \"ENT\"` in the expression of the `execute` rule deploying the custom ruleset.\n\n3. If the entry point ruleset does not exist (that is, if you received a `404 Not Found` status code in step 1), create it using the [Create an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation. Include a single rule in the `rules` array that executes the custom ruleset for all incoming requests of Enterprise zones in your account.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "## Next steps\n\nUse the different operations in the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to work with the custom ruleset you created and deployed. The following table has a list of common tasks for working with custom rulesets at the account level:\n\n| Task | Procedure |\n| - | - |\n| Get list of custom rulesets | Use the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation and search for rulesets with `\"kind\": \"custom\"` and `\"phase\": \"http_request_firewall_custom\"`. The response will include the ruleset IDs.For more information, refer to [List existing rulesets](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#list-existing-rulesets). |\n| List all rules in a custom ruleset | Use the [Get an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/) operation with the custom ruleset ID to obtain the list of configured rules and their IDs.For more information, refer to [View a specific ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#view-a-specific-ruleset). |\n| Update a custom rule | Use the [Update an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/edit/) operation. You will need to provide the custom ruleset ID and the rule ID.For more information, refer to [Update a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/). |\n| Delete a custom rule | Use the [Delete an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/delete/) operation. You will need to provide the custom ruleset ID and the rule ID.For more information, refer to [Delete a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete-rule/). |\n\n## More resources\n\nFor instructions on creating a custom ruleset at the zone level via API, refer to [Custom rulesets (zone level)](https://developers.cloudflare.com/waf/custom-rules/custom-rulesets/).\n\nFor more information on working with custom rulesets, refer to [Work with custom rulesets](https://developers.cloudflare.com/ruleset-engine/custom-rulesets/) in the Ruleset Engine documentation.\n\n</page>\n\n<page>\n---\ntitle: Deploy a WAF managed ruleset via API for an account  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: Use the Rulesets API to deploy a WAF managed ruleset to the\n  http_request_firewall_managed phase at the account level.\nlastUpdated: 2025-10-09T17:37:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/managed-rulesets/deploy-api/\n  md: https://developers.cloudflare.com/waf/account/managed-rulesets/deploy-api/index.md\n---\n\nNote\n\nThis feature requires an Enterprise plan with a paid add-on.\n\nUse the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to deploy a WAF managed ruleset to the `http_request_firewall_managed` phase at the account level.\n\nThe [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/#available-managed-rulesets) page includes the IDs of the different WAF managed rulesets. You will need this information when deploying rulesets via API.\n\nIf you are using Terraform, refer to [WAF Managed Rules configuration using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-managed-rulesets/#deploy-managed-rulesets-at-the-account-level).\n\n## Example\n\nThe following example deploys the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/) to the `http_request_firewall_managed` phase of a given account (`$ACCOUNT_ID`) by creating a rule that executes the managed ruleset. The rules in the managed ruleset are executed when the zone name matches one of `example.com` or `anotherexample.com`.\n\n1. Invoke the [Get an account entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the definition of the entry point ruleset for the `http_request_firewall_managed` phase. You will need the [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) for this task.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account WAF Read`\n   * `Account Rulesets Read`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. If the entry point ruleset already exists (that is, if you received a `200 OK` status code and the ruleset definition), take note of the ruleset ID in the response. Then, invoke the [Create an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add an `execute` rule to the existing ruleset deploying the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/) (with ID `efb7b8c949ac4650a09736fc376e9aee`). By default, the rule will be added at the end of the list of rules already in the ruleset.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Warning\n\n   Managed rulesets deployed at the account level will only apply to incoming traffic of zones on an Enterprise plan. The expression of your `execute` rule must end with `and cf.zone.plan eq \"ENT\"` or else the API operation will fail.\n\n3. If the entry point ruleset does not exist (that is, if you received a `404 Not Found` status code in step 1), create it using the [Create an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation. Include a single rule in the `rules` array that executes the Cloudflare Managed Ruleset (with ID `efb7b8c949ac4650a09736fc376e9aee`) for all incoming requests where the zone name matches one of `example.com` or `anotherexample.com`.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "## Next steps\n\nTo customize the behavior of the rules included in a managed ruleset, [create an override](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/).\n\nTo skip the execution of WAF managed rulesets or some of their rules, [create an exception](https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/define-api/) (also called a skip rule).\n\nExceptions have priority over overrides.\n\n## More resources\n\nFor instructions on deploying a managed ruleset at the zone level via API, refer to [Deploy a WAF managed ruleset via API (zone)](https://developers.cloudflare.com/waf/managed-rules/deploy-api/).\n\nFor more information on working with managed rulesets via API, refer to [Work with managed rulesets](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/) in the Ruleset Engine documentation.\n\n</page>\n\n<page>\n---\ntitle: Deploy a WAF managed ruleset in the dashboard for an account  Cloudflare\n  Web Application Firewall (WAF) docs\ndescription: To deploy a managed ruleset for a single zone, refer to Deploy a\n  managed ruleset in the dashboard for a zone.\nlastUpdated: 2025-09-03T16:11:55.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/managed-rulesets/deploy-dashboard/\n  md: https://developers.cloudflare.com/waf/account/managed-rulesets/deploy-dashboard/index.md\n---\n\nNote\n\nThis feature requires an Enterprise plan with a paid add-on.\n\nTo deploy a managed ruleset for a single zone, refer to [Deploy a managed ruleset in the dashboard for a zone](https://developers.cloudflare.com/waf/managed-rules/deploy-zone-dashboard/).\n\n## Deploy a managed ruleset\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n   ![Example WAF Managed Rules configuration in the Managed rulesets tab.](https://developers.cloudflare.com/_astro/managed-rulesets-dashboard.BxgYTxN0_Z1BXzxF.webp)\n\n3. Select **Deploy** > **Deploy managed ruleset**.\n\n4. Next to the managed ruleset you want to deploy, select **Select ruleset**.\n\n5. Give a name to the rule deploying the ruleset in **Execution name**.\n\n6. (Optional) To execute the managed ruleset for a subset of incoming requests, select **Edit scope** and [configure the expression](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/edit-expressions/) that will determine the scope of the current rule deploying the managed ruleset.\n\n   Warning\n\n   Deployed rulesets will only apply to incoming traffic of Enterprise domains on your account. The Expression Builder will automatically include this filter. If you define a custom expression using the Expression Editor, use parentheses to enclose any custom conditions and end your expression with `and cf.zone.plan eq \"ENT\"` so that the rule only applies to domains on an Enterprise plan.\n\n7. (Optional) You can customize the behavior of the managed ruleset in the following ways:\n\n   * [Configure the entire ruleset](#configure-field-values-for-all-the-rules) (affects all the rules)\n   * [Configure several rules or rules with specific tags](#configure-rules-in-bulk-in-a-managed-ruleset)\n   * [Configure a single rule](#configure-a-single-rule-in-a-managed-ruleset)\n\n8. To deploy the managed ruleset immediately, select **Deploy**. If you are not ready to deploy, select **Save as Draft**.\n\nThe **Deployed managed rulesets** list will show an *Execute* rule for the managed ruleset you deployed.\n\n## Turn on or off a managed ruleset\n\nSelect the **Enabled** toggle next to a deployed managed ruleset to turn it on or off.\n\n## Configure a managed ruleset\n\nConfigure a managed ruleset to define specific field values for one or more rules (for example, configure a rule with an action different from the action configured by Cloudflare). You can also turn off specific rules.\n\nTo skip one or more rules  or even entire WAF managed rulesets  for specific incoming requests, [add an exception](https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/). Exceptions, also called skip rules, are shown as *Skip* rules in the **Deployed managed rulesets** list.\n\nNote\n\nSome managed rulesets may not allow custom configuration, depending on your Cloudflare plan.\n\n### Configure field values for all the rules\n\nTo configure an entire managed ruleset:\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. Select the rule description of the *Execute* rule that deploys the managed ruleset you want to configure. Alternatively, select the three dots > **Edit**.\n\n   If you have not deployed the managed ruleset yet, do the following:\n\n   1. Select **Deploy** > **Deploy managed ruleset**.\n   2. Next to the managed ruleset you want to deploy and configure, select **Select ruleset**.\n\n4. In the ruleset configuration section, set one or more rule fields from the available values in the drop-down lists. The exact options vary according to the managed ruleset you are configuring.\n\n   For example, select the action to perform for all the rules in the ruleset from the **Ruleset action** drop-down list.\n\n   ![The Configure deployment page displaying the available options to override all the rules in the ruleset. In the displayed managed ruleset you can override the ruleset action.](https://developers.cloudflare.com/_astro/waf-configure-ruleset-account.YSsDcmI__21WwDr.webp)\n\n5. If you are editing a deployed managed ruleset, select **Save**. If you have not deployed the managed ruleset yet, select **Deploy** to deploy the ruleset immediately, or **Save as Draft** to save your deployment settings for later.\n\n### Configure rules in bulk in a managed ruleset\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. If you have already deployed the managed ruleset you want to configure, find the rule deploying that managed ruleset and select the rule description. Alternatively, select the three dots > **Edit** next to an *Execute* rule deploying the managed ruleset.\n\n   If you have not deployed the managed ruleset:\n\n   1. Select **Deploy** > **Deploy managed ruleset**.\n   2. Next to the managed ruleset, select **Select ruleset**.\n\n4. Select **Browse rules**.\n\n   ![The Cloudflare dashboard displaying the list of rules in the Cloudflare Managed Ruleset](https://developers.cloudflare.com/_astro/waf-browse-rules.lrvrhCdB_Z20FUV8.webp)\n\n1) Search for rules using the available filters. You can search for tags.\n\n2) In the results list, select the checkboxes for all the rules you want to configure.\n\n   Alternatively, select a tag name under the search input to filter the rules with that tag, and then select the checkboxes for the rules you want to configure. To extend your selection to all rules with the tag across all pages, select **Select all \\<NUMBER> rules**.\n\n   ![Selecting all rules in a page displays additional drop-down lists above the table to override the behavior of several rules at once.](https://developers.cloudflare.com/_astro/waf-modify-selected-rules.DrTbw8v1_Z2aSCWH.webp)\n\n3) Update one or more fields for the selected rules using the buttons displayed in the top right corner of the table.\n\n4) Select **Next**.\n\n5) If you selected a tag, a dialog appears asking you if any new rules with the selected tag should be configured with the field values you selected.\n\n   * Select **Do not apply to new rules** to apply your configurations to the selected rules only.\n   * Select **Apply to new rules** if you want to apply your configurations to any new rules with the select tag.\n\n6) Select **Save**.\n\n### Configure a single rule in a managed ruleset\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. If you have already deployed the managed ruleset you want to configure, find the rule deploying that managed ruleset and select the rule description. Alternatively, select the three dots > **Edit** next to an *Execute* rule deploying the managed ruleset.\n\n   If you have not deployed the managed ruleset:\n\n   1. Select **Deploy** > **Deploy managed ruleset**.\n   2. Next to the managed ruleset, select **Select ruleset**.\n\n4. Select **Browse rules**.\n\n   ![The Cloudflare dashboard displaying the list of rules in the Cloudflare Managed Ruleset](https://developers.cloudflare.com/_astro/waf-browse-rules.lrvrhCdB_Z20FUV8.webp)\n\n1) Search for a rule using the available filters. You can search for tags.\n\n2) Find the rule you want to configure in the results list.\n\n3) In the result line for the rule you want to change, select the desired value for a field in the displayed drop-down lists. For example, select the rule action in the **Action** dropdown. You can also change the status of a rule using the **Status** toggle next to the rule.\n\n4) Select **Next**, and then select **Save**.\n\n### Browse the rules of a managed ruleset\n\nYou can browse the available rules in a managed ruleset and search for individual rules or tags.\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. Select the rule description of the *Execute* rule that deploys the managed ruleset you want to configure. Alternatively, select the three dots > **Edit**.\n\n   If you have not deployed the managed ruleset yet, do the following:\n\n   1. Select **Deploy** > **Deploy managed ruleset**.\n   2. Next to the managed ruleset you want to browse, select **Select ruleset**.\n\n4. Select **Browse rules**.\n\n   ![The Browse rules page displaying the list of rules in the Cloudflare Managed Ruleset](https://developers.cloudflare.com/_astro/waf-browse-rules.lrvrhCdB_Z20FUV8.webp)\n\n### Delete a managed ruleset deployment rule or an exception\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. Under **Deployed managed rulesets** and next to the rule you want to delete, select the three dots > **Delete** and confirm the operation.\n\n</page>\n\n<page>\n---\ntitle: Create exceptions  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-02-04T15:44:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/managed-rulesets/link-create-exceptions/\n  md: https://developers.cloudflare.com/waf/account/managed-rulesets/link-create-exceptions/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Deploy using Terraform  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-02-04T15:44:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/managed-rulesets/link-create-terraform/\n  md: https://developers.cloudflare.com/waf/account/managed-rulesets/link-create-terraform/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Create a rate limiting ruleset via API  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: To deploy rate limiting rules at the account level, you must create\n  a rate limiting ruleset with one or more rules. Use the Rulesets API to create\n  and deploy rate limiting rulesets via API.\nlastUpdated: 2025-10-09T17:37:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/rate-limiting-rulesets/create-api/\n  md: https://developers.cloudflare.com/waf/account/rate-limiting-rulesets/create-api/index.md\n---\n\nTo deploy rate limiting rules at the account level, you must create a rate limiting ruleset with one or more rules. Use the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to create and deploy rate limiting rulesets via API.\n\nFor more information on rule parameters, refer to [Rate limiting parameters](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/).\n\nNote\n\nAt the API level, a rate limiting ruleset is a regular [custom ruleset](https://developers.cloudflare.com/waf/account/custom-rulesets/) with one or more rate limiting rules that you create in the `http_ratelimit` phase. The concept of custom rate limiting ruleset exists in the Cloudflare dashboard to make it clear that you are configuring and deploying rate limiting rules at the account level. This page with API instructions uses the same terminology.\n\nEach rate limiting rule contains a `ratelimit` object with the rate limiting configuration. Refer to [Rate limiting parameters](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/) for more information on this object and its parameters.\n\nIf you are using Terraform, refer to [Rate limiting rules configuration using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/rate-limiting-rules/#create-a-rate-limiting-rule-at-the-account-level).\n\n## Procedure\n\nTo deploy a rate limiting ruleset in your account, follow these general steps:\n\n1. Create a rate limiting ruleset (that is, a custom ruleset in the `http_ratelimit` phase) with one or more rate limiting rules.\n2. Deploy the ruleset to the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) of the `http_ratelimit` phase at the account level.\n\n### 1. Create a rate limiting ruleset\n\nThe following example creates a rate limiting ruleset with a single rate limiting rule in the `rules` array.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Account WAF Write`\n* `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "The available characteristics depend on your Cloudflare plan and product subscriptions. Refer to [Availability](https://developers.cloudflare.com/waf/rate-limiting-rules/#availability) for more information.\n\nSave the ruleset ID in the response for the next step.\n\n### 2. Deploy the rate limiting ruleset\n\nTo deploy the rate limiting ruleset, add a rule with `\"action\": \"execute\"` to the `http_ratelimit` phase entry point ruleset at the account level.\n\n1. Invoke the [Get an account entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the definition of the entry point ruleset for the `http_ratelimit` phase. You will need the [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) for this task.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account WAF Read`\n   * `Account Rulesets Read`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. If the entry point ruleset already exists (that is, if you received a `200 OK` status code and the ruleset definition), take note of the ruleset ID in the response. Then, invoke the [Create an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add an `execute` rule to the existing ruleset deploying the rate limiting ruleset. By default, the rule will be added at the end of the list of rules already in the ruleset.\n\n   The following request creates a rule that executes the rate limiting ruleset with ID `<RATE_LIMITING_RULESET_ID>` for all Enterprise zones in the account:\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "Warning\n\n   You can only apply rate limiting rulesets to incoming traffic of zones on an Enterprise plan. To enforce this requirement, you must include `cf.zone.plan eq \"ENT\"` in the expression of the `execute` rule deploying the rate limiting ruleset.\n\n3. If the entry point ruleset does not exist (that is, if you received a `404 Not Found` status code in step 1), create it using the [Create an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation. Include a single rule in the `rules` array that executes the rate limiting ruleset for all incoming requests of Enterprise zones in your account.\n\n   Required API token permissions\n\n   At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n   * `Account WAF Write`\n   * `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "For examples of rate limiting rule definitions for the API, refer to the [zone-level API documentation](https://developers.cloudflare.com/waf/rate-limiting-rules/create-api/).\n\n***\n\n## Next steps\n\nUse the different operations in the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to work with the ruleset you just created and deployed. The following table has a list of common tasks for working with rate limiting rulesets at the account level:\n\n| Task | Procedure |\n| - | - |\n| Get list of rate limiting rulesets | Use the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation and search for rulesets with `\"kind\": \"custom\"` and `\"phase\": \"http_ratelimit\"`. The response will include the ruleset IDs.For more information, refer to [List existing rulesets](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#list-existing-rulesets). |\n| List all rules in a rate limiting ruleset | Use the [Get an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/) operation with the rate limiting ruleset ID to obtain the list of configured rate limiting rules and their IDs.For more information, refer to [View a specific ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/#view-a-specific-ruleset). |\n| Update a rate limiting rule | Use the [Update an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/edit/) operation. You will need to provide the rate limiting ruleset ID and the rule ID.For more information, refer to [Update a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/update-rule/). |\n| Delete a rate limiting rule | Use the [Delete an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/delete/) operation. You will need to provide the rate limiting ruleset ID and the rule ID.For more information, refer to [Delete a rule in a ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/delete-rule/). |\n\n## More resources\n\nFor instructions on deploying a rate limiting rule at the zone level via API, refer to [Create a rate limiting rule via API](https://developers.cloudflare.com/waf/rate-limiting-rules/create-api/).\n\nFor more information on the different rate limiting parameters you can configure in your rate limiting rules, refer to [Rate limiting parameters](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/).\n\n</page>\n\n<page>\n---\ntitle: Create a rate limiting ruleset in the dashboard for an account \n  Cloudflare Web Application Firewall (WAF) docs\ndescription: At the account level, rate limiting rules are grouped into rate\n  limiting rulesets. You must first create a custom ruleset with one or more\n  rate limiting rules, and then deploy it to one or more zones on an Enterprise\n  plan.\nlastUpdated: 2025-09-10T15:51:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/rate-limiting-rulesets/create-dashboard/\n  md: https://developers.cloudflare.com/waf/account/rate-limiting-rulesets/create-dashboard/index.md\n---\n\nNote\n\nThis feature requires an Enterprise plan with a paid add-on.\n\nAt the account level, rate limiting rules are grouped into rate limiting rulesets. You must first create a custom ruleset with one or more rate limiting rules, and then deploy it to one or more zones on an Enterprise plan.\n\nFor more information on rule parameters, refer to [Rate limiting parameters](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/).\n\n## 1. Create a custom rate limiting ruleset\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Rate limiting rulesets** tab.\n\n3. To create a new empty ruleset, select **Create ruleset**. To duplicate an existing ruleset, select the three dots next to it > **Duplicate**.\n\n4. Enter a name for the ruleset and (optionally) a description.\n\n5. In the ruleset creation page, select **Create rule**.\n\n6. In the rule creation page, enter a descriptive name for the rule in **Rule name**.\n\n   ![Create rate limiting rule at the account level in the Cloudflare dashboard](https://developers.cloudflare.com/_astro/rate-limiting-create-account.DD1IrUhr_PuMXY.webp)\n\n7. Under **When incoming requests match**, use the **Field** drop-down list to choose an HTTP property. For each request, the value of the property you choose for **Field** is compared to the value you specify for **Value** using the operator selected in **Operator**.\n\n8. (Optional) Under **Cache status**, disable **Also apply rate limiting to cached assets** to consider only the requests that reach the origin when determining the rate.\n\n9. Under **With the same characteristics**, configure the characteristics that will define the request counters for rate limiting purposes. Each value combination will have its own counter to determine the rate. Refer to [How Cloudflare determines the request rate](https://developers.cloudflare.com/waf/rate-limiting-rules/request-rate/) for more information.\n\n   The available characteristics depend on your Cloudflare plan and product subscriptions.\n\n10. (Optional) To define an expression that specifies the conditions for incrementing the rate counter, enable **Use custom counting expression** and set the expression. By default, the counting expression is the same as the rule expression. The counting expression can include [response fields](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/?field-category=Response).\n\n11. Under **When rate exceeds**, define the maximum number of requests and the time period to consider when determining the rate.\n\n12. Under **Then take action**, select the rule action from the **Choose an action** drop-down list. For example, selecting *Block* tells Cloudflare to refuse requests in the conditions you specified when the request limit is reached.\n\n13. (Optional) If you selected the *Block* action, you can [configure a custom response](#configure-a-custom-response-for-blocked-requests) for requests exceeding the configured rate limit.\n\n14. Select the mitigation timeout in the **Duration** dropdown. This is the time period during which Cloudflare applies the select action once the rate is reached.\n\n    Enterprise customers with a paid add-on can [throttle requests](https://developers.cloudflare.com/waf/rate-limiting-rules/parameters/#with-the-following-behavior) instead of applying the configured action for a selected duration. To throttle requests, under **With the following behavior** select *Throttle requests over the maximum configured rate*.\n\n15. Select **Add rule**.\n\n16. Create additional rate limiting rules as needed, and then select **Create** to create the ruleset.\n\n## 2. Deploy the custom rate limiting ruleset\n\nTo deploy a custom rate limiting ruleset to one or more zones on an Enterprise plan:\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Rate limiting rulesets** tab.\n\n3. Under **Your custom rate limiting rulesets** and next to the rate limiting ruleset you wish to deploy, select **Deploy**.\n\n4. In the ruleset deployment page, enter a descriptive name for the rule deploying the ruleset in **Execution name**.\n\n5. Under **Execution scope**, review the scope of the rate limiting ruleset to deploy. If necessary, select **Edit scope** and configure the expression that will determine the scope of the current rule.\n\n   Warning\n\n   Deployed custom rate limiting rulesets will only apply to incoming traffic of zones on an Enterprise plan. The Expression Builder will automatically include this filter. If you define a custom expression using the Expression Editor, you must include `AND zone.level eq \"ENT\"` in your expression so that the rule only applies to zones on an Enterprise plan.\n\n6. To deploy your rule immediately, select **Deploy**. If you are not ready to deploy your rule, select **Save as Draft**.\n\nThe **Deployed custom rate limiting rulesets** list will show a rule for each deployed custom rate limiting ruleset.\n\n## Configure a custom response for blocked requests\n\nWhen you select the *Block* action in a rule you can optionally define a custom response.\n\nThe custom response has three settings:\n\n* **With response type**: Choose a content type or the default rate limiting response from the list. The available custom response types are the following:\n\n  | Dashboard value | API value |\n  | - | - |\n  | Custom HTML | `\"text/html\"` |\n  | Custom Text | `\"text/plain\"` |\n  | Custom JSON | `\"application/json\"` |\n  | Custom XML | `\"text/xml\"` |\n\n* **With response code**: Choose an HTTP status code for the response, in the range 400-499. The default response code is 429.\n\n* **Response body**: The body of the response. Configure a valid body according to the response type you selected. The maximum field size is 30 KB.\n\n</page>\n\n<page>\n---\ntitle: Create using Terraform  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-02-11T10:31:26.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/account/rate-limiting-rulesets/link-create-terraform/\n  md: https://developers.cloudflare.com/waf/account/rate-limiting-rulesets/link-create-terraform/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: API examples of custom rules with the Skip action  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: Use the Rulesets API to configure custom rules via API.\nlastUpdated: 2025-11-27T11:05:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/skip/api-examples/\n  md: https://developers.cloudflare.com/waf/custom-rules/skip/api-examples/index.md\n---\n\nUse the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to configure custom rules via API.\n\nThe `skip` action supports different [skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/), according to the security features or products that you wish to skip.\n\n## Before you continue\n\nThis page contains examples of different skip rule scenarios for custom rules. Take the following into account:\n\n* The `$ZONE_ID` value is the [ID of the zone](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) where you want to add the rule.\n\n* The `$RULESET_ID` value is the ID of the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) of the `http_request_firewall_custom` phase. For details on obtaining this ruleset ID, refer to [List and view rulesets](https://developers.cloudflare.com/ruleset-engine/rulesets-api/view/). The API examples in this page add a skip rule to an existing ruleset using the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation.\n\n  However, the entry point ruleset may not exist yet. In this case, invoke the [Create a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation to create the entry point ruleset with a skip rule. Refer to [Create ruleset](https://developers.cloudflare.com/ruleset-engine/rulesets-api/create/#example---create-a-zone-level-phase-entry-point-ruleset) for an example.\n\n* Although each example only includes one action parameter, you can use several skip options in the same rule by specifying the `ruleset`, `phases`, and `products` action parameters simultaneously.\n\n## Skip the remaining rules in the current ruleset\n\nThis example invokes the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add a skip rule to the existing `http_request_firewall_custom` phase entry point ruleset with ID `$RULESET_ID`. The rule will skip all remaining rules in the current ruleset for requests matching the rule expression.",
      "language": "unknown"
    },
    {
      "code": "## Skip a phase\n\nThis example invokes the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add a rule to the existing `http_request_firewall_custom` phase entry point ruleset with ID `$RULESET_ID`. The rule will skip the `http_ratelimit` phase for requests matching the rule expression.",
      "language": "unknown"
    },
    {
      "code": "Refer to [Available skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/) for the list of phases you can skip.\n\n## Skip a phase and do not log matching requests\n\nThis example invokes the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add a rule that:\n\n* Skips the `http_ratelimit` phase\n* Disables event logging for the current rule",
      "language": "unknown"
    },
    {
      "code": "Refer to [Available skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/#log-requests-matching-the-skip-rule) for more information on disabling logging for requests that match a skip rule.\n\n## Skip security products\n\nThis example uses the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add a rule that skips the [Zone Lockdown](https://developers.cloudflare.com/waf/tools/zone-lockdown/) and [User Agent Blocking](https://developers.cloudflare.com/waf/tools/user-agent-blocking/) products for requests matching the rule expression.",
      "language": "unknown"
    },
    {
      "code": "Refer to [Available skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/#skip-products) for the list of products you can skip.\n\n## Skip the remaining rules in the current phase\n\nThis example invokes the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add a skip rule to the existing `http_request_firewall_custom` phase entry point ruleset with ID `$RULESET_ID`. The rule will skip all remaining rules in the `http_request_firewall_custom` phase for requests matching the rule expression.",
      "language": "unknown"
    },
    {
      "code": "Currently, this skip option is only available at the zone level. Refer to [Available skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/#skip-the-remaining-custom-rules-current-phase) for more details.\n\n</page>\n\n<page>\n---\ntitle: Available skip options  Cloudflare Web Application Firewall (WAF) docs\ndescription: The following sections cover the available skip options in custom rules.\nlastUpdated: 2025-11-27T11:05:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/skip/options/\n  md: https://developers.cloudflare.com/waf/custom-rules/skip/options/index.md\n---\n\nThe following sections cover the available skip options in custom rules.\n\nNote\n\nIf you configure a skip rule at the account level it will only affect other rules/phases configured at the account level, not at the zone level. To skip rules/phases at the zone level you must configure a skip rule at the zone level.\n\n## Skip the remaining custom rules (current ruleset)\n\n* Dashboard option: **All remaining custom rules**\n* API action parameter: `ruleset`\n\nSkips the remaining rules in the current ruleset.\n\n## Skip phases\n\n* Dashboard options: **All rate limiting rules**, **All Super Bot Fight Mode rules**, and **All managed rules**\n* API action parameter: `phases`\n\nSkips the execution of one or more phases. Based on the phases you can skip, this option effectively allows you to skip [rate limiting rules](https://developers.cloudflare.com/waf/rate-limiting-rules/), [Super Bot Fight Mode rules](https://developers.cloudflare.com/bots/get-started/super-bot-fight-mode/), and/or [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/).\n\nThe phases you can skip are the following:\n\n* `http_ratelimit`\n* `http_request_sbfm`\n* `http_request_firewall_managed`\n\nRefer to [Phases](https://developers.cloudflare.com/ruleset-engine/about/phases/) for more information.\n\n## Skip products\n\n* API action parameter: `products`\n\nSkips specific security products that are not based on the Ruleset Engine. The products you can skip are the following:\n\n| Product name in the dashboard | API value |\n| - | - |\n| [Zone Lockdown](https://developers.cloudflare.com/waf/tools/zone-lockdown/) | `zoneLockdown` |\n| [User Agent Blocking](https://developers.cloudflare.com/waf/tools/user-agent-blocking/) | `uaBlock` |\n| [Browser Integrity Check](https://developers.cloudflare.com/waf/tools/browser-integrity-check/) | `bic` |\n| [Hotlink Protection](https://developers.cloudflare.com/waf/tools/scrape-shield/hotlink-protection/) | `hot` |\n| [Security Level](https://developers.cloudflare.com/waf/tools/security-level/) | `securityLevel` |\n| [Rate limiting rules (Previous version)](https://developers.cloudflare.com/waf/reference/legacy/old-rate-limiting/) | `rateLimit` |\n| [Managed rules (Previous version)](https://developers.cloudflare.com/waf/reference/legacy/old-waf-managed-rules/) | `waf` |\n\nThe API values in the table are case-sensitive.\n\nCurrently, you cannot skip [Bot Fight Mode](https://developers.cloudflare.com/bots/get-started/bot-fight-mode/), only Super Bot Fight Mode (refer to [Skip phases](#skip-phases)).\n\n## Skip the remaining custom rules (current phase)\n\n* Dashboard option: N/A (currently only available via API)\n* API action parameter: `phase`\n\nSkips all the remaining rules in the current phase. If used in a custom ruleset (at the zone level), it will skip all remaining rules in the custom ruleset, as well as all later rules in the entry point ruleset where the rule executing the custom ruleset was defined.\n\nCurrently, this option is only available at the zone level for the `http_request_firewall_custom` phase. You can use it in custom rulesets or entry point rulesets.\n\n## Other options\n\n### Log requests matching the skip rule\n\n* Dashboard option: **Log matching requests**\n* API action parameter: `logging` > `enabled` (boolean, optional)\n\nWhen disabled, Cloudflare will not log any requests matching the current skip rule, and these requests will not appear in [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/).\n\nIf you do not specify this option in the API, the default value is `true` for custom rules with the skip action (logs requests matching the skip rule).\n\n</page>\n\n<page>\n---\ntitle: Allow traffic from IP addresses in allowlist only  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: This example blocks incoming requests from IP addresses that are\n  not present in an allowlist (defined using an IP list).\nlastUpdated: 2025-12-19T14:56:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-ips-in-allowlist/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-ips-in-allowlist/index.md\n---\n\nThis example blocks incoming requests from IP addresses that are not present in an allowlist (defined using an [IP list](https://developers.cloudflare.com/waf/tools/lists/custom-lists/#ip-lists)).\n\n1. [Create an IP list](https://developers.cloudflare.com/waf/tools/lists/create-dashboard/) with the IP addresses for which you want to allow access.\\\n   For example, create an IP list named `allowed_ips` with one or more IP addresses. For more information on the accepted IP address formats, refer to [IP lists](https://developers.cloudflare.com/waf/tools/lists/custom-lists/#ip-lists).\n\n2. [Create a custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) blocking any requests from IPs not present in the list you created (`allowed_ips` in the current example).\n\n   * **When incoming requests match**:\n\n     | Field | Operator | Value |\n     | - | - | - |\n     | IP Source Address | is not in list | `allowed_ips` |\n\n     If you are using the Expression Editor:\\\n     `(not ip.src in $allowed_ips)`\n\n   * **Action**: *Block*\n\n3. (Optional) Update your expression with any extra filters, like blocking non-allowlisted IPs only for specific URI paths:\n\n   | Field | Operator | Value | |\n   | - | - | - | - |\n   | IP Source Address | is not in list | `allowed_ips` | And |\n   | URI Path | wildcard | `/admin/*` | |\n\n   If you are using the Expression Editor:\\\n   `(not ip.src in $allowed_ips and http.request.uri.path wildcard \"/admin/*\")`\n\n## Other resources\n\n* [Use case: Require known IP addresses in site admin area](https://developers.cloudflare.com/waf/custom-rules/use-cases/site-admin-only-known-ips/)\n* [Available skip options](https://developers.cloudflare.com/waf/custom-rules/skip/options/)\n\n</page>\n\n<page>\n---\ntitle: Allow traffic from specific countries only  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: \"This example custom rule blocks requests based on country code\n  using the ip.src.country field, only allowing requests from two countries:\n  United States and Mexico.\"\nlastUpdated: 2025-07-14T16:11:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-specific-countries/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-specific-countries/index.md\n---\n\nThis example custom rule blocks requests based on country code using the [`ip.src.country`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/ip.src.country/) field, only allowing requests from two countries: United States and Mexico.\n\n* **Expression**: `(not ip.src.country in {\"US\" \"MX\"})`\n* **Action**: *Block*\n\n## Other resources\n\n* [Use case: Block traffic by geographical location](https://developers.cloudflare.com/waf/custom-rules/use-cases/block-by-geographical-location/)\n* [Use case: Block traffic from specific countries](https://developers.cloudflare.com/waf/custom-rules/use-cases/block-traffic-from-specific-countries/)\n\n</page>\n\n<page>\n---\ntitle: Allow traffic from search engine bots and other verified bots \n  Cloudflare Web Application Firewall (WAF) docs\ndescription: This example custom rule challenges requests from a list of\n  countries, but allows traffic from search engine bots  such as Googlebot and\n  Bingbot  and from other verified bots.\nlastUpdated: 2025-10-31T10:10:06.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-verified-bots/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-verified-bots/index.md\n---\n\nThis example custom rule challenges requests from a list of countries, but allows traffic from search engine bots  such as Googlebot and Bingbot  and from other [verified bots](https://developers.cloudflare.com/bots/concepts/bot/verified-bots/).\n\nThe rule expression uses the [`cf.client.bot`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.client.bot/) field to determine if the request originated from a known good bot or crawler.\n\n* **Expression**: `(ip.src.country in {\"US\" \"MX\"} and not cf.client.bot)`\n* **Action**: *Managed Challenge*\n\n## Other resources\n\n* [Use case: Challenge bad bots](https://developers.cloudflare.com/waf/custom-rules/use-cases/challenge-bad-bots/)\n* [Cloudflare bot solutions](https://developers.cloudflare.com/bots/)\n* [Troubleshooting: Bing's Site Scan blocked by a WAF managed rule](https://developers.cloudflare.com/waf/troubleshooting/blocked-bing-site-scans/)\n* [Learning Center: What is a web crawler?](https://www.cloudflare.com/learning/bots/what-is-a-web-crawler/)\n\n</page>\n\n<page>\n---\ntitle: Block requests by attack score  Cloudflare Web Application Firewall (WAF) docs\ndescription: The attack score helps identify variations of known attacks and\n  their malicious payloads.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-attack-score/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-attack-score/index.md\n---\n\nThe [attack score](https://developers.cloudflare.com/waf/detections/attack-score/) helps identify variations of known attacks and their malicious payloads.\n\nThis example custom rule blocks requests based on country code ([ISO 3166-1 Alpha 2](https://www.iso.org/obp/ui/#search/code/) format), from requests with an attack score lower than 20. For more information, refer to [WAF attack score](https://developers.cloudflare.com/waf/detections/attack-score/).\n\n* **Expression**: `(ip.src.country in {\"CN\" \"TW\" \"US\" \"GB\"} and cf.waf.score lt 20)`\n* **Action**: *Block*\n\n</page>\n\n<page>\n---\ntitle: Block traffic by geographical location  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: This example custom rule blocks requests by autonomous system\n  number (ASN), continent, country of origin, or region.\nlastUpdated: 2025-08-08T14:01:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-by-geographical-location/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-by-geographical-location/index.md\n---\n\nThis example custom rule blocks requests by autonomous system number (ASN), continent, country of origin, or region.\n\n* **Expression**: `(ip.src.asnum eq 131279) or (ip.src.continent eq \"AS\") or (ip.src.country eq \"KP\") or (ip.src.region_code eq \"CA\")`\n* **Action**: *Block*\n\n## Other resources\n\n* [Use case: Block traffic from specific countries](https://developers.cloudflare.com/waf/custom-rules/use-cases/block-traffic-from-specific-countries/)\n* [Use case: Allow traffic from specific countries only](https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-specific-countries/)\n* [Fields reference: Geolocation](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/?field-category=Geolocation)\n\n</page>\n\n<page>\n---\ntitle: Block Microsoft Exchange Autodiscover requests  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: In some cases, Microsoft Exchange Autodiscover service requests can\n  be \"noisy\", triggering large numbers of HTTP 404 (Not found) errors.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-ms-exchange-autodiscover/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-ms-exchange-autodiscover/index.md\n---\n\nIn some cases, Microsoft Exchange Autodiscover service requests can be \"noisy\", triggering large numbers of `HTTP 404` (`Not found`) errors.\n\nThis example custom rule blocks requests for `autodiscover.xml` and `autodiscover.src`:\n\n* **Expression**: `(ends_with(http.request.uri.path, \"/autodiscover.xml\") or ends_with(http.request.uri.path, \"/autodiscover.src\"))`\n* **Action**: *Block*\n\nAlternatively, customers on a Business or Enterprise plan can use the `matches` [comparison operator](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/#comparison-operators) for the same purpose. For this example, the expression would be the following:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Block traffic from specific countries  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: This example custom rule blocks requests based on country code\n  using the ip.src.country field.\nlastUpdated: 2025-07-14T16:11:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-traffic-from-specific-countries/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/block-traffic-from-specific-countries/index.md\n---\n\nThis example custom rule blocks requests based on country code using the [`ip.src.country`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/ip.src.country/) field.\n\n* **Expression**: `(ip.src.country in {\"KP\" \"SY\"})`\n* **Action**: *Block*\n\n## Other resources\n\n* [Use case: Block traffic by geographical location](https://developers.cloudflare.com/waf/custom-rules/use-cases/block-by-geographical-location/)\n* [Use case: Allow traffic from specific countries only](https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-specific-countries/)\n\n</page>\n\n<page>\n---\ntitle: Challenge bad bots  Cloudflare Web Application Firewall (WAF) docs\ndescription: Cloudflare's Bot Management feature scores the likelihood that a\n  request originates from a bot.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/challenge-bad-bots/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/challenge-bad-bots/index.md\n---\n\nCloudflare's Bot Management feature scores the likelihood that a request originates from a bot.\n\nNote\n\nAccess to [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/) requires a Cloudflare Enterprise plan with Bot Management enabled.\n\nBot score ranges from 1 through 99. A low score indicates the request comes from a script, API service, or an automated agent. A high score indicates that a human issued the request from a standard desktop or mobile web browser.\n\nThese examples use:\n\n* [`cf.bot_management.score`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.score/) to target requests from bots\n* [`cf.bot_management.verified_bot`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.verified_bot/) to identify requests from [known good bots](https://radar.cloudflare.com/verified-bots)\n* [`cf.bot_management.ja3_hash`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.ja3_hash/) to target specific [JA3 Fingerprints](https://developers.cloudflare.com/bots/additional-configurations/ja3-ja4-fingerprint/)\n\n## Suggested rules\n\nFor best results:\n\n* Use [Bot Analytics](https://developers.cloudflare.com/bots/bot-analytics/#enterprise-bot-management) to learn about your traffic before applying rules.\n* Start small and increase your bot threshold over time.\n\nYour rules may also vary based on the [nature of your site](https://developers.cloudflare.com/bots/get-started/bot-management/) and your tolerance for false positives.\n\n### General protection\n\nThe following three custom rules provide baseline protection against malicious bots:\n\n**Rule 1:**\n\n* **Expression**: `(cf.bot_management.verified_bot)`\n* **Action**: *Skip:*\n  * *All remaining custom rules*\n\n**Rule 2:**\n\n* **Expression**: `(cf.bot_management.score eq 1)`\n* **Action**: *Block*\n\n**Rule 3:**\n\n* **Expression**: `(cf.bot_management.score gt 1 and cf.bot_management.score lt 30)`\n* **Action**: *Managed Challenge*\n\n### Specific protection for browser, API, and mobile traffic\n\n#### Protect browser endpoints\n\nWhen a request is definitely automated (score of 1) or likely automated (scores 2 through 29) and is *not* on the list of known good bots, Cloudflare blocks the request.\n\n* **Expression**: `(cf.bot_management.score lt 30 and not cf.bot_management.verified_bot)`\n* **Action**: *Block*\n\n#### Exempt API traffic\n\nSince Bot Management detects automated users, you need to explicitly allow your **good** automated traffic  this includes your [APIs](https://www.cloudflare.com/learning/security/api/what-is-an-api/) and partner APIs.\n\nThis example offers the same protection as the browser-only rule, but allows automated traffic to your API.\n\n* **Expression**: `(cf.bot_management.score lt 30 and not cf.bot_management.verified_bot and not starts_with(http.request.uri.path, \"/api\"))`\n* **Action**: *Block*\n\n#### Adjust for mobile traffic\n\nSince Bot Management can be more sensitive to mobile traffic, you may want to add in additional logic to avoid blocking legitimate requests.\n\nIf you are handling requests from your own mobile application, you could potentially allow it based on its specific [JA3 fingerprint](https://developers.cloudflare.com/bots/additional-configurations/ja3-ja4-fingerprint/).\n\n* **Expression**: `(cf.bot_management.ja3_hash eq \"df669e7ea913f1ac0c0cce9a201a2ec1\")`\n* **Action**: *Skip:*\n  * *All remaining custom rules*\n\nOtherwise, you could set lower thresholds for mobile traffic. The following rules would block definitely automated mobile traffic and challenge likely automated traffic.\n\n**Rule 1:**\n\n* **Expression**: `(cf.bot_management.score lt 2 and http.user_agent contains \"App_Name 2.0\")`\n* **Action**: *Block*\n\n**Rule 2:**\n\n* **Expression**: `(cf.bot_management.score lt 30 and http.user_agent contains \"App_Name 2.0\")`\n* **Action**: *Managed Challenge*\n\n#### Combine the different rules\n\nIf your domain handles mobile, browser, and API traffic, you would want to arrange these example rules in the following order:\n\n* Rule for [API traffic](#exempt-api-traffic)\n* Rule(s) for [mobile traffic](#adjust-for-mobile-traffic)\n* Rule for [browser traffic](#protect-browser-endpoints)\n\n### Static resource protection\n\nStatic resources are protected by default when you create custom rules using the `cf.bot_management.score` field.\n\nTo exclude static resources, include `not (cf.bot_management.static_resource)` in your rule expression. For details, refer to [Static resource protection](https://developers.cloudflare.com/bots/additional-configurations/static-resources/).\n\n### Additional considerations\n\nFrom there, you could customize your custom rules based on specific request paths (`/login` or `/signup`), common traffic patterns, or many other characteristics.\n\nMake sure you review [Bot Analytics](https://developers.cloudflare.com/bots/bot-analytics/#enterprise-bot-management) and [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/) to check if your rules need more tuning.\n\n***\n\n## Other resources\n\n* [Use case: Allow traffic from verified bots](https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-verified-bots/)\n* [Tutorial: Integrate Turnstile, WAF, and Bot Management](https://developers.cloudflare.com/turnstile/tutorials/integrating-turnstile-waf-and-bot-management/)\n\n</page>\n\n<page>\n---\ntitle: Issue challenge for admin user in JWT claim based on attack score \n  Cloudflare Web Application Firewall (WAF) docs\ndescription: This example configures additional protection for requests with a\n  JSON Web Token (JWT) with a user claim of admin, based on the request's attack\n  score.\nlastUpdated: 2025-06-18T23:38:41.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/check-jwt-claim-to-protect-admin-user/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/check-jwt-claim-to-protect-admin-user/index.md\n---\n\nNote\n\nTo use claims inside a JSON Web Token (JWT), you must first set up a [token validation configuration](https://developers.cloudflare.com/api-shield/security/jwt-validation/api/) in API Shield.\n\nThis example configures additional protection for requests with a JSON Web Token (JWT) with a user claim of `admin`, based on the request's [attack score](https://developers.cloudflare.com/waf/detections/attack-score/).\n\nCreate a custom rule that issues a Managed Challenge if the user claim in a JWT is `admin` and the attack score is below 40.\n\n* **Expression**: `(lookup_json_string(http.request.jwt.claims[\"<TOKEN_CONFIGURATION_ID>\"][0], \"user\") eq \"admin\" and cf.waf.score < 40)`\n* **Action**: *Managed Challenge*\n\nIn this example, `<TOKEN_CONFIGURATION_ID>` is your [token configuration ID](https://developers.cloudflare.com/api-shield/security/jwt-validation/api/) found in JWT Validation and `user` is the JWT claim.\n\n</page>\n\n<page>\n---\ntitle: Configure token authentication  Cloudflare Web Application Firewall (WAF) docs\ndescription: Token authentication allows you to restrict access to documents,\n  files, and media to select users without requiring them to register. This\n  helps protect paid/restricted content from leeching and unauthorized sharing.\nlastUpdated: 2025-08-27T15:14:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/configure-token-authentication/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/configure-token-authentication/index.md\n---\n\nToken authentication allows you to restrict access to documents, files, and media to select users without requiring them to register. This helps protect paid/restricted content from leeching and unauthorized sharing.\n\nThere are two options to configure token authentication: via Cloudflare Workers or via custom rules.\n\n## Option 1: Configure using Cloudflare Workers\n\nRefer to the following Cloudflare Workers resources for two different implementations of token authentication:\n\n* The [Sign requests](https://developers.cloudflare.com/workers/examples/signing-requests/) example.\n* The [Auth with headers](https://developers.cloudflare.com/workers/examples/auth-with-headers/) template.\n\nTo get started with Workers, refer to [Configure a Worker](https://developers.cloudflare.com/workers/get-started/quickstarts/).\n\nNote\n\nThe code provided in the [Sign requests](https://developers.cloudflare.com/workers/examples/signing-requests/) example is compatible with the `is_timed_hmac_valid_v0()` function used in [Option 2](#option-2-configure-using-custom-rules). This means that you can verify requests signed by the example Worker script using a custom rule.\n\n## Option 2: Configure using custom rules\n\nUse the Rules language [`is_timed_hmac_valid_v0()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#hmac-validation) HMAC validation function to validate hash-based message authentication code (HMAC) tokens in a custom rule expression.\n\nNote\n\nAccess to the `is_timed_hmac_valid_v0()` HMAC validation function requires a Cloudflare Pro, Business, or Enterprise plan.\n\nTo validate token authentication, [create a custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) with a call to the `is_timed_hmac_valid_v0()` function in the rule expression. You can use an action such as *Block*.\n\n### Example rule\n\nThis example illustrates a rule that blocks any visitor that does not pass HMAC key validation on a specific hostname and URL path. Details required for token authentication include:\n\n* The secret key for generating and validating the HMAC (for example, `mysecrettoken`)\n* The path you wish to authenticate (for example, `downloads.example.com/images/cat.jpg`)\n* The name of the query string parameter containing the token (for example, `verify`)\n* The token lifetime in seconds (for example, 3 hours = 10,800 seconds)\n\nConsider the following example URL:",
      "language": "unknown"
    },
    {
      "code": "Where:\n\n* `/images/cat.jpg` represents the path to the asset  the HMAC message to authenticate.\n* `?verify=` is the separator between the path to the asset and the timestamp when the HMAC token was issued.\n* `1484063787` represents the timestamp when the token was issued, expressed as UNIX time in seconds.\n* `9JQB8vP1z0yc5DEBnH6JGWM3mBmvIeMrnnxFi3WtJLE%3D` is a Base64-encoded MAC.\n\nWarning\n\nWhen you do not use the optional `flags` argument for `is_timed_hmac_valid_v0()`, you must URL encode the Base64-encoded MAC value. For more information, refer to [HMAC validation](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#hmac-validation).\n\nThe expression for the custom rule would be similar to the following:",
      "language": "unknown"
    },
    {
      "code": "The components of this example custom rule (using the previous example URL) include:\n\n* Token secret key = `mysecrettoken`\n* Token lifetime = `10800` (10,800 seconds = 3 hours)\n* `http.request.uri` = `/images/cat.jpg?verify=1484063787-9JQB8vP1z0yc5DEBnH6JGWM3mBmvIeMrnnxFi3WtJLE%3D`\n* `http.request.timestamp.sec` = `1484071925` (for example)\n* Separator length: `len(\"?verify=\")` = `8`\n\nThe [`is_timed_hmac_valid_v0()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#hmac-validation) function compares the value of a MAC generated using the `mysecrettoken` secret key to the value encoded in `http.request.uri`.\n\nIf the MAC values match and if the token has not expired yet, according to the following formula:",
      "language": "unknown"
    },
    {
      "code": "Then the token is valid and the `is_timed_hmac_valid_v0()` function returns `true`.\n\n***\n\n## HMAC token generation\n\nThe following examples show how you could generate tokens at your origin server for the path validated using the custom rule described in the previous section:\n\n* Python 3.8",
      "language": "unknown"
    },
    {
      "code": "* Python 2.7",
      "language": "unknown"
    },
    {
      "code": "* PHP",
      "language": "unknown"
    },
    {
      "code": "* Workers\n\n  For a full example in JavaScript (JS) or TypeScript (TS), refer to the [Sign requests](https://developers.cloudflare.com/workers/examples/signing-requests/) example in the Workers documentation.\n\n  Since the example JS/TS implementation is compatible with `is_timed_hmac_valid_v0()` function, requests authenticated using the provided source code can be verified with a WAF custom rule and the `is_timed_hmac_valid_v0()` function.\n\nThis will generate a URL parameter such as the following:",
      "language": "unknown"
    },
    {
      "code": "You will need to append this parameter to the URL you are protecting:",
      "language": "unknown"
    },
    {
      "code": "Warning\n\nThe authentication token parameter (`verify=<VALUE>` in the example) must be the last parameter in the query string.\n\n### Test the generated token parameter\n\nIf you are on an Enterprise plan, you can test if URLs are being generated correctly on the origin server by doing the following:\n\n1. Set the custom rule action to *Log*.\n2. Check the sampled logs in [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/).\n\n***\n\n## Protect several paths using the same secret\n\nYou can use the same secret key to protect several URI paths.\n\nThis is illustrated in the previous example, where `http.request.uri` is passed as the [`MessageMAC`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#messagemac) argument to the validation function.\n\nSince `http.request.uri` includes the path to the asset and that value is extracted for each request, the validation function evaluates all request URIs to `downloads.example.com` using the same secret key.\n\nNote that while you can use the same secret key to authenticate several paths, you must generate an HMAC token for each unique message you want to authenticate.\n\n## Protect an entire URI path prefix with a single signature\n\nYou can protect an entire fixed-length URI path prefix with a single HMAC signature (it would also use the same secret). To achieve this, supply a URI path prefix (instead of the full URI path) and the original query string as the [`MessageMAC`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#messagemac) argument for the [`is_timed_hmac_valid_v0()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#hmac-validation) function.\n\nUse the [`substring()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#substring) function to obtain the prefix from the full URI path.\n\nIn the following example, the URI path prefix requiring a single HMAC signature is always 51 characters long (`x` is a character placeholder):",
      "language": "unknown"
    },
    {
      "code": "In this case, you would need to use a different HMAC signature for every different URI path prefix of length 51.\n\nIf you wanted to block requests for case study files failing the HMAC validation, you could create a custom rule similar to the following:\n\nRule expression:",
      "language": "unknown"
    },
    {
      "code": "Action:\n\n* Block\n\nExample URI paths of valid incoming requests:",
      "language": "unknown"
    },
    {
      "code": "The first two URI paths can use the same HMAC signature because they share the same 51-character prefix (`/case-studies/12345678-90ab-4cde-f012-3456789abcde/`) that is validated by the custom rule.\n\nThe third URI path needs a different HMAC signature, since the prefix is different.\n\n</page>\n\n<page>\n---\ntitle: Exempt partners from Hotlink Protection  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: When enabled, Cloudflare Hotlink Protection blocks all HTTP\n  referrers that are not part of your domain or zone. That presents a problem if\n  you allow partners to use inline links to your assets.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/exempt-partners-hotlink-protection/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/exempt-partners-hotlink-protection/index.md\n---\n\nWhen enabled, [Cloudflare Hotlink Protection](https://developers.cloudflare.com/waf/tools/scrape-shield/hotlink-protection/) blocks all HTTP referrers that are not part of your domain or zone. That presents a problem if you allow partners to use inline links to your assets.\n\n## Allow requests from partners using custom rules\n\nYou can use custom rules to protect against hotlinking while allowing inline links from your partners. In this case, you will need to disable [Hotlink Protection](https://developers.cloudflare.com/waf/tools/scrape-shield/hotlink-protection/) within the **Scrape Shield** app so that partner referrals are not blocked by that feature.\n\nThis example custom rule uses the [`http.referer`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.referer/) field to target HTTP referrals from partner sites.\n\nThe `not` operator matches HTTP referrals that are not from partner sites, and the action blocks them:\n\n* **Expression**: `not (http.referer contains \"example.com\" or http.referer eq \"www.example.net\" or http.referer eq \"www.cloudflare.com\")`\n* **Action**: *Block*\n\n## Allow requests from partners using Configuration Rules\n\nAlternatively, you can [create a configuration rule](https://developers.cloudflare.com/rules/configuration-rules/create-dashboard/) to exclude HTTP referrals from partner sites from Hotlink Protection. In this case, you would keep the Hotlink Protection feature enabled.\n\n</page>\n\n<page>\n---\ntitle: Require a specific cookie  Cloudflare Web Application Firewall (WAF) docs\ndescription: To secure a sensitive area such as a development area, you can\n  share a cookie with trusted individuals and then filter requests so that only\n  users with that cookie can access your site.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/require-specific-cookie/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/require-specific-cookie/index.md\n---\n\nTo secure a sensitive area such as a development area, you can share a cookie with trusted individuals and then filter requests so that only users with that cookie can access your site.\n\nUse the [`http.cookie`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.cookie/) field to target requests based on the presence of a specific cookie.\n\nThis example comprises two custom rules:\n\n* The first rule targets requests to `dev.www.example.com` that have a specific cookie key, `devaccess`. As long as the value of the cookie key contains one of three authorized users  `james`, `matt`, or `michael`  the expression matches and the request is allowed, skipping all other custom rules.\n* The second rule blocks all access to `dev.www.example.com`.\n\nSince custom rules are evaluated in order, Cloudflare grants access to requests that satisfy rule 1 and blocks all other requests to `dev.www.example.com`:\n\n**Rule 1:**\n\n* **Expression**: `(http.cookie contains \"devaccess=james\" or http.cookie contains \"devaccess=matt\" or http.cookie contains \"devaccess=michael\") and http.host eq \"dev.www.example.com\"`\n* **Action**: *Skip:*\n  * *All remaining custom rules*\n\n**Rule 2:**\n\n* **Expression**: `(http.host eq \"dev.www.example.com\")`\n* **Action**: *Block*\n\n</page>\n\n<page>\n---\ntitle: Require specific HTTP headers  Cloudflare Web Application Firewall (WAF) docs\ndescription: Many organizations qualify traffic based on the presence of\n  specific HTTP request headers. Use the Rules language HTTP request header\n  fields to target requests with specific headers.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/require-specific-headers/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/require-specific-headers/index.md\n---\n\nMany organizations qualify traffic based on the presence of specific HTTP request headers. Use the Rules language [HTTP request header fields](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/?field-category=Headers\\&search-term=http.request) to target requests with specific headers.\n\n## Example 1: Require presence of HTTP header\n\nThis example custom rule uses the [`http.request.headers.names`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.headers.names/) field to look for the presence of an `X-CSRF-Token` header. The [`lower()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lower) transformation function converts the header name to lowercase so that the expression is case-insensitive.\n\nWhen the `X-CSRF-Token` header is missing, Cloudflare blocks the request.\n\n* **Expression**: `not any(lower(http.request.headers.names[*])[*] eq \"x-csrf-token\") and (http.request.full_uri eq \"https://www.example.com/somepath\")`\n* **Action**: *Block*\n\n## Example 2: Require HTTP header with a specific value\n\nThis example custom rule uses the [`http.request.headers`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.headers/) field to look for the presence of the `X-Example-Header` header and to get its value (if any). When the `X-Example-Header` header is missing or it does not have the value `example-value`, Cloudflare blocks the request.\n\n* **Expression**: `not any(http.request.headers[\"x-example-header\"][*] eq \"example-value\") and (http.request.uri.path eq \"/somepath\")`\n* **Action**: *Block*\n\nThe keys in the `http.request.headers` field, corresponding to HTTP header names, are in lowercase.\n\nIn this example the header name is case-insensitive, but the header value is case-sensitive.\n\n</page>\n\n<page>\n---\ntitle: Build a sequence rule within custom rules  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: You can build an API sequence rule via the Cloudflare dashboard.\nlastUpdated: 2025-07-21T16:38:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/sequence-custom-rules/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/sequence-custom-rules/index.md\n---\n\nYou can build an [API sequence rule](https://developers.cloudflare.com/api-shield/security/sequence-mitigation/custom-rules/) via the Cloudflare dashboard.\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n\n  2. Go to **Security** > **WAF** > **Custom rules**.\n\n  3. To create a new empty rule, select **Create rule**.\n\n  4. Enter a descriptive name for the rule in **Rule name**.\n\n  5. Under **When incoming requests match**, use the **Field** drop-down list and select:\n\n     * Current Operation\n     * Previous Operations\n     * Elapsed time\n\n  6. Under **Value**, build a sequence by selecting a hostname for the sequence.\n\n  7. Select the checkbox for each endpoint in the order that you want them to appear in the sequence.\n\n  8. Set the time to complete.\n\n  9. Select **Save**.\n\n  10. Under **Then take action**, select the rule action in the **Choose action** dropdown. For example, selecting *Block* tells Cloudflare to refuse requests that match the conditions you specified.\n\n  11. (Optional) If you selected the *Block* action, you can configure a custom response.\n\n  12. Under **Place at**, select the order of when the rule will fire.\n\n  13. To save and deploy your rule, select **Deploy**. If you are not ready to deploy your rule, select **Save as Draft**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n     [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n  2. To create a new empty rule, select **Create rule** > **Custom rules**.\n\n  3. Enter a descriptive name for the rule in **Rule name**.\n\n  4. Under **When incoming requests match**, use the **Field** drop-down list to filter by **Sequences** and select from:\n\n     * Current Operation\n     * Previous Operations\n     * Elapsed time\n\n  5. Under **Value**, select the edit icon to use Builder and build a sequence on the side panel.\n\n  6. Under **Select a hostname for this sequence**, choose all or a specific hostname from the dropdown list. Optionally, you can use the search bar to search for a specific hostname.\n\n  7. From the **Methods** dropdown list, choose all methods or a specific request method.\n\n  8. Select the checkbox for each endpoint in the order that you want them to appear in the sequence.\n\n  9. Set the time to complete.\n\n  10. Select **Save**.\n\n  11. Under **Then take action**, select the rule action in the **Choose action** dropdown. For example, selecting *Block* tells Cloudflare to refuse requests that match the conditions you specified.\n\n  12. (Optional) If you selected the *Block* action, you can configure a custom response.\n\n  13. Under **Place at**, select the order of when the rule will fire.\n\n  14. To save and deploy your rule, select **Deploy**. If you are not ready to deploy your rule, select **Save as Draft**.\n\n  Note\n\n  The fields in the custom rule are populated as a grouped sequence based on the values that you entered on Builder.\n\n</page>\n\n<page>\n---\ntitle: Require specific HTTP ports  Cloudflare Web Application Firewall (WAF) docs\ndescription: By default, Cloudflare allows requests on a number of different HTTP ports.\nlastUpdated: 2025-08-20T20:59:04.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/require-specific-http-ports/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/require-specific-http-ports/index.md\n---\n\nBy default, Cloudflare allows requests on a [number of different HTTP ports](https://developers.cloudflare.com/fundamentals/reference/network-ports/).\n\nYou can target requests based on their HTTP port with the [`cf.edge.server_port`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.edge.server_port/) field. Use the `in` [comparison operator](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/#comparison-operators) to target a set of ports.\n\nThis example custom rule blocks requests to `www.example.com` that are not on ports `80` or `443`:\n\n* **Expression**: `(http.host eq \"www.example.com\" and not cf.edge.server_port in {80 443})`\n* **Action**: *Block*\n\nOpen server ports and blocked traffic\n\nDue to the nature of Cloudflare's anycast network, ports other than `80` and `443` will be open so that Cloudflare can serve traffic for other customers on these ports. In general, Cloudflare makes available several different products on [Cloudflare IPs](https://www.cloudflare.com/ips), so you can expect tools like Netcat and security scanners to report these non-standard ports as open in specific conditions. If you have questions on security compliance, review [Cloudflare's certifications and compliance resources](https://www.cloudflare.com/en-gb/trust-hub/compliance-resources/) and contact your Cloudflare enterprise account manager for more information.\n\nCustom rules and WAF Managed Rules can block traffic at the application layer (layer 7 in the [OSI model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/)), preventing HTTP/HTTPS requests over non-standard ports from reaching the origin server.\n\n</page>\n\n<page>\n---\ntitle: Require known IP addresses in site admin area  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: If an attack compromises the administrative area of your website,\n  the consequences can be severe. With custom rules, you can protect your site's\n  admin area by blocking requests for access to admin paths that do not come\n  from a known IP address.\nlastUpdated: 2025-12-19T14:56:22.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/site-admin-only-known-ips/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/site-admin-only-known-ips/index.md\n---\n\nIf an attack compromises the administrative area of your website, the consequences can be severe. With custom rules, you can protect your site's admin area by blocking requests for access to admin paths that do not come from a known IP address.\n\nThis example [custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) limits access to the WordPress admin area, `/wp-admin/`, by blocking requests that do not originate from a specified set of IP addresses:\n\n* **When incoming requests match**:\n\n  | Field | Operator | Value | |\n  | - | - | - | - |\n  | IP Source Address | is not in | `10.20.30.40` `192.168.1.0/24` | And |\n  | URI Path | wildcard | `/wp-admin/*` | |\n\n  If you are using the Expression Editor:\\\n  `(not ip.src in {10.20.30.40 192.168.1.0/24} and http.request.uri.path wildcard \"/wp-admin/*\")`\n\n* **Action**: *Block*\n\n## Other resources\n\n* [Use case: Allow traffic from IP addresses in allowlist only](https://developers.cloudflare.com/waf/custom-rules/use-cases/allow-traffic-from-ips-in-allowlist/)\n\n</page>\n\n<page>\n---\ntitle: Stop R-U-Dead-Yet? (R.U.D.Y.) attacks  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: R-U-Dead-Yet (R.U.D.Y.) attacks accomplish denial of service (DoS)\n  by submitting long form fields. Use custom rules to stop these attacks by\n  blocking requests that do not have a legitimate session cookie.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/stop-rudy-attacks/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/stop-rudy-attacks/index.md\n---\n\nR-U-Dead-Yet (R.U.D.Y.) attacks accomplish denial of service (DoS) by submitting long form fields. Use custom rules to stop these attacks by blocking requests that do not have a legitimate session cookie.\n\nThis example combines three expressions to target HTTP `POST` requests that do not contain a legitimate authenticated session cookie:\n\n* The first expression uses the [`http.request.uri.path`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.uri.path/) field to target the paths to secure from R.U.D.Y.:",
      "language": "unknown"
    },
    {
      "code": "* The second uses a regular expression to match the format of a legitimate `auth_session` cookie. The `not` operator targets requests where that cookie is not formatted correctly:",
      "language": "unknown"
    },
    {
      "code": "* The third expression targets HTTP `POST` requests:",
      "language": "unknown"
    },
    {
      "code": "To generate the final custom rule expression for this example, the three expressions are combined into a compound expression using the `and` operator. When an HTTP `POST` request to any of the specified URIs does not contain a properly formatted `auth_session` cookie, Cloudflare blocks the request:\n\n* **Expression**: `(http.request.method eq \"POST\" and http.request.uri.path matches \"(comment|conversation|event|poll)/create\" and not http.cookie matches \"auth_session=[0-9a-zA-Z]{32}-[0-9]{10}-[0-9a-z]{6}\")`\n* **Action**: *Block*\n\nNote\n\nThe [`matches`](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/#comparison-operators) operator requires a Cloudflare Business or Enterprise plan.\n\n</page>\n\n<page>\n---\ntitle: Update custom rules for customers or partners  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: You may want to adjust your custom rules to increase access by\n  customers or partners.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/custom-rules/use-cases/update-rules-customers-partners/\n  md: https://developers.cloudflare.com/waf/custom-rules/use-cases/update-rules-customers-partners/index.md\n---\n\nYou may want to adjust your custom rules to increase access by customers or partners.\n\nPotential examples include:\n\n* Removing rate limiting for an API\n* Sharing brand assets and marketing materials\n\nWarning\n\nThe example custom rules in this page can bypass Cloudflare's security features and are generally not recommended. Use with caution.\n\n## Use ASN in custom rules\n\nIf a customer or partner is large enough, you could set up a custom rule based on an [autonomous system number (ASN)](https://www.cloudflare.com/learning/network-layer/what-is-an-autonomous-system/).\n\n### Allow traffic by ASN\n\nThis example uses:\n\n* The [`ip.src.asnum`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/ip.src.asnum/) field to specify the general region.\n* The [`cf.bot_management.score`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.score/) field to ensure partner traffic does not come from bots.\n\nExample custom rule:\n\n* **Expression**: `(ip.src.asnum eq 64496 and cf.bot_management.score gt 30)`\n* **Action**: *Skip:*\n  * *All remaining custom rules*\n\nNote\n\nAccess to [Bot Management](https://developers.cloudflare.com/bots/plans/bm-subscription/) requires a Cloudflare Enterprise plan with Bot Management.\n\n### Adjust rules by ASN\n\nThis example custom rule uses:\n\n* The [`ip.src.asnum`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/ip.src.asnum/) field to specify the general region.\n* The [`cf.bot_management.score`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.score/) field to check if the request comes from a human.\n\nIf a request meets these criteria, the custom rule will skip [User Agent Blocking](https://developers.cloudflare.com/waf/tools/user-agent-blocking/) rules.\n\n* **Expression**: `(ip.src.asnum eq 64496 and cf.bot_management.score gt 50)`\n* **Action**: *Skip:*\n  * *User Agent Blocking*\n\n## Use IP addresses in custom rules\n\nFor smaller organizations, you could set up custom rules based on IP addresses.\n\n### Allow traffic by IP address\n\nThis example:\n\n* Specifies the source IP address and the host.\n* Uses the [`cf.bot_management.score`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.bot_management.score/) field to ensure requests are not high-risk traffic.\n\nExample custom rule:\n\n* **Expression**: `(ip.src eq 203.0.113.1 and http.host eq \"example.com\" and cf.bot_management.score gt 30)`\n* **Action**: *Skip:*\n  * *All remaining custom rules*\n\n### Adjust rules by IP address\n\nThis example custom rule specifies the source IP address and the host.\n\nIf a request meets these criteria, the custom rule will skip [rate limiting rules](https://developers.cloudflare.com/waf/rate-limiting-rules/).\n\n* **Expression**: `(ip.src eq 203.0.113.1 and http.host eq \"example.com\")`\n* **Action**: *Skip:*\n  * *All remaining custom rules*\n\n</page>\n\n<page>\n---\ntitle: Example mitigation rules  Cloudflare Web Application Firewall (WAF) docs\ndescription: \"The following example custom rule will block requests with an LLM\n  prompt that tries to obtain PII of a specific category:\"\nlastUpdated: 2025-11-06T19:39:43.000Z\nchatbotDeprioritize: false\ntags: AI\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/firewall-for-ai/example-rules/\n  md: https://developers.cloudflare.com/waf/detections/firewall-for-ai/example-rules/index.md\n---\n\n## Block requests with specific PII category in LLM prompt\n\nThe following example [custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) will block requests with an LLM prompt that tries to obtain PII of a specific [category](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.pii_categories/):\n\n* **When incoming requests match**:\n\n  | Field | Operator | Value |\n  | - | - | - |\n  | LLM PII Categories | is in | `Credit Card` |\n\n  If you use the Expression Editor, enter the following expression:\\\n  `(any(cf.llm.prompt.pii_categories[*] in {\"CREDIT_CARD\"}))`\n\n* **Action**: *Block*\n\n## Block requests with specific unsafe content categories in LLM prompt\n\nThe following example [custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) will block requests with an LLM prompt containing unsafe content of specific [categories](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.unsafe_topic_categories/):\n\n* **When incoming requests match**:\n\n  | Field | Operator | Value |\n  | - | - | - |\n  | LLM Unsafe topic categories | is in | `S1: Violent Crimes` `S10: Hate` |\n\n  If you use the Expression Editor, enter the following expression:\\\n  `(any(cf.llm.prompt.unsafe_topic_categories[*] in {\"S1\" \"S10\"}))`\n\n* **Action**: *Block*\n\n## Block requests with prompt injection attempt in LLM prompt\n\nThe following example [custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) will block requests with an [injection score](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.injection_score/) below `20`. Using a low injection score value in the rule helps avoid false positives.\n\n* **When incoming requests match**:\n\n  | Field | Operator | Value |\n  | - | - | - |\n  | LLM Injection score | less than | `20` |\n\n  If you use the Expression Editor, enter the following expression:\\\n  `(cf.llm.prompt.injection_score < 20)`\n\n* **Action**: *Block*\n\n</page>\n\n<page>\n---\ntitle: Get started with Firewall for AI  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: Once you have onboarded your domain to Cloudflare and some API\n  traffic has already been proxied by Cloudflare, the Cloudflare dashboard will\n  start showing discovered endpoints.\nlastUpdated: 2025-11-06T19:39:43.000Z\nchatbotDeprioritize: false\ntags: AI\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/firewall-for-ai/get-started/\n  md: https://developers.cloudflare.com/waf/detections/firewall-for-ai/get-started/index.md\n---\n\n## 1. Turn on Firewall for AI\n\n* New dashboard\n\n  Note\n\n  Firewall for AI is only available in the new [application security dashboard](https://developers.cloudflare.com/security/).\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detection tools**.\n\n  3. Turn on **Firewall for AI**.\n\n* API\n\n  Enable the feature using a `PUT` request similar to the following:",
      "language": "unknown"
    },
    {
      "code": "## 2. Save or add an LLM-related endpoint\n\nOnce you have [onboarded your domain](https://developers.cloudflare.com/fundamentals/manage-domains/add-site/) to Cloudflare and some API traffic has already been [proxied by Cloudflare](https://developers.cloudflare.com/dns/proxy-status/), the Cloudflare dashboard will start showing [discovered endpoints](https://developers.cloudflare.com/api-shield/security/api-discovery/).\n\nSave the relevant endpoint receiving LLM-related traffic to [Endpoint Management](https://developers.cloudflare.com/api-shield/management-and-monitoring/endpoint-management/) once it has been discovered, or add the endpoint manually.\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/login), and select your account and domain.\n  2. Go to **Security** > **API Shield**.\n  3. Go to the **Discovery** tab.\n  4. Find the endpoint receiving requests with LLM prompts in the list and select **Save** next to the endpoint.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Web assets** page.\n\n     [Go to **Web assets**](https://dash.cloudflare.com/?to=/:account/:zone/security/web-assets)\n\n  2. Go to the **Discovery** tab.\n\n  3. Find the endpoint receiving requests with LLM prompts in the list and select **Save** next to the endpoint.\n\nIf you did not find the endpoint in the **Discovery** tab, you can add it manually:\n\n* Old dashboard\n\n  1. Go to the **Endpoint Management** tab.\n  2. Select **Add endpoints** > **Manually add**.\n  3. Choose the method from the dropdown menu and add the path and hostname for the endpoint.\n  4. Select **Add endpoints**.\n\n* New dashboard\n\n  1. Go to the **Endpoints** tab.\n  2. Select **Add endpoints** > **Manually add**.\n  3. Choose the method from the dropdown menu and add the path and hostname for the endpoint.\n  4. Select **Add endpoints**.\n\nIn the context of this guide, consider an example endpoint with the following properties:\n\n* Method: `POST`\n* Path: `/v1/messages`\n* Hostname: `<YOUR_HOSTNAME>`\n\n## 3. Add `cf-llm` label to endpoint\n\nYou must [label endpoints](https://developers.cloudflare.com/api-shield/management-and-monitoring/endpoint-labels/) with the `cf-llm` label so that Firewall for AI starts scanning incoming requests for malicious LLM prompts.\n\nAdd the `cf-llm` label to the endpoint you added:\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n  2. Go to **Security** > **API Shield**.\n  3. In the **Endpoint Management** tab, choose the endpoint that you want to label.\n  4. Select **Edit labels**.\n  5. Add the `cf-llm` label to the endpoint.\n  6. Select **Save labels**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Web assets** page.\n\n     [Go to **Web assets**](https://dash.cloudflare.com/?to=/:account/:zone/security/web-assets)\n\n  2. In the **Endpoints** tab, choose the endpoint that you want to label.\n\n  3. Select **Edit endpoint labels**.\n\n  4. Add the `cf-llm` label to the endpoint.\n\n  5. Select **Save labels**.\n\nOnce you add a label to the endpoint, Cloudflare will start labeling incoming traffic for the endpoint with the label you selected.\n\n## 4. (Optional) Generate API traffic\n\nYou may need to issue some `POST` requests to the endpoint so that there is some labeled traffic to review in the following step.\n\nFor example, the following command sends a `POST` request to the API endpoint you previously added (`/v1/messages` in this example) in your zone with an LLM prompt requesting PII:",
      "language": "unknown"
    },
    {
      "code": "The PII category for this request would be `EMAIL_ADDRESS`.\n\n## 5. Review labeled traffic and detection behavior\n\nUse [Security Analytics](https://developers.cloudflare.com/waf/analytics/security-analytics/) in the new application security dashboard to validate that Cloudflare is correctly labeling traffic for the endpoint.\n\n1. In the Cloudflare dashboard, go to the **Analytics** page.\n\n   [Go to **Analytics**](https://dash.cloudflare.com/?to=/:account/:zone/security/analytics)\n\n2. Filter data by the `cf-llm` managed endpoint label.\n\n   | Field | Operator | Value |\n   | - | - | - |\n   | Managed Endpoint Label | equals | `cf-llm` |\n\n3. Review the detection results on your traffic. Expand each line in **Sampled logs** and check the values in the **Analyses** column. Most of the incoming traffic will probably be clean (not harmful).\n\n4. Refine the displayed traffic by applying a second filter condition:\n\n   | Field | Operator | Value | |\n   | - | - | - | - |\n   | Managed Endpoint Label | equals | `cf-llm` | And |\n   | Has PII in LLM prompt | equals | Yes | |\n\n   The displayed logs now refer to incoming requests where personally identifiable information (PII) was detected in an LLM prompt.\n\nAlternatively, you can also create a custom rule with a *Log* action (only available on Enterprise plans) to check for potentially harmful traffic related to LLM prompts. This rule will generate [security events](https://developers.cloudflare.com/waf/analytics/security-events/) that will allow you to validate your Firewall for AI configuration.\n\n## 6. Mitigate harmful requests\n\n[Create a custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) that blocks requests where Cloudflare detected personally identifiable information (PII) in the incoming request (as part of an LLM prompt), returning a custom JSON body:\n\n* **When incoming requests match**:\n\n  | Field | Operator | Value |\n  | - | - | - |\n  | LLM PII Detected | equals | True |\n\n  If you use the Expression Editor, enter the following expression:\\\n  `(cf.llm.prompt.pii_detected)`\n\n* **Rule action**: Block\n\n* **With response type**: Custom JSON\n\n* **Response body**: `{ \"error\": \"Your request was blocked. Please rephrase your request.\" }`\n\nFor additional examples, refer to [Example mitigation rules](https://developers.cloudflare.com/waf/detections/firewall-for-ai/example-rules/). For a list of fields provided by Firewall for AI, refer to [Firewall for AI fields](https://developers.cloudflare.com/waf/detections/firewall-for-ai/fields/).\n\nCombine with other Rules language fields\n\nYou can combine the previous expression with other [fields](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/) and [functions](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/) of the Rules language. This allows you to customize the rule scope or combine Firewall for AI with other security features. For example:\n\n* The following expression will match requests with PII in an LLM prompt addressed to a specific host:\n\n  | Field | Operator | Value | Logic |\n  | - | - | - | - |\n  | LLM PII Detected | equals | True | And |\n  | Hostname | equals | `example.com` | |\n\n  Expression when using the editor:\\\n  `(cf.llm.prompt.pii_detected and http.host == \"example.com\")`\n\n* The following expression will match requests coming from bots that include PII in an LLM prompt:\n\n  | Field | Operator | Value | Logic |\n  | - | - | - | - |\n  | LLM PII Detected | equals | True | And |\n  | Bot Score | less than | `10` | |\n\n  Expression when using the editor:\\\n  `(cf.llm.prompt.pii_detected and cf.bot_management.score lt 10)`\n\n</page>\n\n<page>\n---\ntitle: Firewall for AI fields  Cloudflare Web Application Firewall (WAF) docs\ndescription: \"When enabled, Firewall for AI populates the following fields:\"\nlastUpdated: 2025-11-06T19:39:43.000Z\nchatbotDeprioritize: false\ntags: AI\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/firewall-for-ai/fields/\n  md: https://developers.cloudflare.com/waf/detections/firewall-for-ai/fields/index.md\n---\n\nWhen enabled, Firewall for AI populates the following fields:\n\n| Field | Description |\n| - | - |\n| LLM PII detected [`cf.llm.prompt.pii_detected`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.pii_detected/) Boolean | Indicates whether any personally identifiable information (PII) has been detected in the LLM prompt included in the request. |\n| LLM PII categories [`cf.llm.prompt.pii_categories`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.pii_categories/) Array\\<String> | Array of string values with the personally identifiable information (PII) categories found in the LLM prompt included in the request. [Category list](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.pii_categories/) |\n| LLM Content detected [`cf.llm.prompt.detected`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.detected/) Boolean | Indicates whether Cloudflare detected an LLM prompt in the incoming request. |\n| LLM Unsafe topic detected [`cf.llm.prompt.unsafe_topic_detected`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.unsafe_topic_detected/) Boolean | Indicates whether the incoming request includes any unsafe topic category in the LLM prompt. |\n| LLM Unsafe topic categories [`cf.llm.prompt.unsafe_topic_categories`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.unsafe_topic_categories/) Array\\<String> | Array of string values with the type of unsafe topics detected in the LLM prompt. [Category list](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.unsafe_topic_categories/) |\n| LLM Injection score [`cf.llm.prompt.injection_score`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.llm.prompt.injection_score/) Number | A score from 199 that represents the likelihood that the LLM prompt in the request is trying to perform a prompt injection attack. |\n\n</page>\n\n<page>\n---\ntitle: Common API calls  Cloudflare Web Application Firewall (WAF) docs\ndescription: The following examples address common scenarios of using the\n  Cloudflare API to manage and configure leaked credentials detection.\nlastUpdated: 2025-04-16T16:28:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/leaked-credentials/api-calls/\n  md: https://developers.cloudflare.com/waf/detections/leaked-credentials/api-calls/index.md\n---\n\nThe following examples address common scenarios of using the Cloudflare API to manage and configure leaked credentials detection.\n\nIf you are using Terraform, refer to [Terraform configuration examples](https://developers.cloudflare.com/waf/detections/leaked-credentials/terraform-examples/).\n\n## General operations\n\nThe following API examples cover basic operations such as enabling and disabling the leaked credentials detection.\n\n### Turn on leaked credentials detection\n\nTo turn on leaked credentials detection, use a `POST` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "### Turn off leaked credentials detection\n\nTo turn off leaked credentials detection, use a `POST` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "### Get status of leaked credentials detection\n\nTo obtain the current status of the leaked credentials detection, use a `GET` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## Custom detection location operations\n\nThe following API examples cover operations on [custom detection locations](https://developers.cloudflare.com/waf/detections/leaked-credentials/#custom-detection-locations) for leaked credentials detection.\n\n### Add a custom detection location\n\nTo add a custom detection location, use a `POST` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "### Get existing custom detection locations\n\nTo get a list of existing custom detection locations, use a `GET` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Delete a custom detection location\n\nTo delete a custom detection location, use a `DELETE` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Leaked credentials example mitigation rules  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: Examples of rules for mitigating requests containing leaked credentials.\nlastUpdated: 2025-07-09T14:24:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/leaked-credentials/examples/\n  md: https://developers.cloudflare.com/waf/detections/leaked-credentials/examples/index.md\n---\n\n## Rate limit suspicious logins with leaked credentials\n\nNote\n\nAccess to the `cf.waf.credential_check.username_and_password_leaked` field requires a Pro plan or above.\n\n[Create a rate limiting rule](https://developers.cloudflare.com/waf/rate-limiting-rules/create-zone-dashboard/) using [account takeover (ATO) detection](https://developers.cloudflare.com/bots/additional-configurations/detection-ids/#account-takeover-detections) and leaked credentials fields to limit volumetric attacks from particular IP addresses, JA4 Fingerprints, or countries.\n\nThe following example rule applies rate limiting to requests with a specific [ATO detection ID](https://developers.cloudflare.com/bots/additional-configurations/detection-ids/#account-takeover-detections) (corresponding to `Observes all login traffic to the zone`) that contain a previously leaked username and password:\n\n**When incoming requests match**:\\\n`(any(cf.bot_management.detection_ids[*] eq 201326593 and cf.waf.credential_check.username_and_password_leaked))`\n\n**With the same characteristics**: *IP*\n\nWhen rate exceeds:\n\n* **Requests**: `5`\n* **Period**: *1 minute*\n\n## Challenge requests containing leaked credentials\n\nNote\n\nAccess to the *User and Password Leaked* (`cf.waf.credential_check.username_and_password_leaked`) field requires a Pro plan or above.\n\n[Create a custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) that challenges requests containing a previously leaked set of credentials (username and password).\n\n* **Expression**: If you use the Expression Builder, configure the following expression:\n\n  | Field | Operator | Value |\n  | - | - | - |\n  | User and Password Leaked | equals | True |\n\n  If you use the Expression Editor, enter the following expression:",
      "language": "unknown"
    },
    {
      "code": "* **Action**: *Managed Challenge*\n\n***\n\n</page>\n\n<page>\n---\ntitle: Get started with leaked credentials detection  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: On Free plans, the leaked credentials detection is enabled by\n  default, and no action is required. On paid plans, you can turn on the\n  detection in the Cloudflare dashboard, via API, or using Terraform.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/leaked-credentials/get-started/\n  md: https://developers.cloudflare.com/waf/detections/leaked-credentials/get-started/index.md\n---\n\n## 1. Turn on the detection\n\nOn Free plans, the leaked credentials detection is enabled by default, and no action is required. On paid plans, you can turn on the detection in the Cloudflare dashboard, via API, or using Terraform.\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n  2. Go to **Security** > **Settings**.\n  3. Under **Incoming traffic detections**, turn on **Leaked credentials**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detection tools**.\n\n  3. Turn on **Leaked credential detection**.\n\n* API\n\n  Use a `POST` request similar to the following:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zone WAF Write`\n  * `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "* Terraform\n\n  Use the `cloudflare_leaked_credential_check` resource to enable leaked credentials detection for a zone. For example:",
      "language": "unknown"
    },
    {
      "code": "Note\n\nTo achieve optimal latency performance, Cloudflare recommends that you turn off [Exposed Credentials Checks](https://developers.cloudflare.com/waf/managed-rules/reference/exposed-credentials-check/) (a previous implementation) after turning on leaked credentials detection and setting up your mitigation strategy as described in the next steps.\n\n## 2. Validate the leaked credentials detection behavior\n\nUse [Security Analytics](https://developers.cloudflare.com/waf/analytics/security-analytics/) and HTTP logs to validate that Cloudflare is correctly detecting leaked credentials in incoming requests.\n\nRefer to [Test your configuration](#test-your-configuration) for more information on the test credentials you can use to validate your configuration.\n\nAlternatively, create a custom rule like the one described in the next step using a *Log* action (only available to Enterprise customers). This rule will generate [security events](https://developers.cloudflare.com/waf/analytics/security-events/) that will allow you to validate your configuration.\n\n## 3. Mitigate requests with leaked credentials\n\nIf you are on a Free plan, deploy the suggested [rate limiting rule](https://developers.cloudflare.com/waf/rate-limiting-rules/) template available in:\n\n* Old dashboard: **WAF** > **Rate limiting rules**\n* New security dashboard: **Security** > **Security rules**\n\nWhen you deploy a rule using this template, you get instant protection against IPs attempting to access your application with a leaked password more than five times per 10 seconds. This rule can delay attacks by blocking them for a period of time. Alternatively, you can create a custom rule.\n\nPaid plans have access to more granular controls when creating a rule. If you are on a paid plan, [create a custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) that challenges requests containing leaked credentials:\n\n| Field | Operator | Value |\n| - | - | - |\n| User and Password Leaked | equals | True |\n\nIf you use the Expression Editor, enter the following expression:",
      "language": "unknown"
    },
    {
      "code": "Rule action: *Managed Challenge*\n\nThis rule will match requests where Cloudflare detects a previously leaked set of credentials (username and password). For a list of fields provided by leaked credentials detection, refer to [Leaked credentials fields](https://developers.cloudflare.com/waf/detections/leaked-credentials/#leaked-credentials-fields).\n\nCombine with other Rules language fields\n\nYou can combine the previous expression with other [fields](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/) and [functions](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/) of the Rules language. This allows you to customize the rule scope or combine leaked credential checking with other security features. For example:\n\n* The following expression will match requests containing leaked credentials addressed at an authentication endpoint:\n\n  | Field | Operator | Value | Logic |\n  | - | - | - | - |\n  | User and Password Leaked | equals | True | And |\n  | URI Path | contains | `/admin/login.php` | |\n\n  Expression when using the editor:\\\n  `(cf.waf.credential_check.username_and_password_leaked and http.request.uri.path contains \"/admin/login.php\")`\n\n* The following expression will match requests coming from bots that include authentication credentials:\n\n  | Field | Operator | Value | Logic |\n  | - | - | - | - |\n  | Authentication detected | equals | True | And |\n  | Bot Score | less than | `10` | |\n\n  Expression when using the editor:\\\n  `(cf.waf.auth_detected and cf.bot_management.score lt 10)`\n\nFor additional examples, refer to [Example mitigation rules](https://developers.cloudflare.com/waf/detections/leaked-credentials/examples/).\n\n### Handle detected leaked credentials at the origin server\n\nAdditionally, you may want to handle leaked credentials detected by Cloudflare at your origin server:\n\n1. [Turn on](https://developers.cloudflare.com/rules/transform/managed-transforms/configure/) the **Add Leaked Credentials Checks Header** managed transform.\n\n2. For requests received at your origin server containing the `Exposed-Credential-Check` header, you could redirect your end users to your reset password page when detecting previously leaked credentials.\n\n## 4. (Optional) Configure a custom detection location\n\nTo check for leaked credentials in a way that is not covered by the default configuration, add a [custom detection location](https://developers.cloudflare.com/waf/detections/leaked-credentials/#custom-detection-locations).\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n\n  2. Go to **Security** > **Settings**.\n\n  3. Under **Incoming traffic detections**, select **Leaked credentials** and then select **Add custom username and password location**.\n\n  4. In **Username location** and **Password location** (optional), enter expressions for obtaining the username and the password from the HTTP request. For example, you could use the following expressions:\n\n     * Username location:\\\n       `lookup_json_string(http.request.body.raw, \"user\")`\n     * Password location:\\\n       `lookup_json_string(http.request.body.raw, \"secret\")`\n\n     This configuration will scan incoming HTTP requests containing a JSON body with a structure similar to the following:",
      "language": "unknown"
    },
    {
      "code": "Refer to the [`lookup_json_string()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lookup_json_string) documentation for more information on this function.\n\n  5. Select **Save**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detection tools**.\n\n  3. Under **Leaked credential detection** > **Configurations**, select the edit icon.\n\n  4. Select **Add custom username and password location**.\n\n  5. In **Username location** and **Password location** (optional), enter expressions for obtaining the username and the password from the HTTP request. For example, you could use the following expressions:\n\n     * Username location:\\\n       `lookup_json_string(http.request.body.raw, \"user\")`\n     * Password location:\\\n       `lookup_json_string(http.request.body.raw, \"secret\")`\n\n     This configuration will scan incoming HTTP requests containing a JSON body with a structure similar to the following:",
      "language": "unknown"
    },
    {
      "code": "Refer to the [`lookup_json_string()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lookup_json_string) documentation for more information on this function.\n\n  6. Select **Save**.\n\n* API\n\n  Use a `POST` request similar to the following:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zone WAF Write`\n  * `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "This pair of lookup expressions (for username and password) will scan incoming HTTP requests containing a JSON body with a structure similar to the following:",
      "language": "unknown"
    },
    {
      "code": "Refer to the [`lookup_json_string()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lookup_json_string) documentation for more information on this function.\n\n* Terraform\n\n  Use the `cloudflare_leaked_credential_check_rule` resource to add a custom detection location. For example:",
      "language": "unknown"
    },
    {
      "code": "Refer to the [`lookup_json_string()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lookup_json_string) documentation for more information on this function.\n\nYou only need to provide an expression for the username in custom detection locations.\n\nFor more examples of custom detection locations for different request types, refer to [Custom detection locations](https://developers.cloudflare.com/waf/detections/leaked-credentials/#custom-detection-locations).\n\n***\n\n## Test your configuration\n\nCloudflare provides a special set of case-sensitive credentials for testing the configuration of the leaked credentials detection.\n\nAfter enabling and configuring the detection, you can use the credentials mentioned in this section in your test HTTP requests.\n\nTest credentials for users on a Free plan (will also work in paid plans):\n\n* Username: `CF_LEAKED_USERNAME_FREE`\n* Password: `CF_LEAKED_PASSWORD`\n\nTest credentials for users on paid plans (will not work on Free plans):\n\n* Username: `CF_EXPOSED_USERNAME` or `CF_EXPOSED_USERNAME@example.com`\n* Password: `CF_EXPOSED_PASSWORD`\n\nCloudflare considers these specific credentials as having been previously leaked. Use them in your tests to check the behavior of your current configuration.\n\n</page>\n\n<page>\n---\ntitle: Terraform configuration examples  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: The following Terraform configuration examples address common\n  scenarios for managing, configuring, and using leaked credentials detection.\nlastUpdated: 2025-08-20T20:59:04.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/leaked-credentials/terraform-examples/\n  md: https://developers.cloudflare.com/waf/detections/leaked-credentials/terraform-examples/index.md\n---\n\nThe following Terraform configuration examples address common scenarios for managing, configuring, and using leaked credentials detection.\n\nFor more information, refer to the [Terraform Cloudflare provider documentation](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs).\n\nIf you are using the Cloudflare API, refer to [Common API calls](https://developers.cloudflare.com/waf/detections/leaked-credentials/api-calls/).\n\n## Enable leaked credentials detection\n\nUse the `cloudflare_leaked_credential_check` resource to enable leaked credentials detection for a zone. For example:",
      "language": "unknown"
    },
    {
      "code": "## Configure a custom detection location\n\nUse the `cloudflare_leaked_credential_check_rule` resource to add a custom detection location. For example:",
      "language": "unknown"
    },
    {
      "code": "You only need to provide an expression for the username in custom detection locations.\n\n## Add a custom rule to challenge requests with leaked credentials\n\nThis example adds a [custom rule](https://developers.cloudflare.com/waf/custom-rules/) that challenges requests with leaked credentials by using one of the [leaked credentials fields](https://developers.cloudflare.com/waf/detections/leaked-credentials/#leaked-credentials-fields) in the rule expression.\n\nTo use the [`cf.waf.credential_check.username_and_password_leaked`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.waf.credential_check.username_and_password_leaked/) field you must [enable leaked credentials detection](#enable-leaked-credentials-detection).\n\nNote\n\nTerraform code snippets below refer to the v4 SDK only.",
      "language": "unknown"
    },
    {
      "code": "## More resources\n\nFor additional Terraform configuration examples, refer to [WAF custom rules configuration using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-custom-rules/).\n\n</page>\n\n<page>\n---\ntitle: Common API calls for content scanning  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: The following examples address common scenarios of using the\n  Cloudflare API to manage and configure WAF content scanning.\nlastUpdated: 2025-04-16T16:28:57.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/malicious-uploads/api-calls/\n  md: https://developers.cloudflare.com/waf/detections/malicious-uploads/api-calls/index.md\n---\n\nThe following examples address common scenarios of using the Cloudflare API to manage and configure WAF content scanning.\n\nIf you are using Terraform, refer to [Terraform configuration examples](https://developers.cloudflare.com/waf/detections/malicious-uploads/terraform-examples/).\n\n## General operations\n\nThe following API examples cover basic operations such as enabling and disabling WAF content scanning.\n\n### Enable WAF content scanning\n\nTo enable content scanning, use a `POST` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "### Disable WAF content scanning\n\nTo disable content scanning, use a `POST` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "### Get WAF content scanning status\n\nTo obtain the current status of the content scanning feature, use a `GET` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`",
      "language": "unknown"
    },
    {
      "code": "## Custom expression operations\n\nThe following API examples cover operations on custom scan expressions for content scanning.\n\n### Get existing custom scan expressions\n\nTo get a list of existing custom scan expressions, use a `GET` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Zone WAF Read`\n* `Account WAF Write`\n* `Account WAF Read`",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "### Add a custom scan expression\n\nUse a `POST` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "### Delete a custom scan expression\n\nUse a `DELETE` request similar to the following:\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Zone WAF Write`\n* `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Example rules checking uploaded content objects  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: \"This custom rule example logs all requests with at least one\n  uploaded content object:\"\nlastUpdated: 2025-10-14T13:48:33.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/malicious-uploads/example-rules/\n  md: https://developers.cloudflare.com/waf/detections/malicious-uploads/example-rules/index.md\n---\n\n## Log requests with an uploaded content object\n\nThis [custom rule](https://developers.cloudflare.com/waf/custom-rules/) example logs all requests with at least one uploaded content object:\n\n* Expression: `cf.waf.content_scan.has_obj`\n* Action: *Log*\n\n## Block requests to URI path with a malicious content object\n\nThis custom rule example blocks requests addressed at `/upload.php` that contain at least one uploaded content object considered malicious:\n\n* Expression: `cf.waf.content_scan.has_malicious_obj and http.request.uri.path eq \"/upload.php\"`\n* Action: *Block*\n\n## Block requests with non-PDF file uploads\n\nThis custom rule example blocks requests addressed at `/upload` with uploaded content objects that are not PDF files:\n\n* Expression: `any(cf.waf.content_scan.obj_types[*] != \"application/pdf\") and http.request.uri.path eq \"/upload\"`\n* Action: *Block*\n\n## Block requests with uploaded files over 500 KB\n\nThis custom rule example blocks requests addressed at `/upload` with uploaded content objects over 500 KB (512,000 bytes) in size:\n\n* Expression: `any(cf.waf.content_scan.obj_sizes[*] > 512000) and http.request.uri.path eq \"/upload\"`\n* Action: *Block*\n\n## Block requests with uploaded files over the content scanning limit (50 MB)\n\nThis custom rule example blocks requests with uploaded content objects over 50 MB in size (the current content scanning limit):\n\n* Expression: `any(cf.waf.content_scan.obj_sizes[*] >= 52428800)`\n* Action: *Block*\n\nIn this example, you must also test for equality because currently any file over 50 MB will be handled internally as if it had a size of 50 MB (52,428,800 bytes). This means that using the `>` (greater than) [comparison operator](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/#comparison-operators) would not work for this particular rule  you should use `>=` (greater than or equal) instead.\n\n</page>\n\n<page>\n---\ntitle: Get started with malicious uploads detection  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: Use Security Analytics and HTTP logs to validate that malicious\n  content objects are being detected correctly.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/malicious-uploads/get-started/\n  md: https://developers.cloudflare.com/waf/detections/malicious-uploads/get-started/index.md\n---\n\nNote\n\nWAF content scanning is available to customers on an Enterprise plan with a paid add-on.\n\n## 1. Turn on the detection\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n  2. Go to **Security** > **Settings**.\n  3. Under **Incoming traffic detections**, turn on **Malicious uploads**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detection tools**.\n\n  3. Turn on **Malicious uploads detection**.\n\n* API\n\n  Use a `POST` request similar to the following:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zone WAF Write`\n  * `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "* Terraform\n\n  Use the `cloudflare_content_scanning` resource to enable content scanning for a zone. For example:",
      "language": "unknown"
    },
    {
      "code": "## 2. Validate the content scanning behavior\n\nUse [Security Analytics](https://developers.cloudflare.com/waf/analytics/security-analytics/) and HTTP logs to validate that malicious content objects are being detected correctly.\n\nYou can use the [EICAR anti-malware test file](https://www.eicar.org/download-anti-malware-testfile/) to test content scanning (select the ZIP format).\n\nAlternatively, create a custom rule like described in the next step using a *Log* action instead of a mitigation action like *Block*. This rule will generate [security events](https://developers.cloudflare.com/waf/analytics/security-events/) that will allow you to validate your configuration.\n\n## 3. Create a custom rule\n\n[Create a custom rule](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/) that blocks detected malicious content objects uploaded to your application.\n\nFor example, create a custom rule with the *Block* action and the following expression:\n\n| Field | Operator | Value |\n| - | - | - |\n| Has malicious content object | equals | True |\n\nIf you use the Expression Editor, enter the following expression:",
      "language": "unknown"
    },
    {
      "code": "Rule action: *Block*\n\nThis rule will match requests where Cloudflare detects a suspicious or malicious content object. For a list of fields provided by WAF content scanning, refer to [Content scanning fields](https://developers.cloudflare.com/waf/detections/malicious-uploads/#content-scanning-fields).\n\nOptional: Combine with other Rules language fields\n\nYou can combine the previous expression with other [fields](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/) and [functions](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/) of the Rules language. This allows you to customize the rule scope or combine content scanning with other security features. For example:\n\n* The following expression will match requests with malicious content objects uploaded to a specific endpoint:\n\n  | Field | Operator | Value | Logic |\n  | - | - | - | - |\n  | Has malicious content object | equals | True | And |\n  | URI Path | contains | `upload.php` | |\n\n  Expression when using the editor:",
      "language": "unknown"
    },
    {
      "code": "* The following expression will match requests from bots uploading content objects:\n\n  | Field | Operator | Value | Logic |\n  | - | - | - | - |\n  | Has content object | equals | True | And |\n  | Bot Score | less than | `10` | |\n\n  Expression when using the editor:",
      "language": "unknown"
    },
    {
      "code": "For additional examples, refer to [Example rules](https://developers.cloudflare.com/waf/detections/malicious-uploads/example-rules/).\n\n## 4. (Optional) Configure a custom scan expression\n\nTo check uploaded content in a way that is not covered by the default configuration, add a [custom scan expression](https://developers.cloudflare.com/waf/detections/malicious-uploads/#custom-scan-expressions).\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n\n  2. Go to **Security** > **Settings**.\n\n  3. Under **Incoming traffic detections**, select **Malicious uploads**.\n\n  4. Select **Add content object location**.\n\n  5. In **Content location**, enter your custom scan expression. For example:",
      "language": "unknown"
    },
    {
      "code": "6. Select **Save**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detection tools**.\n\n  3. Under **Malicious uploads detection** > **Configurations**, select the edit icon.\n\n  4. Select **Add content location**.\n\n  5. In **Content location**, enter your custom scan expression. For example:",
      "language": "unknown"
    },
    {
      "code": "6. Select **Save**.\n\n* API\n\n  Use a `POST` request similar to the following:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zone WAF Write`\n  * `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "The above request will add the following expression to the current list of custom scan expressions:",
      "language": "unknown"
    },
    {
      "code": "* Terraform\n\n  Use the `cloudflare_content_scanning_expression` resource to add a custom scan expression. For example:",
      "language": "unknown"
    },
    {
      "code": "For more information, refer to [Custom scan expressions](https://developers.cloudflare.com/waf/detections/malicious-uploads/#custom-scan-expressions).\n\n</page>\n\n<page>\n---\ntitle: Terraform configuration examples  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: The following Terraform configuration examples address common\n  scenarios for managing, configuring, and using WAF content scanning.\nlastUpdated: 2025-08-20T20:59:04.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/detections/malicious-uploads/terraform-examples/\n  md: https://developers.cloudflare.com/waf/detections/malicious-uploads/terraform-examples/index.md\n---\n\nThe following Terraform configuration examples address common scenarios for managing, configuring, and using WAF content scanning.\n\nFor more information, refer to the [Terraform Cloudflare provider documentation](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs).\n\nIf you are using the Cloudflare API, refer to [Common API calls](https://developers.cloudflare.com/waf/detections/malicious-uploads/api-calls/).\n\n## Enable WAF content scanning\n\nUse the `cloudflare_content_scanning` resource to enable content scanning for a zone. For example:",
      "language": "unknown"
    },
    {
      "code": "## Configure a custom scan expression\n\nUse the `cloudflare_content_scanning_expression` resource to add a custom scan expression. For example:",
      "language": "unknown"
    },
    {
      "code": "For more information, refer to [Custom scan expressions](https://developers.cloudflare.com/waf/detections/malicious-uploads/#custom-scan-expressions).\n\n## Add a custom rule to block malicious uploads\n\nThis example adds a [custom rule](https://developers.cloudflare.com/waf/custom-rules/) that blocks requests with one or more content objects considered malicious by using one of the [content scanning fields](https://developers.cloudflare.com/waf/detections/malicious-uploads/#content-scanning-fields) in the rule expression.\n\nTo use the [`cf.waf.content_scan.has_malicious_obj`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/cf.waf.content_scan.has_malicious_obj/) field you must [enable content scanning](#enable-waf-content-scanning).\n\nNote\n\nTerraform code snippets below refer to the v4 SDK only.",
      "language": "unknown"
    },
    {
      "code": "## More resources\n\nFor additional Terraform configuration examples, refer to [WAF custom rules configuration using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-custom-rules/).\n\n</page>\n\n<page>\n---\ntitle: Configure exposed credentials checks via API  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: \"Configure exposed credentials checks using the Rulesets API. You\n  can do the following:\"\nlastUpdated: 2025-09-12T15:50:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-api/\n  md: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-api/index.md\n---\n\nConfigure exposed credentials checks using the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/). You can do the following:\n\n* [Deploy the Cloudflare Exposed Credentials Check Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/exposed-credentials-check/#configure-via-api).\n* [Create custom rules that check for exposed credentials](#create-a-custom-rule-checking-for-exposed-credentials).\n\nIf you are using Terraform, refer to [Configure using Terraform](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-terraform/).\n\nRecommendation: Use leaked credentials detection instead\n\nCloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead of Cloudflare Exposed Credentials Check, which refers to a previous implementation.\\\nFor more information on upgrading your current Exposed Credentials Check configuration, refer to the [upgrade guide](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/).\n\n## Create a custom rule checking for exposed credentials\n\nNote\n\nThis feature requires [account-level WAF configuration](https://developers.cloudflare.com/waf/account/), which is available to Enterprise customers with a paid add-on.\n\nYou can create rules that check for exposed credentials using the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/). Include these rules in a custom ruleset, which you must create at the account level, and then deploy the custom ruleset to a phase.\n\nA rule checking for exposed credentials has a match when both the rule expression and the result from the exposed credentials check are true.\n\nTo check for exposed credentials in a custom rule, include the `exposed_credential_check` object in the rule definition. This object must have the following properties:\n\n* `username_expression`  Expression that selects the user ID used in the credentials check. This property can have up to 1024 characters.\n* `password_expression`  Expression that selects the password used in the credentials check. This property can have up to 1024 characters.\n\nNote\n\nThese properties have additional requirements:\n\n* Each expression must evaluate to a string.\n* You can only use the [`upper()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#upper), [`lower()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lower), [`url_decode()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#url_decode), and [`lookup_json_string()`](https://developers.cloudflare.com/ruleset-engine/rules-language/functions/#lookup_json_string) functions, and you cannot nest these functions.\n\nYou can use the `exposed_credential_check` object in rules with one of the following actions: `rewrite`, `log`, `block`, `challenge`, or `js_challenge`. Cloudflare recommends that you only use exposed credentials checks with the following actions: `rewrite` and `log`.\n\nTo create and deploy a custom ruleset, follow the workflow described in [Work with custom rulesets](https://developers.cloudflare.com/ruleset-engine/custom-rulesets/).\n\n### Example A\n\nThis `POST` request example creates a new custom ruleset with a rule that checks for exposed credentials. The rule has a match if both the rule expression and the `exposed_credential_check` result are `true`. When there is a match, the rule will log the request with exposed credentials in the Cloudflare logs.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Account WAF Write`\n* `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "The response returns the created ruleset. Note the presence of the `exposed_credential_check` object on the rule definition.",
      "language": "unknown"
    },
    {
      "code": "The example uses the `url_decode()` function because fields in the request body (available in `http.request.body.form`) are URL-encoded when the content type is `application/x-www-form-urlencoded`.\n\nAfter creating the custom ruleset, deploy it to a phase so that it executes. You will need the ruleset ID to deploy the custom ruleset. For more information, refer to [Deploy a custom ruleset](https://developers.cloudflare.com/ruleset-engine/custom-rulesets/deploy-custom-ruleset/).\n\n### Example B\n\nThis `POST` request example creates a new custom ruleset with a rule that checks for exposed credentials in JSON responses. The rule has a match if both the rule expression and the `exposed_credential_check` result are `true`. When there is a match, the rule will add an `Exposed-Credential-Check` HTTP header to the request with value `1`.\n\nRequired API token permissions\n\nAt least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n* `Account WAF Write`\n* `Account Rulesets Write`",
      "language": "unknown"
    },
    {
      "code": "The response returns the created ruleset. Note the presence of the following elements in the rule definition:\n\n* The `rewrite` action.\n* The `action_parameters` object configuring the HTTP header added to requests with exposed credentials.\n* The `exposed_credential_check` object.",
      "language": "unknown"
    },
    {
      "code": "After creating the custom ruleset, deploy it to a phase so that it executes. You will need the ruleset ID to deploy the custom ruleset. For more information, refer to [Deploy a custom ruleset](https://developers.cloudflare.com/ruleset-engine/custom-rulesets/deploy-custom-ruleset/).\n\n</page>\n\n<page>\n---\ntitle: Configure exposed credentials checks using Terraform  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: The following Terraform configuration example addresses a common\n  use case of exposed credentials checks.\nlastUpdated: 2025-09-12T15:50:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-terraform/\n  md: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-terraform/index.md\n---\n\nThe following Terraform configuration example addresses a common use case of exposed credentials checks.\n\nFor more information, refer to the [Terraform Cloudflare provider documentation](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs).\n\nIf you are using the Cloudflare API, refer to [Configure via API](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-api/).\n\nRecommendation: Use leaked credentials detection instead\n\nCloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead of Cloudflare Exposed Credentials Check, which refers to a previous implementation.\\\nFor more information on upgrading your current Exposed Credentials Check configuration, refer to the [upgrade guide](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/).\n\n## Add a custom rule to check for exposed credentials\n\nThe following configuration creates a custom ruleset with a single rule that [checks for exposed credentials](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-api/#create-a-custom-rule-checking-for-exposed-credentials).\n\nYou can only add exposed credential checks to rules in a custom ruleset (that is, a ruleset with `kind = \"custom\"`).\n\nNote\n\nTerraform code snippets below refer to the v4 SDK only.",
      "language": "unknown"
    },
    {
      "code": "To create another rule, add a new `rules` object to the same `cloudflare_ruleset` resource.\n\nThe following configuration deploys the custom ruleset. It defines a dependency on the `account_firewall_custom_ruleset_exposed_creds` resource and obtains the ID of the created custom ruleset:\n\nNote\n\nTerraform code snippets below refer to the v4 SDK only.",
      "language": "unknown"
    },
    {
      "code": "## More resources\n\nFor additional Terraform configuration examples, refer to [WAF custom rules configuration using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-custom-rules/).\n\n</page>\n\n<page>\n---\ntitle: How exposed credentials checks work  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: WAF rules can include a check for exposed credentials. When enabled\n  in a given rule, exposed credentials checking happens when there is a match\n  for the rule expression (that is, the rule expression evaluates to true).\nlastUpdated: 2025-09-12T15:50:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/how-checks-work/\n  md: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/how-checks-work/index.md\n---\n\nWAF rules can include a check for exposed credentials. When enabled in a given rule, exposed credentials checking happens when there is a match for the rule expression (that is, the rule expression evaluates to `true`).\n\nAt this point, the WAF looks up the username/password pair in the request against a database of publicly available stolen credentials. When both the rule expression and the exposed credentials check are true, there is a rule match, and Cloudflare performs the action configured in the rule.\n\nRecommendation: Use leaked credentials detection instead\n\nCloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead of Cloudflare Exposed Credentials Check, which refers to a previous implementation.\\\nFor more information on upgrading your current Exposed Credentials Check configuration, refer to the [upgrade guide](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/).\n\n## Example\n\nFor example, the following rule matches `POST` requests to the `/login.php` URI when Cloudflare identifies the submitted credentials as previously exposed:\n\n**Rule #1**\n\nRule expression:\\\n`http.request.method == \"POST\" and http.request.uri == \"/login.php\"`\n\nExposed credentials check with the following configuration:\n\n* Username expression: `http.request.body.form[\"user_id\"]`\n* Password expression: `http.request.body.form[\"password\"]`\n\nAction: *Interactive Challenge*\n\nWhen there is a match for the rule above and Cloudflare detects exposed credentials, the WAF presents the user with a challenge.\n\n</page>\n\n<page>\n---\ntitle: Monitor exposed credentials events  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: Sampled logs in Security Events shows entries for requests with\n  exposed credentials identified by rules with the Log action.\nlastUpdated: 2025-08-20T20:59:04.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/monitor-events/\n  md: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/monitor-events/index.md\n---\n\n**Sampled logs** in [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/) shows entries for requests with exposed credentials identified by rules with the *Log* action.\n\nCheck for exposed credentials events in the Security Events dashboard, filtering by a specific rule ID. For more information on filtering events, refer to [Adjust displayed data](https://developers.cloudflare.com/waf/analytics/security-events/#adjust-displayed-data).\n\nRecommendation: Use leaked credentials detection instead\n\nCloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead of Cloudflare Exposed Credentials Check, which refers to a previous implementation.\\\nFor more information on upgrading your current Exposed Credentials Check configuration, refer to the [upgrade guide](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/).\n\n## Important notes\n\nExposed credentials events are only logged after you activate the Exposed Credentials Check Managed Ruleset or create a custom rule checking for exposed credentials.\n\nThe log entries will not contain the values of the exposed credentials (username, email, or password). However, if [matched payload logging](https://developers.cloudflare.com/waf/managed-rules/payload-logging/) is enabled, the log entries will contain the values of the fields in the rule expression that triggered the rule. These values might be the values of credential fields, depending on your rule configuration.\n\n</page>\n\n<page>\n---\ntitle: Test your exposed credentials checks configuration  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: After enabling and configuring exposed credentials checks, you may\n  want to test if the checks are working properly.\nlastUpdated: 2025-09-12T15:50:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/test-configuration/\n  md: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/test-configuration/index.md\n---\n\nAfter enabling and configuring exposed credentials checks, you may want to test if the checks are working properly.\n\nRecommendation: Use leaked credentials detection instead\n\nCloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead of Cloudflare Exposed Credentials Check, which refers to a previous implementation.\\\nFor more information on upgrading your current Exposed Credentials Check configuration, refer to the [upgrade guide](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/).\n\nCloudflare provides a special set of case-sensitive credentials for this purpose:\n\n* Login: `CF_EXPOSED_USERNAME` or `CF_EXPOSED_USERNAME@example.com`\n* Password: `CF_EXPOSED_PASSWORD`\n\nThe WAF always considers these specific credentials as having been previously exposed. Use them to force an \"exposed credentials\" event, which allows you to check the behavior of your current configuration.\n\n</page>\n\n<page>\n---\ntitle: Upgrade to leaked credentials detection  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: This guide describes the general steps to upgrade your Exposed\n  Credentials Check configuration to the new leaked credentials detection.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/\n  md: https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/index.md\n---\n\nThis guide describes the general steps to upgrade your [Exposed Credentials Check](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/) configuration to the new [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/).\n\nCloudflare recommends that customers update their configuration to use the new leaked credentials detection, which offers the following advantages:\n\n* Uses a comprehensive database of leaked credentials, containing over 15 billion passwords.\n* After enabling the detection, you can review the amount of incoming requests containing leaked credentials in Security Analytics, even before creating any mitigation rules.\n* You can take action on the requests containing leaked credentials using WAF features like rate limiting rules or custom rules.\n\nNote\n\nThis upgrade guide applies to customers changing from Exposed Credentials Check at the zone level.\n\n## 1. Turn off Exposed Credentials Check\n\nIf you had deployed the Cloudflare Exposed Credentials Check managed ruleset:\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n  2. Go to **Security** > **WAF** > **Managed rules** tab.\n  3. Under **Managed rules**, edit the rule that executes the Cloudflare Exposed Credentials Check Ruleset and take note of the current configuration (namely the performed action). Next, delete (or turn off) that rule.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n     [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n  2. (Optional) Filter by **Managed rules**.\n\n  3. Edit the rule that executes the Cloudflare Exposed Credentials Check Ruleset and take note of the current configuration (namely the performed action). Next, delete (or turn off) that rule.\n\nNote\n\nWhile Exposed Credentials Check and leaked credentials detection can work side by side, enabling both features will increase the latency on incoming requests related to authentication.\n\n## 2. Turn on leaked credentials detection\n\nOn Free plans, the leaked credentials detection is enabled by default, and no action is required. On paid plans, you can turn on the detection in the Cloudflare dashboard, via API, or using Terraform.\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n  2. Go to **Security** > **Settings**.\n  3. Under **Incoming traffic detections**, turn on **Leaked credentials**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detection tools**.\n\n  3. Turn on **Leaked credential detection**.\n\n* API\n\n  Use a `POST` request similar to the following:\n\n  Required API token permissions\n\n  At least one of the following [token permissions](https://developers.cloudflare.com/fundamentals/api/reference/permissions/) is required:\n\n  * `Zone WAF Write`\n  * `Account WAF Write`",
      "language": "unknown"
    },
    {
      "code": "* Terraform\n\n  Use the `cloudflare_leaked_credential_check` resource to enable leaked credentials detection for a zone. For example:",
      "language": "unknown"
    },
    {
      "code": "## 3. Configure the actions to take\n\nBased on your previous configuration, do one of the following:\n\n* If you were using the [default action](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/#available-actions) in Exposed Credentials Check: Turn on the [**Add Leaked Credentials Checks Header** managed transform](https://developers.cloudflare.com/rules/transform/managed-transforms/reference/#add-leaked-credentials-checks-header) that adds the `Exposed-Credential-Check` header to incoming requests containing leaked credentials. Even though the header name is the same as in Exposed Credentials Check, the header values in the new implementation will vary between `1` and `4`.\n\n* If you were using a different action: Create a [custom rule](https://developers.cloudflare.com/waf/custom-rules/) with an action equivalent to the one you were using. The rule should match `User and password leaked is true` (if you are using the expression editor, enter `(cf.waf.credential_check.username_and_password_leaked)`).\n\n***\n\n## More resources\n\n* Check for the results of leaked credentials detection in [Security Analytics](https://developers.cloudflare.com/waf/analytics/security-analytics/).\n* Refer to [Example mitigation rules](https://developers.cloudflare.com/waf/detections/leaked-credentials/examples/) for example mitigation strategies you can use when detecting leaked credentials.\n\n</page>\n\n<page>\n---\ntitle: Command-line operations  Cloudflare Web Application Firewall (WAF) docs\ndescription: The Cloudflare matched-data-cli command-line tool supports several\n  tasks related to payload logging.\nlastUpdated: 2024-09-06T15:21:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/\n  md: https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/index.md\n---\n\nThe Cloudflare [`matched-data-cli`](https://github.com/cloudflare/matched-data-cli) command-line tool supports several tasks related to payload logging.\n\n[Download](https://github.com/cloudflare/matched-data-cli/releases) the `matched-data-cli` tool for your platform from the **Releases** page on GitHub. Alternatively, build the tool from source by following the instructions in the GitHub repository.\n\nUse the tool to:\n\n* [Generate a key pair](https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/generate-key-pair/)\n* [Decrypt the payload content](https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/decrypt-payload/)\n\n</page>\n\n<page>\n---\ntitle: Configure payload logging for a managed ruleset in the dashboard \n  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure/\n  md: https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure/index.md\n---\n\nNote\n\nOnly users with the [Super Administrator role](https://developers.cloudflare.com/fundamentals/manage-members/roles/) can configure payload logging and decrypt payloads in the Cloudflare dashboard. Other users can decrypt payloads if they have access to the logs and to the private key.\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com), and select your account and domain.\n\n  2. Go to **Security** > **WAF** > **Managed rules** tab.\n\n     ![Example Managed Rules configuration in the Managed rules tab under Security > WAF](https://developers.cloudflare.com/_astro/waf-managed-rules-tab.CJ_mD1P3_Z5LcAf.webp)\n\n  3. To configure payload logging for a ruleset you had already deployed in the WAF, select the managed ruleset name.\n\n  4. At the bottom of the page, select **Configure payload logging**.\n\n  5. After reading and understanding the implications of enabling payload logging, select one of the available options:\n\n     * **Generate key pair using your web browser**: Generates a key pair (a private and a public key) in your browser and configures payload logging with the generated public key.\n\n     * **Use my own public key**: Enter a public key [generated by the `matched-data-cli` command-line tool](https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/generate-key-pair/).\n\n  6. Select **Next**.\n\n  7. If you generated a key pair in the browser, copy the displayed private key and **store it safely**. You will use this private key later to [view the decrypted payload content](https://developers.cloudflare.com/waf/managed-rules/payload-logging/view/).\n\n  8. Select **Done**.\n\n  9. If you are deploying the managed ruleset where you configured payload logging, select **Deploy**. If you configured payload logging for a ruleset you had already deployed, select **Save**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n     [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n  2. (Optional) Filter by **Managed rules**.\n\n  3. Search for the managed ruleset you want to configure. Look for a rule with an *Execute* action.\n\n  4. Select the rule name (containing the name of the managed ruleset).\n\n  5. At the bottom of the page, select **Configure payload logging**.\n\n  6. After reading and understanding the implications of enabling payload logging, select one of the available options:\n\n     * **Generate key pair using your web browser**: Generates a key pair (a private and a public key) in your browser and configures payload logging with the generated public key.\n\n     * **Use my own public key**: Enter a public key [generated by the `matched-data-cli` command-line tool](https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/generate-key-pair/).\n\n  7. Select **Next**.\n\n  8. If you generated a key pair in the browser, copy the displayed private key and **store it safely**. You will use this private key later to [view the decrypted payload content](https://developers.cloudflare.com/waf/managed-rules/payload-logging/view/).\n\n  9. Select **Done**, and then select **Save**.\n\n</page>\n\n<page>\n---\ntitle: Configure payload logging for a managed ruleset via API  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: Use the Rulesets API to configure payload logging for a managed\n  ruleset via API.\nlastUpdated: 2025-09-10T08:21:53.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure-api/\n  md: https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure-api/index.md\n---\n\nUse the [Rulesets API](https://developers.cloudflare.com/ruleset-engine/rulesets-api/) to configure payload logging for a managed ruleset via API.\n\n## Configure and enable payload logging\n\n1. Use the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the following IDs:\n\n   * The ID of the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) of the `http_request_firewall_managed` [phase](https://developers.cloudflare.com/ruleset-engine/about/phases/).\n   * The ID of the `execute` rule deploying the WAF managed ruleset, for which you want to configure payload logging.\n\n2. Use the [Update a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/methods/update/) operation to update the rule you identified in the previous step.\n\n   Include a `matched_data` object in the rule's `action_parameters` object to configure payload logging. The `matched_data` object has the following structure:",
      "language": "unknown"
    },
    {
      "code": "Replace `<PUBLIC_KEY_VALUE>` with the public key you want to use for payload logging. You can generate a public key [in the command line](https://developers.cloudflare.com/waf/managed-rules/payload-logging/command-line/generate-key-pair/) or [in the Cloudflare dashboard](https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure/).\n\nAccount-level configuration\n\nTo configure payload logging for a managed ruleset deployed at the account level (only available in Enterprise plans with a paid add-on), use the following API operations instead:\n\n* In step 1: [Get an account entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/)\n* In step 2: [Update an account ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/edit/)\n\n### Example\n\nThis example configures payload logging for the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/), which is already deployed for a zone with ID `$ZONE_ID`.\n\n1. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the rules currently configured in the entry point ruleset of the `http_request_firewall_managed` phase.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. Save the following IDs for the next step:\n\n   * The ID of the entry point ruleset: `060013b1eeb14c93b0dcd896537e0d2c`\n   * The ID of the `execute` rule deploying the Cloudflare Managed Ruleset: `1bdb49371c1f46958fc8b985efcb79e7`\n\n   To find the correct rule in the `rules` array, search for an `execute` rule containing the ID of the Cloudflare Managed Ruleset (efb7b8c949ac4650a09736fc376e9aee ) in `action_parameters` > `id`.\n\n   Note\n\n   To get the IDs of existing WAF managed rulesets, refer to [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/#available-managed-rulesets) or use the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation.\n\n3. Invoke the [Update a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/methods/update/) operation to update the configuration of the rule you identified. The rule will now include the payload logging configuration (`matched_data` object).",
      "language": "unknown"
    },
    {
      "code": "The response will include the complete ruleset after updating the rule.\n\nFor more information on deploying managed rulesets via API, refer to [Deploy a managed ruleset](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/deploy-managed-ruleset/) in the Ruleset Engine documentation.\n\n***\n\n## Disable payload logging\n\nTo disable payload logging for a managed ruleset:\n\n1. Use the [Update a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/methods/update/) operation to update the rule deploying the managed ruleset (a rule with `\"action\": \"execute\"`).\n\n2. Modify the rule definition so that there is no `matched_data` object in `action_parameters`.\n\nFor example, the following `PATCH` request updates the rule with ID `$RULE_ID` deploying the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/) so that payload logging is disabled:",
      "language": "unknown"
    },
    {
      "code": "For details on obtaining the entry point ruleset ID and the ID of the rule to update, refer to [Configure and enable payload logging](https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure-api/#configure-and-enable-payload-logging).\n\n</page>\n\n<page>\n---\ntitle: Store decrypted matched payloads in logs  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: You can include the encrypted matched payload in your Logpush jobs\n  by adding the General > Metadata field from the Firewall Events dataset to\n  your job.\nlastUpdated: 2025-07-25T16:42:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/payload-logging/decrypt-in-logs/\n  md: https://developers.cloudflare.com/waf/managed-rules/payload-logging/decrypt-in-logs/index.md\n---\n\nYou can include the encrypted matched payload in your [Logpush](https://developers.cloudflare.com/logs/logpush/) jobs by adding the **General** > [**Metadata**](https://developers.cloudflare.com/logs/logpush/logpush-job/datasets/zone/firewall_events/#metadata) field from the Firewall Events dataset to your job.\n\nThe payload, in its encrypted form, is available in the [`encrypted_matched_data` property](#structure-of-encrypted_matched_data-property-in-logpush) of the `Metadata` field.\n\nHowever, you may want to decrypt the matched payload before storing the logs in your SIEM system of choice. Cloudflare provides a [sample Worker project](https://github.com/cloudflare/matched-data-worker) on GitHub that does the following:\n\n1. Behaves as an S3-compatible storage to receive logs from Logpush. These logs will contain encrypted matched payload data.\n2. Decrypts matched payload data using your private key.\n3. Sends the logs to the final log storage system with decrypted payload data.\n\nYou will need to make some changes to the sample project to push the logs containing decrypted payload data to your log storage system.\n\nRefer to the Worker project's [README](https://github.com/cloudflare/matched-data-worker/blob/main/README.md) for more information on configuring and deploying this Worker project.\n\n## Structure of `encrypted_matched_data` property in Logpush\n\nMatched payload information includes the specific string that triggered a rule, along with some text that appears immediately before and after the matched string.\n\nOnce you decrypt its value, the `encrypted_matched_data` property of the `Metadata` field in Logpush has a structure similar to the following:",
      "language": "unknown"
    },
    {
      "code": "The `before` and `after` properties are optional (there may be no content before/after the matched text) and will contain at most 15 bytes of content appearing before and after the match.\n\nBelow are a few examples of payload matches:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: View the payload content in the dashboard  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: View the content of the matched rule payload in the dashboard by\n  entering your private key.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/payload-logging/view/\n  md: https://developers.cloudflare.com/waf/managed-rules/payload-logging/view/index.md\n---\n\nView the content of the matched rule payload in the dashboard by entering your private key.\n\n1. Open [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/):\n\n   * Old dashboard\n\n     * In the Cloudflare dashboard, go to **Security** > **Events**.\n\n   * New dashboard\n\n     1. In the Cloudflare dashboard, go to the **Analytics** page.\n\n        [Go to **Analytics**](https://dash.cloudflare.com/?to=/:account/:zone/security/analytics)\n\n     2. Select the **Events** tab.\n\n2. Under **Sampled logs**, expand the details of an event triggered by a rule whose managed ruleset has payload logging enabled.\n\n3. Under **Matched service**, select **Decrypt payload match**.\n\n   ![Example of a security event with available payload match data (still encrypted)](https://developers.cloudflare.com/_astro/payload-logging-example.CMWUOj2Y_1lfnju.webp)\n\n4. Enter your private key in the pop-up window and select **Decrypt**.\n\n   Note\n\n   The private key is not sent to a Cloudflare server. The decryption occurs entirely in the browser.\n\nIf the private key you entered decrypts the encrypted payload successfully, the dashboard will show the name of the fields that matched and the matched string in clear text, along with some text appearing before and after the match.\n\n![Viewing the decrypted payload match data after entering your private key in the dashboard](https://developers.cloudflare.com/_astro/payload-decrypted.DoVOmjx4_ZWSMiK.webp)\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Managed Ruleset  Cloudflare Web Application Firewall (WAF) docs\ndescription: Created by the Cloudflare security team, this ruleset provides fast\n  and effective protection for all of your applications. The ruleset is updated\n  frequently to cover new vulnerabilities and reduce false positives.\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/\n  md: https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/index.md\n---\n\nCreated by the Cloudflare security team, this ruleset provides fast and effective protection for all of your applications. The ruleset is updated frequently to cover new vulnerabilities and reduce false positives.\n\nCloudflare recommends that you enable the rules whose tags correspond to your technology stack. For example, if you use WordPress, enable the rules tagged with `wordpress`.\n\nCloudflares [WAF changelog](https://developers.cloudflare.com/waf/change-log/) allows you to monitor ongoing changes to the WAF's managed rulesets.\n\nNote\n\nSome rules in the Cloudflare Managed Ruleset are disabled by default, intending to strike a balance between providing the right protection and reducing the number of false positives.\n\nIt is not recommended that you enable all the available rules using overrides, since it may affect legitimate traffic, unless you are running a proof of concept (PoC) to understand what kind of requests the WAF can block.\n\n## Configure in the dashboard\n\nYou can configure the following settings of the Cloudflare Managed Ruleset in the Cloudflare dashboard:\n\n* **Set the action to perform.** When you define an action for the ruleset, you override the default action defined for each rule. The available actions are: *Managed Challenge*, *Block*, *JS Challenge*, *Log*, and *Interactive Challenge*. To remove the action override, set the ruleset action to *Default*.\n* **Override the action performed by individual rules or rules with specific tags.** The available actions are: *Managed Challenge*, *Block*, *JS Challenge*, *Log*, and *Interactive Challenge*.\n* **Disable specific rules or rules with specific tags.**\n* **Customize the filter expression.** With a custom expression, the Cloudflare Managed Ruleset applies only to a subset of the incoming requests.\n* **Configure [payload logging](https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure/)**.\n\nFor details on configuring a managed ruleset in the dashboard, refer to [Configure a managed ruleset](https://developers.cloudflare.com/waf/managed-rules/deploy-zone-dashboard/#configure-a-managed-ruleset).\n\n## Configure via API\n\nTo enable the Cloudflare Managed Ruleset for a given zone via API, create a rule with `execute` action in the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) for the `http_request_firewall_managed` phase.\n\n### Example\n\nThe following example deploys the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/) to the `http_request_firewall_managed` phase of a given zone (`$ZONE_ID`) by creating a rule that executes the managed ruleset.\n\n1. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the definition of the entry point ruleset for the `http_request_firewall_managed` phase. You will need the [zone ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) for this task.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. If the entry point ruleset already exists (that is, if you received a `200 OK` status code and the ruleset definition), take note of the ruleset ID in the response. Then, invoke the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add an `execute` rule to the existing ruleset deploying the Cloudflare Managed Ruleset (with ID `efb7b8c949ac4650a09736fc376e9aee`). By default, the rule will be added at the end of the list of rules already in the ruleset.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. If the entry point ruleset does not exist (that is, if you received a `404 Not Found` status code in step 1), create it using the [Create a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation. Include a single rule in the `rules` array that executes the Cloudflare Managed Ruleset (with ID `efb7b8c949ac4650a09736fc376e9aee`) for all incoming requests in the zone.",
      "language": "unknown"
    },
    {
      "code": "### Next steps\n\nTo configure the Cloudflare Managed Ruleset via API, create [overrides](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/) using the Rulesets API. You can perform the following configurations:\n\n* Specify the action to perform for all the rules in the ruleset by creating a ruleset override.\n\n* Disable or customize the action of individual rules by creating rule overrides.\n\nFor examples of creating overrides using the API, refer to [Override a managed ruleset](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/).\n\n### More resources\n\nFor more information on working with managed rulesets via API, refer to [Work with managed rulesets](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/) in the Ruleset Engine documentation.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Exposed Credentials Check Managed Ruleset  Cloudflare Web\n  Application Firewall (WAF) docs\ndescription: The Cloudflare Exposed Credentials Check Managed Ruleset is a set\n  of pre-configured rules for well-known CMS applications that perform a lookup\n  against a public database of stolen credentials.\nlastUpdated: 2025-08-22T14:24:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/reference/exposed-credentials-check/\n  md: https://developers.cloudflare.com/waf/managed-rules/reference/exposed-credentials-check/index.md\n---\n\nThe Cloudflare Exposed Credentials Check Managed Ruleset is a set of pre-configured rules for well-known CMS applications that perform a lookup against a public database of stolen credentials.\n\nRecommendation: Use leaked credentials detection instead\n\nCloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead of Cloudflare Exposed Credentials Check, which refers to a previous implementation.\\\nFor more information on upgrading your current Exposed Credentials Check configuration, refer to the [upgrade guide](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/upgrade-to-leaked-credentials-detection/).\n\nThe managed ruleset includes rules for the following CMS applications:\n\n* WordPress\n* Joomla\n* Drupal\n* Ghost\n* Plone\n* Magento\n\nAdditionally, this managed ruleset also includes generic rules for other common patterns:\n\n* Check forms submitted using a `POST` request containing `username` and `password` arguments\n* Check credentials sent as JSON with `email` and `password` keys\n* Check credentials sent as JSON with `username` and `password` keys\n\nThe default action for the rules in managed ruleset is *Exposed-Credential-Check Header* (named `rewrite` in the API and in [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/#sampled-logs)).\n\nThe managed ruleset also contains a rule that blocks HTTP requests already containing the `Exposed-Credential-Check` HTTP header used by the *Exposed-Credential-Check Header* action. These requests could be used to trick the origin into believing that a request contained (or did not contain) exposed credentials.\n\nFor more information on exposed credential checks, refer to [Check for exposed credentials](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/).\n\n## Configure in the dashboard\n\nNote\n\nThe Exposed Credentials Check managed ruleset is only shown in the Cloudflare dashboard if you have previously deployed it. Cloudflare recommends that you use [leaked credentials detection](https://developers.cloudflare.com/waf/detections/leaked-credentials/) instead.\n\nYou can configure the following settings of the Cloudflare Exposed Credentials Check Managed Ruleset in the dashboard:\n\n* **Set the action to perform.** When you define an action for the ruleset, you override the default action defined for each rule. The available actions are: *Managed Challenge*, *Block*, *JS Challenge*, *Log*, and *Interactive Challenge*. To remove the action override, set the ruleset action to *Default*.\n* **Override the action performed by individual rules.** The available actions are: *Exposed-Credential-Check Header*, *Managed Challenge*, *Block*, *JS Challenge*, *Log*, and *Interactive Challenge*. For more information, refer to [Available actions](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/#available-actions).\n* **Disable specific rules.**\n* **Customize the filter expression.** With a custom expression, the Cloudflare Exposed Credentials Check Managed Ruleset applies only to a subset of the incoming requests.\n* **Configure [payload logging](https://developers.cloudflare.com/waf/managed-rules/payload-logging/configure/)**.\n\nFor details on configuring a managed ruleset in the dashboard, refer to [Configure a managed ruleset](https://developers.cloudflare.com/waf/managed-rules/deploy-zone-dashboard/#configure-a-managed-ruleset).\n\n## Configure via API\n\nTo enable the Cloudflare Exposed Credentials Check Managed Ruleset for a given zone via API, create a rule with `execute` action in the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) for the `http_request_firewall_managed` phase.\n\n### Example\n\nThis example deploys the Cloudflare Exposed Credentials Check Managed Ruleset to the `http_request_firewall_managed` phase of a given zone (`$ZONE_ID`) by creating a rule that executes the managed ruleset. The rules in the managed ruleset are executed for all incoming requests.\n\n1. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the definition of the entry point ruleset for the `http_request_firewall_managed` phase. You will need the [zone ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) for this task.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. If the entry point ruleset already exists (that is, if you received a `200 OK` status code and the ruleset definition), take note of the ruleset ID in the response. Then, invoke the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add an `execute` rule to the existing ruleset deploying the Cloudflare Exposed Credentials Check Managed Ruleset (with ID `c2e184081120413c86c3ab7e14069605`). By default, the rule will be added at the end of the list of rules already in the ruleset.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. If the entry point ruleset does not exist (that is, if you received a `404 Not Found` status code in step 1), create it using the [Create a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation. Include a single rule in the `rules` array that executes the Cloudflare Exposed Credentials Check Managed Ruleset (with ID `c2e184081120413c86c3ab7e14069605`) for all incoming requests in the zone.",
      "language": "unknown"
    },
    {
      "code": "### Next steps\n\nTo configure the Exposed Credentials Check Managed Ruleset via API, create [overrides](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/) using the Rulesets API. You can perform the following configurations:\n\n* Specify the action to perform for all the rules in the ruleset by creating a ruleset override.\n\n* Disable or customize the action of individual rules by creating rule overrides.\n\nFor examples of creating overrides using the API, refer to [Override a managed ruleset](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/).\n\nChecking for exposed credentials in custom rules\n\nBesides activating the Exposed Credentials Check Managed Ruleset, you can also check for exposed credentials in custom rules. One common use case is to create custom rules on the end user authentication endpoints of your application to check for exposed credentials.\n\nFor more information, refer to [Create a custom rule checking for exposed credentials](https://developers.cloudflare.com/waf/managed-rules/check-for-exposed-credentials/configure-api/#create-a-custom-rule-checking-for-exposed-credentials).\n\n### More resources\n\nFor more information on working with managed rulesets via API, refer to [Work with managed rulesets](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/) in the Ruleset Engine documentation.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare Sensitive Data Detection  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: \"The Cloudflare Sensitive Data Detection managed ruleset helps\n  identify data leaks generated by your origin servers. Its rules run on the\n  body of the response looking for patterns of common sensitive data,\n  including:\"\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/reference/sensitive-data-detection/\n  md: https://developers.cloudflare.com/waf/managed-rules/reference/sensitive-data-detection/index.md\n---\n\nNote\n\nThis feature requires an Enterprise plan with a paid add-on.\n\nThe Cloudflare Sensitive Data Detection managed ruleset helps identify data leaks generated by your origin servers. Its rules run on the body of the response looking for patterns of common sensitive data, including:\n\n* [Personally identifiable information](https://www.cloudflare.com/learning/privacy/what-is-pii/) (PII)  For example, passport numbers.\n* Financial information  For example, credit card numbers.\n* Secrets  For example, API keys.\n\nTurning on Cloudflare Sensitive Data Detection will not introduce additional latency, since the detection occurs outside the response path. For this reason, rules are always deployed with the *Log* action (you cannot block a response that was already sent), providing you with visibility on the sensitive data leaving your origin servers.\n\nSome rules in the Cloudflare Sensitive Data Detection managed ruleset are disabled by default, to prevent false positives and a large number of logged events. You should review the PII and sensitive data relevant to your application and turn on the appropriate rules in the managed ruleset, according to the instructions in the following sections.\n\n## Additional remarks\n\nWhen turned on, Cloudflare Sensitive Data Detection will check all responses sent to visitors (according to your custom filter expression, if defined), including responses from cache and responses handled by [Workers](https://developers.cloudflare.com/workers/).\n\nThe detection will handle text, HTML, JSON, and XML content in the response up to 1 MB.\n\nCurrently, Cloudflare Sensitive Data Detection does not support [matched payload logging](https://developers.cloudflare.com/waf/managed-rules/payload-logging/).\n\n***\n\n## Configure in the dashboard\n\n* Old dashboard\n\n  To configure Cloudflare Sensitive Data Detection in the Cloudflare dashboard, go to **Security** > **Sensitive Data**.\n\n  You can turn the managed ruleset on or off, and configure the following settings:\n\n  * Turn on or off specific rules or rules with specific tags.\n  * Customize the filter expression. With a custom expression, Cloudflare Sensitive Data Detection applies only to a subset of the incoming requests.\n\n* New dashboard\n\n  To enable Cloudflare Sensitive Data Detection:\n\n  1. In the Cloudflare dashboard, go to the Security **Settings** page.\n\n     [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/:zone/security/settings)\n\n  2. (Optional) Filter by **Detections tools**.\n\n  3. Turn on **Sensitive data detection**.\n\n  To adjust the scope of the managed ruleset or turn off specific rules:\n\n  1. In the **Settings** page, under **Sensitive data detection**, select **Configured ruleset**.\n  2. To apply the managed ruleset for a subset of incoming requests, select **Custom filter expression** and define the filter expression.\n  3. Select **Next**.\n  4. To turn specific rules on or off, select **Browse rules** and use the toggle next to each rule to turn it on or off.\n  5. Select **Next**, and then select **Save**.\n\nFor details on configuring a managed ruleset in the dashboard, refer to [Configure a managed ruleset](https://developers.cloudflare.com/waf/managed-rules/deploy-zone-dashboard/#configure-a-managed-ruleset).\n\n## Configure via API\n\nTo enable Cloudflare Sensitive Data Detection for a given zone using the API, create a rule with `execute` action in the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) for the `http_response_firewall_managed` phase.\n\n### Example\n\nThis example deploys the Cloudflare Sensitive Data Detection managed ruleset to the `http_response_firewall_managed` phase of a given zone (`$ZONE_ID`) by creating a rule that executes the managed ruleset. The rules in the managed ruleset are executed for all incoming requests.\n\n1. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the definition of the entry point ruleset for the `http_response_firewall_managed` phase. You will need the [zone ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) for this task.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. If the entry point ruleset already exists (that is, if you received a `200 OK` status code and the ruleset definition), take note of the ruleset ID in the response. Then, invoke the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation to add an `execute` rule to the existing ruleset deploying the Cloudflare Sensitive Data Detection managed ruleset (with ID `e22d83c647c64a3eae91b71b499d988e`). By default, the rule will be added at the end of the list of rules already in the ruleset.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. If the entry point ruleset does not exist (that is, if you received a `404 Not Found` status code in step 1), create it using the [Create a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/create/) operation. Include a single rule in the `rules` array that executes the Cloudflare Sensitive Data Detection managed ruleset (with ID `e22d83c647c64a3eae91b71b499d988e`) for all incoming requests in the zone.",
      "language": "unknown"
    },
    {
      "code": "### Next steps\n\nTo configure the Cloudflare Sensitive Data Detection managed ruleset via API, create [overrides](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/) using the Rulesets API. You can perform the following configurations:\n\n* Disable individual rules by creating rule overrides.\n\nFor examples of creating overrides using the API, refer to [Override a managed ruleset](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/override-managed-ruleset/).\n\n### More resources\n\nFor more information on working with managed rulesets via API, refer to [Work with managed rulesets](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/) in the Ruleset Engine documentation.\n\n## Review detected leaks\n\nTo check for any data leaks detected by Cloudflare Sensitive Data Detection, you can do the following:\n\n* Regularly check [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/) for any events generated by the managed ruleset.\n* Configure [WAF alerts](https://developers.cloudflare.com/waf/reference/alerts/) to be alerted of any spike of WAF events. For the Advanced Security Events Alert, you can filter by one or more domains on Enterprise plans and by the `Data Loss Protection` service to receive specific alerts about Sensitive Data Detection.\n\n</page>\n\n<page>\n---\ntitle: Cloudflare OWASP Core Ruleset  Cloudflare Web Application Firewall (WAF) docs\ndescription: The Cloudflare OWASP Core Ruleset is Cloudflare's implementation of\n  the OWASP ModSecurity Core Rule Set (CRS). Cloudflare routinely monitors for\n  updates from OWASP based on the latest version available from the official\n  code repository.\nlastUpdated: 2024-11-18T11:58:34.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/\n  md: https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/index.md\n---\n\nThe Cloudflare OWASP Core Ruleset is Cloudflare's implementation of the [OWASP ModSecurity Core Rule Set](https://owasp.org/www-project-modsecurity-core-rule-set/) (CRS). Cloudflare routinely monitors for updates from OWASP based on the latest version available from the official code repository.\n\nThe Cloudflare OWASP Core Ruleset is designed to work as a single entity to calculate a [threat score](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/concepts/#request-threat-score) and execute an action based on that score. When a rule in the ruleset matches a request, the threat score increases according to the rule score. If the final threat score is greater than the configured [score threshold](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/concepts/#score-threshold), Cloudflare executes the action configured in the last rule of the ruleset.\n\nNote\n\nThe Cloudflare OWASP Core Ruleset is Cloudflare's implementation of the OWASP ModSecurity Core Rule Set, which is different from the [OWASP Top 10](https://owasp.org/www-project-top-ten/).\n\nThe OWASP Top 10 is a list of the most severe security risks that can affect applications. Some of the identified security risks can be addressed by the OWASP Core Ruleset, but other risks cannot be protected by a web application firewall, such as the following:\n\n* Insecure Design\n* Identification and Authentication Failures\n* Security Logging and Monitoring Failures\n\nThese risks depend more on how the application is built or how the entire monitoring pipeline is set up.\n\n## Resources\n\n* [Concepts](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/concepts/)\n* [Evaluation example](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/example/)\n* [Configure in the dashboard](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/configure-dashboard/)\n* [Configure via API](https://developers.cloudflare.com/waf/managed-rules/reference/owasp-core-ruleset/configure-api/)\n* [Configure in Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-managed-rulesets/#configure-the-owasp-paranoia-level-score-threshold-and-action)\n\n</page>\n\n<page>\n---\ntitle: Add an exception via API  Cloudflare Web Application Firewall (WAF) docs\ndescription: To add a managed rules exception using the API, create a rule with\n  skip action in a phase entry point ruleset of the\n  http_request_firewall_managed phase. You can define exceptions at the account\n  level and at the zone level. Exceptions are also called skip rules.\nlastUpdated: 2025-07-10T15:46:55.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/define-api/\n  md: https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/define-api/index.md\n---\n\nTo add a managed rules exception using the API, create a rule with `skip` action in a [phase entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) of the `http_request_firewall_managed` phase. You can define exceptions at the account level and at the zone level. Exceptions are also called skip rules.\n\nTo configure the exception, define the `action_parameters` object according to the exception type. Refer to the following examples:\n\n* [Skip all remaining rules](#skip-all-remaining-rules)\n* [Skip the Cloudflare Managed Ruleset](#skip-the-cloudflare-managed-ruleset)\n* [Skip one or more rules of WAF managed rulesets](#skip-one-or-more-rules-of-waf-managed-rulesets)\n\nFor more information on creating exceptions using the API, refer to [Create an exception](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/create-exception/) in the Ruleset Engine documentation.\n\nRule execution order\n\nRules with `skip` action only apply to rules with `execute` action listed **after** them. If you add a rule with `skip` action at the end of the rules list, nothing will be skipped.\n\n## Examples\n\n### Skip all remaining rules\n\nThe following example adds a rule that skips all remaining rules in the entry point ruleset for requests matching the `dev.example.com` hostname.\n\n1. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the current configuration of the entry point ruleset of the `http_request_firewall_managed` phase.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Save the entry point ruleset ID (`060013b1eeb14c93b0dcd896537e0d2c`) for the next step.\n\n2. Invoke the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation (a `POST` request) to add an exception (or skip rule) at the beginning of the rules list, since a skip rule applies only to rules listed after it. The exact rule location is defined in the [`position` object](https://developers.cloudflare.com/ruleset-engine/rulesets-api/add-rule/#define-the-rule-position-in-the-ruleset).",
      "language": "unknown"
    },
    {
      "code": "For more information on skipping all remaining rules via API, refer to [Create an exception](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/create-exception/#skip-all-remaining-rules) in the Ruleset Engine documentation.\n\n### Skip the Cloudflare Managed Ruleset\n\nThe following example adds a rule that skips the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/) for requests matching the `dev.example.com` hostname.\n\n1. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the current configuration of the entry point ruleset of the `http_request_firewall_managed` phase.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Identify the rule deploying the Cloudflare Managed Ruleset by searching for an `execute` rule with `action_parameters` > `id` equal to efb7b8c949ac4650a09736fc376e9aee (the managed ruleset ID).\n\n   Note\n\n   To get the IDs of existing WAF managed rulesets, refer to [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/#available-managed-rulesets) or use the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation.\n\n   Save the following IDs for the next step:\n\n   * The ID of the entry point ruleset (`060013b1eeb14c93b0dcd896537e0d2c` in this example)\n   * The ID of the `execute` rule deployment the managed ruleset (`1bdb49371c1f46958fc8b985efcb79e7` in this example)\n\n2. Invoke the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation (a `POST` request) to add an exception (or skip rule) immediately before the `execute` rule deploying the Cloudflare Managed Ruleset, since a skip rule applies only to rules listed after it. The exact rule location is defined in the [`position` object](https://developers.cloudflare.com/ruleset-engine/rulesets-api/add-rule/#define-the-rule-position-in-the-ruleset).",
      "language": "unknown"
    },
    {
      "code": "For more information on skipping one or more managed rulesets via API, refer to [Create an exception](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/create-exception/#skip-one-or-more-managed-rulesets) in the Ruleset Engine documentation.\n\n### Skip one or more rules of WAF managed rulesets\n\nThe following example adds a rule that skips a particular rule of the [Cloudflare Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/reference/cloudflare-managed-ruleset/) for requests matching the `dev.example.com` hostname.\n\n1. Invoke the [Get a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/) operation to obtain a list of rules in the Cloudflare Managed Ruleset (ruleset ID efb7b8c949ac4650a09736fc376e9aee ).\\\n   You can get the managed ruleset details using the account-level endpoint ([Get an account ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/)) or the zone-level endpoint ([Get a zone ruleset](https://developers.cloudflare.com/api/resources/rulesets/methods/get/)).\n\n   Note\n\n   To get the IDs of existing WAF managed rulesets, refer to [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/#available-managed-rulesets) or use the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Take note of the ID of the rule you want to skip (d9e350f1b72d4730899c8a420e48a85d in this example).\n\n2. Invoke the [Get a zone entry point ruleset](https://developers.cloudflare.com/api/resources/rulesets/subresources/phases/methods/get/) operation to obtain the current configuration of the [entry point ruleset](https://developers.cloudflare.com/ruleset-engine/about/rulesets/#entry-point-ruleset) of the `http_request_firewall_managed` phase.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "Identify the rule deploying the Cloudflare Managed Ruleset by searching for an `execute` rule with `action_parameters` > `id` equal to efb7b8c949ac4650a09736fc376e9aee (the managed ruleset ID).\n\n   Note\n\n   To get the IDs of existing WAF managed rulesets, refer to [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/#available-managed-rulesets) or use the [List account rulesets](https://developers.cloudflare.com/api/resources/rulesets/methods/list/) operation.\n\n   Save the following IDs for the next step:\n\n   * The ID of the entry point ruleset (`060013b1eeb14c93b0dcd896537e0d2c` in this example)\n   * The ID of the `execute` rule deploying the Cloudflare Managed Ruleset (`1bdb49371c1f46958fc8b985efcb79e7` in this example)\n\n   You will also use the following IDs:\n\n   * The ID of the Cloudflare Managed Ruleset (efb7b8c949ac4650a09736fc376e9aee )\n   * The ID of the rule to skip (d9e350f1b72d4730899c8a420e48a85d in this example)\n\n3. Invoke the [Create a zone ruleset rule](https://developers.cloudflare.com/api/resources/rulesets/subresources/rules/methods/create/) operation (a `POST` request) to add an exception (or skip rule) immediately before the `execute` rule deploying the Cloudflare Managed Ruleset, since a skip rule applies only to rules listed after it.",
      "language": "unknown"
    },
    {
      "code": "The `action_parameters` > `rules` object contains the ID of the Cloudflare Managed Ruleset with an associated list of rule IDs to skip (in this case, only one rule). The [`position` object](https://developers.cloudflare.com/ruleset-engine/rulesets-api/add-rule/#define-the-rule-position-in-the-ruleset) defines the exact rule placement in the entry point ruleset (before rule `1bdb49371c1f46958fc8b985efcb79e7`).\n\nFor more information on skipping one or more rules of managed rulesets via API, refer to [Create an exception](https://developers.cloudflare.com/ruleset-engine/managed-rulesets/create-exception/#skip-one-or-more-rules-of-managed-rulesets) in the Ruleset Engine documentation.\n\n</page>\n\n<page>\n---\ntitle: Add a WAF exception in the dashboard  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: Use the Cloudflare dashboard to create exceptions that skip the\n  execution of WAF managed rulesets or specific ruleset rules.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/define-dashboard/\n  md: https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/define-dashboard/index.md\n---\n\n## 1. Go to the zone or account dashboard page\n\nTo add an exception at the zone level:\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com), and select your account and domain.\n  2. Go to **Security** > **WAF** > **Managed rules** tab.\n  3. Select **Add exception**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n     [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n  2. Select **Create** > **Managed rules**.\n\nTo add an exception at the account level (Enterprise plans only):\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. Select **Deploy** > **Deploy managed exception**.\n\n## 2. Define basic exception parameters\n\n1. In **Exception name**, enter a name for the exception.\n\n   ![The Add exception page in the Cloudflare dashboard](https://developers.cloudflare.com/_astro/waf-exception-create.DGVMUWUU_1cYsQm.webp)\n\n2. In **When incoming requests match**, specify a filter expression that defines the conditions for applying the exception. When the expression matches, the WAF will evaluate the exception skipping one or more rules of WAF managed rulesets. The filter expression uses the [Rules language](https://developers.cloudflare.com/ruleset-engine/rules-language/).\n\n## 3. Select the rules to skip\n\n1. In **Then**, select the [exception type](https://developers.cloudflare.com/waf/managed-rules/waf-exceptions/#types-of-exceptions) that determines which rules to skip:\n\n   * **Skip all remaining rules**: Skips all remaining rules of WAF managed rulesets. If you select this option, proceed to [4. Create the exception](#4-create-the-exception).\n   * **Skip specific rules from a Managed Ruleset**: Skips one or more rules of a managed ruleset.\n\n2. Select **Select ruleset**.\n\n3. Next to the ruleset containing the rule(s) you wish to skip, select **Select rules**.\n\n4. **A) To skip one or more rules in the ruleset:**\n\n   1. Search for a rule using the available filters. You can search by description, rule ID, or tag. For example, in the Cloudflare OWASP Core Ruleset you can search for `920460` to find the rule `920460: Abnormal character escapes in request`.\n   2. Select the checkbox next to the rule(s) you want to skip.\n   3. If required, search for other rules and select them. The dashboard keeps a list of the rules you selected between searches.\n\n   **B) To skip all the rules in the ruleset:**\n\n   1. Select all the rules in the current page by selecting the checkbox in the table header, near **Description/Rule ID**. The table header will display `10 rules selected (of <TOTAL> rules)`.\n\n      ![Rule selection page showing the option to select all the rules in the ruleset](https://developers.cloudflare.com/_astro/waf-exception-select-all-rules.CBp6LP58_Z1b8sqx.webp)\n\n   2. Select **Select all \\<TOTAL> rules** in the table header to select all the rules across all pages.\n\n5. Select **Next**.\n\n## 4. Create the exception\n\n1. (Optional) To disable logging for requests matching the exception, disable **Log matching requests**.\n\n2. To save and deploy your exception, select **Deploy**. If you are not ready to deploy your exception, select **Save as Draft**.\n\n## 5. (Optional) Edit the exception\n\nTo edit an exception at the zone level:\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com), and select your account and domain.\n  2. Go to **Security** > **WAF** > **Managed rules** tab.\n  3. Find the exception you want to edit and select its name. Exceptions are rules listed with **Action** = **Skip**.\n  4. Once you have finished making changes, select **Save**.\n\n  To delete an exception listed in the **Managed rules** tab, select the three dots > **Delete**.\n\n* New dashboard\n\n  1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n     [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n  2. (Optional) Filter by **Managed Rules**.\n\n  3. Find the exception you want to edit and select its name. Exceptions are rules listed with **Action** = **Skip**.\n\n  4. Once you have finished making changes, select **Save**.\\\n     Alternatively, to delete the exception, select **Delete exception**.\n\nTo edit an exception at the account level (Enterprise plans only):\n\n1. In the Cloudflare dashboard, go to the **WAF** page.\n\n   [Go to **WAF**](https://dash.cloudflare.com/?to=/:account/application-security/waf)\n\n2. Go to the **Managed rulesets** tab.\n\n3. Find the exception you want to edit and select its name. Exceptions are rules listed with **Action** = **Skip**.\n\n4. Once you have finished making changes, select **Save**.\\\n   Alternatively, to delete the exception, select **Delete exception**.\n\nNote\n\nExceptions only apply to rules executing a managed ruleset listed after them. For example, if you are skipping a rule belonging to the Cloudflare OWASP Core Ruleset, make sure the exception is listed in the rules list before the *Execute* rule deploying this managed ruleset.\n\n</page>\n\n<page>\n---\ntitle: Firewall rules upgrade  Cloudflare Web Application Firewall (WAF) docs\ndescription: \"Cloudflare upgraded existing firewall rules into custom rules.\n  With custom rules, you get the same level of protection and a few additional\n  features. Custom rules are available in the Cloudflare dashboard in the\n  following location:\"\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/reference/legacy/firewall-rules-upgrade/\n  md: https://developers.cloudflare.com/waf/reference/legacy/firewall-rules-upgrade/index.md\n---\n\nCloudflare upgraded existing [firewall rules](https://developers.cloudflare.com/firewall/) into [custom rules](https://developers.cloudflare.com/waf/custom-rules/). With custom rules, you get the same level of protection and a few additional features. Custom rules are available in the Cloudflare dashboard in the following location:\n\n* Old dashboard: **Security** > **WAF** > **Custom rules**.\n* New security dashboard: **Security** > **Security rules**.\n\nDeprecation notice\n\n**Cloudflare Firewall Rules is now deprecated.** The Firewall Rules API and Filters API, as well as the `cloudflare_firewall_rule` and `cloudflare_filter` Terraform resources, are no longer supported since 2025-06-15. If you have any automation based on these APIs and resources, you must migrate to the new APIs and resources to avoid any issues.\n\nIf you have not upgraded to WAF custom rules yet, you may have some invalid configuration that prevents the upgrade from happening. In this case, contact your account team to get help with the upgrade to WAF custom rules.\n\n## Main differences\n\nThe main differences between firewall rules and WAF custom rules are the following:\n\n* [Improved response for Block action](#improved-response-for-block-action)\n* [Different error page for blocked requests](#different-error-page-for-blocked-requests)\n* [New Skip action replacing both Allow and Bypass actions](#new-skip-action-replacing-both-allow-and-bypass-actions)\n* [Custom rules are evaluated in order](#custom-rules-are-evaluated-in-order)\n* [Logs and events](#logs-and-events)\n* [New API and Terraform resources](#new-api-and-terraform-resources)\n\n### Improved response for Block action\n\nIn WAF custom rules you can [customize the response of the *Block* action](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/#configure-a-custom-response-for-blocked-requests).\n\nThe default block response is a Cloudflare standard HTML page. If you need to send a custom response for *Block* actions, configure the custom rule to return a fixed response with a custom response code (403, by default) and a custom body (HTML, JSON, XML, or plain text).\n\nNote\n\nCustom block response configurations are not returned by the Firewall Rules API. You must use the [Rulesets API](https://developers.cloudflare.com/waf/custom-rules/create-api/#example-b) to manage this new feature.\n\n### Different error page for blocked requests\n\nRequests blocked by a firewall rule with a *Block* action would get a Cloudflare [1020 error code](https://developers.cloudflare.com/support/troubleshooting/http-status-codes/cloudflare-1xxx-errors/error-1020/) response. Cloudflare users could customize this error page for a zone in **Error Pages** > **1000 class errors**.\n\nRequests blocked by a WAF custom rule will get a different response: the WAF block response. To customize the default block response, you can either:\n\n* Define a custom WAF block response for your entire zone in [**Error Pages**](https://dash.cloudflare.com/?to=/:account/:zone/error-pages) > **WAF block**. This error page will always have an HTML content type.\n* [Define a custom response](https://developers.cloudflare.com/waf/custom-rules/create-dashboard/#configure-a-custom-response-for-blocked-requests) for requests blocked by a specific WAF custom rule. This custom response supports other content types besides HTML.\n\nIf you have customized your 1XXX error page in Error Pages for requests blocked by firewall rules, you will need to create a new response page for blocked requests using one of the above methods.\n\nFor more information on Error Pages, refer to [Custom Errors](https://developers.cloudflare.com/rules/custom-errors/).\n\n### New Skip action replacing both Allow and Bypass actions\n\nFirewall Rules supported the *Allow* and *Bypass* actions, often used together. These actions were commonly used for handling known legitimate requests  for example, requests coming from trusted IP addresses.\n\nWhen a request triggered *Allow*, all remaining firewall rules were not evaluated, effectively allowing the request to continue to the next security product. The *Bypass* action was designed to specify which security products (such as WAF managed rules, rate limiting rules, and User Agent Blocking) should not run on the request triggering the action.\n\nWith Firewall Rules, if you wanted to stop running all security products for a given request, you would create two rules:\n\n* One rule with *Bypass* action (selecting all security products).\n* One rule with *Allow* action (to stop executing other firewall rules).\n\nThe requirement of having two rules to address this common scenario no longer applies to WAF custom rules. You should now [use the *Skip* action](https://developers.cloudflare.com/waf/custom-rules/skip/), which combines the *Allow* and *Bypass* actions. The *Skip* action fully replaces the *Allow* and *Bypass* actions, which are not supported in WAF custom rules.\n\nWith the *Skip* action you can do the following:\n\n* Stop running all the remaining custom rules (equivalent to the *Allow* action)\n* Avoid running other security products (equivalent to the *Bypass* action)\n* A combination of the above.\n\nYou can also select whether you want to log events matching the custom rule with the *Skip* action or not. This is especially useful when creating a positive security model to avoid logging large amounts of legitimate traffic.\n\nNote\n\nThe Firewall Rules API does not support the *Skip* action. When you create a custom rule with *Skip* action, it is translated to *Allow* and *Bypass* in the Firewall Rules API. You must use the [Rulesets API](https://developers.cloudflare.com/waf/custom-rules/skip/api-examples/) to fully use the new *Skip* action functionality.\n\n### Custom rules are evaluated in order\n\nFirewall rules actions had a specific [order of precedence](https://developers.cloudflare.com/firewall/cf-firewall-rules/actions/) when using [priority ordering](https://developers.cloudflare.com/firewall/cf-firewall-rules/order-priority/#managing-rule-evaluation-by-priority-order). In contrast, custom rules actions do not have such an order. Custom rules are always evaluated in order, and some actions like *Block* will stop the evaluation of other rules.\n\nFor example, if you were using priority ordering and had the following firewall rules with the same priority both matching an incoming request:\n\n* Firewall rule #1  Priority: 2 / Action: *Block*\n* Firewall rule #2  Priority: 2 / Action: *Allow*\n\nThe request would be allowed, since the *Allow* action in Firewall Rules would have precedence over the *Block* action.\n\nIn contrast, if you create two custom rules where both rules match an incoming request:\n\n* Custom rule #1  Action: *Block*\n* Custom rule #2  Action: *Skip* (configured to skip all remaining custom rules)\n\nThe request would be blocked, since custom rules are evaluated in order and the *Block* action will stop the evaluation of other rules.\n\nNote\n\nFor the custom rules converted from your existing firewall rules, Cloudflare will preserve your current order of execution.\n\n### Logs and events\n\nEvents logged by custom rules are shown in [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/) with `Custom Rules` as their source.\n\nYou may still find events generated by Firewall Rules in the Security Events page when you select a time frame including the days when the transition to custom rules occurred. Similarly, you may still find events with both *Skip* and *Allow* actions in the same view during the transition period.\n\n### New API and Terraform resources\n\nThe preferred API for managing WAF custom rules is the [Rulesets API](https://developers.cloudflare.com/waf/custom-rules/create-api/). The Rulesets API is used on all recent Cloudflare security products to provide a uniform user experience when interacting with our API. For more information on migrating to the Rulesets API, refer to [Relevant changes for API users](#relevant-changes-for-api-users).\n\nThe Firewall Rules API and Filters API are no longer supported since 2025-06-15. There is now a single list of rules for both firewall rules and WAF custom rules, and this list contains WAF custom rules. Thanks to an internal conversion process, the Firewall Rules API and Filters API return firewall rules/filters converted from these WAF custom rules until the APIs sunset date.\n\nIf you are using Terraform, you must update your configuration to use [`cloudflare_ruleset`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/ruleset) resources with the `http_request_firewall_custom` phase to manage custom rules. For more information on updating your Terraform configuration, refer to [Relevant changes for Terraform users](#relevant-changes-for-terraform-users).\n\n## Relevant changes for dashboard users\n\n**The Firewall Rules tab in the Cloudflare dashboard is now deprecated**. Firewall rules are displayed as [custom rules](https://developers.cloudflare.com/waf/custom-rules/) in the Cloudflare dashboard.\n\nFor users that have access to both products, the **Firewall rules** tab is only available in the old dashboard in **Security** > **WAF**.\n\n## Relevant changes for API users\n\n**The [Firewall Rules API](https://developers.cloudflare.com/firewall/api/cf-firewall-rules/) and the associated [Cloudflare Filters API](https://developers.cloudflare.com/firewall/api/cf-filters/) are now deprecated.** These APIs are no longer supported since 2025-06-15. You must manually update any automation based on the Firewall Rules API or Cloudflare Filters API to the [Rulesets API](https://developers.cloudflare.com/waf/custom-rules/create-api/) to prevent any issues. Rule IDs are different between firewall rules and custom rules, which may affect automated processes dealing with specific rule IDs.\n\nBefore the APIs sunset date, Cloudflare will internally convert your [Firewall Rules API](https://developers.cloudflare.com/firewall/api/cf-firewall-rules/) and [Filters API](https://developers.cloudflare.com/firewall/api/cf-filters/) calls into the corresponding [Rulesets API](https://developers.cloudflare.com/waf/custom-rules/create-api/) calls. The converted API calls between the Firewall Rules API/Filters API and the Rulesets API appear in audit logs as generated by Cloudflare and not by the actual user making the requests. There will be a single list of rules for both firewall rules and WAF custom rules.\n\nSome new features of WAF custom rules, like custom responses for blocked requests and the *Skip* action, are not supported in the Firewall Rules API. To take advantage of these features, Cloudflare recommends that you use the custom rules page in the Cloudflare dashboard or the Rulesets API.\n\nRefer to the WAF documentation for [examples of managing WAF custom rules using the Rulesets API](https://developers.cloudflare.com/waf/custom-rules/create-api/).\n\n## Relevant changes for Terraform users\n\n**The following Terraform resources from the Cloudflare provider are now deprecated:**\n\n* [`cloudflare_firewall_rule`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/firewall_rule)\n* [`cloudflare_filter`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/filter)\n\nThese resources are no longer supported since 2025-06-15. If you are using these resources to manage your Firewall Rules configuration, you must manually update any Terraform configuration to [`cloudflare_ruleset`](https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/ruleset) resources to prevent any issues.\n\nThere will be a single list of rules for both firewall rules and WAF custom rules.\n\nSome new features of WAF custom rules are not supported in the deprecated Terraform resources. To take advantage of these features, Cloudflare recommends that you use the `cloudflare_ruleset` resource.\n\nRefer to the documentation about Terraform for [examples of configuring WAF custom rules using Terraform](https://developers.cloudflare.com/terraform/additional-configurations/waf-custom-rules/).\n\n### Replace your configuration using `cf-terraforming`\n\nYou can use the [`cf-terraforming`](https://github.com/cloudflare/cf-terraforming) tool to generate the Terraform configuration for your current WAF custom rules (converted by Cloudflare from your firewall rules). Then, import the new resources to Terraform state.\n\nThe recommended steps for replacing your firewall rules (and filters) configuration in Terraform with a new ruleset configuration are the following.\n\n1. Run the following command to generate all ruleset configurations for a zone:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. The previous command may return additional ruleset configurations for other Cloudflare products also based on the [Ruleset Engine](https://developers.cloudflare.com/ruleset-engine/). Since you are migrating firewall rules to custom rules, keep only the Terraform resource for the `http_request_firewall_custom` phase and save it to a `.tf` configuration file. You will need the full resource name in the next step.\n\n3. Import the `cloudflare_ruleset` resource you previously identified into Terraform state using the `terraform import` command. For example:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "4. Run `terraform plan` to validate that Terraform now checks the state of the new `cloudflare_ruleset` resource, in addition to other existing resources already managed by Terraform. For example:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "5. Remove any state related to firewall rules and filters from your Terraform state:\n\n   Warning\n\n   You must remove firewall rules and filters from Terraform state before deleting their configuration from `.tf` configuration files to prevent issues.\n\n   1. Run the following command to find all resources related to firewall rules and filters:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "2. Run the `terraform state rm ...` command in dry-run mode to understand the impact of removing those resources without performing any changes:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. If the impact looks correct, run the same command without the `-dry-run` parameter to actually remove the resources from Terraform state:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "6. After removing firewall rules and filters resources from Terraform state, delete `cloudflare_filter` and `cloudflare_firewall_rule` resources from `.tf` configuration files.\n\n7. Run `terraform plan` to verify that the resources you deleted from configuration files no longer appear. You should not have any pending changes.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "For details on importing Cloudflare resources to Terraform and using the `cf-terraforming` tool, refer to the following resources:\n\n* [Import Cloudflare resources](https://developers.cloudflare.com/terraform/advanced-topics/import-cloudflare-resources/)\n* [`cf-terraforming` GitHub repository](https://github.com/cloudflare/cf-terraforming)\n\n## Final remarks\n\nAny unpaused firewall rules with paused [filters](https://developers.cloudflare.com/firewall/api/cf-filters/what-is-a-filter/) will become enabled when converted to custom rules.\n\n</page>\n\n<page>\n---\ntitle: Firewall rules  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-06-12T16:47:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/reference/legacy/link-firewall-rules/\n  md: https://developers.cloudflare.com/waf/reference/legacy/link-firewall-rules/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: WAF managed rules (previous version)  Cloudflare Web Application\n  Firewall (WAF) docs\ndescription: Managed rules, a feature of Cloudflare WAF (Web Application\n  Firewall), identifies and removes suspicious activity for HTTP GET and POST\n  requests.\nlastUpdated: 2025-06-12T16:47:15.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/reference/legacy/old-waf-managed-rules/\n  md: https://developers.cloudflare.com/waf/reference/legacy/old-waf-managed-rules/index.md\n---\n\nManaged rules, a feature of Cloudflare WAF (Web Application Firewall), identifies and removes suspicious activity for HTTP `GET` and `POST` requests.\n\nWarning\n\n* This page contains documentation about the previous implementation of WAF Managed Rules. For more information on the new version, refer to [WAF Managed Rules](https://developers.cloudflare.com/waf/managed-rules/).\n* All customers with access to the previous version of WAF managed rules can [upgrade to the new version](https://developers.cloudflare.com/waf/reference/legacy/old-waf-managed-rules/upgrade/).\n* The new WAF Managed Rules provide the [Cloudflare Free Managed Ruleset](https://developers.cloudflare.com/waf/managed-rules/) to all customers, including customers on a Free plan. Refer to the [announcement blog post](https://blog.cloudflare.com/waf-for-everyone/) for details.\n\nExamples of [malicious content](https://www.cloudflare.com/learning/security/what-is-web-application-security/) that managed rules identify include:\n\n* Common keywords used in comment spam (`XX`, `Rolex`, `Viagra`, etc.)\n* Cross-site scripting attacks (XSS)\n* SQL injections (SQLi)\n\nWAF managed rules (previous version) are available to Pro, Business, and Enterprise plans for any [subdomains proxied to Cloudflare](https://developers.cloudflare.com/dns/proxy-status/). Control managed rules settings in **Security** > **WAF** > **Managed rules**.\n\nManaged rules includes three packages:\n\n* [Cloudflare Managed Ruleset](#cloudflare-managed-ruleset)\n* [OWASP ModSecurity Core Rule Set](#owasp-modsecurity-core-rule-set)\n* Customer requested rules\n\nYou can use the sampled logs in the [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/) dashboard to review threats blocked by WAF managed rules.\n\n***\n\n## Cloudflare Managed Ruleset\n\nThe Cloudflare Managed Ruleset contains security rules written and curated by Cloudflare. Select a ruleset name under **Group** to reveal the rule descriptions.\n\n**Cloudflare Specials** is a group that provides core firewall security against [common attacks](https://www.cloudflare.com/learning/security/what-is-web-application-security/).\n\nNote\n\nCloudflare recommends that you always leave **Cloudflare Specials** enabled. Additionally, only enable rule groups that correspond to your technology stack. For example, if you use WordPress, enable the **Cloudflare WordPress** group.\n\nWhen viewing a ruleset, Cloudflare shows default actions for each rule listed under **Default mode**. The **Mode** available for individual rules within a specific **Cloudflare Managed Ruleset** are:\n\n* **Default**: Takes the default action listed under **Default mode** when viewing a specific rule.\n* **Disable**: Turns off the specific rule within the group.\n* **Block**: Discards the request.\n* **Interactive Challenge**: The visitor receives a challenge page that requires interaction.\n* **Simulate**: The request is allowed through but is logged in [sampled logs](https://developers.cloudflare.com/waf/analytics/security-events/#sampled-logs).\n\nCloudflare's [WAF changelog](https://developers.cloudflare.com/waf/change-log/) allows customers to monitor ongoing changes to the Cloudflare Managed Ruleset.\n\n***\n\n## OWASP ModSecurity Core Rule Set\n\nThe OWASP ModSecurity Core Rule Set package assigns a score to each request based on how many OWASP rules trigger. Some OWASP rules have a higher sensitivity score than others.\n\nAfter OWASP evaluates a request, Cloudflare compares the final score to the **Sensitivity** configured for the zone. If the score exceeds the sensitivity, the request is actioned based on the **Action** configured within **Package: OWASP ModSecurity Core Rule Set**:\n\n* **Block**: The request is discarded.\n* **Challenge**: The visitor receives an interactive challenge page.\n* **Simulate**: The request is allowed through but is logged in [sampled logs](https://developers.cloudflare.com/waf/analytics/security-events/#sampled-logs).\n\nThe sensitivity score required to trigger the WAF for a specific **Sensitivity** is as follows:\n\n* **Low**: 60 and higher\n* **Medium**: 40 and higher\n* **High**: 25 and higher\n\nFor AJAX requests, the following scores are applied instead:\n\n* **Low**: 120 and higher\n* **Medium**: 80 and higher\n* **High**: 65 and higher\n\nReview the entry in [sampled logs](https://developers.cloudflare.com/waf/analytics/security-events/#sampled-logs) for the final score and for the individual triggered rules.\n\n### Control the OWASP package\n\nThe OWASP ModSecurity Core Rule Set package contains several rules from the [OWASP project](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project). Cloudflare does not write or curate OWASP rules. Unlike the Cloudflare Managed Ruleset, specific OWASP rules are either turned *On* or *Off.*\n\nTo manage OWASP thresholds, set the **Sensitivity** to *Low*, *Medium*, or *High* under **Package: OWASP ModSecurity Core Rule Set**.\n\nSetting the **Sensitivity** to *Off* will disable the entire OWASP package including all its rules. Determining the appropriate **Sensitivity** depends on your business industry and operations. For instance, a *Low* setting is appropriate for:\n\n* Certain business industries more likely to trigger the WAF.\n* Large file uploads.\n\nWith a high sensitivity, large file uploads will trigger the WAF.\n\nCloudflare recommends initially setting the sensitivity to *Low* and reviewing for false positives before further increasing the sensitivity.\n\nNote\n\nSampled logs displays rule ID `981176` when a request is blocked by OWASP. Also, some OWASP rules listed in Sampled logs do not appear in the OWASP list of rules because disabling those rules is not recommended.\n\n***\n\n## Important remarks\n\n* Managed rules introduce a limited amount of latency.\n\n* Changes to WAF managed rules take about 30 seconds to update globally.\n\n* Cloudflare uses proprietary rules to filter traffic.\n\n* Established Websockets do not trigger managed rules for subsequent requests.\n\n* Managed rules parse JSON responses to identify vulnerabilities targeted at APIs. JSON payload parsing is limited to 128 KB.\n\n* Managed rules mitigate padding techniques. Cloudflare recommends the following:\n\n  1. Turn on rule with ID `100048`. This rule protects against padding type attacks, but it is not deployed by default because there is a high probability of causing false positives in customer environments. It is, however, important that customers tune their managed rules configuration.\n\n  2. Create a WAF custom rule using the [Expression Editor](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/edit-expressions/#expression-editor) depending on the need to check headers and/or body to block larger payloads (> 128 KB). Use the following fields for this purpose:\n\n     * [`http.request.body.truncated`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.body.truncated/)\n     * [`http.request.headers.truncated`](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/http.request.headers.truncated/)\n\n     You should test your rule in *Log* mode first (if available), since the rule might generate false positives.\n\n* There are a handful of managed rules that Cloudflare does not disable even if you turn off **Managed rules** in the Cloudflare dashboard, such as rules with IDs `WP0025B`, `100043A`, and `100030`.\n\n***\n\n## Related resources\n\n* [Troubleshoot WAF managed rules (previous version)](https://developers.cloudflare.com/waf/reference/legacy/old-waf-managed-rules/troubleshooting/)\n* [Security Events](https://developers.cloudflare.com/waf/analytics/security-events/)\n* [Cloudflare WAF](https://developers.cloudflare.com/waf/)\n* [Cloudflare's WAF changelog](https://developers.cloudflare.com/waf/change-log/)\n* [WAF custom rules](https://developers.cloudflare.com/waf/custom-rules/)\n\n</page>\n\n<page>\n---\ntitle: Rate Limiting (previous version)  Cloudflare Web Application Firewall\n  (WAF) docs\ndescription: Cloudflare Rate Limiting automatically identifies and mitigates\n  excessive request rates for specific URLs or for an entire domain.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/reference/legacy/old-rate-limiting/\n  md: https://developers.cloudflare.com/waf/reference/legacy/old-rate-limiting/index.md\n---\n\nCloudflare Rate Limiting automatically identifies and mitigates excessive request rates for specific URLs or for an entire domain.\n\nWarning\n\nThe information in this page refers to the previous version of rate limiting rules, which are billed based on usage.\n\nCloudflare is upgrading all rate limiting rules to the [new version of rate limiting rules](https://developers.cloudflare.com/waf/rate-limiting-rules/). For more information on what changed in the new version, refer to the [upgrade guide](https://developers.cloudflare.com/waf/reference/legacy/old-rate-limiting/upgrade/).\n\nRequest rates are calculated locally for individual Cloudflare data centers. The most common uses for Rate Limiting are:\n\n* Protect against [DDoS attacks](https://www.cloudflare.com/learning/ddos/glossary/denial-of-service/)\n* Protect against [Brute-force attack](https://www.cloudflare.com/learning/bots/brute-force-attack/)\n* Limit access to forum searches, API calls, or resources that involve database-intensive operations at your origin\n\nOnce an individual IPv4 address or IPv6 `/64` IP range exceeds a rule threshold, further requests to the origin server are blocked with an `HTTP 429` response status code. The response includes a `Retry-After` header to indicate when the client can resume sending requests.\n\nNote\n\nAre you trying to enable Rate Limiting? [Enable Rate Limiting](https://dash.cloudflare.com/?to=/:account/:zone/firewall/tools).\n\n### Rate limiting and SEO\n\nCached resources and known Search Engine crawlers are exempted from your rate limiting rules (previous version only). Therefore, they do not affect your website's [SEO ranking](https://developers.cloudflare.com/fundamentals/performance/improve-seo/).\n\n***\n\n## Availability\n\nNote\n\nCloudflare Rate Limiting (previous version) is an add-on service for all customer plans, available in **Security** > **WAF** > **Rate limiting rules**.\n\nThe number of allowed rate limiting rules depends on the domain's plan:\n\n| Plan | Rules | Rules matching response headers | Actions | Action Duration | Request Period |\n| - | - | - | - | - | - |\n| Free | 1 | 1 | Block | 1 minute or 1 hour | 10 seconds or 1 minute |\n| Pro | 10 | 1 | Block, Interactive Challenge, JS Challenge, Managed Challenge, or Log | 1 minute or 1 hour | 10 seconds or 1 minute |\n| Business | 15 | 10 | Block, Interactive Challenge, JS Challenge, Managed Challenge, or Log | 1 minute, 1 hour, or 24 hours | 10 seconds, 1 minute, or 10 minutes |\n| Enterprise | 100 | 10 | Block, Interactive Challenge, JS Challenge, Managed Challenge, or Log | Any duration entered between 10 seconds and 86,400 seconds (24 hours) | Any value entered between 10 seconds and 3,600 seconds (1 hour) |\n\nCloudflare Rate Limiting supports multiple levels of configuration control depending on the domains Cloudflare plan. The table below maps out what you can do based on your plan:\n\n| Order | Task | Available in |\n| - | - | - |\n| 1 | [Configure a basic rate limiting rule](#task-1-configure-a-basic-rate-limiting-rule) | All plans |\n| 2 | [Configure Advanced Criteria](#task-2-configure-advanced-criteria-only-business-and-enterprise-plans) | Business and Enterprise plans |\n| 3 | [Configure Advanced Response](#task-3-configure-advanced-response-only-business-and-enterprise-plans) | Business and Enterprise plans |\n| 4 | [Configure the Bypass option](#task-4-configure-the-bypass-option-enterprise-plans-only) | Enterprise plan |\n\n***\n\n## Components of a rate limiting rule\n\nA rate limiting rule consists of three distinct components:\n\n* [Request matching criteria](#request-matching-criteria)\n* [Rate matching criteria](#rate-matching-criteria)\n* [Rule mitigation](#rule-mitigation)\n\n### Request matching criteria\n\nIncoming requests are matched based on request path, request scheme, request method, and (optionally) origin response code.\n\n#### Request path\n\nFor example:\n\n* `http://example.com/example`\n* `http://example.com/example/*`\n\nThe request path is case insensitive. Patterns cannot match content after query strings (`?`) or anchors (`#`). An asterisk (`*`) matches any sequence of characters, including an empty sequence. For example:\n\n* `*.example.com/*` matches any path on any subdomain of `example.com`.\n* `*example.com/example.html` matches `example.html` on `example.com` or any subdomain of `example.com`.\n* `*` matches any page on your site.\n\nA request for `example.com/path` is not the same as `example.com/path/`. The only exception to this rule is the homepage: `example.com` matches `example.com/`.\n\n#### Request scheme\n\n*HTTP* or *HTTPS*. If none is specified, both are matched, and the rule will list \\_\\_ALL\\_\\_.\n\n#### Request method\n\n*POST* or *GET*. If none is specified, all methods are matched, and the rule will list \\_\\_ALL\\_\\_.\n\n#### (Optional) Origin response code\n\nFor example, match a rate limiting rule only when the origin server returns an `HTTP 401` or `403` status code. A triggered rule matching the response code criteria blocks subsequent requests from that client regardless of origin response code.\n\n### Rate matching criteria\n\nA rule can match on the number and time period of all requests coming from the same client.\n\n#### Number of requests\n\nSpecify a minimum of two requests. For single request blocking, make the path unavailable  for example, configure your origin server to return an `HTTP 403` status code.\n\n#### Request period\n\nA rule triggers once a clients requests exceed the threshold for the specified duration.\n\n### Rule mitigation\n\nRule mitigations consist of mitigation action and ban duration.\n\n#### Mitigation action\n\nRate limit actions are based on the domain plan as mentioned in [Availability](#availability):\n\n* **Block**: Cloudflare issues an `HTTP 429` error when the threshold is exceeded.\n* **JS Challenge**: Visitor must pass a Cloudflare JavaScript Challenge. If passed, Cloudflare allows the request.\n* **Managed Challenge (recommended)**: Visitor must pass a challenge dynamically chosen by Cloudflare based on the characteristics of the request. If passed, Cloudflare allows the request.\n* **Interactive Challenge**: Visitor must pass an Interactive Challenge. If passed, Cloudflare allows the request.\n* **Log**: Requests are logged in [Cloudflare Logs](https://developers.cloudflare.com/logs/). This helps test rules before applying to production.\n\nFor more information on challenge actions, refer to [Cloudflare challenges](https://developers.cloudflare.com/cloudflare-challenges/).\n\n#### Ban duration\n\nSetting a timeout shorter than the threshold causes the API to automatically increase the timeout to equal the threshold.\n\nVisitors hitting a rate limit receive a default HTML page if a custom [error page](https://developers.cloudflare.com/rules/custom-errors/) is not specified. In addition, Business and Enterprise customers can specify a response in the rule itself. Refer to [Configure Advanced Response](#task-3-configure-advanced-response-only-business-and-enterprise-plans) for details.\n\n***\n\n## Identify rate-limit thresholds\n\nTo identify a general threshold for Cloudflare Rate Limiting, divide 24 hours of uncached website requests by the unique visitors for the same 24 hours. Then, divide by the estimated average minutes of a visit. Finally, multiply by 4 (or larger) to establish an estimated threshold per minute for your website. A value higher than 4 is fine since most attacks are an order of magnitude above typical traffic rates.\n\nTo identify URL rate limits for specific URLs, use 24 hours of uncached requests and unique visitors for the specific URL. Adjust thresholds based on user reports and your own monitoring.\n\n***\n\n## Task 1: Configure a basic rate limiting rule\n\nThe following sections cover two common types of rate limiting rules.\n\n### Enable Protect your login\n\nRate Limiting features a one-click **Protect your login** tool that creates a rule to block the client for 15 minutes when sending more than 5 POST requests within 5 minutes. This is sufficient to block most brute-force attempts.\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n2. Go to **Security** > **WAF** > **Rate limiting rules**.\n3. Under **Rate Limiting**, select **Protect your login**.\n4. Enter **Rule Name** and **Enter your login URL** in the **Protect your login** dialog that appears.\n5. Select **Save**.\n6. The **Rule Name** appears in your **Rate Limiting** rules list.\n\n### Create a custom rate limiting rule\n\n1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com/), and select your account and domain.\n\n2. Go to **Security** > **WAF** > **Rate limiting rules**.\n\n3. Select **Create rate limiting rule**. A dialog opens where you specify the details of your new rule.\n\n   ![Create rate limiting rule pop-up dialog with an example rule configuration. The rule will block requests from IP addresses that exceed 150 requests per minute for one hour.](https://developers.cloudflare.com/_astro/old-rate-limiting-create-rule.DWk2_FbN_17qvTV.webp)\n\n4. Enter a descriptive name for the rule in **Rule Name**.\n\n5. For **If Traffic Matching the URL**, select an HTTP scheme from the dropdown and enter a URL.\n\n6. In **from the same IP address exceeds**, enter an integer greater than 1 to represent the number of requests in a sampling period.\n\n7. For **requests per**, select the sampling period (the period during which requests are counted). Domains on Enterprise plans can enter manually any duration between 10 seconds and 3,600 seconds (one hour).\n\n8. For **Then**, pick one of the available actions based on your plan. Review the [Rule mitigation](#rule-mitigation) section for details.\n\n9. If you selected *Block* or *Log*, for **matching traffic from that visitor for**, select how long to apply the option once a threshold has been triggered. Domains on Enterprise plans can enter any value between 10 seconds and 86,400 seconds (24 hours).\n\n10. To activate your new rule, select **Save and Deploy**.\n\nThe new rule appears in the rate limiting rules list.\n\nNote\n\nAny change to a rate limiting rule clears that rule's currently triggered actions. Take care when editing rate limiting rules to mitigate an ongoing attack.\n\nIn general, when setting a lower threshold:\n\n1. Leave existing rules in place and add a new rule with the lower threshold.\n2. Once the new rule is in place, wait for the action duration of the old rule to pass before deleting the old rule.\n\nWhen setting a higher threshold (due to legitimate client blocking), increase the threshold within the existing rule.\n\n***\n\n## Task 2: Configure Advanced Criteria (only Business and Enterprise plans)\n\nThe **Advanced Criteria** option configures which HTTP methods, header responses, and origin response codes to match for your rate limiting rule.\n\nTo configure your advanced criteria for a new or existing rule:\n\n1. Expand **Advanced Criteria**.\n\n   ![Available fields when configuring Advanced Criteria for a rate limiting rule.](https://developers.cloudflare.com/_astro/old-rate-limiting-advanced-criteria.DgGGmROd_Z2oF0qp.webp)\n\n2. Select a value from **Method(s)**. The default value is *ANY*, which matches all HTTP methods.\n\n3. Filter by **HTTP Response Header(s)**. Select **Add header response field** to include headers returned by your origin web server.\n\n   The `CF-Cache-Status` header appears by default so that Cloudflare serves cached resources rather than rate limit those resources. To also rate limit cached resources, remove this header by selecting **X** or enable **Also apply rate limit to cached assets**.\n\n   If you have more than one header under **HTTP Response Header(s)**, an *AND* boolean logic applies. To exclude a header, use the *Not Equals* option. Each header is case insensitive.\n\n4. Under **Origin Response code(s)**, enter the numerical value of each HTTP response code to match. Separate two or more HTTP codes with a comma (for example: `401, 403`).\n\n5. (Optional) Configure additional rate limiting features, based on your plan.\n\n6. Select **Save and Deploy**.\n\n***\n\n## Task 3: Configure Advanced Response (only Business and Enterprise plans)\n\nThe **Advanced Response** option configures the information format returned by Cloudflare when a rule's threshold is exceeded. Use **Advanced Response** when you wish to return static plain text or JSON content.\n\nTo configure a plain text or JSON response:\n\n1. Expand **Advanced Response**.\n\n   ![Available fields when configuring an Advance Response for a rate limiting rule.](https://developers.cloudflare.com/_astro/old-rate-limiting-advanced-response.BNkSJJK-_ZFufNu.webp)\n\n2. Select a **Response type** format other than the default: *Custom JSON* or *Custom TEXT*.\n\n3. Enter the plain text or JSON response you wish to return. The maximum response size is 32 KB.\n\n4. (Optional) Configure additional rate limiting features, based on your plan.\n\n5. Select **Save and Deploy**.\n\n### Using a custom HTML page or a redirect\n\nIf you wish to display a custom HTML page, configure an custom page for `HTTP 429` errors (`Too many requests`) in the dashboard. Cloudflare will display this page when you select *Default Cloudflare Rate Limiting Page* in **Response type** (the default value for the field).\n\nYou can use the following method to redirect a rate-limited client to a specific URL:\n\n1. Create an HTML page on your server that will redirect to the final URL of the page you wish to display. Include a [meta `refresh`](https://www.w3.org/TR/WCAG20-TECHS/H76.html) tag in the page content, like in the following example:",
      "language": "unknown"
    },
    {
      "code": "Take note of the public URL of the page you created.\n\n2. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/configurations)\n\n3. Go to **Error Pages**.\n\n4. Next to **Rate limiting block**, select the three dots > **Edit**.\n\n5. Select **Custom page**.\n\n6. In **Custom page address**, enter the URL of the page you created on your server  the page containing the meta `refresh` tag.\n\n7. Select **Save**.\n\nFollow the same approach if you wish to return plain text or JSON content but the response is larger than 32 KB. In this case, the redirect URL would be the URL of the plain text or JSON resource you would like to display.\n\nNotes\n\n* Your rate limiting rule must not match the redirect URL you included in the custom HTML page for `429` errors.\n* To protect from denial-of-service (DoS) attacks, the page for the redirect should only include resources cached by Cloudflare.\n\n***\n\n## Task 4: Configure the Bypass option (Enterprise plans only)\n\n**Bypass** creates an allowlist or exception so that no actions apply to a specific set of URLs even if the rate limit is matched.\n\nTo configure **Bypass**:\n\n1. Expand **Bypass**.\n\n2. In **Bypass rule for these URLs**, enter the URL(s) to exempt from the rate limiting rule. Enter each URL on its own line. An HTTP or HTTPS specified in the URL is automatically removed when the rule is saved and instead applies to both HTTP and HTTPS.\n\n   ![Configuring two URLs to bypass for a rate limiting rule (one per line).](https://developers.cloudflare.com/_astro/old-rate-limiting-bypass.BwmW-OaL_ZAvAcs.webp)\n\n3. (Optional) Configure additional rate limiting features, based on your plan.\n\n4. Select **Save and Deploy**.\n\n***\n\n## Analytics\n\nView rate limiting analytics for your zone in **Analytics & logs** > **Security**. Rate Limiting analytics uses solid lines to represent traffic that matches simulated requests and dotted lines to portray actual blocked requests. Logs generated by a rate limiting rule are only visible to Enterprise customers via [Cloudflare Logs](https://developers.cloudflare.com/logs/).\n\nCloudflare returns an `HTTP 429` error for blocked requests. Details on blocked requests per location are provided to Enterprise customers under **Status codes** in the analytics dashboard available at **Analytics** > **Traffic**.\n\nNote\n\n`HTTP 429` responses sent to website visitors will include any `HTTP 429` responses returned from the origin if the origin server also applies its own rate limiting.\n\n***\n\n## Order of rule execution\n\nRate limiting rules are evaluated from the most recently created rule to the oldest rule.\n\nFor example, if a request matches the following two rules:\n\n* Rule #1: Matching with `test.example.com` (created on 2024-03-01)\n* Rule #2: Matching with `*.example.com*` (created on 2024-03-12)\n\nThen rule #2 will trigger first because it was created last.\n\nAdditionally, when there is a match and the WAF applies a *Log* action, it continues evaluating other rate limiting rules, since *Log* is a non-terminating action. If the WAF applies any other action, no other rules will be evaluated.\n\n***\n\n## Limitations\n\nRate Limiting is designed to limit surges in traffic that exceed a user-defined rate. The system is not designed to allow a precise number of requests to reach the origin server. There might be cases where a delay is introduced between detecting the request and updating the internal counter. Because of this delay, which can be up to a few seconds, excess requests could still reach the origin before an action such as blocking or challenging is enforced.\n\n***\n\n## Related resources\n\n* [Troubleshooting Rate Limiting (previous version)](https://developers.cloudflare.com/waf/reference/legacy/old-rate-limiting/troubleshooting/)\n* [Configure Rate Limiting via the Cloudflare API](https://developers.cloudflare.com/api/resources/rate_limits/methods/create/)\n\n</page>\n\n<page>\n---\ntitle: IP Access rules actions  Cloudflare Web Application Firewall (WAF) docs\ndescription: \"An IP Access rule can perform one of the following actions:\"\nlastUpdated: 2025-09-19T11:55:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/ip-access-rules/actions/\n  md: https://developers.cloudflare.com/waf/tools/ip-access-rules/actions/index.md\n---\n\nAn IP Access rule can perform one of the following actions:\n\n* **Block**: Prevents a visitor from visiting your site.\n\n* **Allow**: Excludes visitors from all security checks, including [Browser Integrity Check](https://developers.cloudflare.com/waf/tools/browser-integrity-check/), [Under Attack mode](https://developers.cloudflare.com/fundamentals/reference/under-attack-mode/), and the WAF. Use this option when a trusted visitor is being blocked by Cloudflare's default security features. The *Allow* action takes precedence over the *Block* action.\\\n  Allowing a given country code will not bypass WAF managed rules (previous and new versions). Refer to [Important remarks about allowing/blocking by country](https://developers.cloudflare.com/waf/tools/ip-access-rules/#important-remarks-about-allowingblocking-by-country) for more information.\n\n* **Managed Challenge**: Depending on the characteristics of a request, Cloudflare will dynamically choose the appropriate type of challenge from a list of possible actions. For more information, refer to [Interstitial Challenge Pages](https://developers.cloudflare.com/cloudflare-challenges/challenge-types/challenge-pages/#managed-challenge-recommended).\n\n* **JavaScript Challenge**: Presents the [Under Attack mode](https://developers.cloudflare.com/fundamentals/reference/under-attack-mode/) interstitial page to visitors. The visitor or client must support JavaScript. Useful for blocking DDoS attacks with minimal impact to legitimate visitors.\n\n* **Interactive Challenge**: Requires the visitor to complete an interactive challenge before visiting your site. Prevents bots from accessing the site.\n\n</page>\n\n<page>\n---\ntitle: Create an IP access rule  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/ip-access-rules/create/\n  md: https://developers.cloudflare.com/waf/tools/ip-access-rules/create/index.md\n---\n\nRecommendation: Use custom rules instead\n\nCloudflare recommends that you create [custom rules](https://developers.cloudflare.com/waf/custom-rules/) instead of IP Access rules to perform IP-based or geography-based blocking (geoblocking).\n\n* Old dashboard\n\n  1. Log in to the [Cloudflare dashboard](https://dash.cloudflare.com), and select your account and domain.\n\n  2. Go to **Security** > **WAF** > **Tools**.\n\n  3. Under **IP Access Rules**, enter the following details:\n\n     1. For **Value**, enter an IP address, IP range, country code/name, or Autonomous System Number (ASN). For details, refer to [Parameters](https://developers.cloudflare.com/waf/tools/ip-access-rules/parameters/).\n     2. Select an [action](https://developers.cloudflare.com/waf/tools/ip-access-rules/actions/).\n     3. For **Zone**, select whether the rule applies to the current website only or to all websites in the account.\n     4. (Optional) Enter a note for the rule (for example, `Payment Gateway`).\n\n  4. Select **Add**.\n\n* New dashboard\n\n  Note\n\n  IP Access Rules are only available in the new security dashboard if you have configured at least one IP access rule. Cloudflare recommends that you use [custom rules](https://developers.cloudflare.com/waf/custom-rules/) instead of IP Access Rules.\n\n  1. In the Cloudflare dashboard, go to the **Security rules** page.\n\n     [Go to **Security rules**](https://dash.cloudflare.com/?to=/:account/:zone/security/security-rules)\n\n  2. Select **Create rule** > **IP access rules**.\n\n  3. Enter the following rule details:\n\n     1. For **IP, IP range, country name, or ASN**, enter an IP address, IP range, country code/name, or Autonomous System Number (ASN). For details, refer to [Parameters](https://developers.cloudflare.com/waf/tools/ip-access-rules/parameters/).\n     2. For **Action**, select an [action](https://developers.cloudflare.com/waf/tools/ip-access-rules/actions/).\n     3. For **Zone**, select whether the rule applies to the current website only or to all websites in the account.\n     4. (Optional) Enter a note for the rule (for example, `Payment Gateway`).\n\n  4. Select **Create**.\n\n* API\n\n  Use the Cloudflare API to programmatically create IP access rules. For more information, refer to [Create an IP Access Rule](https://developers.cloudflare.com/api/resources/firewall/subresources/access_rules/methods/create/).\n\n</page>\n\n<page>\n---\ntitle: IP Access rules parameters  Cloudflare Web Application Firewall (WAF) docs\ndescription: An IP Access rule will apply a certain action to incoming traffic\n  based on the visitor's IP address, IP range, Autonomous System Number (ASN),\n  or country.\nlastUpdated: 2025-09-19T11:55:45.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/ip-access-rules/parameters/\n  md: https://developers.cloudflare.com/waf/tools/ip-access-rules/parameters/index.md\n---\n\nAn IP Access rule will apply a certain action to incoming traffic based on the visitor's IP address, IP range, Autonomous System Number (ASN), or country.\n\n## IP address\n\n| Type | Example value |\n| - | - |\n| IPv4 address | `192.0.2.3` |\n| IPv6 address | `2001:db8::` |\n\n## IP range\n\n| Type | Example value | Start of range | End of range | Number of addresses |\n| - | - | - | - | - |\n| IPv4 `/24` range | `192.0.2.0/24` | `192.0.2.0` | `192.0.2.255` | 256 |\n| IPv4 `/16` range | `192.168.0.0/16` | `192.168.0.0` | `192.168.255.255` | 65,536 |\n| IPv6 `/128` range | `2001:db8::/128` | `2001:db8::` | `2001:db8::` | 1 |\n| IPv6 `/64` range | `2001:db8::/64` | `2001:db8::` | `2001:db8:0000:0000:ffff:ffff:ffff:ffff` | 18,446,744,073,709,551,616 |\n| IPv6 `/48` range | `2001:db8::/48` | `2001:db8::` | `2001:db8:0000:ffff:ffff:ffff:ffff:ffff` | 1,208,925,819,614,629,174,706,176 |\n| IPv6 `/32` range | `2001:db8::/32` | `2001:db8::` | `2001:db8:ffff:ffff:ffff:ffff:ffff:ffff` | 79,228,162,514,264,337,593,543,950,336 |\n\n## Autonomous System Number (ASN)\n\n| Type | Example value |\n| - | - |\n| ASN | `AS13335` |\n\n## Country\n\nSpecify a country using two-letter [ISO-3166-1 alpha-2 codes](https://www.iso.org/iso-3166-country-codes.html). Additionally, the Cloudflare dashboard accepts country names. For example:\n\n* `US`\n* `CN`\n* `germany` (dashboard only)\n\nCloudflare uses the following special country alpha-2 codes that are not part of the ISO:\n\n* `T1`: [Tor exit nodes](https://developers.cloudflare.com/network/onion-routing/) (country name: `Tor`)\n* `XX`: Unknown/reserved\n\nNotes\n\nCountry block is only available on Enterprise plans.\n\nIP addresses globally allowed by Cloudflare will override a country block via IP Access rules, but they will not override a country block via [custom rules](https://developers.cloudflare.com/waf/custom-rules/).\n\n</page>\n\n<page>\n---\ntitle: Create a list in the dashboard  Cloudflare Web Application Firewall (WAF) docs\ndescription: \"To create a list, follow these steps:\"\nlastUpdated: 2025-09-12T15:50:27.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/lists/create-dashboard/\n  md: https://developers.cloudflare.com/waf/tools/lists/create-dashboard/index.md\n---\n\nTo create a list, follow these steps:\n\n1. In the Cloudflare dashboard, go to the **Settings** page.\n\n   [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/configurations)\n\n2. Go to **Lists**.\n\n3. Select **Create new list**.\n\n4. Enter a name for your list, observing the [list name guidelines](https://developers.cloudflare.com/waf/tools/lists/#list-names).\n\n5. (Optional) Enter a description for the list, with a maximum length of 500 characters.\n\n6. For **Content type**, select the [type of list](https://developers.cloudflare.com/waf/tools/lists/custom-lists/) you are creating.\n\n7. Select **Create**.\n\n8. Follow the instructions in the next section to add items to the list.\n\n## Add items to a list\n\n1. (Optional) If you wish to add items to an existing list:\n\n   1. Go to the **Settings** page.\n\n      [Go to **Settings**](https://dash.cloudflare.com/?to=/:account/configurations)\n\n   2. Go to **Lists**.\n\n   3. Select **Edit** next to the list you want to edit.\n\n2. Select **Add items**.\n\n3. To [add items to the list manually](#add-items-to-a-list-manually), use the available text inputs on the page.\n\n4. To [add items using a CSV file](#add-items-using-a-csv-file), select **Upload CSV**.\n\nNotes\n\nCloudflare will apply the following rules when you add items to an existing list (either manually or via CSV file):\n\n* Do not remove any existing list items before updating/adding items.\n* Update items that were already in the list.\n* Add items that were not present in the list.\n\n### Add items to a list manually\n\n1. In the **Add items to list** page, enter values for the different fields (the exact fields depend on the list type).\n\n   As you enter information into a text input, a new row of inputs displays below the current one. To delete any of the items that you have entered, select **X**.\n\n2. Select **Add to list**.\n\n### Add items using a CSV file\n\nTo add items to a list by uploading a CSV file:\n\n1. In the **Add items to list** page, select **Upload CSV**.\n\n2. Browse to the location of the CSV file, select the file, and then select **Open**. The displayed items in the page will include the items loaded from the CSV file.\n\n   The exact CSV file format depends on the list type. Refer to [Custom list types](https://developers.cloudflare.com/waf/tools/lists/custom-lists/#custom-list-types) for details.\n\n3. You can continue to edit the items in the list before adding them:\n\n   * To delete any of the items you have entered, select **X**.\n   * To add extra items manually, enter the information in the text inputs.\n\n4. Select **Add to list**.\n\n</page>\n\n<page>\n---\ntitle: Custom lists  Cloudflare Web Application Firewall (WAF) docs\ndescription: A custom list contains one or more items of the same type (for\n  example, IP addresses, hostnames, or ASNs) that you can reference\n  collectively, by name, in rule expressions.\nlastUpdated: 2025-07-08T09:31:37.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/lists/custom-lists/\n  md: https://developers.cloudflare.com/waf/tools/lists/custom-lists/index.md\n---\n\nA custom list contains one or more items of the same type (for example, IP addresses, hostnames, or ASNs) that you can reference collectively, by name, in rule expressions.\n\nCloudflare supports the following custom list types:\n\n* [Lists with IP addresses](#ip-lists) (also known as IP lists)\n* [Lists with hostnames](#lists-with-hostnames)\n* [Lists with ASNs](#lists-with-asns) ([autonomous system](https://www.cloudflare.com/learning/network-layer/what-is-an-autonomous-system/) numbers)\n\nNote\n\nLists with hostnames and ASNs are only available to Enterprise customers. Refer to [Availability](https://developers.cloudflare.com/waf/tools/lists/#availability) for details.\n\nEach type has its own properties and CSV file format. Refer to the following sections for details.\n\nFor more information on lists managed by Cloudflare, such as Managed IP Lists, refer to [Managed Lists](https://developers.cloudflare.com/waf/tools/lists/managed-lists/).\n\n## Create a custom list\n\nRefer to [Create a list in the dashboard](https://developers.cloudflare.com/waf/tools/lists/create-dashboard/) or to the [Lists API](https://developers.cloudflare.com/waf/tools/lists/lists-api/) page.\n\n## Use a custom list\n\nUse custom lists in rule [expressions](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/) with the `in` operator and with a field supported by the custom list:",
      "language": "unknown"
    },
    {
      "code": "The fields you can use vary according to the list item type:\n\n| List item type | Available fields |\n| - | - |\n| IP address | Fields with type `IP address` listed in the [Fields reference](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/) |\n| Hostname | `http.host` |\n| ASN | `ip.src.asnum` |\n\nFor more information and examples, refer to [Use lists in expressions](https://developers.cloudflare.com/waf/tools/lists/use-in-expressions/).\n\n***\n\n## Custom list types\n\n### Lists with IP addresses (IP lists)\n\nList items in custom lists with IP addresses must be in one of the following formats:\n\n* Individual IPv4 addresses\n* Individual IPv6 addresses\n* IPv4 CIDR ranges with a prefix from `/8` to `/32`\n* IPv6 CIDR ranges with a prefix from `/12` to `/128`\n\nThe same list can contain both individual addresses and CIDR ranges.\n\nYou can use uppercase or lowercase characters for IPv6 addresses in lists. However, when you save the list, uppercase characters are converted to lowercase.\n\nCSV file format\n\nWhen uploading items to a custom list with IP addresses via CSV file, use the following file format (enter one item per line):",
      "language": "unknown"
    },
    {
      "code": "The `<DESCRIPTION>` field is optional.\n\n### Lists with hostnames\n\nNote\n\nAvailable to Enterprise customers.\n\nList items in custom lists with hostnames must be Fully Qualified Domain Names (FQDNs). An item may contain a `*` prefix/subdomain wildcard, which must be followed by a `.` (period). An item cannot include a scheme (for example, `https://`) or a URL path.\n\nFor example, the following entries would be valid for a custom list with hostnames:\n\n* `example.com`\n* `api.example.com`\n* `*.example.com`\n\nHowever, `example.com/path/subfolder` would not be a valid entry.\n\nYou can add any valid hostname (a valid FQDN) to a custom list with hostnames. The hostnames do not need to belong to the current Cloudflare account.\n\nCSV file format\n\nWhen uploading items to a custom list with hostnames via CSV file, use the following file format:",
      "language": "unknown"
    },
    {
      "code": "The `<DESCRIPTION>` field is optional.\n\n### Lists with ASNs\n\nNote\n\nAvailable to Enterprise customers.\n\nList items in custom lists with autonomous system numbers (ASNs) must be integer values.\n\nFor example, the following entries would be valid for a list with ASNs:\n\n* `1`\n* `13335`\n* `64512`\n\nCSV file format\n\nWhen uploading items to a custom list with ASNs via CSV file, use the following file format:",
      "language": "unknown"
    },
    {
      "code": "The `<DESCRIPTION>` field is optional.\n\n</page>\n\n<page>\n---\ntitle: Lists API  Cloudflare Web Application Firewall (WAF) docs\ndescription: \"The Lists API provides an interface for programmatically managing\n  the following types of lists:\"\nlastUpdated: 2025-10-07T14:27:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/lists/lists-api/\n  md: https://developers.cloudflare.com/waf/tools/lists/lists-api/index.md\n---\n\nThe [Lists API](https://developers.cloudflare.com/api/resources/rules/subresources/lists/) provides an interface for programmatically managing the following types of lists:\n\n* [Custom lists](https://developers.cloudflare.com/waf/tools/lists/custom-lists/): Contain one or more strings of the same type (such as IP addresses or hostnames) that you can reference collectively, by name, in rule expressions.\n\n* [Bulk Redirect Lists](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/concepts/#bulk-redirect-lists): Contain URL redirects that you enable by creating a Bulk Redirect Rule.\n\nTo use a list in a rule expression, refer to [Values: Lists](https://developers.cloudflare.com/ruleset-engine/rules-language/values/#lists) in the Rules language documentation.\n\n## Get started\n\nTo get started, review the Lists [JSON object](https://developers.cloudflare.com/waf/tools/lists/lists-api/json-object/) and [Endpoints](https://developers.cloudflare.com/waf/tools/lists/lists-api/endpoints/).\n\n***\n\n## Rate limiting for Lists API requests\n\nCloudflare may apply rate limiting to your API requests creating, modifying, or deleting list items in custom lists and Bulk Redirect Lists.\n\nEach operation (create, edit, or delete) on a list item counts as a modification. The following limits apply:\n\n* You can make a maximum of 1,000,000 list item modifications in API requests over 12 hours.\n* You can make a maximum of 30,000 API requests over 12 hours doing list item modifications.\n\nIf a write operation is still being processed  which happens asynchronously  and you submit a new request, you will receive a `429` HTTP status code. When this happens, submit your request again later.\n\n</page>\n\n<page>\n---\ntitle: Bulk Redirect Lists  Cloudflare Web Application Firewall (WAF) docs\nlastUpdated: 2024-09-06T15:21:19.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/lists/link-bulk-redirect-lists/\n  md: https://developers.cloudflare.com/waf/tools/lists/link-bulk-redirect-lists/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Managed Lists  Cloudflare Web Application Firewall (WAF) docs\ndescription: Cloudflare provides Managed Lists you can use in rule expressions.\n  These lists are regularly updated.\nlastUpdated: 2024-09-09T10:41:48.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/lists/managed-lists/\n  md: https://developers.cloudflare.com/waf/tools/lists/managed-lists/index.md\n---\n\nCloudflare provides Managed Lists you can use in rule expressions. These lists are regularly updated.\n\nNote\n\nThe available Managed Lists depend on your Cloudflare plan and product subscriptions. Refer to [Availability](https://developers.cloudflare.com/waf/tools/lists/#availability) for details.\n\n## Managed IP Lists\n\nUse Managed IP Lists to access Cloudflare's IP threat intelligence.\n\nCloudflare provides the following Managed IP Lists:\n\n| Display name | Name in expressions | Description |\n| - | - | - |\n| Cloudflare Open Proxies | `cf.open_proxies` | IP addresses of known open HTTP and SOCKS proxy endpoints, which are frequently used to launch attacks and hide attackers identity. |\n| Cloudflare Anonymizers | `cf.anonymizer` | IP addresses of known anonymizers (Open SOCKS Proxies, VPNs, and TOR nodes). |\n| Cloudflare VPNs | `cf.vpn` | IP addresses of known VPN servers. |\n| Cloudflare Malware | `cf.malware` | IP addresses of known sources of malware. |\n| Cloudflare Botnets, Command and Control Servers | `cf.botnetcc` | IP addresses of known botnet command-and-control servers. |\n\n\n</page>\n\n<page>\n---\ntitle: Use lists in expressions  Cloudflare Web Application Firewall (WAF) docs\ndescription: Learn how to use lists in rule expressions.\nlastUpdated: 2025-11-21T10:50:37.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/lists/use-in-expressions/\n  md: https://developers.cloudflare.com/waf/tools/lists/use-in-expressions/index.md\n---\n\nIn the Cloudflare dashboard, there are two options for editing [expressions](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/):\n\n* [Expression Builder](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/edit-expressions/#expression-builder): Allows you to create expressions using drop-down lists, emphasizing a visual approach to defining an expression.\n* [Expression Editor](https://developers.cloudflare.com/ruleset-engine/rules-language/expressions/edit-expressions/#expression-editor): A text-only interface that supports advanced features, such as grouping symbols and functions for transforming and validating values.\n\n## Use a list in the Expression Builder\n\nTo use a list in the Expression Builder:\n\n1. From the **Operator** drop-down list, select *is in list* or *is not in list*. Note that not all fields support these operators.\n\n   ![Selecting an IP list from the Value drop-down list when configuring the expression of a WAF custom rule](https://developers.cloudflare.com/_astro/cf-open-proxies-list.DYcEfIK7_el1WS.webp)\n\n2. Select a list from the **Value** drop-down list. Depending on your plan, you may be able to select a [Managed IP List](https://developers.cloudflare.com/waf/tools/lists/managed-lists/#managed-ip-lists).\n\n3. To commit your changes and enable the rule, select **Deploy**. If you are not ready to enable the rule, select **Save as Draft**.\n\n## Use a list in the Expression Editor\n\nTo use a list in the Expression Editor, specify the `in` operator and use `$<list_name>` to specify the name of the list.\n\nExamples:\n\n* Expression matching requests from IP addresses that are in an IP list named `office_network`:",
      "language": "unknown"
    },
    {
      "code": "* Expression matching requests with a source IP address different from IP addresses in the `office_network` IP list:",
      "language": "unknown"
    },
    {
      "code": "* Expression matching requests from IP addresses in the Cloudflare Open Proxies [Managed IP List](https://developers.cloudflare.com/waf/tools/lists/managed-lists/#managed-ip-lists):",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Email Address Obfuscation  Cloudflare Web Application Firewall (WAF) docs\ndescription: By enabling Cloudflare Email Address Obfuscation, email addresses\n  on your web page will be hidden from bots, while keeping them visible to\n  humans. In fact, there are no visible changes to your website for visitors.\nlastUpdated: 2025-11-07T11:51:10.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/scrape-shield/email-address-obfuscation/\n  md: https://developers.cloudflare.com/waf/tools/scrape-shield/email-address-obfuscation/index.md\n---\n\nBy enabling Cloudflare Email Address Obfuscation, email addresses on your web page will be hidden from bots, while keeping them visible to humans. In fact, there are no visible changes to your website for visitors.\n\n## Background\n\nEmail harvesters and other bots roam the Internet looking for email addresses to add to lists that target recipients for spam. This trend results in an increasing amount of unwanted email.\n\nWeb administrators have come up with clever ways to protect against this by writing out email addresses, such as `help [at] cloudflare [dot] com` or by using embedded images of the email address. However, you lose the convenience of clicking on the email address to automatically send an email. By enabling Cloudflare Email Address Obfuscation, email addresses on your web page will be obfuscated (hidden) from bots, while keeping them visible to humans. In fact, there are no visible changes to your website for visitors.\n\n## How it works\n\nWhen Email Address Obfuscation is enabled, Cloudflare replaces visible email addresses in your HTML with links like `[emailprotected]`. If a visitor sees this obfuscated format, they can click the link to reveal the actual email address. This approach prevents bots from scraping email addresses while keeping them accessible to real users.\n\n## Change Email Address Obfuscation setting\n\nCloudflare enables email address obfuscation automatically when you sign up.\n\n* Dashboard\n\n  To disable **Email Address Obfuscation** in the dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Scrape Shield** page.\n\n     [Go to **Scrape Shield**](https://dash.cloudflare.com/?to=/:account/:zone/content-protection)\n\n  2. For **Email Address Obfuscation**, switch the toggle to **Off**.\n\n* API\n\n  To disable **Email Address Obfuscation** with the API, send a [`PATCH`](https://developers.cloudflare.com/api/resources/zones/subresources/settings/methods/edit/) request with `email_obfuscation` as the setting name in the URI path, and the `value` parameter set to `\"off\"`.\n\nNote\n\nTo use this feature on specific hostnames - instead of across your entire zone - use a [configuration rule](https://developers.cloudflare.com/rules/configuration-rules/).\n\n## Prevent Cloudflare from obfuscating email\n\nTo prevent Cloudflare from obfuscating specific email addresses, you can:\n\n* Add the following comment in the page HTML code:",
      "language": "unknown"
    },
    {
      "code": "* Return email addresses in JSON format for AJAX calls, making sure your web server returns a content type of `application/json`.\n\n* Disable the Email Obfuscation feature by creating a [configuration rule](https://developers.cloudflare.com/rules/configuration-rules/) to be applied on a specific endpoint.\n\n***\n\n## Troubleshoot email obfuscation\n\nTo prevent unexpected website behavior, email addresses are not obfuscated when they appear in:\n\n* Any HTML tag attribute, except for the `href` attribute of the `a` tag.\n\n* Other HTML tags:\n\n  * `<script></script>`\n  * `<noscript></noscript>`\n  * `<textarea></textarea>`\n  * `<xmp></xmp>`\n  * `<head></head>`\n\n* Any page that does not have a MIME type of `text/html` or `application/xhtml+xml`.\n\nNotes\n\n* Email Obfuscation will not apply in the following cases:\n\n  * You are using the `Cache-Control: no-transform` header.\n  * The HTML/JavaScript code is specifically added by a [Worker](https://developers.cloudflare.com/workers/).\n\n* Email Obfuscation might not work as expected when the HTML page includes `<template></template>` tags.\n\n</page>\n\n<page>\n---\ntitle: Hotlink Protection  Cloudflare Web Application Firewall (WAF) docs\ndescription: Hotlink Protection prevents your images from being used by other\n  sites, which can reduce the bandwidth consumed by your origin server.\nlastUpdated: 2025-10-17T11:29:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waf/tools/scrape-shield/hotlink-protection/\n  md: https://developers.cloudflare.com/waf/tools/scrape-shield/hotlink-protection/index.md\n---\n\nHotlink Protection prevents your images from being used by other sites, which can reduce the bandwidth consumed by your [origin server](https://www.cloudflare.com/learning/cdn/glossary/origin-server/).\n\nThe supported file extensions are `gif`, `ico`, `jpg`, `jpeg`, and `png`.\n\n## Background\n\nWhen Cloudflare receives an image request for your site, we check to ensure the request did not originate from visitors on another site. Visitors to your domain will still be able to download and view images.\n\nTechnically, this means that Hotlink Protection denies access to requests when the HTTP referer does not include your website domain name (and is not blank).\n\nHotlink protection has no impact on crawling, but it will prevent the images from being displayed on sites such as Google images, Pinterest, and Facebook.\n\n## Enable Hotlink Protection\n\n* Dashboard\n\n  To enable **Hotlink Protection** in the dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Scrape Shield** page.\n\n     [Go to **Scrape Shield**](https://dash.cloudflare.com/?to=/:account/:zone/content-protection)\n\n  2. For **Hotlink Protection**, switch the toggle to **On**.\n\n* API\n\n  To enable **Hotlink Protection** with the API, send a [`PATCH`](https://developers.cloudflare.com/api/resources/zones/subresources/settings/methods/edit/) request with `hotlink_protection` as the setting name in the URI path, and the `value` parameter set to `\"on\"`.\n\nNote\n\nTo use this feature on specific hostnames - instead of across your entire zone - use a [configuration rule](https://developers.cloudflare.com/rules/configuration-rules/).\n\n### SaaS providers using Cloudflare\n\nIf you are a SaaS provider using [Cloudflare for SaaS](https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/), note that, by default, Hotlink Protection will only allow requests with your zone as referer. To avoid blocking requests from your customers (custom hostnames), consider using [Configuration Rules](https://developers.cloudflare.com/rules/configuration-rules/settings/#hotlink-protection) or [custom rules](https://developers.cloudflare.com/waf/custom-rules/use-cases/exempt-partners-hotlink-protection/).\n\n***\n\n## Allow hotlinking to specific images\n\nYou may want certain images to be hotlinked to, whether by external websites (like Google) or certain situations like when using an RSS feed.\n\n### Configuration rules\n\nTo disable Hotlink Protection selectively, create a [configuration rule](https://developers.cloudflare.com/rules/configuration-rules/) covering the path of an image folder.\n\n### hotlink-ok directory\n\nYou can allow certain images to be hotlinked by placing them in a directory named `hotlink-ok`. The `hotlink-ok` directory can be placed anywhere on your website.\n\nTo allow another website to use `logo.png` from `example.com`, put `logo.png` in a new folder called `hotlink-ok`.\n\nSome examples of URLs that will not be checked for hotlinking:\n\n* `http://example.com/hotlink-ok/pic.jpg`\n* `http://example.com/images/hotlink-ok/pic.jpg`\n* `http://example.com/hotlink-ok/images/pic.jpg`\n* `http://example.com/images/main-site/hotlink-ok/pic.jpg`\n\n</page>\n\n<page>\n---\ntitle: Waiting Room Bypass Rules  Cloudflare Waiting Room docs\ndescription: A Waiting Room Bypass Rule is a type of Waiting Room Rule built on\n  Cloudflares Ruleset Engine and managed via the Waiting Room API. A Waiting\n  Room Bypass Rule allows you to indicate specific traffic or areas of your site\n  or application that you do not want a waiting room to apply to. Each bypass\n  rule is created and managed at the individual waiting room level for precise\n  control over your waiting room traffic.\nlastUpdated: 2025-10-09T07:47:46.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/waiting-room/additional-options/waiting-room-rules/bypass-rules/\n  md: https://developers.cloudflare.com/waiting-room/additional-options/waiting-room-rules/bypass-rules/index.md\n---\n\nA Waiting Room Bypass Rule is a type of Waiting Room Rule built on Cloudflares Ruleset Engine and managed via the Waiting Room API. A Waiting Room Bypass Rule allows you to indicate specific traffic or areas of your site or application that you do not want a waiting room to apply to. Each bypass rule is created and managed at the individual waiting room level for precise control over your waiting room traffic.\n\nTo indicate where you want your bypass rules to apply, write [custom logic](https://developers.cloudflare.com/ruleset-engine/rules-language/) using the [fields](https://developers.cloudflare.com/ruleset-engine/rules-language/fields/reference/) available via the Cloudflare Ruleset Engine, except the following:\n\n* `cf.threat_score` and fields starting with `cf.bot_management`\n* HTTP response fields\n\nPlease be advised that the waiting room will not apply to all the traffic that matches the expressions written for bypass rules and will not be counted as active users. No Waiting Room features, including but not limited to, Event pre-queueing, Reject queueing method, or Queue-all will apply to this traffic. Be mindful of this when creating and enabling Bypass Waiting Room rules. Only use bypass rules for traffic you are confident will not overwhelm your origin or cause significant traffic surges.\n\nNote\n\nOnly some customers can create Waiting Room rules. For more details, refer to our [Plans](https://developers.cloudflare.com/waiting-room/plans/) page.\n\n## Common Use Cases\n\n* **Path/URL Exclusion**: Bypass specific paths or URLs under the path you have configured for your waiting room, if you do not want your waiting room to apply to these paths.\n* **Administrative Bypass**: Allow internal site administrators to always bypass the waiting room, commonly identified by IP addresses.\n* **Geo-targeting**: Exclude certain countries from being queued.\n* **Query String Exclusion**: Exclude specific query strings under the path you have configured for your waiting room.\n* **Exclude file extensions**: Prevent waiting room from applying to certain file extensions, such as `.js` that you utilize on your waiting room HTML template so that they render properly.\n\n### A note on subrequests\n\nAlong with the query string(s) or paths you would like to exclude, make sure to include in your expression any paths or file types that subrequests may be hitting so that these assets or paths do not have waiting room applied as well. Otherwise, these subrequests will be getting the waiting room cookie since they are still covered by the waiting room.\n\nThese could include anything like images, JavaScript files, CSS files, etc. You can also configure the rule to bypass the waiting room for any paths of a file type by bypassing if a request ends with `.js`, `.css`, `.png`, etc., so you do not have to manually configure each path those assets may be stored under.\n\nExample condition: `ends_with(http.request.uri.path, \".js\")`\n\n## Create Waiting Room Bypass Rules in the dashboard\n\nTo create a new bypass rule:\n\n1. In the Cloudflare dashboard, go to the **Waiting Room** page.\n\n   [Go to **Waiting Room**](https://dash.cloudflare.com/?to=/:account/:zone/traffic/waiting-rooms)\n\n2. Expand a waiting room and select **Manage rules**.\n\n3. Select **Create new bypass rule**.\n\n4. Enter a descriptive name for the rule in **Rule name**.\n\n5. Under **When incoming requests match**, define the rule expression. Use the **Field** drop-down list to choose an HTTP property. For each request, the value of the property you choose for **Field** is compared to the value you specify for **Value** using the operator selected in **Operator**.\n\n6. Under **Then**, the Bypass Waiting Room action is automatically selected. Before saving, review your expression and ensure that the traffic that matches your expression is the traffic that you do not want the waiting room to apply to.\n\n7. To save and deploy your rule, select **Save and Deploy**. If you are not ready to deploy your rule, select **Save as Draft**.\n\n### Operators and grouping symbols\n\n* Comparison operators specify how values defined in an expression must relate to the actual HTTP request value for the expression to return true.\n* Logical operators combine two expressions to form a compound expression and use order of precedence to determine how an expression is evaluated.\n* Grouping symbols allows you to organize expressions, enforce operator precedence, and nest expressions.\n\nFor examples and usage, refer to [Operators and grouping symbols](https://developers.cloudflare.com/ruleset-engine/rules-language/operators/) in the Rules language documentation.\n\n## Manage Rules via the Waiting Room API\n\nYou can manage, delete, and create bypass rules for your waiting room via the [Waiting Room APIs](https://developers.cloudflare.com/api/resources/waiting_rooms/subresources/rules/methods/get/). A bypass rule is a Waiting Room Rule that utilizes the `bypass_waiting_room` action.\n\nWhen creating a Bypass Waiting Room Rule via API, make sure you:\n\n* Have already created and saved a waiting room you want the rule to apply to.\n* Define the expression to indicate which traffic you would like to bypass your waiting room.\n* Set the rule action to `bypass_waiting_room`.\n\nCreate a waiting room rule by appending the following endpoint in the Waiting Room API to the Cloudflare API base URL. New waiting room rules will be added after any existing rules.",
      "language": "unknown"
    },
    {
      "code": "Configure your bypass rule with the following required and optional parameters:\n\n* **Description** (optional) - Give your rule a description to help keep a record of the purpose of this bypass rule.\n* **Expression** (required) - Define the rule expression indicating which traffic to apply the bypass rule to.\n* **Action** (required) - Define the action to take when expression evaluates to true. Set this to `bypass_waiting_room`.\n* **Enabled** (optional) - This will default to true. If you do not wish to deploy your rule, you must set this to false.\n\n### API Examples\n\nBypass a path under your waiting room and all of its subpaths\n\nIf your waiting room is configured at `example.com/` and you would like all traffic visiting `example.com/bypassme` and all of its subpaths. In this example, we also want to ensure any subrequests of `js`, `css`, or `png` from also bypass the waiting room to ensure all assets are loaded properly on the paths being bypassed. Note that in this example, all requests ending in `js`, `css` or `png` will bypass the waiting room regardless of the subpath. If this is not your intended use case, please alter the expression to suit your specific requirements and site architecture.",
      "language": "unknown"
    },
    {
      "code": "Allow a defined list of IPs to bypass the waiting room",
      "language": "unknown"
    },
    {
      "code": "### Other API options for managing bypass rules\n\nThrough the Waiting Room API, you can also do the following to manage bypass rules by using the Waiting Room rules API calls:\n\n* **List Waiting Room Rules**: Lists rules for a waiting room.\n* **Replace Waiting Room Rules**: Replaces all rules for a waiting room.\n* **Patch Waiting Room Rules**: Updates a rule for a waiting room.\n* **Delete Waiting Room Rules**: Deletes a rule for a waiting room.\n\n</page>\n\n<page>\n---\ntitle: Ethereum network  Cloudflare Web3 docs\ndescription: >-\n  The Ethereum network is a distributed consensus platform that allows users to\n\n  write and compute smart contracts in a distributed manner. Smart contracts are\n\n  essentially Turing complete programs that are available at a unique address of\n\n  the network. When the smart contract is run as part of a transaction, the\n  result\n\n  and the current state of the contract are stored in a verifiable consensus\n  that\n\n  is agreed upon by the entire network of nodes.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ethereum-gateway/concepts/ethereum/\n  md: https://developers.cloudflare.com/web3/ethereum-gateway/concepts/ethereum/index.md\n---\n\nThe Ethereum network is a distributed consensus platform that allows users to write and compute smart contracts in a distributed manner. Smart contracts are essentially Turing complete programs that are available at a unique address of the network. When the smart contract is run as part of a transaction, the result and the current state of the contract are stored in a verifiable consensus that is agreed upon by the entire network of nodes.\n\n## Smart contracts\n\nWhen a user wants to run a smart contract on some desired inputs, they provide currency known as ETH with their command. This currency is allocated to a specific set of nodes that contribute to adding the transaction to the distributed consensus.\n\nIf the smart contract involves moving monetary amounts to different individuals in the network then this is also recorded in the consensus. As such, this consensus represents the current state of the network along with exactly how much Ethereum currency is owned by each individual.\n\n## Addressing\n\nAll transactions on the network are stored in 'blocks' that make up the entire consensus. In brief, the consensus is a single sequence of blocks with increasing unique identifiers that represent all the transactions in the entire history of the Ethereum platform.\n\nEach block also has a unique hash identifier (a long hexadecimal string like `0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3q`) that can be used to retrieve and inspect the block. Each transaction within a block also has a unique hash identifier that can be used to retrieve individual transactions. When any new transaction is uploaded to the consensus as part of a block, this update is sent around the entire network and anyone can read the nature of the transaction that took place. This makes the entire state of the network accountable.\n\n## Read and write content\n\nTo read content, a user needs to interact with a working Ethereum node. Such nodes can be run locally on a user's machine as daemons (such as: <https://github.com/ethereum/go-ethereum/>). When the user access to such a node it can use the official JSONRPC API to send queries to the network, and learn about specific aspects of the consensus.\n\nWriting content is just as simple, and can be done using a [single JSON command](https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sendrawtransaction). However, writing transactions also requires supplying a certain amount of currency along with a secret key for an [Ethereum wallet](https://www.ethereum.org/use/#_3-what-is-a-wallet-and-which-one-should-i-use) that holds that currency. If this can be provided, then the write transaction is sent to the wider network and added to the consensus.\n\n## Connect your website to the gateway\n\nIf you want to be able to access the Ethereum network accessible from a custom domain name, you can do that by [creating a new Ethereum Gateway](https://developers.cloudflare.com/web3/how-to/manage-gateways/#create-a-gateway).\n\n## Related resources\n\nIf youre interested in learning more, you can read the official [RPC documentation](https://github.com/ethereum/wiki/wiki/JSON-RPC), along with the official documentation [provided by Ethereum](https://www.ethereum.org/use/).\n\n</page>\n\n<page>\n---\ntitle: Node types  Cloudflare Web3 docs\ndescription: \"There are three widely known Ethereum nodes that are used: Full\n  nodes, Archive nodes, and Light nodes.\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ethereum-gateway/concepts/node-types/\n  md: https://developers.cloudflare.com/web3/ethereum-gateway/concepts/node-types/index.md\n---\n\nThere are three widely known Ethereum nodes that are used: Full nodes, Archive nodes, and Light nodes.\n\n## Full nodes\n\nFull nodes store all the blockchains data and participate in block validation. Validating the blockchain includes keeping track of new blocks and computing and maintaining state changes. Full nodes, once fully synced with the network, can query all Ethereum blockchain data.\n\n## Light nodes\n\nA light node is much smaller than a full node and does not participate in block validation in the same way. The node can query the Ethereum network but does not store the state of the chain. Because of this limitation, it relies on peering with full nodes to get accurate chain data.\n\n## Archive nodes\n\nAn archive node is a full node that additionally maintains storage of historical blockchain states. While a full node can calculate a historical state, an archive node readily has the information in local storage and has better performance for these types of requests.\n\n## Nodes at Cloudflare\n\nCloudflare's Ethereum Gateway provides access to full and archive nodes.\n\nThe archive nodes serve requests for the following [RPC state methods](https://ethereum.org/en/developers/docs/apis/json-rpc/#state_methods) when the block number parameter is before the most recent 128 blocks or the default block parameter is set to earliest:\n\n* [eth\\_getBalance](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getbalance)\n* [eth\\_getCode](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getcode)\n* [eth\\_getTransactionCount](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactioncount)\n* [eth\\_getStorageAt](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getstorageat)\n* [eth\\_call](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_call)\n\n</page>\n\n<page>\n---\ntitle: Kill Switches  Cloudflare Web3 docs\ndescription: >-\n  When writing contracts, be especially careful to write secure code and include\n  a\n\n  kill switch to ensure that if any bugs do reside in the code, they can be\n\n  squashed. If you do not include a kill switch and there are vulnerabilities in\n\n  the smart contract that can be exploited, this can lead to the theft of\n\n  resources from the smart contract or from other individuals.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ethereum-gateway/reference/kill-switches/\n  md: https://developers.cloudflare.com/web3/ethereum-gateway/reference/kill-switches/index.md\n---\n\nWhen writing contracts, be especially careful to write secure code and include a kill switch to ensure that if any bugs do reside in the code, they can be squashed. If you do not include a kill switch and there are vulnerabilities in the smart contract that can be exploited, this can lead to the theft of resources from the smart contract or from other individuals.\n\nThis was brought into sharp focus during the [infamous DAO incident](https://en.wikipedia.org/wiki/The_DAO_\\(organization\\)). The DAO smart contract acted as a complex, decentralized venture capital fund and held Ether worth $250 million at its peak collected from a group of investors. Hackers exploited vulnerabilities in the smart contract, stealing $50 million worth of Ether.\n\nBecause there is no way to undo transactions in Ether, there was a highly controversial hard fork,\" where the majority of the community agreed to accept a block that contained an *irregular state change* that essentially drained all DAO funds into a special WithdrawDAO recovery contract. By convincing enough miners to accept this irregular block as valid, the DAO was able to return investors funds. However, not everyone agreed with the chain, with those who disagreed rejecting the irregular block and forming the Ethereum Classic network, each blockchain grew independently.\n\n## Limitations\n\nKill switches can cause their own problems. Like if a contract that is a library has its kill switch flipped. All contracts relying on this contract can't operate as intended even though the underlying library code is immutable. Recently, an attacker triggered a kill switch in an underlying library function that caused over 500,000 Ether to get [stuck in multi-signature wallets](https://www.parity.io/security-alert-2/). Users of the multi-signature library assumed the immutability of the code meant that the library would always operate as anticipated, and accepted the block. In the wake of this, there are many tools that check smart contracts for bugs or enable bug bounties.\n\n> Smart contracts interacting with the blockchain are only deterministic when accounting for the state of the blockchain.\n\n## How is this different?\n\nThis is a radically different approach for providing transparency and accountability. Because all contracts and transactions are public and verified by **consensus**, trust is distributed amongst the people, rather than centralized in a few big institutions.\n\nThe trust given to institutions is historic. This history builds trustworthiness.\n\nThe trust placed in consensus-based algorithms is based on the assumption that most people are honest, or more accurately that no sufficiently large subset of people can be made to collude to produce a malicious outcome. This is the *democratisation of trust*. In the DAO attack, a majority of nodes agreed to accept an irregular state transition. This effectively undid the damage of the attack, and shows how, at least in the world of blockchain, perception is reality. Because most people believed\" -- accepted this irregular block, it became a real -- valid block.\n\n</page>\n\n<page>\n---\ntitle: Rinkeby deprecation  Cloudflare Web3 docs\ndescription: Though Cloudflare's Ethereum Gateway launched with support for the\n  Rinkeby testnet, Rinkeby did not run through The Merge and - as a result -\n  will no longer be a reliable staging environment for mainnet.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ethereum-gateway/reference/rinkeby-deprecation/\n  md: https://developers.cloudflare.com/web3/ethereum-gateway/reference/rinkeby-deprecation/index.md\n---\n\nThough Cloudflare's Ethereum Gateway launched with support for the Rinkeby testnet, Rinkeby did not run through [The Merge](https://ethereum.org/en/upgrades/merge/) and - as a result - will no longer be a reliable staging environment for mainnet.\n\nCloudflare will be deprecating support for Rinkeby on January 30, 2023.\n\n## Migration\n\nTo avoid any issues with your Web3 development or debugging, you should switch over to the [Sepolia testnet](https://developers.cloudflare.com/web3/ethereum-gateway/reference/supported-networks/), which is fully supported with your Ethereum Gateway.\n\nTo migrate, you should update the endpoints you use when [reading from or writing to](https://developers.cloudflare.com/web3/how-to/use-ethereum-gateway/) the Ethereum network.\n\nFor example, you might have been using the previous endpoints to interact with your Ethereum Gateway.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "To migrate away from Rinkeby, change the end of your endpoint to use another testnet.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Supported API methods - Ethereum Gateway  Cloudflare Web3 docs\ndescription: |-\n  The full list of API methods that are supported by an Ethereum Gateway\n  is given below. The gateway returns a 403 if a method is specified that is not\n  supported.\nlastUpdated: 2024-08-20T21:10:02.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ethereum-gateway/reference/supported-api-methods/\n  md: https://developers.cloudflare.com/web3/ethereum-gateway/reference/supported-api-methods/index.md\n---\n\nThe full list of API methods that are supported by an Ethereum Gateway is given below. The gateway returns a `403` if a method is specified that is not supported.\n\nFor a full list of JSON-RPC API methods, refer to the [JSON-RPC specification](https://github.com/ethereum/execution-apis).\n\n| JSON-RPC method | Cloudflare Ethereum Gateway support |\n| - | - |\n| [web3\\_clientVersion](https://ethereum.org/en/developers/docs/apis/json-rpc/#web3_clientversion) |  |\n| [web3\\_sha3](https://ethereum.org/en/developers/docs/apis/json-rpc/#web3_sha3) |  |\n| [net\\_version](https://ethereum.org/en/developers/docs/apis/json-rpc/#net_version) |  |\n| [net\\_listening](https://ethereum.org/en/developers/docs/apis/json-rpc/#net_listening) |  |\n| [eth\\_syncing](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_syncing) |  |\n| [eth\\_mining](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_mining) |  |\n| [eth\\_gasPrice](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gasprice) |  |\n| [eth\\_feeHistory](https://github.com/ethereum/execution-apis)[1](#user-content-fn-2) |  |\n| [eth\\_blockNumber](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_blocknumber) |  |\n| [eth\\_chainId](https://github.com/ethereum/execution-apis) |  |\n| [eth\\_getBalance](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getbalance) |  |\n| [eth\\_getStorageAt](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getstorageat) |  |\n| [eth\\_getTransactionCount](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactioncount) |  |\n| [eth\\_getBlockTransactionCountByHash](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getblocktransactioncountbyhash) |  |\n| [eth\\_getBlockTransactionCountByNumber](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getblocktransactioncountbynumber) |  |\n| [eth\\_getUncleCountByBlockHash](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getunclecountbyblockhash) |  |\n| [eth\\_getUncleCountByBlockNumber](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getunclecountbyblocknumber) |  |\n| [eth\\_getCode](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getcode) |  |\n| [eth\\_sendRawTransaction](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sendrawtransaction) |  |\n| [eth\\_call](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_call) |  |\n| [eth\\_estimateGas](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_estimategas) |  |\n| [eth\\_getBlockByHash](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getblockbyhash) |  |\n| [eth\\_getBlockByNumber](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getblockbynumber) |  |\n| [eth\\_getTransactionByHash](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactionbyhash) |  |\n| [eth\\_getTransactionByBlockHashAndIndex](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactionbyblockhashandindex) |  |\n| [eth\\_getTransactionByBlockNumberAndIndex](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactionbyblocknumberandindex) |  |\n| [eth\\_getTransactionReceipt](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactionreceipt) |  |\n| [eth\\_getUncleByBlockHashAndIndex](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getunclebyblockhashandindex) |  |\n| [eth\\_getUncleByBlockNumberAndIndex](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getunclebyblocknumberandindex) |  |\n| [eth\\_getLogs](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getlogs)[2](#user-content-fn-1) |  |\n| [eth\\_getWork](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getwork) |  |\n| [eth\\_getProof](https://ethereum.github.io/execution-apis/api-documentation/) |  |\n| [net\\_peerCount](https://ethereum.org/en/developers/docs/apis/json-rpc/#net_peercount) |  |\n| [eth\\_protocolVersion](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_protocolversion) |  |\n| [eth\\_coinbase](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_coinbase) |  |\n| [eth\\_hashrate](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_hashrate) |  |\n| [eth\\_accounts](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_accounts) |  |\n| [eth\\_sign](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sign) |  |\n| [eth\\_sendTransaction](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_sendtransaction) |  |\n| [eth\\_getCompilers](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getcompilers) |  |\n| [eth\\_compileLLL](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_compilelll) |  |\n| [eth\\_compileSolidity](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_compile_solidity) |  |\n| [eth\\_compileSerpent](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_compileserpent) |  |\n| [eth\\_newFilter](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter) |  |\n| [eth\\_newBlockFilter](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newblockfilter) |  |\n| [eth\\_newPendingTransactionFilter](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newpendingtransactionfilter) |  |\n| [eth\\_uninstallFilter](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_uninstallfilter) |  |\n| [eth\\_getFilterChanges](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getfilterchanges) |  |\n| [eth\\_getFilterLogs](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getfilterlogs) |  |\n| [eth\\_submitWork](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_submitwork) |  |\n| [eth\\_submitHashrate](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_submithashrate) |  |\n\n## Trace methods\n\nEVM traces are a way to track the execution of smart contracts on the Ethereum blockchain. It records all the steps taken by the Ethereum Virtual Machine (EVM) as it runs the smart contract. This includes information like the specific operation that was executed, how much gas it cost, and any changes made to the blockchain as a result. The trace module is a tool that allows developers to access and analyze these traces, which can be useful for debugging, testing, and monitoring smart contracts. It can be used to identify and fix errors, optimize performance, and gain insight into how the smart contract is interacting with the blockchain.\n\n### trace\\_filter\n\nThe `trace_filter` method retrieves the traces of multiple transactions in a single request. This method is particularly useful for debugging and monitoring specific addresses on the Ethereum blockchain.\n\n#### Request Parameters\n\n* `fromBlock`: `Quantity` or `Tag` - (optional) The block number to start receiving traces from.\n* `toBlock`: `Quantity` or `Tag` - (optional) The block number to stop receiving traces at.\n* `fromAddress`: `Array` - (optional) An array of addresses to start receiving traces from.\n* `toAddress`: `Address` - (optional) An array of addresses to stop retrieving traces at.\n* `after`: `Quantity` - (optional) The offset trace number\n* `count`: `Quantity` - (optional) The amount of traces to return.\n\n#### Returns\n\nThis method returns an `Array` of traces matching the given filter.\n\n#### Example",
      "language": "unknown"
    },
    {
      "code": "#### Response",
      "language": "unknown"
    },
    {
      "code": "### Limitations\n\nThe `trace_filter` method has some limitations to ensure that our nodes are not overloaded.\n\n* The block range for the `trace_filter` method is limited to 800 blocks.\n* The trace `count` is limited to 200\n\n## Footnotes\n\n1. **Limitations**: Max block count of 10. [](#user-content-fnref-2)\n\n2. **Limitations**: Max block range of 800 blocks. [](#user-content-fnref-1)\n\n</page>\n\n<page>\n---\ntitle: Supported networks - Ethereum Gateway  Cloudflare Web3 docs\ndescription: Currently, Cloudflare Ethereum gateways support interacting with\n  the following networks.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ethereum-gateway/reference/supported-networks/\n  md: https://developers.cloudflare.com/web3/ethereum-gateway/reference/supported-networks/index.md\n---\n\nCurrently, Cloudflare Ethereum gateways support [interacting with](https://developers.cloudflare.com/web3/how-to/use-ethereum-gateway/) the following networks.\n\n| Network | Usage |\n| - | - |\n| [Ethereum Mainnet](https://ethereum.org/en/enterprise/) | Append `/v1/mainnet` to calls to your gateway or the Cloudflare public gateway (`cloudflare-eth.com`). |\n| [Sepolia Testnet](https://sepolia.dev/) | Append `/v1/sepolia` to calls to your gateway. |\n\n</page>\n\n<page>\n---\ntitle: DNSLink gateways  Cloudflare Web3 docs\ndescription: When you set up a gateway with a DNSLink record, that gateway is\n  restricted to a particular piece of content (either a specific Content\n  Identifier (CID) or an Interplanetary Name Service (IPNS) hostname).\nlastUpdated: 2025-02-10T11:11:23.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ipfs-gateway/concepts/dnslink/\n  md: https://developers.cloudflare.com/web3/ipfs-gateway/concepts/dnslink/index.md\n---\n\nWhen you set up a gateway with a DNSLink record, that gateway is restricted to a particular piece of content (either a specific Content Identifier (CID) or an Interplanetary Name Service (IPNS) hostname).\n\nA gateway with a DNSLink - otherwise known as a *restricted gateway* - differs from a [universal gateway](https://developers.cloudflare.com/web3/ipfs-gateway/concepts/universal-gateway/), which allows users to access any content hosted on the IPFS network.\n\n## What is it?\n\nWhen you import anything to the [IPFS](https://developers.cloudflare.com/web3/ipfs-gateway/concepts/ipfs/), that item gets a unique content identifier ([CID](https://docs.ipfs.io/concepts/glossary/#cid)) similar to `bafybeiaysi4s6lnjev27ln5icwm6tueaw2vdykrtjkwiphwekaywqhcjze`.\n\nSuch a long CID can cause issues when you want others to be able to access a website hosted on IPFS (`https://cf-ipfs.com/ipfs/bafybeiaysi4s6lnjev27ln5icwm6tueaw2vdykrtjkwiphwekaywqhcjze`). It is a similar problem to websites in general, where end users would have difficulty remembering an IP address (`192.0.2.1`) instead of a domain name (`google.com`).\n\nThe problem is solved the same way, via a DNS record. To make a website hosted on IPFS more accessible, you can put your entire website inside of a directory and create a **DNSLink** record for that CID. End users can then make requests to a Universal Gateway URL like `https://cf-ipfs.com/ipns/en.wikipedia-on-ipfs.org/` and have their requests translated to the correct CID in the background.\n\nDNSLink records also help with content maintenance. When a new version of your website is ready to be published, you can update your DNSLink DNS record to point to the new CID and the gateway will start serving the new version automatically.\n\nNote\n\nFor additional details, refer to the official [IPFS documentation](https://docs.ipfs.tech/concepts/dnslink/).\n\n## How is it used with Cloudflare?\n\nYou have the option to specify the DNSLink when you [create an IPFS gateway](https://developers.cloudflare.com/web3/how-to/manage-gateways/#create-a-gateway), which serves as a custom hostname that directs users to a website already hosted on IPFS.\n\nBy default, your DNSLink path is `/ipns/onboarding.ipfs.cloudflare.com`. If you choose to put your website in a different content folder hosted at your own IPFS node or with a pinning service, you will need to specify that value.\n\nFor example, the default DNSLink record for `www.example.com` would look like this:\n\n| Record type | Name | Content |\n| - | - | - |\n| TXT | `_dnslink.www.example.com` | `dnslink=/ipns/onboarding.ipfs.cloudflare.com` |\n\nFor more details about the DNS records created by the IPFS gateway, refer to [Gateway DNS records](https://developers.cloudflare.com/web3/reference/gateway-dns-records/).\n\n</page>\n\n<page>\n---\ntitle: Interplanetary File System (IPFS)  Cloudflare Web3 docs\ndescription: The Interplanetary File System (IPFS) is a distributed file storage\n  protocol that allows computers all over the globe to store and serve files as\n  part of a giant peer-to-peer network.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ipfs-gateway/concepts/ipfs/\n  md: https://developers.cloudflare.com/web3/ipfs-gateway/concepts/ipfs/index.md\n---\n\nThe Interplanetary File System (IPFS) is a distributed file storage protocol that allows computers all over the globe to store and serve files as part of a giant peer-to-peer network.\n\nAny computer, anywhere in the world, can download the IPFS software and start hosting and serving files.\n\nIf someone runs IPFS on their computer and uploads a file to the IPFS network, that file can be viewed and downloaded by anyone else in the world who is also running IPFS.\n\n## Content Identifiers\n\nEvery file added to IPFS is given a unique address derived from a hash of the file's content. This address is called a Content Identifier (CID) and it combines the hash of the file and a unique identifier for the hash algorithm used into a single string.\n\nIPFS currently uses [SHA-256](https://en.wikipedia.org/wiki/SHA-2) by default, which produces a 256 bit (32 byte) output, and that output is encoded with [Base58](https://en.wikipedia.org/wiki/Base58). Base58 is a binary-to-text encoding scheme originally developed for Bitcoin and has the advantage that letters that might be mistaken for each other in certain fonts (like zero and the capital letter O) are not included.\n\nA CID will typically look something like `QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco`.\n\nHowever, the same hash could be encoded with [Base32](https://en.wikipedia.org/wiki/Base32) or other supported hash algorithms including [SHA-3](https://en.wikipedia.org/wiki/SHA-3) and [BLAKE2](https://en.wikipedia.org/wiki/BLAKE_\\(hash_function\\)).\n\n## Uploading to IPFS\n\nIPFS is fundamentally a [Distributed Hash Table (DHT)](https://en.wikipedia.org/wiki/Distributed_hash_table) which maps from CIDs to people who have the content addressed by that CID. The hash table is distributed because no single node in the network holds the entire table. Instead, each node stores a subset of the hash table, as well as information about which nodes are storing other relevant sections.\n\nWhen someone talks about 'uploading' content to IPFS, what they really mean (usually) is that they are announcing to the network that they have some content by adding an entry to the DHT that maps from CID to their IP address. Somebody else who wants to download their data would look up the CID in the DHT, find the person's IP address, and download the data directly from them.\n\nThe speed and reliability advantages of IPFS come from the fact that many people can upload the same data, and then downloads will be spread between all of them. If any one of them goes offline or decides to stop hosting the data, the others can pick up the slack.\n\n## Directories\n\nYou can upload more than just individual files. For example, consider a folder called `example`, which has exactly one file, `example_text.txt`, containing the string `I'm trying out IPFS`.\n\nIf that folder were uploaded with the command `ipfs add -r ./example`, both the folder and the file it contains would have their own CID. In this case, the folder would have the CID `QmdbaSQbGU6Wo9i5LyWWVLuU8g6WrYpWh2K4Li4QuuE8Fr` while the file would have the CID `QmXnnyufdzAWL5CqZ2RnSNgPbvCc1ALT73s6epPrRnZ1Xy`.\n\nYou could then access the file in two ways:\n\n* Requesting the file directly:\\\n  `https://cloudflare-ipfs.com/ipfs/QmXnnyufdzAWL5CqZ2RnSNgPbvCc1ALT73s6epPrRnZ1Xy`\n* Requesting the file by name, from the directory:\\\n  `https://cloudflare-ipfs.com/ipfs/QmdbaSQbGU6Wo9i5LyWWVLuU8g6WrYpWh2K4Li4QuuE8Fr/example_text.txt`\n\nWhile the CID of a file will only change if the file itself changes, the CID of a directory changes any time **any** of the files in it change, or if any files are added/removed.\n\nDirectories make it possible to address an entire static website with a single CID and access different pages of the website by requesting different files in the directory.\n\n## Related resources\n\nFor help with additional concepts, refer to the [IPFS](https://docs.ipfs.tech/concepts/) documentation.\n\n</page>\n\n<page>\n---\ntitle: Universal Path gateway  Cloudflare Web3 docs\ndescription: When you set up a Universal Path gateway  a gateway without a\n  DNSLink record  you are creating an unrestricted gateway that allows users to\n  access any content hosted on the IPFS network.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ipfs-gateway/concepts/universal-gateway/\n  md: https://developers.cloudflare.com/web3/ipfs-gateway/concepts/universal-gateway/index.md\n---\n\nWhen you set up a Universal Path gateway  a gateway without a *DNSLink* record  you are creating an unrestricted gateway that allows users to access any content hosted on the IPFS network.\n\nThis differs from a [restricted gateway](https://developers.cloudflare.com/web3/ipfs-gateway/concepts/dnslink/), which restricts the gateway to a particular piece of content (either a specific Content Identifier (CID) or an Interplanetary Name Service (IPNS) hostname).\n\n## How is it used with Cloudflare?\n\nYou can add a Universal Path gateway just as you would [create any gateway](https://developers.cloudflare.com/web3/how-to/manage-gateways/).\n\nLikely, you will also want to add items to the [gateway blocklist](https://developers.cloudflare.com/web3/how-to/manage-gateways/#update-blocklist), which allows you to block content access through the Universal Path gateway for one or more:\n\n* CIDs (`QmPZ9gcCEpqKTo6aq61g2nXGUhM4iCL3ewB6LDXZCtioEB`)\n* IPFS content (`/ipfs/QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG/readme`)\n* IPNS content paths (`/ipns/example.com`)\n\nNote\n\nThis feature is limited to specific plans. For more detail, refer to [Limits](https://developers.cloudflare.com/web3/reference/limits/).\n\n</page>\n\n<page>\n---\ntitle: Automated deployments  Cloudflare Web3 docs\ndescription: Static sites are easy to deploy automatically. The code of the site\n  is usually kept in a Git repository and deployed by pushing the latest commit\n  to a repository that's connected to a Continuous Integration service like\n  Travis CI, or by pushing to a repository directly on the server and activating\n  a post-receive hook. Either way, the production version of the site is built\n  and then copied into the serving path of an Apache or NGINX instance.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ipfs-gateway/reference/automated-deployment/\n  md: https://developers.cloudflare.com/web3/ipfs-gateway/reference/automated-deployment/index.md\n---\n\nStatic sites are easy to deploy automatically. The code of the site is usually kept in a Git repository and deployed by pushing the latest commit to a repository that's connected to a Continuous Integration service like [Travis CI](https://travis-ci.org/), or by pushing to a repository directly on the server and activating a post-receive hook. Either way, the production version of the site is built and then copied into the serving path of an Apache or NGINX instance.\n\nIPFS usually fits into these systems: instead of copying the production version of a website into the serving path of an HTTP server, you would upload the same files to an IPFS node and update your DNS records with the new hash. There are several tools that help with different parts of this:\n\n* [ipfs-deploy](https://github.com/agentofuser/ipfs-deploy) helps upload data to a third-party pinning providers and automatically update Cloudflare-managed DNS records.\n* [dnslink-cloudflare](https://github.com/ipfs-shipyard/dnslink-cloudflare) is a script to programmatically update DNSLink records. This can be run with the `-Q` flag of `ipfs add` that only outputs the top-level hash.\n* [Fission's IPFS support](https://guide.fission.codes/developers/custom-domains/using-cloudflare-ipfs-gateway) lets you use the Fission IPFS app publishing system from the CLI or from GitHub Actions, while using Cloudflare-managed DNS and gateway.\n\n</page>\n\n<page>\n---\ntitle: Peering  Cloudflare Web3 docs\ndescription: If you are running an IPFS node that serves many requests - like a\n  public HTTP gateway - you may be able to speed up queries by maintaining\n  long-lived connections to nodes that provide a large volume of data.\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ipfs-gateway/reference/peering-with-content-providers/\n  md: https://developers.cloudflare.com/web3/ipfs-gateway/reference/peering-with-content-providers/index.md\n---\n\nIf you are running an IPFS node that serves many requests - like a public HTTP gateway - you may be able to speed up queries by maintaining long-lived connections to nodes that provide a large volume of data.\n\nThis process is known as **Peering** and you can tell IPFS to prioritize Cloudflare's peers by editing the Peering configuration in your IPFS config file.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Using IPFS with your website  Cloudflare Web3 docs\ndescription: \"Though it is not required, it is strongly recommended that\n  websites hosted on IPFS use only relative links, unless linking to a different\n  domain. This is because data can be accessed in many different (but ultimately\n  equivalent) ways:\"\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/web3/ipfs-gateway/reference/updating-for-ipfs/\n  md: https://developers.cloudflare.com/web3/ipfs-gateway/reference/updating-for-ipfs/index.md\n---\n\nThough it is not required, it is strongly recommended that websites hosted on IPFS use only relative links, unless linking to a different domain. This is because data can be accessed in many different (but ultimately equivalent) ways:\n\n* From your custom domain: `https://ipfs.tech/index.html`\n* From a gateway: `https://cloudflare-ipfs.com/ipns/ipfs.tech/index.html`\n* By immutable hash: `https://cloudflare-ipfs.com/ipfs/QmNksJqvwHzNtAtYZVqFZFfdCVciY4ojTU2oFZQSFG9U7B/index.html`\n\nUsing only relative links within a web application supports all of these at once, and gives the most flexibility to the user. The exact method for switching to relative links, if you do not use them already, depends on the framework you use.\n\n## Angular, React, Vue\n\nThese popular JavaScript frameworks are covered in a [blog post](https://medium.com/pinata/how-to-easily-host-a-website-on-ipfs-9d842b5d6a01) from [Pinata](https://pinata.cloud/). They are fixed with minor config changes.\n\n## Gatsby\n\nGatsby is a JavaScript framework based on React. There is a [plugin](https://www.gatsbyjs.org/packages/gatsby-plugin-ipfs/) for it that ensures links are relative.\n\n## Jekyll\n\nAdd a file `_includes/base.html` with the contents:",
      "language": "unknown"
    },
    {
      "code": "This snippet computes the relative path back to the root of the website from the current page. Update any pages that need to link to the root by adding this at the top:",
      "language": "unknown"
    },
    {
      "code": "This snippet also prefixing any links with `{{base}}`. So for example, we would change `href=\"/css/main.css\"` to be `href=\"{{base}}/css/main.css\"`\n\n## Generic\n\nFor other frameworks, or if a framework was not used, there's a script called [make-relative](https://github.com/tmcw/make-relative) that will parse the HTML of a website and automatically rewrite links and images to be relative.\n\n</page>\n\n<page>\n---\ntitle: Advanced setups  Cloudflare Workers docs\ndescription: Learn how to use Workers Builds with more advanced setups\nlastUpdated: 2025-10-01T16:43:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/index.md\n---\n\n## Monorepos\n\nA monorepo is a single repository that contains multiple applications. This setup can be useful for a few reasons:\n\n* **Simplified dependency management**: Manage dependencies across all your workers and shared packages from a single place using tools like [pnpm workspaces](https://pnpm.io/workspaces) and [syncpack](https://www.npmjs.com/package/syncpack).\n* **Code sharing and reuse**: Easily create and share common logic, types, and utilities between workers by creating shared packages.\n* **Atomic commits**: Changes affecting multiple workers or shared libraries can be committed together, making the history easier to understand and reducing the risk of inconsistencies.\n* **Consistent tooling**: Apply the same build, test, linting, and formatting configurations (e.g., via [Turborepo](https://turborepo.com) in for task orchestration and shared configs in `packages/`) across all projects, ensuring consistent tooling and code quality across Workers.\n* **Easier refactoring**: Refactoring code that spans multiple Workers or shared packages is significantly easier within a single repository.\n\n#### Example Workers monorepos:\n\n* [cloudflare/mcp-server-cloudflare](https://github.com/cloudflare/mcp-server-cloudflare)\n* [jahands/workers-monorepo-template](https://github.com/jahands/workers-monorepo-template)\n* [cloudflare/templates](https://github.com/cloudflare/templates)\n* [cloudflare/workers-sdk](https://github.com/cloudflare/workers-sdk)\n\n### Getting Started\n\nTo set up a monorepo workflow:\n\n1. Find the Workers associated with your project in the [Workers & Pages Dashboard](https://dash.cloudflare.com).\n2. Connect your monorepo to each Worker in the repository.\n3. Set the root directory for each Worker to specify the location of its `wrangler.toml` and where build and deploy commands should run.\n4. Optionally, configure unique build and deploy commands for each Worker.\n5. Optionally, configure [build watch paths](https://developers.cloudflare.com/workers/ci-cd/builds/build-watch-paths/) for each Worker to monitor specific paths for changes.\n\nWhen a new commit is made to the monorepo, a new build and deploy will trigger for each Worker if the change is within each of its included watch paths. You can also check on the status of each build associated with your repository within GitHub with [check runs](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#check-run) or within GitLab with [commit statuses](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration/#commit-status).\n\n### Example\n\nIn the example `ecommerce-monorepo`, a Workers project should be created for `product-service`, `order-service`, and `notification-service`.\n\nA Git connection to `ecommerce-monorepo` should be added in all of the Workers projects. If you are using a monorepo tool, such as [Turborepo](https://turbo.build/), you can configure a different deploy command for each Worker, for example, `turbo deploy -F product-service`.\n\nSet the root directory of each Worker to where its wrangler.toml is located. For example, for `product-service`, the root directory should be `/workers/product-service/`. Optionally, you can add [build watch paths](https://developers.cloudflare.com/workers/ci-cd/builds/build-watch-paths/) to optimize your builds.\n\nWhen a new commit is made to `ecommerce-monorepo`, a build and deploy will be triggered for each of the Workers if the change is within its included watch paths using the configured commands for that Worker.\n\n## Wrangler Environments\n\nYou can use [Wrangler Environments](https://developers.cloudflare.com/workers/wrangler/environments/) with Workers Builds by completing the following steps:\n\n1. [Deploy via Wrangler](https://developers.cloudflare.com/workers/wrangler/commands/#deploy) to create the Workers for your environments on the Dashboard, if you do not already have them.\n2. Find the Workers for your environments. They are typically named `[name of Worker] - [environment name]`.\n3. Connect your repository to each of the Workers for your environment.\n4. In each of the Workers, edit your Wrangler commands to include the flag `--env: <environment name>` in the build configurations for both the deploy command, and the non-production branch deploy command ([if applicable](https://developers.cloudflare.com/workers/ci-cd/builds/build-branches/#configure-non-production-branch-builds)).\n\nWhen a new commit is detected in the repository, a new build/deploy will trigger for each associated Worker.\n\n### Example\n\nImagine you have a Worker named `my-worker`, and you want to set up two environments `staging` and `production` set in the `wrangler.jsonc`. If you have not already, you can deploy `my-worker` for each environment using the commands `wrangler deploy --env staging` and `wrangler deploy --env production`.\n\nIn your Cloudflare Dashboard, you should find the two Workers `my-worker-staging` and `my-worker-production`. Then, connect the Git repository for the Worker, `my-worker`, to both of the environment Workers. In the build configurations of each environment Worker, edit the deploy commands to be `npx wrangler deploy --env staging` and `npx wrangler deploy --env production` and the non-production branch deploy commands to be `npx wrangler versions upload --env staging` and `npx wrangler versions upload --env production` respectively.\n\n</page>\n\n<page>\n---\ntitle: Build branches  Cloudflare Workers docs\ndescription: Configure which git branches should trigger a Workers Build\nlastUpdated: 2025-10-30T13:23:49.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/build-branches/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/build-branches/index.md\n---\n\nWhen you connect a git repository to Workers, commits made on the production git branch will produce a Workers Build. If you want to take advantage of [preview URLs](https://developers.cloudflare.com/workers/configuration/previews/) and [pull request comments](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#pull-request-comment), you can additionally enable \"non-production branch builds\" in order to trigger a build on all branches of your repository.\n\n## Change production branch\n\nTo change the production branch of your project:\n\n1. In **Overview**, select your Workers project.\n2. Go to **Settings** > **Build** > **Branch control**. Workers will default to the default branch of your git repository, but this can be changed in the dropdown.\n\nEvery push event made to this branch will trigger a build and execute the [build command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-command), followed by the [deploy command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#deploy-command).\n\n## Configure non-production branch builds\n\nTo enable or disable non-production branch builds:\n\n1. In **Overview**, select your Workers project.\n2. Go to **Settings** > **Build** > **Branch control**. The checkbox **Builds for non-production branches** allows you to enable or disable builds for non-production branches.\n\nWhen enabled, every push event made to a non-production branch will trigger a build and execute the [build command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-command), followed by the [non-production branch deploy command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#non-production-branch-deploy-command).\n\n</page>\n\n<page>\n---\ntitle: Build caching  Cloudflare Workers docs\ndescription: Improve build times by caching build outputs and dependencies\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/build-caching/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/build-caching/index.md\n---\n\nImprove Workers build times by caching dependencies and build output between builds with a project-wide shared cache.\n\nThe first build to occur after enabling build caching on your Workers project will save relevant artifacts to cache. Every subsequent build will restore from cache unless configured otherwise.\n\n## About build cache\n\nWhen enabled, build caching will automatically detect which package manager and framework the project is using from its `package.json` and cache data accordingly for the build.\n\nThe following shows which package managers and frameworks are supported for dependency and build output caching respectively.\n\n### Package managers\n\nWorkers build cache will cache the global cache directories of the following package managers:\n\n| Package Manager | Directories cached |\n| - | - |\n| [npm](https://www.npmjs.com/) | `.npm` |\n| [yarn](https://yarnpkg.com/) | `.cache/yarn` |\n| [pnpm](https://pnpm.io/) | `.pnpm-store` |\n| [bun](https://bun.sh/) | `.bun/install/cache` |\n\n### Frameworks\n\nSome frameworks provide a cache directory that is typically populated by the framework with intermediate build outputs or dependencies during build time. Workers Builds will automatically detect the framework you are using and cache this directory for reuse in subsequent builds.\n\nThe following frameworks support build output caching:\n\n| Framework | Directories cached |\n| - | - |\n| Astro | `node_modules/.astro` |\n| Docusaurus | `node_modules/.cache`, `.docusaurus`, `build` |\n| Eleventy | `.cache` |\n| Gatsby | `.cache`, `public` |\n| Next.js | `.next/cache` |\n| Nuxt | `node_modules/.cache/nuxt` |\n\nNote\n\n[Static assets](https://developers.cloudflare.com/workers/static-assets/) and [frameworks](https://developers.cloudflare.com/workers/framework-guides/) are now supported in Cloudflare Workers.\n\n### Limits\n\nThe following limits are imposed for build caching:\n\n* **Retention**: Cache is purged 7 days after its last read date. Unread cache artifacts are purged 7 days after creation.\n* **Storage**: Every project is allocated 10 GB. If the project cache exceeds this limit, the project will automatically start deleting artifacts that were read least recently.\n\n## Enable build cache\n\nTo enable build caching:\n\n1. Navigate to [Workers & Pages Overview](https://dash.cloudflare.com) on the Dashboard.\n2. Find your Workers project.\n3. Go to **Settings** > **Build** > **Build cache**.\n4. Select **Enable** to turn on build caching.\n\n## Clear build cache\n\nThe build cache can be cleared for a project when needed, such as when debugging build issues. To clear the build cache:\n\n1. Navigate to [Workers & Pages Overview](https://dash.cloudflare.com) on the Dashboard.\n2. Find your Workers project.\n3. Go to **Settings** > **Build** > **Build cache**.\n4. Select **Clear Cache** to clear the build cache.\n\n</page>\n\n<page>\n---\ntitle: Build image  Cloudflare Workers docs\ndescription: Understand the build image used in Workers Builds.\nlastUpdated: 2025-12-18T16:07:21.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/build-image/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/build-image/index.md\n---\n\nWorkers Builds uses a build image with support for a variety of languages and tools such as Node.js, Python, PHP, Ruby, and Go.\n\n## Supported Tooling\n\nWorkers Builds supports a variety of runtimes, languages, and tools. Builds will use the default versions listed below unless a custom version is detected or specified. You can [override the default versions](https://developers.cloudflare.com/workers/ci-cd/builds/build-image/#overriding-default-versions) using environment variables or version files. All versions are available for override.\n\nDefault version updates\n\nThe default versions will be updated regularly to the latest minor version. No major version updates will be made without notice. If you need a specific minor version, please specify it by [overriding the default version](https://developers.cloudflare.com/workers/ci-cd/builds/build-image/#overriding-default-versions).\n\n### Runtime\n\n| Tool | Default version | Environment variable | File |\n| - | - | - | - |\n| **Go** | 1.24.3 | `GO_VERSION` | |\n| **Node.js** | 22.16.0 | `NODE_VERSION` | .nvmrc, .node-version |\n| **Python** | 3.13.3 | `PYTHON_VERSION` | .python-version, runtime.txt |\n| **Ruby** | 3.4.4 | `RUBY_VERSION` | .ruby-version |\n\n### Tools and languages\n\n| Tool | Default version | Environment variable |\n| - | - | - |\n| **Bun** | 1.2.15 | `BUN_VERSION` |\n| **Hugo** | extended\\_0.147.7 | `HUGO_VERSION` |\n| **npm** | 10.9.2 | |\n| **yarn** | 4.9.1 | `YARN_VERSION` |\n| **pnpm** | 10.11.1 | `PNPM_VERSION` |\n| **pip** | 25.1.1 | |\n| **gem** | 3.6.9 | |\n| **poetry** | 2.1.3 | |\n| **pipx** | 1.7.1 | |\n| **bundler** | 2.6.9 | |\n\n## Advanced Settings\n\n### Overriding Default Versions\n\nIf you need to override a [specific version](https://developers.cloudflare.com/workers/ci-cd/builds/build-image/#overriding-default-versions) of a language or tool within the image, you can specify it as a [build environment variable](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings), or set the relevant file in your source code as shown above.\n\nTo set the version using a build environment variables, you can:\n\n1. Find the environment variable name for the language or tool and desired version (e.g. `NODE_VERSION = 22`)\n2. Add and save the environment variable on the dashboard by going to **Settings** > **Build** > **Build Variables and Secrets** in your Workers project\n\nOr, to set the version by adding a file to your project, you can:\n\n1. Find the filename for the language or tool (e.g. `.nvmrc`)\n2. Add the specified file name to the root directory and set the desired version number as the file's content. For example, if the version number is 22, the file should contain '22'.\n\n### Skip dependency install\n\nYou can add the following build variable to disable automatic dependency installation and run a custom install command instead.\n\n| Build variable | Value |\n| - | - |\n| `SKIP_DEPENDENCY_INSTALL` | `1` or `true` |\n\n## Pre-installed Packages\n\nIn the following table, review the pre-installed packages in the build image. The packages are installed with `apt`, a package manager for Linux distributions.\n\n| | | |\n| - | - | - |\n| `curl` | `libbz2-dev` | `libreadline-dev` |\n| `git` | `libc++1` | `libssl-dev` |\n| `git-lfs` | `libdb-dev` | `libvips-dev` |\n| `unzip` | `libgdbm-dev` | `libyaml-dev` |\n| `autoconf` | `libgdbm6` | `tzdata` |\n| `build-essential` | `libgbm1` | `wget` |\n| `bzip2` | `libgmp-dev` | `zlib1g-dev` |\n| `gnupg` | `liblzma-dev` | `zstd` |\n| `libffi-dev` | `libncurses5-dev` | |\n\n## Build Environment\n\nWorkers Builds are run in the following environment:\n\n| | |\n| - | - |\n| **Build Environment** | Ubuntu 24.04 |\n| **Architecture** | x86\\_64 |\n\n## Build Image Policy\n\n### Preinstalled Software Updates\n\nPreinstalled software (languages and tools) will be updated before reaching end-of-life (EOL). These updates apply only if you have not [overridden the default version](https://developers.cloudflare.com/workers/ci-cd/builds/build-image/#overriding-default-versions).\n\n* **Minor version updates**: May be updated to the latest available minor version without notice. For tools that do not follow semantic versioning (e.g., Bun or Hugo), updates that may contain breaking changes will receive 3 months notice.\n* **Major version updates**: Updated to the next stable long-term support (LTS) version with 3 months notice.\n\n**How you'll be notified (for changes requiring notice):**\n\n* [Cloudflare Changelog](https://developers.cloudflare.com/changelog/)\n* Dashboard notifications for projects that will receive the update\n* Email notifications to project owners\n\nTo maintain a specific version and avoid automatic updates, [override the default version](https://developers.cloudflare.com/workers/ci-cd/builds/build-image/#overriding-default-versions).\n\n### Best Practices\n\nTo avoid unexpected build failures:\n\n* **Monitor announcements** via the [Cloudflare Changelog](https://developers.cloudflare.com/changelog/), dashboard notifications, and email\n* **Pin specific versions** of critical preinstalled software by [overriding default versions](https://developers.cloudflare.com/workers/ci-cd/builds/build-image/#overriding-default-versions)\n\n</page>\n\n<page>\n---\ntitle: Build watch paths  Cloudflare Workers docs\ndescription: Reduce compute for your monorepo by specifying paths for Workers Builds to skip\nlastUpdated: 2025-04-07T22:53:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/build-watch-paths/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/build-watch-paths/index.md\n---\n\nWhen you connect a git repository to Workers, by default a change to any file in the repository will trigger a build. You can configure Workers to include or exclude specific paths to specify if Workers should skip a build for a given path. This can be especially helpful if you are using a monorepo project structure and want to limit the amount of builds being kicked off.\n\n## Configure Paths\n\nTo configure which paths are included and excluded:\n\n1. In **Overview**, select your Workers project.\n2. Go to **Settings** > **Build** > **Build watch paths**. Workers will default to setting your projects includes paths to everything (\\[\\*]) and excludes paths to nothing (`[]`).\n\nThe configuration fields can be filled in two ways:\n\n* **Static filepaths**: Enter the precise name of the file you are looking to include or exclude (for example, `docs/README.md`).\n* **Wildcard syntax:** Use wildcards to match multiple path directories. You can specify wildcards at the start or end of your rule.\n\nWildcard syntax\n\nA wildcard (`*`) is a character that is used within rules. It can be placed alone to match anything or placed at the start or end of a rule to allow for better control over branch configuration. A wildcard will match zero or more characters.For example, if you wanted to match all branches that started with `fix/` then you would create the rule `fix/*` to match strings like `fix/1`, `fix/bugs`or `fix/`.\n\nFor each path in a push event, build watch paths will be evaluated as follows:\n\n* Paths satisfying excludes conditions are ignored first\n* Any remaining paths are checked against includes conditions\n* If any matching path is found, a build is triggered. Otherwise the build is skipped\n\nWorkers will bypass the path matching for a push event and default to building the project if:\n\n* A push event contains 0 file changes, in case a user pushes a empty push event to trigger a build\n* A push event contains 3000+ file changes or 20+ commits\n\n## Examples\n\n### Example 1\n\nIf you want to trigger a build from all changes within a set of directories, such as all changes in the folders `project-a/` and `packages/`\n\n* Include paths: `project-a/*, packages/*`\n* Exclude paths: \\`\\`\n\n### Example 2\n\nIf you want to trigger a build for any changes, but want to exclude changes to a certain directory, such as all changes in a docs/ directory\n\n* Include paths: `*`\n* Exclude paths: `docs/*`\n\n### Example 3\n\nIf you want to trigger a build for a specific file or specific filetype, for example all files ending in `.md`.\n\n* Include paths: `*.md`\n* Exclude paths: \\`\\`\n\n</page>\n\n<page>\n---\ntitle: Configuration  Cloudflare Workers docs\ndescription: Understand the different settings associated with your build.\nlastUpdated: 2025-09-09T12:12:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/configuration/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/configuration/index.md\n---\n\nWhen connecting your Git repository to your Worker, you can customize the configurations needed to build and deploy your Worker.\n\n## Build settings\n\nBuild settings can be found by navigating to **Settings** > **Build** within your Worker.\n\nNote that when you update and save build settings, the updated settings will be applied to your *next* build. When you *retry* a build, the build configurations that exist when the build is retried will be applied.\n\n### Overview\n\n| Setting | Description |\n| - | - |\n| **Git account** | Select the Git account you would like to use. After the initial connection, you can continue to use this Git account for future projects. |\n| **Git repository** | Choose the Git repository you would like to connect your Worker to. |\n| **Git branch** | Select the branch you would like Cloudflare to listen to for new commits. This will be defaulted to `main`. |\n| **Build command** *(Optional)* | Set a build command if your project requires a build step (e.g. `npm run build`). This is necessary, for example, when using a [front-end framework](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#framework-support) such as Next.js or Remix. |\n| **[Deploy command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#deploy-command)** | The deploy command lets you set the [specific Wrangler command](https://developers.cloudflare.com/workers/wrangler/commands/#deploy) used to deploy your Worker. Your deploy command will default to `npx wrangler deploy` but you may customize this command. Workers Builds will use the Wrangler version set in your `package json`. |\n| **[Non-production branch deploy command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#non-production-branch-deploy-command)** | Set a command to run when executing [a build for commit on a non-production branch](https://developers.cloudflare.com/workers/ci-cd/builds/build-branches/#configure-non-production-branch-builds). This will default to `npx wrangler versions upload` but you may customize this command. Workers Builds will use the Wrangler version set in your `package json`. |\n| **Root directory** *(Optional)* | Specify the path to your project. The root directory defines where the build command will be run and can be helpful in [monorepos](https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/#monorepos) to isolate a specific project within the repository for builds. |\n| **[API token](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#api-token)** *(Optional)* | The API token is used to authenticate your build request and authorize the upload and deployment of your Worker to Cloudflare. By default, Cloudflare will automatically generate an API token for your account when using Workers Builds, and continue to use this API token for all subsequent builds. Alternatively, you can [create your own API token](https://developers.cloudflare.com/workers/wrangler/migration/v1-to-v2/wrangler-legacy/authentication/#generate-tokens), or select one that you already own. |\n| **Build variables and secrets** *(Optional)* | Add environment variables and secrets accessible only to your build. Build variables will not be accessible at runtime. If you would like to configure runtime variables you can do so in **Settings** > **Variables & Secrets** |\n\nNote\n\nCurrently, Workers Builds does not honor the configurations set in [Custom Builds](https://developers.cloudflare.com/workers/wrangler/custom-builds/) within your wrangler.toml file.\n\n### Deploy command\n\nYou can run your deploy command using the package manager of your choice.\n\nIf you have added a Wrangler deploy command as a script in your `package.json`, then you can run it by setting it as your deploy command. For example, `npm run deploy`.\n\nExamples of other deploy commands you can set include:\n\n| Example Command | Description |\n| - | - |\n| `npx wrangler deploy --assets ./public/` | Deploy your Worker along with static assets from the specified directory. Alternatively, you can use the [assets binding](https://developers.cloudflare.com/workers/static-assets/binding/). |\n| `npx wrangler deploy --env staging` | If you have a [Wrangler environment](https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/#wrangler-environments) Worker, you should set your deploy command with the environment flag. For more details, see [Advanced Setups](https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/#wrangler-environments). |\n\n### Non-production branch deploy command\n\nThe non-production branch deploy command is only applicable when you have enabled [non-production branch builds](https://developers.cloudflare.com/workers/ci-cd/builds/build-branches/#configure-non-production-branch-builds).\n\nIt defaults to `npx wrangler versions upload`, producing a [preview URL](https://developers.cloudflare.com/workers/configuration/previews/). Like the build and deploy commands, it can be customized to instead run anything.\n\nExamples of other non-production branch deploy commands you can set include:\n\n| Example Command | Description |\n| - | - |\n| `yarn exec wrangler versions upload` | You can customize the package manager used to run Wrangler. |\n| `npx wrangler versions upload --env staging` | If you have a [Wrangler environment](https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/#wrangler-environments) Worker, you should set your non-production branch deploy command with the environment flag. For more details, see [Advanced Setups](https://developers.cloudflare.com/workers/ci-cd/builds/advanced-setups/#wrangler-environments). |\n\n### API token\n\nThe API token in Workers Builds defines the access granted to Workers Builds for interacting with your account's resources. Currently, only user tokens are supported, with account-owned token support coming soon.\n\nWhen you select **Create new token**, a new API token will be created automatically with the following permissions:\n\n* **Account:** Account Settings (read), Workers Scripts (edit), Workers KV Storage (edit), Workers R2 Storage (edit)\n* **Zone:** Workers Routes (edit) for all zones on the account\n* **User:** User Details (read), Memberships (read)\n\nYou can configure the permissions of this API token by navigating to **My Profile** > **API Tokens** for user tokens.\n\nIt is recommended to consistently use the same API token across all uploads and deployments of your Worker to maintain consistent access permissions.\n\n## Framework support\n\n[Static assets](https://developers.cloudflare.com/workers/static-assets/) and [frameworks](https://developers.cloudflare.com/workers/framework-guides/) are now supported in Cloudflare Workers. Learn to set up Workers projects and the commands for each framework in the framework guides:\n\n* [AI & agents](https://developers.cloudflare.com/workers/framework-guides/ai-and-agents/)\n\n  * [Agents SDK](https://developers.cloudflare.com/agents/)\n  * [LangChain](https://developers.cloudflare.com/workers/languages/python/packages/langchain/)\n\n* [Web applications](https://developers.cloudflare.com/workers/framework-guides/web-apps/)\n\n  * [React + Vite](https://developers.cloudflare.com/workers/framework-guides/web-apps/react/)\n\n  * [Astro](https://developers.cloudflare.com/workers/framework-guides/web-apps/astro/)\n\n  * [React Router (formerly Remix)](https://developers.cloudflare.com/workers/framework-guides/web-apps/react-router/)\n\n  * [Next.js](https://developers.cloudflare.com/workers/framework-guides/web-apps/nextjs/)\n\n  * [Vue](https://developers.cloudflare.com/workers/framework-guides/web-apps/vue/)\n\n  * [RedwoodSDK](https://developers.cloudflare.com/workers/framework-guides/web-apps/redwoodsdk/)\n\n  * [TanStack Start](https://developers.cloudflare.com/workers/framework-guides/web-apps/tanstack-start/)\n\n  * [SvelteKit](https://developers.cloudflare.com/workers/framework-guides/web-apps/sveltekit/)\n\n  * [More guides...](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/)\n\n    * [Angular](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/angular/)\n    * [Docusaurus](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/docusaurus/)\n    * [Gatsby](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/gatsby/)\n    * [Hono](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/hono/)\n    * [Nuxt](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/nuxt/)\n    * [Qwik](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/qwik/)\n    * [Solid](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/solid/)\n    * [Waku](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/waku/)\n\n* [Mobile applications](https://developers.cloudflare.com/workers/framework-guides/mobile-apps/)\n  * [Expo](https://docs.expo.dev/eas/hosting/reference/worker-runtime/)\n\n* [APIs](https://developers.cloudflare.com/workers/framework-guides/apis/)\n\n  * [FastAPI](https://developers.cloudflare.com/workers/languages/python/packages/fastapi/)\n  * [Hono](https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/hono/)\n\n## Environment variables\n\nYou can provide custom environment variables to your build.\n\n* Dashboard\n\n  To add environment variables via the dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n  [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n  1. In **Overview**, select your Worker.\n  2. Select **Settings** > **Environment variables**.\n\n* Wrangler\n\n  To add env variables using Wrangler, define text and JSON via the `[vars]` configuration in your Wrangler file.\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "### Default variables\n\nThe following system environment variables are injected by default (but can be overridden):\n\n| Environment Variable | Injected value | Example use-case |\n| - | - | - |\n| `CI` | `true` | Changing build behaviour when run on CI versus locally |\n| `WORKERS_CI` | `1` | Changing build behaviour when run on Workers Builds versus locally |\n| `WORKERS_CI_BUILD_UUID` | `<build-uuid-of-current-build>` | Passing the Build UUID along to custom workflows |\n| `WORKERS_CI_COMMIT_SHA` | `<sha1-hash-of-current-commit>` | Passing current commit ID to error reporting, for example, Sentry |\n| `WORKERS_CI_BRANCH` | `<branch-name-from-push-event` | Customizing build based on branch, for example, disabling debug logging on `production` |\n\n</page>\n\n<page>\n---\ntitle: Git integration  Cloudflare Workers docs\ndescription: Learn how to add and manage your Git integration for Workers Builds\nlastUpdated: 2025-09-17T11:26:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/index.md\n---\n\nCloudflare supports connecting your [GitHub](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/) and [GitLab](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration/) repository to your Cloudflare Worker, and will automatically deploy your code every time you push a change.\n\nAdding a Git integration also lets you monitor build statuses directly in your Git provider using [pull request comments](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#pull-request-comment), [check runs](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#check-run), or [commit statuses](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration/#commit-status), so you can manage deployments without leaving your workflow.\n\n## Supported Git Providers\n\nCloudflare supports connecting Cloudflare Workers to your GitHub and GitLab repositories. Workers Builds does not currently support connecting self-hosted instances of GitHub or GitLab.\n\nIf you using a different Git provider (e.g. Bitbucket), you can use an [external CI/CD provider (e.g. GitHub Actions)](https://developers.cloudflare.com/workers/ci-cd/external-cicd/) and deploy using [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/commands/#deploy).\n\n## Add a Git Integration\n\nWorkers Builds provides direct integration with GitHub and GitLab accounts, including both individual and organization accounts, that are *not* self-hosted.\n\nIf you do not have a Git account linked to your Cloudflare account, you will be prompted to set up an installation to GitHub or GitLab when [connecting a repository](https://developers.cloudflare.com/workers/ci-cd/builds/#get-started) for the first time, or when adding a new Git account. Follow the prompts and authorize the Cloudflare Git integration.\n\n![Git providers](https://developers.cloudflare.com/_astro/workers-git-provider.aIMoWcJE_Z1TBi8Q.webp)\n\nYou can check the following pages to see if your Git integration has been installed:\n\n* [GitHub Applications page](https://github.com/settings/installations) (if you are in an organization, select **Switch settings context** to access your GitHub organization settings)\n* [GitLab Authorized Applications page](https://gitlab.com/-/profile/applications)\n\nFor details on providing access to organization accounts, see [GitHub organizational access](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#organizational-access) and [GitLab organizational access](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration/#organizational-access).\n\n## Manage a Git Integration\n\nTo manage your Git installation:\n\n1. Go to the **Workers & Pages** page in the Cloudflare dashboard.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select your Worker.\n\n3. Go to **Settings** > **Builds**.\n\n4. Under **Git Repository**, select **Manage**.\n\nThis can be useful for managing repository access or troubleshooting installation issues by reinstalling. For more details, see the [GitHub](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration) and [GitLab](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration) guides for how to manage your installation.\n\n</page>\n\n<page>\n---\ntitle: Event subscriptions  Cloudflare Workers docs\ndescription: Event subscriptions allow you to receive messages when events occur\n  across your Cloudflare account. Cloudflare products (e.g., KV, Workers AI,\n  Workers) can publish structured events to a queue, which you can then consume\n  with Workers or HTTP pull consumers to build custom workflows, integrations,\n  or logic.\nlastUpdated: 2025-11-06T01:33:23.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/event-subscriptions/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/event-subscriptions/index.md\n---\n\n[Event subscriptions](https://developers.cloudflare.com/queues/event-subscriptions/) allow you to receive messages when events occur across your Cloudflare account. Cloudflare products (e.g., [KV](https://developers.cloudflare.com/kv/), [Workers AI](https://developers.cloudflare.com/workers-ai/), [Workers](https://developers.cloudflare.com/workers/)) can publish structured events to a [queue](https://developers.cloudflare.com/queues/), which you can then consume with Workers or [HTTP pull consumers](https://developers.cloudflare.com/queues/configuration/pull-consumers/) to build custom workflows, integrations, or logic.\n\nFor more information on [Event Subscriptions](https://developers.cloudflare.com/queues/event-subscriptions/), refer to the [management guide](https://developers.cloudflare.com/queues/event-subscriptions/manage-event-subscriptions/).\n\n## Available Workers Builds events\n\n#### `build.started`\n\nTriggered when a build starts.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `build.failed`\n\nTriggered when a build fails.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `build.canceled`\n\nTriggered when a build is canceled.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "#### `build.succeeded`\n\nTriggered when a build succeeds.\n\n**Example:**",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Limits & pricing  Cloudflare Workers docs\ndescription: Limits & pricing for Workers Builds\nlastUpdated: 2025-11-22T00:08:40.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/limits-and-pricing/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/limits-and-pricing/index.md\n---\n\nWorkers Builds has the following limits.\n\n| Metric | Free plan | Paid plans |\n| - | - | - |\n| **Build minutes** | 3,000 per month | 6,000 per month (then, +$0.005 per minute) |\n| **Concurrent builds** | 1 | 6 |\n| **Build timeout** | 20 minutes | 20 minutes |\n| **CPU** | 2 vCPU | 4 vCPU |\n| **Memory** | 8 GB | 8 GB |\n| **Disk space** | 20 GB | 20 GB |\n| **Environment variables** | 64 | 64 |\n| **Size per environment variable** | 5 KB | 5 KB |\n\n## Definitions\n\n* **Build minutes**: The amount of minutes that it takes to build a project.\n* **Concurrent builds**: The number of builds that can run in parallel across an account.\n* **Build timeout**: The amount of time that a build can be run before it is terminated.\n* **vCPU**: The number of CPU cores available to your build.\n* **Memory**: The amount of memory available to your build.\n* **Disk space**: The amount of disk space available to your build.\n* **Environment variables**: The number of custom environment variables you can configure per Worker.\n* **Size per environment variable**: The maximum size for each individual environment variable.\n\n</page>\n\n<page>\n---\ntitle: MCP server  Cloudflare Workers docs\nlastUpdated: 2025-10-09T17:32:08.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/mcp-server/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/mcp-server/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Troubleshooting builds  Cloudflare Workers docs\ndescription: Learn how to troubleshoot common and known issues in Workers Builds.\nlastUpdated: 2025-05-19T22:32:03.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/builds/troubleshoot/\n  md: https://developers.cloudflare.com/workers/ci-cd/builds/troubleshoot/index.md\n---\n\nThis guide explains how to identify and resolve build errors, as well as troubleshoot common issues in the Workers Builds deployment process.\n\nTo view your build history, go to your Worker project in the Cloudflare dashboard, select **Deployment**, select **View Build History** at the bottom of the page, and select the build you want to view. To retry a build, select the ellipses next to the build and select **Retry build**. Alternatively, you can select **Retry build** on the Build Details page.\n\n## Known issues or limitations\n\nHere are some common build errors that may surface in the build logs or general issues and how you can resolve them.\n\n### Workers name requirement\n\n` [ERROR] The name in your wrangler.toml file (<Worker name>) must match the name of your Worker. Please update the name field in your wrangler.toml file.`\n\nWhen connecting a Git repository to your Workers project, the specified name for the Worker on the Cloudflare dashboard must match the `name` argument in the wrangler.toml file located in the specified root directory. If it does not match, update the name field in your wrangler.toml file to match the name of the Worker on the dashboard.\n\nThe build system uses the `name` argument in the wrangler.toml to determine which Worker to deploy to Cloudflare's global network. This requirement ensures consistency between the Worker's name on the dashboard and the deployed Worker.\n\nNote\n\nThis does not apply to [Wrangler Environments](https://developers.cloudflare.com/workers/wrangler/environments/) if the Worker name before the `-<env_name>` suffix matches the name in wrangler.toml.\n\nFor example, a Worker named `my-worker-staging` on the dashboard can be deployed from a repository that contains a wrangler.toml with the arguments `name = my-worker` and `[env.staging]` using the deploy command `npx wrangler deploy --env staging`.\n\nOn Wrangler v3 and up, Workers Builds automatically matches the name of the connected Worker by overriding it with the `WRANGLER_CI_OVERRIDE_NAME` environment variable.\n\n### Missing wrangler.toml\n\n` [ERROR] Missing entry-point: The entry-point should be specified via the command line (e.g. wrangler deploy path/to/script) or the main config field.`\n\nIf you see this error, a wrangler.toml is likely missing from the root directory. Navigate to **Settings** > **Build** > **Build Configuration** to update the root directory, or add a [wrangler.toml](https://developers.cloudflare.com/workers/wrangler/configuration/) to the specified directory.\n\n### Incorrect account\\_id\n\n`Could not route to /client/v4/accounts/<Account ID>/workers/services/<Worker name>, perhaps your object identifier is invalid? [code: 7003]`\n\nIf you see this error, the wrangler.toml likely has an `account_id` for a different account. Remove the `account_id` argument or update it with your account's `account_id`, available in **Workers & Pages Overview** under **Account Details**.\n\n### Stale API token\n\n`Failed: The build token selected for this build has been deleted or rolled and cannot be used for this build. Please update your build token in the Worker Builds settings and retry the build.`\n\nThe API Token dropdown in Build Configuration settings may show stale tokens that were edited, deleted, or rolled. If you encounter an error due to a stale token, create a new API Token and select it for the build.\n\n### Build timed out\n\n`Build was timed out`\n\nThere is a maximum build duration of 20 minutes. If a build exceeds this time, then the build will be terminated and the above error log is shown. For more details, see [Workers Builds limits](https://developers.cloudflare.com/workers/ci-cd/builds/limits-and-pricing/).\n\n### Git integration issues\n\nIf you are running into errors associated with your Git integration, you can try removing access to your [GitHub](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#removing-access) or [GitLab](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration/#removing-access) integration from Cloudflare, then reinstalling the [GitHub](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/github-integration/#reinstall-a-git-integration) or [GitLab](https://developers.cloudflare.com/workers/ci-cd/builds/git-integration/gitlab-integration/#reinstall-a-git-integration) integration.\n\n## For additional support\n\nIf you discover additional issues or would like to provide feedback, reach out to us in the [Cloudflare Developers Discord](https://discord.com/channels/595317990191398933/1052656806058528849).\n\n</page>\n\n<page>\n---\ntitle: GitHub Actions  Cloudflare Workers docs\ndescription: Integrate Workers development into your existing GitHub Actions workflows.\nlastUpdated: 2025-09-09T12:12:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/external-cicd/github-actions/\n  md: https://developers.cloudflare.com/workers/ci-cd/external-cicd/github-actions/index.md\n---\n\nYou can deploy Workers with [GitHub Actions](https://github.com/marketplace/actions/deploy-to-cloudflare-workers-with-wrangler). Here is how you can set up your GitHub Actions workflow.\n\n## 1. Authentication\n\nWhen running Wrangler locally, authentication to the Cloudflare API happens via the [`wrangler login`](https://developers.cloudflare.com/workers/wrangler/commands/#login) command, which initiates an interactive authentication flow. Since CI/CD environments are non-interactive, Wrangler requires a [Cloudflare API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) and [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) to authenticate with the Cloudflare API.\n\n### Cloudflare account ID\n\nTo find your Cloudflare account ID, refer to [Find account and zone IDs](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/).\n\n### API token\n\nTo create an API token to authenticate Wrangler in your CI job:\n\n1. In the Cloudflare dashboard, go to the **Account API tokens** page.\n\n   [Go to **Account API tokens**](https://dash.cloudflare.com/?to=/:account/api-tokens)\n\n2. Select **Create Token** > find **Edit Cloudflare Workers** > select **Use Template**.\n\n3. Customize your token name.\n\n4. Scope your token.\n\nYou will need to choose the account and zone resources that the generated API token will have access to. We recommend scoping these down as much as possible to limit the access of your token. For example, if you have access to three different Cloudflare accounts, you should restrict the generated API token to only the account on which you will be deploying a Worker.\n\n## 2. Set up CI/CD\n\nThe method for running Wrangler in your CI/CD environment will depend on the specific setup for your project (whether you use GitHub Actions/Jenkins/GitLab or something else entirely).\n\nTo set up your CI/CD:\n\n1. Go to your CI/CD platform and add the following as secrets:\n\n* `CLOUDFLARE_ACCOUNT_ID`: Set to the [Cloudflare account ID](#cloudflare-account-id) for the account on which you want to deploy your Worker.\n* `CLOUDFLARE_API_TOKEN`: Set to the [Cloudflare API token you generated](#api-token).\n\nWarning\n\nDon't store the value of `CLOUDFLARE_API_TOKEN` in your repository, as it gives access to deploy Workers on your account. Instead, you should utilize your CI/CD provider's support for storing secrets.\n\n1. Create a workflow that will be responsible for deploying the Worker. This workflow should run `wrangler deploy`. Review an example [GitHub Actions](https://docs.github.com/en/actions/using-workflows/about-workflows) workflow in the follow section.\n\n### GitHub Actions\n\nCloudflare provides [an official action](https://github.com/cloudflare/wrangler-action) for deploying Workers. Refer to the following example workflow which deploys your Worker on push to the `main` branch.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: GitLab CI/CD  Cloudflare Workers docs\ndescription: Integrate Workers development into your existing GitLab Pipelines workflows.\nlastUpdated: 2025-12-26T17:58:30.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/ci-cd/external-cicd/gitlab-cicd/\n  md: https://developers.cloudflare.com/workers/ci-cd/external-cicd/gitlab-cicd/index.md\n---\n\nYou can deploy Workers with [GitLab CI/CD](https://docs.gitlab.com/ee/ci/pipelines/index.html). Here is how you can set up your Gitlab CI/CD pipeline.\n\n## 1. Authentication\n\nWhen running Wrangler locally, authentication to the Cloudflare API happens via the [`wrangler login`](https://developers.cloudflare.com/workers/wrangler/commands/#login) command, which initiates an interactive authentication flow. Since CI/CD environments are non-interactive, Wrangler requires a [Cloudflare API token](https://developers.cloudflare.com/fundamentals/api/get-started/create-token/) and [account ID](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/) to authenticate with the Cloudflare API.\n\n### Cloudflare account ID\n\nTo find your Cloudflare account ID, refer to [Find account and zone IDs](https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/).\n\n### API token\n\nTo create an API token to authenticate Wrangler in your CI job:\n\n1. In the Cloudflare dashboard, go to the **Account API tokens** page.\n\n   [Go to **Account API tokens**](https://dash.cloudflare.com/?to=/:account/api-tokens)\n\n2. Select **Create Token** > find **Edit Cloudflare Workers** > select **Use Template**.\n\n3. Customize your token name.\n\n4. Scope your token.\n\nYou will need to choose the account and zone resources that the generated API token will have access to. We recommend scoping these down as much as possible to limit the access of your token. For example, if you have access to three different Cloudflare accounts, you should restrict the generated API token to only the account on which you will be deploying a Worker.\n\n## 2. Set up CI\n\nThe method for running Wrangler in your CI/CD environment will depend on the specific setup for your project (whether you use GitHub Actions/Jenkins/GitLab or something else entirely).\n\nTo set up your CI:\n\n1. Go to your CI platform and add the following as secrets:\n\n* `CLOUDFLARE_ACCOUNT_ID`: Set to the [Cloudflare account ID](#cloudflare-account-id) for the account on which you want to deploy your Worker.\n* `CLOUDFLARE_API_TOKEN`: Set to the [Cloudflare API token you generated](#api-token).\n\nWarning\n\nDon't store the value of `CLOUDFLARE_API_TOKEN` in your repository, as it gives access to deploy Workers on your account. Instead, you should utilize your CI/CD provider's support for storing secrets.\n\n1. Create a workflow that will be responsible for deploying the Worker. This workflow should run `wrangler deploy`. Review an example [GitHub Actions](https://docs.github.com/en/actions/using-workflows/about-workflows) workflow in the following section.\n\n### GitLab Pipelines\n\nRefer to [GitLab's blog](https://about.gitlab.com/blog/2022/11/21/deploy-remix-with-gitlab-and-cloudflare/) for an example pipeline. Under the `script` key, replace `npm run deploy` with [`npx wrangler deploy`](https://developers.cloudflare.com/workers/wrangler/commands/#deploy).\n\n</page>\n\n<page>\n---\ntitle: APIs  Cloudflare Workers docs\ndescription: To integrate with third party APIs from Cloudflare Workers, use the\n  fetch API to make HTTP requests to the API endpoint. Then use the response\n  data to modify or manipulate your content as needed.\nlastUpdated: 2025-08-18T18:38:47.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/integrations/apis/\n  md: https://developers.cloudflare.com/workers/configuration/integrations/apis/index.md\n---\n\nTo integrate with third party APIs from Cloudflare Workers, use the [fetch API](https://developers.cloudflare.com/workers/runtime-apis/fetch/) to make HTTP requests to the API endpoint. Then use the response data to modify or manipulate your content as needed.\n\nFor example, if you want to integrate with a weather API, make a fetch request to the API endpoint and retrieve the current weather data. Then use this data to display the current weather conditions on your website.\n\nTo make the `fetch()` request, add the following code to your project's `src/index.js` file:",
      "language": "unknown"
    },
    {
      "code": "## Authentication\n\nIf your API requires authentication, use Wrangler secrets to securely store your credentials. To do this, create a secret in your Cloudflare Workers project using the following [`wrangler secret`](https://developers.cloudflare.com/workers/wrangler/commands/#secret) command:",
      "language": "unknown"
    },
    {
      "code": "Then, retrieve the secret value in your code using the following code snippet:",
      "language": "unknown"
    },
    {
      "code": "Then use the secret value to authenticate with the external service. For example, if the external service requires an API key for authentication, include it in your request headers.\n\nFor services that require mTLS authentication, use [mTLS certificates](https://developers.cloudflare.com/workers/runtime-apis/bindings/mtls) to present a client certificate.\n\n## Tips\n\n* Use the [Cache API](https://developers.cloudflare.com/workers/runtime-apis/cache/) to cache data from the third party API. This allows you to optimize cacheable requests made to the API. Integrating with third party APIs from Cloudflare Workers adds additional functionality and features to your application.\n\n* Use [Custom Domains](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) when communicating with external APIs, which treat your Worker as your core application.\n\n</page>\n\n<page>\n---\ntitle: External Services  Cloudflare Workers docs\ndescription: Many external services provide libraries and SDKs to interact with\n  their APIs. While many Node-compatible libraries work on Workers right out of\n  the box, some, which implement fs, http/net, or access the browser window do\n  not directly translate to the Workers runtime, which is v8-based.\nlastUpdated: 2024-08-20T21:10:02.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/integrations/external-services/\n  md: https://developers.cloudflare.com/workers/configuration/integrations/external-services/index.md\n---\n\nMany external services provide libraries and SDKs to interact with their APIs. While many Node-compatible libraries work on Workers right out of the box, some, which implement `fs`, `http/net`, or access the browser `window` do not directly translate to the Workers runtime, which is v8-based.\n\n## Authentication\n\nIf your service requires authentication, use Wrangler secrets to securely store your credentials. To do this, create a secret in your Cloudflare Workers project using the following [`wrangler secret`](https://developers.cloudflare.com/workers/wrangler/commands/#secret) command:",
      "language": "unknown"
    },
    {
      "code": "Then, retrieve the secret value in your code using the following code snippet:",
      "language": "unknown"
    },
    {
      "code": "Then use the secret value to authenticate with the external service. For example, if the external service requires an API key for authentication, include the secret in your library's configuration.\n\nFor services that require mTLS authentication, use [mTLS certificates](https://developers.cloudflare.com/workers/runtime-apis/bindings/mtls) to present a client certificate.\n\nUse [Custom Domains](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) when communicating with external APIs, which treat your Worker as your core application.\n\n</page>\n\n<page>\n---\ntitle: Custom Domains  Cloudflare Workers docs\ndescription: Custom Domains allow you to connect your Worker to a domain or\n  subdomain, without having to make changes to your DNS settings or perform any\n  certificate management. After you set up a Custom Domain for your Worker,\n  Cloudflare will create DNS records and issue necessary certificates on your\n  behalf. The created DNS records will point directly to your Worker. Unlike\n  Routes, Custom Domains point all paths of a domain or subdomain to your\n  Worker.\nlastUpdated: 2025-11-17T14:08:01.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/routing/custom-domains/\n  md: https://developers.cloudflare.com/workers/configuration/routing/custom-domains/index.md\n---\n\n## Background\n\nCustom Domains allow you to connect your Worker to a domain or subdomain, without having to make changes to your DNS settings or perform any certificate management. After you set up a Custom Domain for your Worker, Cloudflare will create DNS records and issue necessary certificates on your behalf. The created DNS records will point directly to your Worker. Unlike [Routes](https://developers.cloudflare.com/workers/configuration/routing/routes/#set-up-a-route), Custom Domains point all paths of a domain or subdomain to your Worker.\n\nCustom Domains are routes to a domain or subdomain (such as `example.com` or `shop.example.com`) within a Cloudflare zone where the Worker is the origin.\n\nCustom Domains are recommended if you want to connect your Worker to the Internet and do not have an application server that you want to always communicate with. If you do have external dependencies, you can create a `Request` object with the target URI, and use `fetch()` to reach out.\n\nCustom Domains can stack on top of each other. For example, if you have Worker A attached to `app.example.com` and Worker B attached to `api.example.com`, Worker A can call `fetch()` on `api.example.com` and invoke Worker B.\n\n![Custom Domains can stack on top of each other, like any external dependencies](https://developers.cloudflare.com/_astro/custom-domains-subrequest.C6c84jN5_Z1TXNWy.webp)\n\nCustom Domains can also be invoked within the same zone via `fetch()`, unlike Routes.\n\n## Add a Custom Domain\n\nTo add a Custom Domain, you must have:\n\n1. An [active Cloudflare zone](https://developers.cloudflare.com/dns/zone-setups/).\n2. A Worker to invoke.\n\nCustom Domains can be attached to your Worker via the Cloudflare dashboard, [Wrangler](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/#set-up-a-custom-domain-in-your-wrangler-configuration-file) or the [API](https://developers.cloudflare.com/api/resources/workers/subresources/domains/methods/list/).\n\nWarning\n\nYou cannot create a Custom Domain on a hostname with an existing CNAME DNS record or on a zone you do not own.\n\n### Set up a Custom Domain in the dashboard\n\nTo set up a Custom Domain in the dashboard:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. In **Overview**, select your Worker.\n\n3. Go to **Settings** > **Domains & Routes** > **Add** > **Custom Domain**.\n\n4. Enter the domain you want to configure for your Worker.\n\n5. Select **Add Custom Domain**.\n\nAfter you have added the domain or subdomain, Cloudflare will create a new DNS record for you. You can add multiple Custom Domains.\n\n### Set up a Custom Domain in your Wrangler configuration file\n\nTo configure a Custom Domain in your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/), add the `custom_domain=true` option on each pattern under `routes`. For example, to configure a Custom Domain:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "To configure multiple Custom Domains:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "## Worker to Worker communication\n\nOn the same zone, the only way for a Worker to communicate with another Worker running on a [route](https://developers.cloudflare.com/workers/configuration/routing/routes/#set-up-a-route), or on a [`workers.dev`](https://developers.cloudflare.com/workers/configuration/routing/routes/#_top) subdomain, is via [service bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/service-bindings/).\n\nOn the same zone, if a Worker is attempting to communicate with a target Worker running on a Custom Domain rather than a route, the limitation is removed. Fetch requests sent on the same zone from one Worker to another Worker running on a Custom Domain will succeed without a service binding.\n\nFor example, consider the following scenario, where both Workers are running on the `example.com` Cloudflare zone:\n\n* `worker-a` running on the [route](https://developers.cloudflare.com/workers/configuration/routing/routes/#set-up-a-route) `auth.example.com/*`.\n* `worker-b` running on the [route](https://developers.cloudflare.com/workers/configuration/routing/routes/#set-up-a-route) `shop.example.com/*`.\n\nIf `worker-a` sends a fetch request to `worker-b`, the request will fail, because of the limitation on same-zone fetch requests. `worker-a` must have a service binding to `worker-b` for this request to resolve.",
      "language": "unknown"
    },
    {
      "code": "However, if `worker-b` was instead set up to run on the Custom Domain `shop.example.com`, the fetch request would succeed.\n\n## Request matching behaviour\n\nCustom Domains do not support [wildcard DNS records](https://developers.cloudflare.com/dns/manage-dns-records/reference/wildcard-dns-records/). An incoming request must exactly match the domain or subdomain your Custom Domain is registered to. Other parts (path, query parameters) of the URL are not considered when executing this matching logic. For example, if you create a Custom Domain on `api.example.com` attached to your `api-gateway` Worker, a request to either `api.example.com/login` or `api.example.com/user` would invoke the same `api-gateway` Worker.\n\n![Custom Domains follow standard DNS ordering and matching logic](https://developers.cloudflare.com/_astro/custom-domains-api-gateway.DmeJZDoL_2urk5W.webp)\n\n## Interaction with Routes\n\nA Worker running on a Custom Domain is treated as an origin. Any Workers running on routes before your Custom Domain can optionally call the Worker registered on your Custom Domain by issuing `fetch(request)` with the incoming `Request` object. That means that you are able to set up Workers to run before a request gets to your Custom Domain Worker. In other words, you can chain together two Workers in the same request.\n\nFor example, consider the following workflow:\n\n1. A Custom Domain for `api.example.com` points to your `api-worker` Worker.\n2. A route added to `api.example.com/auth` points to your `auth-worker` Worker.\n3. A request to `api.example.com/auth` will trigger your `auth-worker` Worker.\n4. Using `fetch(request)` within the `auth-worker` Worker will invoke the `api-worker` Worker, as if it was a normal application server.",
      "language": "unknown"
    },
    {
      "code": "## Certificates\n\nCreating a Custom Domain will also generate an [Advanced Certificate](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/) on your target zone for your target hostname.\n\nThese certificates are generated with default settings. To override these settings, delete the generated certificate and create your own certificate in the Cloudflare dashboard. Refer to [Manage advanced certificates](https://developers.cloudflare.com/ssl/edge-certificates/advanced-certificate-manager/manage-certificates/) for instructions.\n\n## Migrate from Routes\n\nIf you are currently invoking a Worker using a [route](https://developers.cloudflare.com/workers/configuration/routing/routes/) with `/*`, and you have a CNAME record pointing to `100::` or similar, a Custom Domain is a recommended replacement.\n\n### Migrate from Routes via the dashboard\n\nTo migrate the route `example.com/*`:\n\n1. In the Cloudflare dashboard, go to the **DNS Records** page for your domain.\n\n   [Go to **Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records)\n\n2. Delete the CNAME record for `example.com`.\n\n3. Go to **Account Home** > **Workers & Pages**.\n\n4. In **Overview**, select your Worker > **Settings** > **Domains & Routes**.\n\n5. Select **Add** > **Custom domain** and add `example.com`.\n\n6. Delete the route `example.com/*` located in your Worker > **Settings** > **Domains & Routes**.\n\n### Migrate from Routes via Wrangler\n\nTo migrate the route `example.com/*` in your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n1. In the Cloudflare dashboard, go to the **DNS Records** page for your domain.\n\n   [Go to **Records**](https://dash.cloudflare.com/?to=/:account/:zone/dns/records)\n\n2. Delete the CNAME record for `example.com`.\n\n3. Add the following to your Wrangler file:\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "4. Run `npx wrangler deploy` to create the Custom Domain your Worker will run on.\n\n</page>\n\n<page>\n---\ntitle: Routes  Cloudflare Workers docs\ndescription: Routes allow users to map a URL pattern to a Worker. When a request\n  comes in to the Cloudflare network that matches the specified URL pattern,\n  your Worker will execute on that route.\nlastUpdated: 2025-09-17T11:26:09.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/routing/routes/\n  md: https://developers.cloudflare.com/workers/configuration/routing/routes/index.md\n---\n\n## Background\n\nRoutes allow users to map a URL pattern to a Worker. When a request comes in to the Cloudflare network that matches the specified URL pattern, your Worker will execute on that route.\n\nRoutes are a set of rules that evaluate against a request's URL. Routes are recommended for you if you have a designated application server you always need to communicate with. Calling `fetch()` on the incoming `Request` object will trigger a subrequest to your application server, as defined in the **DNS** settings of your Cloudflare zone.\n\nRoutes add Workers functionality to your existing proxied hostnames, in front of your application server. These allow your Workers to act as a proxy and perform any necessary work before reaching out to an application server behind Cloudflare.\n\n![Routes work with your applications defined in Cloudflare DNS](https://developers.cloudflare.com/_astro/routes-diagram.CfGSi1RG_32rsQ.webp)\n\nRoutes can `fetch()` Custom Domains and take precedence if configured on the same hostname. If you would like to run a logging Worker in front of your application, for example, you can create a Custom Domain on your application Worker for `app.example.com`, and create a Route for your logging Worker at `app.example.com/*`. Calling `fetch()` will invoke the application Worker on your Custom Domain. Note that Routes cannot be the target of a same-zone `fetch()` call.\n\n## Set up a route\n\nTo add a route, you must have:\n\n1. An [active Cloudflare zone](https://developers.cloudflare.com/dns/zone-setups/).\n2. A Worker to invoke.\n3. A DNS record set up for the [domain](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-zone-apex/) or [subdomain](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-subdomain/) proxied by Cloudflare (also known as orange-clouded) you would like to route to.\n\nWarning\n\nRoute setup will differ depending on if your application's origin is a Worker or not. If your Worker is your application's origin, use [Custom Domains](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/).\n\nIf your Worker is not your application's origin, follow the instructions below to set up a route.\n\nNote\n\nRoutes can also be created via the API. Refer to the [Workers Routes API documentation](https://developers.cloudflare.com/api/resources/workers/subresources/routes/methods/create/) for more information.\n\n### Set up a route in the dashboard\n\nBefore you set up a route, make sure you have a DNS record set up for the [domain](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-zone-apex/) or [subdomain](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-subdomain/) you would like to route to.\n\nTo set up a route in the dashboard:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. In **Overview**, select your Worker.\n\n3. Go to **Settings** > **Domains & Routes** > **Add** > **Route**.\n\n4. Select the zone and enter the route pattern.\n\n5. Select **Add route**.\n\n### Set up a route in the Wrangler configuration file\n\nBefore you set up a route, make sure you have a DNS record set up for the [domain](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-zone-apex/) or [subdomain](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-subdomain/) you would like to route to.\n\nTo configure a route using your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/), refer to the following example.\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Add the `zone_name` or `zone_id` option after each route. The `zone_name` and `zone_id` options are interchangeable. If using `zone_id`, find your zone ID by:\n\n1. Go to the Zone Overview page in the Cloudflare dashboard.\n\n   [Go to **Overview**](https://dash.cloudflare.com/?to=/:account/:zone/)\n\n2. Find the **Zone ID** in the left-hand side of **Overview**.\n\nTo add multiple routes:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "## Matching behavior\n\nRoute patterns look like this:",
      "language": "unknown"
    },
    {
      "code": "This pattern would match all HTTPS requests destined for a subhost of example.com and whose paths are prefixed by `/images/`.\n\nA pattern to match all requests looks like this:",
      "language": "unknown"
    },
    {
      "code": "While they look similar to a [regex](https://en.wikipedia.org/wiki/Regular_expression) pattern, route patterns follow specific rules:\n\n* The only supported operator is the wildcard (`*`), which matches zero or more of any character.\n\n* Route patterns may not contain infix wildcards or query parameters. For example, neither `example.com/*.jpg` nor `example.com/?foo=*` are valid route patterns.\n\n* When more than one route pattern could match a request URL, the most specific route pattern wins. For example, the pattern `www.example.com/*` would take precedence over `*.example.com/*` when matching a request for `https://www.example.com/`. The pattern `example.com/hello/*` would take precedence over `example.com/*` when matching a request for `example.com/hello/world`.\n\n* Route pattern matching considers the entire request URL, including the query parameter string. Since route patterns may not contain query parameters, the only way to have a route pattern match URLs with query parameters is to terminate it with a wildcard, `*`.\n\n* The path component of route patterns is case sensitive, for example, `example.com/Images/*` and `example.com/images/*` are two distinct routes.\n\n* For routes created before October 15th, 2023, the host component of route patterns is case sensitive, for example, `example.com/*` and `Example.com/*` are two distinct routes.\n\n* For routes created on or after October 15th, 2023, the host component of route patterns is not case sensitive, for example, `example.com/*` and `Example.com/*` are equivalent routes.\n\nA route can be specified without being associated with a Worker. This will act to negate any less specific patterns. For example, consider this pair of route patterns, one with a Workers script and one without:",
      "language": "unknown"
    },
    {
      "code": "In this example, all requests destined for example.com and whose paths are prefixed by `/images/` would be routed to `worker-script`, *except* for `/images/cat.png`, which would bypass Workers completely. Requests with a path of `/images/cat.png?foo=bar` would be routed to `worker-script`, due to the presence of the query string.\n\n## Validity\n\nThe following set of rules govern route pattern validity.\n\n#### Route patterns must include your zone\n\nIf your zone is `example.com`, then the simplest possible route pattern you can have is `example.com`, which would match `http://example.com/` and `https://example.com/`, and nothing else. As with a URL, there is an implied path of `/` if you do not specify one.\n\n#### Route patterns may not contain any query parameters\n\nFor example, `https://example.com/?anything` is not a valid route pattern.\n\n#### Route patterns may optionally begin with `http://` or `https://`\n\nIf you omit a scheme in your route pattern, it will match both `http://` and `https://` URLs. If you include `http://` or `https://`, it will only match HTTP or HTTPS requests, respectively.\n\n* `https://*.example.com/` matches `https://www.example.com/` but not `http://www.example.com/`.\n\n* `*.example.com/` matches both `https://www.example.com/` and `http://www.example.com/`.\n\n#### Hostnames may optionally begin with `*`\n\nIf a route pattern hostname begins with `*`, then it matches the host and all subhosts. If a route pattern hostname begins with `*.`, then it only matches all subhosts.\n\n* `*example.com/` matches `https://example.com/` and `https://www.example.com/`.\n\n* `*.example.com/` matches `https://www.example.com/` but not `https://example.com/`.\n\n#### Paths may optionally end with `*`\n\nIf a route pattern path ends with `*`, then it matches all suffixes of that path.\n\n* `https://example.com/path*` matches `https://example.com/path` and `https://example.com/path2` and `https://example.com/path/readme.txt`\n\nWarning\n\nThere is a well-known bug associated with path matching concerning wildcards (`*`) and forward slashes (`/`) that is documented in [Known issues](https://developers.cloudflare.com/workers/platform/known-issues/).\n\n#### Domains and subdomains must have a DNS Record\n\nAll domains and subdomains must have a [DNS record](https://developers.cloudflare.com/dns/manage-dns-records/how-to/create-dns-records/) to be proxied on Cloudflare and used to invoke a Worker. For example, if you want to put a Worker on `myname.example.com`, and you have added `example.com` to Cloudflare but have not added any DNS records for `myname.example.com`, any request to `myname.example.com` will result in the error `ERR_NAME_NOT_RESOLVED`.\n\nWarning\n\nIf you have previously used the Cloudflare dashboard to add an `AAAA` record for `myname` to `example.com`, pointing to `100::` (the [reserved IPv6 discard prefix](https://tools.ietf.org/html/rfc6666)), Cloudflare recommends creating a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) pointing to your Worker instead.\n\n</page>\n\n<page>\n---\ntitle: workers.dev  Cloudflare Workers docs\ndescription: Cloudflare Workers accounts come with a workers.dev subdomain that\n  is configurable in the Cloudflare dashboard. Your workers.dev subdomain allows\n  you getting started quickly by deploying Workers without first onboarding your\n  custom domain to Cloudflare.\nlastUpdated: 2025-11-06T16:07:17.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/routing/workers-dev/\n  md: https://developers.cloudflare.com/workers/configuration/routing/workers-dev/index.md\n---\n\nCloudflare Workers accounts come with a `workers.dev` subdomain that is configurable in the Cloudflare dashboard. Your `workers.dev` subdomain allows you getting started quickly by deploying Workers without first onboarding your custom domain to Cloudflare.\n\nIt's recommended to run production Workers on a [Workers route or custom domain](https://developers.cloudflare.com/workers/configuration/routing/), rather than on your `workers.dev` subdomain. Your `workers.dev` subdomain is treated as a [Free website](https://www.cloudflare.com/plans/) and is intended for personal or hobby projects that aren't business-critical.\n\n## Configure `workers.dev`\n\n`workers.dev` subdomains take the format: `<YOUR_ACCOUNT_SUBDOMAIN>.workers.dev`. To change your `workers.dev` subdomain:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select **Change** next to **Your subdomain**.\n\nAll Workers are assigned a `workers.dev` route when they are created or renamed following the syntax `<YOUR_WORKER_NAME>.<YOUR_SUBDOMAIN>.workers.dev`. The [`name`](https://developers.cloudflare.com/workers/wrangler/configuration/#inheritable-keys) field in your Worker configuration is used as the subdomain for the deployed Worker.\n\n## Manage access to `workers.dev`\n\nWhen enabled, your `workers.dev` URL is available publicly. You can use [Cloudflare Access](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/) to require visitors to authenticate before accessing preview URLs. You can limit access to yourself, your teammates, your organization, or anyone else you specify in your [access policy](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/).\n\nTo limit your `workers.dev` URL to authorized emails only:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. In **Overview**, select your Worker.\n\n3. Go to **Settings** > **Domains & Routes**.\n\n4. For `workers.dev`, click **Enable Cloudflare Access**.\n\n5. Optionally, to configure the Access application, click **Manage Cloudflare Access**. There, you can change the email addresses you want to authorize. View [Access policies](https://developers.cloudflare.com/cloudflare-one/access-controls/policies/#selectors) to learn about configuring alternate rules.\n\n6. [Validate the Access JWT](https://developers.cloudflare.com/cloudflare-one/access-controls/applications/http-apps/authorization-cookie/validating-json/#cloudflare-workers-example) in your Worker script using the audience (`aud`) tag and JWKs URL provided.\n\n## Disabling `workers.dev`\n\n### Disabling `workers.dev` in the dashboard\n\nTo disable the `workers.dev` route for a Worker:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. In **Overview**, select your Worker.\n\n3. Go to **Settings** > **Domains & Routes**.\n\n4. On `workers.dev` click \"Disable\".\n\n5. Confirm you want to disable.\n\n### Disabling `workers.dev` in the Wrangler configuration file\n\nTo disable the `workers.dev` route for a Worker, include the following in your Worker's [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "When you redeploy your Worker with this change, the `workers.dev` route will be disabled. Disabling your `workers.dev` route does not disable Preview URLs. Learn how to [disable Preview URLs](https://developers.cloudflare.com/workers/configuration/previews/#disabling-preview-urls).\n\nIf you do not specify `workers_dev = false` but add a [`routes` component](https://developers.cloudflare.com/workers/wrangler/configuration/#routes) to your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/), the value of `workers_dev` will be inferred as `false` on the next deploy.\n\nWarning\n\nIf you disable your `workers.dev` route in the Cloudflare dashboard but do not update your Worker's Wrangler file with `workers_dev = false`, the `workers.dev` route will be re-enabled the next time you deploy your Worker with Wrangler.\n\n## Limitations\n\nWhen deploying a Worker with a `workers.dev` subdomain enabled, your Worker name must meet the following requirements:\n\n* Must be 63 characters or less\n* Must contain only alphanumeric characters (`a-z`, `A-Z`, `0-9`) and dashes (`-`)\n* Cannot start or end with a dash (`-`)\n\nThese restrictions apply because the Worker name is used as a DNS label in your `workers.dev` URL. DNS labels have a maximum length of 63 characters and cannot begin or end with a dash.\n\nNote\n\nWorker names can be up to 255 characters when not using a `workers.dev` subdomain. If you need a longer name, you can disable `workers.dev` and use [routes](https://developers.cloudflare.com/workers/configuration/routing/routes/) or [custom domains](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) instead.\n\n## Related resources\n\n* [Announcing `workers.dev`](https://blog.cloudflare.com/announcing-workers-dev)\n* [Wrangler routes configuration](https://developers.cloudflare.com/workers/wrangler/configuration/#types-of-routes)\n\n</page>\n\n<page>\n---\ntitle: Workers Sites configuration  Cloudflare Workers docs\ndescription: Workers Sites require the latest version of Wrangler.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/sites/configuration/\n  md: https://developers.cloudflare.com/workers/configuration/sites/configuration/index.md\n---\n\nUse Workers Static Assets Instead\n\nYou should use [Workers Static Assets](https://developers.cloudflare.com/workers/static-assets/) to host full-stack applications instead of Workers Sites. It has been deprecated in Wrangler v4, and the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) does not support Workers Sites. Do not use Workers Sites for new projects.\n\nWorkers Sites require the latest version of [Wrangler](https://github.com/cloudflare/workers-sdk/tree/main/packages/wrangler).\n\n## Wrangler configuration file\n\nThere are a few specific configuration settings for Workers Sites in your Wrangler file:\n\n* `bucket` required\n\n  * The directory containing your static assets, path relative to your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/). Example: `bucket = \"./public\"`.\n\n* `include` optional\n\n  * A list of gitignore-style patterns for files or directories in `bucket` you exclusively want to upload. Example: `include = [\"upload_dir\"]`.\n\n* `exclude` optional\n\n  * A list of gitignore-style patterns for files or directories in `bucket` you want to exclude from uploads. Example: `exclude = [\"ignore_dir\"]`.\n\nTo learn more about the optional `include` and `exclude` fields, refer to [Ignoring subsets of static assets](#ignoring-subsets-of-static-assets).\n\nNote\n\nIf your project uses [environments](https://developers.cloudflare.com/workers/wrangler/environments/), make sure to place `site` above any environment-specific configuration blocks.\n\nExample of a [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "## Storage limits\n\nFor very exceptionally large pages, Workers Sites might not work for you. There is a 25 MiB limit per page or file.\n\n## Ignoring subsets of static assets\n\nWorkers Sites require [Wrangler](https://github.com/cloudflare/workers-sdk/tree/main/packages/wrangler) - make sure to use the [latest version](https://developers.cloudflare.com/workers/wrangler/install-and-update/#update-wrangler).\n\nThere are cases where users may not want to upload certain static assets to their Workers Sites. In this case, Workers Sites can also be configured to ignore certain files or directories using logic similar to [Cargo's optional include and exclude fields](https://doc.rust-lang.org/cargo/reference/manifest.html#the-exclude-and-include-fields-optional).\n\nThis means that you should use gitignore semantics when declaring which directory entries to include or ignore in uploads.\n\n### Exclusively including files/directories\n\nIf you want to include only a certain set of files or directories in your `bucket`, you can add an `include` field to your `[site]` section of your Wrangler file:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Wrangler will only upload files or directories matching the patterns in the `include` array.\n\n### Excluding files/directories\n\nIf you want to exclude files or directories in your `bucket`, you can add an `exclude` field to your `[site]` section of your Wrangler file:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Wrangler will ignore files or directories matching the patterns in the `exclude` array when uploading assets to Workers KV.\n\n### Include > exclude\n\nIf you provide both `include` and `exclude` fields, the `include` field will be used and the `exclude` field will be ignored.\n\n### Default ignored entries\n\nWrangler will always ignore:\n\n* `node_modules`\n* Hidden files and directories\n* Symlinks\n\n#### More about include/exclude patterns\n\nLearn more about the standard patterns used for include and exclude in the [gitignore documentation](https://git-scm.com/docs/gitignore).\n\n</page>\n\n<page>\n---\ntitle: Start from existing  Cloudflare Workers docs\ndescription: Workers Sites require Wrangler  make sure to use the latest version.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/sites/start-from-existing/\n  md: https://developers.cloudflare.com/workers/configuration/sites/start-from-existing/index.md\n---\n\nUse Workers Static Assets Instead\n\nYou should use [Workers Static Assets](https://developers.cloudflare.com/workers/static-assets/) to host full-stack applications instead of Workers Sites. It has been deprecated in Wrangler v4, and the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) does not support Workers Sites. Do not use Workers Sites for new projects.\n\nWorkers Sites require [Wrangler](https://github.com/cloudflare/workers-sdk/tree/main/packages/wrangler)  make sure to use the [latest version](https://developers.cloudflare.com/workers/wrangler/install-and-update/#update-wrangler).\n\nTo deploy a pre-existing static site project, start with a pre-generated site. Workers Sites works with all static site generators, for example:\n\n* [Hugo](https://gohugo.io/getting-started/quick-start/)\n* [Gatsby](https://www.gatsbyjs.org/docs/quick-start/), requires Node\n* [Jekyll](https://jekyllrb.com/docs/), requires Ruby\n* [Eleventy](https://www.11ty.io/#quick-start), requires Node\n* [WordPress](https://wordpress.org) (refer to the tutorial on [deploying static WordPress sites with Pages](https://developers.cloudflare.com/pages/how-to/deploy-a-wordpress-site/))\n\n## Getting started\n\n1. Run the `wrangler init` command in the root of your project's directory to generate a basic Worker:",
      "language": "unknown"
    },
    {
      "code": "This command adds/update the following files:\n\n   * `wrangler.jsonc`: The file containing project configuration.\n   * `package.json`: Wrangler `devDependencies` are added.\n   * `tsconfig.json`: Added if not already there to support writing the Worker in TypeScript.\n   * `src/index.ts`: A basic Cloudflare Worker, written in TypeScript.\n\n2. Add your site's build/output directory to the Wrangler file:\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "The default directories for the most popular static site generators are listed below:\n\n   * Hugo: `public`\n   * Gatsby: `public`\n   * Jekyll: `_site`\n   * Eleventy: `_site`\n\n3. Install the `@cloudflare/kv-asset-handler` package in your project:",
      "language": "unknown"
    },
    {
      "code": "4. Replace the contents of `src/index.ts` with the following code snippet:\n\n* Module Worker",
      "language": "unknown"
    },
    {
      "code": "* Service Worker\n\n  Service Workers are deprecated\n\n  Service Workers are deprecated, but still supported. We recommend using [Module Workers](https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/) instead. New features may not be supported for Service Workers.",
      "language": "unknown"
    },
    {
      "code": "1. Run `wrangler dev` or `npx wrangler deploy` to preview or deploy your site on Cloudflare. Wrangler will automatically upload the assets found in the configured directory.",
      "language": "unknown"
    },
    {
      "code": "2. Deploy your site to a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) that you own and have already attached as a Cloudflare zone. Add a `route` property to the Wrangler file.\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   Refer to the documentation on [Routes](https://developers.cloudflare.com/workers/configuration/routing/routes/) to configure a `route` properly.\n\nLearn more about [configuring your project](https://developers.cloudflare.com/workers/wrangler/configuration/).\n\n</page>\n\n<page>\n---\ntitle: Start from scratch  Cloudflare Workers docs\ndescription: This guide shows how to quickly start a new Workers Sites project from scratch.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/sites/start-from-scratch/\n  md: https://developers.cloudflare.com/workers/configuration/sites/start-from-scratch/index.md\n---\n\nUse Workers Static Assets Instead\n\nYou should use [Workers Static Assets](https://developers.cloudflare.com/workers/static-assets/) to host full-stack applications instead of Workers Sites. It has been deprecated in Wrangler v4, and the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) does not support Workers Sites. Do not use Workers Sites for new projects.\n\nThis guide shows how to quickly start a new Workers Sites project from scratch.\n\n## Getting started\n\n1. Ensure you have the latest version of [git](https://git-scm.com/downloads) and [Node.js](https://nodejs.org/en/download/) installed.\n\n2. In your terminal, clone the `worker-sites-template` starter repository. The following example creates a project called `my-site`:",
      "language": "unknown"
    },
    {
      "code": "3. Run `npm install` to install all dependencies.\n\n4. You can preview your site by running the [`wrangler dev`](https://developers.cloudflare.com/workers/wrangler/commands/#dev) command:",
      "language": "unknown"
    },
    {
      "code": "5. Deploy your site to Cloudflare:",
      "language": "unknown"
    },
    {
      "code": "## Project layout\n\nThe template project contains the following files and directories:\n\n* `public`: The static assets for your project. By default it contains an `index.html` and a `favicon.ico`.\n* `src`: The Worker configured for serving your assets. You do not need to edit this but if you want to see how it works or add more functionality to your Worker, you can edit `src/index.ts`.\n* `wrangler.jsonc`: The file containing project configuration. The `bucket` property tells Wrangler where to find the static assets (e.g. `site = { bucket = \"./public\" }`).\n* `package.json`/`package-lock.json`: define the required Node.js dependencies.\n\n## Customize the `wrangler.jsonc` file:\n\n* Change the `name` property to the name of your project:\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* Consider updating`compatibility_date` to today's date to get access to the most recent Workers features:\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* Deploy your site to a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) that you own and have already attached as a Cloudflare zone:\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  Refer to the documentation on [Routes](https://developers.cloudflare.com/workers/configuration/routing/routes/) to configure a `route` properly.\n\nLearn more about [configuring your project](https://developers.cloudflare.com/workers/wrangler/configuration/).\n\n</page>\n\n<page>\n---\ntitle: Start from Worker  Cloudflare Workers docs\ndescription: Workers Sites require Wrangler  make sure to use the latest version.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/sites/start-from-worker/\n  md: https://developers.cloudflare.com/workers/configuration/sites/start-from-worker/index.md\n---\n\nUse Workers Static Assets Instead\n\nYou should use [Workers Static Assets](https://developers.cloudflare.com/workers/static-assets/) to host full-stack applications instead of Workers Sites. It has been deprecated in Wrangler v4, and the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) does not support Workers Sites. Do not use Workers Sites for new projects.\n\nWorkers Sites require [Wrangler](https://github.com/cloudflare/workers-sdk/tree/main/packages/wrangler)  make sure to use the [latest version](https://developers.cloudflare.com/workers/wrangler/install-and-update/#update-wrangler).\n\nIf you have a pre-existing Worker project, you can use Workers Sites to serve static assets to the Worker.\n\n## Getting started\n\n1. Create a directory that will contain the assets in the root of your project (for example, `./public`)\n\n2. Add configuration to your Wrangler file to point to it.\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "3. Install the `@cloudflare/kv-asset-handler` package in your project:",
      "language": "unknown"
    },
    {
      "code": "4. Import the `getAssetFromKV()` function into your Worker entry point and use it to respond with static assets.\n\n* Module Worker",
      "language": "unknown"
    },
    {
      "code": "* Service Worker",
      "language": "unknown"
    },
    {
      "code": "For more information on the configurable options of `getAssetFromKV()` refer to [kv-asset-handler docs](https://github.com/cloudflare/workers-sdk/tree/main/packages/kv-asset-handler).\n\n1. Run `wrangler deploy` or `npx wrangler deploy` as you would normally with your Worker project. Wrangler will automatically upload the assets found in the configured directory.",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Gradual deployments  Cloudflare Workers docs\ndescription: Incrementally deploy code changes to your Workers with gradual deployments.\nlastUpdated: 2025-11-13T14:10:58.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/\n  md: https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/index.md\n---\n\nGradual Deployments give you the ability to incrementally deploy new [versions](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/#versions) of Workers by splitting traffic across versions.\n\n![Gradual Deployments](https://developers.cloudflare.com/_astro/gradual-deployments.C6F9MQ6U_Z1KFl3a.webp)\n\nUsing gradual deployments, you can:\n\n* Gradually shift traffic to a newer version of your Worker.\n* Monitor error rates and exceptions across versions using [analytics and logs](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/#observability) tooling.\n* [Roll back](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/rollbacks/) to a previously stable version if you notice issues when deploying a new version.\n\n## Use gradual deployments\n\nThe following section guides you through an example usage of gradual deployments. You will choose to use either [Wrangler](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/#via-wrangler) or the Cloudflare dashboard to:\n\n* Create a new Worker.\n* Publish a new version of that Worker without deploying it.\n* Create a gradual deployment between the two versions.\n* Progress the deployment of the new version to 100% of traffic.\n\n### Via Wrangler\n\nNote\n\nMinimum required Wrangler version: 3.40.0. Versions before 3.73.0 require you to specify a `--x-versions` flag.\n\n#### 1. Create and deploy a new Worker\n\nCreate a new `\"Hello World\"` Worker using the [`create-cloudflare` CLI (C3)](https://developers.cloudflare.com/pages/get-started/c3/) and deploy it.",
      "language": "unknown"
    },
    {
      "code": "Answer `yes` or `no` to using TypeScript. Answer `yes` to deploying your application. This is the first version of your Worker.\n\n#### 2. Create a new version of the Worker\n\nTo create a new version of the Worker, edit the Worker code by changing the `Response` content to your desired text and upload the Worker by using the [`wrangler versions upload`](https://developers.cloudflare.com/workers/wrangler/commands/#versions-upload) command.",
      "language": "unknown"
    },
    {
      "code": "This will create a new version of the Worker that is not automatically deployed.\n\n#### 3. Create a new deployment\n\nUse the [`wrangler versions deploy`](https://developers.cloudflare.com/workers/wrangler/commands/#versions-deploy) command to create a new deployment that splits traffic between two versions of the Worker. Follow the interactive prompts to create a deployment with the versions uploaded in [step #1](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/#1-create-and-deploy-a-new-worker) and [step #2](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/#2-create-a-new-version-of-the-worker). Select your desired percentages for each version.",
      "language": "unknown"
    },
    {
      "code": "#### 4. Test the split deployment\n\nRun a cURL command on your Worker to test the split deployment.",
      "language": "unknown"
    },
    {
      "code": "You should see 10 responses. Responses will reflect the content returned by the versions in your deployment. Responses will vary depending on the percentages configured in [step #3](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/#3-create-a-new-deployment).\n\nYou can test also target a specific version using [version overrides](#version-overrides).\n\n#### 5. Set your new version to 100% deployment\n\nRun `wrangler versions deploy` again and follow the interactive prompts. Select the version uploaded in [step 2](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/gradual-deployments/#2-create-a-new-version-of-the-worker) and set it to 100% deployment.",
      "language": "unknown"
    },
    {
      "code": "### Via the Cloudflare dashboard\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select **Create application** > **Hello World** template > deploy your Worker.\n\n3. Once the Worker is deployed, go to the online code editor through **Edit code**. Edit the Worker code (change the `Response` content) and upload the Worker.\n\n4. To save changes, select the **down arrow** next to **Deploy** > **Save**. This will create a new version of your Worker.\n\n5. Create a new deployment that splits traffic between the two versions created in step 3 and 5 by going to **Deployments** and selecting **Deploy Version**.\n\n6. cURL your Worker to test the split deployment.",
      "language": "unknown"
    },
    {
      "code": "You should see 10 responses. Responses will reflect the content returned by the versions in your deployment. Responses will vary depending on the percentages configured in step #6.\n\n## Gradual deployments with static assets\n\nWhen your Worker serves [static assets](https://developers.cloudflare.com/workers/static-assets/), gradual deployments can cause asset compatibility issues where users receive HTML from one version that references assets only available in another version, leading to 404 errors.\n\nFor detailed guidance on handling static assets during gradual rollouts, including specific examples and configuration steps, refer to [Gradual rollouts](https://developers.cloudflare.com/workers/static-assets/routing/advanced/gradual-rollouts/).\n\n## Version affinity\n\nBy default, the percentages configured when using gradual deployments operate on a per-request basis  a request has a X% probability of invoking one of two versions of the Worker in the [deployment](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/#deployments).\n\nYou may want requests associated with a particular identifier (such as user, session, or any unique ID) to be handled by a consistent version of your Worker to prevent version skew. Version skew occurs when there are multiple versions of an application deployed that are not forwards/backwards compatible. You can configure version affinity to prevent the Worker's version from changing back and forth on a per-request basis.\n\nYou can do this by setting the `Cloudflare-Workers-Version-Key` header on the incoming request to your Worker. For example:",
      "language": "unknown"
    },
    {
      "code": "For a given [deployment](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/#deployments), all requests with a version key set to `foo` will be handled by the same version of your Worker. The specific version of your Worker that the version key `foo` corresponds to is determined by the percentages you have configured for each Worker version in your deployment.\n\nYou can set the `Cloudflare-Workers-Version-Key` header both when making an external request from the Internet to your Worker, as well as when making a subrequest from one Worker to another Worker using a [service binding](https://developers.cloudflare.com/workers/runtime-apis/bindings/service-bindings/).\n\n### Setting `Cloudflare-Workers-Version-Key` using Ruleset Engine\n\nYou may want to extract a version key from certain properties of your request such as the URL, headers or cookies. You can configure a [Ruleset Engine](https://developers.cloudflare.com/ruleset-engine/) rule on your zone to do this. This allows you to specify version affinity based on these properties without having to modify the external client that makes the request.\n\nFor example, if your worker serves video assets under the URI path `/assets/` and you wanted requests to each unique asset to be handled by a consistent version, you could define the following [request header transform rule](https://developers.cloudflare.com/rules/transform/request-header-modification/):\n\nText in **Expression Editor**:",
      "language": "unknown"
    },
    {
      "code": "Selected operation under **Modify request header**: *Set dynamic*\n\n**Header name**: `Cloudflare-Workers-Version-Key`\n\n**Value**: `regex_replace(http.request.uri.path, \"/asset/(.*)\", \"${1}\")`\n\n## Version overrides\n\nYou can use version overrides to send a request to a specific version of your Worker in your gradual deployment.\n\nTo specify a version override in your request, you can set the `Cloudflare-Workers-Version-Overrides` header on the request to your Worker. For example:",
      "language": "unknown"
    },
    {
      "code": "`Cloudflare-Workers-Version-Overrides` is a [Dictionary Structured Header](https://www.rfc-editor.org/rfc/rfc8941#name-dictionaries).\n\nThe dictionary can contain multiple key-value pairs. Each key indicates the name of the Worker the override should be applied to. The value indicates the version ID that should be used and must be a [String](https://www.rfc-editor.org/rfc/rfc8941#name-strings).\n\nA version override will only be applied if the specified version is in the current deployment. The versions in the current deployment can be found using the [`wrangler deployments list`](https://developers.cloudflare.com/workers/wrangler/commands/#deployments-list) command or on the **Workers & Pages** page of the Cloudflare dashboard > Select your Workers > Deployments > Active Deployment.\n\nVerifying that the version override was applied\n\nThere are a number of reasons why a request's version override may not be applied. For example:\n\n* The deployment containing the specified version may not have propagated yet.\n* The header value may not be a valid [Dictionary](https://www.rfc-editor.org/rfc/rfc8941#name-dictionaries).\n\nIn the case that a request's version override is not applied, the request will be routed according to the percentages set in the gradual deployment configuration.\n\nTo make sure that the request's version override was applied correctly, you can [observe](#observability) the version of your Worker that was invoked. You could even automate this check by using the [runtime binding](#runtime-binding) to return the version in the Worker's response.\n\n### Example\n\nYou may want to test a new version in production before gradually deploying it to an increasing proportion of external traffic.\n\nIn this example, your deployment is initially configured to route all traffic to a single version:\n\n| Version ID | Percentage |\n| - | - |\n| db7cd8d3-4425-4fe7-8c81-01bf963b6067 | 100% |\n\nCreate a new deployment using [`wrangler versions deploy`](https://developers.cloudflare.com/workers/wrangler/commands/#versions-deploy) and specify 0% for the new version whilst keeping the previous version at 100%.\n\n| Version ID | Percentage |\n| - | - |\n| dc8dcd28-271b-4367-9840-6c244f84cb40 | 0% |\n| db7cd8d3-4425-4fe7-8c81-01bf963b6067 | 100% |\n\nNow test the new version with a version override before gradually progressing the new version to 100%:",
      "language": "unknown"
    },
    {
      "code": "## Gradual deployments for Durable Objects\n\nTo provide [global uniqueness](https://developers.cloudflare.com/durable-objects/platform/known-issues/#global-uniqueness), only one version of each [Durable Object](https://developers.cloudflare.com/durable-objects/) can run at a time. This means that gradual deployments work slightly differently for Durable Objects.\n\nWhen you create a new gradual deployment for a Worker with Durable Objects, each Durable Object is assigned a Worker version based on the percentages you configured in your [deployment](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/#deployments). This version will not change until you create a new deployment.\n\n![Gradual Deployments Durable Objects](https://developers.cloudflare.com/_astro/durable-objects.D92CiuSQ_Z1KD3Vq.webp)\n\n### Example\n\nThis example assumes that you have previously created 3 Durable Object instances with names \"foo\", \"bar\" and \"baz\".\n\nYour Worker is currently on a version that we will call version \"A\" and you want to gradually deploy a new version \"B\" of your Worker.\n\nHere is how the versions of your Durable Objects might change as you progress your gradual deployment:\n\n| Deployment config | \"foo\" | \"bar\" | \"baz\" |\n| - | - | - | - |\n| Version A: 100%  | A | A | A |\n| Version B: 20% Version A: 80% | B | A | A |\n| Version B: 50% Version A: 50% | B | B | A |\n| Version B: 100%  | B | B | B |\n\nThis is only an example, so the versions assigned to your Durable Objects may be different. However, the following is guaranteed:\n\n* For a given deployment, requests to each Durable Object will always use the same Worker version.\n* When you specify each version in the same order as the previous deployment and increase the percentage of a version, Durable Objects which were previously assigned that version will not be assigned a different version. In this example, Durable Object \"foo\" would never revert from version \"B\" to version \"A\".\n* The Durable Object will only be [reset](https://developers.cloudflare.com/durable-objects/observability/troubleshooting/#durable-object-reset-because-its-code-was-updated) when it is assigned a different version, so each Durable Object will only be reset once in this example.\n\nNote\n\nTypically, a Worker bundle will define both the Durable Object class and a Worker that interacts with it. In this case, you cannot deploy changes to your Durable Object and its Worker independently.\n\nYou should ensure that API changes between your Durable Object and its Worker are [forwards and backwards compatible](https://developers.cloudflare.com/durable-objects/platform/known-issues/#code-updates) whether you are using gradual deployments or not. However, using gradual deployments will make it even more likely that different versions of your Durable Objects and its Worker will interact with each other.\n\n### Migrations\n\nVersions of Worker bundles containing new Durable Object migrations cannot be uploaded. This is because Durable Object migrations are atomic operations. Durable Object migrations can be deployed with the following command:",
      "language": "unknown"
    },
    {
      "code": "To limit the blast radius of Durable Object migration deployments, migrations should be deployed independently of other code changes.\n\nTo understand why Durable Object migrations are atomic operations, consider the hypothetical example of gradually deploying a delete migration. If a delete migration were applied to 50% of Durable Object instances, then Workers requesting those Durable Object instances would fail because they would have been deleted.\n\nTo do this without producing errors, a version of the Worker which does not depend on any Durable Object instances would have to have already been rolled out. Then, you can deploy a delete migration without affecting any traffic and there is no reason to do so gradually.\n\n## Observability\n\nWhen using gradual deployments, you may want to attribute Workers invocations to a specific version in order to get visibility into the impact of deploying new versions.\n\n### Logpush\n\nA new `ScriptVersion` object is available in [Workers Logpush](https://developers.cloudflare.com/workers/observability/logs/logpush/). `ScriptVersion` can only be added through the Logpush API right now. Sample API call:",
      "language": "unknown"
    },
    {
      "code": "`ScriptVersion` is an object with the following structure:",
      "language": "unknown"
    },
    {
      "code": "### Runtime binding\n\nUse the [Version metadata binding](https://developers.cloudflare.com/workers/runtime-apis/bindings/version-metadata/) in to access version ID or version tag in your Worker.\n\n## Limits\n\n### Deployments limit\n\nYou can only create a new deployment with the last 100 uploaded versions of your Worker.\n\n</page>\n\n<page>\n---\ntitle: Rollbacks  Cloudflare Workers docs\ndescription: Revert to an older version of your Worker.\nlastUpdated: 2025-09-12T16:13:54.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/configuration/versions-and-deployments/rollbacks/\n  md: https://developers.cloudflare.com/workers/configuration/versions-and-deployments/rollbacks/index.md\n---\n\nYou can roll back to a previously deployed [version](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/#versions) of your Worker using [Wrangler](https://developers.cloudflare.com/workers/wrangler/commands/#rollback) or the Cloudflare dashboard. Rolling back to a previous version of your Worker will immediately create a new [deployment](https://developers.cloudflare.com/workers/configuration/versions-and-deployments/#deployments) with the version specified and become the active deployment across all your deployed routes and domains.\n\n## Via Wrangler\n\nTo roll back to a specified version of your Worker via Wrangler, use the [`wrangler rollback`](https://developers.cloudflare.com/workers/wrangler/commands/#rollback) command.\n\n## Via the Cloudflare Dashboard\n\nTo roll back to a specified version of your Worker via the Cloudflare dashboard:\n\n1. In the Cloudflare dashboard, go to the **Workers & Pages** page.\n\n   [Go to **Workers & Pages**](https://dash.cloudflare.com/?to=/:account/workers-and-pages)\n\n2. Select your Worker > **Deployments**.\n\n3. Select the three dot icon on the right of the version you would like to roll back to and select **Rollback**.\n\nWarning\n\n**[Resources connected to your Worker](https://developers.cloudflare.com/workers/runtime-apis/bindings/) will not be changed during a rollback.**\n\nErrors could occur if using code for a prior version if the structure of data has changed between the version in the active deployment and the version selected to rollback to.\n\n## Limits\n\n### Rollbacks limit\n\nYou can only roll back to the 100 most recently published versions.\n\nNote\n\nWhen using Wrangler in interactive mode, only the 10 most recent versions will be displayed for selection. To roll back to an older version (beyond the 10 most recent), you must specify the version ID directly on the command line. Refer to the [`wrangler versions deploy`](https://developers.cloudflare.com/workers/wrangler/commands/#versions-deploy) documentation for details on specifying version IDs.\n\nWe plan to address this limitation soon to allow displaying all 100 available versions in interactive mode.\n\n### Bindings\n\nYou cannot roll back to a previous version of your Worker if the [Cloudflare Developer Platform resources](https://developers.cloudflare.com/workers/runtime-apis/bindings/) (such as [KV](https://developers.cloudflare.com/kv/) and [D1](https://developers.cloudflare.com/d1/)) have been deleted or modified between the version selected to roll back to and the version in the active deployment. Specifically, rollbacks will not be allowed if:\n\n* A [Durable Object migration](https://developers.cloudflare.com/durable-objects/reference/durable-objects-migrations/) has occurred between the version in the active deployment and the version selected to roll back to.\n* If the target deployment has a [binding](https://developers.cloudflare.com/workers/runtime-apis/bindings/) to an R2 bucket, KV namespace, or queue that no longer exists.\n\n</page>\n\n<page>\n---\ntitle: Neon  Cloudflare Workers docs\ndescription: Connect Workers to a Neon Postgres database.\nlastUpdated: 2025-11-12T15:17:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/databases/third-party-integrations/neon/\n  md: https://developers.cloudflare.com/workers/databases/third-party-integrations/neon/index.md\n---\n\n[Neon](https://neon.tech/) is a fully managed serverless PostgreSQL. It separates storage and compute to offer modern developer features, such as serverless, branching, and bottomless storage.\n\nNote\n\nYou can connect to Neon using [Hyperdrive](https://developers.cloudflare.com/hyperdrive) (recommended), or using the Neon serverless driver, `@neondatabase/serverless`. Both provide connection pooling and reduce the amount of round trips required to create a secure connection from Workers to your database.\n\nHyperdrive can provide the lowest possible latencies because it performs the database connection setup and connection pooling across Cloudflare's network. Hyperdrive supports native database drivers, libraries, and ORMs, and is included in all [Workers plans](https://developers.cloudflare.com/hyperdrive/platform/pricing/). Learn more about Hyperdrive in [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n\n* Hyperdrive (recommended)\n\n  To connect to Neon using [Hyperdrive](https://developers.cloudflare.com/hyperdrive), follow these steps:\n\n  ## 1. Allow Hyperdrive access\n\n  You can connect Hyperdrive to any existing Neon database by creating a new user and fetching your database connection string.\n\n  ### Neon Dashboard\n\n  1. Go to the [**Neon dashboard**](https://console.neon.tech/app/projects) and select the project (database) you wish to connect to.\n  2. Select **Roles** from the sidebar and select **New Role**. Enter `hyperdrive-user` as the name (or your preferred name) and **copy the password**. Note that the password will not be displayed again: you will have to reset it if you do not save it somewhere.\n  3. Select **Dashboard** from the sidebar > go to the **Connection Details** pane > ensure you have selected the **branch**, **database** and **role** (for example,`hyperdrive-user`) that Hyperdrive will connect through.\n  4. Select the `psql` and **uncheck the connection pooling** checkbox. Note down the connection string (starting with `postgres://hyperdrive-user@...`) from the text box.\n\n  With both the connection string and the password, you can now create a Hyperdrive database configuration.\n\n  ## 2. Create a database configuration\n\n  To configure Hyperdrive, you will need:\n\n  * The IP address (or hostname) and port of your database.\n  * The database username (for example, `hyperdrive-demo`) you configured in a previous step.\n  * The password associated with that username.\n  * The name of the database you want Hyperdrive to connect to. For example, `postgres`.\n\n  Hyperdrive accepts the combination of these parameters in the common connection string format used by database drivers:",
      "language": "unknown"
    },
    {
      "code": "Most database providers will provide a connection string you can directly copy-and-paste directly into Hyperdrive.\n\n  * Dashboard\n\n    To create a Hyperdrive configuration with the Cloudflare dashboard:\n\n    1. In the Cloudflare dashboard, go to the **Hyperdrive** page.\n\n       [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n    2. Select **Create Configuration**.\n\n    3. Fill out the form, including the connection string.\n\n    4. Select **Create**.\n\n  * Wrangler CLI\n\n    To create a Hyperdrive configuration with the [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/):\n\n    1. Open your terminal and run the following command. Replace `<NAME_OF_HYPERDRIVE_CONFIG>` with a name for your Hyperdrive configuration and paste the connection string provided from your database host, or replace `user`, `password`, `HOSTNAME_OR_IP_ADDRESS`, `port`, and `database_name` placeholders with those specific to your database:",
      "language": "unknown"
    },
    {
      "code": "2. This command outputs a binding for the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n       * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  Hyperdrive will attempt to connect to your database with the provided credentials to verify they are correct before creating a configuration. If you encounter an error when attempting to connect, refer to Hyperdrive's [troubleshooting documentation](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug possible causes.\n\n  ## 3. Use Hyperdrive from your Worker\n\n  Install the `node-postgres` driver:\n\n  * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  The minimum version of `node-postgres` required for Hyperdrive is `8.16.3`.\n\n  If using TypeScript, install the types package:\n\n  * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Add the required Node.js compatibility flags and Hyperdrive binding to your `wrangler.jsonc` file:\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Create a new `Client` instance and pass the Hyperdrive `connectionString`:",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  When connecting to a Neon database with Hyperdrive, you should use a driver like [node-postgres (pg)](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/node-postgres/) or [Postgres.js](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/postgres-js/) to connect directly to the underlying database instead of the [Neon serverless driver](https://neon.tech/docs/serverless/serverless-driver). Hyperdrive is optimized for database access for Workers and will perform global connection pooling and fast query routing by connecting directly to your database.\n\n  ## Next steps\n\n  * Learn more about [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n  * Refer to the [troubleshooting guide](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug common issues.\n  * Understand more about other [storage options](https://developers.cloudflare.com/workers/platform/storage-options/) available to Cloudflare Workers.\n\n* Neon serverless driver\n\n  To connect to Neon using `@neondatabase/serverless`, follow these steps:\n\n  1. You need to have an existing Neon database to connect to. [Create a Neon database](https://neon.tech/docs/postgres/tutorial-createdb#create-a-table) or [load data from an existing database to Neon](https://neon.tech/docs/import/import-from-postgres).\n\n  2. Create an `elements` table using the Neon SQL editor. TheSQL Editorallows you to query your databases directly from the Neon Console.",
      "language": "unknown"
    },
    {
      "code": "3. Insert some data into your newly created table.",
      "language": "unknown"
    },
    {
      "code": "4. Configure the Neon database credentials in your Worker:\n\n     You need to add your Neon database connection string as a secret to your Worker. Get your connection string from the [Neon Console](https://console.neon.tech) under **Connection Details**, then add it as a secret using Wrangler:",
      "language": "unknown"
    },
    {
      "code": "5. In your Worker, install the `@neondatabase/serverless` driver to connect to your database and start manipulating data:\n\n     * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "6. The following example shows how to make a query to your Neon database in a Worker. The credentials needed to connect to Neon have been added as secrets to your Worker.",
      "language": "unknown"
    },
    {
      "code": "To learn more about Neon, refer to [Neon's official documentation](https://neon.tech/docs/introduction).\n\n* Dashboard\n\n  To create a Hyperdrive configuration with the Cloudflare dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Hyperdrive** page.\n\n     [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n  2. Select **Create Configuration**.\n\n  3. Fill out the form, including the connection string.\n\n  4. Select **Create**.\n\n* Wrangler CLI\n\n  To create a Hyperdrive configuration with the [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/):\n\n  1. Open your terminal and run the following command. Replace `<NAME_OF_HYPERDRIVE_CONFIG>` with a name for your Hyperdrive configuration and paste the connection string provided from your database host, or replace `user`, `password`, `HOSTNAME_OR_IP_ADDRESS`, `port`, and `database_name` placeholders with those specific to your database:",
      "language": "unknown"
    },
    {
      "code": "2. This command outputs a binding for the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n     * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Supabase  Cloudflare Workers docs\ndescription: Supabase is an open source Firebase alternative and a PostgreSQL\n  database service that offers real-time functionality, database backups, and\n  extensions. With Supabase, developers can quickly set up a PostgreSQL database\n  and build applications.\nlastUpdated: 2025-11-12T15:17:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/databases/third-party-integrations/supabase/\n  md: https://developers.cloudflare.com/workers/databases/third-party-integrations/supabase/index.md\n---\n\n[Supabase](https://supabase.com/) is an open source Firebase alternative and a PostgreSQL database service that offers real-time functionality, database backups, and extensions. With Supabase, developers can quickly set up a PostgreSQL database and build applications.\n\nNote\n\nThe Supabase client (`@supabase/supabase-js`) provides access to Supabase's various features, including database access. If you need access to all of the Supabase client functionality, use the Supabase client.\n\nIf you want to connect directly to the Supabase Postgres database, connect using [Hyperdrive](https://developers.cloudflare.com/hyperdrive). Hyperdrive can provide lower latencies because it performs the database connection setup and connection pooling across Cloudflare's network. Hyperdrive supports native database drivers, libraries, and ORMs, and is included in all [Workers plans](https://developers.cloudflare.com/hyperdrive/platform/pricing/). Learn more about Hyperdrive in [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n\n* Supabase client\n\n  ### Supabase client setup\n\n  To set up an integration with Supabase:\n\n  1. You need to have an existing Supabase database to connect to. [Create a Supabase database](https://supabase.com/docs/guides/database/tables#creating-tables) or [have an existing database to connect to Supabase and load data from](https://supabase.com/docs/guides/database/tables#loading-data).\n\n  2. Create a `countries` table with the following query. You can create a table in your Supabase dashboard in two ways:\n\n     * Use the table editor, which allows you to set up Postgres similar to a spreadsheet.\n     * Alternatively, use the [SQL editor](https://supabase.com/docs/guides/database/overview#the-sql-editor):",
      "language": "unknown"
    },
    {
      "code": "3. Insert some data in your newly created table. Run the following commands to add countries to your table:",
      "language": "unknown"
    },
    {
      "code": "4. Configure the Supabase database credentials in your Worker:\n\n     You need to add your Supabase URL and anon key as secrets to your Worker. Get these from your [Supabase Dashboard](https://supabase.com/dashboard) under **Settings** > **API**, then add them as secrets using Wrangler:",
      "language": "unknown"
    },
    {
      "code": "5. In your Worker, install the `@supabase/supabase-js` driver to connect to your database and start manipulating data:\n\n     * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "6. The following example shows how to make a query to your Supabase database in a Worker. The credentials needed to connect to Supabase have been added as secrets to your Worker.",
      "language": "unknown"
    },
    {
      "code": "To learn more about Supabase, refer to [Supabase's official documentation](https://supabase.com/docs).\n\n* Hyperdrive\n\n  When connecting to Supabase with Hyperdrive, you connect directly to the underlying Postgres database. This provides the lowest latency for databsae queries when accessed server-side from Workers. To connect to Supabase using [Hyperdrive](https://developers.cloudflare.com/hyperdrive), follow these steps:\n\n  ## 1. Allow Hyperdrive access\n\n  You can connect Hyperdrive to any existing Supabase database as the Postgres user which is set up during project creation. Alternatively, to create a new user for Hyperdrive, run these commands in the [SQL Editor](https://supabase.com/dashboard/project/_/sql/new).\n\n  The database endpoint can be found in the [database settings page](https://supabase.com/dashboard/project/_/settings/database).\n\n  With a database user, password, database endpoint (hostname and port) and database name (default: postgres), you can now set up Hyperdrive.\n\n  ## 2. Create a database configuration\n\n  To configure Hyperdrive, you will need:\n\n  * The IP address (or hostname) and port of your database.\n  * The database username (for example, `hyperdrive-demo`) you configured in a previous step.\n  * The password associated with that username.\n  * The name of the database you want Hyperdrive to connect to. For example, `postgres`.\n\n  Hyperdrive accepts the combination of these parameters in the common connection string format used by database drivers:",
      "language": "unknown"
    },
    {
      "code": "Most database providers will provide a connection string you can directly copy-and-paste directly into Hyperdrive.\n\n  * Dashboard\n\n    To create a Hyperdrive configuration with the Cloudflare dashboard:\n\n    1. In the Cloudflare dashboard, go to the **Hyperdrive** page.\n\n       [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n    2. Select **Create Configuration**.\n\n    3. Fill out the form, including the connection string.\n\n    4. Select **Create**.\n\n  * Wrangler CLI\n\n    To create a Hyperdrive configuration with the [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/):\n\n    1. Open your terminal and run the following command. Replace `<NAME_OF_HYPERDRIVE_CONFIG>` with a name for your Hyperdrive configuration and paste the connection string provided from your database host, or replace `user`, `password`, `HOSTNAME_OR_IP_ADDRESS`, `port`, and `database_name` placeholders with those specific to your database:",
      "language": "unknown"
    },
    {
      "code": "2. This command outputs a binding for the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n       * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  Hyperdrive will attempt to connect to your database with the provided credentials to verify they are correct before creating a configuration. If you encounter an error when attempting to connect, refer to Hyperdrive's [troubleshooting documentation](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug possible causes.\n\n  ## 3. Use Hyperdrive from your Worker\n\n  Install the `node-postgres` driver:\n\n  * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  The minimum version of `node-postgres` required for Hyperdrive is `8.16.3`.\n\n  If using TypeScript, install the types package:\n\n  * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Add the required Node.js compatibility flags and Hyperdrive binding to your `wrangler.jsonc` file:\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Create a new `Client` instance and pass the Hyperdrive `connectionString`:",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  When connecting to a Supabase database with Hyperdrive, you should use a driver like [node-postgres (pg)](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/node-postgres/) or [Postgres.js](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/postgres-js/) to connect directly to the underlying database instead of the [Supabase JavaScript client](https://github.com/supabase/supabase-js). Hyperdrive is optimized for database access for Workers and will perform global connection pooling and fast query routing by connecting directly to your database.\n\n  ## Next steps\n\n  * Learn more about [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n  * Refer to the [troubleshooting guide](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug common issues.\n  * Understand more about other [storage options](https://developers.cloudflare.com/workers/platform/storage-options/) available to Cloudflare Workers.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* Dashboard\n\n  To create a Hyperdrive configuration with the Cloudflare dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Hyperdrive** page.\n\n     [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n  2. Select **Create Configuration**.\n\n  3. Fill out the form, including the connection string.\n\n  4. Select **Create**.\n\n* Wrangler CLI\n\n  To create a Hyperdrive configuration with the [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/):\n\n  1. Open your terminal and run the following command. Replace `<NAME_OF_HYPERDRIVE_CONFIG>` with a name for your Hyperdrive configuration and paste the connection string provided from your database host, or replace `user`, `password`, `HOSTNAME_OR_IP_ADDRESS`, `port`, and `database_name` placeholders with those specific to your database:",
      "language": "unknown"
    },
    {
      "code": "2. This command outputs a binding for the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n     * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: PlanetScale  Cloudflare Workers docs\ndescription: PlanetScale is a database platform that provides MySQL-compatible\n  and PostgreSQL databases, making them more scalable, easier and safer to\n  manage.\nlastUpdated: 2025-11-12T15:17:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/databases/third-party-integrations/planetscale/\n  md: https://developers.cloudflare.com/workers/databases/third-party-integrations/planetscale/index.md\n---\n\n[PlanetScale](https://planetscale.com/) is a database platform that provides MySQL-compatible and PostgreSQL databases, making them more scalable, easier and safer to manage.\n\nNote\n\nYou can connect to PlanetScale using [Hyperdrive](https://developers.cloudflare.com/hyperdrive) (recommended), or using the PlanetScale serverless driver, `@planetscale/database`. Both provide connection pooling and reduce the amount of round trips required to create a secure connection from Workers to your database.\n\nHyperdrive can provide lower latencies because it performs the database connection setup and connection pooling across Cloudflare's network. Hyperdrive supports native database drivers, libraries, and ORMs, and is included in all [Workers plans](https://developers.cloudflare.com/hyperdrive/platform/pricing/). Learn more about Hyperdrive in [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n\n* Hyperdrive (recommended)\n\n  To connect to PlanetScale using [Hyperdrive](https://developers.cloudflare.com/hyperdrive), follow these steps:\n\n  ## 1. Allow Hyperdrive access\n\n  You can connect Hyperdrive to any existing PlanetScale MySQL-compatible database by creating a new user and fetching your database connection string.\n\n  ### PlanetScale Dashboard\n\n  1. Go to the [**PlanetScale dashboard**](https://app.planetscale.com/) and select the database you wish to connect to.\n  2. Click **Connect**. Enter `hyperdrive-user` as the password name (or your preferred name) and configure the permissions as desired. Select **Create password**. Note the username and password as they will not be displayed again.\n  3. Select **Other** as your language or framework. Note down the database host, database name, database username, and password. You will need these to create a database configuration in Hyperdrive.\n\n  With the host, database name, username and password, you can now create a Hyperdrive database configuration.\n\n  ## 2. Create a database configuration\n\n  To configure Hyperdrive, you will need:\n\n  * The IP address (or hostname) and port of your database.\n  * The database username (for example, `hyperdrive-demo`) you configured in a previous step.\n  * The password associated with that username.\n  * The name of the database you want Hyperdrive to connect to. For example, `mysql`.\n\n  Hyperdrive accepts the combination of these parameters in the common connection string format used by database drivers:",
      "language": "unknown"
    },
    {
      "code": "Most database providers will provide a connection string you can copy-and-paste directly into Hyperdrive.\n\n  To create a Hyperdrive configuration with the [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/), open your terminal and run the following command.\n\n  * Replace \\<NAME\\_OF\\_HYPERDRIVE\\_CONFIG> with a name for your Hyperdrive configuration and paste the connection string provided from your database host, or,\n  * Replace `user`, `password`, `HOSTNAME_OR_IP_ADDRESS`, `port`, and `database_name` placeholders with those specific to your database:",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  Hyperdrive will attempt to connect to your database with the provided credentials to verify they are correct before creating a configuration. If you encounter an error when attempting to connect, refer to Hyperdrive's [troubleshooting documentation](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug possible causes.\n\n  This command outputs a binding for the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "## 3. Use Hyperdrive from your Worker\n\n  Install the [mysql2](https://github.com/sidorares/node-mysql2) driver:\n\n  * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  `mysql2` v3.13.0 or later is required\n\n  Add the required Node.js compatibility flags and Hyperdrive binding to your `wrangler.jsonc` file:\n\n  * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Create a new `connection` instance and pass the Hyperdrive parameters:",
      "language": "unknown"
    },
    {
      "code": "Note\n\n  The minimum version of `mysql2` required for Hyperdrive is `3.13.0`.\n\n  Note\n\n  When connecting to a PlanetScale database with Hyperdrive, you should use a driver like [node-postgres (pg)](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/node-postgres/) or [Postgres.js](https://developers.cloudflare.com/hyperdrive/examples/connect-to-postgres/postgres-drivers-and-libraries/postgres-js/) to connect directly to the underlying database instead of the [PlanetScale serverless driver](https://planetscale.com/docs/tutorials/planetscale-serverless-driver). Hyperdrive is optimized for database access for Workers and will perform global connection pooling and fast query routing by connecting directly to your database.\n\n  ## Next steps\n\n  * Learn more about [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n  * Refer to the [troubleshooting guide](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug common issues.\n  * Understand more about other [storage options](https://developers.cloudflare.com/workers/platform/storage-options/) available to Cloudflare Workers.\n\n* PlanetScale serverless driver\n\n  ## Set up an integration with PlanetScale\n\n  To set up an integration with PlanetScale:\n\n  1. You need to have an existing PlanetScale database to connect to. [Create a PlanetScale database](https://planetscale.com/docs/tutorials/planetscale-quick-start-guide#create-a-database) or [import an existing database to PlanetScale](https://planetscale.com/docs/imports/database-imports#overview).\n\n  2. From the [PlanetScale web console](https://planetscale.com/docs/concepts/web-console#get-started), create a `products` table with the following query:",
      "language": "unknown"
    },
    {
      "code": "3. Insert some data in your newly created table. Run the following command to add a product and category to your table:",
      "language": "unknown"
    },
    {
      "code": "4. Configure the PlanetScale database credentials in your Worker:\n\n     You need to add your PlanetScale database credentials as secrets to your Worker. Get your connection details from the [PlanetScale Dashboard](https://app.planetscale.com) by creating a connection string, then add them as secrets using Wrangler:",
      "language": "unknown"
    },
    {
      "code": "5. In your Worker, install the `@planetscale/database` driver to connect to your PlanetScale database and start manipulating data:\n\n     * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "6. The following example shows how to make a query to your PlanetScale database in a Worker. The credentials needed to connect to PlanetScale have been added as secrets to your Worker.",
      "language": "unknown"
    },
    {
      "code": "To learn more about PlanetScale, refer to [PlanetScale's official documentation](https://docs.planetscale.com/).\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: Turso  Cloudflare Workers docs\ndescription: Turso is an edge-hosted, distributed database based on libSQL, an\n  open-source fork of SQLite. Turso was designed to minimize query latency for\n  applications where queries comes from anywhere in the world.\nlastUpdated: 2025-06-11T17:40:43.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/databases/third-party-integrations/turso/\n  md: https://developers.cloudflare.com/workers/databases/third-party-integrations/turso/index.md\n---\n\n[Turso](https://turso.tech/) is an edge-hosted, distributed database based on [libSQL](https://libsql.org/), an open-source fork of SQLite. Turso was designed to minimize query latency for applications where queries comes from anywhere in the world.\n\n## Set up an integration with Turso\n\nTo set up an integration with Turso:\n\n1. You need to install Turso CLI to create and populate a database. Use one of the following two commands in your terminal to install the Turso CLI:",
      "language": "unknown"
    },
    {
      "code": "Next, run the following command to make sure the Turso CLI is installed:",
      "language": "unknown"
    },
    {
      "code": "2. Before you create your first Turso database, you have to authenticate with your GitHub account by running:",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "After you have authenticated, you can create a database using the command `turso db create <DATABASE_NAME>`. Turso will create a database and automatically choose a location closest to you.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "With the first database created, you can now connect to it directly and execute SQL queries against it.",
      "language": "unknown"
    },
    {
      "code": "3. Copy the following SQL query into the shell you just opened:",
      "language": "unknown"
    },
    {
      "code": "4. Configure the Turso database credentials in your Worker:\n\n   You need to add your Turso database URL and authentication token as secrets to your Worker. First, get your database URL and create an authentication token:",
      "language": "unknown"
    },
    {
      "code": "Then add these as secrets to your Worker using Wrangler:",
      "language": "unknown"
    },
    {
      "code": "5. In your Worker, install the Turso client library:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "6. The following example shows how to make a query to your Turso database in a Worker. The credentials needed to connect to Turso have been added as [secrets](https://developers.cloudflare.com/workers/configuration/secrets/) to your Worker.",
      "language": "unknown"
    },
    {
      "code": "* The libSQL client library import `@libsql/client/web` must be imported exactly as shown when working with Cloudflare Workers. The non-web import will not work in the Workers environment.\n   * The `Env` interface contains the [environment variable](https://developers.cloudflare.com/workers/configuration/environment-variables/) and [secret](https://developers.cloudflare.com/workers/configuration/secrets/) defined when you added the Turso integration in step 4.\n   * The `Env` interface also caches the libSQL client object and router, which was created on the first request to the Worker.\n   * The Worker uses `buildLibsqlClient` to query the `elements` database and returns the response as a JSON object.\n\nWith your environment configured and your code ready, you can now test your Worker locally before you deploy.\n\nTo learn more about Turso, refer to [Turso's official documentation](https://docs.turso.tech).\n\n</page>\n\n<page>\n---\ntitle: Upstash  Cloudflare Workers docs\ndescription: Upstash is a serverless database with Redis* and Kafka API. Upstash\n  also offers QStash, a task queue/scheduler designed for the serverless.\nlastUpdated: 2025-12-12T16:14:18.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/databases/third-party-integrations/upstash/\n  md: https://developers.cloudflare.com/workers/databases/third-party-integrations/upstash/index.md\n---\n\n[Upstash](https://upstash.com/) is a serverless database with Redis\\* and Kafka API. Upstash also offers QStash, a task queue/scheduler designed for the serverless.\n\n## Upstash for Redis\n\nTo set up an integration with Upstash:\n\n1. You need an existing Upstash database to connect to. [Create an Upstash database](https://docs.upstash.com/redis#create-a-database) or [load data from an existing database to Upstash](https://docs.upstash.com/redis/howto/connectclient).\n\n2. Insert some data to your Upstash database. You can add data to your Upstash database in two ways:\n\n   * Use the CLI directly from your Upstash console.\n   * Alternatively, install [redis-cli](https://redis.io/docs/getting-started/installation/) locally and run the following commands.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "3. Configure the Upstash Redis credentials in your Worker:\n\n   You need to add your Upstash Redis database URL and token as secrets to your Worker. Get these from your [Upstash Console](https://console.upstash.com) under your database details, then add them as secrets using Wrangler:",
      "language": "unknown"
    },
    {
      "code": "4. In your Worker, install the `@upstash/redis`, a HTTP client to connect to your database and start manipulating data:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "5. The following example shows how to make a query to your Upstash database in a Worker. The credentials needed to connect to Upstash have been added as secrets to your Worker.",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   `Redis.fromEnv(env)` automatically picks up the default `url` and `token` names created in the integration.\n\n   If you have renamed the secrets, you must declare them explicitly like in the [Upstash basic example](https://docs.upstash.com/redis/sdks/redis-ts/getstarted#basic-usage).\n\nTo learn more about Upstash, refer to the [Upstash documentation](https://docs.upstash.com/redis).\n\n## Upstash QStash\n\nTo set up an integration with Upstash QStash:\n\n1. Configure the [publicly available HTTP endpoint](https://docs.upstash.com/qstash#1-public-api) that you want to send your messages to.\n\n2. Configure the Upstash QStash credentials in your Worker:\n\n   You need to add your Upstash QStash token as a secret to your Worker. Get your token from your [Upstash Console](https://console.upstash.com) under QStash settings, then add it as a secret using Wrangler:",
      "language": "unknown"
    },
    {
      "code": "3. In your Worker, install the `@upstash/qstash`, a HTTP client to connect to your database QStash endpoint:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "4. Refer to the [Upstash documentation on how to receive webhooks from QStash in your Cloudflare Worker](https://docs.upstash.com/qstash/quickstarts/cloudflare-workers#3-use-qstash-in-your-handler).\n\n\\* Redis is a trademark of Redis Ltd. Any rights therein are reserved to Redis Ltd. Any use by Upstash is for referential purposes only and does not indicate any sponsorship, endorsement or affiliation between Redis and Upstash.\n\n</page>\n\n<page>\n---\ntitle: Xata  Cloudflare Workers docs\ndescription: Xata is a PostgreSQL database platform designed to help developers\n  operate and scale databases with enhanced productivity and performance. Xata\n  provides features like instant copy-on-write database branches, zero-downtime\n  schema changes, data anonymization, AI-powered performance monitoring, and\n  BYOC.\nlastUpdated: 2025-11-12T15:17:36.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/databases/third-party-integrations/xata/\n  md: https://developers.cloudflare.com/workers/databases/third-party-integrations/xata/index.md\n---\n\n[Xata](https://xata.io) is a PostgreSQL database platform designed to help developers operate and scale databases with enhanced productivity and performance. Xata provides features like instant copy-on-write database branches, zero-downtime schema changes, data anonymization, AI-powered performance monitoring, and BYOC.\n\nNote\n\nYou can connect to Xata using [Hyperdrive](https://developers.cloudflare.com/hyperdrive), which provides connection pooling and reduces the amount of round trips required to create a secure connection from Workers to your database.\n\nHyperdrive can provide lower latencies because it performs the database connection setup and connection pooling across Cloudflare's network. Hyperdrive supports native database drivers, libraries, and ORMs, and is included in all [Workers plans](https://developers.cloudflare.com/hyperdrive/platform/pricing/). Learn more about Hyperdrive in [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n\nRefer to the full [Xata documentation](https://xata.io/documentation).\n\nTo connect to Xata using [Hyperdrive](https://developers.cloudflare.com/hyperdrive), follow these steps:\n\n## 1. Allow Hyperdrive access\n\nYou can connect Hyperdrive to any existing Xata PostgreSQL database with the connection string provided by Xata.\n\n### Xata dashboard\n\nTo retrieve your connection string from the Xata dashboard:\n\n1. Go to the [**Xata dashboard**](https://xata.io/).\n2. Select the database you want to connect to.\n3. Copy the `PostgreSQL` connection string.\n\nRefer to the full [Xata documentation](https://xata.io/documentation).\n\n## 2. Create a database configuration\n\nTo configure Hyperdrive, you will need:\n\n* The IP address (or hostname) and port of your database.\n* The database username (for example, `hyperdrive-demo`) you configured in a previous step.\n* The password associated with that username.\n* The name of the database you want Hyperdrive to connect to. For example, `postgres`.\n\nHyperdrive accepts the combination of these parameters in the common connection string format used by database drivers:",
      "language": "unknown"
    },
    {
      "code": "Most database providers will provide a connection string you can directly copy-and-paste directly into Hyperdrive.\n\n* Dashboard\n\n  To create a Hyperdrive configuration with the Cloudflare dashboard:\n\n  1. In the Cloudflare dashboard, go to the **Hyperdrive** page.\n\n     [Go to **Hyperdrive**](https://dash.cloudflare.com/?to=/:account/workers/hyperdrive)\n\n  2. Select **Create Configuration**.\n\n  3. Fill out the form, including the connection string.\n\n  4. Select **Create**.\n\n* Wrangler CLI\n\n  To create a Hyperdrive configuration with the [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/):\n\n  1. Open your terminal and run the following command. Replace `<NAME_OF_HYPERDRIVE_CONFIG>` with a name for your Hyperdrive configuration and paste the connection string provided from your database host, or replace `user`, `password`, `HOSTNAME_OR_IP_ADDRESS`, `port`, and `database_name` placeholders with those specific to your database:",
      "language": "unknown"
    },
    {
      "code": "2. This command outputs a binding for the [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n     * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Note\n\nHyperdrive will attempt to connect to your database with the provided credentials to verify they are correct before creating a configuration. If you encounter an error when attempting to connect, refer to Hyperdrive's [troubleshooting documentation](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug possible causes.\n\n## 3. Use Hyperdrive from your Worker\n\nInstall the `node-postgres` driver:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\nThe minimum version of `node-postgres` required for Hyperdrive is `8.16.3`.\n\nIf using TypeScript, install the types package:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Add the required Node.js compatibility flags and Hyperdrive binding to your `wrangler.jsonc` file:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Create a new `Client` instance and pass the Hyperdrive `connectionString`:",
      "language": "unknown"
    },
    {
      "code": "## Next steps\n\n* Learn more about [How Hyperdrive Works](https://developers.cloudflare.com/hyperdrive/concepts/how-hyperdrive-works/).\n* Refer to the [troubleshooting guide](https://developers.cloudflare.com/hyperdrive/observability/troubleshooting/) to debug common issues.\n* Understand more about other [storage options](https://developers.cloudflare.com/workers/platform/storage-options/) available to Cloudflare Workers.\n\n</page>\n\n<page>\n---\ntitle: Agents SDK  Cloudflare Workers docs\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/ai-and-agents/agents-sdk/\n  md: https://developers.cloudflare.com/workers/framework-guides/ai-and-agents/agents-sdk/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: LangChain  Cloudflare Workers docs\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/ai-and-agents/langchain/\n  md: https://developers.cloudflare.com/workers/framework-guides/ai-and-agents/langchain/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: FastAPI  Cloudflare Workers docs\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/apis/fast-api/\n  md: https://developers.cloudflare.com/workers/framework-guides/apis/fast-api/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Hono  Cloudflare Workers docs\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/apis/hono/\n  md: https://developers.cloudflare.com/workers/framework-guides/apis/hono/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Expo  Cloudflare Workers docs\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/mobile-apps/expo/\n  md: https://developers.cloudflare.com/workers/framework-guides/mobile-apps/expo/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Astro  Cloudflare Workers docs\ndescription: Create an Astro application and deploy it to Cloudflare Workers\n  with Workers Assets.\nlastUpdated: 2025-12-11T17:58:59.000Z\nchatbotDeprioritize: false\ntags: SSG,Full stack,Astro\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/astro/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/astro/index.md\n---\n\n**Start from CLI**: Scaffold an Astro project on Workers, and pick your template.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "***\n\n**Or just deploy**: Create a static blog with Astro and deploy it on Cloudflare Workers, with CI/CD and previews all set up for you.\n\n[![Deploy to Workers](https://deploy.workers.cloudflare.com/button)](https://dash.cloudflare.com/?to=/:account/workers-and-pages/create/deploy-to-workers\\&repository=https://github.com/cloudflare/templates/tree/main/astro-blog-starter-template)\n\n## What is Astro?\n\n[Astro](https://astro.build/) is a JavaScript web framework designed for creating websites that display large amounts of content (such as blogs, documentation sites, or online stores).\n\nAstro emphasizes performance through minimal client-side JavaScript - by default, it renders as much content as possible at build time, or [on-demand](https://docs.astro.build/en/guides/on-demand-rendering/) on the \"server\" - this can be a Cloudflare Worker. [Islands](https://docs.astro.build/en/concepts/islands/) of JavaScript are added only where interactivity or personalization is needed.\n\nAstro is also framework-agnostic, and supports every major UI framework, including React, Preact, Svelte, Vue, SolidJS, via its official [integrations](https://astro.build/integrations/).\n\n## Deploy a new Astro project on Workers\n\n1. **Create a new project with the create-cloudflare CLI (C3).**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's happening behind the scenes?\n\n   When you run this command, C3 creates a new project directory, initiates [Astro's official setup tool](https://docs.astro.build/en/tutorial/1-setup/2/), and configures the project for Cloudflare. It then offers the option to instantly deploy your application to Cloudflare.\n\n2. **Develop locally.**\n\n   After creating your project, run the following command in your project directory to start a local development server.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "3. **Deploy your project.**\n\n   You can deploy your project to a [`*.workers.dev` subdomain](https://developers.cloudflare.com/workers/configuration/routing/workers-dev/) or a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your local machine or any CI/CD system (including [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/#workers-builds)). Use the following command to build and deploy. If you're using a CI service, be sure to update your \"deploy command\" accordingly.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "## Deploy an existing Astro project on Workers\n\n### If you have a static site\n\nIf your Astro project is entirely pre-rendered, follow these steps:\n\n1. **Add a Wrangler configuration file**\n\n   In your project root, create a Wrangler configuration file with the following content:\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "What's this configuration doing?\n\n   The key part of this config is the `assets` field, which tells Wrangler where to find your static assets. In this case, we're telling Wrangler to look in the `./dist` directory. If your assets are in a different directory, update the `directory` value accordingly. Read about other [asset configuration options](https://developers.cloudflare.com/workers/wrangler/configuration/#assets).\n\n   Also note how there's no `main` field in this config - this is because you're only serving static assets, so no Worker code is needed for on demand rendering/SSR.\n\n2. **Build and deploy your project**\n\n   You can deploy your project to a [`*.workers.dev` subdomain](https://developers.cloudflare.com/workers/configuration/routing/workers-dev/) or a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your local machine or any CI/CD system (including [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/#workers-builds)). Use the following command to build and deploy. If you're using a CI service, be sure to update your \"deploy command\" accordingly.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "- npm",
      "language": "unknown"
    },
    {
      "code": "- yarn",
      "language": "unknown"
    },
    {
      "code": "- pnpm",
      "language": "unknown"
    },
    {
      "code": "### If your site uses on demand rendering\n\nIf your Astro project uses [on demand rendering (also known as SSR)](https://docs.astro.build/en/guides/on-demand-rendering/), follow these steps:\n\n1. **Install the Astro Cloudflare adapter**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's happening behind the scenes?\n\n   This command installs the Cloudflare adapter and makes the appropriate changes to your `astro.config.mjs` file in one step. By default, this sets the build output configuration to `output: 'server'`, which server renders all your pages by default. If there are certain pages that *don't* need on demand rendering/SSR, for example static pages like a privacy policy, you should set `export const prerender = true` for that page or route to pre-render it. You can read more about the adapter configuration options [in the Astro docs](https://docs.astro.build/en/guides/integrations-guide/cloudflare/#options).\n\n2. **Add a `.assetsignore` file** Create a `.assetsignore` file in your `public/` folder, and add the following lines to it:",
      "language": "unknown"
    },
    {
      "code": "3. **Add a Wrangler configuration file**\n\n   In your project root, create a Wrangler configuration file with the following content:\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "What's this configuration doing?\n\n   The key parts of this config are:\n\n   * `main` points to the entry point of your Worker script. This is generated by the Astro adapter, and is what powers your server-rendered pages.\n   * `assets.directory` tells Wrangler where to find your static assets. In this case, we're telling Wrangler to look in the `./dist` directory. If your assets are in a different directory, update the `directory` value accordingly.\n\n   Read more about [Wrangler configuration options](https://developers.cloudflare.com/workers/wrangler/configuration/) and [asset configuration options](https://developers.cloudflare.com/workers/wrangler/configuration/#assets).\n\n4. **Build and deploy your project**\n\n   You can deploy your project to a [`*.workers.dev` subdomain](https://developers.cloudflare.com/workers/configuration/routing/workers-dev/) or a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your local machine or any CI/CD system (including [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/#workers-builds)). Use the following command to build and deploy. If you're using a CI service, be sure to update your \"deploy command\" accordingly.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "- npm",
      "language": "unknown"
    },
    {
      "code": "- yarn",
      "language": "unknown"
    },
    {
      "code": "- pnpm",
      "language": "unknown"
    },
    {
      "code": "## Bindings\n\nNote\n\nYou cannot use bindings if you're using Astro to generate a purely static site.\n\nWith bindings, your Astro application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more. Refer to the [bindings overview](https://developers.cloudflare.com/workers/runtime-apis/bindings/) for more information on what's available and how to configure them.\n\nThe [Astro docs](https://docs.astro.build/en/guides/integrations-guide/cloudflare/#cloudflare-runtime) provide information about how you can access them in your `locals`.\n\n## Astro's build configuration\n\nThe Astro Cloudflare adapter sets the build output configuration to `output: 'server'`, which means all pages are rendered on-demand in your Cloudflare Worker. If there are certain pages that *don't* need on demand rendering/SSR, for example static pages such as a privacy policy, you should set `export const prerender = true` for that page or route to pre-render it. You can read more about on-demand rendering [in the Astro docs](https://docs.astro.build/en/guides/on-demand-rendering/).\n\nIf you want to use Astro as a static site generator, you do not need the Astro Cloudflare adapter. Astro will pre-render all pages at build time by default, and you can simply upload those static assets to be served by Cloudflare.\n\n</page>\n\n<page>\n---\ntitle: More guides...  Cloudflare Workers docs\nlastUpdated: 2025-06-05T13:25:05.000Z\nchatbotDeprioritize: true\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/more-web-frameworks/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Next.js  Cloudflare Workers docs\ndescription: Create an Next.js application and deploy it to Cloudflare Workers\n  with Workers Assets.\nlastUpdated: 2025-12-12T16:17:06.000Z\nchatbotDeprioritize: false\ntags: Full stack\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/nextjs/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/nextjs/index.md\n---\n\n**Start from CLI** - scaffold a Next.js project on Workers.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "This is a simple getting started guide. For detailed documentation on how to use the Cloudflare OpenNext adapter, visit the [OpenNext website](https://opennext.js.org/cloudflare).\n\n## What is Next.js?\n\n[Next.js](https://nextjs.org/) is a [React](https://react.dev/) framework for building full stack applications.\n\nNext.js supports Server-side and Client-side rendering, as well as Partial Prerendering which lets you combine static and dynamic components in the same route.\n\nYou can deploy your Next.js app to Cloudflare Workers using the OpenNext adapter.\n\n## Next.js supported features\n\nMost Next.js features are supported by the Cloudflare OpenNext adapter:\n\n| Feature | Cloudflare adapter | Notes |\n| - | - | - |\n| App Router |  supported | |\n| Pages Router |  supported | |\n| Route Handlers |  supported | |\n| React Server Components |  supported | |\n| Static Site Generation (SSG) |  supported | |\n| Server-Side Rendering (SSR) |  supported | |\n| Incremental Static Regeneration (ISR) |  supported | |\n| Server Actions |  supported | |\n| Response streaming |  supported | |\n| asynchronous work with `next/after` |  supported | |\n| Middleware |  supported | |\n| Image optimization |  supported | Supported via [Cloudflare Images](https://developers.cloudflare.com/images/) |\n| Partial Prerendering (PPR) |  supported | PPR is experimental in Next.js |\n| Composable Caching ('use cache') |  supported | Composable Caching is experimental in Next.js |\n| Node.js in Middleware |  not yet supported | Node.js middleware introduced in 15.2 are not yet supported |\n\n## Deploy a new Next.js project on Workers\n\n1. **Create a new project with the create-cloudflare CLI (C3).**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's happening behind the scenes?\n\n   When you run this command, C3 creates a new project directory, initiates [Next.js's official setup tool](https://nextjs.org/docs/app/api-reference/cli/create-next-app), and configures the project for Cloudflare. It then offers the option to instantly deploy your application to Cloudflare.\n\n2. **Develop locally.**\n\n   After creating your project, run the following command in your project directory to start a local development server. The command uses the Next.js development server. It offers the best developer experience by quickly reloading your app every time the source code is updated.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "3. **Test and preview your site with the Cloudflare adapter.**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's the difference between dev and preview?\n\n   The command used in the previous step uses the Next.js development server, which runs in Node.js. However, your deployed application will run on Cloudflare Workers, which uses the `workerd` runtime. Therefore when running integration tests and previewing your application, you should use the preview command, which is more accurate to production, as it executes your application in the `workerd` runtime using `wrangler dev`.\n\n4. **Deploy your project.**\n\n   You can deploy your project to a [`*.workers.dev` subdomain](https://developers.cloudflare.com/workers/configuration/routing/workers-dev/) or a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your local machine or any CI/CD system (including [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/#workers-builds)). Use the following command to build and deploy. If you're using a CI service, be sure to update your \"deploy command\" accordingly.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   [**Workers Builds**](https://developers.cloudflare.com/workers/ci-cd/builds/) requires you to configure environment variables in the [\"Build Variables and secrets\"](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#:~:text=Build%20variables%20and%20secrets) section.\n\n   This ensures the Next build has the necessary access to both public `NEXT_PUBLC...` variables and [non-`NEXT_PUBLIC_...`](https://nextjs.org/docs/pages/guides/environment-variables#bundling-environment-variables-for-the-browser), which are essential for tasks like inlining and building SSG pages.\n\n   Learn more in the [OpenNext environment variable guide](https://opennext.js.org/cloudflare/howtos/env-vars#workers-builds)\n\n## Deploy an existing Next.js project on Workers\n\nYou can convert an existing Next.js application to run on Cloudflare\n\n1. **Install [`@opennextjs/cloudflare`](https://www.npmjs.com/package/@opennextjs/cloudflare)**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "2. **Install [`wrangler CLI`](https://developers.cloudflare.com/workers/wrangler) as a devDependency**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "3. **Add a Wrangler configuration file**\n\n   In your project root, create a [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/) with the following content:\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   As shown above, you must enable the [`nodejs_compat` compatibility flag](https://developers.cloudflare.com/workers/runtime-apis/nodejs/) *and* set your [compatibility date](https://developers.cloudflare.com/workers/configuration/compatibility-dates/) to `2024-09-23` or later for your Next.js app to work with @opennextjs/cloudflare.\n\n4. **Add a configuration file for OpenNext**\n\n   In your project root, create an OpenNext configuration file named `open-next.config.ts` with the following content:",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   `open-next.config.ts` is where you can configure the caching, see the [adapter documentation](https://opennext.js.org/cloudflare/caching) for more information\n\n5. **Update `package.json`**\n\n   You can add the following scripts to your `package.json`:",
      "language": "unknown"
    },
    {
      "code": "Usage\n\n   * `preview`: Builds your app and serves it locally, allowing you to quickly preview your app running locally in the Workers runtime, via a single command.\n   * `deploy`: Builds your app, and then deploys it to Cloudflare\n   * `cf-typegen`: Generates a `cloudflare-env.d.ts` file at the root of your project containing the types for the env.\n\n6. **Develop locally.**\n\n   After creating your project, run the following command in your project directory to start a local development server. The command uses the Next.js development server. It offers the best developer experience by quickly reloading your app after your source code is updated.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "7. **Test your site with the Cloudflare adapter.**\n\n   The command used in the previous step uses the Next.js development server to offer a great developer experience. However your application will run on Cloudflare Workers so you want to run your integration tests and verify that your application works correctly in this environment.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "8. **Deploy your project.**\n\n   You can deploy your project to a [`*.workers.dev` subdomain](https://developers.cloudflare.com/workers/configuration/routing/workers-dev/) or a [custom domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your local machine or any CI/CD system (including [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/#workers-builds)). Use the following command to build and deploy. If you're using a CI service, be sure to update your \"deploy command\" accordingly.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\n   [**Workers Builds**](https://developers.cloudflare.com/workers/ci-cd/builds/) requires you to configure environment variables in the [\"Build Variables and secrets\"](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#:~:text=Build%20variables%20and%20secrets) section.\n\n   This ensures the Next build has the necessary access to both public `NEXT_PUBLC...` variables and [non-`NEXT_PUBLIC_...`](https://nextjs.org/docs/pages/guides/environment-variables#bundling-environment-variables-for-the-browser), which are essential for tasks like inlining and building SSG pages.\n\n   Learn more in the [OpenNext environment variable guide](https://opennext.js.org/cloudflare/howtos/env-vars#workers-builds)\n\n</page>\n\n<page>\n---\ntitle: React + Vite  Cloudflare Workers docs\ndescription: Create a React application and deploy it to Cloudflare Workers with\n  Workers Assets.\nlastUpdated: 2025-09-15T15:32:59.000Z\nchatbotDeprioritize: false\ntags: SPA\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/react/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/react/index.md\n---\n\n**Start from CLI** - scaffold a full-stack app with a React SPA, Cloudflare Workers API, and the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) for lightning-fast development.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "***\n\n**Or just deploy** - create a full-stack app using React, Hono API and Vite, with CI/CD and previews all set up for you.\n\n[![Deploy to Workers](https://deploy.workers.cloudflare.com/button)](https://dash.cloudflare.com/?to=/:account/workers-and-pages/create/deploy-to-workers\\&repository=https://github.com/cloudflare/templates/tree/main/vite-react-template)\n\n## What is React?\n\n[React](https://react.dev/) is a framework for building user interfaces. It allows you to create reusable UI components and manage the state of your application efficiently. You can use React to build a single-page application (SPA), and combine it with a backend API running on Cloudflare Workers to create a full-stack application.\n\n## Creating a full-stack app with React\n\n1. **Create a new project with the create-cloudflare CLI (C3)**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "How is this project set up?\n\n   Below is a simplified file tree of the project.\n\n   `wrangler.jsonc` is your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/). In this file:\n\n   * `main` points to `worker/index.ts`. This is your Worker, which is going to act as your backend API.\n   * `assets.not_found_handling` is set to `single-page-application`, which means that routes that are handled by your React SPA do not go to the Worker, and are thus free.\n   * If you want to add bindings to resources on Cloudflare's developer platform, you configure them here. Read more about [bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/).\n\n   `vite.config.ts` is set up to use the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/). This runs your Worker in the Cloudflare Workers runtime, ensuring your local development environment is as close to production as possible.\n\n   `worker/index.ts` is your backend API, which contains a single endpoint, `/api/`, that returns a text response. At `src/App.tsx`, your React app calls this endpoint to get a message back and displays this.\n\n2. **Develop locally with the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/)**\n\n   After creating your project, run the following command in your project directory to start a local development server.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's happening in local development?\n\n   This project uses Vite for local development and build, and thus comes with all of Vite's features, including hot module replacement (HMR).\n\n   In addition, `vite.config.ts` is set up to use the Cloudflare Vite plugin. This runs your application in the Cloudflare Workers runtime, just like in production, and enables access to local emulations of bindings.\n\n3. **Deploy your project**\n\n   Your project can be deployed to a `*.workers.dev` subdomain or a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/), from your own machine or from any CI/CD system, including Cloudflare's own [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/builds/).\n\n   The following command will build and deploy your project. If you are using CI, ensure you update your [\"deploy command\"](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) configuration appropriately.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Asset Routing\n\nIf you're using React as a SPA, you will want to set `not_found_handling = \"single-page-application\"` in your Wrangler configuration file.\n\nBy default, Cloudflare first tries to match a request path against a static asset path, which is based on the file structure of the uploaded asset directory. This is either the directory specified by `assets.directory` in your Wrangler config or, in the case of the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/), the output directory of the client build. Failing that, we invoke a Worker if one is present. If there is no Worker, or the Worker then uses the asset binding, Cloudflare will fallback to the behaviour set by [`not_found_handling`](https://developers.cloudflare.com/workers/static-assets/#routing-behavior).\n\nRefer to the [routing documentation](https://developers.cloudflare.com/workers/static-assets/routing/) for more information about how routing works with static assets, and how to customize this behavior.\n\n## Use bindings with React\n\nYour new project also contains a Worker at `./worker/index.ts`, which you can use as a backend API for your React application. While your React application cannot directly access Workers bindings, it can interact with them through this Worker. You can make [`fetch()` requests](https://developers.cloudflare.com/workers/runtime-apis/fetch/) from your React application to the Worker, which can then handle the request and use bindings. Learn how to [configure Workers bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/).\n\nWith bindings, your application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more.\n\n[Bindings ](https://developers.cloudflare.com/workers/runtime-apis/bindings/)Access to compute, storage, AI and more.\n\n</page>\n\n<page>\n---\ntitle: React Router (formerly Remix)  Cloudflare Workers docs\ndescription: Create a React Router application and deploy it to Cloudflare Workers\nlastUpdated: 2025-10-02T15:06:56.000Z\nchatbotDeprioritize: false\ntags: Full stack\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/react-router/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/react-router/index.md\n---\n\n**Start from CLI**: Scaffold a full-stack app with [React Router v7](https://reactrouter.com/) and the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) for lightning-fast development.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "**Or just deploy**: Create a full-stack app using React Router v7, with CI/CD and previews all set up for you.\n\n[![Deploy to Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/cloudflare/templates/tree/main/react-router-starter-template)\n\nNote\n\nSPA mode and prerendering are not currently supported when using the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/). If you wish to use React Router in an SPA then we recommend starting with the [React template](https://developers.cloudflare.com/workers/framework-guides/web-apps/react/) and using React Router [as a library](https://reactrouter.com/start/data/installation).\n\n## What is React Router?\n\n[React Router v7](https://reactrouter.com/) is a full-stack React framework for building web applications. It combines with the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) to provide a first-class experience for developing, building and deploying your apps on Cloudflare.\n\n## Creating a full-stack React Router app\n\n1. **Create a new project with the create-cloudflare CLI (C3)**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "How is this project set up?\n\n   Below is a simplified file tree of the project.\n\n   `react-router.config.ts` is your [React Router config file](https://reactrouter.com/explanation/special-files#react-routerconfigts). In this file:\n\n   * `ssr` is set to `true`, meaning that your application will use server-side rendering.\n   * `future.unstable_viteEnvironmentApi` is set to `true` to enable compatibility with the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/).\n\n   `vite.config.ts` is your [Vite config file](https://vite.dev/config/). The React Router and Cloudflare plugins are included in the `plugins` array. The [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/) runs your server code in the Workers runtime, ensuring your local development environment is as close to production as possible.\n\n   `wrangler.jsonc` is your [Worker config file](https://developers.cloudflare.com/workers/wrangler/configuration/). In this file:\n\n   * `main` points to `./workers/app.ts`. This is the entry file for your Worker. The default export includes a [`fetch` handler](https://developers.cloudflare.com/workers/runtime-apis/fetch/), which delegates the request to React Router.\n   * If you want to add [bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/) to resources on Cloudflare's developer platform, you configure them here.\n\n2. **Develop locally**\n\n   After creating your project, run the following command in your project directory to start a local development server.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's happening in local development?\n\n   This project uses React Router in combination with the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/). This means that your application runs in the Cloudflare Workers runtime, just like in production, and enables access to local emulations of bindings.\n\n3. **Deploy your project**\n\n   Your project can be deployed to a `*.workers.dev` subdomain or a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your own machine or from any CI/CD system, including Cloudflare's own [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/builds/).\n\n   The following command will build and deploy your project. If you are using CI, ensure you update your [\"deploy command\"](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) configuration appropriately.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "## Use bindings with React Router\n\nWith bindings, your application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more.\n\nOnce you have configured the bindings in the Wrangler configuration file, they are then available within `context.cloudflare` in your loader or action functions:",
      "language": "unknown"
    },
    {
      "code": "As you have direct access to your Worker entry file (`workers/app.ts`), you can also add additional exports such as [Durable Objects](https://developers.cloudflare.com/durable-objects/) and [Workflows](https://developers.cloudflare.com/workflows/)\n\nExample: Using Workflows\n\nHere is an example of how to set up a simple Workflow in your Worker entry file.",
      "language": "unknown"
    },
    {
      "code": "Configure it in your Wrangler configuration file:\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "And then use it in your application:",
      "language": "unknown"
    },
    {
      "code": "With bindings, your application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more.\n\n[Bindings ](https://developers.cloudflare.com/workers/runtime-apis/bindings/)Access to compute, storage, AI and more.\n\n</page>\n\n<page>\n---\ntitle: RedwoodSDK  Cloudflare Workers docs\ndescription: Create an RedwoodSDK application and deploy it to Cloudflare\n  Workers with Workers Assets.\nlastUpdated: 2025-07-16T12:18:55.000Z\nchatbotDeprioritize: false\ntags: Full stack\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/redwoodsdk/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/redwoodsdk/index.md\n---\n\nIn this guide, you will create a new [RedwoodSDK](https://rwsdk.com/) application and deploy it to Cloudflare Workers.\n\nRedwoodSDK is a composable framework for building server-side web apps on Cloudflare. It starts as a Vite plugin that unlocks SSR, React Server Components, Server Functions, and realtime capabilities.\n\n## Deploy a new RedwoodSDK application on Workers\n\n1. **Create a new project.**\n\n   Run the following command, replacing `<project-name>` with your desired project name:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "2. **Change the directory.**",
      "language": "unknown"
    },
    {
      "code": "3. **Install dependencies.**\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "4. **Develop locally.**\n\n   Run the following command in the project directory to start a local development server. RedwoodSDK is just a plugin for Vite, so you can use the same dev workflow as any other Vite project:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "5. **Deploy your project.**\n\n   You can deploy your project to a `*.workers.dev` subdomain or a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/), either from your local machine or from any CI/CD system, including [Cloudflare Workers CI/CD](https://developers.cloudflare.com/workers/ci-cd/builds/).\n\n   Use the following command to build and deploy. If you are using CI, make sure to update your [deploy command](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) configuration accordingly.\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: TanStack Start  Cloudflare Workers docs\ndescription: Create a TanStack Start application and deploy it to Cloudflare Workers.\nlastUpdated: 2025-12-19T11:18:06.000Z\nchatbotDeprioritize: false\ntags: Full stack\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/tanstack-start/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/tanstack-start/index.md\n---\n\n[TanStack Start](https://tanstack.com/start) is a full-stack framework for building web applications. It comes with features like server-side rendering, streaming, server functions, bundling, and more. In this guide, you learn to deploy a TanStack Start application to Cloudflare Workers.\n\n## Creating a new TanStack Start application\n\nTo create a TanStack Start application, run the following command:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "After you have created your project, run the following command in the project directory to start a local development server. This will allow you to preview your project locally during development.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "## Configuring an existing TanStack Start application\n\nIf you have an existing TanStack Start application, you can configure it to run on Cloudflare Workers by following these steps:\n\n1. Add the `wrangler.jsonc` configuration file to the root of your project with the following content:\n\n   * wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "2. Install `wrangler` as a development dependency:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "3. Install the `@cloudflare/vite-plugin` package as a dependency:\n\n   * npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "4. Update your `vite.config.ts` file to include the Cloudflare Vite plugin:",
      "language": "unknown"
    },
    {
      "code": "5. Update the `scripts` section of your `package.json` file to include the following commands:",
      "language": "unknown"
    },
    {
      "code": "## Deploy your Project\n\nYou can deploy your project to a `*.workers.dev` subdomain or a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/) from your own machine or from any CI/CD system, including Cloudflare's own [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/builds/).\n\nThe following command will build and deploy your project. If you are using CI, ensure you update your [**Deploy command**](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) configuration appropriately.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Note\n\nBefore deploying your application, you can also run the `preview` script to preview the built output locally before deploying it. This can help you making sure that your application will work as intended once it's been deployed to the Cloudflare network:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "## Bindings\n\nYour TanStack Start application can be fully integrated with the Cloudflare Developer Platform, in both local development and in production, by using bindings.\n\nYou can use bindings simply by [importing the `env` object](https://developers.cloudflare.com/workers/runtime-apis/bindings/#importing-env-as-a-global) and accessing it in your server side code.\n\nFor example in the following way:",
      "language": "unknown"
    },
    {
      "code": "Note\n\nRunning the `cf-typegen` script:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "Will populate the `env` object with the various bindings based on your configuration.\n\nWith bindings, your application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more.\n\n[Bindings ](https://developers.cloudflare.com/workers/runtime-apis/bindings/)Access to compute, storage, AI and more.\n\n## Static Prerendering\n\nYou can prerender your application to static HTML files at build time with TanStack Start and serve them as [static assets](https://developers.cloudflare.com/workers/static-assets/).",
      "language": "unknown"
    },
    {
      "code": "No additional configuration is needed in your wrangler config file. For more prerender options, see the [TanStack Start documentation](https://tanstack.com/start/latest/docs/framework/react/guide/static-prerendering).\n\nNote\n\nRequires `@tanstack/react-start` v1.138.0 or later.\n\nWarning\n\nPrerendering runs during the build step and uses your local environment variables, secrets, and bindings storage data. Ensure your build environment is configured correctly, and use [remote bindings](https://developers.cloudflare.com/workers/development-testing/#remote-bindings) to prerender with production data.\n\n### Prerendering in CI environments\n\nWhen prerendering in CI, your Worker code may need access to environment variables or secrets that are not available in the build environment. One way to handle this is to include a `.env` file with variable references, which resolve to values provided by your CI environment:",
      "language": "unknown"
    },
    {
      "code": "In your CI environment, set `CLOUDFLARE_INCLUDE_PROCESS_ENV=true` and provide the required values as environment variables. If using [Workers Builds](https://developers.cloudflare.com/workers/ci-cd/builds/), update your [build settings](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) accordingly.\n\nNote\n\nFor local development, create a `.env.local` file with actual secret values. Do not commit this file to your repository. Values in `.env.local` override the references in `.env`:",
      "language": "unknown"
    },
    {
      "code": "</page>\n\n<page>\n---\ntitle: SvelteKit  Cloudflare Workers docs\ndescription: Create a SvelteKit application and deploy it to Cloudflare Workers\n  with Workers Assets.\nlastUpdated: 2025-12-09T19:56:58.000Z\nchatbotDeprioritize: false\ntags: SPA\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/sveltekit/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/sveltekit/index.md\n---\n\nIn this guide, you will create a new [SvelteKit](https://svelte.dev/docs/kit/introduction) application and deploy to Cloudflare Workers.\n\n## 1. Set up a new project\n\nUse the [`create-cloudflare`](https://www.npmjs.com/package/create-cloudflare) CLI (C3) to set up a new project. C3 will create a new project directory, initiate SvelteKit's official setup tool, and provide the option to deploy instantly.\n\nTo use `create-cloudflare` to create a new SvelteKit project with Workers Assets, run the following command:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "After setting up your project, change your directory by running the following command:",
      "language": "unknown"
    },
    {
      "code": "## 2. Develop locally\n\nAfter you have created your project, run the following command in the project directory to start a local server. This will allow you to preview your project locally during development.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "## 3. Deploy your Project\n\nYour project can be deployed to a `*.workers.dev` subdomain or a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/), from your own machine or from any CI/CD system, including [Cloudflare's own](https://developers.cloudflare.com/workers/ci-cd/builds/).\n\nThe following command will build and deploy your project. If you're using CI, ensure you update your [\"deploy command\"](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) configuration appropriately.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Bindings\n\nYour SvelteKit application can be fully integrated with the Cloudflare Developer Platform, in both local development and in production, by using product bindings. The [SvelteKit documentation](https://kit.svelte.dev/docs/adapter-cloudflare#runtime-apis) provides information about configuring bindings and how you can access them in your SvelteKit hooks and endpoints.\n\nWith bindings, your application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more.\n\n[Bindings ](https://developers.cloudflare.com/workers/runtime-apis/bindings/)Access to compute, storage, AI and more.\n\n</page>\n\n<page>\n---\ntitle: Vue  Cloudflare Workers docs\ndescription: Create a Vue application and deploy it to Cloudflare Workers with\n  Workers Assets.\nlastUpdated: 2025-08-20T18:47:44.000Z\nchatbotDeprioritize: false\ntags: SPA\nsource_url:\n  html: https://developers.cloudflare.com/workers/framework-guides/web-apps/vue/\n  md: https://developers.cloudflare.com/workers/framework-guides/web-apps/vue/index.md\n---\n\nIn this guide, you will create a new [Vue](https://vuejs.org/) application and deploy to Cloudflare Workers (with the new [Workers Assets](https://developers.cloudflare.com/workers/static-assets/)).\n\n## 1. Set up a new project\n\nUse the [`create-cloudflare`](https://www.npmjs.com/package/create-cloudflare) CLI (C3) to set up a new project. C3 will create a new project directory, use code from the official Vue template, and provide the option to deploy instantly.\n\nTo use `create-cloudflare` to create a new Vue project with Workers Assets, run the following command:\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "How is this project set up?\n\nBelow is a simplified file tree of the project.\n\n`wrangler.jsonc` is your [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/). In this file:\n\n* `main` points to `server/index.ts`. This is your Worker, which is going to act as your backend API.\n* `assets.not_found_handling` is set to `single-page-application`, which means that routes that are handled by your Vue SPA do not go to the Worker, and are thus free.\n* If you want to add bindings to resources on Cloudflare's developer platform, you configure them here. Read more about [bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/).\n\n`vite.config.ts` is set up to use the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/). This runs your Worker in the Cloudflare Workers runtime, ensuring your local development environment is as close to production as possible.\n\n`server/index.ts` is your backend API, which contains a single endpoint, `/api/`, that returns a text response. At `src/App.vue`, your Vue app calls this endpoint to get a message back and displays this.\n\n## **Develop locally with the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/)**\n\nAfter you have created your project, run the following command in the project directory to start a local server. This will allow you to preview your project locally during development.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "What's happening in local development?\n\nThis project uses Vite for local development and build, and thus comes with all of Vite's features, including hot module replacement (HMR). In addition, `vite.config.ts` is set up to use the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/). This runs your application in the Cloudflare Workers runtime, just like in production, and enables access to local emulations of bindings.\n\n## 3. Deploy your project\n\nYour project can be deployed to a `*.workers.dev` subdomain or a [Custom Domain](https://developers.cloudflare.com/workers/configuration/routing/custom-domains/), from your own machine or from any CI/CD system, including [Cloudflare's own](https://developers.cloudflare.com/workers/ci-cd/builds/).\n\nThe following command will build and deploy your project. If you are using CI, ensure you update your [\"deploy command\"](https://developers.cloudflare.com/workers/ci-cd/builds/configuration/#build-settings) configuration appropriately.\n\n* npm",
      "language": "unknown"
    },
    {
      "code": "* yarn",
      "language": "unknown"
    },
    {
      "code": "* pnpm",
      "language": "unknown"
    },
    {
      "code": "***\n\n## Asset Routing\n\nIf you're using Vue as a SPA, you will want to set `not_found_handling = \"single_page_application\"` in your Wrangler configuration file.\n\nBy default, Cloudflare first tries to match a request path against a static asset path, which is based on the file structure of the uploaded asset directory. This is either the directory specified by `assets.directory` in your Wrangler config or, in the case of the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/), the output directory of the client build. Failing that, we invoke a Worker if one is present. If there is no Worker, or the Worker then uses the asset binding, Cloudflare will fallback to the behaviour set by [`not_found_handling`](https://developers.cloudflare.com/workers/static-assets/#routing-behavior).\n\nRefer to the [routing documentation](https://developers.cloudflare.com/workers/static-assets/routing/) for more information about how routing works with static assets, and how to customize this behavior.\n\n## Use bindings with Vue\n\nYour new project also contains a Worker at `./server/index.ts`, which you can use as a backend API for your Vue application. While your Vue application cannot directly access Workers bindings, it can interact with them through this Worker. You can make [`fetch()` requests](https://developers.cloudflare.com/workers/runtime-apis/fetch/) from your Vue application to the Worker, which can then handle the request and use bindings.\n\nWith bindings, your application can be fully integrated with the Cloudflare Developer Platform, giving you access to compute, storage, AI and more.\n\n[Bindings ](https://developers.cloudflare.com/workers/runtime-apis/bindings/)Access to compute, storage, AI and more.\n\n</page>\n\n<page>\n---\ntitle: Examples  Cloudflare Workers docs\nlastUpdated: 2024-08-13T19:56:56.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/languages/javascript/examples/\n  md: https://developers.cloudflare.com/workers/languages/javascript/examples/index.md\n---\n\n\n</page>\n\n<page>\n---\ntitle: Learn the basics of Python Workers  Cloudflare Workers docs\ndescription: Learn the basics of Python Workers\nlastUpdated: 2025-11-11T15:40:52.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/languages/python/basics/\n  md: https://developers.cloudflare.com/workers/languages/python/basics/index.md\n---\n\n## Fetch Handler\n\nAs mentioned in the [introduction to Python Workers](https://developers.cloudflare.com/workers/languages/python/), a Python Worker can be as simple as four lines of code:",
      "language": "unknown"
    },
    {
      "code": "Similar to other Workers, the main entry point for a Python worker is the [`fetch` handler](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch) which handles incoming requests sent to the Worker.\n\nIn a Python Worker, this handler is placed in a `Default` class that extends the `WorkerEntrypoint` class (which you can import from the `workers` SDK module).\n\n## The `Request` Interface\n\nThe `request` parameter passed to your `fetch` handler is a JavaScript Request object, exposed via the [foreign function interface (FFI)](https://developers.cloudflare.com/workers/languages/python/ffi), allowing you to access it directly from your Python code.\n\nLet's try editing the worker to accept a POST request. We know from the [documentation for `Request`](https://developers.cloudflare.com/workers/runtime-apis/request) that we can call `await request.json()` within an `async` function to parse the request body as JSON.\n\nIn a Python Worker, you would write:",
      "language": "unknown"
    },
    {
      "code": "Many other JavaScript APIs are available in Python Workers via the FFI, so you can call other methods in a similar way.\n\nOnce you edit the `src/entry.py`, Wrangler will automatically restart the local development server.\n\nNow, if you send a POST request with the appropriate body, your Worker will respond with a personalized message.",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "## The `env` Attribute\n\nThe `env` attribute on the `WorkerEntrypoint` can be used to access [environment variables](https://developers.cloudflare.com/workers/configuration/environment-variables/), [secrets](https://developers.cloudflare.com/workers/configuration/secrets/),and [bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings/).\n\nFor example, let us try setting and using an environment variable in a Python Worker. First, add the environment variable to your Worker's [Wrangler configuration file](https://developers.cloudflare.com/workers/wrangler/configuration/):\n\n* wrangler.jsonc",
      "language": "unknown"
    },
    {
      "code": "* wrangler.toml",
      "language": "unknown"
    },
    {
      "code": "Then, you can access the `API_HOST` environment variable via the `env` parameter:",
      "language": "unknown"
    },
    {
      "code": "## Modules\n\nPython workers can be split across multiple files.\n\nLet's create a new Python file, called `src/hello.py`:",
      "language": "unknown"
    },
    {
      "code": "Now, we can modify `src/entry.py` to make use of the new module.",
      "language": "unknown"
    },
    {
      "code": "Once you edit `src/entry.py`, [`pywrangler`](https://developers.cloudflare.com/workers/languages/python/#the-pywrangler-cli-tool) will automatically detect the change and reload your Worker.\n\n## Types and Autocompletion\n\nWhen developing Python Workers, you can take advantage of type hints and autocompletion in your IDE.\n\nTo enable them, install the `workers-runtime-sdk` package in your `pyproject.toml` file.",
      "language": "unknown"
    },
    {
      "code": "Additionally, you can generate types based on your Worker configuration using `uv run pywrangler types`\n\nThis includes Env types based on your bindings, module rules, and runtime types based on the compatibility\\_date and compatibility\\_flags in your config file.\n\n## Upgrading `pywrangler`\n\nTo upgrade to the latest version of [`pywrangler`](https://developers.cloudflare.com/workers/languages/python/#the-pywrangler-cli-tool) globally, run the following command:",
      "language": "unknown"
    },
    {
      "code": "To upgrade to the latest version of `pywrangler` in a specific project, run the following command:",
      "language": "unknown"
    },
    {
      "code": "## Next Up\n\n* Learn details about local development, deployment, and [how Python Workers work](https://developers.cloudflare.com/workers/languages/python/how-python-workers-work).\n* Explore the [package](https://developers.cloudflare.com/workers/languages/python/packages) docs for instructions on how to use packages with Python Workers.\n* Understand which parts of the [Python Standard Library](https://developers.cloudflare.com/workers/languages/python/stdlib) are supported in Python Workers.\n* Learn about Python Workers' [foreign function interface (FFI)](https://developers.cloudflare.com/workers/languages/python/ffi), and how to use it to work with [bindings](https://developers.cloudflare.com/workers/runtime-apis/bindings) and [Runtime APIs](https://developers.cloudflare.com/workers/runtime-apis/).\n\n</page>\n\n<page>\n---\ntitle: Python Worker Examples  Cloudflare Workers docs\ndescription: Cloudflare has a wide range of Python examples in the Workers Example gallery.\nlastUpdated: 2025-12-01T15:26:32.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers/languages/python/examples/\n  md: https://developers.cloudflare.com/workers/languages/python/examples/index.md\n---\n\nCloudflare has a wide range of Python examples in the [Workers Example gallery](https://developers.cloudflare.com/workers/examples/?languages=Python).\n\nIn addition to those examples, consider the following ones that illustrate Python-specific behavior.\n\n## Modules in your Worker\n\nLet's say your Worker has the following structure:",
      "language": "unknown"
    },
    {
      "code": "In order to import `module.py` in `main.py`, you would use the following import statement:",
      "language": "unknown"
    },
    {
      "code": "In this case, the main module is set to `src/main.py` in the wrangler.toml file like so:",
      "language": "unknown"
    },
    {
      "code": "This means that the `src` directory does not need to be specified in the import statement.\n\n## Parse an incoming request URL",
      "language": "unknown"
    },
    {
      "code": "## Parse JSON from the incoming request",
      "language": "unknown"
    },
    {
      "code": "## Read bundled asset files in your Worker\n\nLet's say your Worker has the following structure:",
      "language": "unknown"
    },
    {
      "code": "In order to read a file in your Worker, you would do the following:",
      "language": "unknown"
    },
    {
      "code": "## Emit logs from your Python Worker",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "3. Environment variables",
      "id": "3.-environment-variables"
    },
    {
      "level": "h2",
      "text": "Terraform commands",
      "id": "terraform-commands"
    },
    {
      "level": "h3",
      "text": "Initialize and plan",
      "id": "initialize-and-plan"
    },
    {
      "level": "h3",
      "text": "Manage changes",
      "id": "manage-changes"
    },
    {
      "level": "h2",
      "text": "Advanced Terraform configuration",
      "id": "advanced-terraform-configuration"
    },
    {
      "level": "h3",
      "text": "Multiple environments",
      "id": "multiple-environments"
    },
    {
      "level": "h3",
      "text": "Widget with Enterprise features",
      "id": "widget-with-enterprise-features"
    },
    {
      "level": "h2",
      "text": "Import existing widgets",
      "id": "import-existing-widgets"
    },
    {
      "level": "h2",
      "text": "Error families",
      "id": "error-families"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h2",
      "text": "Create and deploy a custom ruleset",
      "id": "create-and-deploy-a-custom-ruleset"
    },
    {
      "level": "h2",
      "text": "Edit a custom ruleset",
      "id": "edit-a-custom-ruleset"
    },
    {
      "level": "h2",
      "text": "Delete a custom ruleset",
      "id": "delete-a-custom-ruleset"
    },
    {
      "level": "h2",
      "text": "Configure a custom response for blocked requests",
      "id": "configure-a-custom-response-for-blocked-requests"
    },
    {
      "level": "h2",
      "text": "Procedure",
      "id": "procedure"
    },
    {
      "level": "h3",
      "text": "1. Create a custom ruleset",
      "id": "1.-create-a-custom-ruleset"
    },
    {
      "level": "h3",
      "text": "2. Deploy the custom ruleset",
      "id": "2.-deploy-the-custom-ruleset"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Deploy a managed ruleset",
      "id": "deploy-a-managed-ruleset"
    },
    {
      "level": "h2",
      "text": "Turn on or off a managed ruleset",
      "id": "turn-on-or-off-a-managed-ruleset"
    },
    {
      "level": "h2",
      "text": "Configure a managed ruleset",
      "id": "configure-a-managed-ruleset"
    },
    {
      "level": "h3",
      "text": "Configure field values for all the rules",
      "id": "configure-field-values-for-all-the-rules"
    },
    {
      "level": "h3",
      "text": "Configure rules in bulk in a managed ruleset",
      "id": "configure-rules-in-bulk-in-a-managed-ruleset"
    },
    {
      "level": "h3",
      "text": "Configure a single rule in a managed ruleset",
      "id": "configure-a-single-rule-in-a-managed-ruleset"
    },
    {
      "level": "h3",
      "text": "Browse the rules of a managed ruleset",
      "id": "browse-the-rules-of-a-managed-ruleset"
    },
    {
      "level": "h3",
      "text": "Delete a managed ruleset deployment rule or an exception",
      "id": "delete-a-managed-ruleset-deployment-rule-or-an-exception"
    },
    {
      "level": "h2",
      "text": "Procedure",
      "id": "procedure"
    },
    {
      "level": "h3",
      "text": "1. Create a rate limiting ruleset",
      "id": "1.-create-a-rate-limiting-ruleset"
    },
    {
      "level": "h3",
      "text": "2. Deploy the rate limiting ruleset",
      "id": "2.-deploy-the-rate-limiting-ruleset"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "1. Create a custom rate limiting ruleset",
      "id": "1.-create-a-custom-rate-limiting-ruleset"
    },
    {
      "level": "h2",
      "text": "2. Deploy the custom rate limiting ruleset",
      "id": "2.-deploy-the-custom-rate-limiting-ruleset"
    },
    {
      "level": "h2",
      "text": "Configure a custom response for blocked requests",
      "id": "configure-a-custom-response-for-blocked-requests"
    },
    {
      "level": "h2",
      "text": "Before you continue",
      "id": "before-you-continue"
    },
    {
      "level": "h2",
      "text": "Skip the remaining rules in the current ruleset",
      "id": "skip-the-remaining-rules-in-the-current-ruleset"
    },
    {
      "level": "h2",
      "text": "Skip a phase",
      "id": "skip-a-phase"
    },
    {
      "level": "h2",
      "text": "Skip a phase and do not log matching requests",
      "id": "skip-a-phase-and-do-not-log-matching-requests"
    },
    {
      "level": "h2",
      "text": "Skip security products",
      "id": "skip-security-products"
    },
    {
      "level": "h2",
      "text": "Skip the remaining rules in the current phase",
      "id": "skip-the-remaining-rules-in-the-current-phase"
    },
    {
      "level": "h2",
      "text": "Skip the remaining custom rules (current ruleset)",
      "id": "skip-the-remaining-custom-rules-(current-ruleset)"
    },
    {
      "level": "h2",
      "text": "Skip phases",
      "id": "skip-phases"
    },
    {
      "level": "h2",
      "text": "Skip products",
      "id": "skip-products"
    },
    {
      "level": "h2",
      "text": "Skip the remaining custom rules (current phase)",
      "id": "skip-the-remaining-custom-rules-(current-phase)"
    },
    {
      "level": "h2",
      "text": "Other options",
      "id": "other-options"
    },
    {
      "level": "h3",
      "text": "Log requests matching the skip rule",
      "id": "log-requests-matching-the-skip-rule"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Suggested rules",
      "id": "suggested-rules"
    },
    {
      "level": "h3",
      "text": "General protection",
      "id": "general-protection"
    },
    {
      "level": "h3",
      "text": "Specific protection for browser, API, and mobile traffic",
      "id": "specific-protection-for-browser,-api,-and-mobile-traffic"
    },
    {
      "level": "h3",
      "text": "Static resource protection",
      "id": "static-resource-protection"
    },
    {
      "level": "h3",
      "text": "Additional considerations",
      "id": "additional-considerations"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Option 1: Configure using Cloudflare Workers",
      "id": "option-1:-configure-using-cloudflare-workers"
    },
    {
      "level": "h2",
      "text": "Option 2: Configure using custom rules",
      "id": "option-2:-configure-using-custom-rules"
    },
    {
      "level": "h3",
      "text": "Example rule",
      "id": "example-rule"
    },
    {
      "level": "h2",
      "text": "HMAC token generation",
      "id": "hmac-token-generation"
    },
    {
      "level": "h3",
      "text": "Test the generated token parameter",
      "id": "test-the-generated-token-parameter"
    },
    {
      "level": "h2",
      "text": "Protect several paths using the same secret",
      "id": "protect-several-paths-using-the-same-secret"
    },
    {
      "level": "h2",
      "text": "Protect an entire URI path prefix with a single signature",
      "id": "protect-an-entire-uri-path-prefix-with-a-single-signature"
    },
    {
      "level": "h2",
      "text": "Allow requests from partners using custom rules",
      "id": "allow-requests-from-partners-using-custom-rules"
    },
    {
      "level": "h2",
      "text": "Allow requests from partners using Configuration Rules",
      "id": "allow-requests-from-partners-using-configuration-rules"
    },
    {
      "level": "h2",
      "text": "Example 1: Require presence of HTTP header",
      "id": "example-1:-require-presence-of-http-header"
    },
    {
      "level": "h2",
      "text": "Example 2: Require HTTP header with a specific value",
      "id": "example-2:-require-http-header-with-a-specific-value"
    },
    {
      "level": "h2",
      "text": "Other resources",
      "id": "other-resources"
    },
    {
      "level": "h2",
      "text": "Use ASN in custom rules",
      "id": "use-asn-in-custom-rules"
    },
    {
      "level": "h3",
      "text": "Allow traffic by ASN",
      "id": "allow-traffic-by-asn"
    },
    {
      "level": "h3",
      "text": "Adjust rules by ASN",
      "id": "adjust-rules-by-asn"
    },
    {
      "level": "h2",
      "text": "Use IP addresses in custom rules",
      "id": "use-ip-addresses-in-custom-rules"
    },
    {
      "level": "h3",
      "text": "Allow traffic by IP address",
      "id": "allow-traffic-by-ip-address"
    },
    {
      "level": "h3",
      "text": "Adjust rules by IP address",
      "id": "adjust-rules-by-ip-address"
    },
    {
      "level": "h2",
      "text": "Block requests with specific PII category in LLM prompt",
      "id": "block-requests-with-specific-pii-category-in-llm-prompt"
    },
    {
      "level": "h2",
      "text": "Block requests with specific unsafe content categories in LLM prompt",
      "id": "block-requests-with-specific-unsafe-content-categories-in-llm-prompt"
    },
    {
      "level": "h2",
      "text": "Block requests with prompt injection attempt in LLM prompt",
      "id": "block-requests-with-prompt-injection-attempt-in-llm-prompt"
    },
    {
      "level": "h2",
      "text": "1. Turn on Firewall for AI",
      "id": "1.-turn-on-firewall-for-ai"
    },
    {
      "level": "h2",
      "text": "2. Save or add an LLM-related endpoint",
      "id": "2.-save-or-add-an-llm-related-endpoint"
    },
    {
      "level": "h2",
      "text": "3. Add `cf-llm` label to endpoint",
      "id": "3.-add-`cf-llm`-label-to-endpoint"
    },
    {
      "level": "h2",
      "text": "4. (Optional) Generate API traffic",
      "id": "4.-(optional)-generate-api-traffic"
    },
    {
      "level": "h2",
      "text": "5. Review labeled traffic and detection behavior",
      "id": "5.-review-labeled-traffic-and-detection-behavior"
    },
    {
      "level": "h2",
      "text": "6. Mitigate harmful requests",
      "id": "6.-mitigate-harmful-requests"
    },
    {
      "level": "h2",
      "text": "General operations",
      "id": "general-operations"
    },
    {
      "level": "h3",
      "text": "Turn on leaked credentials detection",
      "id": "turn-on-leaked-credentials-detection"
    },
    {
      "level": "h3",
      "text": "Turn off leaked credentials detection",
      "id": "turn-off-leaked-credentials-detection"
    },
    {
      "level": "h3",
      "text": "Get status of leaked credentials detection",
      "id": "get-status-of-leaked-credentials-detection"
    },
    {
      "level": "h2",
      "text": "Custom detection location operations",
      "id": "custom-detection-location-operations"
    },
    {
      "level": "h3",
      "text": "Add a custom detection location",
      "id": "add-a-custom-detection-location"
    },
    {
      "level": "h3",
      "text": "Get existing custom detection locations",
      "id": "get-existing-custom-detection-locations"
    },
    {
      "level": "h3",
      "text": "Delete a custom detection location",
      "id": "delete-a-custom-detection-location"
    },
    {
      "level": "h2",
      "text": "Rate limit suspicious logins with leaked credentials",
      "id": "rate-limit-suspicious-logins-with-leaked-credentials"
    },
    {
      "level": "h2",
      "text": "Challenge requests containing leaked credentials",
      "id": "challenge-requests-containing-leaked-credentials"
    },
    {
      "level": "h2",
      "text": "1. Turn on the detection",
      "id": "1.-turn-on-the-detection"
    },
    {
      "level": "h2",
      "text": "2. Validate the leaked credentials detection behavior",
      "id": "2.-validate-the-leaked-credentials-detection-behavior"
    },
    {
      "level": "h2",
      "text": "3. Mitigate requests with leaked credentials",
      "id": "3.-mitigate-requests-with-leaked-credentials"
    },
    {
      "level": "h3",
      "text": "Handle detected leaked credentials at the origin server",
      "id": "handle-detected-leaked-credentials-at-the-origin-server"
    },
    {
      "level": "h2",
      "text": "4. (Optional) Configure a custom detection location",
      "id": "4.-(optional)-configure-a-custom-detection-location"
    },
    {
      "level": "h2",
      "text": "Test your configuration",
      "id": "test-your-configuration"
    },
    {
      "level": "h2",
      "text": "Enable leaked credentials detection",
      "id": "enable-leaked-credentials-detection"
    },
    {
      "level": "h2",
      "text": "Configure a custom detection location",
      "id": "configure-a-custom-detection-location"
    },
    {
      "level": "h2",
      "text": "Add a custom rule to challenge requests with leaked credentials",
      "id": "add-a-custom-rule-to-challenge-requests-with-leaked-credentials"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "General operations",
      "id": "general-operations"
    },
    {
      "level": "h3",
      "text": "Enable WAF content scanning",
      "id": "enable-waf-content-scanning"
    },
    {
      "level": "h3",
      "text": "Disable WAF content scanning",
      "id": "disable-waf-content-scanning"
    },
    {
      "level": "h3",
      "text": "Get WAF content scanning status",
      "id": "get-waf-content-scanning-status"
    },
    {
      "level": "h2",
      "text": "Custom expression operations",
      "id": "custom-expression-operations"
    },
    {
      "level": "h3",
      "text": "Get existing custom scan expressions",
      "id": "get-existing-custom-scan-expressions"
    },
    {
      "level": "h3",
      "text": "Add a custom scan expression",
      "id": "add-a-custom-scan-expression"
    },
    {
      "level": "h3",
      "text": "Delete a custom scan expression",
      "id": "delete-a-custom-scan-expression"
    },
    {
      "level": "h2",
      "text": "Log requests with an uploaded content object",
      "id": "log-requests-with-an-uploaded-content-object"
    },
    {
      "level": "h2",
      "text": "Block requests to URI path with a malicious content object",
      "id": "block-requests-to-uri-path-with-a-malicious-content-object"
    },
    {
      "level": "h2",
      "text": "Block requests with non-PDF file uploads",
      "id": "block-requests-with-non-pdf-file-uploads"
    },
    {
      "level": "h2",
      "text": "Block requests with uploaded files over 500 KB",
      "id": "block-requests-with-uploaded-files-over-500-kb"
    },
    {
      "level": "h2",
      "text": "Block requests with uploaded files over the content scanning limit (50 MB)",
      "id": "block-requests-with-uploaded-files-over-the-content-scanning-limit-(50-mb)"
    },
    {
      "level": "h2",
      "text": "1. Turn on the detection",
      "id": "1.-turn-on-the-detection"
    },
    {
      "level": "h2",
      "text": "2. Validate the content scanning behavior",
      "id": "2.-validate-the-content-scanning-behavior"
    },
    {
      "level": "h2",
      "text": "3. Create a custom rule",
      "id": "3.-create-a-custom-rule"
    },
    {
      "level": "h2",
      "text": "4. (Optional) Configure a custom scan expression",
      "id": "4.-(optional)-configure-a-custom-scan-expression"
    },
    {
      "level": "h2",
      "text": "Enable WAF content scanning",
      "id": "enable-waf-content-scanning"
    },
    {
      "level": "h2",
      "text": "Configure a custom scan expression",
      "id": "configure-a-custom-scan-expression"
    },
    {
      "level": "h2",
      "text": "Add a custom rule to block malicious uploads",
      "id": "add-a-custom-rule-to-block-malicious-uploads"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Create a custom rule checking for exposed credentials",
      "id": "create-a-custom-rule-checking-for-exposed-credentials"
    },
    {
      "level": "h3",
      "text": "Example A",
      "id": "example-a"
    },
    {
      "level": "h3",
      "text": "Example B",
      "id": "example-b"
    },
    {
      "level": "h2",
      "text": "Add a custom rule to check for exposed credentials",
      "id": "add-a-custom-rule-to-check-for-exposed-credentials"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Important notes",
      "id": "important-notes"
    },
    {
      "level": "h2",
      "text": "1. Turn off Exposed Credentials Check",
      "id": "1.-turn-off-exposed-credentials-check"
    },
    {
      "level": "h2",
      "text": "2. Turn on leaked credentials detection",
      "id": "2.-turn-on-leaked-credentials-detection"
    },
    {
      "level": "h2",
      "text": "3. Configure the actions to take",
      "id": "3.-configure-the-actions-to-take"
    },
    {
      "level": "h2",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Configure and enable payload logging",
      "id": "configure-and-enable-payload-logging"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Disable payload logging",
      "id": "disable-payload-logging"
    },
    {
      "level": "h2",
      "text": "Structure of `encrypted_matched_data` property in Logpush",
      "id": "structure-of-`encrypted_matched_data`-property-in-logpush"
    },
    {
      "level": "h2",
      "text": "Configure in the dashboard",
      "id": "configure-in-the-dashboard"
    },
    {
      "level": "h2",
      "text": "Configure via API",
      "id": "configure-via-api"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h3",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Configure in the dashboard",
      "id": "configure-in-the-dashboard"
    },
    {
      "level": "h2",
      "text": "Configure via API",
      "id": "configure-via-api"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h3",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Additional remarks",
      "id": "additional-remarks"
    },
    {
      "level": "h2",
      "text": "Configure in the dashboard",
      "id": "configure-in-the-dashboard"
    },
    {
      "level": "h2",
      "text": "Configure via API",
      "id": "configure-via-api"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h3",
      "text": "More resources",
      "id": "more-resources"
    },
    {
      "level": "h2",
      "text": "Review detected leaks",
      "id": "review-detected-leaks"
    },
    {
      "level": "h2",
      "text": "Resources",
      "id": "resources"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Skip all remaining rules",
      "id": "skip-all-remaining-rules"
    },
    {
      "level": "h3",
      "text": "Skip the Cloudflare Managed Ruleset",
      "id": "skip-the-cloudflare-managed-ruleset"
    },
    {
      "level": "h3",
      "text": "Skip one or more rules of WAF managed rulesets",
      "id": "skip-one-or-more-rules-of-waf-managed-rulesets"
    },
    {
      "level": "h2",
      "text": "1. Go to the zone or account dashboard page",
      "id": "1.-go-to-the-zone-or-account-dashboard-page"
    },
    {
      "level": "h2",
      "text": "2. Define basic exception parameters",
      "id": "2.-define-basic-exception-parameters"
    },
    {
      "level": "h2",
      "text": "3. Select the rules to skip",
      "id": "3.-select-the-rules-to-skip"
    },
    {
      "level": "h2",
      "text": "4. Create the exception",
      "id": "4.-create-the-exception"
    },
    {
      "level": "h2",
      "text": "5. (Optional) Edit the exception",
      "id": "5.-(optional)-edit-the-exception"
    },
    {
      "level": "h2",
      "text": "Main differences",
      "id": "main-differences"
    },
    {
      "level": "h3",
      "text": "Improved response for Block action",
      "id": "improved-response-for-block-action"
    },
    {
      "level": "h3",
      "text": "Different error page for blocked requests",
      "id": "different-error-page-for-blocked-requests"
    },
    {
      "level": "h3",
      "text": "New Skip action replacing both Allow and Bypass actions",
      "id": "new-skip-action-replacing-both-allow-and-bypass-actions"
    },
    {
      "level": "h3",
      "text": "Custom rules are evaluated in order",
      "id": "custom-rules-are-evaluated-in-order"
    },
    {
      "level": "h3",
      "text": "Logs and events",
      "id": "logs-and-events"
    },
    {
      "level": "h3",
      "text": "New API and Terraform resources",
      "id": "new-api-and-terraform-resources"
    },
    {
      "level": "h2",
      "text": "Relevant changes for dashboard users",
      "id": "relevant-changes-for-dashboard-users"
    },
    {
      "level": "h2",
      "text": "Relevant changes for API users",
      "id": "relevant-changes-for-api-users"
    },
    {
      "level": "h2",
      "text": "Relevant changes for Terraform users",
      "id": "relevant-changes-for-terraform-users"
    },
    {
      "level": "h3",
      "text": "Replace your configuration using `cf-terraforming`",
      "id": "replace-your-configuration-using-`cf-terraforming`"
    },
    {
      "level": "h2",
      "text": "Final remarks",
      "id": "final-remarks"
    },
    {
      "level": "h2",
      "text": "Cloudflare Managed Ruleset",
      "id": "cloudflare-managed-ruleset"
    },
    {
      "level": "h2",
      "text": "OWASP ModSecurity Core Rule Set",
      "id": "owasp-modsecurity-core-rule-set"
    },
    {
      "level": "h3",
      "text": "Control the OWASP package",
      "id": "control-the-owasp-package"
    },
    {
      "level": "h2",
      "text": "Important remarks",
      "id": "important-remarks"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h3",
      "text": "Rate limiting and SEO",
      "id": "rate-limiting-and-seo"
    },
    {
      "level": "h2",
      "text": "Availability",
      "id": "availability"
    },
    {
      "level": "h2",
      "text": "Components of a rate limiting rule",
      "id": "components-of-a-rate-limiting-rule"
    },
    {
      "level": "h3",
      "text": "Request matching criteria",
      "id": "request-matching-criteria"
    },
    {
      "level": "h3",
      "text": "Rate matching criteria",
      "id": "rate-matching-criteria"
    },
    {
      "level": "h3",
      "text": "Rule mitigation",
      "id": "rule-mitigation"
    },
    {
      "level": "h2",
      "text": "Identify rate-limit thresholds",
      "id": "identify-rate-limit-thresholds"
    },
    {
      "level": "h2",
      "text": "Task 1: Configure a basic rate limiting rule",
      "id": "task-1:-configure-a-basic-rate-limiting-rule"
    },
    {
      "level": "h3",
      "text": "Enable Protect your login",
      "id": "enable-protect-your-login"
    },
    {
      "level": "h3",
      "text": "Create a custom rate limiting rule",
      "id": "create-a-custom-rate-limiting-rule"
    },
    {
      "level": "h2",
      "text": "Task 2: Configure Advanced Criteria (only Business and Enterprise plans)",
      "id": "task-2:-configure-advanced-criteria-(only-business-and-enterprise-plans)"
    },
    {
      "level": "h2",
      "text": "Task 3: Configure Advanced Response (only Business and Enterprise plans)",
      "id": "task-3:-configure-advanced-response-(only-business-and-enterprise-plans)"
    },
    {
      "level": "h3",
      "text": "Using a custom HTML page or a redirect",
      "id": "using-a-custom-html-page-or-a-redirect"
    },
    {
      "level": "h2",
      "text": "Task 4: Configure the Bypass option (Enterprise plans only)",
      "id": "task-4:-configure-the-bypass-option-(enterprise-plans-only)"
    },
    {
      "level": "h2",
      "text": "Analytics",
      "id": "analytics"
    },
    {
      "level": "h2",
      "text": "Order of rule execution",
      "id": "order-of-rule-execution"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "IP address",
      "id": "ip-address"
    },
    {
      "level": "h2",
      "text": "IP range",
      "id": "ip-range"
    },
    {
      "level": "h2",
      "text": "Autonomous System Number (ASN)",
      "id": "autonomous-system-number-(asn)"
    },
    {
      "level": "h2",
      "text": "Country",
      "id": "country"
    },
    {
      "level": "h2",
      "text": "Add items to a list",
      "id": "add-items-to-a-list"
    },
    {
      "level": "h3",
      "text": "Add items to a list manually",
      "id": "add-items-to-a-list-manually"
    },
    {
      "level": "h3",
      "text": "Add items using a CSV file",
      "id": "add-items-using-a-csv-file"
    },
    {
      "level": "h2",
      "text": "Create a custom list",
      "id": "create-a-custom-list"
    },
    {
      "level": "h2",
      "text": "Use a custom list",
      "id": "use-a-custom-list"
    },
    {
      "level": "h2",
      "text": "Custom list types",
      "id": "custom-list-types"
    },
    {
      "level": "h3",
      "text": "Lists with IP addresses (IP lists)",
      "id": "lists-with-ip-addresses-(ip-lists)"
    },
    {
      "level": "h3",
      "text": "Lists with hostnames",
      "id": "lists-with-hostnames"
    },
    {
      "level": "h3",
      "text": "Lists with ASNs",
      "id": "lists-with-asns"
    },
    {
      "level": "h2",
      "text": "Get started",
      "id": "get-started"
    },
    {
      "level": "h2",
      "text": "Rate limiting for Lists API requests",
      "id": "rate-limiting-for-lists-api-requests"
    },
    {
      "level": "h2",
      "text": "Managed IP Lists",
      "id": "managed-ip-lists"
    },
    {
      "level": "h2",
      "text": "Use a list in the Expression Builder",
      "id": "use-a-list-in-the-expression-builder"
    },
    {
      "level": "h2",
      "text": "Use a list in the Expression Editor",
      "id": "use-a-list-in-the-expression-editor"
    },
    {
      "level": "h2",
      "text": "Background",
      "id": "background"
    },
    {
      "level": "h2",
      "text": "How it works",
      "id": "how-it-works"
    },
    {
      "level": "h2",
      "text": "Change Email Address Obfuscation setting",
      "id": "change-email-address-obfuscation-setting"
    },
    {
      "level": "h2",
      "text": "Prevent Cloudflare from obfuscating email",
      "id": "prevent-cloudflare-from-obfuscating-email"
    },
    {
      "level": "h2",
      "text": "Troubleshoot email obfuscation",
      "id": "troubleshoot-email-obfuscation"
    },
    {
      "level": "h2",
      "text": "Background",
      "id": "background"
    },
    {
      "level": "h2",
      "text": "Enable Hotlink Protection",
      "id": "enable-hotlink-protection"
    },
    {
      "level": "h3",
      "text": "SaaS providers using Cloudflare",
      "id": "saas-providers-using-cloudflare"
    },
    {
      "level": "h2",
      "text": "Allow hotlinking to specific images",
      "id": "allow-hotlinking-to-specific-images"
    },
    {
      "level": "h3",
      "text": "Configuration rules",
      "id": "configuration-rules"
    },
    {
      "level": "h3",
      "text": "hotlink-ok directory",
      "id": "hotlink-ok-directory"
    },
    {
      "level": "h2",
      "text": "Common Use Cases",
      "id": "common-use-cases"
    },
    {
      "level": "h3",
      "text": "A note on subrequests",
      "id": "a-note-on-subrequests"
    },
    {
      "level": "h2",
      "text": "Create Waiting Room Bypass Rules in the dashboard",
      "id": "create-waiting-room-bypass-rules-in-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Operators and grouping symbols",
      "id": "operators-and-grouping-symbols"
    },
    {
      "level": "h2",
      "text": "Manage Rules via the Waiting Room API",
      "id": "manage-rules-via-the-waiting-room-api"
    },
    {
      "level": "h3",
      "text": "API Examples",
      "id": "api-examples"
    },
    {
      "level": "h3",
      "text": "Other API options for managing bypass rules",
      "id": "other-api-options-for-managing-bypass-rules"
    },
    {
      "level": "h2",
      "text": "Smart contracts",
      "id": "smart-contracts"
    },
    {
      "level": "h2",
      "text": "Addressing",
      "id": "addressing"
    },
    {
      "level": "h2",
      "text": "Read and write content",
      "id": "read-and-write-content"
    },
    {
      "level": "h2",
      "text": "Connect your website to the gateway",
      "id": "connect-your-website-to-the-gateway"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Full nodes",
      "id": "full-nodes"
    },
    {
      "level": "h2",
      "text": "Light nodes",
      "id": "light-nodes"
    },
    {
      "level": "h2",
      "text": "Archive nodes",
      "id": "archive-nodes"
    },
    {
      "level": "h2",
      "text": "Nodes at Cloudflare",
      "id": "nodes-at-cloudflare"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "How is this different?",
      "id": "how-is-this-different?"
    },
    {
      "level": "h2",
      "text": "Migration",
      "id": "migration"
    },
    {
      "level": "h2",
      "text": "Trace methods",
      "id": "trace-methods"
    },
    {
      "level": "h3",
      "text": "trace\\_filter",
      "id": "trace\\_filter"
    },
    {
      "level": "h3",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Footnotes",
      "id": "footnotes"
    },
    {
      "level": "h2",
      "text": "What is it?",
      "id": "what-is-it?"
    },
    {
      "level": "h2",
      "text": "How is it used with Cloudflare?",
      "id": "how-is-it-used-with-cloudflare?"
    },
    {
      "level": "h2",
      "text": "Content Identifiers",
      "id": "content-identifiers"
    },
    {
      "level": "h2",
      "text": "Uploading to IPFS",
      "id": "uploading-to-ipfs"
    },
    {
      "level": "h2",
      "text": "Directories",
      "id": "directories"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "How is it used with Cloudflare?",
      "id": "how-is-it-used-with-cloudflare?"
    },
    {
      "level": "h2",
      "text": "Angular, React, Vue",
      "id": "angular,-react,-vue"
    },
    {
      "level": "h2",
      "text": "Gatsby",
      "id": "gatsby"
    },
    {
      "level": "h2",
      "text": "Jekyll",
      "id": "jekyll"
    },
    {
      "level": "h2",
      "text": "Generic",
      "id": "generic"
    },
    {
      "level": "h2",
      "text": "Monorepos",
      "id": "monorepos"
    },
    {
      "level": "h3",
      "text": "Getting Started",
      "id": "getting-started"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Wrangler Environments",
      "id": "wrangler-environments"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Change production branch",
      "id": "change-production-branch"
    },
    {
      "level": "h2",
      "text": "Configure non-production branch builds",
      "id": "configure-non-production-branch-builds"
    },
    {
      "level": "h2",
      "text": "About build cache",
      "id": "about-build-cache"
    },
    {
      "level": "h3",
      "text": "Package managers",
      "id": "package-managers"
    },
    {
      "level": "h3",
      "text": "Frameworks",
      "id": "frameworks"
    },
    {
      "level": "h3",
      "text": "Limits",
      "id": "limits"
    },
    {
      "level": "h2",
      "text": "Enable build cache",
      "id": "enable-build-cache"
    },
    {
      "level": "h2",
      "text": "Clear build cache",
      "id": "clear-build-cache"
    },
    {
      "level": "h2",
      "text": "Supported Tooling",
      "id": "supported-tooling"
    },
    {
      "level": "h3",
      "text": "Runtime",
      "id": "runtime"
    },
    {
      "level": "h3",
      "text": "Tools and languages",
      "id": "tools-and-languages"
    },
    {
      "level": "h2",
      "text": "Advanced Settings",
      "id": "advanced-settings"
    },
    {
      "level": "h3",
      "text": "Overriding Default Versions",
      "id": "overriding-default-versions"
    },
    {
      "level": "h3",
      "text": "Skip dependency install",
      "id": "skip-dependency-install"
    },
    {
      "level": "h2",
      "text": "Pre-installed Packages",
      "id": "pre-installed-packages"
    },
    {
      "level": "h2",
      "text": "Build Environment",
      "id": "build-environment"
    },
    {
      "level": "h2",
      "text": "Build Image Policy",
      "id": "build-image-policy"
    },
    {
      "level": "h3",
      "text": "Preinstalled Software Updates",
      "id": "preinstalled-software-updates"
    },
    {
      "level": "h3",
      "text": "Best Practices",
      "id": "best-practices"
    },
    {
      "level": "h2",
      "text": "Configure Paths",
      "id": "configure-paths"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Example 1",
      "id": "example-1"
    },
    {
      "level": "h3",
      "text": "Example 2",
      "id": "example-2"
    },
    {
      "level": "h3",
      "text": "Example 3",
      "id": "example-3"
    },
    {
      "level": "h2",
      "text": "Build settings",
      "id": "build-settings"
    },
    {
      "level": "h3",
      "text": "Overview",
      "id": "overview"
    },
    {
      "level": "h3",
      "text": "Deploy command",
      "id": "deploy-command"
    },
    {
      "level": "h3",
      "text": "Non-production branch deploy command",
      "id": "non-production-branch-deploy-command"
    },
    {
      "level": "h3",
      "text": "API token",
      "id": "api-token"
    },
    {
      "level": "h2",
      "text": "Framework support",
      "id": "framework-support"
    },
    {
      "level": "h2",
      "text": "Environment variables",
      "id": "environment-variables"
    },
    {
      "level": "h3",
      "text": "Default variables",
      "id": "default-variables"
    },
    {
      "level": "h2",
      "text": "Supported Git Providers",
      "id": "supported-git-providers"
    },
    {
      "level": "h2",
      "text": "Add a Git Integration",
      "id": "add-a-git-integration"
    },
    {
      "level": "h2",
      "text": "Manage a Git Integration",
      "id": "manage-a-git-integration"
    },
    {
      "level": "h2",
      "text": "Available Workers Builds events",
      "id": "available-workers-builds-events"
    },
    {
      "level": "h2",
      "text": "Definitions",
      "id": "definitions"
    },
    {
      "level": "h2",
      "text": "Known issues or limitations",
      "id": "known-issues-or-limitations"
    },
    {
      "level": "h3",
      "text": "Workers name requirement",
      "id": "workers-name-requirement"
    },
    {
      "level": "h3",
      "text": "Missing wrangler.toml",
      "id": "missing-wrangler.toml"
    },
    {
      "level": "h3",
      "text": "Incorrect account\\_id",
      "id": "incorrect-account\\_id"
    },
    {
      "level": "h3",
      "text": "Stale API token",
      "id": "stale-api-token"
    },
    {
      "level": "h3",
      "text": "Build timed out",
      "id": "build-timed-out"
    },
    {
      "level": "h3",
      "text": "Git integration issues",
      "id": "git-integration-issues"
    },
    {
      "level": "h2",
      "text": "For additional support",
      "id": "for-additional-support"
    },
    {
      "level": "h2",
      "text": "1. Authentication",
      "id": "1.-authentication"
    },
    {
      "level": "h3",
      "text": "Cloudflare account ID",
      "id": "cloudflare-account-id"
    },
    {
      "level": "h3",
      "text": "API token",
      "id": "api-token"
    },
    {
      "level": "h2",
      "text": "2. Set up CI/CD",
      "id": "2.-set-up-ci/cd"
    },
    {
      "level": "h3",
      "text": "GitHub Actions",
      "id": "github-actions"
    },
    {
      "level": "h2",
      "text": "1. Authentication",
      "id": "1.-authentication"
    },
    {
      "level": "h3",
      "text": "Cloudflare account ID",
      "id": "cloudflare-account-id"
    },
    {
      "level": "h3",
      "text": "API token",
      "id": "api-token"
    },
    {
      "level": "h2",
      "text": "2. Set up CI",
      "id": "2.-set-up-ci"
    },
    {
      "level": "h3",
      "text": "GitLab Pipelines",
      "id": "gitlab-pipelines"
    },
    {
      "level": "h2",
      "text": "Authentication",
      "id": "authentication"
    },
    {
      "level": "h2",
      "text": "Tips",
      "id": "tips"
    },
    {
      "level": "h2",
      "text": "Authentication",
      "id": "authentication"
    },
    {
      "level": "h2",
      "text": "Background",
      "id": "background"
    },
    {
      "level": "h2",
      "text": "Add a Custom Domain",
      "id": "add-a-custom-domain"
    },
    {
      "level": "h3",
      "text": "Set up a Custom Domain in the dashboard",
      "id": "set-up-a-custom-domain-in-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Set up a Custom Domain in your Wrangler configuration file",
      "id": "set-up-a-custom-domain-in-your-wrangler-configuration-file"
    },
    {
      "level": "h2",
      "text": "Worker to Worker communication",
      "id": "worker-to-worker-communication"
    },
    {
      "level": "h2",
      "text": "Request matching behaviour",
      "id": "request-matching-behaviour"
    },
    {
      "level": "h2",
      "text": "Interaction with Routes",
      "id": "interaction-with-routes"
    },
    {
      "level": "h2",
      "text": "Certificates",
      "id": "certificates"
    },
    {
      "level": "h2",
      "text": "Migrate from Routes",
      "id": "migrate-from-routes"
    },
    {
      "level": "h3",
      "text": "Migrate from Routes via the dashboard",
      "id": "migrate-from-routes-via-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Migrate from Routes via Wrangler",
      "id": "migrate-from-routes-via-wrangler"
    },
    {
      "level": "h2",
      "text": "Background",
      "id": "background"
    },
    {
      "level": "h2",
      "text": "Set up a route",
      "id": "set-up-a-route"
    },
    {
      "level": "h3",
      "text": "Set up a route in the dashboard",
      "id": "set-up-a-route-in-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Set up a route in the Wrangler configuration file",
      "id": "set-up-a-route-in-the-wrangler-configuration-file"
    },
    {
      "level": "h2",
      "text": "Matching behavior",
      "id": "matching-behavior"
    },
    {
      "level": "h2",
      "text": "Validity",
      "id": "validity"
    },
    {
      "level": "h2",
      "text": "Configure `workers.dev`",
      "id": "configure-`workers.dev`"
    },
    {
      "level": "h2",
      "text": "Manage access to `workers.dev`",
      "id": "manage-access-to-`workers.dev`"
    },
    {
      "level": "h2",
      "text": "Disabling `workers.dev`",
      "id": "disabling-`workers.dev`"
    },
    {
      "level": "h3",
      "text": "Disabling `workers.dev` in the dashboard",
      "id": "disabling-`workers.dev`-in-the-dashboard"
    },
    {
      "level": "h3",
      "text": "Disabling `workers.dev` in the Wrangler configuration file",
      "id": "disabling-`workers.dev`-in-the-wrangler-configuration-file"
    },
    {
      "level": "h2",
      "text": "Limitations",
      "id": "limitations"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Wrangler configuration file",
      "id": "wrangler-configuration-file"
    },
    {
      "level": "h2",
      "text": "Storage limits",
      "id": "storage-limits"
    },
    {
      "level": "h2",
      "text": "Ignoring subsets of static assets",
      "id": "ignoring-subsets-of-static-assets"
    },
    {
      "level": "h3",
      "text": "Exclusively including files/directories",
      "id": "exclusively-including-files/directories"
    },
    {
      "level": "h3",
      "text": "Excluding files/directories",
      "id": "excluding-files/directories"
    },
    {
      "level": "h3",
      "text": "Include > exclude",
      "id": "include->-exclude"
    },
    {
      "level": "h3",
      "text": "Default ignored entries",
      "id": "default-ignored-entries"
    },
    {
      "level": "h2",
      "text": "Getting started",
      "id": "getting-started"
    },
    {
      "level": "h2",
      "text": "Getting started",
      "id": "getting-started"
    },
    {
      "level": "h2",
      "text": "Project layout",
      "id": "project-layout"
    },
    {
      "level": "h2",
      "text": "Customize the `wrangler.jsonc` file:",
      "id": "customize-the-`wrangler.jsonc`-file:"
    },
    {
      "level": "h2",
      "text": "Getting started",
      "id": "getting-started"
    },
    {
      "level": "h2",
      "text": "Use gradual deployments",
      "id": "use-gradual-deployments"
    },
    {
      "level": "h3",
      "text": "Via Wrangler",
      "id": "via-wrangler"
    },
    {
      "level": "h3",
      "text": "Via the Cloudflare dashboard",
      "id": "via-the-cloudflare-dashboard"
    },
    {
      "level": "h2",
      "text": "Gradual deployments with static assets",
      "id": "gradual-deployments-with-static-assets"
    },
    {
      "level": "h2",
      "text": "Version affinity",
      "id": "version-affinity"
    },
    {
      "level": "h3",
      "text": "Setting `Cloudflare-Workers-Version-Key` using Ruleset Engine",
      "id": "setting-`cloudflare-workers-version-key`-using-ruleset-engine"
    },
    {
      "level": "h2",
      "text": "Version overrides",
      "id": "version-overrides"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h2",
      "text": "Gradual deployments for Durable Objects",
      "id": "gradual-deployments-for-durable-objects"
    },
    {
      "level": "h3",
      "text": "Example",
      "id": "example"
    },
    {
      "level": "h3",
      "text": "Migrations",
      "id": "migrations"
    },
    {
      "level": "h2",
      "text": "Observability",
      "id": "observability"
    },
    {
      "level": "h3",
      "text": "Logpush",
      "id": "logpush"
    },
    {
      "level": "h3",
      "text": "Runtime binding",
      "id": "runtime-binding"
    },
    {
      "level": "h2",
      "text": "Limits",
      "id": "limits"
    },
    {
      "level": "h3",
      "text": "Deployments limit",
      "id": "deployments-limit"
    },
    {
      "level": "h2",
      "text": "Via Wrangler",
      "id": "via-wrangler"
    },
    {
      "level": "h2",
      "text": "Via the Cloudflare Dashboard",
      "id": "via-the-cloudflare-dashboard"
    },
    {
      "level": "h2",
      "text": "Limits",
      "id": "limits"
    },
    {
      "level": "h3",
      "text": "Rollbacks limit",
      "id": "rollbacks-limit"
    },
    {
      "level": "h3",
      "text": "Bindings",
      "id": "bindings"
    },
    {
      "level": "h2",
      "text": "Set up an integration with Turso",
      "id": "set-up-an-integration-with-turso"
    },
    {
      "level": "h2",
      "text": "Upstash for Redis",
      "id": "upstash-for-redis"
    },
    {
      "level": "h2",
      "text": "Upstash QStash",
      "id": "upstash-qstash"
    },
    {
      "level": "h2",
      "text": "1. Allow Hyperdrive access",
      "id": "1.-allow-hyperdrive-access"
    },
    {
      "level": "h3",
      "text": "Xata dashboard",
      "id": "xata-dashboard"
    },
    {
      "level": "h2",
      "text": "2. Create a database configuration",
      "id": "2.-create-a-database-configuration"
    },
    {
      "level": "h2",
      "text": "3. Use Hyperdrive from your Worker",
      "id": "3.-use-hyperdrive-from-your-worker"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "What is Astro?",
      "id": "what-is-astro?"
    },
    {
      "level": "h2",
      "text": "Deploy a new Astro project on Workers",
      "id": "deploy-a-new-astro-project-on-workers"
    },
    {
      "level": "h2",
      "text": "Deploy an existing Astro project on Workers",
      "id": "deploy-an-existing-astro-project-on-workers"
    },
    {
      "level": "h3",
      "text": "If you have a static site",
      "id": "if-you-have-a-static-site"
    },
    {
      "level": "h3",
      "text": "If your site uses on demand rendering",
      "id": "if-your-site-uses-on-demand-rendering"
    },
    {
      "level": "h2",
      "text": "Bindings",
      "id": "bindings"
    },
    {
      "level": "h2",
      "text": "Astro's build configuration",
      "id": "astro's-build-configuration"
    },
    {
      "level": "h2",
      "text": "What is Next.js?",
      "id": "what-is-next.js?"
    },
    {
      "level": "h2",
      "text": "Next.js supported features",
      "id": "next.js-supported-features"
    },
    {
      "level": "h2",
      "text": "Deploy a new Next.js project on Workers",
      "id": "deploy-a-new-next.js-project-on-workers"
    },
    {
      "level": "h2",
      "text": "Deploy an existing Next.js project on Workers",
      "id": "deploy-an-existing-next.js-project-on-workers"
    },
    {
      "level": "h2",
      "text": "What is React?",
      "id": "what-is-react?"
    },
    {
      "level": "h2",
      "text": "Creating a full-stack app with React",
      "id": "creating-a-full-stack-app-with-react"
    },
    {
      "level": "h2",
      "text": "Asset Routing",
      "id": "asset-routing"
    },
    {
      "level": "h2",
      "text": "Use bindings with React",
      "id": "use-bindings-with-react"
    },
    {
      "level": "h2",
      "text": "What is React Router?",
      "id": "what-is-react-router?"
    },
    {
      "level": "h2",
      "text": "Creating a full-stack React Router app",
      "id": "creating-a-full-stack-react-router-app"
    },
    {
      "level": "h2",
      "text": "Use bindings with React Router",
      "id": "use-bindings-with-react-router"
    },
    {
      "level": "h2",
      "text": "Deploy a new RedwoodSDK application on Workers",
      "id": "deploy-a-new-redwoodsdk-application-on-workers"
    },
    {
      "level": "h2",
      "text": "Creating a new TanStack Start application",
      "id": "creating-a-new-tanstack-start-application"
    },
    {
      "level": "h2",
      "text": "Configuring an existing TanStack Start application",
      "id": "configuring-an-existing-tanstack-start-application"
    },
    {
      "level": "h2",
      "text": "Deploy your Project",
      "id": "deploy-your-project"
    },
    {
      "level": "h2",
      "text": "Bindings",
      "id": "bindings"
    },
    {
      "level": "h2",
      "text": "Static Prerendering",
      "id": "static-prerendering"
    },
    {
      "level": "h3",
      "text": "Prerendering in CI environments",
      "id": "prerendering-in-ci-environments"
    },
    {
      "level": "h2",
      "text": "1. Set up a new project",
      "id": "1.-set-up-a-new-project"
    },
    {
      "level": "h2",
      "text": "2. Develop locally",
      "id": "2.-develop-locally"
    },
    {
      "level": "h2",
      "text": "3. Deploy your Project",
      "id": "3.-deploy-your-project"
    },
    {
      "level": "h2",
      "text": "Bindings",
      "id": "bindings"
    },
    {
      "level": "h2",
      "text": "1. Set up a new project",
      "id": "1.-set-up-a-new-project"
    },
    {
      "level": "h2",
      "text": "**Develop locally with the [Cloudflare Vite plugin](https://developers.cloudflare.com/workers/vite-plugin/)**",
      "id": "**develop-locally-with-the-[cloudflare-vite-plugin](https://developers.cloudflare.com/workers/vite-plugin/)**"
    },
    {
      "level": "h2",
      "text": "3. Deploy your project",
      "id": "3.-deploy-your-project"
    },
    {
      "level": "h2",
      "text": "Asset Routing",
      "id": "asset-routing"
    },
    {
      "level": "h2",
      "text": "Use bindings with Vue",
      "id": "use-bindings-with-vue"
    },
    {
      "level": "h2",
      "text": "Fetch Handler",
      "id": "fetch-handler"
    },
    {
      "level": "h2",
      "text": "The `Request` Interface",
      "id": "the-`request`-interface"
    },
    {
      "level": "h2",
      "text": "The `env` Attribute",
      "id": "the-`env`-attribute"
    },
    {
      "level": "h2",
      "text": "Modules",
      "id": "modules"
    },
    {
      "level": "h2",
      "text": "Types and Autocompletion",
      "id": "types-and-autocompletion"
    },
    {
      "level": "h2",
      "text": "Upgrading `pywrangler`",
      "id": "upgrading-`pywrangler`"
    },
    {
      "level": "h2",
      "text": "Next Up",
      "id": "next-up"
    },
    {
      "level": "h2",
      "text": "Modules in your Worker",
      "id": "modules-in-your-worker"
    },
    {
      "level": "h2",
      "text": "Parse an incoming request URL",
      "id": "parse-an-incoming-request-url"
    },
    {
      "level": "h2",
      "text": "Parse JSON from the incoming request",
      "id": "parse-json-from-the-incoming-request"
    },
    {
      "level": "h2",
      "text": "Read bundled asset files in your Worker",
      "id": "read-bundled-asset-files-in-your-worker"
    },
    {
      "level": "h2",
      "text": "Emit logs from your Python Worker",
      "id": "emit-logs-from-your-python-worker"
    }
  ],
  "url": "llms-txt#output-the-sitekeys-for-use-in-your-application",
  "links": []
}