{
  "title": "zephyr-7b-beta-awq Beta",
  "content": "Text Generation • thebloke\n\n@hf/thebloke/zephyr-7b-beta-awq\n\nZephyr 7B Beta AWQ is an efficient, accurate and blazing-fast low-bit weight quantized Zephyr model variant.\n\n| Model Info | |\n| - | - |\n| Deprecated | 10/1/2025 |\n| Context Window[](https://developers.cloudflare.com/workers-ai/glossary/) | 4,096 tokens |\n| More information | [link](https://huggingface.co/TheBloke/zephyr-7B-beta-AWQ) |\n| Beta | Yes |\n\nTry out this model with Workers AI LLM Playground. It does not require any setup or authentication and an instant way to preview and test a model directly in the browser.\n\n[Launch the LLM Playground](https://playground.ai.cloudflare.com/?model=@hf/thebloke/zephyr-7b-beta-awq)\n\nOpenAI compatible endpoints\n\nWorkers AI also supports OpenAI compatible API endpoints for `/v1/chat/completions` and `/v1/embeddings`. For more details, refer to [Configurations ](https://developers.cloudflare.com/workers-ai/configuration/open-ai-compatibility/).\n\n\\* indicates a required field\n\n* `prompt` string required min 1\n\nThe input text prompt for the model to generate a response.\n\nName of the LoRA (Low-Rank Adaptation) model to fine-tune the base model.\n\n* `response_format` object\n\nIf true, a chat template is not applied and you must adhere to the specific model's expected formatting.\n\nIf true, the response will be streamed back incrementally using SSE, Server Sent Events.\n\n* `max_tokens` integer default 256\n\nThe maximum number of tokens to generate in the response.\n\n* `temperature` number default 0.6 min 0 max 5\n\nControls the randomness of the output; higher values produce more random results.\n\n* `top_p` number min 0.001 max 1\n\nAdjusts the creativity of the AI's responses by controlling how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\n\n* `top_k` integer min 1 max 50\n\nLimits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\n\n* `seed` integer min 1 max 9999999999\n\nRandom seed for reproducibility of the generation.\n\n* `repetition_penalty` number min 0 max 2\n\nPenalty for repeated tokens; higher values discourage repetition.\n\n* `frequency_penalty` number min -2 max 2\n\nDecreases the likelihood of the model repeating the same lines verbatim.\n\n* `presence_penalty` number min -2 max 2\n\nIncreases the likelihood of the model introducing new topics.\n\n* `messages` array required\n\nAn array of message objects representing the conversation history.\n\n* `role` string required\n\nThe role of the message sender (e.g., 'user', 'assistant', 'system', 'tool').\n\n* `content` string required\n\nThe content of the message as a string.\n\n* `name` string required\n\n* `code` string required\n\nA list of tools available for the assistant to use.\n\n* `name` string required\n\nThe name of the tool. More descriptive the better.\n\n* `description` string required\n\nA brief description of what the tool does.\n\n* `parameters` object required\n\nSchema defining the parameters accepted by the tool.\n\n* `type` string required\n\nThe type of the parameters object (usually 'object').\n\nList of required parameter names.\n\n* `properties` object required\n\nDefinitions of each parameter.\n\n* `additionalProperties` object\n\n* `type` string required\n\nThe data type of the parameter.\n\n* `description` string required\n\nA description of the expected parameter.\n\n* `type` string required\n\nSpecifies the type of tool (e.g., 'function').\n\n* `function` object required\n\nDetails of the function tool.\n\n* `name` string required\n\nThe name of the function.\n\n* `description` string required\n\nA brief description of what the function does.\n\n* `parameters` object required\n\nSchema defining the parameters accepted by the function.\n\n* `type` string required\n\nThe type of the parameters object (usually 'object').\n\nList of required parameter names.\n\n* `properties` object required\n\nDefinitions of each parameter.\n\n* `additionalProperties` object\n\n* `type` string required\n\nThe data type of the parameter.\n\n* `description` string required\n\nA description of the expected parameter.\n\n* `response_format` object\n\nIf true, a chat template is not applied and you must adhere to the specific model's expected formatting.\n\nIf true, the response will be streamed back incrementally using SSE, Server Sent Events.\n\n* `max_tokens` integer default 256\n\nThe maximum number of tokens to generate in the response.\n\n* `temperature` number default 0.6 min 0 max 5\n\nControls the randomness of the output; higher values produce more random results.\n\n* `top_p` number min 0.001 max 1\n\nAdjusts the creativity of the AI's responses by controlling how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\n\n* `top_k` integer min 1 max 50\n\nLimits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\n\n* `seed` integer min 1 max 9999999999\n\nRandom seed for reproducibility of the generation.\n\n* `repetition_penalty` number min 0 max 2\n\nPenalty for repeated tokens; higher values discourage repetition.\n\n* `frequency_penalty` number min -2 max 2\n\nDecreases the likelihood of the model repeating the same lines verbatim.\n\n* `presence_penalty` number min -2 max 2\n\nIncreases the likelihood of the model introducing new topics.\n\n* `response` string required\n\nThe generated text response from the model\n\nUsage statistics for the inference request\n\n* `prompt_tokens` number 0\n\nTotal number of tokens in input\n\n* `completion_tokens` number 0\n\nTotal number of tokens in output\n\n* `total_tokens` number 0\n\nTotal number of input and output tokens\n\nAn array of tool calls requests made during the response generation\n\nThe arguments passed to be passed to the tool call request\n\nThe name of the tool to be called\n\nThe following schemas are based on JSON Schema\n\n<page>\n---\ntitle: Cloudflare Tunnel · Cloudflare Workers VPC\ndescription: Cloudflare Tunnel creates secure connections from your\n  infrastructure to Cloudflare's global network, providing the network\n  connectivity that allows Workers to access your private resources.\nlastUpdated: 2025-11-14T21:25:44.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers-vpc/configuration/tunnel/\n  md: https://developers.cloudflare.com/workers-vpc/configuration/tunnel/index.md\n---\n\nCloudflare Tunnel creates secure connections from your infrastructure to Cloudflare's global network, providing the network connectivity that allows Workers to access your private resources.\n\nWhen you create a VPC Service, you specify a tunnel ID and target service. Workers VPC then routes requests from your Worker to the specified tunnel, which establishes a connection to the specified hostname or IP address, such that the target service receives the request and returns a response back to your Worker.\n\nTo allow members to create VPC Services that represent a target service reachable via a tunnel, you must assign them the **Connectivity Directory Admin** role. Members must possess **Connectivity Directory Bind** role to bind to existing VPC Services from worker.\n\nThe tunnel maintains persistent connections to Cloudflare, eliminating the need for inbound firewall rules or public IP addresses.\n\nThis section provides tunnel configuration specific to Workers VPC use cases. For comprehensive tunnel documentation including monitoring and advanced configurations, refer to the [full Cloudflare Tunnel documentation](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/).\n\n## Create and run tunnel (`cloudflared`)\n\nCloudflare Tunnel requires the installation of a lightweight and highly scalable server-side daemon, `cloudflared`, to connect your infrastructure to Cloudflare.\n\nVersion and Configuration\n\nEnsure you are running `cloudflared` version 2025.7.0 or later (latest version recommended) to ensure proper DNS resolution and connectivity. Older versions are not supported.\n\nWorkers VPC also requires Cloudflare Tunnel to connect using the [QUIC transport protocol](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/cloudflared-parameters/run-parameters/#protocol) using `auto` or `quic`. Ensure outbound UDP traffic on port 7844 is allowed through your firewall for QUIC connections.\n\nCloudflare Tunnels can be created one of two ways:\n\n1. **Remotely-managed tunnels (recommended):** Remotely-managed configurations are stored on Cloudflare, allowing you to manage the tunnel from any machine using the dashboard, API, or Terraform.\n2. **Locally-managed tunnels:** A locally-managed tunnel is created by running `cloudflared tunnel create <NAME>` on the command line. Tunnel configuration is stored in your local cloudflared directory.\n\nFor Workers VPC, we recommend creating a remotely-managed tunnel through the dashboard. Follow the [Tunnels for Workers VPC dashboard setup guide](https://developers.cloudflare.com/workers-vpc/get-started/) to create your tunnel with provided installation commands shown in the dashboard.\n\nFor locally-managed tunnels, refer to the [`cloudflared` locally-managed tunnels](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/) guide. For manual installation, refer to the [`cloudflared` downloads page](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/downloads/) for platform-specific installation instructions.\n\nCloudflare Tunnels can either be configured for usage with [Cloudflare Zero Trust](https://developers.cloudflare.com/cloudflare-one/) or [Workers VPC](https://developers.cloudflare.com/workers-vpc/).\n\nUse Tunnels with Zero Trust when you are exposing internal applications securely to your employees with Cloudflare Access and hostnames.\n\nUse Tunnels with Workers VPC when you want to access private APIs, private databases, internal services or other HTTP services within your cloud or on-premise private network from Workers.\n\nThe same `cloudflared` instance can be used to cover both Zero Trust and Workers VPC use cases simultaneously.\n\n[Ingress configurations](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/do-more-with-tunnels/local-management/configuration-file/) for locally-managed tunnels are only relevant when using tunnels to expose services to the public internet, and are not required for Workers VPC as routing is handled by the VPC Service configuration.\n\n## Cloud platform setup guides\n\nFor platform-specific tunnel deployment instructions for production workloads:\n\n* [AWS](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/aws/) - Deploy tunnels in Amazon Web Services\n* [Azure](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/azure/) - Deploy tunnels in Microsoft Azure\n* [Google Cloud](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/google-cloud-platform/) - Deploy tunnels in Google Cloud Platform\n* [Kubernetes](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/kubernetes/) - Deploy tunnels in Kubernetes clusters\n* [Terraform](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/deployment-guides/terraform/) - Deploy tunnels using Infrastructure as Code\n\nRefer to the full Cloudflare Tunnel documentation on [how to setup Tunnels for high availability and failover with replicas](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/configure-tunnels/tunnel-availability/).\n\nWe do not recommend using `cloudflared` in autoscaling setups because downscaling (removing replicas) will break existing user connections to that replica. Additionally, `cloudflared` does not load balance across replicas; replicas are strictly for high availability and requests are routed to the nearest replica.\n\n* Configure [VPC Services](https://developers.cloudflare.com/workers-vpc/configuration/vpc-services/) to connect your tunnels to Workers\n* Review [hardware requirements](https://developers.cloudflare.com/workers-vpc/configuration/tunnel/hardware-requirements/) for capacity planning\n* Review the [complete Cloudflare Tunnel documentation](https://developers.cloudflare.com/cloudflare-one/networks/connectors/cloudflare-tunnel/) for advanced features\n\n<page>\n---\ntitle: VPC Services · Cloudflare Workers VPC\ndescription: VPC Services are the core building block of Workers VPC. They\n  represent specific resources in your private network that Workers can access\n  through Cloudflare Tunnel.\nlastUpdated: 2025-11-13T14:53:42.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers-vpc/configuration/vpc-services/\n  md: https://developers.cloudflare.com/workers-vpc/configuration/vpc-services/index.md\n---\n\nVPC Services are the core building block of Workers VPC. They represent specific resources in your private network that Workers can access through Cloudflare Tunnel.\n\nYou can use bindings to connect to VPC Services from Workers. Every request made to a VPC Service using its `fetch` function will be securely routed to the configured service in the private network.\n\nVPC Services enforce that requests are routed to their intended service without exposing the entire network, securing your workloads and preventing server-side request forgery (SSRF).\n\nMembers must possess **Connectivity Directory Bind** role to bind to existing VPC Services from Workers. Creating VPC Services requires members to possess the **Connectivity Directory Admin** role.\n\nWorkers VPC is currently in beta. Features and APIs may change before general availability. While in beta, Workers VPC is available for free to all Workers plans.\n\n## VPC Service configuration\n\nA VPC Service consists of:\n\n* **Type**: Currently only `http` is supported (support for `tcp` coming soon)\n* **Tunnel ID**: The Cloudflare Tunnel that provides network connectivity\n* **Hostname or IPv4/IPv6 addresses**: The hostname, or IPv4 and/or IPv6 addresses to use to route to your service from the tunnel in your private network\n* **Ports**: HTTP and/or HTTPS port configuration (optional, defaults to 80/443)\n* **Resolver IPs**: Optionally, a specific resolver IP can be provided -- when not provided, `cloudflared` will direct DNS traffic to the currently configured default system resolver.\n\nRequests are encrypted in flight until they reach your network via a tunnel, regardless of the scheme used in the URL provided to `fetch`. If the `http` scheme is used, a plaintext connection is established to the service from the tunnel.\n\nThe `https` scheme can be used for an encrypted connection within your network, between the tunnel and your service. When the `https` scheme is specified, a hostname provided to the `fetch()` operation is utilized as the Server Name Indication (SNI) value.\n\nVPC Services default to allowing both `http` and `https` schemes to be used. You can provide values for only one of `http_port` or `https_port` to enforce the use of a particular scheme.\n\nWhen Workers VPC is unable to establish a connection to your service, `fetch()` will throw an exception.\n\nThe [VPC Service configuration](https://developers.cloudflare.com/workers-vpc/configuration/vpc-services/#vpc-service-configuration) host and port(s) will always be used to connect and route requests to your services, even if a different host or port is present in the URL provided to the `fetch()` operation in the Worker code.\n\nThe host provided in the `fetch()` operation is not used to route requests, and instead only populates the `Host` field for a HTTP request, or `Host` and the Server Name Indication (SNI) value presented to your service for a HTTPS request.\n\nThe port provided in the `fetch()` operation is ignored — the port specified in the VPC Service configuration for the provided scheme will be used.\n\n## Configuration example\n\nThe following is an example of a VPC Service for a service using custom HTTP and HTTPS ports, and both IPv4 and IPv6 addresses. These configurations represent the expected contract of the [REST API for creating a VPC Service](https://developers.cloudflare.com/api/resources/connectivity/subresources/directory/subresources/services/), a type of service within the broader connectivity directory.\n\nThe following is an example of a VPC Service for a service using custom HTTP and HTTPS ports as well, using a hostname. Note that since we are using a hostname, we must provide our service with a `resolver_network` that optionally has `resolver_ips`.\n\n## Workers binding configuration\n\nOnce you have created a VPC Service, you can bind it to your Worker:\n\nYou can have multiple VPC service bindings:\n\n* Set up [Cloudflare Tunnel](https://developers.cloudflare.com/workers-vpc/configuration/tunnel/) for your environment\n* Learn about the [Service Binding API](https://developers.cloudflare.com/workers-vpc/api/)\n* Refer to [examples](https://developers.cloudflare.com/workers-vpc/examples/) of common use cases\n\n<page>\n---\ntitle: Access a private API or website · Cloudflare Workers VPC\ndescription: This example demonstrates how to access a private REST API that is\n  not exposed to the public internet. In this guide, we will configure a VPC\n  Service for an internal API, create a Worker that makes requests to that API,\n  and deploy the Worker to validate our changes.\nlastUpdated: 2025-11-12T17:52:51.000Z\nchatbotDeprioritize: false\nsource_url:\n  html: https://developers.cloudflare.com/workers-vpc/examples/private-api/\n  md: https://developers.cloudflare.com/workers-vpc/examples/private-api/index.md\n---\n\nThis example demonstrates how to access a private REST API that is not exposed to the public internet. In this guide, we will configure a VPC Service for an internal API, create a Worker that makes requests to that API, and deploy the Worker to validate our changes.\n\n* A virtual machine/EC2 instance running in your VPC/virtual network\n* A private API or website running in your VPC/virtual network with security rules allowing access to the virtual machine that will be running `cloudflared`\n* Workers account with Workers VPC access\n\n## 1. Set up Cloudflare Tunnel\n\nA Cloudflare Tunnel creates a secure connection from your private network to Cloudflare. This tunnel will allow Workers to securely access your private resources.\n\n1. Navigate to the [Workers VPC dashboard](https://dash.cloudflare.com/?to=/:account/workers/vpc/tunnels) and select the **Tunnels** tab.\n\n2. Select **Create** to create a new tunnel.\n\n3. Enter a name for your tunnel (for example, `private-api-tunnel`) and select **Save tunnel**.\n\n4. Choose your operating system and architecture. The dashboard will provide specific installation instructions for your environment.\n\n5. Follow the provided commands to download and install `cloudflared` on your VM, and execute the service installation command with your unique token.\n\nThe dashboard will confirm when your tunnel is successfully connected. Note the tunnel ID for the next step.\n\n## 2. Create the Workers VPC Service\n\nFirst, create a Workers VPC Service for your internal API:\n\nYou can also create a VPC Service for a service using its hostname:\n\nNote the service ID returned for the next step.\n\n## 3. Configure your Worker\n\nUpdate your `wrangler.toml`:\n\n## 4. Implement the Worker\n\nIn your Workers code, use the VPC Service binding in order to send requests to the service:\n\nThis guide demonstrates how you could create a simple proxy in your Workers. However, you could use VPC Services to fetch APIs directly and manipulate the responses to enable you to build more full-stack and backend functionality on Workers.\n\n## 5. Deploy and test\n\nNow, you can deploy and test your Worker that you have created:",
  "code_samples": [
    {
      "code": "export interface Env {\n  AI: Ai;\n}\n\n\nexport default {\n  async fetch(request, env): Promise<Response> {\n\n\n    const messages = [\n      { role: \"system\", content: \"You are a friendly assistant\" },\n      {\n        role: \"user\",\n        content: \"What is the origin of the phrase Hello, World\",\n      },\n    ];\n\n\n    const stream = await env.AI.run(\"@hf/thebloke/zephyr-7b-beta-awq\", {\n      messages,\n      stream: true,\n    });\n\n\n    return new Response(stream, {\n      headers: { \"content-type\": \"text/event-stream\" },\n    });\n  },\n} satisfies ExportedHandler<Env>;",
      "language": "ts"
    },
    {
      "code": "export interface Env {\n  AI: Ai;\n}\n\n\nexport default {\n  async fetch(request, env): Promise<Response> {\n\n\n    const messages = [\n      { role: \"system\", content: \"You are a friendly assistant\" },\n      {\n        role: \"user\",\n        content: \"What is the origin of the phrase Hello, World\",\n      },\n    ];\n    const response = await env.AI.run(\"@hf/thebloke/zephyr-7b-beta-awq\", { messages });\n\n\n    return Response.json(response);\n  },\n} satisfies ExportedHandler<Env>;",
      "language": "ts"
    },
    {
      "code": "import os\nimport requests\n\n\nACCOUNT_ID = \"your-account-id\"\nAUTH_TOKEN = os.environ.get(\"CLOUDFLARE_AUTH_TOKEN\")\n\n\nprompt = \"Tell me all about PEP-8\"\nresponse = requests.post(\n  f\"https://api.cloudflare.com/client/v4/accounts/{ACCOUNT_ID}/ai/run/@hf/thebloke/zephyr-7b-beta-awq\",\n    headers={\"Authorization\": f\"Bearer {AUTH_TOKEN}\"},\n    json={\n      \"messages\": [\n        {\"role\": \"system\", \"content\": \"You are a friendly assistant\"},\n        {\"role\": \"user\", \"content\": prompt}\n      ]\n    }\n)\nresult = response.json()\nprint(result)",
      "language": "py"
    },
    {
      "code": "curl https://api.cloudflare.com/client/v4/accounts/$CLOUDFLARE_ACCOUNT_ID/ai/run/@hf/thebloke/zephyr-7b-beta-awq \\\n  -X POST \\\n  -H \"Authorization: Bearer $CLOUDFLARE_AUTH_TOKEN\" \\\n  -d '{ \"messages\": [{ \"role\": \"system\", \"content\": \"You are a friendly assistant\" }, { \"role\": \"user\", \"content\": \"Why is pizza so good\" }]}'",
      "language": "sh"
    },
    {
      "code": "{\n      \"type\": \"object\",\n      \"oneOf\": [\n          {\n              \"title\": \"Prompt\",\n              \"properties\": {\n                  \"prompt\": {\n                      \"type\": \"string\",\n                      \"minLength\": 1,\n                      \"description\": \"The input text prompt for the model to generate a response.\"\n                  },\n                  \"lora\": {\n                      \"type\": \"string\",\n                      \"description\": \"Name of the LoRA (Low-Rank Adaptation) model to fine-tune the base model.\"\n                  },\n                  \"response_format\": {\n                      \"title\": \"JSON Mode\",\n                      \"type\": \"object\",\n                      \"properties\": {\n                          \"type\": {\n                              \"type\": \"string\",\n                              \"enum\": [\n                                  \"json_object\",\n                                  \"json_schema\"\n                              ]\n                          },\n                          \"json_schema\": {}\n                      }\n                  },\n                  \"raw\": {\n                      \"type\": \"boolean\",\n                      \"default\": false,\n                      \"description\": \"If true, a chat template is not applied and you must adhere to the specific model's expected formatting.\"\n                  },\n                  \"stream\": {\n                      \"type\": \"boolean\",\n                      \"default\": false,\n                      \"description\": \"If true, the response will be streamed back incrementally using SSE, Server Sent Events.\"\n                  },\n                  \"max_tokens\": {\n                      \"type\": \"integer\",\n                      \"default\": 256,\n                      \"description\": \"The maximum number of tokens to generate in the response.\"\n                  },\n                  \"temperature\": {\n                      \"type\": \"number\",\n                      \"default\": 0.6,\n                      \"minimum\": 0,\n                      \"maximum\": 5,\n                      \"description\": \"Controls the randomness of the output; higher values produce more random results.\"\n                  },\n                  \"top_p\": {\n                      \"type\": \"number\",\n                      \"minimum\": 0.001,\n                      \"maximum\": 1,\n                      \"description\": \"Adjusts the creativity of the AI's responses by controlling how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\"\n                  },\n                  \"top_k\": {\n                      \"type\": \"integer\",\n                      \"minimum\": 1,\n                      \"maximum\": 50,\n                      \"description\": \"Limits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\"\n                  },\n                  \"seed\": {\n                      \"type\": \"integer\",\n                      \"minimum\": 1,\n                      \"maximum\": 9999999999,\n                      \"description\": \"Random seed for reproducibility of the generation.\"\n                  },\n                  \"repetition_penalty\": {\n                      \"type\": \"number\",\n                      \"minimum\": 0,\n                      \"maximum\": 2,\n                      \"description\": \"Penalty for repeated tokens; higher values discourage repetition.\"\n                  },\n                  \"frequency_penalty\": {\n                      \"type\": \"number\",\n                      \"minimum\": -2,\n                      \"maximum\": 2,\n                      \"description\": \"Decreases the likelihood of the model repeating the same lines verbatim.\"\n                  },\n                  \"presence_penalty\": {\n                      \"type\": \"number\",\n                      \"minimum\": -2,\n                      \"maximum\": 2,\n                      \"description\": \"Increases the likelihood of the model introducing new topics.\"\n                  }\n              },\n              \"required\": [\n                  \"prompt\"\n              ]\n          },\n          {\n              \"title\": \"Messages\",\n              \"properties\": {\n                  \"messages\": {\n                      \"type\": \"array\",\n                      \"description\": \"An array of message objects representing the conversation history.\",\n                      \"items\": {\n                          \"type\": \"object\",\n                          \"properties\": {\n                              \"role\": {\n                                  \"type\": \"string\",\n                                  \"description\": \"The role of the message sender (e.g., 'user', 'assistant', 'system', 'tool').\"\n                              },\n                              \"content\": {\n                                  \"type\": \"string\",\n                                  \"description\": \"The content of the message as a string.\"\n                              }\n                          },\n                          \"required\": [\n                              \"role\",\n                              \"content\"\n                          ]\n                      }\n                  },\n                  \"functions\": {\n                      \"type\": \"array\",\n                      \"items\": {\n                          \"type\": \"object\",\n                          \"properties\": {\n                              \"name\": {\n                                  \"type\": \"string\"\n                              },\n                              \"code\": {\n                                  \"type\": \"string\"\n                              }\n                          },\n                          \"required\": [\n                              \"name\",\n                              \"code\"\n                          ]\n                      }\n                  },\n                  \"tools\": {\n                      \"type\": \"array\",\n                      \"description\": \"A list of tools available for the assistant to use.\",\n                      \"items\": {\n                          \"type\": \"object\",\n                          \"oneOf\": [\n                              {\n                                  \"properties\": {\n                                      \"name\": {\n                                          \"type\": \"string\",\n                                          \"description\": \"The name of the tool. More descriptive the better.\"\n                                      },\n                                      \"description\": {\n                                          \"type\": \"string\",\n                                          \"description\": \"A brief description of what the tool does.\"\n                                      },\n                                      \"parameters\": {\n                                          \"type\": \"object\",\n                                          \"description\": \"Schema defining the parameters accepted by the tool.\",\n                                          \"properties\": {\n                                              \"type\": {\n                                                  \"type\": \"string\",\n                                                  \"description\": \"The type of the parameters object (usually 'object').\"\n                                              },\n                                              \"required\": {\n                                                  \"type\": \"array\",\n                                                  \"description\": \"List of required parameter names.\",\n                                                  \"items\": {\n                                                      \"type\": \"string\"\n                                                  }\n                                              },\n                                              \"properties\": {\n                                                  \"type\": \"object\",\n                                                  \"description\": \"Definitions of each parameter.\",\n                                                  \"additionalProperties\": {\n                                                      \"type\": \"object\",\n                                                      \"properties\": {\n                                                          \"type\": {\n                                                              \"type\": \"string\",\n                                                              \"description\": \"The data type of the parameter.\"\n                                                          },\n                                                          \"description\": {\n                                                              \"type\": \"string\",\n                                                              \"description\": \"A description of the expected parameter.\"\n                                                          }\n                                                      },\n                                                      \"required\": [\n                                                          \"type\",\n                                                          \"description\"\n                                                      ]\n                                                  }\n                                              }\n                                          },\n                                          \"required\": [\n                                              \"type\",\n                                              \"properties\"\n                                          ]\n                                      }\n                                  },\n                                  \"required\": [\n                                      \"name\",\n                                      \"description\",\n                                      \"parameters\"\n                                  ]\n                              },\n                              {\n                                  \"properties\": {\n                                      \"type\": {\n                                          \"type\": \"string\",\n                                          \"description\": \"Specifies the type of tool (e.g., 'function').\"\n                                      },\n                                      \"function\": {\n                                          \"type\": \"object\",\n                                          \"description\": \"Details of the function tool.\",\n                                          \"properties\": {\n                                              \"name\": {\n                                                  \"type\": \"string\",\n                                                  \"description\": \"The name of the function.\"\n                                              },\n                                              \"description\": {\n                                                  \"type\": \"string\",\n                                                  \"description\": \"A brief description of what the function does.\"\n                                              },\n                                              \"parameters\": {\n                                                  \"type\": \"object\",\n                                                  \"description\": \"Schema defining the parameters accepted by the function.\",\n                                                  \"properties\": {\n                                                      \"type\": {\n                                                          \"type\": \"string\",\n                                                          \"description\": \"The type of the parameters object (usually 'object').\"\n                                                      },\n                                                      \"required\": {\n                                                          \"type\": \"array\",\n                                                          \"description\": \"List of required parameter names.\",\n                                                          \"items\": {\n                                                              \"type\": \"string\"\n                                                          }\n                                                      },\n                                                      \"properties\": {\n                                                          \"type\": \"object\",\n                                                          \"description\": \"Definitions of each parameter.\",\n                                                          \"additionalProperties\": {\n                                                              \"type\": \"object\",\n                                                              \"properties\": {\n                                                                  \"type\": {\n                                                                      \"type\": \"string\",\n                                                                      \"description\": \"The data type of the parameter.\"\n                                                                  },\n                                                                  \"description\": {\n                                                                      \"type\": \"string\",\n                                                                      \"description\": \"A description of the expected parameter.\"\n                                                                  }\n                                                              },\n                                                              \"required\": [\n                                                                  \"type\",\n                                                                  \"description\"\n                                                              ]\n                                                          }\n                                                      }\n                                                  },\n                                                  \"required\": [\n                                                      \"type\",\n                                                      \"properties\"\n                                                  ]\n                                              }\n                                          },\n                                          \"required\": [\n                                              \"name\",\n                                              \"description\",\n                                              \"parameters\"\n                                          ]\n                                      }\n                                  },\n                                  \"required\": [\n                                      \"type\",\n                                      \"function\"\n                                  ]\n                              }\n                          ]\n                      }\n                  },\n                  \"response_format\": {\n                      \"title\": \"JSON Mode\",\n                      \"type\": \"object\",\n                      \"properties\": {\n                          \"type\": {\n                              \"type\": \"string\",\n                              \"enum\": [\n                                  \"json_object\",\n                                  \"json_schema\"\n                              ]\n                          },\n                          \"json_schema\": {}\n                      }\n                  },\n                  \"raw\": {\n                      \"type\": \"boolean\",\n                      \"default\": false,\n                      \"description\": \"If true, a chat template is not applied and you must adhere to the specific model's expected formatting.\"\n                  },\n                  \"stream\": {\n                      \"type\": \"boolean\",\n                      \"default\": false,\n                      \"description\": \"If true, the response will be streamed back incrementally using SSE, Server Sent Events.\"\n                  },\n                  \"max_tokens\": {\n                      \"type\": \"integer\",\n                      \"default\": 256,\n                      \"description\": \"The maximum number of tokens to generate in the response.\"\n                  },\n                  \"temperature\": {\n                      \"type\": \"number\",\n                      \"default\": 0.6,\n                      \"minimum\": 0,\n                      \"maximum\": 5,\n                      \"description\": \"Controls the randomness of the output; higher values produce more random results.\"\n                  },\n                  \"top_p\": {\n                      \"type\": \"number\",\n                      \"minimum\": 0.001,\n                      \"maximum\": 1,\n                      \"description\": \"Adjusts the creativity of the AI's responses by controlling how many possible words it considers. Lower values make outputs more predictable; higher values allow for more varied and creative responses.\"\n                  },\n                  \"top_k\": {\n                      \"type\": \"integer\",\n                      \"minimum\": 1,\n                      \"maximum\": 50,\n                      \"description\": \"Limits the AI to choose from the top 'k' most probable words. Lower values make responses more focused; higher values introduce more variety and potential surprises.\"\n                  },\n                  \"seed\": {\n                      \"type\": \"integer\",\n                      \"minimum\": 1,\n                      \"maximum\": 9999999999,\n                      \"description\": \"Random seed for reproducibility of the generation.\"\n                  },\n                  \"repetition_penalty\": {\n                      \"type\": \"number\",\n                      \"minimum\": 0,\n                      \"maximum\": 2,\n                      \"description\": \"Penalty for repeated tokens; higher values discourage repetition.\"\n                  },\n                  \"frequency_penalty\": {\n                      \"type\": \"number\",\n                      \"minimum\": -2,\n                      \"maximum\": 2,\n                      \"description\": \"Decreases the likelihood of the model repeating the same lines verbatim.\"\n                  },\n                  \"presence_penalty\": {\n                      \"type\": \"number\",\n                      \"minimum\": -2,\n                      \"maximum\": 2,\n                      \"description\": \"Increases the likelihood of the model introducing new topics.\"\n                  }\n              },\n              \"required\": [\n                  \"messages\"\n              ]\n          }\n      ]\n  }",
      "language": "json"
    },
    {
      "code": "{\n      \"oneOf\": [\n          {\n              \"type\": \"object\",\n              \"properties\": {\n                  \"response\": {\n                      \"type\": \"string\",\n                      \"description\": \"The generated text response from the model\"\n                  },\n                  \"usage\": {\n                      \"type\": \"object\",\n                      \"description\": \"Usage statistics for the inference request\",\n                      \"properties\": {\n                          \"prompt_tokens\": {\n                              \"type\": \"number\",\n                              \"description\": \"Total number of tokens in input\",\n                              \"default\": 0\n                          },\n                          \"completion_tokens\": {\n                              \"type\": \"number\",\n                              \"description\": \"Total number of tokens in output\",\n                              \"default\": 0\n                          },\n                          \"total_tokens\": {\n                              \"type\": \"number\",\n                              \"description\": \"Total number of input and output tokens\",\n                              \"default\": 0\n                          }\n                      }\n                  },\n                  \"tool_calls\": {\n                      \"type\": \"array\",\n                      \"description\": \"An array of tool calls requests made during the response generation\",\n                      \"items\": {\n                          \"type\": \"object\",\n                          \"properties\": {\n                              \"arguments\": {\n                                  \"type\": \"object\",\n                                  \"description\": \"The arguments passed to be passed to the tool call request\"\n                              },\n                              \"name\": {\n                                  \"type\": \"string\",\n                                  \"description\": \"The name of the tool to be called\"\n                              }\n                          }\n                      }\n                  }\n              },\n              \"required\": [\n                  \"response\"\n              ]\n          },\n          {\n              \"type\": \"string\",\n              \"format\": \"binary\"\n          }\n      ]\n  }",
      "language": "json"
    },
    {
      "code": "{\n  \"type\": \"http\",\n  \"name\": \"human-readable-name\",\n\n\n  // Port configuration (optional - defaults to 80/443)\n  \"http_port\": 80,\n  \"https_port\": 443,\n\n\n  // Host configuration\n  \"host\": {\n    \"ipv4\": \"10.0.0.1\",\n    \"ipv6\": \"fe80::\",\n    \"network\": {\n      \"tunnel_id\": \"0191dce4-9ab4-7fce-b660-8e5dec5172da\"\n    }\n  }\n}",
      "language": "json"
    },
    {
      "code": "{\n  \"type\": \"http\",\n  \"name\": \"human-readable-name\",\n\n\n  // Port configuration (optional - defaults to 80/443)\n  \"http_port\": 80,\n  \"https_port\": 443,\n\n\n  // Hostname Host (with DNS resolver)\n  \"host\": {\n    \"hostname\": \"example.com\",\n    \"resolver_network\": {\n      \"tunnel_id\": \"0191dce4-9ab4-7fce-b660-8e5dec5172da\",\n      \"resolver_ips\": [\"10.0.0.1\"] // Optional\n    }\n  }\n}",
      "language": "json"
    },
    {
      "code": "{\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"my-worker\",\n    \"main\": \"src/index.js\",\n    \"vpc_services\": [\n      {\n        \"binding\": \"PRIVATE_API\",\n        \"service_id\": \"e6a0817c-79c5-40ca-9776-a1c019defe70\",\n        \"remote\": true\n      }\n    ]\n  }",
      "language": "jsonc"
    },
    {
      "code": "name = \"my-worker\"\n  main = \"src/index.js\"\n\n\n  [[vpc_services]]\n  binding = \"PRIVATE_API\"\n  service_id = \"e6a0817c-79c5-40ca-9776-a1c019defe70\"\n  remote = true # When true, utilizes [remote bindings](/workers/development-testing/#remote-bindings) to allow access to the VPC Service during local development.",
      "language": "toml"
    },
    {
      "code": "{\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"vpc_services\": [\n      {\n        \"binding\": \"PRIVATE_API\",\n        \"service_id\": \"daf43e8c-a81a-4242-9912-4a2ebe4fdd79\",\n        \"remote\": true\n      },\n      {\n        \"binding\": \"PRIVATE_DATABASE\",\n        \"service_id\": \"453b6067-1327-420d-89b3-2b6ad16e6551\",\n        \"remote\": true\n      },\n      {\n        \"binding\": \"INTERNAL_CACHE\",\n        \"service_id\": \"6c39b574-237e-49f4-852a-cea5a93ed8f9\",\n        \"remote\": true\n      }\n    ]\n  }",
      "language": "jsonc"
    },
    {
      "code": "[[vpc_services]]\n  binding = \"PRIVATE_API\"\n  service_id = \"daf43e8c-a81a-4242-9912-4a2ebe4fdd79\"\n  remote = true\n\n\n  [[vpc_services]]\n  binding = \"PRIVATE_DATABASE\"\n  service_id = \"453b6067-1327-420d-89b3-2b6ad16e6551\"\n  remote = true\n\n\n  [[vpc_services]]\n  binding = \"INTERNAL_CACHE\"\n  service_id = \"6c39b574-237e-49f4-852a-cea5a93ed8f9\"\n  remote = true",
      "language": "toml"
    },
    {
      "code": "npx wrangler vpc service create api-service \\\n  --type http \\\n  --tunnel-id <YOUR_TUNNEL_ID> \\\n  --ipv4 10.0.1.50 \\\n  --http-port 8080",
      "language": "bash"
    },
    {
      "code": "npx wrangler vpc service create api-service \\\n  --type http \\\n  --tunnel-id <YOUR_TUNNEL_ID> \\\n  --hostname internal-hostname.example.com",
      "language": "bash"
    },
    {
      "code": "{\n    \"$schema\": \"./node_modules/wrangler/config-schema.json\",\n    \"name\": \"private-api-gateway\",\n    \"main\": \"src/index.js\",\n    \"compatibility_date\": \"2024-01-01\",\n    \"vpc_services\": [\n      {\n        \"binding\": \"INTERNAL_API\",\n        \"service_id\": \"<YOUR_SERVICE_ID>\",\n        \"remote\": true\n      }\n    ]\n  }",
      "language": "jsonc"
    },
    {
      "code": "name = \"private-api-gateway\"\n  main = \"src/index.js\"\n  compatibility_date = \"2024-01-01\"\n\n\n  [[vpc_services]]\n  binding = \"INTERNAL_API\"\n  service_id = \"<YOUR_SERVICE_ID>\"\n  remote = true",
      "language": "toml"
    },
    {
      "code": "export default {\n  async fetch(request, env, ctx) {\n    try {\n      // Fetch data from internal API and process it before returning\n      const response = await env.INTERNAL_API.fetch(\"http://10.0.1.50:8080/api/data\");\n\n\n      // Use the response of the private API to perform more logic in Workers, before returning the final response\n      return response;\n    } catch (error) {\n      return new Response(\"Service unavailable\", { status: 503 });\n    }\n  },\n};",
      "language": "js"
    },
    {
      "code": "npx wrangler deploy",
      "language": "bash"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Playground",
      "id": "playground"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h2",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h3",
      "text": "Input",
      "id": "input"
    },
    {
      "level": "h3",
      "text": "Output",
      "id": "output"
    },
    {
      "level": "h2",
      "text": "API Schemas",
      "id": "api-schemas"
    },
    {
      "level": "h2",
      "text": "Create and run tunnel (`cloudflared`)",
      "id": "create-and-run-tunnel-(`cloudflared`)"
    },
    {
      "level": "h2",
      "text": "Cloud platform setup guides",
      "id": "cloud-platform-setup-guides"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "VPC Service configuration",
      "id": "vpc-service-configuration"
    },
    {
      "level": "h2",
      "text": "Configuration example",
      "id": "configuration-example"
    },
    {
      "level": "h2",
      "text": "Workers binding configuration",
      "id": "workers-binding-configuration"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "1. Set up Cloudflare Tunnel",
      "id": "1.-set-up-cloudflare-tunnel"
    },
    {
      "level": "h2",
      "text": "2. Create the Workers VPC Service",
      "id": "2.-create-the-workers-vpc-service"
    },
    {
      "level": "h2",
      "text": "3. Configure your Worker",
      "id": "3.-configure-your-worker"
    },
    {
      "level": "h2",
      "text": "4. Implement the Worker",
      "id": "4.-implement-the-worker"
    },
    {
      "level": "h2",
      "text": "5. Deploy and test",
      "id": "5.-deploy-and-test"
    }
  ],
  "url": "llms-txt#zephyr-7b-beta-awq-beta",
  "links": []
}