{
  "title": "Manual Installation",
  "content": "If you wish to customize the Dokploy installation on your server, you can modify several enviroment variables:\n\n1. **PORT** - Ideal for avoiding conflicts with other services.\n2. **TRAEFIK\\_SSL\\_PORT** - Set to another port if you want to use a different port for SSL.\n3. **TRAEFIK\\_PORT** - Set to another port if you want to use a different port for Traefik.\n4. **ADVERTISE\\_ADDR** - Set to another IP address if you want to use a different IP address for Swarm.\n5. **RELEASE\\_TAG** - Set to a dokploy docker hub tag(latest, canary, feature, etc)\n6. **DATABASE\\_URL** - Set to another database url if you want to use a different database.\n7. **REDIS\\_HOST** - Set to another redis url if you want to use a different redis.\n8. **TZ** - Set to another timezone if you want to use a different timezone.\n\n## Installation Script\n\nHere is a Bash script for installing Dokploy on a Linux server. Make sure you run this as root on a Linux environment that is not a container, and ensure ports 80, 443, and 3000 are free.\n\n```bash\n#!/bin/bash\ninstall_dokploy() {\n    if [ \"$(id -u)\" != \"0\" ]; then\n        echo \"This script must be run as root\" >&2\n        exit 1\n    fi\n\n# check if is Mac OS\n    if [ \"$(uname)\" = \"Darwin\" ]; then\n        echo \"This script must be run on Linux\" >&2\n        exit 1\n    fi\n\n# check if is running inside a container\n    if [ -f /.dockerenv ]; then\n        echo \"This script must be run on Linux\" >&2\n        exit 1\n    fi\n\n# check if something is running on port 80\n    if ss -tulnp | grep ':80 ' >/dev/null; then\n        echo \"Error: something is already running on port 80\" >&2\n        exit 1\n    fi\n\n# check if something is running on port 443\n    if ss -tulnp | grep ':443 ' >/dev/null; then\n        echo \"Error: something is already running on port 443\" >&2\n        exit 1\n    fi\n\n# check if something is running on port 3000\n    if ss -tulnp | grep ':3000 ' >/dev/null; then\n        echo \"Error: something is already running on port 3000\" >&2\n        echo \"Dokploy requires port 3000 to be available. Please stop any service using this port.\" >&2\n        exit 1\n    fi\n\ncommand_exists() {\n      command -v \"$@\" > /dev/null 2>&1\n    }\n\nif command_exists docker; then\n      echo \"Docker already installed\"\n    else\n      curl -sSL https://get.docker.com | sh\n    fi\n\ndocker swarm leave --force 2>/dev/null\n\nget_ip() {\n        local ip=\"\"\n        \n        # Try IPv4 first\n        # First attempt: ifconfig.io\n        ip=$(curl -4s --connect-timeout 5 https://ifconfig.io 2>/dev/null)\n        \n        # Second attempt: icanhazip.com\n        if [ -z \"$ip\" ]; then\n            ip=$(curl -4s --connect-timeout 5 https://icanhazip.com 2>/dev/null)\n        fi\n        \n        # Third attempt: ipecho.net\n        if [ -z \"$ip\" ]; then\n            ip=$(curl -4s --connect-timeout 5 https://ipecho.net/plain 2>/dev/null)\n        fi\n\n# If no IPv4, try IPv6\n        if [ -z \"$ip\" ]; then\n            # Try IPv6 with ifconfig.io\n            ip=$(curl -6s --connect-timeout 5 https://ifconfig.io 2>/dev/null)\n            \n            # Try IPv6 with icanhazip.com\n            if [ -z \"$ip\" ]; then\n                ip=$(curl -6s --connect-timeout 5 https://icanhazip.com 2>/dev/null)\n            fi\n            \n            # Try IPv6 with ipecho.net\n            if [ -z \"$ip\" ]; then\n                ip=$(curl -6s --connect-timeout 5 https://ipecho.net/plain 2>/dev/null)\n            fi\n        fi\n\nif [ -z \"$ip\" ]; then\n            echo \"Error: Could not determine server IP address automatically (neither IPv4 nor IPv6).\" >&2\n            echo \"Please set the ADVERTISE_ADDR environment variable manually.\" >&2\n            echo \"Example: export ADVERTISE_ADDR=<your-server-ip>\" >&2\n            exit 1\n        fi\n\nadvertise_addr=\"${ADVERTISE_ADDR:-$(get_ip)}\"\n    echo \"Using advertise address: $advertise_addr\"\n\ndocker swarm init --advertise-addr $advertise_addr\n    \n     if [ $? -ne 0 ]; then\n        echo \"Error: Failed to initialize Docker Swarm\" >&2\n        exit 1\n    fi\n\necho \"Swarm initialized\"\n\ndocker network rm -f dokploy-network 2>/dev/null\n    docker network create --driver overlay --attachable dokploy-network\n\necho \"Network created\"\n\nmkdir -p /etc/dokploy\n\nchmod 777 /etc/dokploy\n\ndocker service create \\\n    --name dokploy-postgres \\\n    --constraint 'node.role==manager' \\\n    --network dokploy-network \\\n    --env POSTGRES_USER=dokploy \\\n    --env POSTGRES_DB=dokploy \\\n    --env POSTGRES_PASSWORD=amukds4wi9001583845717ad2 \\\n    --mount type=volume,source=dokploy-postgres,target=/var/lib/postgresql/data \\\n    postgres:16\n\ndocker service create \\\n    --name dokploy-redis \\\n    --constraint 'node.role==manager' \\\n    --network dokploy-network \\\n    --mount type=volume,source=dokploy-redis,target=/data \\\n    redis:7\n\ndocker pull traefik:v3.6.1\n    docker pull dokploy/dokploy:latest\n\n# Installation\n    docker service create \\\n      --name dokploy \\\n      --replicas 1 \\\n      --network dokploy-network \\\n      --mount type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock \\\n      --mount type=bind,source=/etc/dokploy,target=/etc/dokploy \\\n      --mount type=volume,source=dokploy,target=/root/.docker \\\n      --publish published=3000,target=3000,mode=host \\\n      --update-parallelism 1 \\\n      --update-order stop-first \\\n      --constraint 'node.role == manager' \\\n      -e ADVERTISE_ADDR=$advertise_addr \\\n      dokploy/dokploy:latest\n\ndocker run -d \\\n        --name dokploy-traefik \\\n        --restart always \\\n        -v /etc/dokploy/traefik/traefik.yml:/etc/traefik/traefik.yml \\\n        -v /etc/dokploy/traefik/dynamic:/etc/dokploy/traefik/dynamic \\\n        -v /var/run/docker.sock:/var/run/docker.sock:ro \\\n        -p 80:80/tcp \\\n        -p 443:443/tcp \\\n        -p 443:443/udp \\\n        traefik:v3.6.1\n\ndocker network connect dokploy-network dokploy-traefik\n\n# Optional: Use docker service create instead of docker run\n    #   docker service create \\\n    #     --name dokploy-traefik \\\n    #     --constraint 'node.role==manager' \\\n    #     --network dokploy-network \\\n    #     --mount type=bind,source=/etc/dokploy/traefik/traefik.yml,target=/etc/traefik/traefik.yml \\\n    #     --mount type=bind,source=/etc/dokploy/traefik/dynamic,target=/etc/dokploy/traefik/dynamic \\\n    #     --mount type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock,readonly \\\n    #     --publish mode=host,published=443,target=443 \\\n    #     --publish mode=host,published=80,target=80 \\\n    #     --publish mode=host,published=443,target=443,protocol=udp \\\n    #     traefik:v3.6.1\n\nGREEN=\"\\033[0;32m\"\n    YELLOW=\"\\033[1;33m\"\n    BLUE=\"\\033[0;34m\"\n    NC=\"\\033[0m\" # No Color\n\nformat_ip_for_url() {\n        local ip=\"$1\"\n        if echo \"$ip\" | grep -q ':'; then\n            # IPv6\n            echo \"[${ip}]\"\n        else\n            # IPv4\n            echo \"${ip}\"\n        fi\n    }\n\nformatted_addr=$(format_ip_for_url \"$advertise_addr\")\n    echo \"\"\n    printf \"${GREEN}Congratulations, Dokploy is installed!${NC}\\n\"\n    printf \"${BLUE}Wait 15 seconds for the server to start${NC}\\n\"\n    printf \"${YELLOW}Please go to http://${formatted_addr}:3000${NC}\\n\\n\"\n}\n\nupdate_dokploy() {\n    echo \"Updating Dokploy...\"\n    \n    # Pull the latest image\n    docker pull dokploy/dokploy:latest\n\n# Update the service\n    docker service update --image dokploy/dokploy:latest dokploy\n\necho \"Dokploy has been updated to the latest version.\"\n}",
  "code_samples": [],
  "headings": [
    {
      "level": "h2",
      "text": "Installation Script",
      "id": "installation-script"
    }
  ],
  "url": "llms-txt#manual-installation",
  "links": []
}