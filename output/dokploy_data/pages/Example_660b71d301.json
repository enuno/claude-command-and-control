{
  "title": "Example",
  "content": "In this tutorial, we will create a simple application using Docker Compose and route the traffic to an accessible domain.\n\n<Callout type=\"info\">\n  **Note**: There are two ways to configure domains for Docker Compose applications:\n\n1. **Using Dokploy Domains** (Recommended): Configure domains directly in the Dokploy UI through the **Domains** tab. See the [Domains guide](/docs/core/domains) for details.\n  2. **Manual Configuration**: Configure domains using Traefik labels in your Docker Compose file (shown in this tutorial).\n\nThis tutorial demonstrates the manual method. For most users, we recommend using the Dokploy Domains feature as it's simpler and doesn't require editing your Docker Compose file.\n</Callout>\n\n1. Create a new project.\n2. Create a new service `Compose` and select the Compose Type `Docker Compose`.\n3. Fork this repository: [Repo](https://github.com/Dokploy/docker-compose-test).\n4. Select Provider type: GitHub or Git.\n5. Select the repository: `Dokploy/docker-compose-test`.\n6. Select the branch: `main`.\n7. Set the Compose Path to `./docker-compose.yml` and save.\n   <img alt=\"Docker compose configuration\" src={__img0} placeholder=\"blur\" />\n\n### Updating Your `docker-compose.yml`\n\nAdd the following to your existing `docker-compose.yml` file:\n\n1. Add the network `dokploy-network` to each service.\n2. Add labels for Traefik to make the service accessible through the domain.\n\nLet's modify the following compose file to make it work with Dokploy:\n\nUpdated version with dokploy-network and Traefik labels:\n\nimport { Callout } from 'fumadocs-ui/components/callout';\n\n<Callout type=\"warn\">\n  Don't set container\\_name property to the each service, it will cause issues with logs, metrics and other features\n</Callout>\n\n{/* :::danger\nDon't set container_name property to the each service, it will cause issues with logs, metrics and other features\n\nMake sure to point the A record to the domain you want to use for your service.\n\n<ImageZoom src=\"/assets/images/compose/domain.png\" width={800} height={630} alt=\"home og image\" className=\"rounded-lg\" />\n\nDeploy the application by clicking on \"deploy\" and wait for the deployment to complete. Then give Traefik about 10 seconds to generate the certificates. You can then access the application through the domain you have set.\n\n<ImageZoom src=\"/assets/images/compose/application.png\" width={800} height={630} alt=\"home og image\" className=\"rounded-lg\" />\n\n1. Set unique names for each router: `traefik.http.routers.<unique-name>`\n2. Set unique names for each service: `traefik.http.services.<unique-name>`\n3. Ensure the network is linked to the `dokploy-network`\n4. Set the entry point to websecure and the certificate resolver to letsencrypt to generate certificates.\n5. **For Docker Stack**: If you're using Docker Stack (Docker Swarm mode), place the labels under `deploy.labels` instead of directly under `labels`. See the [Domains guide](/docs/core/docker-compose/domains) for the Docker Stack configuration example.",
  "code_samples": [
    {
      "code": "version: \"3\"\n\nservices:\n  next-app:\n    build:\n      context: ./next-app\n      dockerfile: prod.Dockerfile\n      args:\n        ENV_VARIABLE: ${ENV_VARIABLE}\n        NEXT_PUBLIC_ENV_VARIABLE: ${NEXT_PUBLIC_ENV_VARIABLE}\n    restart: always\n    ports:\n      - 3000:3000\n    networks:\n      - my_network\nnetworks:\n  my_network:\n    external: true",
      "language": "yaml"
    },
    {
      "code": "version: \"3\"\n\nservices:\n  next-app:\n    build:\n      context: ./next-app\n      dockerfile: prod.Dockerfile\n      args:\n        ENV_VARIABLE: ${ENV_VARIABLE}\n        NEXT_PUBLIC_ENV_VARIABLE: ${NEXT_PUBLIC_ENV_VARIABLE}\n    restart: always\n    ports:\n      - 3000\n    networks:\n      - dokploy-network\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.<unique-name>.rule=Host(`your-domain.com`)\"\n      - \"traefik.http.routers.<unique-name>.entrypoints=websecure\"\n      - \"traefik.http.routers.<unique-name>.tls.certResolver=letsencrypt\"\n      - \"traefik.http.services.<unique-name>.loadbalancer.server.port=3000\"\nnetworks:\n  dokploy-network:\n    external: true",
      "language": "yaml"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Tutorial",
      "id": "tutorial"
    },
    {
      "level": "h3",
      "text": "Steps",
      "id": "steps"
    },
    {
      "level": "h3",
      "text": "Updating Your `docker-compose.yml`",
      "id": "updating-your-`docker-compose.yml`"
    }
  ],
  "url": "llms-txt#example",
  "links": []
}