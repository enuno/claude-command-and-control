{
  "title": "Docker Compose",
  "content": "import { Callout } from \"fumadocs-ui/components/callout\";\n\nDokploy integrates with Docker Compose and Docker Stack to provide flexible deployment solutions. Whether you are developing locally or deploying at scale, Dokploy facilitates application management through these powerful Docker tools.\n\n### Configuration Methods\n\nDokploy provides two methods for creating Docker Compose configurations:\n\n* **Docker Compose**: Ideal for standard Docker Compose configurations.\n* **Stack**: Geared towards orchestrating applications using Docker Swarm. Note that some Docker Compose features, such as `build`, are not available in this mode.\n\nConfigure the source of your code, the way your application is built, and also manage actions like deploying, updating, and deleting your application, and stopping it.\n\nA code editor within Dokploy allows you to specify environment variables for your Docker Compose file. By default, Dokploy creates a `.env` file in the specified Docker Compose file path.\n\nMonitor each service individually within Dokploy. If your application consists of multiple services, each can be monitored separately to ensure optimal performance.\n\nAccess detailed logs for each service through the Dokploy log viewer, which can help in troubleshooting and ensuring the stability of your services.\n\nYou can view the last 10 deployments of your application. When you deploy your application in real time, a new deployment record will be created and it will gradually show you how your application is being built.\n\nWe also offer a button to cancel deployments that are in queue. Note that those in progress cannot be canceled.\n\nWe provide a webhook so that you can trigger your own deployments by pushing to your GitHub, Gitea, GitLab, Bitbucket repository.\n\nThis section provides advanced configuration options for experienced users. It includes tools for custom commands within the container and volumes.\n\n* **Command**: Dokploy has a defined command to run the Docker Compose file, ensuring complete control through the UI. However, you can append flags or options to the command.\n\n<Callout type=\"info\" title=\"Using Private Registries with Docker Stack\">\n    If you're deploying with **Docker Stack** (Docker Swarm mode) using **replicas** and a **private registry**, you need to add the `--with-registry-auth` flag to ensure that registry credentials are properly distributed to all nodes in your swarm.\n\nWithout this flag, worker nodes may fail to pull images from private registries, resulting in authentication errors like \"no such image\" or \"docker authentication failed\".\n\nThis flag ensures that Docker shares the registry credentials with all swarm nodes during deployment, enabling them to authenticate and pull images from your private registry (GitHub Container Registry, Docker Hub private repos, etc.).\n  </Callout>\n\n* **Volumes**: To ensure data persistence across deployments, configure storage volumes for your application.\n\n<ImageZoom src=\"/assets/images/compose/overview.png\" width={800} height={630} quality={100} priority alt=\"home og image\" className=\"rounded-lg\" />\n\n<Callout title=\"Volumes\">\n  Docker volumes are a way to persist data generated and used by Docker containers. They are particularly useful for maintaining data between container restarts or for sharing data among different containers.\n\nDokploy supports two methods for data persistence in Docker Compose:\n\n### Method 1: Bind Mounts (../files folder)\n\nUse bind mounts for simple persistence needs, configuration files, or when you need direct access to files on the host. This method maps a directory from the host machine into the container.\n\n**Important:** Avoid using absolute host paths, as they will be cleaned up during deployments:\n\nInstead, use the `../files` folder to ensure your data persists between deployments:\n\n**Use bind mounts when:**\n\n* You need simple data persistence\n  * You're mounting configuration files or small datasets\n  * You want direct file access on the host\n  * You don't need automated backups via Dokploy's Volume Backups feature\n\n### Method 2: Docker Named Volumes\n\nUse Docker named volumes when you need automated backups, better portability, or Docker-managed storage. Named volumes are managed by Docker and can be backed up automatically using Dokploy's [Volume Backups](/docs/core/volume-backups) feature.\n\n**Use named volumes when:**\n\n* You need automated backups to S3 (via Volume Backups)\n  * You want Docker-managed storage (better portability)\n  * You're storing databases or large datasets\n  * You need backup and restore capabilities\n\n**Note:** Volume Backups only work with Docker named volumes, not with bind mounts (`../files`). If you need backup functionality, use named volumes instead of bind mounts.\n\n### Choosing the Right Method\n\n| Feature               | Bind Mounts (../files) | Named Volumes               |\n  | --------------------- | ---------------------- | --------------------------- |\n  | Simple persistence    | ✅ Yes                  | ✅ Yes                       |\n  | Direct host access    | ✅ Yes                  | ❌ No                        |\n  | Automated backups     | ❌ No                   | ✅ Yes                       |\n  | Docker-managed        | ❌ No                   | ✅ Yes                       |\n  | Best for config files | ✅ Yes                  | ⚠️ Possible but less common |\n  | Best for databases    | ⚠️ Possible            | ✅ Recommended               |\n\n**Important:** If you need to use files from your repository (configuration files, scripts, etc.), you must move them to Dokploy's File Mounts (via Advanced → Mounts) instead of mounting them directly from the repository. When using AutoDeploy, Dokploy performs a `git clone` on each deployment, which clears the repository directory. Mounting files directly from your repository using relative paths (e.g., `./` or `./config/file.conf`) will cause them to be lost or empty in subsequent deployments. See the [Troubleshooting guide](/docs/core/troubleshooting#using-files-from-your-repository) for more details.\n</Callout>\n\n## Keyboard Shortcuts\n\nTo help speed up navigating there are some built in keyboard shortcuts for\nnavigating tabs on docker compose pages. Similar to GitHub these are all prefixed\nwith the `g` key so to use them press `g` and then the shortcut key.\n\n| Key | Tab            |\n| --- | -------------- |\n| `g` | General        |\n| `e` | Environment    |\n| `u` | Domains        |\n| `d` | Deployments    |\n| `b` | Backups        |\n| `s` | Schedules      |\n| `v` | Volume Backups |\n| `l` | Logs           |\n| `m` | Monitoring     |\n| `a` | Advanced       |",
  "code_samples": [
    {
      "code": "volumes:\n    - \"/folder:/path/in/container\" ❌",
      "language": "yaml"
    },
    {
      "code": "volumes:\n    - \"../files/my-database:/var/lib/mysql\" ✅\n    - \"../files/my-configs:/etc/my-app/config\" ✅",
      "language": "yaml"
    },
    {
      "code": "services:\n    app:\n      image: dokploy/dokploy:latest\n      volumes:\n        - my-database:/var/lib/mysql\n        - my-app-data:/app/data\n\n  volumes:\n    my-database:\n    my-app-data:",
      "language": "yaml"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "Configuration Methods",
      "id": "configuration-methods"
    },
    {
      "level": "h3",
      "text": "General",
      "id": "general"
    },
    {
      "level": "h3",
      "text": "Enviroment",
      "id": "enviroment"
    },
    {
      "level": "h3",
      "text": "Monitoring",
      "id": "monitoring"
    },
    {
      "level": "h3",
      "text": "Logs",
      "id": "logs"
    },
    {
      "level": "h3",
      "text": "Deployments",
      "id": "deployments"
    },
    {
      "level": "h3",
      "text": "Advanced",
      "id": "advanced"
    },
    {
      "level": "h2",
      "text": "Keyboard Shortcuts",
      "id": "keyboard-shortcuts"
    }
  ],
  "url": "llms-txt#docker-compose",
  "links": []
}