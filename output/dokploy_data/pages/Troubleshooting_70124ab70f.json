{
  "title": "Troubleshooting",
  "content": "import { Callout } from \"fumadocs-ui/components/callout\";\n\n## Applications Domain Not Working?\n\nYou see the deployment succeeded, and logs are running, but the domain isn't working? Here's what to check:\n\n1. **Correct Port Mapping**: Ensure the domain is using the correct port for your application. For example, if you're using Next.js, the port should be `3000`, or for Laravel, it should be `8000`. If you change the app port, update the domain to reflect that.\n\n2. **Avoid Using `Ports` in Advanced Settings**: Generally, there's no need to use the `Ports` feature unless you want to access your app via `IP:port`. Leaving this feature enabled may interfere with your domain.\n\n3. **Let's Encrypt Certificates**: It's crucial to point the domain to your server's IP **before** adding it in Dokploy. If the domain is added first, the certificate won't be generated, and you may need to recreate the domain or restart Traefik.\n\n4. **Listen on 0.0.0.0, Not 127.0.0.1**: If your app is bound to `127.0.0.1` (which is common in Vite apps), switch it to `0.0.0.0` to allow external access.\n\n## Logs and Monitoring Not Working After Changing Application Placement?\n\nThis is expected behavior. If the application is running on a different node (worker), the UI won't have access to logs or monitoring, as they're not on the same node.\n\n## Mounts Are Causing My Application Not to Run?\n\nDocker Swarm won't run your application if there are invalid mounts, even if the deployment shows as successful. Double-check your mounts to ensure they are valid or check the General Swarm Section\nand find your application, and you will see the real error.\n\n## Volumes in Docker Compose Not Working?\n\nFor Docker Compose, all file mounts defined in the `volumes` section will be stored in the `files` folder. This is the default directory structure:\n\n## I added a volume to my docker compose, but is not finding the volume?\n\nFor docker compose all the file mounts you've created in the volumes section will be stored to files folder, this is the default structure of the docker compose.\n\nSo instead of using this invalid way to mount a volume:\n\nYou should use this format:\n\n### Using Files from Your Repository\n\n<Callout type=\"warning\">\n  If you need to use files from your repository (e.g., configuration files, scripts, or directories), you **must** move them to Dokploy's file mounts and reference them manually using the Dokploy interface. This is because when using AutoDeploy, Dokploy performs a `git clone` operation on each deployment, which clears the repository directory. If you mount files directly from your repository using relative paths like `./` or `./docker/config/odoo.conf`, these files will be lost or empty in subsequent deployments, even though the first deployment may work correctly.\n</Callout>\n\n**Why this happens:**\n\n* On the first deployment, the files exist and are mounted correctly\n* On subsequent deployments, Dokploy cleans the directory and performs a fresh `git clone`\n* Docker loses the reference to the files that were in the filesystem, and the new files have a new reference\n* This causes mounted directories and files to be empty or missing inside the container\n\n1. Go to **Advanced** → **Mounts** in your Docker Compose application\n2. Create a new **File Mount** for each file or directory you need from your repository\n3. Copy the content from your repository files into the File Mount content field\n4. Specify the file path for your configuration\n5. Reference the file mount in your `docker-compose.yml` using the `../files/` path:\n\n**Example:**\nInstead of mounting directly from your repository:\n\nUse Dokploy's file mounts:\n\n## Logs Not Loading When Deploying to a Remote Server?\n\nThere are a few potential reasons for this:\n\n1. **Slow Server:**: If the server is too slow, it may struggle to handle concurrent requests, leading to SSL handshake errors.\n2. **Insufficient Disk Space:** If the server doesn't have enough disk space, the logs may not load.\n\n## Docker Compose Domain Not Working?\n\nWhen adding a domain in your Docker Compose file, it's not necessary to expose the ports directly. Simply specify the port where your app is running. Exposing the ports can lead to conflicts with other applications or ports.\n\nExample of what not to do:\n\nRecommended approach:\n\nThis is only valid for Docker Compose not for Docker Stack.\n\nWhen using Docker Stack, the ports are exposed automatically, so you don't need to specify them explicitly.\n\nExample of what not to do:\n\nRecommended approach:\n\nThen, when creating the domain in Dokploy, specify the service name and port, like this:\n\n* Another reason of the domains are not working it may be because the healthchecks you've defined are not working, so this will cause the domains never work, so you have two options:\n\n1. Remove the healthcheck from the service\n2. Make sure the healthcheck is working\n\n## Templates and Compose Services Returning 404\n\nIf you're experiencing 404 errors when accessing services created from templates (like Docker Registry, Stalwart, Uptime Kuma, etc.) or Docker Compose services, this is usually related to how Traefik handles routing for different service types.\n\n### Understanding the Difference\n\nDokploy uses two different methods for configuring Traefik routing:\n\n1. **Applications** (Nixpacks, Dockerfile, Buildpacks): Use the Traefik **file system** for routing configuration\n   * Domain changes are applied automatically\n   * No need to redeploy after updating domains\n   * Configuration files are created in Traefik's dynamic configuration directory\n\n2. **Templates and Compose Services**: Use Traefik **labels** for routing configuration\n   * Require redeployment after any domain changes\n   * Labels are read from Docker container metadata\n   * Learn more about Traefik labels in the [official documentation](https://doc.traefik.io/traefik/reference/routing-configuration/other-providers/docker/#configuration-examples)\n\nWhen working with Templates or Compose services:\n\n1. **Configure your domain** in the Domains section of your service\n2. **Redeploy the service** - This is crucial! The domain changes won't take effect until you redeploy\n3. Wait for the deployment to complete\n4. Your service should now be accessible via the configured domain\n\n<Callout type=\"info\">\n  **Key Tip:** Every time you add, modify, or remove a domain from a Template or Compose service, you must redeploy for the changes to take effect.\n</Callout>\n\n## Getting \"Bad Gateway Error\" When Accessing Your Application Domain\n\nIf you're encountering a Bad Gateway Error when accessing your application through its domain, this typically indicates one of several common configuration issues:\n\n1. **Port Mismatch**: The configured port might be incorrect\n2. **Listen Address Configuration**: The service might be listening only on `127.0.0.1` instead of `0.0.0.0`\n\n### Common Solution for Modern JavaScript Frameworks\n\nThis issue frequently occurs with modern JavaScript frameworks like Vite, Astro, or Vue.js applications. By default, these frameworks often listen only on localhost (`127.0.0.1`).\n\nTo resolve this, you need to configure your application to listen on all available network interfaces (`0.0.0.0`).\n\n#### Example Configuration for Vite\n\nHere's how to properly configure a Vite application:\n\n### Framework-Specific Notes\n\n* **Vite Apps**: Use the configuration above\n* **Astro**: Similar configuration in `astro.config.mjs`\n* **Vue.js**: Configure in `vite.config.js` if using Vite\n* **Other Frameworks**: Check your framework's documentation for network interface configuration\n\nRemember to deploy again your application after making these changes for them to take effect.\n\n## Docker Compose Volume Mounts\n\nWhen using Docker Compose, you can configure volume mounts in your `docker-compose.yml` file:\n\n### Use of closed network when restarting Traefik\n\nIf you see this error in the logs of Traefik, it means that the network is being closed, this is the normal behavior when restarting Traefik.\n\n### Creating Configuration Files\n\nIf you need to create configuration files before deploying your compose setup:\n\n1. Go to Advanced -> Mounts\n2. Create a new File Mount\n3. Add your configuration content in the content field\n4. Specify the file path for your configuration\n\nNote: All File Mounts are automatically created in the `/files` directory. For example, if you create a file named `my-config.json`, it will be available at `/files/my-config.json`.\n\nYou can then reference this configuration file in your `docker-compose.yml`:\n\n<Callout type=\"info\">\n  **Important for AutoDeploy users:** If you have configuration files or directories in your repository that you need to mount into your containers, you must copy their content to Dokploy's File Mounts (via Advanced → Mounts) instead of mounting them directly from the repository. This ensures the files persist across deployments, as the repository directory is cleaned and re-cloned on each AutoDeploy.\n</Callout>\n\n## Failed to initialize Docker Swarm\n\nError response from daemon: must specify a listening address because the address to advertise is not recognized as a system address, and a system's IP address to use could not be uniquely identified\n\nThis error occurs when the Docker Swarm is not properly initialized.\n\nTo fix this, you need to assign a the public IP address to the Docker Swarm, ideally you can use a private IP address from your network, but if you require features from docker swarm, you\nwill need to use a public IP address.\n\n## My Dokploy UI Instance is Not Accessible\n\nIf you can't access your Dokploy UI instance, there could be several causes. While this issue won't occur with Dokploy Cloud (where our team manages the infrastructure), self-hosted instances might encounter configuration problems.\n\nLet's go through the possible cases where your Dokploy UI instance might be inaccessible:\n\n### 1. Insufficient Storage Space\n\nIf you've made many deployments and don't have available space on your server, the Dokploy database might enter recovery mode, preventing access to the user interface. Here's a quick solution to clear cache and free up server space:\n\n### 2. Container Race Condition During Restart\n\nDuring a restart, a race condition might occur where Dokploy's dependent containers don't start in the correct order. To troubleshoot this:\n\nFirst, verify the running containers:\n\nYou should see all four of these containers running:\n\nIf all four containers are running but you still can't access the interface, it's time to debug:\n\n### Debugging Process\n\n#### 1. Check Container Logs\n\nStart by examining the logs of each container:\n\n#### 2. Common Database Connection Issue\n\nA common case is when the Postgres container starts after the Dokploy container, preventing Dokploy from connecting to the database. You might see logs like this when running `docker service logs dokploy`:\n\nTo fix this, restart the Dokploy service:\n\n```bash\ndocker service scale dokploy=0",
  "code_samples": [
    {
      "code": "/application-name\n    /code\n    /files",
      "language": "unknown"
    },
    {
      "code": "volumes:\n    - \"/folder:/path/in/container\" ❌",
      "language": "yaml"
    },
    {
      "code": "volumes:\n    - \"../files/my-database:/var/lib/mysql\" ✅\n    - \"../files/my-configs:/etc/my-app/config\" ✅",
      "language": "yaml"
    },
    {
      "code": "volumes:\n  - \"../files/my-config.json:/etc/my-app/config\" ✅\n  - \"../files/my-directory:/path/in/container\" ✅",
      "language": "yaml"
    },
    {
      "code": "volumes:\n  - ./:/mnt/extra-addons/va_subscription_18 ❌\n  - ./docker/config/odoo.conf:/etc/odoo/odoo.conf ❌",
      "language": "yaml"
    },
    {
      "code": "volumes:\n  - ../files/va_subscription_18:/mnt/extra-addons/va_subscription_18 ✅\n  - ../files/odoo.conf:/etc/odoo/odoo.conf ✅",
      "language": "yaml"
    },
    {
      "code": "services:\n  app:\n    image: dokploy/dokploy:latest\n    ports:\n      - 3000:3000",
      "language": "yaml"
    },
    {
      "code": "services:\n  app:\n    image: dokploy/dokploy:latest\n    ports:\n      - 3000\n      - 80",
      "language": "yaml"
    },
    {
      "code": "services:\n  app:\n    image: dokploy/dokploy:latest\n    ports:\n      - 3000",
      "language": "yaml"
    },
    {
      "code": "services:\n  app:\n    image: dokploy/dokploy:latest\n    expose:\n      - 3000",
      "language": "yaml"
    },
    {
      "code": "domain: my-app.com\nserviceName: app\nport: 3000",
      "language": "yaml"
    },
    {
      "code": "import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\n\nexport default defineConfig({\n\tplugins: [react()],\n\tpreview: {\n\t\tport: 3000,\n\t\thost: true,    // This enables listening on all network interfaces\n\t},\n\tserver: {        // Also add this for development server\n\t\thost: true,    // This enables listening on all network interfaces\n\t\tport: 3000\n\t}\n});",
      "language": "ts"
    },
    {
      "code": "volumes:\n  - my-database:/var/lib/mysql",
      "language": "yaml"
    },
    {
      "code": "05/23/25, 12:21:12 PM info 2025-05-23T09:21:12Z ERR: error=\"accept tcp [::]:443: use of closed network connection\" entryPointName=websecure\n05/23/25, 12:21:12 PM info 2025-05-23T09:21:12Z ERR: error=\"accept tcp [::]:9000: use of closed network connection\" entryPointName=traefik\n05/23/25, 12:21:12 PM info 2025-05-23T09:21:12Z ERR: error=\"accept tcp [::]:80: use of closed network connection\" entryPointName=web\n05/23/25, 12:21:12 PM info 2025-05-23T09:21:12Z ERR: error=\"close tcp [::]:9000: use of closed network connection\" entryPointName=traefik\n05/23/25, 12:21:12 PM info 2025-05-23T09:21:12Z ERR: error=\"close tcp [::]:443: use of closed network connection\" entryPointName=websecure\n05/23/25, 12:21:12 PM info 2025-05-23T09:21:12Z ERR: error=\"close tcp [::]:80: use of closed network connection\" entryPointName=web",
      "language": "bash"
    },
    {
      "code": "volumes:\n  - ../files/my-config.json:/etc/my-app/config",
      "language": "yaml"
    },
    {
      "code": "curl -sSL https://dokploy.com/install.sh | ADVERTISE_ADDR=your-ip sh",
      "language": "bash"
    },
    {
      "code": "docker system prune -a\ndocker builder prune -a\ndocker image prune -a",
      "language": "bash"
    },
    {
      "code": "docker ps",
      "language": "bash"
    },
    {
      "code": "2a5b955c32b6   dokploy/dokploy:latest      \"docker-entrypoint.s…\"   4 days ago     Up 4 days     0.0.0.0:3000->3000/tcp, :::3000->3000/tcp                                                                             dokploy.1.4bkuszk98muz372kw5mvwkw0h\n5a989bf52bc6   postgres:16                 \"docker-entrypoint.s…\"   4 days ago     Up 4 days     5432/tcp                                                                                                              dokploy-postgres.1.9hvjaxrmby7ex2denjtwo0csf\na29d56342175   redis:7                     \"docker-entrypoint.s…\"   4 days ago     Up 4 days     6379/tcp                                                                                                              dokploy-redis.1.epl51a9bt8yr7ur0f1akeeyuk\n05be01c5612f   traefik:v2.5                \"/entrypoint.sh trae…\"   4 days ago     Up 4 days     0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:443->443/tcp, :::443->443/tcp, 0.0.0.0:8080->8080/tcp, :::8080->8080/tcp   dokploy-traefik.1.2oktabjmfu558x2d2dy6czt8m",
      "language": "bash"
    },
    {
      "code": "docker service logs dokploy # Dokploy UI\ndocker service logs dokploy-postgres # Postgres\ndocker service logs dokploy-redis # Redis\ndocker logs dokploy-traefik # Traefik",
      "language": "bash"
    },
    {
      "code": "> dokploy@v0.22.3 start /app\n> node -r dotenv/config dist/server.mjs\n\nDefault middlewares already exists\nNetwork is already initilized\nMain config already exists\nDefault traefik config already exists\nMigration failed [Error: getaddrinfo ENOTFOUND dokploy-postgres] {\n  errno: -3008,\n  code: 'ENOTFOUND',\n  syscall: 'getaddrinfo',\n  hostname: 'dokploy-postgres'\n}\nSetting up cron jobs....\nMain Server Error [Error: getaddrinfo ENOTFOUND dokploy-postgres] {\n  errno: -3008,\n  code: 'ENOTFOUND',\n  syscall: 'getaddrinfo',\n  hostname: 'dokploy-postgres'\n}",
      "language": "ts"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Applications Domain Not Working?",
      "id": "applications-domain-not-working?"
    },
    {
      "level": "h2",
      "text": "Logs and Monitoring Not Working After Changing Application Placement?",
      "id": "logs-and-monitoring-not-working-after-changing-application-placement?"
    },
    {
      "level": "h2",
      "text": "Mounts Are Causing My Application Not to Run?",
      "id": "mounts-are-causing-my-application-not-to-run?"
    },
    {
      "level": "h2",
      "text": "Volumes in Docker Compose Not Working?",
      "id": "volumes-in-docker-compose-not-working?"
    },
    {
      "level": "h2",
      "text": "I added a volume to my docker compose, but is not finding the volume?",
      "id": "i-added-a-volume-to-my-docker-compose,-but-is-not-finding-the-volume?"
    },
    {
      "level": "h3",
      "text": "Using Files from Your Repository",
      "id": "using-files-from-your-repository"
    },
    {
      "level": "h2",
      "text": "Logs Not Loading When Deploying to a Remote Server?",
      "id": "logs-not-loading-when-deploying-to-a-remote-server?"
    },
    {
      "level": "h2",
      "text": "Docker Compose Domain Not Working?",
      "id": "docker-compose-domain-not-working?"
    },
    {
      "level": "h2",
      "text": "Templates and Compose Services Returning 404",
      "id": "templates-and-compose-services-returning-404"
    },
    {
      "level": "h3",
      "text": "Understanding the Difference",
      "id": "understanding-the-difference"
    },
    {
      "level": "h3",
      "text": "Solution",
      "id": "solution"
    },
    {
      "level": "h2",
      "text": "Getting \"Bad Gateway Error\" When Accessing Your Application Domain",
      "id": "getting-\"bad-gateway-error\"-when-accessing-your-application-domain"
    },
    {
      "level": "h3",
      "text": "Common Causes",
      "id": "common-causes"
    },
    {
      "level": "h3",
      "text": "Common Solution for Modern JavaScript Frameworks",
      "id": "common-solution-for-modern-javascript-frameworks"
    },
    {
      "level": "h3",
      "text": "Framework-Specific Notes",
      "id": "framework-specific-notes"
    },
    {
      "level": "h2",
      "text": "Docker Compose Volume Mounts",
      "id": "docker-compose-volume-mounts"
    },
    {
      "level": "h3",
      "text": "Use of closed network when restarting Traefik",
      "id": "use-of-closed-network-when-restarting-traefik"
    },
    {
      "level": "h3",
      "text": "Creating Configuration Files",
      "id": "creating-configuration-files"
    },
    {
      "level": "h2",
      "text": "Failed to initialize Docker Swarm",
      "id": "failed-to-initialize-docker-swarm"
    },
    {
      "level": "h2",
      "text": "My Dokploy UI Instance is Not Accessible",
      "id": "my-dokploy-ui-instance-is-not-accessible"
    },
    {
      "level": "h3",
      "text": "1. Insufficient Storage Space",
      "id": "1.-insufficient-storage-space"
    },
    {
      "level": "h3",
      "text": "2. Container Race Condition During Restart",
      "id": "2.-container-race-condition-during-restart"
    },
    {
      "level": "h3",
      "text": "Debugging Process",
      "id": "debugging-process"
    }
  ],
  "url": "llms-txt#troubleshooting",
  "links": []
}